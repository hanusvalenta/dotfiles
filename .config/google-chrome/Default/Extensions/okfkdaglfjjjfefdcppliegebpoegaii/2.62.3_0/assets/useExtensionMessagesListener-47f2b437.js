import{c as b,j as s,a as I,r as Le,I as ze}from"./Icon-709cfd25.js";import{r as o}from"./index-8b3efc3f.js";import{i as ce,e as Me,l as Fe,G as Oe,Q as Ke,H as Ve,T as $e,U as Ue}from"./index-7ec85ebb.js";import{D as de}from"./DocumentIcon-a843a224.js";import{z as H,w as Be,x as He,aW as We}from"./store-09c6166c.js";import{B as _}from"./Button-28102c4e.js";import{T as Xe,a as qe,b as Ge,e as Ye,c as Qe,V as ue}from"./Tooltip-902b3a9d.js";import{u as pe,a as Je}from"./react-redux-52a3bd12.js";import{g as Ze,l as et}from"./dwResultsDB-40675cfa.js";import{O as tt,C as at,S as st,P as rt,R as nt,T as ot,b as it,D as lt,c as me}from"./ScrollArea-64a9fc3d.js";import{c as ct,u as xe,P as L,e as dt,b as ut,g as W,a as R,l as pt,h as mt}from"./Label-7e7b0c43.js";import{c as xt}from"./index-c412bae6.js";import{B as ft,b as ht,P as wt}from"./index-dec57878.js";const gt=e=>({taskId:e.suggestedScribesTask.taskId,isAnalyzing:e.suggestedScribesTask.isAnalyzing,error:e.suggestedScribesTask.error}),vt=({appIconName:e,iconUrl:a,size:t=44,className:r})=>{const[n,l]=o.useState(!1),d=b("rounded mix-blend-multiply",{hidden:!n}),u=t,p=t/2;return s.jsx("div",{className:b("relative h-fit w-fit",r),style:{width:u,height:u},children:s.jsx("div",{className:b("relative z-[1] flex items-center justify-center rounded-full bg-gradient-to-b from-white to-slate-50","shadow-[0px_2px_6px_rgba(30,41,59,0.04),_0px_1px_2px_rgba(30,41,59,0.06)]"),style:{width:p*2,height:p*2},children:s.jsx("img",{src:a,onLoad:()=>l(!0),className:d,width:p,height:p,"data-testid":"app-icon-image",alt:`${e} logo`})})})},fe=o.forwardRef(({type:e,className:a,...t},r)=>s.jsx("div",{ref:r,className:b("rounded-lg border border-slate-400 border-opacity-15 px-6 py-5 dark:border-slate-700 dark:border-opacity-25",e==="linked"?"cursor-pointer bg-slate-50 hover:border-opacity-25 dark:bg-slate-900 dark:hover:border-opacity-50":"bg-white dark:bg-slate-800",a),...t})),yt=({logo:e,icon:a,iconColor:t="gray",leftIcon:r,iconPosition:n="center",title:l,capturedText:d,stepsText:u,ctaLabel:p="View",onCta:i,onDelete:g,className:v,onButtonClick:j,hoverOverlay:T=!0,topIcon:h,location:x,type:c,buttonIcon:y})=>{const w=()=>{j&&!T&&(H("suggested_scribe_card_clicked",{location:x,type:c}),j())},f=()=>{H("suggested_scribe_card_cta_clicked",{location:x}),i==null||i()},k=N=>{N.stopPropagation(),H("suggested_scribe_card_delete_clicked",{location:x,type:c}),g==null||g()},E=N=>{N.stopPropagation(),H("suggested_scribe_card_arrow_clicked",{location:x,type:c}),j==null||j()},C=N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),f())},P=r??(e?s.jsx(de,{logo:e}):a?s.jsx(de,{icon:a,color:t}):null);return s.jsxs(fe,{className:b(`flex flex-row overflow-hidden gap-4 p-[18px] max-h-[130px] relative cursor-pointer dark:text-brand-50 dark:bg-gradient-to-b dark:from-white/25 dark:to-slate-400/20 ${n==="top"?"items-start":n==="bottom"?"items-end":"items-center"} dark:bg-brand-900/20 rounded-xl`,T&&"group",v),style:{boxShadow:"0 1px 2px 0 rgba(15, 23, 42, 0.05)"},onClick:w,children:[P&&s.jsx("div",{className:`shrink-0 flex ${n==="top"?"items-start":n==="bottom"?"items-end":"items-center"} justify-center`,children:P}),s.jsxs("div",{className:"flex flex-col gap-[6px] w-full",children:[s.jsxs("div",{className:"p-0 max-w-full",children:[s.jsx("div",{className:"flex",children:h&&s.jsx("div",{className:"mb-3 flex items-center",children:h})}),s.jsx("h3",{className:"text-sm font-semibold leading-5 m-0 text-slate-800 dark:text-slate-200 max-w-full overflow-hidden text-ellipsis line-clamp-2 max-h-[42px]",style:{width:"calc(100% + 50px)"},children:l})]}),s.jsx("div",{className:"p-0 pr-8 overflow-hidden text-ellipsis line-clamp-2 max-h-[32px]",children:s.jsxs("p",{className:"text-xs font-normal text-slate-500 dark:text-brand-50 m-0",children:[d,u?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-200 dark:text-brand-50 px-2",children:"|"}),u]}):null]})})]}),h&&j&&s.jsx(_,{variant:"ghost",size:"small",onClick:E,className:"absolute bottom-4 right-4 p-2 text-slate-600 dark:text-brand-50",icon:y||ce}),T&&s.jsxs("div",{className:b("absolute inset-0 z-10 flex items-center justify-center transition-opacity duration-150 rounded-xl opacity-0 backdrop-blur-sm bg-white/60 group-hover:opacity-100 group-hover:pointer-events-auto dark:bg-gradient-to-b dark:from-white dark:to-brand-300"),onClick:f,role:"button",tabIndex:0,onKeyDown:C,children:[s.jsx(_,{size:"small",variant:"secondary",onClick:f,className:"mx-auto text-slate-800",children:p}),g&&s.jsx(Xe,{children:s.jsxs(qe,{children:[s.jsx(Ge,{children:s.jsx(_,{icon:Me,variant:"secondary",size:"small",onClick:k,className:"absolute top-2 right-2 backdrop-blur-sm z-10 text-slate-400 hover:text-red-500"})}),s.jsx(Ye,{children:s.jsx(Qe,{children:"Discard"})})]})})]}),!h&&j&&s.jsx(_,{variant:"ghost",size:"small",onClick:E,className:"absolute bottom-4 right-4 p-2 text-slate-600 dark:text-brand-50",icon:y||ce})]})};function bt(e){var r,n,l;const a=(n=(r=e==null?void 0:e.active_organization)==null?void 0:r.super_organization)==null?void 0:n.id,t=(l=e==null?void 0:e.active_organization)==null?void 0:l.id;return!a||!t?null:`${a}|${t}`}const kt=()=>{const{userData:e}=pe(Be),a=pe(He),t=(a==null?void 0:a.lrr2025)??(a==null?void 0:a.lrr_2025),r=!!t&&(typeof t=="object"||typeof t=="string"),n=o.useMemo(()=>bt(e),[e]),[l,d]=o.useState([]),[u,p]=o.useState(!1),[i,g]=o.useState(null),v=o.useCallback(async()=>{var T;if(!r){d([]),p(!1),g(null);return}if(!n){d([]),p(!1),g(null);return}try{p(!0),g(null);const h=((T=await Ze(n))==null?void 0:T.payload)??{},x=Array.isArray(h==null?void 0:h.scribes)?h.scribes:[];let c=x;try{const y=await et(n);if(y.length>0){const w=new Set(y);c=x.filter(f=>{const k=f==null?void 0:f.suggestion_id,E=f==null?void 0:f.id;return!w.has(k)&&!w.has(E)})}}catch{}d(c)}catch(h){const x=h instanceof Error?h.message:"Failed to load latest DW results";g(x)}finally{p(!1)}},[r,n]);o.useEffect(()=>{v();const T=h=>{((h==null?void 0:h.messageType)==="dwLatestResultsUpdated"||(h==null?void 0:h.messageType)==="dwHiddenUpdated")&&v()};try{chrome.runtime.onMessage.addListener(T)}catch{}return()=>{try{chrome.runtime.onMessage.removeListener(T)}catch{}}},[v]);const j=o.useCallback(async()=>{await v()},[v]);return{scribes:l,loading:u,error:i,refresh:j}},Tt=I("font-bold text-slate-900 dark:text-slate-100 m-0",{variants:{size:{sm:"text-lg tracking-snug",md:"text-xl tracking-snug",lg:"text-2xl tracking-tight",xl:"text-3xl tracking-tighter","2xl":"text-4xl tracking-tightest"},wrap:{wrap:"whitespace-normal",nowrap:"whitespace-nowrap",pretty:"text-pretty",balance:"text-balance"},truncate:{1:"line-clamp-1",2:"line-clamp-2",3:"line-clamp-3",4:"line-clamp-4",5:"line-clamp-5",6:"line-clamp-6"}},defaultVariants:{size:"md",wrap:"wrap"}}),jt=({as:e="span",size:a="md",weight:t="normal",color:r="slate",muted:n=!1,truncate:l,wrap:d="wrap",className:u,children:p})=>{const i=e,g=I("max-w-[75ch] m-0",{variants:{size:{xs:"text-xs tracking-wide",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"},weight:{normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold"},color:{slate:"text-slate-900 dark:text-slate-100",brand:"text-brand-600 dark:text-brand-400",red:"text-red-600 dark:text-red-400",orange:"text-orange-600 dark:text-orange-400",yellow:"text-yellow-600 dark:text-yellow-400",lime:"text-lime-600 dark:text-lime-400",green:"text-green-600 dark:text-green-400",teal:"text-teal-600 dark:text-teal-400",cyan:"text-cyan-600 dark:text-cyan-400",sky:"text-sky-600 dark:text-sky-400",blue:"text-blue-600 dark:text-blue-400",purple:"text-purple-600 dark:text-purple-400",fuchsia:"text-fuchsia-600 dark:text-fuchsia-400",pink:"text-pink-600 dark:text-pink-400",rose:"text-rose-600 dark:text-rose-400",white:"text-white dark:text-white"},muted:{false:"text-opacity-100 dark:text-opacity-100",true:"text-opacity-75 dark:text-opacity-75"},wrap:{wrap:"whitespace-normal",nowrap:"whitespace-nowrap",pretty:"text-pretty",balance:"text-balance"},truncate:{1:"line-clamp-1",2:"line-clamp-2",3:"line-clamp-3",4:"line-clamp-4",5:"line-clamp-5",6:"line-clamp-6"}},defaultVariants:{size:"md",weight:"normal",color:"slate"}});return s.jsx(i,{className:b(g({size:a,weight:t,color:r,wrap:d,truncate:l,muted:n}),u),children:p})},Et=rt,he=me,Nt=o.forwardRef(({className:e,...a},t)=>{const r=I(["fixed inset-0 z-[100000] backdrop-blur-sm","data-[state=open]:animate-in data-[state=open]:fade-in-0","data-[state=closed]:animate-out data-[state=closed]:fade-out-0","bg-slate-600/50 dark:bg-slate-900/50"]);return s.jsx(tt,{ref:t,className:b(r(),e),...a})}),Ct=nt,_t=ot,Rt=({title:e,description:a,hideClose:t,className:r,img:n,children:l,...d})=>{const u=I(["flex items-center gap-3 rounded-t-xl p-6","bg-gradient-to-b from-white dark:from-slate-800 via-white/95 dark:via-slate-800/95 via-85% to-transparent"]);return s.jsxs("header",{className:b(!n&&"sticky top-0 z-10",r),...d,children:[n&&s.jsx("img",{height:200,className:"block w-full bg-slate-300 dark:bg-slate-700 object-cover",src:n.src,alt:n.alt}),s.jsxs("div",{className:u(),children:[s.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[s.jsx(it,{className:b(Tt({size:"md"}),"-mt-0.5"),children:e}),a&&s.jsx(lt,{asChild:!0,children:s.jsx(jt,{muted:!0,size:"sm",children:a})})]}),l&&s.jsx("div",{className:"ml-auto",children:l}),!t&&s.jsx(me,{"data-testid":"closeButton",asChild:!0,children:s.jsx(_,{variant:"ghost",icon:Fe,"aria-label":"Close",className:b("size-7 shrink-0 self-start justify-self-end bg-transparent",!n&&"-mr-3 -mt-3",!!n&&"absolute right-4 top-4 bg-black/50 text-white enabled:hover:bg-black/80 enabled:dark:hover:bg-black/80 hover:opacity-100")})})]})]})},St=({children:e,className:a,...t})=>s.jsx("div",{className:b("px-6",a),...t,children:e}),Pt=({className:e,children:a,primaryAction:t,secondaryAction:r,primaryActionClose:n=!0,secondaryActionClose:l=!0,...d})=>{const u=I(["sticky bottom-0 rounded-b-xl p-6","flex flex-col justify-stretch gap-3","@[380px]:justify-end @[380px]:flex-row @[380px]:items-center","bg-gradient-to-t from-white dark:from-slate-800 via-white/95 dark:via-slate-800/95 via-85% to-transparent"]),p=l?s.jsx(he,{asChild:!0,children:s.jsx(_,{variant:"secondary",...r})}):s.jsx(_,{variant:"secondary",...r}),i=n?s.jsx(he,{asChild:!0,children:s.jsx(_,{...t})}):s.jsx(_,{...t});return s.jsxs("footer",{className:b(u(),e),...d,children:[a&&s.jsx("div",{className:"flex-1",children:a}),s.jsxs("div",{className:"@[380px]:flex-row flex flex-col-reverse gap-3",children:[r&&p,t&&i]})]})},Dt=o.forwardRef(({className:e,children:a,scrollable:t=!0,container:r,theme:n,...l},d)=>{const u=I(["@container fixed left-[50%] top-[50%] z-[100000] -translate-x-1/2 -translate-y-1/2","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=open]:slide-in-from-top-[48%] data-[state=open]:slide-in-from-left-1/2","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=closed]:slide-out-to-top-[48%] data-[state=closed]:slide-out-to-left-1/2","w-full max-w-[min(calc(100vw_-_2.5rem),_440px)] max-h-[calc(100dvh_-_5rem)]","rounded-xl first:rounded-t-xl last:rounded-b-xl","bg-white dark:bg-slate-800 dark:ring dark:ring-1 dark:ring-white/20","shadow-xl duration-200","[&_header_+_footer]:pt-0"]);return s.jsxs(Et,{container:r,children:[s.jsx(Nt,{"data-theme":n}),s.jsx(at,{ref:d,className:b(u(),e),"data-theme":n,...l,children:t?s.jsx(st,{className:"first:rounded-t-xl last:rounded-b-xl [&>[data-radix-scroll-area-viewport]]:max-h-[calc(100dvh_-_5rem)] [&_[data-orientation=vertical]]:py-2",type:"auto",children:a}):a})]})});var J="ToastProvider",[Z,At,It]=xt("Toast"),[we,Pa]=ct("Toast",[It]),[Lt,X]=we(J),ge=e=>{const{__scopeToast:a,label:t="Notification",duration:r=5e3,swipeDirection:n="right",swipeThreshold:l=50,children:d}=e,[u,p]=o.useState(null),[i,g]=o.useState(0),v=o.useRef(!1),j=o.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${J}\`. Expected non-empty \`string\`.`),s.jsx(Z.Provider,{scope:a,children:s.jsx(Lt,{scope:a,label:t,duration:r,swipeDirection:n,swipeThreshold:l,toastCount:i,viewport:u,onViewportChange:p,onToastAdd:o.useCallback(()=>g(T=>T+1),[]),onToastRemove:o.useCallback(()=>g(T=>T-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:j,children:d})})};ge.displayName=J;var ve="ToastViewport",zt=["F8"],ee="toast.viewportPause",te="toast.viewportResume",ye=o.forwardRef((e,a)=>{const{__scopeToast:t,hotkey:r=zt,label:n="Notifications ({hotkey})",...l}=e,d=X(ve,t),u=At(t),p=o.useRef(null),i=o.useRef(null),g=o.useRef(null),v=o.useRef(null),j=xe(a,v,d.onViewportChange),T=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),h=d.toastCount>0;o.useEffect(()=>{const c=y=>{var w;r.length!==0&&r.every(f=>y[f]||y.code===f)&&((w=v.current)==null||w.focus())};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[r]),o.useEffect(()=>{const c=p.current,y=v.current;if(h&&c&&y){const w=()=>{if(!d.isClosePausedRef.current){const C=new CustomEvent(ee);y.dispatchEvent(C),d.isClosePausedRef.current=!0}},f=()=>{if(d.isClosePausedRef.current){const C=new CustomEvent(te);y.dispatchEvent(C),d.isClosePausedRef.current=!1}},k=C=>{!c.contains(C.relatedTarget)&&f()},E=()=>{c.contains(document.activeElement)||f()};return c.addEventListener("focusin",w),c.addEventListener("focusout",k),c.addEventListener("pointermove",w),c.addEventListener("pointerleave",E),window.addEventListener("blur",w),window.addEventListener("focus",f),()=>{c.removeEventListener("focusin",w),c.removeEventListener("focusout",k),c.removeEventListener("pointermove",w),c.removeEventListener("pointerleave",E),window.removeEventListener("blur",w),window.removeEventListener("focus",f)}}},[h,d.isClosePausedRef]);const x=o.useCallback(({tabbingDirection:c})=>{const y=u().map(w=>{const f=w.ref.current,k=[f,...Gt(f)];return c==="forwards"?k:k.reverse()});return(c==="forwards"?y.reverse():y).flat()},[u]);return o.useEffect(()=>{const c=v.current;if(c){const y=w=>{var k,E,C;const f=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!f){const P=document.activeElement,N=w.shiftKey;if(w.target===c&&N){(k=i.current)==null||k.focus();return}const z=x({tabbingDirection:N?"backwards":"forwards"}),V=z.findIndex(A=>A===P);re(z.slice(V+1))?w.preventDefault():N?(E=i.current)==null||E.focus():(C=g.current)==null||C.focus()}};return c.addEventListener("keydown",y),()=>c.removeEventListener("keydown",y)}},[u,x]),s.jsxs(ft,{ref:p,role:"region","aria-label":n.replace("{hotkey}",T),tabIndex:-1,style:{pointerEvents:h?void 0:"none"},children:[h&&s.jsx(ae,{ref:i,onFocusFromOutsideViewport:()=>{const c=x({tabbingDirection:"forwards"});re(c)}}),s.jsx(Z.Slot,{scope:t,children:s.jsx(L.ol,{tabIndex:-1,...l,ref:j})}),h&&s.jsx(ae,{ref:g,onFocusFromOutsideViewport:()=>{const c=x({tabbingDirection:"backwards"});re(c)}})]})});ye.displayName=ve;var be="ToastFocusProxy",ae=o.forwardRef((e,a)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...n}=e,l=X(be,t);return s.jsx(ue,{tabIndex:0,...n,ref:a,style:{position:"fixed"},onFocus:d=>{var p;const u=d.relatedTarget;!((p=l.viewport)!=null&&p.contains(u))&&r()}})});ae.displayName=be;var O="Toast",Mt="toast.swipeStart",Ft="toast.swipeMove",Ot="toast.swipeCancel",Kt="toast.swipeEnd",ke=o.forwardRef((e,a)=>{const{forceMount:t,open:r,defaultOpen:n,onOpenChange:l,...d}=e,[u,p]=dt({prop:r,defaultProp:n??!0,onChange:l,caller:O});return s.jsx(ut,{present:t||u,children:s.jsx(Ut,{open:u,...d,ref:a,onClose:()=>p(!1),onPause:W(e.onPause),onResume:W(e.onResume),onSwipeStart:R(e.onSwipeStart,i=>{i.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:R(e.onSwipeMove,i=>{const{x:g,y:v}=i.detail.delta;i.currentTarget.setAttribute("data-swipe","move"),i.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),i.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:R(e.onSwipeCancel,i=>{i.currentTarget.setAttribute("data-swipe","cancel"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),i.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),i.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:R(e.onSwipeEnd,i=>{const{x:g,y:v}=i.detail.delta;i.currentTarget.setAttribute("data-swipe","end"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),i.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),i.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),i.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),p(!1)})})})});ke.displayName=O;var[Vt,$t]=we(O,{onClose(){}}),Ut=o.forwardRef((e,a)=>{const{__scopeToast:t,type:r="foreground",duration:n,open:l,onClose:d,onEscapeKeyDown:u,onPause:p,onResume:i,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:j,onSwipeEnd:T,...h}=e,x=X(O,t),[c,y]=o.useState(null),w=xe(a,m=>y(m)),f=o.useRef(null),k=o.useRef(null),E=n||x.duration,C=o.useRef(0),P=o.useRef(E),N=o.useRef(0),{onToastAdd:z,onToastRemove:V}=x,A=W(()=>{var m;c!=null&&c.contains(document.activeElement)&&((m=x.viewport)==null||m.focus()),d()}),$=o.useCallback(m=>{!m||m===1/0||(window.clearTimeout(N.current),C.current=new Date().getTime(),N.current=window.setTimeout(A,m))},[A]);o.useEffect(()=>{const m=x.viewport;if(m){const S=()=>{$(P.current),i==null||i()},D=()=>{const M=new Date().getTime()-C.current;P.current=P.current-M,window.clearTimeout(N.current),p==null||p()};return m.addEventListener(ee,D),m.addEventListener(te,S),()=>{m.removeEventListener(ee,D),m.removeEventListener(te,S)}}},[x.viewport,E,p,i,$]),o.useEffect(()=>{l&&!x.isClosePausedRef.current&&$(E)},[l,E,x.isClosePausedRef,$]),o.useEffect(()=>(z(),()=>V()),[z,V]);const ie=o.useMemo(()=>c?Re(c):null,[c]);return x.viewport?s.jsxs(s.Fragment,{children:[ie&&s.jsx(Bt,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:ie}),s.jsx(Vt,{scope:t,onClose:A,children:Le.createPortal(s.jsx(Z.ItemSlot,{scope:t,children:s.jsx(ht,{asChild:!0,onEscapeKeyDown:R(u,()=>{x.isFocusedToastEscapeKeyDownRef.current||A(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(L.li,{tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":x.swipeDirection,...h,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:R(e.onKeyDown,m=>{m.key==="Escape"&&(u==null||u(m.nativeEvent),m.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:R(e.onPointerDown,m=>{m.button===0&&(f.current={x:m.clientX,y:m.clientY})}),onPointerMove:R(e.onPointerMove,m=>{if(!f.current)return;const S=m.clientX-f.current.x,D=m.clientY-f.current.y,M=!!k.current,F=["left","right"].includes(x.swipeDirection),U=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,Ae=F?U(0,S):0,Ie=F?0:U(0,D),Q=m.pointerType==="touch"?10:2,B={x:Ae,y:Ie},le={originalEvent:m,delta:B};M?(k.current=B,q(Ft,v,le,{discrete:!1})):Se(B,x.swipeDirection,Q)?(k.current=B,q(Mt,g,le,{discrete:!1}),m.target.setPointerCapture(m.pointerId)):(Math.abs(S)>Q||Math.abs(D)>Q)&&(f.current=null)}),onPointerUp:R(e.onPointerUp,m=>{const S=k.current,D=m.target;if(D.hasPointerCapture(m.pointerId)&&D.releasePointerCapture(m.pointerId),k.current=null,f.current=null,S){const M=m.currentTarget,F={originalEvent:m,delta:S};Se(S,x.swipeDirection,x.swipeThreshold)?q(Kt,T,F,{discrete:!0}):q(Ot,j,F,{discrete:!0}),M.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),Bt=e=>{const{__scopeToast:a,children:t,...r}=e,n=X(O,a),[l,d]=o.useState(!1),[u,p]=o.useState(!1);return Xt(()=>d(!0)),o.useEffect(()=>{const i=window.setTimeout(()=>p(!0),1e3);return()=>window.clearTimeout(i)},[]),u?null:s.jsx(wt,{asChild:!0,children:s.jsx(ue,{...r,children:l&&s.jsxs(s.Fragment,{children:[n.label," ",t]})})})},Ht="ToastTitle",Te=o.forwardRef((e,a)=>{const{__scopeToast:t,...r}=e;return s.jsx(L.div,{...r,ref:a})});Te.displayName=Ht;var Wt="ToastDescription",je=o.forwardRef((e,a)=>{const{__scopeToast:t,...r}=e;return s.jsx(L.div,{...r,ref:a})});je.displayName=Wt;var Ee="ToastAction",Ne=o.forwardRef((e,a)=>{const{altText:t,...r}=e;return t.trim()?s.jsx(_e,{altText:t,asChild:!0,children:s.jsx(se,{...r,ref:a})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ee}\`. Expected non-empty \`string\`.`),null)});Ne.displayName=Ee;var Ce="ToastClose",se=o.forwardRef((e,a)=>{const{__scopeToast:t,...r}=e,n=$t(Ce,t);return s.jsx(_e,{asChild:!0,children:s.jsx(L.button,{type:"button",...r,ref:a,onClick:R(e.onClick,n.onClose)})})});se.displayName=Ce;var _e=o.forwardRef((e,a)=>{const{__scopeToast:t,altText:r,...n}=e;return s.jsx(L.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...n,ref:a})});function Re(e){const a=[];return Array.from(e.childNodes).forEach(t=>{if(t.nodeType===t.TEXT_NODE&&t.textContent&&a.push(t.textContent),qt(t)){const r=t.ariaHidden||t.hidden||t.style.display==="none",n=t.dataset.radixToastAnnounceExclude==="";if(!r)if(n){const l=t.dataset.radixToastAnnounceAlt;l&&a.push(l)}else a.push(...Re(t))}}),a}function q(e,a,t,{discrete:r}){const n=t.originalEvent.currentTarget,l=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});a&&n.addEventListener(e,a,{once:!0}),r?mt(n,l):n.dispatchEvent(l)}var Se=(e,a,t=0)=>{const r=Math.abs(e.x),n=Math.abs(e.y),l=r>n;return a==="left"||a==="right"?l&&r>t:!l&&n>t};function Xt(e=()=>{}){const a=W(e);pt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(a)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[a])}function qt(e){return e.nodeType===e.ELEMENT_NODE}function Gt(e){const a=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)a.push(t.currentNode);return a}function re(e){const a=document.activeElement;return e.some(t=>t===a?!0:(t.focus(),document.activeElement!==a))}var Yt=ge,Qt=ye,Jt=ke,Zt=Te,ea=je,ta=Ne,aa=se;const sa=Yt,ra=o.forwardRef(({className:e,...a},t)=>s.jsx(Qt,{ref:t,className:b("fixed bottom-auto right-0 top-0 z-[999999] flex max-h-screen w-[400px] max-w-full p-4",e),...a})),na=({children:e})=>s.jsx("div",{className:"mt-3 flex flex-row gap-2",children:e}),oa=o.forwardRef(({className:e,children:a,variant:t,onClick:r,href:n,rel:l,target:d,altText:u,...p},i)=>s.jsx(ta,{asChild:!0,ref:i,onClick:r,altText:u,...p,children:s.jsx(_,{size:"small",variant:t,className:e,theme:"dark",href:n,rel:l,target:d,children:a})})),ia=o.forwardRef(({className:e,onClick:a,...t},r)=>s.jsx(aa,{ref:r,"aria-label":"Close",className:b("bg-transparent p-0 text-slate-400 opacity-0 transition-opacity hover:text-slate-100 focus:opacity-100 group-hover:opacity-100",e),asChild:!0,"toast-close":"",onClick:a,...t,children:s.jsx(_,{variant:"ghost",className:"-m-0.5 h-6 w-6 p-0",icon:Oe})})),la=o.forwardRef(({className:e,...a},t)=>s.jsx(Zt,{ref:t,className:b("m-0 font-sans text-sm font-semibold leading-5 text-slate-100",e),...a})),ca=o.forwardRef(({className:e,...a},t)=>s.jsx(ea,{ref:t,className:b("m-0 font-sans text-sm font-normal leading-5 text-slate-400",e),...a})),da=I("h-5 w-5",{variants:{variant:{info:"text-brand-400",error:"text-red-500",success:"text-green-400",warning:"text-yellow-500"}},defaultVariants:{variant:"info"}}),ua=o.forwardRef(({className:e,variant:a="info",icon:t,children:r,onDismiss:n,title:l,description:d,...u},p)=>{const i=()=>{switch(a){case"error":return Ue;case"success":return $e;case"warning":return Ve;default:return Ke}};return s.jsxs(Jt,{ref:p,className:b("data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full shadow-toast group pointer-events-auto relative flex w-[400px] max-w-full justify-between gap-2.5 overflow-hidden rounded-lg bg-slate-800 p-4 transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none",e),...u,children:[s.jsx(ze,{icon:t??i(),"data-testid":"toast-icon",className:b(da({variant:a}),"mt-0.5 size-4")}),s.jsxs("div",{className:"flex flex-1 flex-col items-start",children:[l&&s.jsx(la,{children:l}),d&&s.jsx(ca,{className:"mt-0.5",children:d}),r]}),s.jsx(ia,{onClick:n})]})}),pa=1,ma=1e6;let ne=0;function xa(){return ne=(ne+1)%Number.MAX_SAFE_INTEGER,ne.toString()}const oe=new Map,Pe=e=>{if(oe.has(e))return;const a=setTimeout(()=>{oe.delete(e),K({type:"REMOVE_TOAST",toastId:e})},ma);oe.set(e,a)},fa=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,pa)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(t=>t.id===a.toast.id?{...t,...a.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?Pe(t):e.toasts.forEach(r=>{Pe(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return a.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(t=>t.id!==a.toastId)}}},G=[];let Y={toasts:[]};function K(e){Y=fa(Y,e),G.forEach(a=>{a(Y)})}function De({...e}){const a=xa(),t=n=>K({type:"UPDATE_TOAST",toast:{...n,id:a}}),r=()=>K({type:"DISMISS_TOAST",toastId:a});return K({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:n=>{n||r()}}}),{id:a,dismiss:r,update:t}}function ha(){const[e,a]=o.useState(Y);return o.useEffect(()=>(G.push(a),()=>{const t=G.indexOf(a);t>-1&&G.splice(t,1)}),[e]),{...e,toast:De,dismiss:t=>K({type:"DISMISS_TOAST",toastId:t})}}const wa=()=>{const e=Je(),a=o.useCallback(async(t,r,n)=>{t.messageType==="loggedOut"&&(e(We()),n()),t.messageType==="pingContentScript"&&n("success"),t.messageType==="getScreenDimensions"&&n({height:screen.height,width:screen.width,screenLeft:window.screenLeft,screenTop:window.screenTop}),t.messageType==="stopTaskRecording"&&window.postMessage({messageType:"stopTaskRecording"})},[]);o.useEffect(()=>(chrome.runtime.onMessage.addListener(a),()=>{chrome.runtime.onMessage.removeListener(a)}),[a])};export{vt as A,fe as C,Ct as D,yt as S,sa as T,Dt as a,Rt as b,St as c,Pt as d,kt as e,_t as f,ra as g,ua as h,na as i,oa as j,ha as k,gt as s,De as t,wa as u};
