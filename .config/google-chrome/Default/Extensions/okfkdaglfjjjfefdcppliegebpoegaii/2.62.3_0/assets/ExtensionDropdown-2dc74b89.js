import{j as i,c as C,I as Q,a as ue}from"./Icon-709cfd25.js";import{g as ir}from"./_commonjsHelpers-de833af9.js";import{r as d,R as ee}from"./index-8b3efc3f.js";import{u as K,a as Lt}from"./react-redux-52a3bd12.js";import{t as J,U as bs,ay as Zt,az as sa,x as je,s as qe,aA as rr,z as H,C as Bt,m as Ge,f as Ut,V as Vt,$ as ws,al as aa,au as na,a6 as or,a8 as lr,aB as cr,v as dr,a0 as ur,a1 as ia,aC as ra,a2 as mr,a3 as oa,a4 as la,aD as ke,am as ca,aE as pr,aF as da,aG as hr,aH as fr,aI as gr,aJ as xr,aK as vr,aL as yr,aM as br,aN as wr,aO as _r,aP as jr,w as ua,aQ as tt,_ as kr,aR as Cr,an as Nr,aS as Tr,ag as Er,aT as Sr,aU as Ir,aV as Rr}from"./store-09c6166c.js";import{k as Pr,l as Ar,M as Ce,b as ma}from"./util-1d7a9308.js";import{b as Mr}from"./options-7a3fe88d.js";import{a as ie,b as re,c as le,T as Ke}from"./Tooltip-902b3a9d.js";import{B as G,a as pa,v as Or,w as Dr,x as Fr,y as zr,e as Lr,z as Zr,A as Br,C as Ur}from"./Button-28102c4e.js";import{g as ha,F as fa,B as ga,u as Vr,A as qr}from"./AudioSwitch-261c4a80.js";import{h as _s,H as Gr,G as Kr,r as xa,g as Hr,I as Qr,J as Wr,e as Yr,q as Jr,K as va,L as Xr,M as $r,N as eo,F as js,O as to,P as so,Q as ao,R as no,o as io,k as ro,S as oo,m as lo}from"./index-7ec85ebb.js";import{B as Oe,t as co,g as ya}from"./Badge-efc00514.js";import{f as uo}from"./index-e309a1d1.js";import{B as De}from"./Banner-ea20b168.js";import{C as mo,s as po,e as ho,S as ks,A as fo,t as go,D as ba,a as wa,b as _a,d as xo,c as vo}from"./useExtensionMessagesListener-47f2b437.js";import{g as yo,b as bo}from"./allowedDomainsDB-47151ce3.js";import{g as wo,s as _o}from"./scribeSuggestions-59cbe47c.js";import{T as jo}from"./Toolbar-76b5973a.js";import{v as ja}from"./v4-c70744d4.js";import{P as X,e as st,a as q,c as at,b as nt,u as it,g as ka,f as Ca,h as ko,j as Co,k as Cs}from"./Label-7e7b0c43.js";import{c as Ne,R as qt,I as rt,F as Ns}from"./FAIcon-237a55d1.js";import{u as Gt}from"./index-84d1a71c.js";import{b as No,T as To,P as Eo,a as So,c as Io,d as Ro,R as Po,u as Ao,A as ot,I as Mo,C as Oo}from"./Chip-fcb36839.js";import{f as Do,g as Fo}from"./index.esm-e3d6f8ec.js";import{g as zo}from"./getGuideMeOptimizedElement-ced88426.js";import{g as Ts}from"./getTargetElementAttributes-3f1109f1.js";import{c as Lo}from"./index-c412bae6.js";import{c as Na,A as Zo,D as Bo,C as Uo,a as Vo,P as qo,R as Go}from"./index-dec57878.js";import{h as Ko,u as Ho,F as Qo,a as Wo}from"./ScrollArea-64a9fc3d.js";import{S as Fe}from"./DocumentIcon-a843a224.js";import{T as Yo}from"./TextInput-531917ab.js";var Ta={exports:{}},Jo="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Xo=Jo,$o=Xo;function Ea(){}function Sa(){}Sa.resetWarningCache=Ea;var el=function(){function t(a,n,r,o,l,c){if(c!==$o){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var s={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Sa,resetWarningCache:Ea};return s.PropTypes=s,s};Ta.exports=el();var tl=Ta.exports;const Kt=ir(tl),sl=t=>d.createElement("svg",{width:81,height:28,viewBox:"0 0 81 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("path",{d:"M7.12109 19.7909C7.12109 19.8702 7.1592 19.9448 7.22445 19.99C8.51969 20.8866 10.1682 21.4659 12.2103 21.4659C15.8143 21.4659 17.6927 19.5028 17.6927 17.1471C17.6927 14.7041 16.273 13.5044 13.5427 12.3048C11.839 11.5413 10.2664 11.0178 10.2664 9.79635C10.2664 8.88023 11.1401 8.22586 12.7127 8.22586C14.0274 8.22586 15.0352 8.58064 15.9167 9.22086C16.0874 9.34482 16.3385 9.22854 16.3385 9.01777V6.91634C16.3385 6.83496 16.2984 6.75852 16.23 6.71428C15.2246 6.06427 14.0173 5.73926 12.6472 5.73926C9.72032 5.73926 7.5361 7.28793 7.5361 9.79635C7.5361 12.1739 9.30532 13.3299 11.5769 14.2897C13.9577 15.293 14.9843 15.7947 14.9843 17.1471C14.9843 18.1068 14.0014 19.023 12.0574 19.023C10.1996 19.023 8.71891 18.3722 7.55474 17.3894C7.38798 17.2487 7.12109 17.3627 7.12109 17.5807V19.7909Z",fill:"#231842"}),d.createElement("path",{d:"M19.1463 15.6857C19.1463 19.0448 21.7455 21.5096 25.1529 21.5096C26.4622 21.5096 27.6899 21.1629 28.599 20.4696C28.6581 20.4246 28.6914 20.354 28.6914 20.2798V18.3643C28.6914 18.1465 28.4229 18.0308 28.2507 18.1644C27.3538 18.8598 26.3538 19.132 25.3058 19.132C23.2526 19.132 21.7455 17.6706 21.7455 15.6857C21.7455 13.7007 23.2526 12.2393 25.3058 12.2393C26.3553 12.2393 27.3565 12.5283 28.2543 13.2166C28.4262 13.3484 28.6914 13.2326 28.6914 13.0161V11.0938C28.6914 11.0183 28.6569 10.9467 28.5962 10.9017C27.6874 10.2281 26.4609 9.86178 25.1529 9.86178C21.7455 9.86178 19.1463 12.3266 19.1463 15.6857Z",fill:"#231842"}),d.createElement("path",{d:"M30.6333 20.9582C30.6333 21.0941 30.7435 21.2042 30.8796 21.2042H32.9862C33.1222 21.2042 33.2325 21.0941 33.2325 20.9582V15.4239C33.2325 13.6135 34.3901 12.4793 36.203 12.4793C36.4905 12.4793 36.757 12.5002 36.9953 12.5348C37.1505 12.5573 37.2952 12.4407 37.2952 12.2841V10.2597C37.2952 10.1425 37.2119 10.0433 37.0953 10.0302C36.9262 10.0113 36.6942 9.99266 36.5088 9.99266C34.9362 9.99266 33.7567 10.7125 33.2325 11.8467V10.4567C33.2325 10.3209 33.1222 10.2108 32.9862 10.2108H30.8796C30.7435 10.2108 30.6333 10.3209 30.6333 10.4567V20.9582Z",fill:"#231842"}),d.createElement("path",{d:"M40.4546 8.92385C41.2846 8.92385 42.0054 8.24767 42.0054 7.37518C42.0054 6.50269 41.2846 5.82651 40.4546 5.82651C39.6028 5.82651 38.882 6.50269 38.882 7.37518C38.882 8.24767 39.6028 8.92385 40.4546 8.92385ZM39.1441 20.9582C39.1441 21.0941 39.2543 21.2042 39.3904 21.2042H41.5188C41.6549 21.2042 41.7651 21.0941 41.7651 20.9582V10.4567C41.7651 10.3209 41.6549 10.2108 41.5188 10.2108H39.3904C39.2543 10.2108 39.1441 10.3209 39.1441 10.4567V20.9582Z",fill:"#231842"}),d.createElement("path",{d:"M44.0714 20.9582C44.0714 21.0941 44.1816 21.2042 44.3177 21.2042H46.4461C46.5822 21.2042 46.6924 21.0941 46.6924 20.9582V19.6119C47.0638 20.6371 48.3525 21.4441 50.209 21.4441C53.3106 21.4441 55.7133 18.9575 55.7133 15.7075C55.7133 12.4574 53.3106 9.97084 50.209 9.97084C48.3525 9.97084 47.0638 10.7779 46.6924 11.8031V6.43738C46.6924 6.27964 46.5459 6.16268 46.3918 6.19749L44.2633 6.67846C44.1511 6.70382 44.0714 6.80343 44.0714 6.91835V20.9582ZM46.4959 15.7075C46.4959 13.788 47.9593 12.3484 49.8596 12.3484C51.7162 12.3484 53.1141 13.788 53.1141 15.7075C53.1141 17.627 51.7162 19.0666 49.8596 19.0666C47.9593 19.0666 46.4959 17.627 46.4959 15.7075Z",fill:"#231842"}),d.createElement("path",{d:"M57.0503 15.8165C57.0503 19.2847 59.4093 21.5314 62.8603 21.5314C64.7169 21.5314 65.8194 21.1651 66.8176 20.4915C66.884 20.4466 66.923 20.3712 66.923 20.2911V18.5389C66.923 18.3243 66.659 18.2037 66.4809 18.3237C65.7963 18.7849 64.6737 19.2411 62.9695 19.2411C61.0037 19.2411 59.7369 18.1286 59.6495 16.3837H67.8577C67.9843 16.3837 68.0905 16.2879 68.0991 16.1618C68.1243 15.7936 68.1243 15.4457 68.1243 15.4457C68.1243 12.392 65.9838 9.94903 62.7511 9.94903C59.4748 9.94903 57.0503 12.1957 57.0503 15.7075V15.8165ZM59.715 14.5296C59.8024 13.2209 61.1348 12.1739 62.7511 12.1739C64.2582 12.1739 65.4596 13.2427 65.4596 14.5296H59.715Z",fill:"#231842"}),d.createElement("mask",{id:"mask0_1087_64210",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:67,y:0,width:14,height:11},d.createElement("path",{d:"M80.6992 6.62529C80.8533 6.5904 80.9999 6.70746 81 6.86552V9.20927C80.9999 9.32421 80.9205 9.42394 80.8086 9.44951L74.3604 10.9095C74.2063 10.9444 74.0596 10.8273 74.0596 10.6692V8.32549C74.0598 8.21048 74.1398 8.11064 74.252 8.08525L80.6992 6.62529ZM80.6992 2.52959C80.8532 2.49472 80.9998 2.61189 81 2.76982V5.11357C81 5.22876 80.9199 5.32838 80.8076 5.35381L67.4199 8.38603C67.2659 8.42093 67.1191 8.3039 67.1191 8.1458V5.80205C67.1193 5.68707 67.1985 5.58729 67.3105 5.56181L80.6992 2.52959ZM73.7588 0.00614927C73.9127 -0.0286322 74.0593 0.0885399 74.0596 0.246384V2.59013C74.0596 2.70532 73.9794 2.80495 73.8672 2.83037L67.4199 4.29131C67.2659 4.3262 67.1191 4.2082 67.1191 4.05009V1.70732C67.1191 1.59224 67.1985 1.49263 67.3105 1.46709L73.7588 0.00614927Z",fill:"white"})),d.createElement("g",{mask:"url(#mask0_1087_64210)"},d.createElement("path",{d:"M195.101 -16.1221H60.5972C55.0743 -16.1221 50.5972 -11.6449 50.5972 -6.12207V12.4509C50.5972 17.9738 55.0743 22.4509 60.5972 22.4509H195.101C200.624 22.4509 205.101 17.9738 205.101 12.4509V-6.12207C205.101 -11.6449 200.624 -16.1221 195.101 -16.1221Z",fill:"#171633"}),d.createElement("mask",{id:"mask1_1087_64210",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:59,y:-15,width:138,height:37},d.createElement("path",{d:"M186.651 -14.6904H69.0464C63.5235 -14.6904 59.0464 -10.2133 59.0464 -4.69043V11.6978C59.0464 17.2206 63.5236 21.6978 69.0464 21.6978H186.651C192.174 21.6978 196.651 17.2206 196.651 11.6978V-4.69043C196.651 -10.2133 192.174 -14.6904 186.651 -14.6904Z",fill:"#171633"})),d.createElement("g",{mask:"url(#mask1_1087_64210)"},d.createElement("g",{filter:"url(#filter0_f_1087_64210)"},d.createElement("path",{d:"M86.2045 7.2706C84.5285 10.7547 77.0335 14.3087 71.7699 12.5857C66.5062 10.8627 61.4033 8.34652 63.0697 3.45007C64.8571 -1.80154 73.2572 -6.3992 77.8392 -0.03138C82.4213 6.33644 87.8805 3.78649 86.2045 7.2706Z",fill:"url(#paint0_linear_1087_64210)"})))),d.createElement("defs",null,d.createElement("filter",{id:"filter0_f_1087_64210",x:54.7485,y:-11.1299,width:39.7656,height:32.1641,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},d.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),d.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),d.createElement("feGaussianBlur",{stdDeviation:4,result:"effect1_foregroundBlur_1087_64210"})),d.createElement("linearGradient",{id:"paint0_linear_1087_64210",x1:67.2699,y1:1.65736,x2:81.8918,y2:10.2204,gradientUnits:"userSpaceOnUse"},d.createElement("stop",{stopColor:"#171633"}),d.createElement("stop",{offset:.44,stopColor:"#4535FF"}),d.createElement("stop",{offset:1,stopColor:"#FF579E"})))),al="/assets/sidekick-bg.png",nl="/assets/sidekick-bg-3.png",il=()=>{const[t,e]=d.useState(void 0);return d.useEffect(()=>{chrome.runtime.sendMessage({messageType:"getLastFocusedWindow"},s=>{e(s)})},[]),t},lt=({onClick:t,hasViewerLicense:e,iconClassName:s,...a})=>{const n=r=>{e&&J("viewer_click_sidekick_start_capture"),t==null||t(r)};return i.jsx(G,{"data-testid":"extensionStartRecordingButton",size:"huge",icon:_s,iconProps:{className:s||"text-brand-400"},onClick:n,...a,children:"Start Capture"})},Es=t=>{var e;try{return t.contentDocument||((e=t.contentWindow)==null?void 0:e.document)||null}catch(s){return console.warn("Cannot access iframe content:",s),null}},Ia=(t,e,s,a=0,n=0)=>{t.querySelectorAll("iframe").forEach(r=>{try{const o=Es(r);if(!o)return;const l=r.getBoundingClientRect(),c=a+l.left,u=n+l.top,m=s.createHandlers(c,u);s.eventTypes.forEach(p=>{const f=m[p];f&&o.addEventListener(p,f,{capture:s.useCapture||!1})}),e.push({iframeWindow:r.contentWindow,handlers:m}),Ia(o,e,s,c,u)}catch(o){console.warn("Cannot access iframe content:",o)}})},rl=(t,e,s=!1)=>{t.forEach(({iframeWindow:a,handlers:n})=>{try{if(!(a!=null&&a.document))return;e.forEach(r=>{const o=n[r];o&&a.document.removeEventListener(r,o,{capture:s})})}catch(r){console.warn("Error cleaning up iframe listener:",r)}})},Ra=(t,e,s,a=!1)=>{t.querySelectorAll("iframe").forEach(n=>{try{const r=Es(n);if(!r)return;r.addEventListener("keydown",s.keydown,{capture:a}),r.addEventListener("keyup",s.keyup,{capture:a}),e.push({iframeWindow:n.contentWindow,handlers:s}),Ra(r,e,s,a)}catch(r){console.warn("Cannot access iframe content for keyboard events:",r)}})},ol=(t,e=!1)=>{t.forEach(({iframeWindow:s,handlers:a})=>{try{if(!(s!=null&&s.document))return;s.document.removeEventListener("keydown",a.keydown,{capture:e}),s.document.removeEventListener("keyup",a.keyup,{capture:e})}catch(n){console.warn("Error cleaning up iframe keyboard listener:",n)}})},Pa=({isDropping:t,isEditingPin:e,isPinning:s,onDialogCancel:a})=>{const n=d.useRef([]);d.useEffect(()=>{const r=m=>{m.key==="Escape"&&((s||e)&&a?a():chrome.runtime.sendMessage({messageType:"stopDropPin"})),m.key==="Shift"&&t&&chrome.runtime.sendMessage({messageType:"setPinShiftClickThrough",value:!0})},o=m=>{m.key==="Shift"&&t&&chrome.runtime.sendMessage({messageType:"setPinShiftClickThrough",value:!1})},l=!!s;window.addEventListener("keydown",r,{capture:l}),window.addEventListener("keyup",o,{capture:l});const c={keydown:r,keyup:o},u=[];return Ra(document,u,c,l),n.current=u,()=>{window.removeEventListener("keydown",r,{capture:l}),window.removeEventListener("keyup",o,{capture:l}),ol(n.current,l),n.current=[]}},[t,s,e,a])},ll=t=>{t.preventDefault(),J("show_pro_features_workspace_page",{location:"extension_dropdown"});const e=ha({location:"extension_dropdown",frontendUrl:bs.FRONTEND_URL,variant:fa.FREE_TO_PRO});window.open(e)},cl=({onClick:t,isSidekickRefreshVersion:e=!1})=>i.jsxs("div",{className:C("group relative h-8 w-full max-w-[600px]",{"mt-4 pb-8":!e}),children:[i.jsx("div",{className:"absolute bottom-0 left-0 right-0 top-0 blur"}),i.jsxs(ie,{children:[i.jsx(re,{children:i.jsxs("button",{onClick:t,className:"absolute bottom-0 left-0 right-0 top-0 mx-auto flex w-10/12 cursor-pointer items-center justify-center gap-1 bg-transparent duration-300 ease-out group-hover:scale-105",children:[i.jsx(Q,{icon:uo,className:C("h-4 w-4 transition-all",{"text-fuchsia-300":!e,"text-[#D946EF]":e})}),i.jsx("span",{...e?{className:"text-slate-700 font-semibold"}:{className:"bg-get-pro-gradient bg-clip-text text-xs font-bold leading-5 text-transparent transition-all",style:{background:"linear-gradient(90deg, #4F46E5 0%, #D946EF 100%)",backgroundClip:"text"}},children:"Get Scribe Pro for Desktop"})]})}),i.jsx(le,{side:"bottom",variant:"compact",className:"h-fit w-52 flex-col py-1 px-3 justify-center text-center",children:"Capture guides on desktop apps, edit screenshots and more!"})]})]}),Aa=({isSidekickRefreshVersion:t=!1})=>i.jsx(cl,{onClick:ll,isSidekickRefreshVersion:t}),dl=({handleSave:t,handleDiscard:e,loading:s,showSupport:a})=>i.jsxs(i.Fragment,{children:[i.jsx(De,{role:"alert",className:"mb-2",title:"The last Scribe you created did not get saved",variant:"error",actions:[{children:"Discard",onClick:()=>{e()},disabled:s},{children:"Save",onClick:()=>{t()},disabled:s,loading:s}]}),a&&i.jsx(De,{title:"Still having issues?",variant:"info",actions:[{children:"Contact Support",onClick:()=>{window.open("https://support.scribehow.com/hc/en-us/requests/new")}}]})]}),Ma=Zt(t=>t.permissions,t=>t),ul=({isSidekickRefresh:t})=>{const{s3ConnectionError:e,backendConnectionError:s,assemblyAIConnectionError:a}=K(sa),{isMissingPermissions:n}=K(Ma),{extensionConnectionAlerts:r}=je(qe.getState()),o=r?rr(r):{internet:!1,"scribe-servers":!1,permissions:!1},[l,c]=d.useState(!1),[u,m]=d.useState(0),[p,f]=d.useState(!0),[h,g]=d.useState(!1),[N,_]=d.useState(!1);return d.useEffect(()=>{if(n){g(!0);return}if(s||e||a){J("viewed_server_error_preflight_checks",{location:"extension",backendConnectionError:s,s3ConnectionError:e,assemblyAIConnectionError:a}),f(!0);return}!s&&!e&&!a&&!n&&(_(!0),f(!1))},[s,e,a,n]),d.useEffect(()=>{u>=2&&!N?c(!0):c(!1)},[u,N]),d.useEffect(()=>{N&&l&&c(!1)},[N,l]),i.jsxs("div",{className:C({"w-[280px]":!t}),children:[h&&(o!=null&&o.permissions)?i.jsx(De,{role:"alert",title:"Update Permissions",description:'To use Scribe, please update your Scribe extension site access permissions to "On All Sites", or contact your IT administrator for assistance.',variant:"warning",actions:[{children:"Learn More",onClick:()=>{m(u+1),window.open("https://scribehow.com/shared/How_to_change_the_Scribe_extensions_permissions__On4yf-j0Qj2CWMFOyoPNIw")}}]}):p&&(o!=null&&o["scribe-servers"])?i.jsx(De,{role:"alert",className:"mb-2",title:a?"Can't connect to our voice transcription provider.":"Can't connect to Scribe servers.",description:i.jsxs(i.Fragment,{children:["Ensure that your network is not preventing this access."," ",i.jsx("a",{href:"https://support.scribehow.com/hc/en-us/articles/10885118507805-Does-Scribe-work-behind-firewalls",target:"_blank",rel:"noopener noreferrer",children:"Ask your IT department to allow these urls."})]}),variant:"error",icon:Gr,actions:[{children:"Reconnect",onClick:()=>{m(u+1),chrome.runtime.sendMessage({messageType:"checkServerAvailability"}),J("retried_server_connection_preflight_checks",{location:"extension",s3ConnectionError:e,backendConnectionError:s,assemblyAIConnectionError:a})}}]}):null,l&&i.jsx(De,{theme:t?"dark":"light",title:"Still having issues?",variant:"info",actions:[{children:"Contact Support",onClick:()=>{window.open("https://support.scribehow.com/hc/en-us/requests/new")}}]})]})},Oa=({missingPermissions:t,isSidekickRefresh:e})=>{const{networkError:s,s3ConnectionError:a,backendConnectionError:n,assemblyAIConnectionError:r}=K(sa),[o,l]=d.useState(!1),[c,u]=d.useState(!1),[m,p]=d.useState(!1),[f,h]=d.useState(!1),[g,N]=d.useState(!1),[_,w]=d.useState(!1),[O,T]=d.useState(0),[y,P]=d.useState(null);d.useEffect(()=>{let E;const k=s||a||n||r||t;return l(k),p(k),!s&&!a&&!n&&!r&&!t&&m&&(u(!0),E=setTimeout(()=>{u(!1)},2e3)),()=>{E&&clearTimeout(E)}},[s,a,n,r,t,m]),d.useEffect(()=>{chrome.runtime.sendMessage({messageType:"checkForLocalStorageScribes"},E=>{E!=null&&E.localScribeDetected?(h(!0),P(E.scribeId)):(h(!1),P(null))})},[]),d.useEffect(()=>{O>=2&&f?(w(!0),J("save_local_scribe_failed_show_support",{location:"extension"})):w(!1)},[O]);const R=()=>{N(!0),T(O+1),J("clicked_save_local_scribe",{location:"extension",scribe_id:y}),chrome.runtime.sendMessage({messageType:"endAndSaveLocalStorageScribes"},E=>{if(E.savingLocalScribe){h(!1),N(!1);return}N(!1)})},v=()=>{J("clicked_discard_local_scribe",{location:"extension",scribe_id:y}),chrome.runtime.sendMessage({messageType:"discardLocalStorageScribes"},()=>{h(!1)})};return!o&&!c&&!f?i.jsx(i.Fragment,{}):i.jsxs("div",{className:C("w-full",{"pt-0 px-10 -mt-4 pb-6":!e}),children:[i.jsx(ul,{isSidekickRefresh:e}),!o&&f&&i.jsx(dl,{handleSave:R,handleDiscard:v,loading:g,showSupport:_})]})},Da=({className:t,hoverOverlay:e=!1,onClick:s,children:a})=>i.jsxs(mo,{className:C("flex flex-row gap-4 p-[18px] relative items-center rounded-xl border-dashed inset-shadow-sm dark:bg-black/20 dark:text-brand-50 dark:bg-gradient-to-b dark:from-white/20 dark:to-slate-400/10",e&&"group cursor-pointer",t),style:{boxShadow:"0 2px 4px 0 rgba(15, 23, 42, 0.05) inset"},onClick:s,children:[a,e&&i.jsx("div",{className:"absolute inset-0 z-10 transition-opacity duration-150 rounded-xl opacity-0 pointer-events-none backdrop-blur-sm bg-white/60 group-hover:opacity-100 group-hover:pointer-events-auto"})]}),ml=({scribes:t})=>i.jsx("div",{className:"flex -space-x-2",children:t.slice(0,3).map((e,s)=>{const a=(()=>{var o,l;if(e!=null&&e.domain)return e.domain;const r=(l=(o=e==null?void 0:e.actions)==null?void 0:o[0])==null?void 0:l.url;if(r)try{return new URL(r).hostname.replace(/^www\./,"")}catch{return""}return""})(),n=(e==null?void 0:e.id)||(e==null?void 0:e.suggestion_id)||a||s;return i.jsx("div",{className:"relative h-6 w-6",style:{zIndex:s+1},children:i.jsx(fo,{appIconName:co[a||""]||a||"",iconUrl:ya(a||"",64,!0),size:24})},n)})}),pl=()=>i.jsxs("div",{className:"relative inline-block",children:[i.jsx(Q,{icon:_s,className:"text-lg text-brand-400 dark:text-brand-300"}),i.jsx(Q,{icon:pa,className:"absolute bottom-[-1px] right-[-4px] text-brand-400 text-[12px] dark:text-brand-300",style:{stroke:"white",strokeWidth:"30"}})]}),hl=()=>i.jsxs("div",{className:"relative inline-block animate-spin",style:{animationDuration:"3s"},children:[i.jsx(Q,{spin:!0,icon:_s,className:"text-lg text-brand-400 dark:text-brand-300"}),i.jsx(Q,{icon:pa,spin:!0,className:"absolute bottom-[-1px] right-[-4px] text-brand-400 text-[12px] dark:text-brand-300 stroke-white stroke-[30] dark:stroke-brand-950"})]}),Fa=({setLrrView:t,dwApptagUi:e})=>{const{isAnalyzing:s}=K(po);d.useState(0);const{scribes:a,refresh:n}=ho(),r=d.useMemo(()=>a||[],[a]);d.useEffect(()=>{(async()=>(await n(),chrome.storage.local.set({suggestedScribes:(a==null?void 0:a.length)||0})))()},[]);const[o,l]=d.useState(!1);d.useState(null);const c=K(je);(c==null?void 0:c.lrr2025)??(c==null||c.lrr_2025),(c==null?void 0:c.lrrManualRefreshEnabled)??(c==null||c.lrr_manual_refresh_enabled);const[u,m]=d.useState("idle"),[p,f]=d.useState(null);d.useEffect(()=>{const z=V=>{(V==null?void 0:V.messageType)==="dwManualRunStarted"&&(m("running"),f("Triggering run\u2026")),(V==null?void 0:V.messageType)==="dwManualRunCompleted"&&(V!=null&&V.ok?(m("success"),f("New results detected.")):(V==null?void 0:V.error)==="timeout"?(m("timeout"),f("Timed out waiting for results.")):(m("error"),f("Failed to trigger run.")))};try{chrome.runtime.onMessage.addListener(z)}catch{}return()=>{try{chrome.runtime.onMessage.removeListener(z)}catch{}}},[]);const[h,g]=d.useState(null),[N,_]=d.useState(null),[w,O]=d.useState(null);K(je);const T=h===null?null:h.length>0,y=N===null?null:N.length>0;d.useEffect(()=>{(async()=>{try{const z=await wo();O(z)}catch{O(!1)}})()},[]),d.useEffect(()=>{(async()=>{if(e)try{const z=await yo();_(z)}catch{_([])}else try{const z=await bo();g(z)}catch{g([])}})()},[e]),d.useEffect(()=>{try{chrome.storage.local.set({suggestedScribes:(a==null?void 0:a.length)||0})}catch{}},[a]),d.useEffect(()=>{h===null&&N===null||w===null||n()},[h,N,T,y,w,n]);const P=async()=>{H("no_auto_capture_domain_link_clicked",{location:"extension"}),await Bt(Ge.Options)},R=d.useMemo(()=>h===null&&N===null||w===null?"loading-auto-capture":!T&&!y?"try-auto-capture":(T||y)&&!w?"auto-capture-disabled":o||s?"loading-auto-capture":a&&a.length>0?"auto-captures-available":"no-auto-captures",[h,N,T,y,w,o,a,s]);d.useEffect(()=>{t(R)},[R,t]);const v=async()=>{var z;if(H("try_auto_capture_suggestion_clicked",{location:"extension",hasAllowedDomains:T||y,number_available_auto_capture_scribes:(a==null?void 0:a.length)||0,isAnalyzing:o,currentView:R}),(a==null?void 0:a.length)===1){await chrome.storage.local.set({previewScribeId:(z=a[0])==null?void 0:z.suggestion_id}),await Bt(Ge.RecommendedScribesSuggestedPreview);return}await Bt(Ge.RecommendedScribes)},E=async()=>{H("suggested_scribes_try_auto_capture_clicked",{location:"suggested_scribes_section",hasAllowedDomains:T||y,suggestedScribesCount:(a==null?void 0:a.length)||0,isAnalyzing:o,currentView:R}),await Bt(Ge.RecommendedScribesOnboarding)},k=async()=>{},I=async()=>{try{O(!w),await _o(!w),(T||y)&&await k()}catch(z){console.error("Failed to enable Auto-Capture",z)}},D=`${(a==null?void 0:a.length)||0} discovered workflow${((a==null?void 0:a.length)||0)>1?"s":""}`,B=()=>{switch(R){case"auto-capture-disabled":return i.jsx(Da,{className:"min-w-[280px] mx-auto",children:i.jsxs("div",{className:"flex flex-row justify-between",children:[i.jsxs("div",{className:"flex flex-col justify-between",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 text-sm font-semibold leading-5 m-0 mb-1",children:["Workflow Discovery",i.jsx(Oe,{className:"dark:text-slate-200 dark:bg-slate-600 dark:font-bold uppercase",children:"BETA"})]}),i.jsx("div",{className:"flex items-center gap-2 text-xs font-normal text-slate-500 dark:text-slate-100 m-0",children:"Turn on to get Scribes suggested from your daily workflow"})]}),i.jsx(G,{variant:"secondary",size:"small",className:"max-h-[30px]",onClick:I,children:"Turn on"})]})});case"loading-auto-capture":return i.jsx(ks,{leftIcon:i.jsx(hl,{}),type:R,location:"extension_home",className:"min-w-[280px] mx-auto mt-4",iconPosition:"top",title:"Analyzing your activity...",capturedText:"Looking for fresh highlights",hoverOverlay:!1});case"auto-captures-available":{const z=(()=>{const V=a||[];return V.length===1?`Workflow on ${V[0].title}`:V.length>2?`Workflows on ${V.slice(0,2).map(ne=>ne.title).join(", ")} and more`:`Workflows on ${V.map(ne=>ne.title).join(", ")}`})();return i.jsx(ks,{topIcon:i.jsx(ml,{scribes:r}),type:R,location:"extension_home",className:"min-w-[280px] mx-auto max-h-[130px]",iconPosition:"top",title:i.jsxs("span",{className:"inline-flex items-center gap-2",children:[D,i.jsx(Oe,{className:"dark:text-slate-200 dark:bg-slate-600 dark:font-bold uppercase",children:"BETA"})]}),capturedText:z,hoverOverlay:!1,onButtonClick:v})}case"no-auto-captures":return i.jsx(Da,{className:"min-w-[280px] mx-auto relative",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 text-sm font-semibold leading-5 m-0 mb-1",children:["No workflows discovered yet",i.jsx(Oe,{className:"dark:text-slate-200 dark:bg-slate-600 dark:font-bold uppercase",children:"BETA"})]}),i.jsxs("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-100 m-0 pr-12",children:["Don't forget to include all the domains you work with under"," ",i.jsx(G,{variant:"link",size:"small",onClick:P,className:"text-xs inline p-0 align-baseline text-brand-500 hover:text-brand-600 no-underline",children:"allowed domains"})]})]})});case"try-auto-capture":default:return i.jsx(ks,{type:R,location:"extension_home",className:"min-w-[280px] mx-auto",leftIcon:i.jsx(pl,{}),iconPosition:"top",title:i.jsxs("span",{className:"inline-flex items-center gap-2",children:["Try Workflow Discovery",i.jsx(Oe,{className:"dark:text-slate-200 dark:bg-slate-600 dark:font-bold uppercase",children:"BETA"})]}),capturedText:"The best of what you know how to do, captured while you work!",hoverOverlay:!1,onButtonClick:E})}};return i.jsx("div",{className:"pt-3 dark:pt-0 dark:border-none",children:B()})};function za({isSidePanel:t,lrr2025:e,lrrView:s}){d.useEffect(()=>{if(t)if(e&&t)switch(s){case"try-auto-capture":H("side_kick_opened",{location:"extension",try_auto_capture_visible:!0});break;case"auto-captures-available":H("side_kick_opened",{location:"extension",auto_captured_scribes_available:!0});break;case"no-auto-captures":H("side_kick_opened",{location:"extension",no_auto_capture_yet_visible:!0});break;case"auto-capture-disabled":H("side_kick_opened",{location:"extension",auto_capture_disabled:!0});break}else!e&&t&&H("side_kick_opened",{location:"extension",try_auto_capture_visible:!1})},[s,e,t])}var fl="Separator",La="horizontal",gl=["horizontal","vertical"],Za=d.forwardRef((t,e)=>{const{decorative:s,orientation:a=La,...n}=t,r=xl(a)?a:La,o=s?{role:"none"}:{"aria-orientation":r==="vertical"?r:void 0,role:"separator"};return i.jsx(X.div,{"data-orientation":r,...o,...n,ref:e})});Za.displayName=fl;function xl(t){return gl.includes(t)}var vl=Za,Ba="Toggle",Ua=d.forwardRef((t,e)=>{const{pressed:s,defaultPressed:a,onPressedChange:n,...r}=t,[o,l]=st({prop:s,onChange:n,defaultProp:a??!1,caller:Ba});return i.jsx(X.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":t.disabled?"":void 0,...r,ref:e,onClick:q(t.onClick,()=>{t.disabled||l(!o)})})});Ua.displayName=Ba;var Te="ToggleGroup",[Va,qa]=at(Te,[Ne]),Ga=Ne(),Ss=ee.forwardRef((t,e)=>{const{type:s,...a}=t;if(s==="single"){const n=a;return i.jsx(yl,{...n,ref:e})}if(s==="multiple"){const n=a;return i.jsx(bl,{...n,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${Te}\``)});Ss.displayName=Te;var[Ka,Ha]=Va(Te),yl=ee.forwardRef((t,e)=>{const{value:s,defaultValue:a,onValueChange:n=()=>{},...r}=t,[o,l]=st({prop:s,defaultProp:a??"",onChange:n,caller:Te});return i.jsx(Ka,{scope:t.__scopeToggleGroup,type:"single",value:ee.useMemo(()=>o?[o]:[],[o]),onItemActivate:l,onItemDeactivate:ee.useCallback(()=>l(""),[l]),children:i.jsx(Qa,{...r,ref:e})})}),bl=ee.forwardRef((t,e)=>{const{value:s,defaultValue:a,onValueChange:n=()=>{},...r}=t,[o,l]=st({prop:s,defaultProp:a??[],onChange:n,caller:Te}),c=ee.useCallback(m=>l((p=[])=>[...p,m]),[l]),u=ee.useCallback(m=>l((p=[])=>p.filter(f=>f!==m)),[l]);return i.jsx(Ka,{scope:t.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:c,onItemDeactivate:u,children:i.jsx(Qa,{...r,ref:e})})});Ss.displayName=Te;var[wl,_l]=Va(Te),Qa=ee.forwardRef((t,e)=>{const{__scopeToggleGroup:s,disabled:a=!1,rovingFocus:n=!0,orientation:r,dir:o,loop:l=!0,...c}=t,u=Ga(s),m=Gt(o),p={role:"group",dir:m,...c};return i.jsx(wl,{scope:s,rovingFocus:n,disabled:a,children:n?i.jsx(qt,{asChild:!0,...u,orientation:r,dir:m,loop:l,children:i.jsx(X.div,{...p,ref:e})}):i.jsx(X.div,{...p,ref:e})})}),Ht="ToggleGroupItem",Wa=ee.forwardRef((t,e)=>{const s=Ha(Ht,t.__scopeToggleGroup),a=_l(Ht,t.__scopeToggleGroup),n=Ga(t.__scopeToggleGroup),r=s.value.includes(t.value),o=a.disabled||t.disabled,l={...t,pressed:r,disabled:o},c=ee.useRef(null);return a.rovingFocus?i.jsx(rt,{asChild:!0,...n,focusable:!o,active:r,ref:c,children:i.jsx(Ya,{...l,ref:e})}):i.jsx(Ya,{...l,ref:e})});Wa.displayName=Ht;var Ya=ee.forwardRef((t,e)=>{const{__scopeToggleGroup:s,value:a,...n}=t,r=Ha(Ht,s),o={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},l=r.type==="single"?o:void 0;return i.jsx(Ua,{...l,...n,ref:e,onPressedChange:c=>{c?r.onItemActivate(a):r.onItemDeactivate(a)}})}),jl=Ss,kl=Wa,Is="Toolbar",[Cl,Pp]=at(Is,[Ne,qa]),Rs=Ne(),Ja=qa(),[Nl,Xa]=Cl(Is),$a=d.forwardRef((t,e)=>{const{__scopeToolbar:s,orientation:a="horizontal",dir:n,loop:r=!0,...o}=t,l=Rs(s),c=Gt(n);return i.jsx(Nl,{scope:s,orientation:a,dir:c,children:i.jsx(qt,{asChild:!0,...l,orientation:a,dir:c,loop:r,children:i.jsx(X.div,{role:"toolbar","aria-orientation":a,dir:c,...o,ref:e})})})});$a.displayName=Is;var en="ToolbarSeparator",Tl=d.forwardRef((t,e)=>{const{__scopeToolbar:s,...a}=t,n=Xa(en,s);return i.jsx(vl,{orientation:n.orientation==="horizontal"?"vertical":"horizontal",...a,ref:e})});Tl.displayName=en;var El="ToolbarButton",Ps=d.forwardRef((t,e)=>{const{__scopeToolbar:s,...a}=t,n=Rs(s);return i.jsx(rt,{asChild:!0,...n,focusable:!t.disabled,children:i.jsx(X.button,{type:"button",...a,ref:e})})});Ps.displayName=El;var Sl="ToolbarLink",Il=d.forwardRef((t,e)=>{const{__scopeToolbar:s,...a}=t,n=Rs(s);return i.jsx(rt,{asChild:!0,...n,focusable:!0,children:i.jsx(X.a,{...a,ref:e,onKeyDown:q(t.onKeyDown,r=>{r.key===" "&&r.currentTarget.click()})})})});Il.displayName=Sl;var tn="ToolbarToggleGroup",sn=d.forwardRef((t,e)=>{const{__scopeToolbar:s,...a}=t,n=Xa(tn,s),r=Ja(s);return i.jsx(jl,{"data-orientation":n.orientation,dir:n.dir,...r,...a,ref:e,rovingFocus:!1})});sn.displayName=tn;var Rl="ToolbarToggleItem",an=d.forwardRef((t,e)=>{const{__scopeToolbar:s,...a}=t,n=Ja(s),r={__scopeToolbar:t.__scopeToolbar};return i.jsx(Ps,{asChild:!0,...r,children:i.jsx(kl,{...n,...a,ref:e})})});an.displayName=Rl;var Pl=$a,Al=Ps,Ml=sn,Ol=an;const nn=d.forwardRef(({disableGroupHover:t,className:e,theme:s="light",...a},n)=>{const r=ue(["justify-right flex h-7 items-center rounded bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-500 shadow ring-1 ring-slate-700/20 dark:ring-slate-700/80 transition focus-within:opacity-100 focus:opacity-100 peer-focus:opacity-100","[&:has([data-radix-collection-item]_~_[data-radix-collection-item])]:px-0.5"],{variants:{disableGroupHover:{true:"",false:"group-hover:opacity-100"}},defaultVariants:{disableGroupHover:!1}});return i.jsx(Ke,{children:i.jsx(Pl,{className:C(r({disableGroupHover:t}),e),"data-testid":"minimenu","data-theme":s,...a,ref:n})})}),rn=ue(["group flex size-7 cursor-pointer items-center justify-center bg-transparent p-0 text-slate-500 dark:text-slate-300/90","focus-visible:outline focus-visible:outline-[1.5px] focus-visible:outline-offset-2 focus-visible:outline-brand-400 focus-visible:ring-0 focus-visible:rounded","disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:text-slate-500 disabled:dark:hover:text-slate-300/90","[&[aria-checked=true]_.toggle-icon]:justify-end [&[aria-pressed=true]_.toggle-icon]:justify-end","aria-checked:text-slate-900 aria-pressed:text-slate-900 data-[state=open]:text-slate-900","dark:aria-checked:text-slate-200 dark:aria-pressed:text-slate-200 dark:data-[state=open]:text-slate-200"],{variants:{variant:{default:"hover:text-slate-900 dark:hover:text-slate-200 focus-visible:text-slate-900 dark:focus-visible:text-slate-200",danger:"hover:text-red-500 dark:hover:text-red-400 focus-visible:text-red-500 dark:focus-visible:text-red-400"}},defaultVariants:{variant:"default"}}),on=ue("toggle-icon flex text-base overflow-hidden items-center w-5"),ln=d.forwardRef(({icon:t,className:e,children:s,label:a,variant:n="default",...r},o)=>i.jsxs(ie,{children:[i.jsx(re,{asChild:!0,children:i.jsxs(Al,{className:C(rn({variant:n}),e),"aria-label":a,...r,ref:o,children:[i.jsx("div",{className:on(),children:i.jsx(Q,{icon:t})}),s]})}),i.jsx(le,{variant:"compact",sideOffset:8,"aria-hidden":!0,children:a})]}));d.forwardRef(({icon:t,iconToggled:e,className:s,children:a,label:n,...r},o)=>i.jsxs(ie,{children:[i.jsx(re,{asChild:!0,children:i.jsxs(Ol,{className:C(rn(),s),"aria-label":n,...r,ref:o,children:[i.jsxs("div",{className:on(),children:[i.jsx(Q,{icon:t}),e&&i.jsx(Q,{icon:e})]}),a]})}),i.jsx(le,{variant:"compact",sideOffset:8,"aria-hidden":!0,children:n})]})),d.forwardRef(({className:t,...e},s)=>i.jsx(Ml,{className:C("flex",t),...e,ref:s}));function cn({parentRef:t,miniMenuConfig:e}){const[s,a]=d.useState(new Set),[n,r]=d.useState(!1);d.useEffect(()=>{const l=t.current;if(!l)return;const c=()=>r(!0),u=()=>r(!1);return l.addEventListener("mouseenter",c),l.addEventListener("mouseleave",u),()=>{l.removeEventListener("mouseenter",c),l.removeEventListener("mouseleave",u)}},[t]);const o=(l,c,u)=>{l.onClick&&l.onClick(u),l.iconPostClick&&(a(m=>new Set(m).add(c)),setTimeout(()=>{a(m=>{const p=new Set(m);return p.delete(c),p})},2e3))};return n?i.jsx(nn,{className:"absolute right-0 top-4",children:e.map((l,c)=>{const u=s.has(c)&&l.iconPostClick?l.iconPostClick:l.icon;return i.jsx(ln,{icon:u,onClick:m=>o(l,c,m),label:l.label},l.label)})}):null}const dn=()=>{const[t,e]=d.useState(null);return d.useEffect(()=>{const s=async(a,n)=>{if(a.messageType==="scribeCountReceived"){const r=await Ut();e(r)}};return Ut().then(a=>{e(a)}),chrome.runtime.onMessage.addListener(s),()=>{chrome.runtime.onMessage.removeListener(s)}},[]),{hostname:t!=null&&t.url?new URL(t.url).hostname:null,tab:t}};function un(t){const e=d.useRef(null),s=d.useRef(null),a=d.useRef(null);d.useEffect(()=>{chrome.runtime.sendMessage({messageType:"browserContextNeeded"},n=>{var r,o;(r=n==null?void 0:n.tab)!=null&&r.id&&(s.current=n.tab.id),(o=n==null?void 0:n.window)!=null&&o.id&&(a.current=n.window.id)})},[]),d.useEffect(()=>{if(!t)return;const n=async r=>{var o,l,c,u;if(r.messageType==="currentTabChanged"){const m=s.current===((o=r.selfTab)==null?void 0:o.id),p=a.current===((l=r.selfTab)==null?void 0:l.windowId);if((c=r.selfTab)!=null&&c.id&&r.selfTab.id!==s.current&&(s.current=r.selfTab.id),(u=r.selfTab)!=null&&u.windowId&&r.selfTab.windowId!==a.current&&(a.current=r.selfTab.windowId),!m||!p)return;e.current&&clearTimeout(e.current),e.current=setTimeout(()=>{chrome.runtime.sendMessage({messageType:"fetchPins"})},250)}};return chrome.runtime.onMessage.addListener(n),()=>{chrome.runtime.onMessage.removeListener(n),e.current&&clearTimeout(e.current)}},[t])}const mn=({className:t,appIconName:e,size:s,iconUrl:a})=>{const[n,r]=d.useState(!1),o=C("rounded mix-blend-multiply",{hidden:!n});return i.jsx("div",{className:"relative h-fit w-fit",children:i.jsx("div",{className:C("relative z-[1] flex items-center justify-center rounded-full bg-gradient-to-b from-white to-slate-50",t,"shadow-[0px_2px_6px_rgba(30,41,59,0.04),_0px_1px_2px_rgba(30,41,59,0.06)]"),children:i.jsx("img",{src:a,onLoad:()=>{r(!0)},className:o,width:s,height:s,"data-testid":"app-icon-image",alt:`${e} logo`})})})},Dl={blue:"bg-blue-500",cyan:"bg-cyan-400",emerald:"bg-green-500",fuchsia:"bg-fuchsia-400",darkfuchsia:"bg-fuchsia-600",indigo:"bg-brand-500",darkindigo:"bg-brand-600",lime:"bg-lime-500",orange:"bg-orange-500",pink:"bg-pink-500",rose:"bg-rose-400",sky:"bg-sky-500",slate:"bg-slate-100",violet:"bg-purple-300",yellow:"bg-yellow-400"},Fl={blue:"from-blue-200",indigo:"from-brand-300",cyan:"from-cyan-200",emerald:"from-green-200",yellow:"from-yellow-200",orange:"from-orange-200",rose:"from-rose-200",fuchsia:"from-fuchsia-200",violet:"from-purple-200",slate:"from-slate-100",pink:"from-pink-200",sky:"from-sky-200",lime:"from-lime-200",darkfuchsia:"from-fuchsia-300",darkindigo:"from-brand-300"},zl={blue:"via-blue-200",indigo:"via-brand-300",cyan:"via-cyan-200",emerald:"via-green-200",yellow:"via-yellow-200",orange:"via-orange-200",rose:"via-rose-200",fuchsia:"via-fuchsia-200",violet:"via-purple-200",slate:"via-slate-100",pink:"via-pink-200",sky:"via-sky-200",lime:"via-lime-200",darkfuchsia:"via-fuchsia-300",darkindigo:"via-brand-300"},Ll={blue:"to-blue-200",indigo:"to-brand-300",cyan:"to-cyan-200",emerald:"to-green-200",yellow:"to-yellow-200",orange:"to-orange-200",rose:"to-rose-200",fuchsia:"to-fuchsia-200",violet:"to-purple-200",slate:"to-slate-100",pink:"to-pink-200",sky:"to-sky-200",lime:"to-lime-200",darkfuchsia:"to-fuchsia-300",darkindigo:"to-brand-300"};Vt.omit(Dl,["slate"]);const As=({isColorfulHeaderEnabled:t,colorfulHeader:e,className:s,size:a="default"})=>{const n=d.useMemo(()=>t?e==null?void 0:e.split(","):[],[e,t]),r=d.useMemo(()=>{if(!t||(n==null?void 0:n.length)!==3)return"";const[o,l,c]=n;return`${Fl[o]} ${zl[l]} ${Ll[c]}`},[n,t]);return i.jsxs("div",{className:C("relative flex items-end justify-center overflow-hidden rounded shadow-[0px_0px_2px_0px_rgba(33,43,57,0.08)_inset]",{"h-4 w-4":a==="small","h-6 w-6":a==="medium","h-9 w-9":a==="default"},s),"data-testid":"page-result-icon",children:[i.jsx("div",{className:`absolute left-0 top-0 h-6 w-full ${t&&n.length===3?`bg-gradient-to-r ${r}`:"bg-slate-200"}`,...t&&(n==null?void 0:n.length)===1&&{style:{backgroundImage:`linear-gradient(180deg, rgba(248, 250, 252, 0.5) 0%, #F8FAFC 100%), linear-gradient(to bottom, #${n[0]} 100%, #${n[0]} 0)`}}}),i.jsx("div",{className:"absolute left-0 top-0 h-full w-full bg-gradient-to-b from-transparent to-white"}),i.jsxs("div",{className:C("z-0 flex flex-col items-start justify-between bg-white shadow",{"h-3 w-3 rounded-[2px] px-[1px] py-[2px]":a==="small","h-[18px] w-5 rounded-[3px] px-[5px] py-[0px]":a==="medium","h-7 w-7 rounded-t px-1 py-1.5":a==="default"}),children:[i.jsx("div",{className:C("rounded-sm bg-slate-300",{"h-[2px] w-[10px]":a==="small","h-[2px] w-[14px]":a==="medium","h-[3px] w-[20px]":a==="default"})}),i.jsx("div",{className:C("rounded-sm bg-slate-200",{"h-[2px] w-[7px]":a==="small","h-[2px] w-[10px]":a==="medium","h-[3px] w-[17px]":a==="default"})}),i.jsx("div",{className:C("rounded-sm bg-slate-200",{"h-[2px] w-[10px]":a==="small","h-[2px] w-[14px]":a==="medium","h-[3px] w-[20px]":a==="default"})}),i.jsx("div",{className:C("rounded-sm bg-slate-200",{"h-[2px] w-[7px]":a==="small","h-[2px] w-[10px]":a==="medium","h-[3px] w-[17px]":a==="default"})})]})]})},pn=({fileType:t,iconUrl:e,size:s=18})=>t!=="scribe"&&!e?i.jsx("div",{className:"flex items-center justify-center rounded-full bg-white shadow-lg h-6 w-6",children:i.jsx(Ns,{icon:"file",spin:!1,variant:"duotone",size:s,className:"drop-shadow-lg",secondaryColor:void 0})}):i.jsx("div",{children:t==="scribe"&&e?i.jsx(mn,{className:"size-6",size:s,appIconName:"",iconUrl:e}):i.jsx(As,{isColorfulHeaderEnabled:!0,colorfulHeader:"darkfuchsia,darkindigo,yellow",className:"flex-none",size:"small"})}),hn=()=>{const[t,e]=d.useState(!1);return d.useEffect(()=>{chrome.storage.local.get(["isPinExtensionModalVisible"],a=>{a&&a.isPinExtensionModalVisible!==void 0&&e(a.isPinExtensionModalVisible)});const s=(a,n)=>{n==="local"&&a.isPinExtensionModalVisible&&e(a.isPinExtensionModalVisible.newValue||!1)};return chrome.storage.onChanged.addListener(s),()=>{chrome.storage.onChanged.removeListener(s)}},[]),t},fn=t=>i.jsx(Po,{...t}),gn=d.forwardRef((t,e)=>i.jsx(No,{ref:e,...t}));d.forwardRef((t,e)=>i.jsx(To,{ref:e,...t}));const Zl=Io,Bl=Ro,xn=({title:t,icon:e,iconClassName:s,className:a,titleClassName:n})=>i.jsxs("div",{className:C("mb-3 flex items-center text-white",a),children:[e&&i.jsx("div",{className:"mr-2",children:i.jsx(Q,{icon:e,className:C("size-4",s)})}),i.jsx("div",{className:C("text-base font-semibold",n),children:t})]}),vn=({children:t,className:e})=>i.jsx("div",{className:C("popover-description text-sm text-white/[85] [&>a]:text-brand-200",e),children:t}),yn=d.forwardRef(({className:t,align:e="center",showCloseButton:s=!1,children:a,primaryAction:n,primaryActionText:r,secondaryAction:o,secondaryActionText:l,sideOffset:c=10,withArrow:u=!1,portalContainer:m,onCloseAction:p,...f},h)=>i.jsx(Eo,{container:m,children:i.jsxs(So,{ref:h,align:e,sideOffset:c,className:C("bg-brand text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-[304px] rounded-lg p-4 shadow-[0_24px_24px_-12px_#3C2EDD40] outline-none",t),...f,children:[s&&i.jsx(Bl,{className:"absolute right-2 top-2 size-6 cursor-pointer bg-transparent text-white/50","aria-label":"Close",onClick:p,asChild:!0,children:i.jsx(G,{variant:"ghost",size:"small",theme:"dark",icon:Kr,"aria-label":"Close"})}),a,(!!n||!!o)&&i.jsxs("div",{className:"mt-4",children:[!!o&&i.jsx(G,{size:"small",variant:"secondary",onClick:o,theme:"dark",className:"mr-2.5 outline-white/25 hover:outline-white/50 focus:outline-white/50",children:l}),!!n&&i.jsx(G,{size:"small",variant:"secondary",onClick:n,className:"shadow-white outline-white ring-white hover:shadow-white hover:outline-white focus:outline-white",children:r})]}),u&&i.jsx(Zl,{asChild:!0,children:i.jsx("svg",{width:"15",height:"7",viewBox:"0 0 15 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"rotate-180 transform",children:i.jsx("path",{d:"M8.69339 0.555122C8.08158 -0.185042 6.91842 -0.18504 6.30661 0.555123L1.59118 6.25984C1.20448 6.72766 0.619023 7 0 7L15 7C14.381 7 13.7955 6.72766 13.4088 6.25984L8.69339 0.555122Z",fill:"#3C2EDD"})})})]})})),Ul=()=>{const[t,e]=d.useState(!1),s=hn();d.useEffect(()=>{chrome.storage.local.get("hasSeenCreatePinButtonCallout",n=>{n&&!n.hasSeenCreatePinButtonCallout&&e(!0)})},[]);const a=()=>{chrome.storage.local.set({hasSeenCreatePinButtonCallout:!0}),e(!1)};return s?null:i.jsxs(fn,{open:t,children:[i.jsx(gn,{}),i.jsxs(yn,{className:"p-3 w-[220px]",sideOffset:5,withArrow:!0,showCloseButton:!0,onCloseAction:a,children:[i.jsx(xn,{title:"Add a pin to the webpage",icon:xa,titleClassName:"text-xs",iconClassName:"size-3"}),i.jsx(vn,{className:"text-xs text-wrap",children:"Pin documents in-context for faster discovery!"})]})]})},bn=()=>{const t=K(ws),e=Pr(t);return i.jsxs("div",{children:[i.jsx(Ke,{children:i.jsxs(ie,{children:[i.jsx(re,{asChild:!0,children:i.jsx(G,{onClick:()=>{H("pin_add_pin_clicked",{location:"extension"}),chrome.runtime.sendMessage({messageType:"startDropPin",scribe:null})},icon:Hr,variant:"secondary",size:"small","data-testid":"create-pin-button",children:"Add pin"})}),i.jsx(le,{side:"bottom",children:"Pin document or text to webpage"})]})}),e&&i.jsx(Ul,{})]})},ze=16,Vl=ze/2,ql=15,Gl=ze+8,wn=t=>t?t.split(" ")[0]:null,Kl=t=>{var l,c,u,m,p,f;const e=t.target;let s=null;const a=zo(e,aa((e.innerText||e.textContent||"").substring(0,2048)));try{a&&(s=Do(a))}catch{}const n=Ts(e),r=((c=(l=a==null?void 0:a.ownerDocument)==null?void 0:l.defaultView)==null?void 0:c.frameElement)!==null,o=r?Ts((m=(u=a==null?void 0:a.ownerDocument)==null?void 0:u.defaultView)==null?void 0:m.frameElement):null;return{selector:(p=window.location.hostname)!=null&&p.includes("dynamics.com")?wn(s):s,clickPosition:{x:t.x,y:t.y},elementClickPosition:{x:t.offsetX-ze/2,y:t.offsetY-ze/2},text:aa(((a==null?void 0:a.innerText)||(a==null?void 0:a.textContent)||"").substring(0,2048))||"",attributes:n||null,timestamp:new Date().getTime(),target_xpath:Fo(a),target_tag:(a==null?void 0:a.tagName)||"",target_element_attributes:n||null,was_in_iframe:r,iframe_attributes:o||null,target_parent_attributes:Ts((a==null?void 0:a.parentElement)||void 0)||null,target_parent_tag:((f=a==null?void 0:a.parentElement)==null?void 0:f.tagName)||""}},Hl=(t,e=[])=>{const s=[...(t==null?void 0:t.organizations)||[]].filter(m=>m.permission_level!=="read"),a=s.filter(m=>e.includes(m.id)),n=s.filter(m=>!e.includes(m.id)),r=m=>m.sort((p,f)=>p.name<f.name?-1:p.name>f.name?1:0),o=r(a),l=r(n),c=[...o,...l].map(m=>({label:m.name,value:m.id,menuItemProps:{avatarProps:{children:m.name,color:m.color||Ao(m.id).color,shape:"square"},showAvatar:!0,menuType:"checkbox"}})),u={label:"All teams",value:"all-teams",menuItemProps:{avatarProps:{children:"AT",color:"blue",shape:"square"},showAvatar:!0,menuType:"checkbox"}};return s.length>1?[u,...c]:c},Ms=(t,e,s)=>{if(!t)return{left:0,top:0,width:0,height:0};let a=0,n=0;if(e){const u=h=>{var N,_;const g=(N=h.contentWindow)==null?void 0:N.parent;if(!g)return{x:0,y:0};if(g!==window.top){const w=(_=g.frameElement)==null?void 0:_.getBoundingClientRect(),O=(w==null?void 0:w.x)??0,T=(w==null?void 0:w.y)??0,y=u(g.frameElement);return{x:O+y.x,y:T+y.y}}return{x:0,y:0}},{x:m,y:p}=u(e),f=e.getBoundingClientRect();a+=m,a+=f.left,n+=p,n+=f.top}const r=t.getBoundingClientRect(),o=t.ownerDocument!==document;let l=r.left+a,c=r.top+n;return s&&(o&&e?(l=r.left+s.x+a,c=r.top+s.y+n):(l=r.left+s.x,c=r.top+s.y)),{left:l,top:c,width:r.width,height:r.height}},ct=t=>t<16?16:t>window.innerWidth-16?window.innerWidth-16:t,dt=t=>t<16?16:t,_n=t=>{const e=ct(t.left+t.width/2||0),s=dt(t.top+t.height/2||0);return{x:e??0,y:s??0}},jn=t=>{const e=ct(t!=null&&t.left?t.left+10:0),s=dt(t!=null&&t.top?t.top+10:0);return{x:e,y:s}},Ql=({pin:t,pinTarget:e,parentIframe:s})=>{var o,l;const a=(o=t.location_metadata)==null?void 0:o.elementClickPosition,n=(l=t.location_metadata)==null?void 0:l.clickPosition,r=Ms(e,s,a);if(a){const c=r.left>=0&&r.left<window.innerWidth&&r.top>=0&&r.top<window.innerHeight,u=ct(r.left),m=dt(r.top);return{x:u,y:m,isClickPointInViewport:c}}if(n!=null&&n.x&&(n!=null&&n.y)&&(n==null?void 0:n.x)<r.width&&(n==null?void 0:n.y)<r.height){const c=r.left+n.x,u=r.top+n.y,m=c>=0&&c<window.innerWidth&&u>=0&&u<window.innerHeight,p=ct(c),f=dt(u);return{x:p,y:f,isClickPointInViewport:m}}return{...jn(r),isClickPointInViewport:!0}},Wl=({pin:t,pinTarget:e,parentIframe:s})=>{var n,r,o,l,c,u;const a=Ms(e,s,void 0);if(e!=null&&e.matches(Ar.join(", ")))return _n(a);if((n=t.clickPosition)!=null&&n.x&&((r=t.clickPosition)!=null&&r.y)&&((o=t.clickPosition)==null?void 0:o.x)<a.width&&((l=t.clickPosition)==null?void 0:l.y)<a.height){const m=ct(a!=null&&a.left&&((c=t==null?void 0:t.clickPosition)!=null&&c.x)?a.left+t.clickPosition.x:0),p=dt(a!=null&&a.top&&((u=t==null?void 0:t.clickPosition)!=null&&u.y)?a.top+t.clickPosition.y:0);return{x:m,y:p}}return jn(a)},Yl=({pinX:t,pinY:e,dialogWidth:s,dialogHeight:a,horizontalSpacing:n=12,verticalSpacing:r=12,tightVerticalSpacing:o=6})=>{const l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=t,m=e,p=u+ze,f=m+ze;let h=p+n,g=m-r;const N=h+s>l;N&&(h=u-n-s);const _=g+a>c,w=g<0;return _&&!w?(g=m-o-a,N?h=u-n-s:(h=p+n,h+s>l&&(h=u-n-s))):w&&(g=f+o,h=p+n,h+s>l&&(h=u-n-s)),h=Math.max(0,Math.min(h,l-s)),g=Math.max(0,Math.min(g,c-a)),{x:h,y:g}},Jl=()=>window?window.location.href:"",kn=t=>{go({title:t,description:"Please try again or reach out to your Scribe contact",variant:"error"})},Xl=d.forwardRef(({tooltipContent:t,children:e,...s},a)=>d.createElement(ie,null,d.createElement(re,{asChild:!0},d.cloneElement(e,{...s,ref:a})),t)),Cn=({pinId:t,location:e})=>{t&&(H("pins_delete_confirmed_clicked",{pin_id:t,page_domain:window.location.hostname,location:e}),chrome.runtime.sendMessage({messageType:"deletePin",pinId:t,location:e}).then(s=>{if(!s.success){kn("Error deleting pin");return}H("pins_delete_success",{pin_id:t,page_domain:window.location.hostname,location:e})}))},$l=t=>{const e=t.match(/^[a-zA-Z][a-zA-Z0-9+.-]*:\/\//);if(e){const r=t.slice(e[0].length).split("/").filter(c=>c!==""),o=e[0]+r[0],l=r.slice(1);return{baseDomain:o,pathSegments:l}}const s=t.split("/").filter(r=>r!==""),a=s[0]||"",n=s.slice(1);return{baseDomain:a,pathSegments:n}},Nn=({pin:t,userTeams:e})=>{var s,a,n,r;if(!(t!=null&&t.shared_with_orgs))return i.jsx("span",{children:"Are you sure you want to delete this?"});if(((s=t==null?void 0:t.shared_with_orgs)==null?void 0:s.length)===1){const o=((a=e==null?void 0:e.find(l=>{var c;return l.id===((c=t.shared_with_orgs)==null?void 0:c[0])}))==null?void 0:a.name)||"the";return i.jsxs("span",{children:["Are you sure you want to delete this for ",i.jsx("strong",{children:o})," team?"]})}if(((n=t==null?void 0:t.shared_with_orgs)==null?void 0:n.length)>1){const o=(r=t==null?void 0:t.shared_with_orgs)==null?void 0:r.length;return i.jsxs("span",{children:["Are you sure you want to delete this for ",i.jsx("strong",{children:o})," teams?"]})}return i.jsx("span",{children:"Are you sure you want to delete this?"})},ec=()=>{var o,l,c;const t=K(ws),e=K(lr),s=dn(),a=((l=(o=t==null?void 0:t.active_organization)==null?void 0:o.super_organization)==null?void 0:l.pin_visibility_toggle_enabled)??!0,n=(c=s==null?void 0:s.tab)!=null&&c.url?e.includes(s.tab.url):!1,r=()=>{var u,m;H("pins_show_pins_toggled",{pins_user_click_to_hide:!n,domain_url:(u=s==null?void 0:s.tab)==null?void 0:u.url}),chrome.runtime.sendMessage({messageType:"toggleHidePinsForUrl",url:(m=s==null?void 0:s.tab)==null?void 0:m.url})};return i.jsxs("div",{className:"flex justify-between items-center mb-0",children:[i.jsx("div",{className:"text-slate-800 text-[13px] font-semibold",children:"Pins"}),i.jsxs("div",{className:"flex items-center gap-1",children:[a&&i.jsx(Ke,{children:i.jsxs(ie,{children:[i.jsx(re,{asChild:!0,children:i.jsx(G,{"aria-label":"Toggle pin visibility",className:"min-w-[80px]",onClick:r,icon:xa,iconPosition:"right",variant:"secondary",size:"small",children:i.jsx("span",{className:"inline-block w-[30px]",children:n?"Show":"Hide"})})}),i.jsx(le,{side:"bottom",children:n?"Show all pins on webpage":"Hide all pins on webpage"})]})}),Ot(t)&&i.jsx(bn,{})]})]})},tc=({pin:t,onHover:e,viewed:s,currentWindowId:a,setIsEditMode:n})=>{const r=d.useRef(null),o=K(ws),[l,c]=d.useState(!1);return i.jsxs("div",{ref:r,className:"relative flex gap-3 py-4 hover:bg-[linear-gradient(90deg,_#FFF_-3.33%,_#F8FAFC_17.99%,_#F8FAFC_81.47%,#FFF_102.92%)] w-full",onMouseEnter:()=>e(t.id),onMouseLeave:()=>e(null),children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"relative z-[1] flex h-6 w-6 flex-shrink-0 items-center justify-center overflow-hidden rounded-full bg-gradient-to-b from-white to-white/80 transition duration-300 shadow-lg",children:i.jsx(Q,{icon:Or,style:{color:t.pin_color}})})}),i.jsxs("div",{className:"flex flex-col gap-1 flex-1",children:[t.description&&i.jsx("span",{className:C("text-sm line-clamp-2",s?"text-slate-500":"text-slate-900"),children:t.description}),t.attached_file&&!t.attached_file.error&&i.jsxs("div",{role:"button",tabIndex:0,style:{cursor:"pointer"},onClick:()=>{const{id:u,url:m}=t.attached_file;H("pins_document_clicked",{pin_id:t.id,location:"extension",document_id:u});const p=`${m}?sidepanel=true&referrer=sidekick`;chrome.runtime.sendMessage({messageType:"openUrlInSidepanel",url:p})},className:C("text-slate-500 text-xs flex items-start gap-2",t.description&&"mt-2 items-center"),children:[i.jsx(pn,{fileType:t.attached_file.type,iconUrl:t.attached_file.contents.icon_url||"",size:14}),t.attached_file.contents.name]})]}),o&&Ot(o)&&i.jsx(cn,{parentRef:r,miniMenuConfig:[{icon:Wr,label:"Edit Pin",onClick:()=>{n(!0),H("pins_edit_pin_clicked",{pin_id:t.id,page_domain:window.location.hostname,location:"extension"}),chrome.runtime.sendMessage({messageType:"editPin",pinId:t.id,location:"sidekick"})}},{icon:Yr,label:"Delete Pin",onClick:()=>{c(!0)}}]}),l&&i.jsx(ba,{open:l,onOpenChange:()=>c(!1),children:i.jsxs(wa,{children:[i.jsx(_a,{title:"Delete Pin",description:Nn({pin:t,userTeams:(o==null?void 0:o.organizations)||[]})}),i.jsx(xo,{primaryAction:{children:"Delete",variant:"danger",onClick:()=>Cn({pinId:t.id,location:"extension"})},secondaryAction:{children:"Cancel",onClick:()=>c(!1)}})]})})]})},sc=({currentWindowId:t,setIsEditMode:e})=>{const[s,a]=d.useState(!1),{pins:n}=K(na),r=K(or);un(!0),d.useEffect(()=>{chrome.runtime.sendMessage({messageType:"fetchViewedPins"})},[]);const o=c=>{c&&H("pin_hovered",{pin_id:c,location:"extension",pin_is_clustered:!1}),chrome.runtime.sendMessage({messageType:"setHoveredPin",pinId:c})},l=s?n.length:4;return i.jsxs(i.Fragment,{children:[i.jsx(ec,{}),i.jsx("ul",{className:"p-0 flex flex-col divide-y divide-slate-200",children:n.slice(0,l).map(c=>i.jsx("li",{style:{listStyle:"none"},children:i.jsx(tc,{pin:c,onHover:o,viewed:!!(c!=null&&c.id&&(r!=null&&r.includes(c.id))),currentWindowId:t,setIsEditMode:e})},c.id))}),n.length>4&&i.jsx("div",{className:"flex justify-center",children:i.jsx(G,{icon:Qr,iconPosition:"right",iconProps:{className:"text-brand-600"},variant:"ghost",onClick:()=>{a(c=>!c)},className:"bg-transparent text-brand-600",children:s?"show less":"show more"})})]})};function Tn({text:t,className:e,badgeProps:s}){return t?i.jsx(Oe,{icon:Jr,variant:"default",className:`${e} flex w-fit min-w-0 max-w-full`,...s,children:i.jsx("span",{className:"max-w-[15ch] truncate block",style:{fontFamily:"Public Sans, system-ui, sans-serif"},children:t})}):null}const ac=({created:t,iconAndColorUpdated:e,appTags:s,logoAppTag:a})=>{const n=new Date("2023-02-08T22:00:00Z"),r=new Date(t)>n;let o="custom-icon";return(a!=null&&a.id||r&&!e&&(s==null?void 0:s.length)>0)&&(o="app-logo"),o},nc=t=>{var e,s,a;if((e=t==null?void 0:t.logo_app_tag)!=null&&e.id)return t==null?void 0:t.logo_app_tag;if((s=t==null?void 0:t.app_tags)!=null&&s.length)return(a=t==null?void 0:t.app_tags)==null?void 0:a[0]},ic=({colorToUse:t,icon:e,spin:s,shadowColorToUse:a})=>i.jsx("div",{className:C("flex h-[88px] w-[88px] items-center justify-center rounded-full bg-gradient-to-b shadow-[0px_12px_20px_-18px]",`${Qt[t].gradientFrom} ${Qt[t].gradientTo}`,a),"data-testid":"picker-custom-icon",children:i.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white",children:i.jsx(Ns,{icon:e,spin:s,variant:"duotone",size:32,className:C("fill-current",Qt[t].paleIcon)})})}),rc=({className:t,appIconName:e,iconUrl:s})=>{const[a,n]=d.useState(!1);return i.jsx("div",{className:"relative flex h-[88px] w-[88px] flex-col items-center justify-center",children:i.jsx("div",{className:C("relative z-10 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-b from-white to-slate-50 shadow-[0px_2px_6px_rgba(30,41,59,0.04),_0px_1px_2px_rgba(30,41,59,0.06)]",t),children:i.jsx("img",{src:s,onLoad:()=>{n(!0)},className:C("rounded mix-blend-multiply",{hidden:!a}),width:40,height:40,"data-testid":"app-icon-image",alt:`${e} logo`})})})},oc=()=>{const t=["gray","pink","purple","blue","cyan","green","yellow"];return t[Math.floor(Math.random()*t.length)]},Qt={gray:{paleIcon:"text-slate-500",gradientFrom:"from-slate-200",gradientTo:"to-slate-50"},blue:{paleIcon:"text-blue-500",gradientFrom:"from-blue-200",gradientTo:"to-blue-50"},cyan:{paleIcon:"text-cyan-500",gradientFrom:"from-cyan-200",gradientTo:"to-cyan-50"},green:{paleIcon:"text-green-500",gradientFrom:"from-green-200",gradientTo:"to-green-50"},pink:{paleIcon:"text-pink-500",gradientFrom:"from-pink-200",gradientTo:"to-pink-50"},yellow:{paleIcon:"text-yellow-500",gradientFrom:"from-yellow-200",gradientTo:"to-yellow-50"},purple:{paleIcon:"text-purple-500",gradientFrom:"from-purple-200",gradientTo:"to-purple-50"}},lc={gray:"shadow-slate-900",pink:"shadow-pink-900",purple:"shadow-purple-900",blue:"shadow-blue-900",cyan:"shadow-cyan-900",green:"shadow-green-900",yellow:"shadow-yellow-900"},En=({document:t,size:e,spin:s,editor:a=!1,isPickerIcon:n=!1,isAppLogo:r=!1,className:o,...l})=>{const{created:c=new Date,icon_and_color_updated:u=!1,icon:m,icon_color:p}=t||{},f=ac({created:c instanceof Date?c:new Date(c),iconAndColorUpdated:u,appTags:(t==null?void 0:t.app_tags)||[],logoAppTag:(t==null?void 0:t.logo_app_tag)||null}),h=d.useMemo(()=>p||oc(),[p]),g=nc(t),N=g==null?void 0:g.name,_=m||"file";return(r||f==="app-logo")&&n?i.jsx(rc,{className:o,appIconName:N||"",iconUrl:g==null?void 0:g.icon_url}):!r&&n?i.jsx(ic,{colorToUse:h,shadowColorToUse:lc[h],icon:_,spin:s||!1}):(f==="app-logo"||r)&&!n?i.jsx(mn,{className:o,size:e||24,appIconName:N||"",iconUrl:g==null?void 0:g.icon_url}):i.jsx("div",{className:"relative w-fit h-fit",children:i.jsxs("div",{...l,className:C("relative z-[1] flex flex-shrink-0 items-center justify-center overflow-hidden transition duration-300","bg-gradient-to-b from-white to-white/80 shadow-[0px_2px_6px_rgba(30,41,59,0.04),_0px_1px_2px_rgba(30,41,59,0.06)]",{"h-12 w-12":!o||!o.includes("w-")&&!o.includes("h-"),"rounded-full":!(o!=null&&o.includes("rounded"))},o),"data-testid":"document-icon",children:[i.jsx(Ns,{icon:_,spin:s,variant:"duotone",size:e||24,className:C("fill-current",Qt[h].paleIcon)}),a&&i.jsx("div",{className:"absolute bottom-0 flex h-1/4 w-full items-center justify-center bg-black opacity-70",children:i.jsx("div",{className:C("absolute text-xs font-semibold leading-4 text-white"),children:"Edit"})})]})})},cc=t=>t.map((e,s)=>{if(e.startsWith("<em>")&&e.endsWith("</em>")){const a=e.replace(/<\/?em>/gi,"");return i.jsx("span",{className:"bg-brand-50 px-[2px] rounded-sm height leading-4",children:a},s)}return e}),dc=({document:t,metadata:e,miniMenuConfig:s,highlight:a,isColorfulHeaderEnabled:n,colorfulHeader:r,onClick:o,disableHover:l=!1})=>{const c=d.useRef(null);return i.jsxs("div",{ref:c,onClick:o,role:o?"button":void 0,tabIndex:o?0:void 0,"aria-label":o?`Open ${t.name}`:void 0,onKeyDown:o?u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),o())}:void 0,className:C("relative flex gap-3 py-4 w-full",{"hover:bg-[linear-gradient(90deg,_#FFF_-3.33%,_#F8FAFC_17.99%,_#F8FAFC_81.47%,#FFF_102.92%)]":!l,"items-center":!(e!=null&&e.length),"cursor-pointer":o}),children:[t.type==="scribe"?i.jsx(En,{document:t,size:12,className:"size-6"}):i.jsx("div",{className:"size-6 flex items-center justify-center flex-none",children:i.jsx(As,{isColorfulHeaderEnabled:n,colorfulHeader:r||"",size:"small"})}),i.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[i.jsx("span",{className:"text-slate-800 text-sm",children:a!=null&&a.name?cc(a.name[0].split(/(<em>.*?<\/em>)/gi)):t.name}),e&&i.jsx("div",{className:"flex gap-1 flex-wrap",children:e.map((u,m)=>typeof u=="string"?i.jsx("span",{className:C("text-slate-500 text-xs truncate",{"text-slate-400":t.viewed}),children:u},u):u)})]}),s&&i.jsx(cn,{parentRef:c,miniMenuConfig:s})]})},uc=()=>i.jsxs("div",{className:"flex animate-pulse px-5 py-4","data-testid":"sr-skel-loader",children:[i.jsx("div",{className:"mr-4 h-9 w-9 flex-none rounded-full bg-slate-100"}),i.jsxs("div",{className:"mr-8 max-w-full flex-1 overflow-hidden",children:[i.jsx("div",{className:"mb-1 mt-0 h-4 w-[80%] rounded bg-slate-100"}),i.jsx("div",{className:"mb-1.5 mt-0 h-3 rounded bg-slate-100"}),i.jsx("ul",{className:"m-0 flex list-none flex-row flex-wrap items-center p-0 text-xs text-slate-500",children:i.jsxs("li",{className:"flex items-center",children:[i.jsx(Q,{icon:Dr,className:"mr-1 h-[14px] w-[14px] p-px text-slate-100"}),i.jsx("div",{className:"h-3 w-16 rounded bg-slate-100"})]})})]})]});function mc({cardItems:t,isLoading:e,numForSkeleton:s=12}){return e?Array(s).fill(void 0).map((a,n)=>i.jsx("div",{className:"border-b border-slate-200",children:i.jsx(uc,{})},n)):i.jsx("div",{className:"flex flex-col",children:t.map((a,n)=>{var r;return i.jsxs("div",{children:[n>0&&i.jsx("div",{className:"px-6",children:i.jsx("div",{className:"border-t border-slate-200"})}),i.jsx("div",{className:"hover:bg-gradient-to-r hover:from-[#3ac3ff]/5 hover:to-[#5648fb]/5 cursor-pointer",children:i.jsx("div",{className:"px-6",children:i.jsx(dc,{disableHover:!0,onClick:a.onClick,document:a,metadata:a.metadata,miniMenuConfig:a.miniMenuConfig,isColorfulHeaderEnabled:(r=a.features)==null?void 0:r.includes("colorful_header"),colorfulHeader:a.colorful_header},a.id)})})]},a.id)})})}var Os=["Enter"," "],pc=["ArrowDown","PageUp","Home"],Sn=["ArrowUp","PageDown","End"],hc=[...pc,...Sn],fc={ltr:[...Os,"ArrowRight"],rtl:[...Os,"ArrowLeft"]},gc={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ut="Menu",[mt,xc,vc]=Lo(ut),[Le,In]=at(ut,[vc,Na,Ne]),Wt=Na(),Rn=Ne(),[yc,Ze]=Le(ut),[bc,pt]=Le(ut),Pn=t=>{const{__scopeMenu:e,open:s=!1,children:a,dir:n,onOpenChange:r,modal:o=!0}=t,l=Wt(e),[c,u]=d.useState(null),m=d.useRef(!1),p=ka(r),f=Gt(n);return d.useEffect(()=>{const h=()=>{m.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>m.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),i.jsx(Go,{...l,children:i.jsx(yc,{scope:e,open:s,onOpenChange:p,content:c,onContentChange:u,children:i.jsx(bc,{scope:e,onClose:d.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:m,dir:f,modal:o,children:a})})})};Pn.displayName=ut;var wc="MenuAnchor",Ds=d.forwardRef((t,e)=>{const{__scopeMenu:s,...a}=t,n=Wt(s);return i.jsx(Zo,{...n,...a,ref:e})});Ds.displayName=wc;var Fs="MenuPortal",[_c,An]=Le(Fs,{forceMount:void 0}),Mn=t=>{const{__scopeMenu:e,forceMount:s,children:a,container:n}=t,r=Ze(Fs,e);return i.jsx(_c,{scope:e,forceMount:s,children:i.jsx(nt,{present:s||r.open,children:i.jsx(qo,{asChild:!0,container:n,children:a})})})};Mn.displayName=Fs;var de="MenuContent",[jc,zs]=Le(de),On=d.forwardRef((t,e)=>{const s=An(de,t.__scopeMenu),{forceMount:a=s.forceMount,...n}=t,r=Ze(de,t.__scopeMenu),o=pt(de,t.__scopeMenu);return i.jsx(mt.Provider,{scope:t.__scopeMenu,children:i.jsx(nt,{present:a||r.open,children:i.jsx(mt.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(kc,{...n,ref:e}):i.jsx(Cc,{...n,ref:e})})})})}),kc=d.forwardRef((t,e)=>{const s=Ze(de,t.__scopeMenu),a=d.useRef(null),n=it(e,a);return d.useEffect(()=>{const r=a.current;if(r)return Ko(r)},[]),i.jsx(Ls,{...t,ref:n,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:q(t.onFocusOutside,r=>r.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),Cc=d.forwardRef((t,e)=>{const s=Ze(de,t.__scopeMenu);return i.jsx(Ls,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),Nc=Co("MenuContent.ScrollLock"),Ls=d.forwardRef((t,e)=>{const{__scopeMenu:s,loop:a=!1,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:f,onDismiss:h,disableOutsideScroll:g,...N}=t,_=Ze(de,s),w=pt(de,s),O=Wt(s),T=Rn(s),y=xc(s),[P,R]=d.useState(null),v=d.useRef(null),E=it(e,v,_.onContentChange),k=d.useRef(0),I=d.useRef(""),D=d.useRef(0),B=d.useRef(null),z=d.useRef("right"),V=d.useRef(0),ne=g?Wo:d.Fragment,we=g?{as:Nc,allowPinchZoom:!0}:void 0,_e=F=>{var $s,ea;const Y=I.current+F,fe=y().filter(ye=>!ye.disabled),$e=document.activeElement,ys=($s=fe.find(ye=>ye.ref.current===$e))==null?void 0:$s.textValue,zt=fe.map(ye=>ye.textValue),et=zc(zt,Y,ys),Xs=(ea=fe.find(ye=>ye.textValue===et))==null?void 0:ea.ref.current;(function ye(ta){I.current=ta,window.clearTimeout(k.current),ta!==""&&(k.current=window.setTimeout(()=>ye(""),1e3))})(Y),Xs&&setTimeout(()=>Xs.focus())};d.useEffect(()=>()=>window.clearTimeout(k.current),[]),Ho();const oe=d.useCallback(F=>{var Y,fe;return z.current===((Y=B.current)==null?void 0:Y.side)&&Zc(F,(fe=B.current)==null?void 0:fe.area)},[]);return i.jsx(jc,{scope:s,searchRef:I,onItemEnter:d.useCallback(F=>{oe(F)&&F.preventDefault()},[oe]),onItemLeave:d.useCallback(F=>{var Y;oe(F)||((Y=v.current)==null||Y.focus(),R(null))},[oe]),onTriggerLeave:d.useCallback(F=>{oe(F)&&F.preventDefault()},[oe]),pointerGraceTimerRef:D,onPointerGraceIntentChange:d.useCallback(F=>{B.current=F},[]),children:i.jsx(ne,{...we,children:i.jsx(Qo,{asChild:!0,trapped:n,onMountAutoFocus:q(r,F=>{var Y;F.preventDefault(),(Y=v.current)==null||Y.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(Bo,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:f,onDismiss:h,children:i.jsx(qt,{asChild:!0,...T,dir:w.dir,orientation:"vertical",loop:a,currentTabStopId:P,onCurrentTabStopIdChange:R,onEntryFocus:q(c,F=>{w.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Uo,{role:"menu","aria-orientation":"vertical","data-state":Xn(_.open),"data-radix-menu-content":"",dir:w.dir,...O,...N,ref:E,style:{outline:"none",...N.style},onKeyDown:q(N.onKeyDown,F=>{const Y=F.target.closest("[data-radix-menu-content]")===F.currentTarget,fe=F.ctrlKey||F.altKey||F.metaKey,$e=F.key.length===1;Y&&(F.key==="Tab"&&F.preventDefault(),!fe&&$e&&_e(F.key));const ys=v.current;if(F.target!==ys||!hc.includes(F.key))return;F.preventDefault();const zt=y().filter(et=>!et.disabled).map(et=>et.ref.current);Sn.includes(F.key)&&zt.reverse(),Dc(zt)}),onBlur:q(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(k.current),I.current="")}),onPointerMove:q(t.onPointerMove,ft(F=>{const Y=F.target,fe=V.current!==F.clientX;if(F.currentTarget.contains(Y)&&fe){const $e=F.clientX>V.current?"right":"left";z.current=$e,V.current=F.clientX}}))})})})})})})});On.displayName=de;var Tc="MenuGroup",Zs=d.forwardRef((t,e)=>{const{__scopeMenu:s,...a}=t;return i.jsx(X.div,{role:"group",...a,ref:e})});Zs.displayName=Tc;var Ec="MenuLabel",Dn=d.forwardRef((t,e)=>{const{__scopeMenu:s,...a}=t;return i.jsx(X.div,{...a,ref:e})});Dn.displayName=Ec;var Yt="MenuItem",Fn="menu.itemSelect",Jt=d.forwardRef((t,e)=>{const{disabled:s=!1,onSelect:a,...n}=t,r=d.useRef(null),o=pt(Yt,t.__scopeMenu),l=zs(Yt,t.__scopeMenu),c=it(e,r),u=d.useRef(!1),m=()=>{const p=r.current;if(!s&&p){const f=new CustomEvent(Fn,{bubbles:!0,cancelable:!0});p.addEventListener(Fn,h=>a==null?void 0:a(h),{once:!0}),ko(p,f),f.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(zn,{...n,ref:c,disabled:s,onClick:q(t.onClick,m),onPointerDown:p=>{var f;(f=t.onPointerDown)==null||f.call(t,p),u.current=!0},onPointerUp:q(t.onPointerUp,p=>{var f;u.current||((f=p.currentTarget)==null||f.click())}),onKeyDown:q(t.onKeyDown,p=>{const f=l.searchRef.current!=="";s||f&&p.key===" "||Os.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Jt.displayName=Yt;var zn=d.forwardRef((t,e)=>{const{__scopeMenu:s,disabled:a=!1,textValue:n,...r}=t,o=zs(Yt,s),l=Rn(s),c=d.useRef(null),u=it(e,c),[m,p]=d.useState(!1),[f,h]=d.useState("");return d.useEffect(()=>{const g=c.current;g&&h((g.textContent??"").trim())},[r.children]),i.jsx(mt.ItemSlot,{scope:s,disabled:a,textValue:n??f,children:i.jsx(rt,{asChild:!0,...l,focusable:!a,children:i.jsx(X.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...r,ref:u,onPointerMove:q(t.onPointerMove,ft(g=>{a?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:q(t.onPointerLeave,ft(g=>o.onItemLeave(g))),onFocus:q(t.onFocus,()=>p(!0)),onBlur:q(t.onBlur,()=>p(!1))})})})}),Sc="MenuCheckboxItem",Ln=d.forwardRef((t,e)=>{const{checked:s=!1,onCheckedChange:a,...n}=t;return i.jsx(qn,{scope:t.__scopeMenu,checked:s,children:i.jsx(Jt,{role:"menuitemcheckbox","aria-checked":Xt(s)?"mixed":s,...n,ref:e,"data-state":Us(s),onSelect:q(n.onSelect,()=>a==null?void 0:a(Xt(s)?!0:!s),{checkForDefaultPrevented:!1})})})});Ln.displayName=Sc;var Zn="MenuRadioGroup",[Ic,Rc]=Le(Zn,{value:void 0,onValueChange:()=>{}}),Bn=d.forwardRef((t,e)=>{const{value:s,onValueChange:a,...n}=t,r=ka(a);return i.jsx(Ic,{scope:t.__scopeMenu,value:s,onValueChange:r,children:i.jsx(Zs,{...n,ref:e})})});Bn.displayName=Zn;var Un="MenuRadioItem",Vn=d.forwardRef((t,e)=>{const{value:s,...a}=t,n=Rc(Un,t.__scopeMenu),r=s===n.value;return i.jsx(qn,{scope:t.__scopeMenu,checked:r,children:i.jsx(Jt,{role:"menuitemradio","aria-checked":r,...a,ref:e,"data-state":Us(r),onSelect:q(a.onSelect,()=>{var o;return(o=n.onValueChange)==null?void 0:o.call(n,s)},{checkForDefaultPrevented:!1})})})});Vn.displayName=Un;var Bs="MenuItemIndicator",[qn,Pc]=Le(Bs,{checked:!1}),Gn=d.forwardRef((t,e)=>{const{__scopeMenu:s,forceMount:a,...n}=t,r=Pc(Bs,s);return i.jsx(nt,{present:a||Xt(r.checked)||r.checked===!0,children:i.jsx(X.span,{...n,ref:e,"data-state":Us(r.checked)})})});Gn.displayName=Bs;var Ac="MenuSeparator",Kn=d.forwardRef((t,e)=>{const{__scopeMenu:s,...a}=t;return i.jsx(X.div,{role:"separator","aria-orientation":"horizontal",...a,ref:e})});Kn.displayName=Ac;var Mc="MenuArrow",Hn=d.forwardRef((t,e)=>{const{__scopeMenu:s,...a}=t,n=Wt(s);return i.jsx(Vo,{...n,...a,ref:e})});Hn.displayName=Mc;var Oc="MenuSub",[Ap,Qn]=Le(Oc),ht="MenuSubTrigger",Wn=d.forwardRef((t,e)=>{const s=Ze(ht,t.__scopeMenu),a=pt(ht,t.__scopeMenu),n=Qn(ht,t.__scopeMenu),r=zs(ht,t.__scopeMenu),o=d.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=r,u={__scopeMenu:t.__scopeMenu},m=d.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return d.useEffect(()=>m,[m]),d.useEffect(()=>{const p=l.current;return()=>{window.clearTimeout(p),c(null)}},[l,c]),i.jsx(Ds,{asChild:!0,...u,children:i.jsx(zn,{id:n.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":n.contentId,"data-state":Xn(s.open),...t,ref:Ca(e,n.onTriggerChange),onClick:p=>{var f;(f=t.onClick)==null||f.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:q(t.onPointerMove,ft(p=>{r.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!s.open&&!o.current&&(r.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{s.onOpenChange(!0),m()},100))})),onPointerLeave:q(t.onPointerLeave,ft(p=>{var h,g;m();const f=(h=s.content)==null?void 0:h.getBoundingClientRect();if(f){const N=(g=s.content)==null?void 0:g.dataset.side,_=N==="right",w=_?-5:5,O=f[_?"left":"right"],T=f[_?"right":"left"];r.onPointerGraceIntentChange({area:[{x:p.clientX+w,y:p.clientY},{x:O,y:f.top},{x:T,y:f.top},{x:T,y:f.bottom},{x:O,y:f.bottom}],side:N}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(p),p.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:q(t.onKeyDown,p=>{var h;const f=r.searchRef.current!=="";t.disabled||f&&p.key===" "||fc[a.dir].includes(p.key)&&(s.onOpenChange(!0),(h=s.content)==null||h.focus(),p.preventDefault())})})})});Wn.displayName=ht;var Yn="MenuSubContent",Jn=d.forwardRef((t,e)=>{const s=An(de,t.__scopeMenu),{forceMount:a=s.forceMount,...n}=t,r=Ze(de,t.__scopeMenu),o=pt(de,t.__scopeMenu),l=Qn(Yn,t.__scopeMenu),c=d.useRef(null),u=it(e,c);return i.jsx(mt.Provider,{scope:t.__scopeMenu,children:i.jsx(nt,{present:a||r.open,children:i.jsx(mt.Slot,{scope:t.__scopeMenu,children:i.jsx(Ls,{id:l.contentId,"aria-labelledby":l.triggerId,...n,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var p;o.isUsingKeyboardRef.current&&((p=c.current)==null||p.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:q(t.onFocusOutside,m=>{m.target!==l.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:q(t.onEscapeKeyDown,m=>{o.onClose(),m.preventDefault()}),onKeyDown:q(t.onKeyDown,m=>{var h;const p=m.currentTarget.contains(m.target),f=gc[o.dir].includes(m.key);p&&f&&(r.onOpenChange(!1),(h=l.trigger)==null||h.focus(),m.preventDefault())})})})})})});Jn.displayName=Yn;function Xn(t){return t?"open":"closed"}function Xt(t){return t==="indeterminate"}function Us(t){return Xt(t)?"indeterminate":t?"checked":"unchecked"}function Dc(t){const e=document.activeElement;for(const s of t)if(s===e||(s.focus(),document.activeElement!==e))return}function Fc(t,e){return t.map((s,a)=>t[(e+a)%t.length])}function zc(t,e,s){const a=e.length>1&&Array.from(e).every(l=>l===e[0])?e[0]:e,n=s?t.indexOf(s):-1;let r=Fc(t,Math.max(n,0));a.length===1&&(r=r.filter(l=>l!==s));const o=r.find(l=>l.toLowerCase().startsWith(a.toLowerCase()));return o!==s?o:void 0}function Lc(t,e){const{x:s,y:a}=t;let n=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const l=e[r],c=e[o],u=l.x,m=l.y,p=c.x,f=c.y;m>a!=f>a&&s<(p-u)*(a-m)/(f-m)+u&&(n=!n)}return n}function Zc(t,e){if(!e)return!1;const s={x:t.clientX,y:t.clientY};return Lc(s,e)}function ft(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Bc=Pn,Uc=Ds,Vc=Mn,qc=On,Gc=Zs,Kc=Dn,Hc=Jt,Qc=Ln,Wc=Bn,Yc=Vn,Jc=Gn,Xc=Kn,$c=Hn,ed=Wn,td=Jn,$t="DropdownMenu",[sd,Mp]=at($t,[In]),te=In(),[ad,$n]=sd($t),ei=t=>{const{__scopeDropdownMenu:e,children:s,dir:a,open:n,defaultOpen:r,onOpenChange:o,modal:l=!0}=t,c=te(e),u=d.useRef(null),[m,p]=st({prop:n,defaultProp:r??!1,onChange:o,caller:$t});return i.jsx(ad,{scope:e,triggerId:Cs(),triggerRef:u,contentId:Cs(),open:m,onOpenChange:p,onOpenToggle:d.useCallback(()=>p(f=>!f),[p]),modal:l,children:i.jsx(Bc,{...c,open:m,onOpenChange:p,dir:a,modal:l,children:s})})};ei.displayName=$t;var ti="DropdownMenuTrigger",si=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,disabled:a=!1,...n}=t,r=$n(ti,s),o=te(s);return i.jsx(Uc,{asChild:!0,...o,children:i.jsx(X.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...n,ref:Ca(e,r.triggerRef),onPointerDown:q(t.onPointerDown,l=>{!a&&l.button===0&&l.ctrlKey===!1&&(r.onOpenToggle(),r.open||l.preventDefault())}),onKeyDown:q(t.onKeyDown,l=>{a||(["Enter"," "].includes(l.key)&&r.onOpenToggle(),l.key==="ArrowDown"&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});si.displayName=ti;var nd="DropdownMenuPortal",ai=t=>{const{__scopeDropdownMenu:e,...s}=t,a=te(e);return i.jsx(Vc,{...a,...s})};ai.displayName=nd;var ni="DropdownMenuContent",ii=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=$n(ni,s),r=te(s),o=d.useRef(!1);return i.jsx(qc,{id:n.contentId,"aria-labelledby":n.triggerId,...r,...a,ref:e,onCloseAutoFocus:q(t.onCloseAutoFocus,l=>{var c;o.current||((c=n.triggerRef.current)==null||c.focus()),o.current=!1,l.preventDefault()}),onInteractOutside:q(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,m=c.button===2||u;(!n.modal||m)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ii.displayName=ni;var id="DropdownMenuGroup",ri=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=te(s);return i.jsx(Gc,{...n,...a,ref:e})});ri.displayName=id;var rd="DropdownMenuLabel",oi=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=te(s);return i.jsx(Kc,{...n,...a,ref:e})});oi.displayName=rd;var od="DropdownMenuItem",li=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=te(s);return i.jsx(Hc,{...n,...a,ref:e})});li.displayName=od;var ld="DropdownMenuCheckboxItem",ci=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=te(s);return i.jsx(Qc,{...n,...a,ref:e})});ci.displayName=ld;var cd="DropdownMenuRadioGroup",di=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=te(s);return i.jsx(Wc,{...n,...a,ref:e})});di.displayName=cd;var dd="DropdownMenuRadioItem",ui=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=te(s);return i.jsx(Yc,{...n,...a,ref:e})});ui.displayName=dd;var ud="DropdownMenuItemIndicator",mi=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=te(s);return i.jsx(Jc,{...n,...a,ref:e})});mi.displayName=ud;var md="DropdownMenuSeparator",pi=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=te(s);return i.jsx(Xc,{...n,...a,ref:e})});pi.displayName=md;var pd="DropdownMenuArrow",hd=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=te(s);return i.jsx($c,{...n,...a,ref:e})});hd.displayName=pd;var fd="DropdownMenuSubTrigger",hi=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=te(s);return i.jsx(ed,{...n,...a,ref:e})});hi.displayName=fd;var gd="DropdownMenuSubContent",fi=d.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...a}=t,n=te(s);return i.jsx(td,{...n,...a,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fi.displayName=gd;var xd=ei,vd=si,gi=ai,yd=ii,bd=ri,wd=oi,_d=li,jd=ci,kd=di,Cd=ui,xi=mi,Nd=pi,Td=hi,Ed=fi;const vi=d.createContext("dark"),Sd=()=>d.useContext(vi),gt=xd,xt=vd;d.forwardRef(({className:t,children:e,...s},a)=>i.jsx(bd,{ref:a,className:t,...s,children:e}));const Id=d.forwardRef(({className:t,children:e,...s},a)=>i.jsx(kd,{ref:a,className:t,...s,children:e})),yi=ue("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 overflow-x-hidden rounded-xl py-2 max-h-[calc(var(--radix-dropdown-menu-content-available-height)_-_8px)] bg-white dark:bg-slate-800 shadow-popoverLight dark:shadow-popover",{variants:{}});d.forwardRef(({className:t,children:e,...s},a)=>{const n=Sd();return i.jsx(gi,{children:i.jsx(Ed,{ref:a,className:C(yi(),t),sideOffset:-4,alignOffset:-8,"data-theme":n,...s,children:e})})});const Rd=()=>i.jsxs("div",{className:"flex flex-col space-y-4 px-4 py-2",children:[i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx(Fe,{className:"h-4 w-[88%] rounded-md"})}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx(Fe,{className:"h-4 w-[96%] rounded-md"})}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx(Fe,{className:"h-4 w-[90%] rounded-md"})})]}),vt=d.forwardRef(({children:t,className:e,container:s,isLoading:a,sideOffset:n=6,collisionPadding:r=16,theme:o="dark",...l},c)=>i.jsx(vi.Provider,{value:o,children:i.jsx(gi,{container:s,children:i.jsx(yd,{ref:c,sideOffset:n,className:C(yi(),"min-w-[var(--radix-dropdown-menu-trigger-width)]",e),"data-theme":o,collisionPadding:r,...l,children:a?i.jsx(Rd,{}):t})})}));d.forwardRef(({icon:t,className:e,children:s,...a},n)=>i.jsx(Td,{ref:n,className:C(ss(),e),...a,children:i.jsxs("div",{className:"flex gap-1 items-center w-full",children:[t&&i.jsx("span",{className:as(),children:i.jsx(Q,{icon:t,className:es()})}),i.jsx("div",{className:"flex flex-grow px-1",children:s}),i.jsx(Q,{icon:Fr,className:C(ts(),"size-3 opacity-80 mr-0.5")})]})}));const Pd=ue("group flex items-center px-4 py-1 text-sm outline-none text-slate-900 dark:text-slate-100 focus:bg-slate-100 focus:bg-opacity-100",{variants:{variant:{title:"font-semibold leading-tight min-h-8",label:"text-slate-700 dark:text-slate-400 text-[11px] font-medium uppercase leading-none tracking-wider min-h-6"}},defaultVariants:{variant:"label"}}),bi=d.forwardRef(({className:t,variant:e,...s},a)=>i.jsx(wd,{ref:a,className:C(Pd({variant:e}),"font-semibold leading-tight",t),...s})),wi=d.forwardRef(({className:t,...e},s)=>i.jsx(Nd,{ref:s,className:C("-mx-2 my-2 h-px bg-slate-100 dark:bg-slate-900 dark:drop-shadow-[0px_1px_0px_#334155]",t),...e})),es=ue("text-sm !size-4 transition-colors text-slate-400 dark:text-slate-500 group-data-[disabled]:text-slate-400 dark:group-data-[disabled]:text-slate-600 ",{variants:{variant:{default:"group-data-[highlighted]:text-slate-700 dark:group-data-[highlighted]:text-slate-300",destructive:"group-data-[highlighted]:text-red-500 dark:group-data-[highlighted]:text-red-500"}},defaultVariants:{variant:"default"}}),ts=ue("text-sm size-4 transition-colors text-slate-900 dark:text-slate-100 group-data-[disabled]:text-slate-400 dark:group-data-[disabled]:text-slate-600 dark:group-data-[highlighted]:text-slate-300"),ss=ue("dropdown-menu-item group relative flex flex-col cursor-pointer select-none min-h-8 px-3 py-1 justify-center text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:text-slate-500 w-full text-slate-900 dark:text-slate-100",{variants:{variant:{default:"data-[highlighted]:bg-slate-100 dark:data-[highlighted]:bg-slate-700",destructive:"data-[highlighted]:bg-red-50 dark:data-[highlighted]:bg-red-500/20 data-[highlighted]:text-red-500 dark:data-[highlighted]:text-red-400"}},defaultVariants:{variant:"default"}}),Ad=({className:t,...e})=>i.jsx("span",{className:C("text-xs font-normal leading-none text-slate-400",t),...e}),as=ue("dropdown-menu-item-icon flex items-center justify-center size-5 shrink-0"),_i=({avatarProps:t,children:e,childrenClassName:s,icon:a,iconClassName:n,shortcutText:r,showAvatar:o,showShortcut:l,showTag:c,tagComponent:u,variant:m})=>{const p=u??i.jsx(ga,{type:"pro"});return i.jsxs(i.Fragment,{children:[o&&i.jsx("div",{className:"pl-1",children:i.jsx(ot,{size:"xs",...t})}),a&&i.jsx("span",{className:as(),children:i.jsx(Q,{icon:a,className:C(es({variant:m}),n)})}),i.jsx("span",{className:C("px-1 text-left truncate",s),children:e}),i.jsxs("div",{className:"flex flex-grow justify-end",children:[c&&p,l&&r&&i.jsx(Ad,{children:r})]})]})},yt=d.forwardRef(({avatarProps:t,children:e,childrenClassName:s,className:a,icon:n,iconClassName:r,shortcutText:o,showAvatar:l,showShortcut:c,showTag:u,subtext:m,tagComponent:p,variant:f,...h},g)=>i.jsxs(_d,{ref:g,className:C(ss({variant:f}),{"h-auto":!!m},a),...h,children:[i.jsx("div",{className:"flex gap-1 items-center w-full",children:i.jsx(_i,{showAvatar:l,avatarProps:t,icon:n,iconClassName:r,showTag:u,showShortcut:c,shortcutText:o,subtext:m,childrenClassName:s,tagComponent:p,variant:f,children:e})}),m&&i.jsx("div",{className:C("px-1 text-xs text-slate-400",{"ml-6":!!n}),children:m})]}));d.forwardRef(({avatarProps:t,checked:e,children:s,childrenClassName:a,className:n,icon:r,iconClassName:o,showAvatar:l,showTag:c,subtext:u,tagComponent:m,variant:p,...f},h)=>i.jsxs(jd,{ref:h,className:C(ss({variant:p}),{"h-auto":!!u},n),checked:e,...f,children:[i.jsxs("div",{className:"flex gap-1 items-center w-full",children:[i.jsx("div",{className:"flex-none size-5",children:i.jsx(xi,{className:"flex justify-center items-center size-5",children:i.jsx(Q,{icon:va,className:ts()})})}),i.jsx(_i,{showAvatar:l,avatarProps:t,icon:r,iconClassName:o,childrenClassName:a,showTag:c,tagComponent:m,variant:p,children:s})]}),u&&i.jsx("div",{className:"px-1 ml-6 text-xs mt-[2px] text-slate-400",children:u})]}));const Md=d.forwardRef(({avatarProps:t,children:e,className:s,icon:a,showAvatar:n,subtext:r,subtextProps:o={},variant:l,...c},u)=>{const{className:m,...p}=o;return i.jsx(Cd,{ref:u,className:C(ss({variant:l}),{"h-auto":!!r},s),...c,children:i.jsxs("div",{className:"grid grid-cols-[1.75rem_min-content_1fr] grid-rows-[auto_auto] gap-y-0.5 items-center",children:[i.jsx("div",{className:as(),children:i.jsx(xi,{className:"flex justify-center items-center size-5",children:i.jsx(Q,{icon:va,className:C(ts())})})}),a?i.jsx("div",{className:as(),children:i.jsx(Q,{icon:a,className:C(es(),"text-sm transition-colors size-4 mr-2")})}):n?i.jsx("div",{className:"mr-2",children:i.jsx(ot,{size:"xs",...t})}):i.jsx("span",{}),i.jsx("div",{children:e}),i.jsx("div",{}),i.jsx("div",{}),i.jsx("div",{className:C("text-xs text-slate-400",m),...p,children:r})]})})}),ji=async(t,e,s,a)=>chrome.runtime.sendMessage({messageType:"getCustomUrls"}).then(({FRONTEND_URL:n})=>cr(t,e,s,"",a,`${n}/`)),Od=({mainText:t,ctaText:e,onClickCta:s})=>i.jsx("div",{className:"mx-6 flex items-center justify-center rounded-md bg-gradient-to-b from-brand-300/30 to-white/0 pt-8",children:i.jsxs("div",{className:"flex flex-col items-center gap-2 mx-8 mb-20",children:[i.jsx(Q,{icon:zr,className:"text-4xl text-brand-400"}),i.jsxs("div",{className:"flex flex-col items-center gap-6",children:[i.jsx("p",{className:"text-center text-lg text-slate-600",children:t}),e&&i.jsx(G,{onClick:s,variant:"secondary",children:e})]})]})}),Vs={new:"New",popular:"Popular",viewed:"Recently Viewed",saved:"Saved"},Dd=()=>{const[t,e]=d.useState("popular");return d.useEffect(()=>{(async()=>{try{chrome.runtime.sendMessage({messageType:"getSelectedSuggestionsFilter"},s=>{e(s||"popular")})}catch(s){console.error("Failed to get initial filter:",s)}})()},[]),[t,async s=>{async function a(){try{J("sidebar_sort_option_selected",{option:s}),await chrome.runtime.sendMessage({messageType:"updateSelectedSuggestionsFilter",filter:s})}catch(n){console.error("Failed to update filter:",n)}}e(s),a()}]},Fd=({selectedFilter:t,setSelectedFilter:e})=>t?i.jsxs(gt,{children:[i.jsx(xt,{asChild:!0,children:i.jsx(G,{variant:"ghost",icon:js,iconPosition:"right",className:"bg-transparent dark:bg-transparent ml-3","data-testid":"sortMenu",children:t?Vs[t]:"Select Filter"})}),i.jsx(vt,{children:Object.keys(Vs).map(s=>i.jsx(yt,{onClick:()=>{e(s)},children:Vs[s]},s))})]}):null,zd=({hasViewerLicense:t,selectedTeam:e,onVisitWorkspaceDocuments:s,onStartRecording:a,showPinButton:n,currentWindowId:r,pinFlagEnabled:o,userCanCreatePins:l})=>{const c=Lt(),[u,m]=d.useState(void 0),[p,f]=Dd(),{workspaceScribes:h}=K(dr),g=K(ur),N=(e==null?void 0:e.id)||void 0,_=K(ia)||p!=="saved"&&h===null||p==="saved"&&g===null,w=d.useMemo(()=>p==="saved"?g?g.documents:[]:h||[],[p,g,h]),[O,T]=d.useState({});d.useEffect(()=>{(async()=>{if(w&&w.length>0)try{const k=await Promise.all(w.map(async D=>({id:D.id,url:await ji(D.id,D.name,!1,D.type)}))),I=Object.fromEntries(k.map(({id:D,url:B})=>[D,B]));T(I)}catch{T({})}})()},[w]),d.useEffect(()=>()=>{chrome.runtime.sendMessage({messageType:"removePopup"})},[]);const y=d.useCallback(async()=>{var D,B;const k=((D=await ra())==null?void 0:D.toString())||"";if(!k)return;if(c(mr(k)),p==="saved"){c(oa({}));return}const I={sort:p,domain:void 0,url:k,organizationId:N};N&&p&&(((B=e==null?void 0:e.super_organization)==null?void 0:B.id)==="3e818212-8bf1-448a-8485-b11ace14e712"?c(la({...I,organizationId:void 0})):c(la(I)))},[c,p,N,e]),P=async()=>{_||p!=="saved"||g!=null&&g.total_files&&w.length<g.total_files&&c(oa({skip:w.length,organizationId:N}))};d.useEffect(()=>{p&&(e!=null&&e.id)&&y()},[p,e==null?void 0:e.id,y]),d.useEffect(()=>{const k=async I=>{var D;if(I.messageType==="currentTabChanged"&&p!=="saved"){const B=(D=await ra())==null?void 0:D.hostname;B!==u&&(m(B),y())}};return chrome.runtime.onMessage.addListener(k),()=>{chrome.runtime.onMessage.removeListener(k)}},[c,y,p,u]);const R=p==="saved"?w.filter(k=>k.favorited).length===0:w.length===0;d.useEffect(()=>{R&&!_&&u&&J("extension_empty_state",{selectedFilter:p,domainLastFetched:u})},[R,_,p,u]);const v=d.useMemo(()=>w.map(k=>{var I,D;return{...k,id:k.id,name:k.name,metadata:[i.jsx(Tn,{text:(I=k.organization_owner)==null?void 0:I.name},(D=k.organization_owner)==null?void 0:D.name),k.author],onClick:()=>{const B=`${O[k.id]}?sidepanel=true&referrer=sidekick`;J("extension_recommended_scribe_opened",{name:k.name,id:k.id,section:"workspace"}),chrome.runtime.sendMessage({messageType:"openUrlInSidepanel",url:B})},miniMenuConfig:[{icon:Xr,iconPostClick:$r,label:"Copy link to clipboard",onClick:B=>{B.preventDefault(),B.stopPropagation();const z=O[k.id];z&&(navigator.clipboard.writeText(z),J("got_share_link",{location:"sidekick",link:z}))}},...o&&l?[{icon:eo,label:"Pin document",onClick:B=>{B.preventDefault(),B.stopPropagation(),chrome.runtime.sendMessage({messageType:"startDropPin",scribe:k})}}]:[]]}}),[r,o,w,l,O]),E=t?{mainText:"You and your team can find captured scribes here. Request a scribe from your administrator."}:p==="saved"?{onClickCta:s,mainText:"Save Scribes in order to see them here. Find documents in your workspace and save your favorite ones.",ctaText:"Start Saving"}:{onClickCta:a,mainText:"Capture a Scribe for this application. You and your team can find it here.",ctaText:"Start Capture"};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex align-center justify-between mr-6 mb-4",children:[i.jsx(Fd,{selectedFilter:p,setSelectedFilter:f}),n&&i.jsx(bn,{})]}),R&&!_?i.jsx(Od,{...E}):i.jsxs(i.Fragment,{children:[i.jsx(mc,{isLoading:_,cardItems:v}),i.jsx(Mo,{onVisible:P})]})]})},Ld=({isCopilotSearch:t,onOpenSidepanel:e})=>{const s=()=>{const a=ja();if(t){chrome.runtime.sendMessage({messageType:"startCopilotSearch",source:Ce.SIDEPANEL,askAiId:a}),Ut().then(n=>{n&&J("copilot_entry_point_click",{url:n.url,ask_ai_id:a})});return}e(Ge.Assistant,!0)};return i.jsx("div",{className:"mx-6 mt-3",children:i.jsxs("button",{className:"w-full p-3 text-slate-500 h-10 flex items-center gap-2 rounded-md bg-white hover:bg-slate-100 border border-slate-300 cursor-pointer mb-8",onClick:s,"data-testid":"extensionOpenSearchButton",children:[i.jsx(Q,{icon:Lr,className:"text-slate-500"}),"How do I..."]})})};var ns="Tabs",[Zd,Op]=at(ns,[Ne]),ki=Ne(),[Bd,qs]=Zd(ns),Ci=d.forwardRef((t,e)=>{const{__scopeTabs:s,value:a,onValueChange:n,defaultValue:r,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,m=Gt(l),[p,f]=st({prop:a,onChange:n,defaultProp:r??"",caller:ns});return i.jsx(Bd,{scope:s,baseId:Cs(),value:p,onValueChange:f,orientation:o,dir:m,activationMode:c,children:i.jsx(X.div,{dir:m,"data-orientation":o,...u,ref:e})})});Ci.displayName=ns;var Ni="TabsList",Ti=d.forwardRef((t,e)=>{const{__scopeTabs:s,loop:a=!0,...n}=t,r=qs(Ni,s),o=ki(s);return i.jsx(qt,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:a,children:i.jsx(X.div,{role:"tablist","aria-orientation":r.orientation,...n,ref:e})})});Ti.displayName=Ni;var Ei="TabsTrigger",Si=d.forwardRef((t,e)=>{const{__scopeTabs:s,value:a,disabled:n=!1,...r}=t,o=qs(Ei,s),l=ki(s),c=Pi(o.baseId,a),u=Ai(o.baseId,a),m=a===o.value;return i.jsx(rt,{asChild:!0,...l,focusable:!n,active:m,children:i.jsx(X.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...r,ref:e,onMouseDown:q(t.onMouseDown,p=>{!n&&p.button===0&&p.ctrlKey===!1?o.onValueChange(a):p.preventDefault()}),onKeyDown:q(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(a)}),onFocus:q(t.onFocus,()=>{const p=o.activationMode!=="manual";!m&&!n&&p&&o.onValueChange(a)})})})});Si.displayName=Ei;var Ii="TabsContent",Ri=d.forwardRef((t,e)=>{const{__scopeTabs:s,value:a,forceMount:n,children:r,...o}=t,l=qs(Ii,s),c=Pi(l.baseId,a),u=Ai(l.baseId,a),m=a===l.value,p=d.useRef(m);return d.useEffect(()=>{const f=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(f)},[]),i.jsx(nt,{present:n||m,children:({present:f})=>i.jsx(X.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:f&&r})})});Ri.displayName=Ii;function Pi(t,e){return`${t}-trigger-${e}`}function Ai(t,e){return`${t}-content-${e}`}var Ud=Ci,Vd=Ti,qd=Si,Gd=Ri;const Kd=d.forwardRef(({theme:t="light",children:e,...s},a)=>i.jsx(Ud,{ref:a,"data-theme":t,...s,children:e})),Hd=({className:t,variant:e="underline",children:s,...a})=>{const n=d.useRef(null),[r,o]=d.useState(null);d.useEffect(()=>{if(!(n!=null&&n.current))return;const u=({animate:f=!0})=>{if(n.current){const h=n.current.querySelector("[data-tab-indicator]");if(h&&r){const{offsetLeft:g,offsetWidth:N}=r,{paddingLeft:_,paddingRight:w}=getComputedStyle(r),O=g+(e==="underline"?parseFloat(_):0),T=n.current.offsetWidth-(g+N)+(e==="underline"?parseFloat(w):0);h.style.transition=f?"left 150ms, right 150ms":"none",h.style.left=`${O}px`,h.style.right=`${T}px`}}},m=new MutationObserver(f=>{f.forEach(()=>{if(n.current){const h=n.current.querySelector('[data-state="active"]');h!==r?(o(h),u({animate:!0})):u({animate:!1})}})});m.observe(n.current,{attributes:!0,attributeFilter:["data-state"],childList:!0,subtree:!0});const p=n.current.querySelector('[data-state="active"]');return o(p),u({animate:!0}),()=>m.disconnect()},[n,r,e,a]);const l=ue("relative isolate h-10 min-w-max",{variants:{variant:{underline:"-mx-3 inline-flex items-end justify-center bg-transparent pb-1",switch:"inline-grid w-full auto-cols-fr grid-flow-col grid-rows-1 items-start justify-start rounded-[10px] bg-slate-100 dark:bg-slate-950/50 p-1 shadow-[0_0_1_0_rgba(71,85,105,0.2)_inset] dark:shadow-[0_0_0_1px_rgba(0,0,0,0.2)_inset]"}},defaultVariants:{variant:"underline"}}),c=ue("absolute ease-out will-change-[left,right]",{variants:{variant:{underline:"-bottom-0.5 h-0.5 bg-brand-500",switch:"inset-y-1 rounded-md bg-white dark:bg-slate-800 shadow shadow-slate-900/15 dark:shadow-[0_0_0_1px_rgba(255,255,255,0.02)_inset] dark:shadow-[0_1px_0_0_rgba(255,255,255,0.05)_inset]"}}});return i.jsxs(Vd,{ref:n,className:l({variant:e,className:t}),...a,children:[s,e==="underline"&&i.jsx("div",{role:"presentation",className:"absolute inset-x-3 -bottom-0.5 h-0.5 bg-slate-200 dark:bg-slate-700/50"}),i.jsx("div",{"data-tab-indicator":!0,role:"presentation",className:c({variant:e})})]})},Mi=d.forwardRef(({className:t,count:e,icon:s,children:a,...n},r)=>i.jsxs(qd,{ref:r,className:C("focus-visible:outline-brand-400 group relative z-10 flex h-8 cursor-pointer items-center justify-center gap-2 rounded-md bg-transparent px-3 py-2 font-sans text-sm font-medium text-slate-500 dark:text-slate-400 transition-colors duration-100 ease-linear hover:text-slate-800 dark:hover:text-slate-300 focus-visible:outline focus-visible:outline-[1.5px] focus-visible:ring-0 data-[disabled]:cursor-default data-[disabled]:text-slate-300 dark:data-[disabled]:text-slate-500 data-[state=active]:text-slate-900 dark:data-[state=active]:text-slate-50 data-[disabled]:hover:bg-transparent",t),...n,children:[s&&i.jsx(Q,{icon:s,className:C("size-4 text-slate-400 dark:text-slate-500 transition-colors group-hover:text-slate-500 dark:group-hover:text-slate-400 group-data-[disabled]:text-slate-300 dark:group-data-[disabled]:text-slate-600 dark:group-data-[state=active]:text-slate-400")}),a,e?i.jsx("span",{className:C("h-4 rounded bg-slate-400/10 dark:bg-slate-500/20 px-1 py-0.5 text-center text-[11px] font-semibold leading-[13px] text-slate-400 dark:text-slate-400 transition-colors group-hover:text-slate-500 dark:group-hover:text-slate-400 group-data-[state=active]:bg-slate-100 dark:group-data-[state=active]:bg-slate-700 group-data-[disabled]:text-slate-300 dark:group-data-[disabled]:text-slate-600 group-data-[state=active]:text-slate-500 dark:group-data-[state=active]:text-slate-300"),children:e}):null]}));d.forwardRef(({className:t,...e},s)=>i.jsx(Gd,{ref:s,className:C("focus-visible:outline-brand-400 mt-2 text-slate-800 dark:text-slate-200 focus-visible:rounded-md focus-visible:outline focus-visible:outline-[1.5px] focus-visible:outline-offset-2 focus-visible:ring-0",t),...e}));var U;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function s(n){throw new Error}t.assertNever=s,t.arrayToEnum=n=>{const r={};for(const o of n)r[o]=o;return r},t.getValidEnumValues=n=>{const r=t.objectKeys(n).filter(l=>typeof n[n[l]]!="number"),o={};for(const l of r)o[l]=n[l];return t.objectValues(o)},t.objectValues=n=>t.objectKeys(n).map(function(r){return n[r]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const r=[];for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.push(o);return r},t.find=(n,r)=>{for(const o of n)if(r(o))return o},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function a(n,r=" | "){return n.map(o=>typeof o=="string"?`'${o}'`:o).join(r)}t.joinValues=a,t.jsonStringifyReplacer=(n,r)=>typeof r=="bigint"?r.toString():r})(U||(U={}));var Gs;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})(Gs||(Gs={}));const j=U.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ee=t=>{switch(typeof t){case"undefined":return j.undefined;case"string":return j.string;case"number":return isNaN(t)?j.nan:j.number;case"boolean":return j.boolean;case"function":return j.function;case"bigint":return j.bigint;case"symbol":return j.symbol;case"object":return Array.isArray(t)?j.array:t===null?j.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?j.promise:typeof Map<"u"&&t instanceof Map?j.map:typeof Set<"u"&&t instanceof Set?j.set:typeof Date<"u"&&t instanceof Date?j.date:j.object;default:return j.unknown}},x=U.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Qd=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ce extends Error{constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const s=e||function(r){return r.message},a={_errors:[]},n=r=>{for(const o of r.issues)if(o.code==="invalid_union")o.unionErrors.map(n);else if(o.code==="invalid_return_type")n(o.returnTypeError);else if(o.code==="invalid_arguments")n(o.argumentsError);else if(o.path.length===0)a._errors.push(s(o));else{let l=a,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(s(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return n(this),a}static assert(e){if(!(e instanceof ce))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,U.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},a=[];for(const n of this.issues)n.path.length>0?(s[n.path[0]]=s[n.path[0]]||[],s[n.path[0]].push(e(n))):a.push(e(n));return{formErrors:a,fieldErrors:s}}get formErrors(){return this.flatten()}}ce.create=t=>new ce(t);const He=(t,e)=>{let s;switch(t.code){case x.invalid_type:t.received===j.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case x.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,U.jsonStringifyReplacer)}`;break;case x.unrecognized_keys:s=`Unrecognized key(s) in object: ${U.joinValues(t.keys,", ")}`;break;case x.invalid_union:s="Invalid input";break;case x.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${U.joinValues(t.options)}`;break;case x.invalid_enum_value:s=`Invalid enum value. Expected ${U.joinValues(t.options)}, received '${t.received}'`;break;case x.invalid_arguments:s="Invalid function arguments";break;case x.invalid_return_type:s="Invalid function return type";break;case x.invalid_date:s="Invalid date";break;case x.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:U.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case x.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case x.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case x.custom:s="Invalid input";break;case x.invalid_intersection_types:s="Intersection results could not be merged";break;case x.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case x.not_finite:s="Number must be finite";break;default:s=e.defaultError,U.assertNever(t)}return{message:s}};let Oi=He;function Wd(t){Oi=t}function is(){return Oi}const rs=t=>{const{data:e,path:s,errorMaps:a,issueData:n}=t,r=[...s,...n.path||[]],o={...n,path:r};if(n.message!==void 0)return{...n,path:r,message:n.message};let l="";const c=a.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...n,path:r,message:l}},Yd=[];function b(t,e){const s=is(),a=rs({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===He?void 0:He].filter(n=>!!n)});t.common.issues.push(a)}class ${constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const a=[];for(const n of s){if(n.status==="aborted")return M;n.status==="dirty"&&e.dirty(),a.push(n.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,s){const a=[];for(const n of s){const r=await n.key,o=await n.value;a.push({key:r,value:o})}return $.mergeObjectSync(e,a)}static mergeObjectSync(e,s){const a={};for(const n of s){const{key:r,value:o}=n;if(r.status==="aborted"||o.status==="aborted")return M;r.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof o.value<"u"||n.alwaysSet)&&(a[r.value]=o.value)}return{status:e.value,value:a}}}const M=Object.freeze({status:"aborted"}),os=t=>({status:"dirty",value:t}),se=t=>({status:"valid",value:t}),Ks=t=>t.status==="aborted",Hs=t=>t.status==="dirty",bt=t=>t.status==="valid",wt=t=>typeof Promise<"u"&&t instanceof Promise;function ls(t,e,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(t):a?a.value:e.get(t)}function Di(t,e,s,a,n){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?n.call(t,s):n?n.value=s:e.set(t,s),s}var S;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(S||(S={}));var _t,jt;class ge{constructor(e,s,a,n){this._cachedPath=[],this.parent=e,this.data=s,this._path=a,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Fi=(t,e)=>{if(bt(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new ce(t.common.issues);return this._error=s,this._error}}};function L(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:a,description:n}=t;if(e&&(s||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(r,o)=>{var l,c;const{message:u}=t;return r.code==="invalid_enum_value"?{message:u??o.defaultError}:typeof o.data>"u"?{message:(l=u??a)!==null&&l!==void 0?l:o.defaultError}:r.code!=="invalid_type"?{message:o.defaultError}:{message:(c=u??s)!==null&&c!==void 0?c:o.defaultError}},description:n}}class Z{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ee(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:Ee(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $,ctx:{common:e.parent.common,data:e.data,parsedType:Ee(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(wt(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const a=this.safeParse(e,s);if(a.success)return a.data;throw a.error}safeParse(e,s){var a;const n={common:{issues:[],async:(a=s==null?void 0:s.async)!==null&&a!==void 0?a:!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ee(e)},r=this._parseSync({data:e,path:n.path,parent:n});return Fi(n,r)}async parseAsync(e,s){const a=await this.safeParseAsync(e,s);if(a.success)return a.data;throw a.error}async safeParseAsync(e,s){const a={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ee(e)},n=this._parse({data:e,path:a.path,parent:a}),r=await(wt(n)?n:Promise.resolve(n));return Fi(a,r)}refine(e,s){const a=n=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(n):s;return this._refinement((n,r)=>{const o=e(n),l=()=>r.addIssue({code:x.custom,...a(n)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,s){return this._refinement((a,n)=>e(a)?!0:(n.addIssue(typeof s=="function"?s(a,n):s),!1))}_refinement(e){return new me({schema:this,typeName:A.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return xe.create(this,this._def)}nullable(){return Ie.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return pe.create(this,this._def)}promise(){return Ye.create(this,this._def)}or(e){return Tt.create([this,e],this._def)}and(e){return Et.create(this,e,this._def)}transform(e){return new me({...L(this._def),schema:this,typeName:A.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new Pt({...L(this._def),innerType:this,defaultValue:s,typeName:A.ZodDefault})}brand(){return new Ys({typeName:A.ZodBranded,type:this,...L(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new At({...L(this._def),innerType:this,catchValue:s,typeName:A.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return Dt.create(this,e)}readonly(){return Mt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Jd=/^c[^\s-]{8,}$/i,Xd=/^[0-9a-z]+$/,$d=/^[0-9A-HJKMNP-TV-Z]{26}$/,eu=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tu=/^[a-z0-9_-]{21}$/i,su=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,au=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nu="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Qs;const iu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ru=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ou=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,zi="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",lu=new RegExp(`^${zi}$`);function Li(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function cu(t){return new RegExp(`^${Li(t)}$`)}function Zi(t){let e=`${zi}T${Li(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function du(t,e){return!!((e==="v4"||!e)&&iu.test(t)||(e==="v6"||!e)&&ru.test(t))}class he extends Z{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==j.string){const n=this._getOrReturnCtx(e);return b(n,{code:x.invalid_type,expected:j.string,received:n.parsedType}),M}const s=new $;let a;for(const n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:x.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="max")e.data.length>n.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:x.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),s.dirty());else if(n.kind==="length"){const r=e.data.length>n.value,o=e.data.length<n.value;(r||o)&&(a=this._getOrReturnCtx(e,a),r?b(a,{code:x.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):o&&b(a,{code:x.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),s.dirty())}else if(n.kind==="email")au.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"email",code:x.invalid_string,message:n.message}),s.dirty());else if(n.kind==="emoji")Qs||(Qs=new RegExp(nu,"u")),Qs.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"emoji",code:x.invalid_string,message:n.message}),s.dirty());else if(n.kind==="uuid")eu.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"uuid",code:x.invalid_string,message:n.message}),s.dirty());else if(n.kind==="nanoid")tu.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"nanoid",code:x.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid")Jd.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"cuid",code:x.invalid_string,message:n.message}),s.dirty());else if(n.kind==="cuid2")Xd.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"cuid2",code:x.invalid_string,message:n.message}),s.dirty());else if(n.kind==="ulid")$d.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"ulid",code:x.invalid_string,message:n.message}),s.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),b(a,{validation:"url",code:x.invalid_string,message:n.message}),s.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"regex",code:x.invalid_string,message:n.message}),s.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(a=this._getOrReturnCtx(e,a),b(a,{code:x.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),s.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(a=this._getOrReturnCtx(e,a),b(a,{code:x.invalid_string,validation:{startsWith:n.value},message:n.message}),s.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(a=this._getOrReturnCtx(e,a),b(a,{code:x.invalid_string,validation:{endsWith:n.value},message:n.message}),s.dirty()):n.kind==="datetime"?Zi(n).test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{code:x.invalid_string,validation:"datetime",message:n.message}),s.dirty()):n.kind==="date"?lu.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{code:x.invalid_string,validation:"date",message:n.message}),s.dirty()):n.kind==="time"?cu(n).test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{code:x.invalid_string,validation:"time",message:n.message}),s.dirty()):n.kind==="duration"?su.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"duration",code:x.invalid_string,message:n.message}),s.dirty()):n.kind==="ip"?du(e.data,n.version)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"ip",code:x.invalid_string,message:n.message}),s.dirty()):n.kind==="base64"?ou.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"base64",code:x.invalid_string,message:n.message}),s.dirty()):U.assertNever(n);return{status:s.value,value:e.data}}_regex(e,s,a){return this.refinement(n=>e.test(n),{validation:s,code:x.invalid_string,...S.errToObj(a)})}_addCheck(e){return new he({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...S.errToObj(e)})}url(e){return this._addCheck({kind:"url",...S.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...S.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...S.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...S.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...S.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...S.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...S.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...S.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...S.errToObj(e)})}datetime(e){var s,a;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(s=e==null?void 0:e.offset)!==null&&s!==void 0?s:!1,local:(a=e==null?void 0:e.local)!==null&&a!==void 0?a:!1,...S.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...S.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...S.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...S.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...S.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...S.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...S.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...S.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...S.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...S.errToObj(s)})}nonempty(e){return this.min(1,S.errToObj(e))}trim(){return new he({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new he({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new he({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}he.create=t=>{var e;return new he({checks:[],typeName:A.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...L(t)})};function uu(t,e){const s=(t.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,n=s>a?s:a,r=parseInt(t.toFixed(n).replace(".","")),o=parseInt(e.toFixed(n).replace(".",""));return r%o/Math.pow(10,n)}class Pe extends Z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==j.number){const n=this._getOrReturnCtx(e);return b(n,{code:x.invalid_type,expected:j.number,received:n.parsedType}),M}let s;const a=new $;for(const n of this._def.checks)n.kind==="int"?U.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),b(s,{code:x.invalid_type,expected:"integer",received:"float",message:n.message}),a.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),b(s,{code:x.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),a.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),b(s,{code:x.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),a.dirty()):n.kind==="multipleOf"?uu(e.data,n.value)!==0&&(s=this._getOrReturnCtx(e,s),b(s,{code:x.not_multiple_of,multipleOf:n.value,message:n.message}),a.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),b(s,{code:x.not_finite,message:n.message}),a.dirty()):U.assertNever(n);return{status:a.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,S.toString(s))}gt(e,s){return this.setLimit("min",e,!1,S.toString(s))}lte(e,s){return this.setLimit("max",e,!0,S.toString(s))}lt(e,s){return this.setLimit("max",e,!1,S.toString(s))}setLimit(e,s,a,n){return new Pe({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:a,message:S.toString(n)}]})}_addCheck(e){return new Pe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:S.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:S.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:S.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:S.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:S.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:S.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:S.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:S.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:S.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&U.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(s===null||a.value>s)&&(s=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(s)&&Number.isFinite(e)}}Pe.create=t=>new Pe({checks:[],typeName:A.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...L(t)});class Ae extends Z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==j.bigint){const n=this._getOrReturnCtx(e);return b(n,{code:x.invalid_type,expected:j.bigint,received:n.parsedType}),M}let s;const a=new $;for(const n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(s=this._getOrReturnCtx(e,s),b(s,{code:x.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),a.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(s=this._getOrReturnCtx(e,s),b(s,{code:x.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),a.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),b(s,{code:x.not_multiple_of,multipleOf:n.value,message:n.message}),a.dirty()):U.assertNever(n);return{status:a.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,S.toString(s))}gt(e,s){return this.setLimit("min",e,!1,S.toString(s))}lte(e,s){return this.setLimit("max",e,!0,S.toString(s))}lt(e,s){return this.setLimit("max",e,!1,S.toString(s))}setLimit(e,s,a,n){return new Ae({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:a,message:S.toString(n)}]})}_addCheck(e){return new Ae({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:S.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:S.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:S.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:S.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:S.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}Ae.create=t=>{var e;return new Ae({checks:[],typeName:A.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...L(t)})};class kt extends Z{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==j.boolean){const s=this._getOrReturnCtx(e);return b(s,{code:x.invalid_type,expected:j.boolean,received:s.parsedType}),M}return se(e.data)}}kt.create=t=>new kt({typeName:A.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...L(t)});class Ue extends Z{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==j.date){const n=this._getOrReturnCtx(e);return b(n,{code:x.invalid_type,expected:j.date,received:n.parsedType}),M}if(isNaN(e.data.getTime())){const n=this._getOrReturnCtx(e);return b(n,{code:x.invalid_date}),M}const s=new $;let a;for(const n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:x.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),s.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:x.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),s.dirty()):U.assertNever(n);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ue({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:S.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:S.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}Ue.create=t=>new Ue({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:A.ZodDate,...L(t)});class cs extends Z{_parse(e){if(this._getType(e)!==j.symbol){const s=this._getOrReturnCtx(e);return b(s,{code:x.invalid_type,expected:j.symbol,received:s.parsedType}),M}return se(e.data)}}cs.create=t=>new cs({typeName:A.ZodSymbol,...L(t)});class Ct extends Z{_parse(e){if(this._getType(e)!==j.undefined){const s=this._getOrReturnCtx(e);return b(s,{code:x.invalid_type,expected:j.undefined,received:s.parsedType}),M}return se(e.data)}}Ct.create=t=>new Ct({typeName:A.ZodUndefined,...L(t)});class Nt extends Z{_parse(e){if(this._getType(e)!==j.null){const s=this._getOrReturnCtx(e);return b(s,{code:x.invalid_type,expected:j.null,received:s.parsedType}),M}return se(e.data)}}Nt.create=t=>new Nt({typeName:A.ZodNull,...L(t)});class Qe extends Z{constructor(){super(...arguments),this._any=!0}_parse(e){return se(e.data)}}Qe.create=t=>new Qe({typeName:A.ZodAny,...L(t)});class Be extends Z{constructor(){super(...arguments),this._unknown=!0}_parse(e){return se(e.data)}}Be.create=t=>new Be({typeName:A.ZodUnknown,...L(t)});class be extends Z{_parse(e){const s=this._getOrReturnCtx(e);return b(s,{code:x.invalid_type,expected:j.never,received:s.parsedType}),M}}be.create=t=>new be({typeName:A.ZodNever,...L(t)});class ds extends Z{_parse(e){if(this._getType(e)!==j.undefined){const s=this._getOrReturnCtx(e);return b(s,{code:x.invalid_type,expected:j.void,received:s.parsedType}),M}return se(e.data)}}ds.create=t=>new ds({typeName:A.ZodVoid,...L(t)});class pe extends Z{_parse(e){const{ctx:s,status:a}=this._processInputParams(e),n=this._def;if(s.parsedType!==j.array)return b(s,{code:x.invalid_type,expected:j.array,received:s.parsedType}),M;if(n.exactLength!==null){const o=s.data.length>n.exactLength.value,l=s.data.length<n.exactLength.value;(o||l)&&(b(s,{code:o?x.too_big:x.too_small,minimum:l?n.exactLength.value:void 0,maximum:o?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),a.dirty())}if(n.minLength!==null&&s.data.length<n.minLength.value&&(b(s,{code:x.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),a.dirty()),n.maxLength!==null&&s.data.length>n.maxLength.value&&(b(s,{code:x.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),a.dirty()),s.common.async)return Promise.all([...s.data].map((o,l)=>n.type._parseAsync(new ge(s,o,s.path,l)))).then(o=>$.mergeArray(a,o));const r=[...s.data].map((o,l)=>n.type._parseSync(new ge(s,o,s.path,l)));return $.mergeArray(a,r)}get element(){return this._def.type}min(e,s){return new pe({...this._def,minLength:{value:e,message:S.toString(s)}})}max(e,s){return new pe({...this._def,maxLength:{value:e,message:S.toString(s)}})}length(e,s){return new pe({...this._def,exactLength:{value:e,message:S.toString(s)}})}nonempty(e){return this.min(1,e)}}pe.create=(t,e)=>new pe({type:t,minLength:null,maxLength:null,exactLength:null,typeName:A.ZodArray,...L(e)});function We(t){if(t instanceof W){const e={};for(const s in t.shape){const a=t.shape[s];e[s]=xe.create(We(a))}return new W({...t._def,shape:()=>e})}else return t instanceof pe?new pe({...t._def,type:We(t.element)}):t instanceof xe?xe.create(We(t.unwrap())):t instanceof Ie?Ie.create(We(t.unwrap())):t instanceof ve?ve.create(t.items.map(e=>We(e))):t}class W extends Z{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=U.objectKeys(e);return this._cached={shape:e,keys:s}}_parse(e){if(this._getType(e)!==j.object){const c=this._getOrReturnCtx(e);return b(c,{code:x.invalid_type,expected:j.object,received:c.parsedType}),M}const{status:s,ctx:a}=this._processInputParams(e),{shape:n,keys:r}=this._getCached(),o=[];if(!(this._def.catchall instanceof be&&this._def.unknownKeys==="strip"))for(const c in a.data)r.includes(c)||o.push(c);const l=[];for(const c of r){const u=n[c],m=a.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new ge(a,m,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof be){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(c==="strict")o.length>0&&(b(a,{code:x.unrecognized_keys,keys:o}),s.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const m=a.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new ge(a,m,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const m=await u.key,p=await u.value;c.push({key:m,value:p,alwaysSet:u.alwaysSet})}return c}).then(c=>$.mergeObjectSync(s,c)):$.mergeObjectSync(s,l)}get shape(){return this._def.shape()}strict(e){return S.errToObj,new W({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,a)=>{var n,r,o,l;const c=(o=(r=(n=this._def).errorMap)===null||r===void 0?void 0:r.call(n,s,a).message)!==null&&o!==void 0?o:a.defaultError;return s.code==="unrecognized_keys"?{message:(l=S.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new W({...this._def,unknownKeys:"strip"})}passthrough(){return new W({...this._def,unknownKeys:"passthrough"})}extend(e){return new W({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new W({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:A.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new W({...this._def,catchall:e})}pick(e){const s={};return U.objectKeys(e).forEach(a=>{e[a]&&this.shape[a]&&(s[a]=this.shape[a])}),new W({...this._def,shape:()=>s})}omit(e){const s={};return U.objectKeys(this.shape).forEach(a=>{e[a]||(s[a]=this.shape[a])}),new W({...this._def,shape:()=>s})}deepPartial(){return We(this)}partial(e){const s={};return U.objectKeys(this.shape).forEach(a=>{const n=this.shape[a];e&&!e[a]?s[a]=n:s[a]=n.optional()}),new W({...this._def,shape:()=>s})}required(e){const s={};return U.objectKeys(this.shape).forEach(a=>{if(e&&!e[a])s[a]=this.shape[a];else{let n=this.shape[a];for(;n instanceof xe;)n=n._def.innerType;s[a]=n}}),new W({...this._def,shape:()=>s})}keyof(){return Bi(U.objectKeys(this.shape))}}W.create=(t,e)=>new W({shape:()=>t,unknownKeys:"strip",catchall:be.create(),typeName:A.ZodObject,...L(e)}),W.strictCreate=(t,e)=>new W({shape:()=>t,unknownKeys:"strict",catchall:be.create(),typeName:A.ZodObject,...L(e)}),W.lazycreate=(t,e)=>new W({shape:t,unknownKeys:"strip",catchall:be.create(),typeName:A.ZodObject,...L(e)});class Tt extends Z{_parse(e){const{ctx:s}=this._processInputParams(e),a=this._def.options;function n(r){for(const l of r)if(l.result.status==="valid")return l.result;for(const l of r)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const o=r.map(l=>new ce(l.ctx.common.issues));return b(s,{code:x.invalid_union,unionErrors:o}),M}if(s.common.async)return Promise.all(a.map(async r=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await r._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(n);{let r;const o=[];for(const c of a){const u={...s,common:{...s.common,issues:[]},parent:null},m=c._parseSync({data:s.data,path:s.path,parent:u});if(m.status==="valid")return m;m.status==="dirty"&&!r&&(r={result:m,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(r)return s.common.issues.push(...r.ctx.common.issues),r.result;const l=o.map(c=>new ce(c));return b(s,{code:x.invalid_union,unionErrors:l}),M}}get options(){return this._def.options}}Tt.create=(t,e)=>new Tt({options:t,typeName:A.ZodUnion,...L(e)});const Se=t=>t instanceof St?Se(t.schema):t instanceof me?Se(t.innerType()):t instanceof It?[t.value]:t instanceof Me?t.options:t instanceof Rt?U.objectValues(t.enum):t instanceof Pt?Se(t._def.innerType):t instanceof Ct?[void 0]:t instanceof Nt?[null]:t instanceof xe?[void 0,...Se(t.unwrap())]:t instanceof Ie?[null,...Se(t.unwrap())]:t instanceof Ys||t instanceof Mt?Se(t.unwrap()):t instanceof At?Se(t._def.innerType):[];class vs extends Z{_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==j.object)return b(s,{code:x.invalid_type,expected:j.object,received:s.parsedType}),M;const a=this.discriminator,n=s.data[a],r=this.optionsMap.get(n);return r?s.common.async?r._parseAsync({data:s.data,path:s.path,parent:s}):r._parseSync({data:s.data,path:s.path,parent:s}):(b(s,{code:x.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),M)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,s,a){const n=new Map;for(const r of s){const o=Se(r.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(n.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);n.set(l,r)}}return new vs({typeName:A.ZodDiscriminatedUnion,discriminator:e,options:s,optionsMap:n,...L(a)})}}function Ws(t,e){const s=Ee(t),a=Ee(e);if(t===e)return{valid:!0,data:t};if(s===j.object&&a===j.object){const n=U.objectKeys(e),r=U.objectKeys(t).filter(l=>n.indexOf(l)!==-1),o={...t,...e};for(const l of r){const c=Ws(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(s===j.array&&a===j.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let r=0;r<t.length;r++){const o=t[r],l=e[r],c=Ws(o,l);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return s===j.date&&a===j.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Et extends Z{_parse(e){const{status:s,ctx:a}=this._processInputParams(e),n=(r,o)=>{if(Ks(r)||Ks(o))return M;const l=Ws(r.value,o.value);return l.valid?((Hs(r)||Hs(o))&&s.dirty(),{status:s.value,value:l.data}):(b(a,{code:x.invalid_intersection_types}),M)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([r,o])=>n(r,o)):n(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}Et.create=(t,e,s)=>new Et({left:t,right:e,typeName:A.ZodIntersection,...L(s)});class ve extends Z{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==j.array)return b(a,{code:x.invalid_type,expected:j.array,received:a.parsedType}),M;if(a.data.length<this._def.items.length)return b(a,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),M;!this._def.rest&&a.data.length>this._def.items.length&&(b(a,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const n=[...a.data].map((r,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new ge(a,r,a.path,o)):null}).filter(r=>!!r);return a.common.async?Promise.all(n).then(r=>$.mergeArray(s,r)):$.mergeArray(s,n)}get items(){return this._def.items}rest(e){return new ve({...this._def,rest:e})}}ve.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ve({items:t,typeName:A.ZodTuple,rest:null,...L(e)})};class Ft extends Z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==j.object)return b(a,{code:x.invalid_type,expected:j.object,received:a.parsedType}),M;const n=[],r=this._def.keyType,o=this._def.valueType;for(const l in a.data)n.push({key:r._parse(new ge(a,l,a.path,l)),value:o._parse(new ge(a,a.data[l],a.path,l)),alwaysSet:l in a.data});return a.common.async?$.mergeObjectAsync(s,n):$.mergeObjectSync(s,n)}get element(){return this._def.valueType}static create(e,s,a){return s instanceof Z?new Ft({keyType:e,valueType:s,typeName:A.ZodRecord,...L(a)}):new Ft({keyType:he.create(),valueType:e,typeName:A.ZodRecord,...L(s)})}}class us extends Z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==j.map)return b(a,{code:x.invalid_type,expected:j.map,received:a.parsedType}),M;const n=this._def.keyType,r=this._def.valueType,o=[...a.data.entries()].map(([l,c],u)=>({key:n._parse(new ge(a,l,a.path,[u,"key"])),value:r._parse(new ge(a,c,a.path,[u,"value"]))}));if(a.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,m=await c.value;if(u.status==="aborted"||m.status==="aborted")return M;(u.status==="dirty"||m.status==="dirty")&&s.dirty(),l.set(u.value,m.value)}return{status:s.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,m=c.value;if(u.status==="aborted"||m.status==="aborted")return M;(u.status==="dirty"||m.status==="dirty")&&s.dirty(),l.set(u.value,m.value)}return{status:s.value,value:l}}}}us.create=(t,e,s)=>new us({valueType:e,keyType:t,typeName:A.ZodMap,...L(s)});class Ve extends Z{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==j.set)return b(a,{code:x.invalid_type,expected:j.set,received:a.parsedType}),M;const n=this._def;n.minSize!==null&&a.data.size<n.minSize.value&&(b(a,{code:x.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),s.dirty()),n.maxSize!==null&&a.data.size>n.maxSize.value&&(b(a,{code:x.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),s.dirty());const r=this._def.valueType;function o(c){const u=new Set;for(const m of c){if(m.status==="aborted")return M;m.status==="dirty"&&s.dirty(),u.add(m.value)}return{status:s.value,value:u}}const l=[...a.data.values()].map((c,u)=>r._parse(new ge(a,c,a.path,u)));return a.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,s){return new Ve({...this._def,minSize:{value:e,message:S.toString(s)}})}max(e,s){return new Ve({...this._def,maxSize:{value:e,message:S.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}Ve.create=(t,e)=>new Ve({valueType:t,minSize:null,maxSize:null,typeName:A.ZodSet,...L(e)});class Xe extends Z{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==j.function)return b(s,{code:x.invalid_type,expected:j.function,received:s.parsedType}),M;function a(l,c){return rs({data:l,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,is(),He].filter(u=>!!u),issueData:{code:x.invalid_arguments,argumentsError:c}})}function n(l,c){return rs({data:l,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,is(),He].filter(u=>!!u),issueData:{code:x.invalid_return_type,returnTypeError:c}})}const r={errorMap:s.common.contextualErrorMap},o=s.data;if(this._def.returns instanceof Ye){const l=this;return se(async function(...c){const u=new ce([]),m=await l._def.args.parseAsync(c,r).catch(f=>{throw u.addIssue(a(c,f)),u}),p=await Reflect.apply(o,this,m);return await l._def.returns._def.type.parseAsync(p,r).catch(f=>{throw u.addIssue(n(p,f)),u})})}else{const l=this;return se(function(...c){const u=l._def.args.safeParse(c,r);if(!u.success)throw new ce([a(c,u.error)]);const m=Reflect.apply(o,this,u.data),p=l._def.returns.safeParse(m,r);if(!p.success)throw new ce([n(m,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Xe({...this._def,args:ve.create(e).rest(Be.create())})}returns(e){return new Xe({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,s,a){return new Xe({args:e||ve.create([]).rest(Be.create()),returns:s||Be.create(),typeName:A.ZodFunction,...L(a)})}}class St extends Z{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}St.create=(t,e)=>new St({getter:t,typeName:A.ZodLazy,...L(e)});class It extends Z{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return b(s,{received:s.data,code:x.invalid_literal,expected:this._def.value}),M}return{status:"valid",value:e.data}}get value(){return this._def.value}}It.create=(t,e)=>new It({value:t,typeName:A.ZodLiteral,...L(e)});function Bi(t,e){return new Me({values:t,typeName:A.ZodEnum,...L(e)})}class Me extends Z{constructor(){super(...arguments),_t.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),a=this._def.values;return b(s,{expected:U.joinValues(a),received:s.parsedType,code:x.invalid_type}),M}if(ls(this,_t,"f")||Di(this,_t,new Set(this._def.values),"f"),!ls(this,_t,"f").has(e.data)){const s=this._getOrReturnCtx(e),a=this._def.values;return b(s,{received:s.data,code:x.invalid_enum_value,options:a}),M}return se(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return Me.create(e,{...this._def,...s})}exclude(e,s=this._def){return Me.create(this.options.filter(a=>!e.includes(a)),{...this._def,...s})}}_t=new WeakMap,Me.create=Bi;class Rt extends Z{constructor(){super(...arguments),jt.set(this,void 0)}_parse(e){const s=U.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==j.string&&a.parsedType!==j.number){const n=U.objectValues(s);return b(a,{expected:U.joinValues(n),received:a.parsedType,code:x.invalid_type}),M}if(ls(this,jt,"f")||Di(this,jt,new Set(U.getValidEnumValues(this._def.values)),"f"),!ls(this,jt,"f").has(e.data)){const n=U.objectValues(s);return b(a,{received:a.data,code:x.invalid_enum_value,options:n}),M}return se(e.data)}get enum(){return this._def.values}}jt=new WeakMap,Rt.create=(t,e)=>new Rt({values:t,typeName:A.ZodNativeEnum,...L(e)});class Ye extends Z{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==j.promise&&s.common.async===!1)return b(s,{code:x.invalid_type,expected:j.promise,received:s.parsedType}),M;const a=s.parsedType===j.promise?s.data:Promise.resolve(s.data);return se(a.then(n=>this._def.type.parseAsync(n,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Ye.create=(t,e)=>new Ye({type:t,typeName:A.ZodPromise,...L(e)});class me extends Z{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===A.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:a}=this._processInputParams(e),n=this._def.effect||null,r={addIssue:o=>{b(a,o),o.fatal?s.abort():s.dirty()},get path(){return a.path}};if(r.addIssue=r.addIssue.bind(r),n.type==="preprocess"){const o=n.transform(a.data,r);if(a.common.async)return Promise.resolve(o).then(async l=>{if(s.value==="aborted")return M;const c=await this._def.schema._parseAsync({data:l,path:a.path,parent:a});return c.status==="aborted"?M:c.status==="dirty"||s.value==="dirty"?os(c.value):c});{if(s.value==="aborted")return M;const l=this._def.schema._parseSync({data:o,path:a.path,parent:a});return l.status==="aborted"?M:l.status==="dirty"||s.value==="dirty"?os(l.value):l}}if(n.type==="refinement"){const o=l=>{const c=n.refinement(l,r);if(a.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(a.common.async===!1){const l=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return l.status==="aborted"?M:(l.status==="dirty"&&s.dirty(),o(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(l=>l.status==="aborted"?M:(l.status==="dirty"&&s.dirty(),o(l.value).then(()=>({status:s.value,value:l.value}))))}if(n.type==="transform")if(a.common.async===!1){const o=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!bt(o))return o;const l=n.transform(o.value,r);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(o=>bt(o)?Promise.resolve(n.transform(o.value,r)).then(l=>({status:s.value,value:l})):o);U.assertNever(n)}}me.create=(t,e,s)=>new me({schema:t,typeName:A.ZodEffects,effect:e,...L(s)}),me.createWithPreprocess=(t,e,s)=>new me({schema:e,effect:{type:"preprocess",transform:t},typeName:A.ZodEffects,...L(s)});class xe extends Z{_parse(e){return this._getType(e)===j.undefined?se(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}xe.create=(t,e)=>new xe({innerType:t,typeName:A.ZodOptional,...L(e)});class Ie extends Z{_parse(e){return this._getType(e)===j.null?se(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ie.create=(t,e)=>new Ie({innerType:t,typeName:A.ZodNullable,...L(e)});class Pt extends Z{_parse(e){const{ctx:s}=this._processInputParams(e);let a=s.data;return s.parsedType===j.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Pt.create=(t,e)=>new Pt({innerType:t,typeName:A.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...L(e)});class At extends Z{_parse(e){const{ctx:s}=this._processInputParams(e),a={...s,common:{...s.common,issues:[]}},n=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return wt(n)?n.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ce(a.common.issues)},input:a.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ce(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}At.create=(t,e)=>new At({innerType:t,typeName:A.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...L(e)});class ms extends Z{_parse(e){if(this._getType(e)!==j.nan){const s=this._getOrReturnCtx(e);return b(s,{code:x.invalid_type,expected:j.nan,received:s.parsedType}),M}return{status:"valid",value:e.data}}}ms.create=t=>new ms({typeName:A.ZodNaN,...L(t)});const mu=Symbol("zod_brand");class Ys extends Z{_parse(e){const{ctx:s}=this._processInputParams(e),a=s.data;return this._def.type._parse({data:a,path:s.path,parent:s})}unwrap(){return this._def.type}}class Dt extends Z{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const n=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return n.status==="aborted"?M:n.status==="dirty"?(s.dirty(),os(n.value)):this._def.out._parseAsync({data:n.value,path:a.path,parent:a})})();{const n=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return n.status==="aborted"?M:n.status==="dirty"?(s.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:a.path,parent:a})}}static create(e,s){return new Dt({in:e,out:s,typeName:A.ZodPipeline})}}class Mt extends Z{_parse(e){const s=this._def.innerType._parse(e),a=n=>(bt(n)&&(n.value=Object.freeze(n.value)),n);return wt(s)?s.then(n=>a(n)):a(s)}unwrap(){return this._def.innerType}}Mt.create=(t,e)=>new Mt({innerType:t,typeName:A.ZodReadonly,...L(e)});function Ui(t,e={},s){return t?Qe.create().superRefine((a,n)=>{var r,o;if(!t(a)){const l=typeof e=="function"?e(a):typeof e=="string"?{message:e}:e,c=(o=(r=l.fatal)!==null&&r!==void 0?r:s)!==null&&o!==void 0?o:!0,u=typeof l=="string"?{message:l}:l;n.addIssue({code:"custom",...u,fatal:c})}}):Qe.create()}const pu={object:W.lazycreate};var A;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(A||(A={}));const hu=(t,e={message:`Input not instance of ${t.name}`})=>Ui(s=>s instanceof t,e),Vi=he.create,qi=Pe.create,fu=ms.create,gu=Ae.create,Gi=kt.create,xu=Ue.create,vu=cs.create,yu=Ct.create,bu=Nt.create,wu=Qe.create,_u=Be.create,ju=be.create,ku=ds.create,Cu=pe.create,Nu=W.create,Tu=W.strictCreate,Eu=Tt.create,Su=vs.create,Iu=Et.create,Ru=ve.create,Pu=Ft.create,Au=us.create,Mu=Ve.create,Ou=Xe.create,Du=St.create,Fu=It.create,zu=Me.create,Lu=Rt.create,Zu=Ye.create,Ki=me.create,Bu=xe.create,Uu=Ie.create,Vu=me.createWithPreprocess,qu=Dt.create,Gu=()=>Vi().optional(),Ku=()=>qi().optional(),Hu=()=>Gi().optional(),Qu={string:t=>he.create({...t,coerce:!0}),number:t=>Pe.create({...t,coerce:!0}),boolean:t=>kt.create({...t,coerce:!0}),bigint:t=>Ae.create({...t,coerce:!0}),date:t=>Ue.create({...t,coerce:!0})},Wu=M;var Hi=Object.freeze({__proto__:null,defaultErrorMap:He,setErrorMap:Wd,getErrorMap:is,makeIssue:rs,EMPTY_PATH:Yd,addIssueToContext:b,ParseStatus:$,INVALID:M,DIRTY:os,OK:se,isAborted:Ks,isDirty:Hs,isValid:bt,isAsync:wt,get util(){return U},get objectUtil(){return Gs},ZodParsedType:j,getParsedType:Ee,ZodType:Z,datetimeRegex:Zi,ZodString:he,ZodNumber:Pe,ZodBigInt:Ae,ZodBoolean:kt,ZodDate:Ue,ZodSymbol:cs,ZodUndefined:Ct,ZodNull:Nt,ZodAny:Qe,ZodUnknown:Be,ZodNever:be,ZodVoid:ds,ZodArray:pe,ZodObject:W,ZodUnion:Tt,ZodDiscriminatedUnion:vs,ZodIntersection:Et,ZodTuple:ve,ZodRecord:Ft,ZodMap:us,ZodSet:Ve,ZodFunction:Xe,ZodLazy:St,ZodLiteral:It,ZodEnum:Me,ZodNativeEnum:Rt,ZodPromise:Ye,ZodEffects:me,ZodTransformer:me,ZodOptional:xe,ZodNullable:Ie,ZodDefault:Pt,ZodCatch:At,ZodNaN:ms,BRAND:mu,ZodBranded:Ys,ZodPipeline:Dt,ZodReadonly:Mt,custom:Ui,Schema:Z,ZodSchema:Z,late:pu,get ZodFirstPartyTypeKind(){return A},coerce:Qu,any:wu,array:Cu,bigint:gu,boolean:Gi,date:xu,discriminatedUnion:Su,effect:Ki,enum:zu,function:Ou,instanceof:hu,intersection:Iu,lazy:Du,literal:Fu,map:Au,nan:fu,nativeEnum:Lu,never:ju,null:bu,nullable:Uu,number:qi,object:Nu,oboolean:Hu,onumber:Ku,optional:Bu,ostring:Gu,pipeline:qu,preprocess:Vu,promise:Zu,record:Pu,set:Mu,strictObject:Tu,string:Vi,symbol:vu,transformer:Ki,tuple:Ru,undefined:yu,union:Eu,unknown:_u,void:ku,NEVER:Wu,ZodIssueCode:x,quotelessJson:Qd,ZodError:ce});const Qi=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).trim()),Wi=({email:t,invitations:e})=>Object.values(e).filter(s=>s.email===t).length>1,ps=({email:t,invitations:e})=>{const s=[];return!t||(t==null?void 0:t.trim())==="undefined"||!Qi(t)?s.push("Not a valid email."):Wi({email:t,invitations:e})&&s.push("Email is already in the invite list"),s},hs=t=>({id:(t==null?void 0:t.id)??Vt.uniqueId(),email:(t==null?void 0:t.email)??"",permissionLevel:(t==null?void 0:t.permissionLevel)??"write",errors:(t==null?void 0:t.errors)??[],status:(t==null?void 0:t.status)??"pending"}),Yi=t=>{const e={...t},s=Object.keys(e).length;return s>=3?e:Array.from({length:3-s}).reduce(a=>{const n=Vt.uniqueId();return a[n]=hs({id:n}),a},e)},Ji=t=>{let e={};return Object.entries(t).forEach(([s,a])=>{a.email.length&&(e={...e,[s]:{...a}})}),e},Xi=d.createContext(void 0),Yu=({children:t,...e})=>{var h;const s=e.isSystemAdmin,a=s?"admin":((h=e.teamToInviteTo)==null?void 0:h.permission_level)||"write",[n,r]=ee.useState({}),[o,l]=ee.useState({}),[c,u]=ee.useState(ke.DISCRETE),[m,p]=ee.useState("write"),f=d.useMemo(()=>Object.entries(n).reduce((g,[N,_])=>((_.status&&_.status==="error"||_.errors&&_.errors.length>0)&&(g[N]=_),g),{}),[n]);return d.useEffect(()=>{if(Object.keys(n).length<3){const g=Yi(n);r(g)}},[Object.keys(n).length]),i.jsx(Xi.Provider,{value:{...e,userPermissionLevel:a,invitations:n,setInvitations:r,invitationsWithErrors:f,bulkPermissionLevel:m,setBulkPermissionLevel:p,invitationInputs:c,setInvitationInputs:u,sentInvitations:o,setSentInvitations:l,isSystemAdmin:s,licencesChangeTypeFlag:e.licencesChangeTypeFlag},children:t})},ae=()=>{const t=d.useContext(Xi);if(t===void 0)throw new Error("useInviteDialogContext must be used within an InviteDialogProvider");return t},Ju=({selectedTeam:t,teams:e,onSelect:s})=>!e||!t?null:i.jsxs(gt,{children:[i.jsx(xt,{asChild:!0,children:i.jsx(G,{icon:js,iconPosition:"right",variant:"secondary",className:"flex w-fit items-center","aria-label":"Select a team","data-testid":"team-selector-dropdown-trigger",children:i.jsxs("div",{className:"inline-flex items-center gap-[6px]",children:[i.jsx(ot,{color:t.color||"blue",size:"xxs",shape:"square",children:t.name}),t.name.length>20?`${t.name.slice(0,20)}...`:t.name]})})}),i.jsx(vt,{className:"z-[1000000]",align:"start",children:e.map(a=>i.jsx(yt,{onSelect:()=>{s(a)},avatarProps:{size:"xxs",shape:"square",color:a.color||"blue",children:a.name},showAvatar:!0,title:a.name,children:a.name},a.id))})]}),Xu=({suggestions:t,onAddSuggestion:e})=>{const{isLoadingGoogleContacts:s}=ae();return i.jsxs("div",{className:"mt-6 flex max-h-40 w-full flex-col gap-4",children:[i.jsx("div",{className:"justify-center font-sans text-sm font-medium leading-tight text-slate-500 dark:text-slate-400",children:"Suggested Teammates"}),i.jsxs("div",{className:C("mt-1.5 flex w-full flex-col overflow-y-scroll",{"gap-0.5":!s,"gap-2":s}),children:[s&&[1,2,3].map(a=>i.jsx(Fe,{className:"h-5 w-full rounded-sm py-2 pr-4"},a)),!s&&(t==null?void 0:t.map(a=>i.jsx(Ke,{children:i.jsxs(ie,{children:[i.jsx(re,{children:i.jsx("button",{className:"flex w-full cursor-pointer flex-row items-center justify-start rounded-sm bg-transparent py-2 pr-4 hover:bg-slate-100",onClick:()=>e(a==null?void 0:a.email),children:i.jsxs("div",{className:"flex w-full flex-row items-start justify-between",children:[i.jsxs("div",{className:"flex items-start justify-start gap-2",children:[i.jsx(ot,{size:"xs",children:a!=null&&a.profile_picture_url?i.jsx("img",{src:a==null?void 0:a.profile_picture_url,width:20,height:20,alt:a==null?void 0:a.email}):a==null?void 0:a.email}),i.jsx("div",{className:"max-w-40 justify-start overflow-x-clip truncate text-sm font-medium leading-tight text-slate-600",children:a==null?void 0:a.email})]}),i.jsx("div",{className:"max-w-28 justify-start overflow-x-clip truncate text-sm font-semibold leading-tight text-slate-400",children:`${(a==null?void 0:a.first_name)||""} ${(a==null?void 0:a.last_name)||""}`})]})})}),i.jsx(le,{side:"top",children:a==null?void 0:a.email})]})})))]})]})},$u={requireTld:!0,allowUnderscores:!1,allowTrailingDot:!1},em={allowDisplayName:!1,requireDisplayName:!1,allowUtf8LocalPart:!0,requireTld:!0},tm=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\,\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,sm=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,am=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,nm=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,im=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;function $i(t,e){let s=0,a;const n=encodeURI(t).split(/%..|./).length-1;return e&&(s=Number(e.min)||0,a=Number(e.max)),n>=s&&(typeof a>"u"||n<=a)}function rm(t,e){e=Object.assign({},$u,e),e.allowTrailingDot&&t[t.length-1]==="."&&(t=t.substring(0,t.length-1));const s=t.split(".");if(e.requireTld){const a=""+s.pop();if(!s.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(a)||/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(a))return!1}for(let a,n=0;n<s.length;n++)if(a=s[n],e.allowUnderscores&&(a=a.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(a)||/[\uff01-\uff5e]/.test(a)||a[0]==="-"||a[a.length-1]==="-")return!1;return!0}function om(t,e){if(e=Object.assign({},em,e),e.requireDisplayName||e.allowDisplayName){const c=t.match(tm);if(c)t=c[1];else if(e.requireDisplayName)return!1}const s=t.split("@"),a=""+s.pop(),n=a.toLowerCase();let r=s.join("@");if((n==="gmail.com"||n==="googlemail.com")&&(r=r.replace(/\./g,"").toLowerCase()),!$i(r,{max:64})||!$i(a,{max:254})||!rm(a,{requireTld:e.requireTld}))return!1;if(r[0]==='"')return r=r.slice(1,r.length-1),e.allowUtf8LocalPart?im.test(r):am.test(r);const o=e.allowUtf8LocalPart?nm:sm,l=r.split(".");for(let c=0;c<l.length;c++)if(!o.test(l[c]))return!1;return!0}class lm extends d.Component{constructor(e){super(e),this.state={focused:!1,emails:[],inputValue:""},this.findEmailAddress=(s,a)=>{const{validateEmail:n}=this.props;let r=[],o="";const l=/[ ,;]/g,c=n||om,u=m=>{const p=this.state.emails;for(let f=0,h=p.length;f<h;f++)if(p[f]===m)return!1;return r.push(m),!0};if(s!=="")if(l.test(s)){let m=s.split(l).filter(p=>p!==""&&p!==void 0&&p!==null);do c(""+m[0])?u(""+m.shift()):m.length===1?o=""+m.shift():m.shift();while(m.length)}else a&&c(s)?u(s):o=s;this.setState({emails:[...this.state.emails,...r],inputValue:o}),r.length&&this.props.onChange&&this.props.onChange([...this.state.emails,...r])},this.onChangeInputValue=s=>{this.findEmailAddress(s)},this.removeEmail=s=>{this.setState(a=>({emails:[...a.emails.slice(0,s),...a.emails.slice(s+1)]}),()=>{this.props.onChange&&this.props.onChange(this.state.emails)})},this.handleOnKeydown=s=>{switch(s.which){case 13:case 9:s.preventDefault();break;case 8:s.currentTarget.value||this.removeEmail(this.state.emails.length-1);break}},this.handleOnKeyup=s=>{switch(s.which){case 13:case 9:this.findEmailAddress(s.currentTarget.value,!0);break}},this.handleOnChange=s=>this.onChangeInputValue(s.currentTarget.value),this.handleOnBlur=s=>{this.setState({focused:!1}),this.findEmailAddress(s.currentTarget.value,!0)},this.handleOnFocus=()=>this.setState({focused:!0}),this.emailInputRef=d.createRef()}static getDerivedStateFromProps(e,s){return s.propsEmails!==e.emails?{propsEmails:e.emails||[],emails:e.emails||[],inputValue:"",focused:!1}:null}render(){const{focused:e,emails:s,inputValue:a}=this.state,{style:n,getLabel:r,className:o="",noClass:l,placeholder:c}=this.props;return d.createElement("div",{className:`${o} ${l?"":"react-multi-email"} ${e?"focused":""} ${a===""&&s.length===0?"empty":""}`,style:n,onClick:()=>{this.emailInputRef.current&&this.emailInputRef.current.focus()}},c?d.createElement("span",{"data-placeholder":!0},c):null,s.map((u,m)=>r(u,m,this.removeEmail)),d.createElement("input",{ref:this.emailInputRef,type:"text",value:a,onFocus:this.handleOnFocus,onBlur:this.handleOnBlur,onChange:this.handleOnChange,onKeyDown:this.handleOnKeydown,onKeyUp:this.handleOnKeyup}))}}const cm=["admin","write","read"],Je={admin:{label:"Team Admin",description:"Manages team, users and docs",unsupported:[]},write:{label:"Creator",description:"Creates, edits and deletes docs",unsupported:["admin"]},read:{label:"Viewer",description:"View-only permissions",unsupported:["admin","write"]}},er=({onPermissionChange:t,permission:e,viewerLicensesEnabled:s,onEnterpriseOptionClick:a,theme:n="light"})=>{const{userPermissionLevel:r}=ae(),o=l=>!s&&l==="read"?a==null?void 0:a():t(l);return i.jsxs(gt,{children:[i.jsx(xt,{asChild:!0,children:i.jsx(G,{variant:"secondary",size:"small",className:"w-full",theme:n,icon:Zr,iconPosition:"right",children:Je[e].label})}),i.jsx(vt,{className:"z-[100000] w-auto min-w-[27px]","data-testid":"invite-referral-modal-permission-menu-content",children:i.jsx(Id,{value:e,onValueChange:o,children:cm.map(l=>{var c,u,m;return(m=(u=(c=Je==null?void 0:Je[r])==null?void 0:c.unsupported)==null?void 0:u.includes)!=null&&m.call(u,l)?null:i.jsx(Md,{value:l,subtext:Je[l].description,children:i.jsxs("span",{className:"flex w-full flex-auto flex-nowrap",children:[Je[l].label,!s&&l==="read"&&i.jsx(ga,{type:"enterprise",theme:"dark",className:"ml-1.5"})]})},l)})})})]})},dm=({containerClassName:t,label:e,onEmailsUpdate:s,emails:a,showPermissionDropdown:n=!1,errorEmails:r,viewerLicensesEnabled:o,className:l,onEnterpriseOptionClick:c,permissionLevelClassName:u,focusInputAfterAddingSuggestion:m,setFocusInputAfterAddingSuggestion:p,handleEmailInputChange:f,...h})=>{const{userPermissionLevel:g,bulkPermissionLevel:N,setBulkPermissionLevel:_,trackEvent:w}=ae(),[O,T]=d.useState(!1),y=d.useRef(null);d.useEffect(()=>{var v,E,k,I;y&&((I=(k=(E=(v=y==null?void 0:y.current)==null?void 0:v.emailInputRef)==null?void 0:E.current)==null?void 0:k.focus)==null||I.call(k))},[y]),d.useEffect(()=>{var v,E,k,I;m&&p&&y&&((I=(k=(E=(v=y==null?void 0:y.current)==null?void 0:v.emailInputRef)==null?void 0:E.current)==null?void 0:k.focus)==null||I.call(k),p(!1))},[m,p,y]);const P=v=>{const E=v.target;E.value!==" "&&f&&f(E.value)};d.useEffect(()=>{var v,E;if(f){const k=(E=(v=y==null?void 0:y.current)==null?void 0:v.emailInputRef)==null?void 0:E.current;return k?(k.addEventListener("input",P),()=>{k.removeEventListener("input",P)}):void 0}},[f]);const R=(v,E,k)=>{const I=r==null?void 0:r.includes(v),D=`${v}-${E}`;return i.jsx(Oo,{label:v,avatar:{children:v,uuid:D},onRemove:()=>k(E),className:I?"bg-red-100 ring-red-500":""},D)};return i.jsxs("div",{className:C("relative flex w-full",t),children:[i.jsxs("div",{className:"relative flex w-full flex-row",onFocus:()=>T(!0),onBlur:()=>T(!1),"data-testid":"multi-email-input",children:[i.jsx("div",{className:"flex w-full flex-row",children:i.jsx(lm,{ref:y,className:C("overflow-x-hidden multi-email-input flex max-h-[240px] w-auto gap-2 overflow-y-auto rounded-lg px-3 py-2 focus-within:!border-brand-500 focus:border-brand-500",l),emails:a,validateEmail:v=>!(!v||v.includes(" ")||v.trim()==="undefined"),onChange:v=>s==null?void 0:s(v),getLabel:R,placeholder:h.placeholder})}),n&&g&&i.jsx("div",{className:C("absolute right-2 flex h-full cursor-pointer flex-row items-center justify-between",u),children:i.jsx(er,{viewerLicensesEnabled:o,permission:N,onPermissionChange:v=>{w("changed_invite_permission",{permission:v}),_(v)},onEnterpriseOptionClick:c})})]}),e&&i.jsx("label",{className:C("absolute -top-2 left-3 bg-white px-1.5 text-xs font-medium text-slate-400 transition-colors",{"!text-brand-500":O}),htmlFor:h.name,children:e})]})},um=({shouldHideRoleSelector:t=!1})=>{var P,R;const{trackEvent:e,account:s,isSystemAdmin:a,canChangeOrDeleteDocumentsOrFolders:n,isLoadingGoogleContacts:r,invitations:o,setInvitations:l,invitationsWithErrors:c,suggestions:u,enableRetrieveGoogleContacts:m,onEnterpriseOptionClick:p}=ae(),[f,h]=d.useState(!1),g=(R=(P=s==null?void 0:s.active_organization)==null?void 0:P.super_organization)==null?void 0:R.allow_viewer_licenses,N=(a||n)&&!t,[_,w]=d.useState(""),O=d.useMemo(()=>Object.values(o).map(({email:v})=>v).filter(v=>!!v),[o]),T=v=>{const E=Object.values(o).reduce((I,D)=>(D.email&&(I[D.email]=D),I),{}),k=v.map(I=>E[I]?E[I]:hs({email:I,errors:ps({email:I,invitations:o}),status:ps({email:I,invitations:o}).length?"error":"pending"}));l(k.reduce((I,D)=>(I[D.id]=D,I),{}))},y=d.useMemo(()=>Vt.debounce(v=>w(v),100),[w]);return i.jsxs("div",{className:"size-full",children:[i.jsx(dm,{emails:O,placeholder:"Emails, comma separated",onEmailsUpdate:T,className:N?"!pr-24":"",showPermissionDropdown:N,containerClassName:"mb-2 mt-0 min-h-28",errorEmails:Object.values(c||{}).map(({email:v})=>v),viewerLicensesEnabled:g,permissionLevelClassName:"bottom-2 items-end",focusInputAfterAddingSuggestion:f,setFocusInputAfterAddingSuggestion:h,handleEmailInputChange:v=>y(v),onEnterpriseOptionClick:p}),m&&u&&(r||(u==null?void 0:u.length)>0)&&i.jsx(Xu,{suggestions:u==null?void 0:u.filter(v=>!O.includes(v==null?void 0:v.email)&&(!!_&&(v==null?void 0:v.email.includes(_))||!_)),onAddSuggestion:v=>{e("adding_google_contact_suggestion",{googleContactEmail:v}),l({...o,[v]:hs({email:v,errors:ps({email:v,invitations:o})})}),h(!0)}})]})},mm=({shouldHideRoleSelector:t=!1})=>{var w,O;const{account:e,canChangeOrDeleteDocumentsOrFolders:s,isSystemAdmin:a,invitations:n,invitationsWithErrors:r,setInvitations:o,userPermissionLevel:l,onEnterpriseOptionClick:c,setSentInvitations:u}=ae(),m=(a||s)&&!t,p=(O=(w=e==null?void 0:e.active_organization)==null?void 0:w.super_organization)==null?void 0:O.allow_viewer_licenses,f=d.useRef({}),h=d.useRef(null);d.useEffect(()=>{var R,v;const T=Object.entries(n).filter(([,E])=>E.email!=="").reduce((E,[k,I])=>(E[k]=I,E),{}),y=Object.keys(T).length<3?Yi(T):T;o(y);const P=(R=Object.entries(n).find(([E,k])=>!k.email))==null?void 0:R[0];P&&f.current[P]&&((v=f.current[P])==null||v.focus())},[]);const g=T=>y=>{u({});const P=y.target.value;o({...n,[T]:{...n[T],errors:[],email:P,status:"pending"}})},N=T=>y=>{var I,D;const P=y.target.value;if(!P)return;const R=parseInt(T,10),v=(I=Object.entries(n).find(([B,z])=>parseInt(B,10)>R&&!z.email))==null?void 0:I[0],E=Object.entries(n).map(([B])=>Number(B)).reduce((B,z)=>Math.max(B,z),-1/0)+1,k=v?{}:{[E]:hs({id:E.toString()})};o({...n,[T]:{...n[T],status:ps({email:P,invitations:n}).length?"error":"pending"},...k}),Qi(P)&&!Wi({email:P,invitations:n})&&Object.keys(r||{}).length===0&&(v??E)&&f.current[v??E]&&((D=f.current[v??E])==null||D.focus())},_=T=>y=>{o({...n,[T]:{...n[T],permissionLevel:y}})};return i.jsx("div",{className:"max-h-80 overflow-y-auto p-1",children:Object.keys(n).map(T=>{var y,P,R,v;return i.jsxs("div",{className:"relative mb-4 flex flex-row items-center","data-testid":"discrete-invite",children:[i.jsx(Yo,{type:"email","data-testid":"discrete-input",id:"email",ref:E=>{f.current[T]=E},style:{paddingRight:`${(((y=h==null?void 0:h.current)==null?void 0:y.clientWidth)??0)+8}px`},className:C("m-0 h-12 w-full truncate rounded-lg",l==="write"&&"pr-4"),fullWidth:!0,value:(P=n[T])==null?void 0:P.email,placeholder:"Enter email",onChange:g(T),error:((R=r==null?void 0:r[T])==null?void 0:R.status)==="error",onBlur:N(T)}),m&&i.jsx("div",{ref:h,className:"absolute right-0 flex h-full cursor-pointer flex-row items-center justify-between py-0.5 pr-2","data-testid":"permission-menu",children:i.jsx(er,{viewerLicensesEnabled:p,permission:((v=n[T])==null?void 0:v.permissionLevel)??"write",onPermissionChange:_(T),onEnterpriseOptionClick:c})})]},T)})})},pm=({isModal:t=!1,showSecondaryAction:e,onSecondaryAction:s,secondaryActionText:a,showSlackImport:n=!0,licencesChangeTypeFlag:r=!1})=>{var N,_;const{teamToInviteTo:o,invitationsWithErrors:l,account:c,invitationInputs:u,setInvitationInputs:m,sentInvitations:p}=ae(),f=ca((N=c==null?void 0:c.active_organization)==null?void 0:N.super_organization),h=ca(o==null?void 0:o.super_organization),g=!f&&!h;return d.useEffect(()=>{f&&m(ke.BULK)},[f]),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:t?"h-auto px-5 py-2":"",children:[Object.values(l||{}).length>0&&i.jsx("div",{className:"mb-4",children:i.jsx(De,{role:"alert",variant:"error",title:"There's an error with the following email(s):",descriptionList:Object.values(l||{}).map(({email:w,errors:O})=>`${w}: ${O==null?void 0:O.join(", ")}`)})}),Object.values(p).length>0&&i.jsx("div",{className:"mb-4",children:i.jsx(De,{variant:"success",title:(_=o==null?void 0:o.super_organization)!=null&&_.have_available_standard_licenses?Object.values(p).length===1?"The invite was successfully sent":"The invites were successfully sent":Object.values(p).length===1?"The invite was successfully requested":"The invites were successfully requested"})}),u===ke.DISCRETE?i.jsx(mm,{shouldHideRoleSelector:g}):i.jsx(um,{shouldHideRoleSelector:g}),u==="BULK"&&i.jsx(G,{variant:"ghost",onClick:()=>m(ke.DISCRETE),className:"mb-1 mt-4",children:"+ Add members individually"}),u===ke.DISCRETE&&i.jsxs(ie,{children:[i.jsx(re,{asChild:!0,children:i.jsx(G,{variant:"ghost",className:"mb-1",onClick:()=>m(ke.BULK),children:"+ Bulk Invite"})}),i.jsx(le,{className:"max-w-60",variant:"compact",children:i.jsx("span",{children:"Invite members one at a time. Assigns the same role to all invited users."})})]})]}),i.jsx(xm,{bgColor:t?"bg-slate-100":"",showSecondaryAction:e,onSecondaryAction:s,secondaryActionText:a,showSlackImport:n,licencesChangeTypeFlag:r})]})},hm=({buttonSize:t,licencesChangeTypeFlag:e=!1})=>{const{teamToInviteTo:s,invitations:a,invitationsWithErrors:n,setInvitations:r,setSentInvitations:o,invitationInputs:l,bulkPermissionLevel:c,inviteUsers:u,requestLicencesForUsers:m,isInviteUsersLoading:p,isSystemAdmin:f}=ae(),h=d.useMemo(()=>{var _;return c==="read"?"Send Invites":e&&!((_=s==null?void 0:s.super_organization)!=null&&_.have_available_standard_licenses)?f?"Add Licenses":"Invite & Request licenses":"Send Invites"},[c,e,s,f]),g=Object.keys(n||{}).length>0||!Object.keys(a).length,N=_=>{var w;_.preventDefault(),e&&!((w=s==null?void 0:s.super_organization)!=null&&w.have_available_standard_licenses)&&c!=="read"?m({invitations:Ji(a),setInvitations:r,setSentInvitations:o,teamToInviteTo:s,invitationInputs:l,bulkPermissionLevel:c}):u({invitations:Ji(a),setInvitations:r,setSentInvitations:o,teamToInviteTo:s,invitationInputs:l,bulkPermissionLevel:c})};return i.jsx(G,{id:"invite-teammates-button",size:t,variant:"primary",className:"relative ml-3",onClick:N,disabled:g,loading:p,children:h})},fm="https://colony-labs-public.s3.us-east-2.amazonaws.com/images/icons/app.slack.com.png",gm=()=>{const{onClickSlackButton:t}=ae();return t?i.jsx(G,{onClick:t,variant:"secondary",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:fm,alt:"Slack",className:"mr-2 h-4 rounded-full"}),i.jsx("span",{children:"Import from Slack"})]})}):null},xm=({showSlackImport:t,bgColor:e="white",showSecondaryAction:s,onSecondaryAction:a,secondaryActionText:n,licencesChangeTypeFlag:r=!1})=>i.jsxs("div",{className:`mt-6 flex h-16 w-full items-center justify-end px-6 py-4 ${e}`,children:[t&&i.jsx(gm,{}),s&&i.jsx(G,{variant:"secondary",onClick:a,children:n||"Maybe later"}),i.jsx(hm,{buttonSize:"default",licencesChangeTypeFlag:r})]}),vm=({pendingInvite:t,teamId:e})=>i.jsxs("div",{className:"w-full h-12 items-center inline-grid grid-cols-[1fr_90px] grid-flow-col",children:[i.jsx("div",{className:"flex h-full w-full border-b border-slate-100 overflow-hidden",children:i.jsx("div",{className:"flex overflow-hidden",title:t.invited_user_email,children:i.jsx("p",{className:"line-clamp-1 block max-w-72 text-left text-sm truncate",children:t.invited_user_email})})}),i.jsxs("div",{className:"flex h-full flex-row items-center justify-end gap-1 border-b border-slate-100",children:[i.jsx(wm,{teamId:e,pendingInvite:t}),i.jsx(bm,{teamId:e,pendingInvite:t})]})]},t.invited_user_email),ym=()=>{const{pendingInvites:t,teamToInviteTo:e}=ae();return t.map(s=>i.jsx(vm,{teamId:e==null?void 0:e.id,pendingInvite:s},s.invite_code))},bm=({pendingInvite:t,teamId:e})=>{const{deleteInvite:s}=ae();return i.jsxs(ie,{children:[i.jsx(re,{children:i.jsx(G,{variant:"ghost",size:"small",onClick:()=>{s(t,e)},"aria-label":"Remove",icon:to,className:"bg-transparent",iconProps:{className:"size-4 text-slate-500"},"data-testid":`remove-button-${t.invited_user_email}`})}),i.jsx(le,{variant:"compact",children:"Remove"})]})},wm=({pendingInvite:t,teamId:e})=>{const{resendInvite:s,isSystemAdmin:a}=ae(),n=(t==null?void 0:t.can_resend)||a;return i.jsxs(ie,{children:[i.jsx(re,{children:i.jsx(G,{variant:"ghost",size:"small",onClick:()=>{n&&s(t,e)},"aria-label":"Resend",className:"bg-transparent",icon:so,iconProps:{className:C("size-4 text-slate-500",!n&&!a&&"cursor-default text-slate-300")},"data-testid":`resend-button-${t.invited_user_email}`})}),i.jsx(le,{variant:"compact",children:n?"Resend Invitation":"Please wait 24 hours to resend invitation again"})]})},_m=({bgColor:t="bg-[#F8FAFC]"})=>{const{teamToInviteTo:e,pendingInvites:s,isPendingInvitesLoading:a,isPendingInvitesFetched:n,isSystemAdmin:r,resendAllInvites:o}=ae(),l=s==null?void 0:s.some(({can_resend:m})=>m),c=()=>!(s!=null&&s.length)||a||!n?!0:!l&&!r,u=m=>{m.preventDefault(),e&&o(e==null?void 0:e.id)};return i.jsxs(ie,{children:[i.jsx(re,{children:i.jsx("div",{className:`mt-6 flex h-16 w-full items-center justify-end px-6 py-4 ${t}`,children:i.jsx(G,{disabled:c(),onClick:u,children:"Resend All"})})}),i.jsx(le,{variant:"compact",children:l?"Resend all invitations":"Please wait 24 hours to resend invitations again"})]})},fs=()=>i.jsxs("div",{className:"mb-2 flex h-12 w-full flex-row",children:[i.jsx("div",{className:"flex w-11/12 items-center border-b border-slate-200 pl-4",children:i.jsx(Fe,{className:"h-4 w-1/2 min-w-0 rounded bg-slate-200"})}),i.jsxs("div",{className:"justify-left flex w-auto flex-row items-center border-b border-slate-200 pr-4",children:[i.jsx(Fe,{className:"mr-3 h-4 w-4 rounded-full bg-slate-200"}),i.jsx(Fe,{className:"h-4 w-4 rounded-full bg-slate-200"})]})]}),jm=()=>i.jsxs("div",{className:"mt-2 flex max-h-[400px] flex-col pb-4","data-testid":"pending-invites-skeleton",children:[i.jsx(fs,{}),i.jsx(fs,{}),i.jsx(fs,{}),i.jsx(fs,{})]}),km=()=>i.jsx("div",{className:"flex h-24 w-full items-center justify-center",children:i.jsx("p",{className:"text-sm text-slate-500",children:"You haven't sent any invites yet."})}),Cm=()=>{const{teamToInviteTo:t,pendingInvites:e,isPendingInvitesFetched:s,isPendingInvitesLoading:a}=ae();return a&&!s?i.jsx(jm,{}):i.jsxs("div",{children:[i.jsxs("div",{className:"h-60 max-h-96 overflow-auto px-6",children:[i.jsxs("div",{className:"flex flex-row items-center border-b border-slate-200",children:[i.jsx("div",{className:"flex w-full rounded-tl-lg",children:i.jsx("p",{className:"my-2 text-left text-sm font-semibold",children:"Emails"})}),i.jsx("div",{className:"flex rounded-tr-lg",children:i.jsx("p",{className:"my-2 text-sm font-semibold",children:"Actions"})})]}),e!=null&&e.length?i.jsx(ym,{}):i.jsx(km,{})]}),(t==null?void 0:t.id)&&i.jsx(_m,{})]})},tr=t=>t===1?"unused seat":"unused seats",Nm=({variant:t="success",className:e})=>{var m,p;const{teammates:s,isLoadingTeammates:a,account:n}=ae(),r=n==null?void 0:n.active_organization,o=(p=(m=n==null?void 0:n.active_organization)==null?void 0:m.super_organization)==null?void 0:p.minimum_seats,l=o&&o>5?o:5,c=(s==null?void 0:s.length)||0,u=l-c;return u<1||u>=l||a||!pr(r==null?void 0:r.super_organization)?null:i.jsxs(ie,{children:[i.jsx(re,{children:i.jsx(Oe,{variant:t,size:"lg",icon:ao,className:e,children:i.jsxs("span",{"data-testid":"unused-seats-text",children:[u," ",tr(u)]})})}),i.jsxs(le,{side:"top",variant:"compact",className:"max-w-48",children:["Your plan includes ",u," ",tr(u),". Add your teammates to get the most out of your plan."]})]})};Hi.enum(["email","pending"]),Hi.enum(["invite","referral"]);const Tm=({open:t,onOpenChange:e,showSecondaryAction:s,onSecondaryAction:a,secondaryActionText:n,showSlackImport:r,title:o,description:l,containerClassName:c,children:u,licencesChangeTypeFlag:m=!1})=>{const{teams:p,teamToInviteTo:f,account:h,setTeamToInviteTo:g,setInvitations:N,isSystemAdmin:_}=ae(),[w,O]=d.useState("email");if(!h||!(h!=null&&h.active_organization)||!(h!=null&&h.active_organization.super_organization))return null;const T=R=>{R?e==null||e(!0):(e==null||e(!1),N({}))},y=d.useMemo(()=>{var R;return l||(m&&!((R=f==null?void 0:f.super_organization)!=null&&R.have_available_standard_licenses)?i.jsxs("div",{className:"text-slate-600",children:[i.jsx("span",{children:"Let's get the rest of your team using Scribe!"}),_?i.jsx("span",{className:"font-semibold ml-1",children:"You have to buy more licences before inviting new users."}):i.jsx("span",{className:"font-semibold ml-1",children:"Org Admin will need to approve purchase of licenses before invites go out."})]}):"Let's get the rest of your team using Scribe!")},[m,f,_]),P=R=>{O(R)};return!p||!f?null:i.jsx(ba,{open:t,onOpenChange:T,children:i.jsxs(wa,{className:c,children:[i.jsx(_a,{title:o||"Add Your Team",description:y}),i.jsxs(vo,{className:"px-0 pb-0",children:[i.jsxs("div",{className:"px-6",children:[p.length>=2&&i.jsx(Ju,{selectedTeam:f,teams:p,onSelect:R=>g(R)}),i.jsxs(Kd,{value:w,defaultValue:"email",onValueChange:R=>{P(R)},className:"mb-8 mt-4 flex items-center justify-between",children:[i.jsxs(Hd,{children:[i.jsx(Mi,{value:"email","data-testid":"email-tab-trigger",children:"Email"}),i.jsx(Mi,{value:"pending","data-testid":"pending-tab-trigger",children:"Pending"})]}),i.jsx(Nm,{})]})]}),w==="pending"?i.jsx(Cm,{}):i.jsx(pm,{isModal:!0,showSecondaryAction:s,onSecondaryAction:a,secondaryActionText:n,showSlackImport:r,licencesChangeTypeFlag:m})]}),u]})})},Em=Zt([t=>t.organization.teammates,t=>t.organization.loading],(t,e)=>({teammates:t,isLoading:e})),Sm=Zt([t=>t.teamInvites.isSending],t=>t),Im=Zt([t=>t.teamInvites.invites,t=>t.teamInvites.isLoading,t=>t.teamInvites.isFetched,t=>t.teamInvites.error],(t,e,s,a)=>({invites:t,isLoading:e,isFetched:s,error:a})),sr={requestInviteForUser:async({email:t,teamId:e,permissionLevel:s})=>da("role_change_request/","POST",{organization_id:e,permission_level:s,target_user_email:t,request_type:"invite_request"}),sendRequests:async({requests:t,teamId:e,requestInputsState:s,bulkPermissionLevel:a})=>{let n={},r={};return Promise.all(Object.entries(t).map(([o,{email:l,permissionLevel:c,errors:u}])=>{const m=s===ke.BULK?a:c;return sr.requestInviteForUser({email:l,teamId:e,permissionLevel:m}).then(()=>(r={...r,[o]:{email:l,permissionLevel:s===ke.BULK?a:c,errors:[...u]}},!0)).catch(({data:p})=>(n={...n,[o]:{email:l,permissionLevel:c,errors:[...u]}},p[0]?n={...n,[o]:{email:l,permissionLevel:c,errors:[...u,`Error requesting an invite for ${l}.
Reason: ${p[0]}`]}}:p.detail&&(n={...n,[o]:{email:l,permissionLevel:c,errors:[...u,p.detail]}}),!1))})).then(()=>({failedRequests:n,sentRequests:r}))}},gs=hr("teamRequests/sendRequests",async({teamId:t,requests:e,requestInputsState:s,bulkPermissionLevel:a})=>await sr.sendRequests({requests:e,teamId:t,requestInputsState:s,bulkPermissionLevel:a})),Rm={requests:[],isLoading:!1,isFetched:!1,error:null,sentRequests:{},failedRequests:{},isSending:!1},ar=fr({name:"teamRequests",initialState:Rm,reducers:{clearRequestState:t=>{t.sentRequests={},t.failedRequests={},t.error=null}},extraReducers:t=>{t.addCase(gs.pending,e=>{e.isSending=!0,e.error=null}).addCase(gs.fulfilled,(e,s)=>{e.isSending=!1,e.failedRequests=s.payload.failedRequests,e.sentRequests=s.payload.sentRequests}).addCase(gs.rejected,(e,s)=>{e.isSending=!1,e.error=s.error.message||null})}});ar.actions,ar.reducer;const Pm=Lt.withTypes(),Am=({userData:t,selectedTeam:e,isOpen:s,setIsOpen:a,licencesChangeTypeFlag:n})=>{var O,T;const r=Pm(),o=t==null?void 0:t.organizations,{invites:{data:l},isLoading:c,isFetched:u}=K(Im),m=K(Sm),{teammates:p,isLoading:f}=K(Em),[h,g]=d.useState(e),N=!!(e!=null&&e.permission_level)&&((e==null?void 0:e.permission_level)==="admin"||(e==null?void 0:e.permission_level)==="write"),_=((O=h==null?void 0:h.super_organization)==null?void 0:O.role)??((T=h==null?void 0:h.super_organization)==null?void 0:T.default_role),w=gr(_,xr.SYSTEM_ADMIN);return d.useEffect(()=>{h!=null&&h.id&&(r(vr({id:h.id})),r(yr({id:h.id})))},[h==null?void 0:h.id,r]),!o||!e?null:i.jsx(Yu,{teamToInviteTo:h,setTeamToInviteTo:g,isSystemAdmin:w,account:t,canChangeOrDeleteDocumentsOrFolders:N,trackEvent:H,teams:o,teammates:p,isLoadingTeammates:f,pendingInvites:l,isPendingInvitesLoading:c,isPendingInvitesFetched:u,isInviteUsersLoading:m,licencesChangeTypeFlag:n,inviteUsers:async({invitations:y,bulkPermissionLevel:P,invitationInputs:R,setInvitations:v,setSentInvitations:E})=>{var k;H("clicked_send_invites",{location:Re,licenses_available:(k=h==null?void 0:h.super_organization)==null?void 0:k.have_available_standard_licenses,isSystemAdmin:w}),r(br({teamId:(h==null?void 0:h.id)||"",invitations:y,invitationInputsState:R,bulkPermissionLevel:P,location:Re})).unwrap().then(I=>{const D=Object.entries(I.failedInvitations).reduce((z,[V,ne])=>({...z,[V]:{...ne,status:"error"}}),{}),B=Object.entries(I.sentInvitations).reduce((z,[V,ne])=>({...z,[V]:{...ne,status:"sent"}}),{});E(B),v(D)})},requestLicencesForUsers:async({invitations:y,bulkPermissionLevel:P,invitationInputs:R,setInvitations:v,setSentInvitations:E})=>{var k,I,D,B;if(H("license_capacity_reached",{location:Re,version:"legacy",licenses_available:(k=h==null?void 0:h.super_organization)==null?void 0:k.have_available_standard_licenses,pending_invites:y,is_system_admin:w,request_type:"invite_request"}),w&&!((I=h==null?void 0:h.super_organization)!=null&&I.have_available_standard_licenses)&&P!=="read"){const z=(D=h==null?void 0:h.super_organization)==null?void 0:D.id;if(!z)return;const V=`${(B=bs)==null?void 0:B.FRONTEND_URL}/settings?tab=billing&s_org_id=${encodeURIComponent(z)}&show_add_licences_modal=true`;chrome.runtime.sendMessage({messageType:"openUrl",url:V});return}r(gs({teamId:(h==null?void 0:h.id)||"",requests:y,requestInputsState:R,bulkPermissionLevel:P})).unwrap().then(z=>{const V=Object.entries(z.failedRequests).reduce((we,[_e,oe])=>({...we,[_e]:{...oe,status:"error"}}),{}),ne=Object.entries(z.sentRequests).reduce((we,[_e,oe])=>({...we,[_e]:{...oe,status:"sent"}}),{});E(ne),v(V)})},resendInvite:(y,P)=>{P&&(H("resend_invite",{invited_email:y==null?void 0:y.invited_user_email,team_id:P,location:Re}),r(wr({inviteCode:y.invite_code,teamId:P})))},deleteInvite:(y,P)=>{P&&(H("invite_deleted",{deleted_email:y==null?void 0:y.invited_user_email,team_id:P,location:Re}),r(_r({inviteIds:[y.invite_code],teamId:P})))},resendAllInvites:y=>{y&&(H("resend_all_invites",{team_id:y,location:Re}),r(jr({teamId:y})))},children:i.jsx(Tm,{open:s,onOpenChange:a,containerClassName:"top-[10%] translate-y-0",licencesChangeTypeFlag:n})})},Mm=t=>{var e;return[tt.BASE,tt.CORE,tt.HUB,tt.GRID,tt.ENTERPRISE].includes((e=t==null?void 0:t.plan)==null?void 0:e.name)},Om=({team:t,onClick:e,isSelectedTeam:s})=>{var r,o;const a=(o=(r=t.super_organization)==null?void 0:r.plan)==null?void 0:o.name;let n="";return Mm(t.super_organization)?n="ent":a!=="free"&&(n=a||""),i.jsx(yt,{onClick:e,children:i.jsxs("div",{className:"flex items-center justify-between gap-4 w-full",children:[i.jsxs("span",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx("span",{className:"text-ellipsis whitespace-nowrap overflow-hidden",children:t.name}),n&&i.jsx(Oe,{className:"uppercase",children:n})]}),s&&i.jsx(Q,{icon:Br,className:"text-green-500 align-middle"})]})})},Re="extension_home_page",Dm=()=>{const[t,e]=d.useState(null);return Lt(),d.useEffect(()=>{(async()=>{try{chrome.runtime.sendMessage({messageType:"getActiveTeam"},s=>{e(s||null)})}catch(s){console.error("Failed to get initial team:",s)}})()},[]),[t,s=>{e(s);try{chrome.runtime.sendMessage({messageType:"setActiveTeam",team:s})}catch(a){console.error("Failed to update team:",a)}}]},Fm=({selectedTeam:t,setSelectedTeam:e})=>{const{userData:s}=K(ua),{licencesChangeType:a}=je(qe.getState()),[n,r]=d.useState(!1),o=s==null?void 0:s.organizations,l=u=>{e(u)},c=u=>{u&&H("opened_team_selector",{location:Re})};return!o||!t?null:i.jsxs("div",{className:"flex items-center",children:[i.jsxs(gt,{onOpenChange:c,children:[i.jsx(xt,{asChild:!0,className:"border-none",children:i.jsx(G,{"data-testid":"select-active-team",variant:"secondary",icon:js,iconPosition:"right",className:"flex flex-row border-none shadow-none bg-slate-300/10",children:i.jsxs("div",{className:"flex flex-row items-center gap-2 max-w-24",children:[i.jsx(ot,{size:"xxs",shape:"square",children:t.name}),i.jsx("div",{className:"text-ellipsis whitespace-nowrap overflow-hidden text-slate-900",children:t.name})]})})}),i.jsxs(vt,{className:"max-w-[80vw]",children:[i.jsx(bi,{variant:"label",children:"Change team"}),o.map(u=>i.jsx(Om,{team:u,onClick:()=>l(u),isSelectedTeam:u.id===t.id},u.id)),i.jsx(wi,{}),i.jsx(yt,{icon:no,onClick:()=>{H("click_invite_teammates",{location:Re}),r(!0)},children:"Invite Teammates"})]})]}),i.jsx(Am,{userData:s,selectedTeam:t,isOpen:n,setIsOpen:r,licencesChangeTypeFlag:!!a})]})},zm=({children:t})=>i.jsxs("div",{className:"relative h-auto w-full",children:[i.jsx("div",{className:"absolute inset-0",children:i.jsxs("picture",{className:"block w-full h-full",children:[i.jsx("source",{media:"(max-width: 500px)",srcSet:al}),i.jsx("img",{src:nl,alt:"",className:"w-full h-full object-cover object-bottom",style:{objectPosition:"bottom left"}})]})}),i.jsx("div",{className:"relative z-10",children:t})]}),Lm=({isSidePanel:t=!1,hasViewerLicense:e,user:s,missingPermissions:a,onStartRecording:n,onVisitWorkspaceDocuments:r,onGoToOptionsPage:o,onOpenSidepanel:l})=>{var B,z,V,ne,we,_e,oe,F;const{pinTreasures:c,copilot:u,lrr2025:m,requestACreatorLicenseEntrypoints:p,dwApptagUi:f}=je(qe.getState()),h=(z=(B=s==null?void 0:s.active_organization)==null?void 0:B.super_organization)==null?void 0:z.allow_web,g=typeof p=="string"?JSON.parse(p):{},N=ma(s),{pins:_}=K(na),w=K(kr),[O,T]=d.useState("loading-auto-capture"),y=il(),[P,R]=Dm(),[v,E]=d.useState(!1),k=()=>{chrome.runtime.sendMessage({messageType:"cancelEditPin"})};za({isSidePanel:t,lrr2025:m,lrrView:O}),Pa({isDropping:w,isEditingPin:v,isPinning:!v&&!w,...v&&{onDialogCancel:k}});const I=Ot(s),D=Cr((we=(ne=(V=s==null?void 0:s.active_organization)==null?void 0:V.super_organization)==null?void 0:ne.plan)==null?void 0:we.name);return d.useEffect(()=>{var Y;g!=null&&g.enabled&&!I&&D&&H("request_creator_license_entrypoint_viewed",{location:"start_capture_button",organization_id:(Y=s==null?void 0:s.active_organization)==null?void 0:Y.id})},[g==null?void 0:g.enabled,(_e=s==null?void 0:s.active_organization)==null?void 0:_e.id,I,D]),i.jsxs("div",{className:"h-full w-full",children:[i.jsx(zm,{children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:C("w-full flex justify-between h-8",{"mt-3":!e}),children:[i.jsx("button",{onClick:r,className:"bg-transparent cursor-pointer","aria-label":"Open Scribe workspace",title:"Open Scribe workspace",type:"button","data-testid":"visit-workspace",children:i.jsx(sl,{className:"h-7"})}),i.jsxs("div",{className:"gap-2 inline-flex",children:[i.jsx(Fm,{selectedTeam:P,setSelectedTeam:R}),i.jsx(G,{icon:Ur,variant:"secondary","aria-label":"Settings",size:"default",onClick:o,className:"h-8 border-none shadow-none text-slate-600 bg-slate-300/10","data-testid":"extension-settings"})]})]}),e&&(g==null?void 0:g.variant)==="treatment"&&i.jsx("div",{className:"flex justify-center items-center w-full px-3 my-9 min-h-[80px] flex-col gap-4",children:i.jsx(lt,{onClick:()=>{const Y=ha({location:"start_capture_button",frontendUrl:bs.FRONTEND_URL,variant:fa.VIEWER_TO_CREATOR});window.open(Y)},iconClassName:"text-brand-400",className:"w-full shadow-[0px_3px_4px_0px_rgba(12,25,79,0.19)] max-w-[450px]",size:"large"})}),!e&&i.jsxs("div",{className:"flex justify-center items-center w-full px-3 my-9 min-h-[80px] flex-col gap-4",children:[h&&i.jsx(lt,{onClick:n,iconClassName:"text-brand-400",className:"w-full shadow-[0px_3px_4px_0px_rgba(12,25,79,0.19)] max-w-[450px]",size:"large"}),!h&&i.jsxs(ie,{onOpenChange:()=>{},children:[i.jsx(re,{children:i.jsx("div",{className:"w-full",children:i.jsx(lt,{disabled:!0,iconClassName:"text-brand-400",className:"w-full shadow-[0px_3px_4px_0px_rgba(12,25,79,0.19)] max-w-[450px]",size:"large"})})}),i.jsx(le,{children:i.jsx("div",{className:"flex items-center",children:i.jsx("span",{"data-testid":"noCaptureTooltip",children:"Capturing disabled. Please contact your admin."})})})]}),i.jsxs("div",{className:"flex gap-2 justify-center items-center flex-col w-full max-w-[450px]",children:[m&&t&&i.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:i.jsx(Fa,{setLrrView:T,dwApptagUi:!!f})}),i.jsx(Oa,{missingPermissions:a,isSidekickRefresh:!0}),N&&i.jsx("div",{className:"w-full",children:i.jsx(Aa,{isSidekickRefreshVersion:!0})})]})]})]})}),i.jsx(Ld,{isCopilotSearch:!!((F=(oe=s.active_organization)==null?void 0:oe.super_organization)!=null&&F.allow_openai)&&!!u,onOpenSidepanel:l}),c&&(_==null?void 0:_.length)>0&&i.jsx("div",{className:"p-6",children:i.jsx(sc,{currentWindowId:y==null?void 0:y.id,setIsEditMode:E})}),i.jsx(zd,{selectedTeam:P,onVisitWorkspaceDocuments:r,onStartRecording:n,showPinButton:!(_!=null&&_.length)&&!!c&&I,currentWindowId:y==null?void 0:y.id,hasViewerLicense:e,pinFlagEnabled:!!c,userCanCreatePins:I})]})},xs=t=>d.createElement("svg",{width:51,height:40,viewBox:"0 0 51 40",fill:"#ff5466",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("path",{d:"M25.5002 30.509C25.5002 30.0869 25.7925 29.721 26.2042 29.6279L49.8532 24.2766C50.4183 24.1488 50.9559 24.5784 50.9559 25.1577V33.745C50.9559 34.1671 50.6636 34.533 50.2519 34.6261L26.6029 39.9773C26.0379 40.1052 25.5002 39.6756 25.5002 39.0962V30.509Z"}),d.createElement("path",{d:"M0.0441895 21.2616C0.0441895 20.8395 0.336495 20.4736 0.748192 20.3805L49.8529 9.26923C50.418 9.14136 50.9557 9.57096 50.9557 10.1503V18.7376C50.9557 19.1597 50.6633 19.5256 50.2517 19.6187L1.14694 30.73C0.581859 30.8578 0.0441895 30.4282 0.0441895 29.8489V21.2616Z"}),d.createElement("path",{d:"M0.0441895 6.25497C0.0441895 5.83287 0.336495 5.46703 0.748192 5.37387L24.3972 0.0226531C24.9623 -0.105211 25.4999 0.32439 25.4999 0.903753V9.49104C25.4999 9.91314 25.2076 10.279 24.7959 10.3721L1.14694 15.7234C0.581859 15.8512 0.0441895 15.4216 0.0441895 14.8423V6.25497Z"})),Zm=(t,e)=>{var u,m,p,f,h;const s=(m=(u=t==null?void 0:t.active_organization)==null?void 0:u.super_organization)==null?void 0:m.allow_openai,a=(t==null?void 0:t.date_joined)<"2024-11-23T00:00:00.000Z",n=(h=(f=(p=t==null?void 0:t.active_organization)==null?void 0:p.super_organization)==null?void 0:f.plan)==null?void 0:h.name,r=n===void 0||n==="free",o=!!(e!=null&&e.first_created_scribe_id),l=!r||a||o,{audioTranscription:c}=K(je);return d.useEffect(()=>{c!==void 0&&s&&Nr(a?"audio_transcription":"audio_transcription_hide_toggle",!!c)},[c,s,a]),{isRequestedToPresentAudioTranscriptionToggle:c&&l&&s,isGrandfatheredToggleUser:a}},Bm=({onClick:t,scribeCount:e,isSidePanel:s})=>{const[a,n]=d.useState("idle"),{hostname:r,tab:o}=dn(),l=s?r:window.location.hostname,c=ya(l,64,!0)||(o==null?void 0:o.favIconUrl);d.useEffect(()=>{if(c&&l){const m=new Image;m.src=c,m.onload=()=>{n("success")},m.onerror=()=>{n("error")}}},[c,l]);const u=e!==0;return i.jsx(G,{variant:"secondary",size:"huge",className:"w-full",onPointerDown:t,"data-testid":"extensionOpenSidekickButton",icon:u?void 0:io,iconProps:{className:"text-slate-500 h-4"},children:i.jsx("span",{className:"flex items-center text-sm font-medium text-slate-600",children:u?i.jsxs(i.Fragment,{children:[a==="error"&&i.jsx(Q,{icon:ro,className:"w-6 text-slate-500"}),c&&a!=="error"&&i.jsx("img",{alt:"Favicon",src:c,className:C("SSFavicon mr-2",{"SSFavicon--success":a==="success"})}),`View ${e} Doc${e===1?"":"s"}`]}):i.jsx("span",{className:"pl-1",children:"Search Documents"})})})},Um=({title:t,message:e,className:s})=>i.jsx("div",{className:C("relative mx-auto rounded-lg border border-red-100 bg-red-50 p-3",s),role:"alert",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Q,{icon:oo,className:"h-4 size-3 text-red-500"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold",children:t}),i.jsx("div",{className:"text-xs",children:e})]}),i.jsx("div",{})]})}),Vm=()=>{const{setActiveTeamError:t}=ua(qe.getState()),e=[t?{title:"Error Selecting Team",message:t}:null].filter(s=>s!==null);return e.length>0?i.jsx("div",{children:e.map(s=>i.jsx(Um,{className:"my-2",message:s==null?void 0:s.message,title:s==null?void 0:s.title}))}):null},qm=()=>{const t=()=>{const e=ja();chrome.runtime.sendMessage({messageType:"startCopilotSearch",source:Ce.SIDEPANEL,askAiId:e}),Ut().then(s=>{s&&J("copilot_entry_point_click",{url:s.url,ask_ai_id:e})})};return i.jsx("div",{className:"p-[1px] bg-gradient-to-r from-[#3AC3FF] to-brand-500 rounded-lg mb-3",children:i.jsx(G,{"data-testid":"startCopilotButton",size:"huge",className:"hover:bg-gradient-to-r hover:from-[#3ac3ff]/5 hover:to-[#5648fb]/5 shadow-none w-full",onClick:t,variant:"secondary",icon:lo,children:i.jsx("div",{className:"flex items-center gap-2 bg-gradient-to-r from-[#3AC3FF] to-brand-500 text-transparent bg-clip-text",children:"Search"})})})},Gm=()=>{const[t,e]=d.useState(null),[s,a]=d.useState(!0);if(d.useEffect(()=>{da("super_organization/contact/").then(r=>{e(r.data),a(!1)})},[]),s)return i.jsx("div",{style:{height:28}});if(!t)return i.jsx("p",{className:"ViewerMessage","data-testid":"viewerOnly",children:"This is a view-only experience of Scribe. To unlock creation functionality, please contact your organization's administrator to update your role."});const n=()=>{H("viewer_click_admin_role_update",{location:"sidekick"})};return i.jsxs("p",{className:"ViewerMessage","data-testid":"viewerOnly",children:["This is a view-only experience of Scribe. To unlock creation functionality, please contact"," ",i.jsx("a",{href:`mailto:${t.email}`,onClick:n,children:`${t.first_name} ${t.last_name}`.trim()})," ","to update your role."]})},Km=({user:t,isPlanFree:e,hasViewerLicense:s,onStartRecording:a,onVisitWorkspaceDocuments:n,onVisitRecommended:r,scribeCountOnDomain:o,isSidePanel:l=!1,onGoToOptionsPage:c,missingPermissions:u,userGrowthState:m})=>{var I,D,B,z;const{copilot:p,lrr2025:f,dwApptagUi:h,hideSidekickSearchWhenCopilotEnabled:g}=je(qe.getState()),{isRequestedToPresentAudioTranscriptionToggle:N,isGrandfatheredToggleUser:_}=Zm(t,m),w=(D=(I=t==null?void 0:t.active_organization)==null?void 0:I.super_organization)==null?void 0:D.allow_web,O=(z=(B=t==null?void 0:t.active_organization)==null?void 0:B.super_organization)==null?void 0:z.allow_openai,[T,y]=d.useState("loading-auto-capture"),P=!!(m!=null&&m.first_created_scribe_id);za({isSidePanel:l,lrr2025:f,lrrView:T});const R=N&&w&&!s||_,{audioRecordingEnabled:v,toggleAudioRecording:E}=Vr("sidepanel",R),k=g?!p||p&&o>0:!0;return i.jsxs("div",{className:C("Greeting overflow-auto",{"h-full !w-full":l}),children:[i.jsx("div",{className:"mb-12 px-6",children:i.jsx(jo,{user:t,onVisitWorkspaceDocuments:n,onGoToOptionsPage:c})}),i.jsxs("div",{className:e?"GreetingTopSection":"GreetingTopSection mb-6",children:[i.jsx(xs,{title:"Logo"}),i.jsxs("h1",{"data-testid":"extensionDropdownGreetingTitle",className:"Greeting__title mb-10 mt-4",children:["Hello, ",t.first_name,"!"]}),s&&i.jsx(Gm,{}),i.jsxs("div",{className:"mb-4 mt-2 flex w-full flex-col gap-3",children:[(P||_)&&i.jsx(qr,{disabled:!R,showBrandBadge:!R,onToggle:E,enabled:v}),w&&i.jsx(lt,{onClick:a,disabled:s,hasViewerLicense:s}),f&&l&&i.jsx("div",{className:"flex-1 min-h-0 flex flex-col",children:i.jsx(Fa,{setLrrView:y,dwApptagUi:!!h})}),!w&&i.jsxs(ie,{onOpenChange:()=>{},children:[i.jsx(re,{children:i.jsx("div",{children:i.jsx(lt,{onClick:a,disabled:!0})})}),i.jsx(le,{children:i.jsx("div",{className:"flex items-center",children:i.jsx("span",{"data-testid":"noCaptureTooltip",children:"Capturing disabled. Please contact your admin."})})})]}),i.jsx(Vm,{})]})]}),i.jsxs("div",{className:"GreetingBottomSection",children:[e&&i.jsx(Aa,{}),i.jsx(Oa,{missingPermissions:u}),i.jsxs("div",{className:"rounded-b-md border-slate-200 p-6",children:[p&&O&&i.jsx(qm,{}),k&&i.jsx(Bm,{onClick:r,scribeCount:o,isSidePanel:l})]})]})]})},Hm=({isSidePanel:t})=>i.jsxs("div",{className:`box-border flex ${t?"w-full h-full":"w-[241px]"} flex-col items-center rounded-lg bg-slate-50 px-3 pb-3 pt-10 shadow-black shadow-slate-100 outline outline-1	outline-slate-50`,children:[i.jsx(xs,{title:"Logo"}),i.jsx("h1",{className:"mb-4 mt-4 text-lg font-bold leading-7",children:"Update Permissions"}),i.jsx("div",{className:"flex justify-center",children:i.jsx(G,{variant:"primary",size:"small",onClick:()=>{window.open("https://scribehow.com/shared/How_to_change_the_Scribe_extensions_permissions__On4yf-j0Qj2CWMFOyoPNIw")},children:"Learn More"})}),i.jsx("div",{className:"mt-4 text-center text-sm ",children:'To capture a new Scribe, please update your Scribe extension site access permissions to "On All Sites".'})]}),Js=t=>{const e=a=>({height:`${t.size}px`,width:`${t.size}px`,position:"absolute",backgroundColor:`${t.color}`,borderRadius:"100%",opacity:"0.6",top:"0",left:"0",animationFillMode:"both",animation:`scribe-widget-bounce-loader 2.1s ${a===1?"1s":"0s"} infinite ease-in-out`}),s={position:"relative",height:`${t.size}px`,width:`${t.size}px`};return t.loading?i.jsxs("span",{style:s,children:[i.jsx("style",{children:`@keyframes scribe-widget-bounce-loader {
                    0%, 100% {
                        transform: scale(0)
                    }
                    50% {
                        transform: scale(1.0)
                    }
                }`}),i.jsx("span",{style:e(1)}),i.jsx("span",{style:e(2)})]}):null};Js.defaultProps={size:60,loading:!0,color:"#000000",style:{}};const Qm=()=>{J("extension_dropdown_discard_scribe"),chrome.runtime.sendMessage({messageType:"popupDiscardRecordingWhileStopping"})},Wm=()=>{const t=K(Tr);return i.jsx("div",{className:"box-border flex w-[330px] flex-col items-center rounded-lg bg-slate-50 shadow-lg outline outline-1 outline-slate-300",children:i.jsxs("div",{className:"flex h-[300px] w-full flex-col items-center justify-center",children:[i.jsx(xs,{title:"Logo"}),i.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 p-4",children:[i.jsx("span",{className:"flex items-center justify-center px-7 leading-5 text-slate-700",children:"Generating your Scribe..."}),i.jsx(Js,{size:24,color:"#1565C0"}),!t&&i.jsx(G,{variant:"secondary",disabled:t,onClick:Qm,className:"mt-2",size:"large",children:"Cancel"})]})]})})},Ym=()=>{J("extension_dropdown_stop_recording"),chrome.runtime.sendMessage({messageType:"popupStopRecording"})},Jm=({isSidePanel:t=!1})=>i.jsx("div",{className:C("box-border flex w-[300px] flex-col items-center rounded-lg bg-slate-50 shadow-lg outline outline-1 outline-slate-300",{"h-full !w-full":t}),children:i.jsxs("div",{className:"flex h-[176px] w-full flex-col items-center justify-center",children:[i.jsx(xs,{title:"Logo"}),i.jsx(G,{size:"huge",onClick:Ym,className:"mt-7 w-full !max-w-[165px]","data-testid":"extensionStopRecordingButton",children:"Stop Capture"})]})}),Xm=t=>d.createElement("svg",{width:61,height:48,viewBox:"0 0 61 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",...t},d.createElement("rect",{width:61,height:48,fill:"url(#pattern0_306_8478)"}),d.createElement("defs",null,d.createElement("pattern",{id:"pattern0_306_8478",patternContentUnits:"objectBoundingBox",width:1,height:1},d.createElement("use",{xlinkHref:"#image0_306_8478",transform:"scale(0.0070922 0.009013)"})),d.createElement("image",{id:"image0_306_8478",width:141,height:111,preserveAspectRatio:"none",xlinkHref:"data:image/png;base64,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"}))),$m=()=>i.jsx(G,{"data-testid":"sign-in-button",onClick:()=>{chrome.runtime.sendMessage({messageType:"popupLogIn"})},size:"huge",className:"w-full",children:"Sign in to Scribe"}),ep=()=>i.jsx("div",{className:"min-w-[250px] min-h-[300px] w-full h-full bg-gradient-to-br from-pink-500/10 via-white to-brand-500/10 flex flex-col items-center justify-center",children:i.jsxs("div",{className:"w-full px-8 flex flex-col items-center gap-8 -mt-16 max-w-md",children:[i.jsx(Xm,{}),i.jsx($m,{})]})}),Ot=t=>{var e,s;return(e=t==null?void 0:t.active_organization)!=null&&e.permission_level?((s=t==null?void 0:t.active_organization)==null?void 0:s.permission_level)!=="read":!0},nr=({scribeCountOnDomain:t=0,onClose:e,user:s,missingPermissions:a,isSidePanel:n=!1,userGrowthState:r,...o})=>{const{sidekickRefresh:l,deprecateCaptureOptions:c}=je(qe.getState()),u=K(Er),m=K(Sr),p=K(ia),{domainAllowlistLoaded:f}=K(Ir),[h,g]=d.useState(null),N=Lt();d.useEffect(()=>{var v;if(!l&&N&&s&&f){const E=n?null:(v=window==null?void 0:window.location)==null?void 0:v.hostname;N(Rr({domain:E,source:n?Ce.SIDEPANEL:Ce.CONTENT}))}},[l,f,N,!!s]),d.useEffect(()=>(chrome.runtime.sendMessage({messageType:"trackNewRelicLog",name:"extension_dropdown_opened",details:{userEmail:s==null?void 0:s.email,missingPermissions:a,isSidePanel:!!n}}),Mr("recordingControlsPreference").then(v=>{g(v)}),()=>{chrome.runtime.sendMessage({messageType:"trackNewRelicLog",name:"extension_dropdown_closed",details:{isSidePanel:!!n}})}),[]),d.useEffect(()=>{c&&g("sidepanel")},[c]),d.useEffect(()=>{l!==void 0&&H("extension_sidekick_refresh",{sidekickRefresh:!!l})},[l]);const _=()=>{J("extension_dropdown_start_recording"),chrome.runtime.sendMessage({messageType:"popupStartRecord",source:n?Ce.SIDEPANEL:Ce.CONTENT,data:{url:window.location.url}}),e==null||e()},w=()=>{if(J("extension_settings_clicked",{location:n?"sidekick":"dropdown"}),n){chrome.runtime.sendMessage({messageType:"popupGoToOptionsPage",source:n?Ce.SIDEPANEL:Ce.CONTENT});return}const v=`chrome-extension://${chrome.runtime.id}/src/scripts/options/index.html`;window.open(v,"_blank"),e==null||e()},O=()=>{chrome.runtime.sendMessage({messageType:"popupGoToMyLibrary"}),J("extension_dropdown_visit_workspace_clicked")},T=()=>{chrome.runtime.sendMessage({messageType:"popupGoToMyDocuments"}),J("extension_dropdown_visit_workspace_documents_clicked")},y=ma(s),P=!Ot(s);if(!n&&h!=="sidepanel"&&u)return i.jsx(Jm,{isSidePanel:!1});if(!n&&h!=="sidepanel"&&m)return i.jsx(Wm,{});const R=(v,E)=>{chrome.runtime.connect({name:"sidePanelPort"}).postMessage({messageType:"openSidePanel",route:v,clickedFromSearch:E||!t,closeAssistantOnBack:E}),e==null||e()};return s?l&&(()=>c?"sidepanel":h)()==="sidepanel"?i.jsx(Ke,{children:i.jsx(Lm,{isSidePanel:n,hasViewerLicense:P,missingPermissions:a,onStartRecording:_,onVisitWorkspaceDocuments:T,onGoToOptionsPage:w,user:s,userGrowthState:r,onOpenSidepanel:R})}):i.jsx(Ke,{children:i.jsx(Km,{onStartRecording:_,onVisitWorkspaceDocuments:T,onVisitWorkspace:O,onVisitRecommended:()=>R(Ge.Assistant),user:s,loading:p,isPlanFree:y,hasViewerLicense:P,scribeCountOnDomain:t,isSidePanel:n,onGoToOptionsPage:w,userGrowthState:r,missingPermissions:a,...o})}):a?i.jsx(Hm,{isSidePanel:n}):i.jsx(ep,{})};nr.propTypes={user:Kt.object.isRequired,scribeCountOnDomain:Kt.number,onClose:Kt.func,userGrowthState:Kt.object};export{pn as A,Js as B,fn as C,gt as D,nr as E,Pa as F,Cn as G,Vl as H,ql as I,Kl as J,kn as K,Gl as L,nn as M,Jl as N,Tn as O,ze as P,Ms as Q,Wl as R,_n as S,wn as T,un as U,Xl as W,Ia as a,Es as b,rl as c,Ot as d,xt as e,vt as f,ji as g,yt as h,Nn as i,Yl as j,$l as k,wi as l,ts as m,bi as n,es as o,En as p,As as q,ln as r,Ma as s,Hl as t,hn as u,gn as v,yn as w,xn as x,vn as y,Ql as z};
