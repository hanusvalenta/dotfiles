import{el as o,K as n,ak as i,L as l}from"./store-f163b43d.js";const s=async()=>{const r=await chrome.storage.local.get(["options"])||{};if(Object.keys(r).length>0){const e={...o,...JSON.parse(r.options)};if(!await a())return{...e,recordingControlsPreference:"floating-button"};const t=e.recordingControlsPreference||o.recordingControlsPreference;return{...e,recordingControlsPreference:t}}return o},d=async r=>(await s())[r],u=async(r,e)=>{const t=await s();t[r]=e,await chrome.storage.local.set({options:JSON.stringify(t)})},p=async()=>{if(typeof(chrome==null?void 0:chrome.sidePanel)<"u")try{return await new Promise((r,e)=>{var t;(t=chrome==null?void 0:chrome.permissions)==null||t.contains({permissions:["sidePanel"]},c=>{chrome.runtime.lastError?e(chrome.runtime.lastError):r(!!c)})})}catch{return!1}return!1};async function a(){const r=await chrome.storage.local.get("detectedBrowser");if([n.Arc,n.Opera].includes(r==null?void 0:r.detectedBrowser))return{isSupported:!1,browser:r==null?void 0:r.detectedBrowser};const e=await p();return{isSupported:i(l)&&e,browser:r==null?void 0:r.detectedBrowser}}export{a,d as b,s as g,u as s};
