var EI=Object.defineProperty;var II=(t,e,r)=>e in t?EI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Xr=(t,e,r)=>(II(t,typeof e!="symbol"?e+"":e,r),r);import{c as It,a as Ad,g as Wc}from"./_commonjsHelpers-de833af9.js";import{r as OI,s as Yc,a as Hc,v as hs}from"./v4-c70744d4.js";var Hi=(t=>(t.GRANTED="granted",t.DENIED="denied",t.PROMPT="prompt",t))(Hi||{}),Cd=(t=>(t.REQUEST_ACCESS="request_access",t.REDIRECT="redirect",t.TRANSCRIBING_AUDIO="transcribing_audio",t))(Cd||{}),xd=(t=>(t.ON="on",t.OFF="off",t))(xd||{}),kd=(t=>(t.BROWSER_PERMISSION="browser_permission",t.SYSTEM_PERMISSION="system_permission",t.MICROPHONE_SILENT="microphone_silent",t))(kd||{}),Nd=(t=>(t.ON_READY="onReady",t.GET_AUTH_TOKEN="getAuthToken",t.TRANSCRIPT="transcript",t.ERROR="error",t))(Nd||{});function Ne(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var TI=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),Rd=TI,Gc=()=>Math.random().toString(36).substring(7).split("").join("."),AI={INIT:`@@redux/INIT${Gc()}`,REPLACE:`@@redux/REPLACE${Gc()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Gc()}`},gs=AI;function Qc(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Pd(t,e,r){if(typeof t!="function")throw new Error(Ne(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ne(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ne(1));return r(Pd)(t,e)}let i=t,a=e,s=new Map,c=s,u=0,p=!1;function m(){c===s&&(c=new Map,s.forEach((D,U)=>{c.set(U,D)}))}function g(){if(p)throw new Error(Ne(3));return a}function h(D){if(typeof D!="function")throw new Error(Ne(4));if(p)throw new Error(Ne(5));let U=!0;m();const j=u++;return c.set(j,D),function(){if(U){if(p)throw new Error(Ne(6));U=!1,m(),c.delete(j),s=null}}}function y(D){if(!Qc(D))throw new Error(Ne(7));if(typeof D.type>"u")throw new Error(Ne(8));if(typeof D.type!="string")throw new Error(Ne(17));if(p)throw new Error(Ne(9));try{p=!0,a=i(a,D)}finally{p=!1}return(s=c).forEach(U=>{U()}),D}function E(D){if(typeof D!="function")throw new Error(Ne(10));i=D,y({type:gs.REPLACE})}function x(){const D=h;return{subscribe(U){if(typeof U!="object"||U===null)throw new Error(Ne(11));function j(){const R=U;R.next&&R.next(g())}return j(),{unsubscribe:D(j)}},[Rd](){return this}}}return y({type:gs.INIT}),{dispatch:y,subscribe:h,getState:g,replaceReducer:E,[Rd]:x}}function CI(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:gs.INIT})>"u")throw new Error(Ne(12));if(typeof r(void 0,{type:gs.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ne(13))})}function Dd(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const c=e[s];typeof t[c]=="function"&&(r[c]=t[c])}const i=Object.keys(r);let a;try{CI(r)}catch(s){a=s}return function(s={},c){if(a)throw a;let u=!1;const p={};for(let m=0;m<i.length;m++){const g=i[m],h=r[g],y=s[g],E=h(y,c);if(typeof E>"u")throw c&&c.type,new Error(Ne(14));p[g]=E,u=u||E!==y}return u=u||i.length!==Object.keys(s).length,u?p:s}}function ms(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...i)=>e(r(...i)))}function xI(...t){return e=>(r,i)=>{const a=e(r,i);let s=()=>{throw new Error(Ne(15))};const c={getState:a.getState,dispatch:(p,...m)=>s(p,...m)},u=t.map(p=>p(c));return s=ms(...u)(a.dispatch),{...a,dispatch:s}}}function kI(t){return Qc(t)&&"type"in t&&typeof t.type=="string"}var jd=Symbol.for("immer-nothing"),Ud=Symbol.for("immer-draftable"),ar=Symbol.for("immer-state");function Rr(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var gi=Object.getPrototypeOf;function bn(t){return!!t&&!!t[ar]}function tn(t){var e;return t?Ld(t)||Array.isArray(t)||!!t[Ud]||!!((e=t.constructor)!=null&&e[Ud])||vs(t)||bs(t):!1}var NI=Object.prototype.constructor.toString();function Ld(t){if(!t||typeof t!="object")return!1;const e=gi(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===NI}function _s(t,e){ys(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,i)=>e(i,r,t))}function ys(t){const e=t[ar];return e?e.type_:Array.isArray(t)?1:vs(t)?2:bs(t)?3:0}function Kc(t,e){return ys(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Bd(t,e,r){const i=ys(t);i===2?t.set(e,r):i===3?t.add(r):t[e]=r}function RI(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function vs(t){return t instanceof Map}function bs(t){return t instanceof Set}function Wn(t){return t.copy_||t.base_}function Zc(t,e){if(vs(t))return new Map(t);if(bs(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Ld(t);if(e===!0||e==="class_only"&&!r){const i=Object.getOwnPropertyDescriptors(t);delete i[ar];let a=Reflect.ownKeys(i);for(let s=0;s<a.length;s++){const c=a[s],u=i[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(i[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[c]})}return Object.create(gi(t),i)}else{const i=gi(t);if(i!==null&&r)return{...t};const a=Object.create(i);return Object.assign(a,t)}}function Jc(t,e=!1){return ws(t)||bn(t)||!tn(t)||(ys(t)>1&&(t.set=t.add=t.clear=t.delete=PI),Object.freeze(t),e&&Object.entries(t).forEach(([r,i])=>Jc(i,!0))),t}function PI(){Rr(2)}function ws(t){return Object.isFrozen(t)}var DI={};function Yn(t){const e=DI[t];return e||Rr(0,t),e}var Gi;function Md(){return Gi}function jI(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Fd(t,e){e&&(Yn("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Xc(t){tu(t),t.drafts_.forEach(UI),t.drafts_=null}function tu(t){t===Gi&&(Gi=t.parent_)}function qd(t){return Gi=jI(Gi,t)}function UI(t){const e=t[ar];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function zd(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[ar].modified_&&(Xc(e),Rr(4)),tn(t)&&(t=Ss(e,t),e.parent_||Es(e,t)),e.patches_&&Yn("Patches").generateReplacementPatches_(r[ar].base_,t,e.patches_,e.inversePatches_)):t=Ss(e,r,[]),Xc(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==jd?t:void 0}function Ss(t,e,r){if(ws(e))return e;const i=e[ar];if(!i)return _s(e,(a,s)=>Vd(t,i,e,a,s,r)),e;if(i.scope_!==t)return e;if(!i.modified_)return Es(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,c=!1;i.type_===3&&(s=new Set(a),a.clear(),c=!0),_s(s,(u,p)=>Vd(t,i,a,u,p,r,c)),Es(t,a,!1),r&&t.patches_&&Yn("Patches").generatePatches_(i,r,t.patches_,t.inversePatches_)}return i.copy_}function Vd(t,e,r,i,a,s,c){if(bn(a)){const u=s&&e&&e.type_!==3&&!Kc(e.assigned_,i)?s.concat(i):void 0,p=Ss(t,a,u);if(Bd(r,i,p),bn(p))t.canAutoFreeze_=!1;else return}else c&&r.add(a);if(tn(a)&&!ws(a)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ss(t,a),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,i)&&Es(t,a)}}function Es(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Jc(e,r)}function LI(t,e){const r=Array.isArray(t),i={type_:r?1:0,scope_:e?e.scope_:Md(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,s=eu;r&&(a=[i],s=Qi);const{revoke:c,proxy:u}=Proxy.revocable(a,s);return i.draft_=u,i.revoke_=c,u}var eu={get(t,e){if(e===ar)return t;const r=Wn(t);if(!Kc(r,e))return BI(t,r,e);const i=r[e];return t.finalized_||!tn(i)?i:i===ru(t.base_,e)?(iu(t),t.copy_[e]=ou(i,t)):i},has(t,e){return e in Wn(t)},ownKeys(t){return Reflect.ownKeys(Wn(t))},set(t,e,r){const i=$d(Wn(t),e);if(i!=null&&i.set)return i.set.call(t.draft_,r),!0;if(!t.modified_){const a=ru(Wn(t),e),s=a==null?void 0:a[ar];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(RI(r,a)&&(r!==void 0||Kc(t.base_,e)))return!0;iu(t),nu(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return ru(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,iu(t),nu(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Wn(t),i=Reflect.getOwnPropertyDescriptor(r,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:r[e]}},defineProperty(){Rr(11)},getPrototypeOf(t){return gi(t.base_)},setPrototypeOf(){Rr(12)}},Qi={};_s(eu,(t,e)=>{Qi[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Qi.deleteProperty=function(t,e){return Qi.set.call(this,t,e,void 0)},Qi.set=function(t,e,r){return eu.set.call(this,t[0],e,r,t[0])};function ru(t,e){const r=t[ar];return(r?Wn(r):t)[e]}function BI(t,e,r){var a;const i=$d(e,r);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(t.draft_):void 0}function $d(t,e){if(!(e in t))return;let r=gi(t);for(;r;){const i=Object.getOwnPropertyDescriptor(r,e);if(i)return i;r=gi(r)}}function nu(t){t.modified_||(t.modified_=!0,t.parent_&&nu(t.parent_))}function iu(t){t.copy_||(t.copy_=Zc(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var MI=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,i)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const c=this;return function(u=s,...p){return c.produce(u,m=>r.call(this,m,...p))}}typeof r!="function"&&Rr(6),i!==void 0&&typeof i!="function"&&Rr(7);let a;if(tn(e)){const s=qd(this),c=ou(e,void 0);let u=!0;try{a=r(c),u=!1}finally{u?Xc(s):tu(s)}return Fd(s,i),zd(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===jd&&(a=void 0),this.autoFreeze_&&Jc(a,!0),i){const s=[],c=[];Yn("Patches").generateReplacementPatches_(e,a,s,c),i(s,c)}return a}else Rr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...c)=>this.produceWithPatches(s,u=>e(u,...c));let i,a;return[this.produce(e,r,(s,c)=>{i=s,a=c}),i,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){tn(t)||Rr(8),bn(t)&&(t=Wd(t));const e=qd(this),r=ou(t,void 0);return r[ar].isManual_=!0,tu(e),r}finishDraft(t,e){const r=t&&t[ar];(!r||!r.isManual_)&&Rr(9);const{scope_:i}=r;return Fd(i,e),zd(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const i=Yn("Patches").applyPatches_;return bn(t)?i(t,e):this.produce(t,a=>i(a,e))}};function ou(t,e){const r=vs(t)?Yn("MapSet").proxyMap_(t,e):bs(t)?Yn("MapSet").proxySet_(t,e):LI(t,e);return(e?e.scope_:Md()).drafts_.push(r),r}function Wd(t){return bn(t)||Rr(10,t),Yd(t)}function Yd(t){if(!tn(t)||ws(t))return t;const e=t[ar];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Zc(t,e.scope_.immer_.useStrictShallowCopy_)}else r=Zc(t,!0);return _s(r,(i,a)=>{Bd(r,i,Yd(a))}),e&&(e.finalized_=!1),r}var cr=new MI,Hd=cr.produce;cr.produceWithPatches.bind(cr),cr.setAutoFreeze.bind(cr),cr.setUseStrictShallowCopy.bind(cr),cr.applyPatches.bind(cr),cr.createDraft.bind(cr),cr.finishDraft.bind(cr);function FI(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function qI(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function zI(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${r}]`)}}var Gd=t=>Array.isArray(t)?t:[t];function VI(t){const e=Array.isArray(t[0])?t[0]:t;return zI(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function $I(t,e){const r=[],{length:i}=t;for(let a=0;a<i;a++)r.push(t[a].apply(null,e));return r}var WI=class{constructor(t){this.value=t}deref(){return this.value}},YI=typeof WeakRef<"u"?WeakRef:WI,HI=0,Qd=1;function Is(){return{s:HI,v:void 0,o:null,p:null}}function su(t,e={}){let r=Is();const{resultEqualityCheck:i}=e;let a,s=0;function c(){var h;let u=r;const{length:p}=arguments;for(let y=0,E=p;y<E;y++){const x=arguments[y];if(typeof x=="function"||typeof x=="object"&&x!==null){let D=u.o;D===null&&(u.o=D=new WeakMap);const U=D.get(x);U===void 0?(u=Is(),D.set(x,u)):u=U}else{let D=u.p;D===null&&(u.p=D=new Map);const U=D.get(x);U===void 0?(u=Is(),D.set(x,u)):u=U}}const m=u;let g;if(u.s===Qd)g=u.v;else if(g=t.apply(null,arguments),s++,i){const y=((h=a==null?void 0:a.deref)==null?void 0:h.call(a))??a;y!=null&&i(y,g)&&(g=y,s!==0&&s--),a=typeof g=="object"&&g!==null||typeof g=="function"?new YI(g):g}return m.s=Qd,m.v=g,g}return c.clearCache=()=>{r=Is(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function Kd(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...a)=>{let s=0,c=0,u,p={},m=a.pop();typeof m=="object"&&(p=m,m=a.pop()),FI(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const g={...r,...p},{memoize:h,memoizeOptions:y=[],argsMemoize:E=su,argsMemoizeOptions:x=[],devModeChecks:D={}}=g,U=Gd(y),j=Gd(x),R=VI(a),w=h(function(){return s++,m.apply(null,arguments)},...U),T=E(function(){c++;const P=$I(R,arguments);return u=w.apply(null,P),u},...j);return Object.assign(T,{resultFunc:m,memoizedResultFunc:w,dependencies:R,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:E})};return Object.assign(i,{withTypes:()=>i}),i}var _t=Kd(su),GI=Object.assign((t,e=_t)=>{qI(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),i=r.map(a=>t[a]);return e(i,(...a)=>a.reduce((s,c,u)=>(s[r[u]]=c,s),{}))},{withTypes:()=>GI});function Zd(t){return({dispatch:e,getState:r})=>i=>a=>typeof a=="function"?a(e,r,t):i(a)}var QI=Zd(),KI=Zd,ZI=(...t)=>{const e=Kd(...t),r=Object.assign((...i)=>{const a=e(...i),s=(c,...u)=>a(bn(c)?Wd(c):c,...u);return Object.assign(s,a),s},{withTypes:()=>r});return r};ZI(su);var JI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ms:ms.apply(null,arguments)},XI=t=>t&&typeof t.match=="function";function lt(t,e){function r(...i){if(e){let a=e(...i);if(!a)throw new Error(Je(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:i[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=i=>kI(i)&&i.type===t,r}var Jd=class Oo extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Oo.prototype)}static get[Symbol.species](){return Oo}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Oo(...e[0].concat(this)):new Oo(...e.concat(this))}};function Xd(t){return tn(t)?Hd(t,()=>{}):t}function th(t,e,r){if(t.has(e)){let a=t.get(e);return r.update&&(a=r.update(a,e,t),t.set(e,a)),a}if(!r.insert)throw new Error(Je(10));const i=r.insert(e,t);return t.set(e,i),i}function tO(t){return typeof t=="boolean"}var eO=()=>function(t){const{thunk:e=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let s=new Jd;return e&&(tO(e)?s.push(QI):s.push(KI(e.extraArgument))),s},rO="RTK_autoBatch",eh=t=>e=>{setTimeout(e,t)},nO=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:eh(10),iO=(t={type:"raf"})=>e=>(...r)=>{const i=e(...r);let a=!0,s=!1,c=!1;const u=new Set,p=t.type==="tick"?queueMicrotask:t.type==="raf"?nO:t.type==="callback"?t.queueNotification:eh(t.timeout),m=()=>{c=!1,s&&(s=!1,u.forEach(g=>g()))};return Object.assign({},i,{subscribe(g){const h=()=>a&&g(),y=i.subscribe(h);return u.add(g),()=>{y(),u.delete(g)}},dispatch(g){var h;try{return a=!((h=g==null?void 0:g.meta)!=null&&h[rO]),s=!a,s&&(c||(c=!0,p(m))),i.dispatch(g)}finally{a=!0}}})},oO=t=>function(e){const{autoBatch:r=!0}=e??{};let i=new Jd(t);return r&&i.push(iO(typeof r=="object"?r:void 0)),i},sO=!0;function aO(t){const e=eO(),{reducer:r=void 0,middleware:i,devTools:a=!0,preloadedState:s=void 0,enhancers:c=void 0}=t||{};let u;if(typeof r=="function")u=r;else if(Qc(r))u=Dd(r);else throw new Error(Je(1));let p;typeof i=="function"?p=i(e):p=e();let m=ms;a&&(m=JI({trace:!sO,...typeof a=="object"&&a}));const g=xI(...p),h=oO(g);let y=typeof c=="function"?c(h):h();const E=m(...y);return Pd(u,s,E)}function rh(t){const e={},r=[];let i;const a={addCase(s,c){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(Je(28));if(u in e)throw new Error(Je(29));return e[u]=c,a},addMatcher(s,c){return r.push({matcher:s,reducer:c}),a},addDefaultCase(s){return i=s,a}};return t(a),[e,r,i]}function cO(t){return typeof t=="function"}function uO(t,e){let[r,i,a]=rh(e),s;if(cO(t))s=()=>Xd(t());else{const u=Xd(t);s=()=>u}function c(u=s(),p){let m=[r[p.type],...i.filter(({matcher:g})=>g(p)).map(({reducer:g})=>g)];return m.filter(g=>!!g).length===0&&(m=[a]),m.reduce((g,h)=>{if(h)if(bn(g)){const y=h(g,p);return y===void 0?g:y}else{if(tn(g))return Hd(g,y=>h(y,p));{const y=h(g,p);if(y===void 0){if(g===null)return g;throw new Error(Je(9))}return y}}return g},u)}return c.getInitialState=s,c}var lO="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nh=(t=21)=>{let e="",r=t;for(;r--;)e+=lO[Math.random()*64|0];return e},pO=(t,e)=>XI(t)?t.match(e):t(e);function fO(...t){return e=>t.some(r=>pO(r,e))}var dO=["name","message","stack","code"],au=class{constructor(t,e){Xr(this,"_type");this.payload=t,this.meta=e}},ih=class{constructor(t,e){Xr(this,"_type");this.payload=t,this.meta=e}},hO=t=>{if(typeof t=="object"&&t!==null){const e={};for(const r of dO)typeof t[r]=="string"&&(e[r]=t[r]);return e}return{message:String(t)}},Ye=(()=>{function t(e,r,i){const a=lt(e+"/fulfilled",(p,m,g,h)=>({payload:p,meta:{...h||{},arg:g,requestId:m,requestStatus:"fulfilled"}})),s=lt(e+"/pending",(p,m,g)=>({payload:void 0,meta:{...g||{},arg:m,requestId:p,requestStatus:"pending"}})),c=lt(e+"/rejected",(p,m,g,h,y)=>({payload:h,error:(i&&i.serializeError||hO)(p||"Rejected"),meta:{...y||{},arg:g,requestId:m,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function u(p){return(m,g,h)=>{const y=i!=null&&i.idGenerator?i.idGenerator(p):nh(),E=new AbortController;let x,D;function U(R){D=R,E.abort()}const j=async function(){var w,T;let R;try{let P=(w=i==null?void 0:i.condition)==null?void 0:w.call(i,p,{getState:g,extra:h});if(mO(P)&&(P=await P),P===!1||E.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const F=new Promise((V,Y)=>{x=()=>{Y({name:"AbortError",message:D||"Aborted"})},E.signal.addEventListener("abort",x)});m(s(y,p,(T=i==null?void 0:i.getPendingMeta)==null?void 0:T.call(i,{requestId:y,arg:p},{getState:g,extra:h}))),R=await Promise.race([F,Promise.resolve(r(p,{dispatch:m,getState:g,extra:h,requestId:y,signal:E.signal,abort:U,rejectWithValue:(V,Y)=>new au(V,Y),fulfillWithValue:(V,Y)=>new ih(V,Y)})).then(V=>{if(V instanceof au)throw V;return V instanceof ih?a(V.payload,y,p,V.meta):a(V,y,p)})])}catch(P){R=P instanceof au?c(null,y,p,P.payload,P.meta):c(P,y,p)}finally{x&&E.signal.removeEventListener("abort",x)}return i&&!i.dispatchConditionRejection&&c.match(R)&&R.meta.condition||m(R),R}();return Object.assign(j,{abort:U,requestId:y,arg:p,unwrap(){return j.then(gO)}})}}return Object.assign(u,{pending:s,rejected:c,fulfilled:a,settled:fO(c,a),typePrefix:e})}return t.withTypes=()=>t,t})();function gO(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function mO(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var _O=Symbol.for("rtk-slice-createasyncthunk");function yO(t,e){return`${t}/${e}`}function vO({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[_O];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(Je(11));typeof process<"u";const c=(typeof i.reducers=="function"?i.reducers(wO()):i.reducers)||{},u=Object.keys(c),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(R,w){const T=typeof R=="string"?R:R.type;if(!T)throw new Error(Je(12));if(T in p.sliceCaseReducersByType)throw new Error(Je(13));return p.sliceCaseReducersByType[T]=w,m},addMatcher(R,w){return p.sliceMatchers.push({matcher:R,reducer:w}),m},exposeAction(R,w){return p.actionCreators[R]=w,m},exposeCaseReducer(R,w){return p.sliceCaseReducersByName[R]=w,m}};u.forEach(R=>{const w=c[R],T={reducerName:R,type:yO(a,R),createNotation:typeof i.reducers=="function"};EO(w)?OO(T,w,m,e):SO(T,w,m)});function g(){const[R={},w=[],T=void 0]=typeof i.extraReducers=="function"?rh(i.extraReducers):[i.extraReducers],P={...R,...p.sliceCaseReducersByType};return uO(i.initialState,F=>{for(let V in P)F.addCase(V,P[V]);for(let V of p.sliceMatchers)F.addMatcher(V.matcher,V.reducer);for(let V of w)F.addMatcher(V.matcher,V.reducer);T&&F.addDefaultCase(T)})}const h=R=>R,y=new Map;let E;function x(R,w){return E||(E=g()),E(R,w)}function D(){return E||(E=g()),E.getInitialState()}function U(R,w=!1){function T(F){let V=F[R];return typeof V>"u"&&w&&(V=D()),V}function P(F=h){const V=th(y,w,{insert:()=>new WeakMap});return th(V,F,{insert:()=>{const Y={};for(const[b,G]of Object.entries(i.selectors??{}))Y[b]=bO(G,F,D,w);return Y}})}return{reducerPath:R,getSelectors:P,get selectors(){return P(T)},selectSlice:T}}const j={name:a,reducer:x,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:D,...U(s),injectInto(R,{reducerPath:w,...T}={}){const P=w??s;return R.inject({reducerPath:P,reducer:x},T),{...j,...U(P,!0)}}};return j}}function bO(t,e,r,i){function a(s,...c){let u=e(s);return typeof u>"u"&&i&&(u=r()),t(u,...c)}return a.unwrapped=t,a}var re=vO();function wO(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function SO({type:t,reducerName:e,createNotation:r},i,a){let s,c;if("reducer"in i){if(r&&!IO(i))throw new Error(Je(17));s=i.reducer,c=i.prepare}else s=i;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,c?lt(t,c):lt(t))}function EO(t){return t._reducerDefinitionType==="asyncThunk"}function IO(t){return t._reducerDefinitionType==="reducerWithPrepare"}function OO({type:t,reducerName:e},r,i,a){if(!a)throw new Error(Je(18));const{payloadCreator:s,fulfilled:c,pending:u,rejected:p,settled:m,options:g}=r,h=a(t,s,g);i.exposeAction(e,h),c&&i.addCase(h.fulfilled,c),u&&i.addCase(h.pending,u),p&&i.addCase(h.rejected,p),m&&i.addMatcher(h.settled,m),i.exposeCaseReducer(e,{fulfilled:c||Os,pending:u||Os,rejected:p||Os,settled:m||Os})}function Os(){}var TO=(t,e)=>{if(typeof t!="function")throw new Error(Je(32))},cu="listenerMiddleware",AO=t=>{let{type:e,actionCreator:r,matcher:i,predicate:a,effect:s}=t;if(e)a=lt(e).match;else if(r)e=r.type,a=r.match;else if(i)a=i;else if(!a)throw new Error(Je(21));return TO(s),{predicate:a,type:e,effect:s}},CO=Object.assign(t=>{const{type:e,predicate:r,effect:i}=AO(t);return{id:nh(),effect:i,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Je(22))}}},{withTypes:()=>CO}),xO=Object.assign(lt(`${cu}/add`),{withTypes:()=>xO});lt(`${cu}/removeAll`);var kO=Object.assign(lt(`${cu}/remove`),{withTypes:()=>kO});function Je(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const wn=_t(t=>t.flagsmith.flags,t=>t),oh=lt("recordingState/resetRecordingState"),NO=lt("recordingState/addNewTabToRecordedTabs"),RO=lt("recordingState/setEndedWithCutoff"),PO=lt("recordingState/editCurrentTabInformation"),DO=lt("recordingState/setStartedBy"),jO=lt("recordingState/setScribeId"),UO=lt("recordingState/setCreateWithId"),LO=lt("recordingState/setLastUnpauseTimestamp"),BO=lt("recordingState/setLastPauseTimestamp"),MO=lt("recordingState/removeFailedScreenshotsAndTabIdFromActions"),FO=lt("recordingState/coalesceContiguousTabSwitchesToLatest"),qO=lt("recordingState/removeMaybeOneTrailingTabSwitchAction"),zO=lt("recordingState/reduceKeyActions"),en=lt("recordingState/mergeWithActionByTempId"),VO=lt("recordingState/appendNewAction"),$O=lt("recordingState/batchAppendActions"),WO=lt("recordingState/appendTranscribedAudio"),YO=lt("recordingState/setAudioError"),HO=lt("recordingState/setEntryPoint"),GO=lt("recordingState/setIsScribeEditMode"),QO=lt("recordingState/updateAction"),KO=lt("recordingState/setIsTranscriberReady"),ZO=lt("recordingState/addDeletedActionId");lt("recordingState/removeDeletedActionId");const sh=lt("recordingState/setDeletedActionIds"),JO=lt("recordingState/setIsTranscribing"),XO=lt("recordingState/setIsTranscribingBeforePause");var uu={exports:{}};(function(t,e){(function(r,i){i(e)})(It,function(r){function i(q,Z){q.super_=Z,q.prototype=Object.create(Z.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}})}function a(q,Z){Object.defineProperty(this,"kind",{value:q,enumerable:!0}),Z&&Z.length&&Object.defineProperty(this,"path",{value:Z,enumerable:!0})}function s(q,Z,Q){s.super_.call(this,"E",q),Object.defineProperty(this,"lhs",{value:Z,enumerable:!0}),Object.defineProperty(this,"rhs",{value:Q,enumerable:!0})}function c(q,Z){c.super_.call(this,"N",q),Object.defineProperty(this,"rhs",{value:Z,enumerable:!0})}function u(q,Z){u.super_.call(this,"D",q),Object.defineProperty(this,"lhs",{value:Z,enumerable:!0})}function p(q,Z,Q){p.super_.call(this,"A",q),Object.defineProperty(this,"index",{value:Z,enumerable:!0}),Object.defineProperty(this,"item",{value:Q,enumerable:!0})}function m(q,Z,Q){var st=q.slice((Q||Z)+1||q.length);return q.length=Z<0?q.length+Z:Z,q.push.apply(q,st),q}function g(q){var Z=typeof q>"u"?"undefined":Mt(q);return Z!=="object"?Z:q===Math?"math":q===null?"null":Array.isArray(q)?"array":Object.prototype.toString.call(q)==="[object Date]"?"date":typeof q.toString=="function"&&/^\/.*\//.test(q.toString())?"regexp":"object"}function h(q,Z,Q,st,dt,ht,k){dt=dt||[],k=k||[];var I=dt.slice(0);if(typeof ht<"u"){if(st){if(typeof st=="function"&&st(I,ht))return;if((typeof st>"u"?"undefined":Mt(st))==="object"){if(st.prefilter&&st.prefilter(I,ht))return;if(st.normalize){var J=st.normalize(I,ht,q,Z);J&&(q=J[0],Z=J[1])}}}I.push(ht)}g(q)==="regexp"&&g(Z)==="regexp"&&(q=q.toString(),Z=Z.toString());var z=typeof q>"u"?"undefined":Mt(q),wt=typeof Z>"u"?"undefined":Mt(Z),kt=z!=="undefined"||k&&k[k.length-1].lhs&&k[k.length-1].lhs.hasOwnProperty(ht),Pt=wt!=="undefined"||k&&k[k.length-1].rhs&&k[k.length-1].rhs.hasOwnProperty(ht);if(!kt&&Pt)Q(new c(I,Z));else if(!Pt&&kt)Q(new u(I,q));else if(g(q)!==g(Z))Q(new s(I,q,Z));else if(g(q)==="date"&&q-Z!==0)Q(new s(I,q,Z));else if(z==="object"&&q!==null&&Z!==null)if(k.filter(function(vt){return vt.lhs===q}).length)q!==Z&&Q(new s(I,q,Z));else{if(k.push({lhs:q,rhs:Z}),Array.isArray(q)){var mt;for(q.length,mt=0;mt<q.length;mt++)mt>=Z.length?Q(new p(I,mt,new u(void 0,q[mt]))):h(q[mt],Z[mt],Q,st,I,mt,k);for(;mt<Z.length;)Q(new p(I,mt,new c(void 0,Z[mt++])))}else{var Wt=Object.keys(q),ye=Object.keys(Z);Wt.forEach(function(vt,he){var Tr=ye.indexOf(vt);Tr>=0?(h(q[vt],Z[vt],Q,st,I,vt,k),ye=m(ye,Tr)):h(q[vt],void 0,Q,st,I,vt,k)}),ye.forEach(function(vt){h(void 0,Z[vt],Q,st,I,vt,k)})}k.length=k.length-1}else q!==Z&&(z==="number"&&isNaN(q)&&isNaN(Z)||Q(new s(I,q,Z)))}function y(q,Z,Q,st){return st=st||[],h(q,Z,function(dt){dt&&st.push(dt)},Q),st.length?st:void 0}function E(q,Z,Q){if(Q.path&&Q.path.length){var st,dt=q[Z],ht=Q.path.length-1;for(st=0;st<ht;st++)dt=dt[Q.path[st]];switch(Q.kind){case"A":E(dt[Q.path[st]],Q.index,Q.item);break;case"D":delete dt[Q.path[st]];break;case"E":case"N":dt[Q.path[st]]=Q.rhs}}else switch(Q.kind){case"A":E(q[Z],Q.index,Q.item);break;case"D":q=m(q,Z);break;case"E":case"N":q[Z]=Q.rhs}return q}function x(q,Z,Q){if(q&&Z&&Q&&Q.kind){for(var st=q,dt=-1,ht=Q.path?Q.path.length-1:0;++dt<ht;)typeof st[Q.path[dt]]>"u"&&(st[Q.path[dt]]=typeof Q.path[dt]=="number"?[]:{}),st=st[Q.path[dt]];switch(Q.kind){case"A":E(Q.path?st[Q.path[dt]]:st,Q.index,Q.item);break;case"D":delete st[Q.path[dt]];break;case"E":case"N":st[Q.path[dt]]=Q.rhs}}}function D(q,Z,Q){if(Q.path&&Q.path.length){var st,dt=q[Z],ht=Q.path.length-1;for(st=0;st<ht;st++)dt=dt[Q.path[st]];switch(Q.kind){case"A":D(dt[Q.path[st]],Q.index,Q.item);break;case"D":dt[Q.path[st]]=Q.lhs;break;case"E":dt[Q.path[st]]=Q.lhs;break;case"N":delete dt[Q.path[st]]}}else switch(Q.kind){case"A":D(q[Z],Q.index,Q.item);break;case"D":q[Z]=Q.lhs;break;case"E":q[Z]=Q.lhs;break;case"N":q=m(q,Z)}return q}function U(q,Z,Q){if(q&&Z&&Q&&Q.kind){var st,dt,ht=q;for(dt=Q.path.length-1,st=0;st<dt;st++)typeof ht[Q.path[st]]>"u"&&(ht[Q.path[st]]={}),ht=ht[Q.path[st]];switch(Q.kind){case"A":D(ht[Q.path[st]],Q.index,Q.item);break;case"D":ht[Q.path[st]]=Q.lhs;break;case"E":ht[Q.path[st]]=Q.lhs;break;case"N":delete ht[Q.path[st]]}}}function j(q,Z,Q){if(q&&Z){var st=function(dt){Q&&!Q(q,Z,dt)||x(q,Z,dt)};h(q,Z,st)}}function R(q){return"color: "+jt[q].color+"; font-weight: bold"}function w(q){var Z=q.kind,Q=q.path,st=q.lhs,dt=q.rhs,ht=q.index,k=q.item;switch(Z){case"E":return[Q.join("."),st,"\u2192",dt];case"N":return[Q.join("."),dt];case"D":return[Q.join(".")];case"A":return[Q.join(".")+"["+ht+"]",k];default:return[]}}function T(q,Z,Q,st){var dt=y(q,Z);try{st?Q.groupCollapsed("diff"):Q.group("diff")}catch{Q.log("diff")}dt?dt.forEach(function(ht){var k=ht.kind,I=w(ht);Q.log.apply(Q,["%c "+jt[k].text,R(k)].concat(xt(I)))}):Q.log("\u2014\u2014 no diff \u2014\u2014");try{Q.groupEnd()}catch{Q.log("\u2014\u2014 diff end \u2014\u2014 ")}}function P(q,Z,Q,st){switch(typeof q>"u"?"undefined":Mt(q)){case"object":return typeof q[st]=="function"?q[st].apply(q,xt(Q)):q[st];case"function":return q(Z);default:return q}}function F(q){var Z=q.timestamp,Q=q.duration;return function(st,dt,ht){var k=["action"];return k.push("%c"+String(st.type)),Z&&k.push("%c@ "+dt),Q&&k.push("%c(in "+ht.toFixed(2)+" ms)"),k.join(" ")}}function V(q,Z){var Q=Z.logger,st=Z.actionTransformer,dt=Z.titleFormatter,ht=dt===void 0?F(Z):dt,k=Z.collapsed,I=Z.colors,J=Z.level,z=Z.diff,wt=typeof Z.titleFormatter>"u";q.forEach(function(kt,Pt){var mt=kt.started,Wt=kt.startedTime,ye=kt.action,vt=kt.prevState,he=kt.error,Tr=kt.took,Ee=kt.nextState,se=q[Pt+1];se&&(Ee=se.prevState,Tr=se.started-mt);var Yt=st(ye),Ar=typeof k=="function"?k(function(){return Ee},ye,kt):k,Ni=Ot(Wt),Pe=I.title?"color: "+I.title(Yt)+";":"",Vr=["color: gray; font-weight: lighter;"];Vr.push(Pe),Z.timestamp&&Vr.push("color: gray; font-weight: lighter;"),Z.duration&&Vr.push("color: gray; font-weight: lighter;");var f=ht(Yt,Ni,Tr);try{Ar?I.title&&wt?Q.groupCollapsed.apply(Q,["%c "+f].concat(Vr)):Q.groupCollapsed(f):I.title&&wt?Q.group.apply(Q,["%c "+f].concat(Vr)):Q.group(f)}catch{Q.log(f)}var v=P(J,Yt,[vt],"prevState"),O=P(J,Yt,[Yt],"action"),B=P(J,Yt,[he,vt],"error"),H=P(J,Yt,[Ee],"nextState");if(v)if(I.prevState){var X="color: "+I.prevState(vt)+"; font-weight: bold";Q[v]("%c prev state",X,vt)}else Q[v]("prev state",vt);if(O)if(I.action){var at="color: "+I.action(Yt)+"; font-weight: bold";Q[O]("%c action    ",at,Yt)}else Q[O]("action    ",Yt);if(he&&B)if(I.error){var Vt="color: "+I.error(he,vt)+"; font-weight: bold;";Q[B]("%c error     ",Vt,he)}else Q[B]("error     ",he);if(H)if(I.nextState){var ue="color: "+I.nextState(Ee)+"; font-weight: bold";Q[H]("%c next state",ue,Ee)}else Q[H]("next state",Ee);z&&T(vt,Ee,Q,Ar);try{Q.groupEnd()}catch{Q.log("\u2014\u2014 log end \u2014\u2014")}})}function Y(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=Object.assign({},ze,q),Q=Z.logger,st=Z.stateTransformer,dt=Z.errorTransformer,ht=Z.predicate,k=Z.logErrors,I=Z.diffPredicate;if(typeof Q>"u")return function(){return function(z){return function(wt){return z(wt)}}};if(q.getState&&q.dispatch)return console.error(`[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:
// Logger with default options
import { logger } from 'redux-logger'
const store = createStore(
  reducer,
  applyMiddleware(logger)
)
// Or you can create your own logger with custom options http://bit.ly/redux-logger-options
import createLogger from 'redux-logger'
const logger = createLogger({
  // ...options
});
const store = createStore(
  reducer,
  applyMiddleware(logger)
)
`),function(){return function(z){return function(wt){return z(wt)}}};var J=[];return function(z){var wt=z.getState;return function(kt){return function(Pt){if(typeof ht=="function"&&!ht(wt,Pt))return kt(Pt);var mt={};J.push(mt),mt.started=Tt.now(),mt.startedTime=new Date,mt.prevState=st(wt()),mt.action=Pt;var Wt=void 0;if(k)try{Wt=kt(Pt)}catch(vt){mt.error=dt(vt)}else Wt=kt(Pt);mt.took=Tt.now()-mt.started,mt.nextState=st(wt());var ye=Z.diff&&typeof I=="function"?I(wt,Pt):Z.diff;if(V(J,Object.assign({},Z,{diff:ye})),J.length=0,mt.error)throw mt.error;return Wt}}}}var b,G,et=function(q,Z){return new Array(Z+1).join(q)},ct=function(q,Z){return et("0",Z-q.toString().length)+q},Ot=function(q){return ct(q.getHours(),2)+":"+ct(q.getMinutes(),2)+":"+ct(q.getSeconds(),2)+"."+ct(q.getMilliseconds(),3)},Tt=typeof performance<"u"&&performance!==null&&typeof performance.now=="function"?performance:Date,Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},xt=function(q){if(Array.isArray(q)){for(var Z=0,Q=Array(q.length);Z<q.length;Z++)Q[Z]=q[Z];return Q}return Array.from(q)},yt=[];b=(typeof It>"u"?"undefined":Mt(It))==="object"&&It?It:typeof window<"u"?window:{},G=b.DeepDiff,G&&yt.push(function(){typeof G<"u"&&b.DeepDiff===y&&(b.DeepDiff=G,G=void 0)}),i(s,a),i(c,a),i(u,a),i(p,a),Object.defineProperties(y,{diff:{value:y,enumerable:!0},observableDiff:{value:h,enumerable:!0},applyDiff:{value:j,enumerable:!0},applyChange:{value:x,enumerable:!0},revertChange:{value:U,enumerable:!0},isConflict:{value:function(){return typeof G<"u"},enumerable:!0},noConflict:{value:function(){return yt&&(yt.forEach(function(q){q()}),yt=null),y},enumerable:!0}});var jt={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},ze={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(q){return q},actionTransformer:function(q){return q},errorTransformer:function(q){return q},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},_e=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=q.dispatch,Q=q.getState;return typeof Z=="function"||typeof Q=="function"?Y()({dispatch:Z,getState:Q}):void console.error(`
[redux-logger v3] BREAKING CHANGE
[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.
[redux-logger v3] Change
[redux-logger v3] import createLogger from 'redux-logger'
[redux-logger v3] to
[redux-logger v3] import { createLogger } from 'redux-logger'
`)};r.defaults=ze,r.createLogger=Y,r.logger=_e,r.default=_e,Object.defineProperty(r,"__esModule",{value:!0})})})(uu,uu.exports);var tT=uu.exports,lu="persist:",pu="persist/FLUSH",Ts="persist/REHYDRATE",fu="persist/PAUSE",du="persist/PERSIST",hu="persist/PURGE",gu="persist/REGISTER",eT=-1;function As(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?As=function(e){return typeof e}:As=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},As(t)}function ah(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,i)}return r}function rT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ah(r,!0).forEach(function(i){nT(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ah(r).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function nT(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iT(t,e,r,i){i.debug;var a=rT({},r);return t&&As(t)==="object"&&Object.keys(t).forEach(function(s){s!=="_persist"&&e[s]===r[s]&&(a[s]=t[s])}),a}function oT(t){var e=t.blacklist||null,r=t.whitelist||null,i=t.transforms||[],a=t.throttle||0,s="".concat(t.keyPrefix!==void 0?t.keyPrefix:lu).concat(t.key),c=t.storage,u;t.serialize===!1?u=function(T){return T}:typeof t.serialize=="function"?u=t.serialize:u=sT;var p=t.writeFailHandler||null,m={},g={},h=[],y=null,E=null,x=function(T){Object.keys(T).forEach(function(P){j(P)&&m[P]!==T[P]&&h.indexOf(P)===-1&&h.push(P)}),Object.keys(m).forEach(function(P){T[P]===void 0&&j(P)&&h.indexOf(P)===-1&&m[P]!==void 0&&h.push(P)}),y===null&&(y=setInterval(D,a)),m=T};function D(){if(h.length===0){y&&clearInterval(y),y=null;return}var T=h.shift(),P=i.reduce(function(F,V){return V.in(F,T,m)},m[T]);if(P!==void 0)try{g[T]=u(P)}catch(F){console.error("redux-persist/createPersistoid: error serializing state",F)}else delete g[T];h.length===0&&U()}function U(){Object.keys(g).forEach(function(T){m[T]===void 0&&delete g[T]}),E=c.setItem(s,u(g)).catch(R)}function j(T){return!(r&&r.indexOf(T)===-1&&T!=="_persist"||e&&e.indexOf(T)!==-1)}function R(T){p&&p(T)}var w=function(){for(;h.length!==0;)D();return E||Promise.resolve()};return{update:x,flush:w}}function sT(t){return JSON.stringify(t)}function aT(t){var e=t.transforms||[],r="".concat(t.keyPrefix!==void 0?t.keyPrefix:lu).concat(t.key),i=t.storage;t.debug;var a;return t.deserialize===!1?a=function(s){return s}:typeof t.deserialize=="function"?a=t.deserialize:a=cT,i.getItem(r).then(function(s){if(s)try{var c={},u=a(s);return Object.keys(u).forEach(function(p){c[p]=e.reduceRight(function(m,g){return g.out(m,p,u)},a(u[p]))}),c}catch(p){throw p}else return})}function cT(t){return JSON.parse(t)}function uT(t){var e=t.storage,r="".concat(t.keyPrefix!==void 0?t.keyPrefix:lu).concat(t.key);return e.removeItem(r,lT)}function lT(t){}function ch(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,i)}return r}function rn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ch(r,!0).forEach(function(i){pT(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ch(r).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function pT(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fT(t,e){if(t==null)return{};var r=dT(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function dT(t,e){if(t==null)return{};var r={},i=Object.keys(t),a,s;for(s=0;s<i.length;s++)a=i[s],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}var hT=5e3;function gT(t,e){var r=t.version!==void 0?t.version:eT;t.debug;var i=t.stateReconciler===void 0?iT:t.stateReconciler,a=t.getStoredState||aT,s=t.timeout!==void 0?t.timeout:hT,c=null,u=!1,p=!0,m=function(g){return g._persist.rehydrated&&c&&!p&&c.update(g),g};return function(g,h){var y=g||{},E=y._persist,x=fT(y,["_persist"]),D=x;if(h.type===du){var U=!1,j=function(V,Y){U||(h.rehydrate(t.key,V,Y),U=!0)};if(s&&setTimeout(function(){!U&&j(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(t.key,'"')))},s),p=!1,c||(c=oT(t)),E)return rn({},e(D,h),{_persist:E});if(typeof h.rehydrate!="function"||typeof h.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return h.register(t.key),a(t).then(function(V){var Y=t.migrate||function(b,G){return Promise.resolve(b)};Y(V,r).then(function(b){j(b)},function(b){j(void 0,b)})},function(V){j(void 0,V)}),rn({},e(D,h),{_persist:{version:r,rehydrated:!1}})}else{if(h.type===hu)return u=!0,h.result(uT(t)),rn({},e(D,h),{_persist:E});if(h.type===pu)return h.result(c&&c.flush()),rn({},e(D,h),{_persist:E});if(h.type===fu)p=!0;else if(h.type===Ts){if(u)return rn({},D,{_persist:rn({},E,{rehydrated:!0})});if(h.key===t.key){var R=e(D,h),w=h.payload,T=i!==!1&&w!==void 0?i(w,g,R,t):R,P=rn({},T,{_persist:rn({},E,{rehydrated:!0})});return m(P)}}}if(!E)return e(g,h);var F=e(D,h);return F===D?g:m(rn({},F,{_persist:E}))}}function yr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var uh=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),mu=function(){return Math.random().toString(36).substring(7).split("").join(".")},lh={INIT:"@@redux/INIT"+mu(),REPLACE:"@@redux/REPLACE"+mu(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+mu()}};function mT(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function ph(t,e,r){var i;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(yr(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(yr(1));return r(ph)(t,e)}if(typeof t!="function")throw new Error(yr(2));var a=t,s=e,c=[],u=c,p=!1;function m(){u===c&&(u=c.slice())}function g(){if(p)throw new Error(yr(3));return s}function h(D){if(typeof D!="function")throw new Error(yr(4));if(p)throw new Error(yr(5));var U=!0;return m(),u.push(D),function(){if(U){if(p)throw new Error(yr(6));U=!1,m();var j=u.indexOf(D);u.splice(j,1),c=null}}}function y(D){if(!mT(D))throw new Error(yr(7));if(typeof D.type>"u")throw new Error(yr(8));if(p)throw new Error(yr(9));try{p=!0,s=a(s,D)}finally{p=!1}for(var U=c=u,j=0;j<U.length;j++){var R=U[j];R()}return D}function E(D){if(typeof D!="function")throw new Error(yr(10));a=D,y({type:lh.REPLACE})}function x(){var D,U=h;return D={subscribe:function(j){if(typeof j!="object"||j===null)throw new Error(yr(11));function R(){j.next&&j.next(g())}R();var w=U(R);return{unsubscribe:w}}},D[uh]=function(){return this},D}return y({type:lh.INIT}),i={dispatch:y,subscribe:h,getState:g,replaceReducer:E},i[uh]=x,i}function fh(t){return vT(t)||yT(t)||_T()}function _T(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function yT(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function vT(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function dh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,i)}return r}function _u(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dh(r,!0).forEach(function(i){bT(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dh(r).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function bT(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var hh={registry:[],bootstrapped:!1},wT=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hh,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case gu:return _u({},t,{registry:[].concat(fh(t.registry),[e.key])});case Ts:var r=t.registry.indexOf(e.key),i=fh(t.registry);return i.splice(r,1),_u({},t,{registry:i,bootstrapped:i.length===0});default:return t}};function ST(t,e,r){var i=r||!1,a=ph(wT,hh,e&&e.enhancer?e.enhancer:void 0),s=function(p){a.dispatch({type:gu,key:p})},c=function(p,m,g){var h={type:Ts,payload:m,err:g,key:p};t.dispatch(h),a.dispatch(h),i&&u.getState().bootstrapped&&(i(),i=!1)},u=_u({},a,{purge:function(){var p=[];return t.dispatch({type:hu,result:function(m){p.push(m)}}),Promise.all(p)},flush:function(){var p=[];return t.dispatch({type:pu,result:function(m){p.push(m)}}),Promise.all(p)},pause:function(){t.dispatch({type:fu})},persist:function(){t.dispatch({type:du,register:s,rehydrate:c})}});return e&&e.manualPersist||u.persist(),u}var yu={},Cs={};Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.default=IT;function ET(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IT(t){return{getItem:function(e){return new Promise(function(r,i){chrome.storage[t].get(e,function(a){chrome.runtime.lastError==null?r(a[e]):i()})})},removeItem:function(e){return new Promise(function(r,i){chrome.storage[t].remove(e,function(){chrome.runtime.lastError==null?r():i()})})},setItem:function(e,r){return new Promise(function(i,a){chrome.storage[t].set(ET({},e,r),function(){chrome.runtime.lastError==null?i():a()})})}}}Object.defineProperty(yu,"__esModule",{value:!0});var OT=Cs,TT=AT(OT);function AT(t){return t&&t.__esModule?t:{default:t}}yu.default=(0,TT.default)("local");var vu={};Object.defineProperty(vu,"__esModule",{value:!0});var CT=Cs,xT=kT(CT);function kT(t){return t&&t.__esModule?t:{default:t}}vu.default=(0,xT.default)("sync");var NT=yu,RT=gh(NT),PT=vu,DT=gh(PT);function gh(t){return t&&t.__esModule?t:{default:t}}var jT={localStorage:RT.default,syncStorage:DT.default};const ve=lt("actions/replaceStore"),mh=Object.prototype.toString;function _h(t){switch(mh.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Ki(t,Error)}}function mi(t,e){return mh.call(t)===`[object ${e}]`}function UT(t){return mi(t,"ErrorEvent")}function LT(t){return mi(t,"DOMError")}function BT(t){return mi(t,"DOMException")}function xs(t){return mi(t,"String")}function yh(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function MT(t){return t===null||yh(t)||typeof t!="object"&&typeof t!="function"}function ks(t){return mi(t,"Object")}function vh(t){return typeof Event<"u"&&Ki(t,Event)}function FT(t){return typeof Element<"u"&&Ki(t,Element)}function qT(t){return mi(t,"RegExp")}function Ns(t){return!!(t&&t.then&&typeof t.then=="function")}function zT(t){return ks(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function VT(t){return typeof t=="number"&&t!==t}function Ki(t,e){try{return t instanceof e}catch{return!1}}function bh(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function _i(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function $T(t,e){if(!Array.isArray(t))return"";const r=[];for(let i=0;i<t.length;i++){const a=t[i];try{bh(a)?r.push("[VueViewModel]"):r.push(String(a))}catch{r.push("[value cannot be serialized]")}}return r.join(e)}function WT(t,e,r=!1){return xs(t)?qT(e)?e.test(t):xs(e)?r?t===e:t.includes(e):!1:!1}function YT(t,e=[],r=!1){return e.some(i=>WT(t,i,r))}function Rs(t){return t&&t.Math==Math?t:void 0}const He=typeof globalThis=="object"&&Rs(globalThis)||typeof window=="object"&&Rs(window)||typeof self=="object"&&Rs(self)||typeof global=="object"&&Rs(global)||function(){return this}()||{};function wh(){return He}function Sh(t,e,r){const i=r||He,a=i.__SENTRY__=i.__SENTRY__||{};return a[t]||(a[t]=e())}const bu=wh(),HT=80;function Eh(t,e={}){if(!t)return"<unknown>";try{let r=t;const i=5,a=[];let s=0,c=0;const u=" > ",p=u.length;let m;const g=Array.isArray(e)?e:e.keyAttrs,h=!Array.isArray(e)&&e.maxStringLength||HT;for(;r&&s++<i&&(m=GT(r,g),!(m==="html"||s>1&&c+a.length*p+m.length>=h));)a.push(m),c+=m.length,r=r.parentNode;return a.reverse().join(u)}catch{return"<unknown>"}}function GT(t,e){const r=t,i=[];let a,s,c,u,p;if(!r||!r.tagName)return"";if(bu.HTMLElement&&r instanceof HTMLElement&&r.dataset&&r.dataset.sentryComponent)return r.dataset.sentryComponent;i.push(r.tagName.toLowerCase());const m=e&&e.length?e.filter(h=>r.getAttribute(h)).map(h=>[h,r.getAttribute(h)]):null;if(m&&m.length)m.forEach(h=>{i.push(`[${h[0]}="${h[1]}"]`)});else if(r.id&&i.push(`#${r.id}`),a=r.className,a&&xs(a))for(s=a.split(/\s+/),p=0;p<s.length;p++)i.push(`.${s[p]}`);const g=["aria-label","type","name","title","alt"];for(p=0;p<g.length;p++)c=g[p],u=r.getAttribute(c),u&&i.push(`[${c}="${u}"]`);return i.join("")}function QT(){try{return bu.document.location.href}catch{return""}}function KT(t){if(!bu.HTMLElement)return null;let e=t;const r=5;for(let i=0;i<r;i++){if(!e)return null;if(e instanceof HTMLElement&&e.dataset.sentryComponent)return e.dataset.sentryComponent;e=e.parentNode}return null}const wu=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ZT="Sentry Logger ",Su=["debug","info","warn","error","log","assert","trace"],Eu={};function Iu(t){if(!("console"in He))return t();const e=He.console,r={},i=Object.keys(Eu);i.forEach(a=>{const s=Eu[a];r[a]=e[a],e[a]=s});try{return t()}finally{i.forEach(a=>{e[a]=r[a]})}}function JT(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return wu?Su.forEach(r=>{e[r]=(...i)=>{t&&Iu(()=>{He.console[r](`${ZT}[${r}]:`,...i)})}}):Su.forEach(r=>{e[r]=()=>{}}),e}const Fr=JT();function XT(t,e,r){if(!(e in t))return;const i=t[e],a=r(i);typeof a=="function"&&Ih(a,i),t[e]=a}function Ou(t,e,r){try{Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}catch{wu&&Fr.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Ih(t,e){try{const r=e.prototype||{};t.prototype=e.prototype=r,Ou(t,"__sentry_original__",e)}catch{}}function tA(t){return t.__sentry_original__}function eA(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}function Oh(t){if(_h(t))return{message:t.message,name:t.name,stack:t.stack,...Ah(t)};if(vh(t)){const e={type:t.type,target:Th(t.target),currentTarget:Th(t.currentTarget),...Ah(t)};return typeof CustomEvent<"u"&&Ki(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function Th(t){try{return FT(t)?Eh(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Ah(t){if(typeof t=="object"&&t!==null){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}else return{}}function rA(t,e=40){const r=Object.keys(Oh(t));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=e)return _i(r[0],e);for(let i=r.length;i>0;i--){const a=r.slice(0,i).join(", ");if(!(a.length>e))return i===r.length?a:_i(a,e)}return""}function Sn(t){return Tu(t,new Map)}function Tu(t,e){if(nA(t)){const r=e.get(t);if(r!==void 0)return r;const i={};e.set(t,i);for(const a of Object.keys(t))typeof t[a]<"u"&&(i[a]=Tu(t[a],e));return i}if(Array.isArray(t)){const r=e.get(t);if(r!==void 0)return r;const i=[];return e.set(t,i),t.forEach(a=>{i.push(Tu(a,e))}),i}return t}function nA(t){if(!ks(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}const Ch=50,xh=/\(error: (.*)\)/,kh=/captureMessage|captureException/;function Nh(...t){const e=t.sort((r,i)=>r[0]-i[0]).map(r=>r[1]);return(r,i=0)=>{const a=[],s=r.split(`
`);for(let c=i;c<s.length;c++){const u=s[c];if(u.length>1024)continue;const p=xh.test(u)?u.replace(xh,"$1"):u;if(!p.match(/\S*Error: /)){for(const m of e){const g=m(p);if(g){a.push(g);break}}if(a.length>=Ch)break}}return oA(a)}}function iA(t){return Array.isArray(t)?Nh(...t):t}function oA(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(e[e.length-1].function||"")&&e.pop(),e.reverse(),kh.test(e[e.length-1].function||"")&&(e.pop(),kh.test(e[e.length-1].function||"")&&e.pop()),e.slice(0,Ch).map(r=>({...r,filename:r.filename||e[e.length-1].filename,function:r.function||"?"}))}const Au="<anonymous>";function Rh(t){try{return!t||typeof t!="function"?Au:t.name||Au}catch{return Au}}function vr(){const t=He,e=t.crypto||t.msCrypto;let r=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(r=()=>{const i=new Uint8Array(1);return e.getRandomValues(i),i[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,i=>(i^(r()&15)>>i/4).toString(16))}function Ph(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function sA(t){const{message:e,event_id:r}=t;if(e)return e;const i=Ph(t);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||r||"<unknown>":r||"<unknown>"}function aA(t,e,r){const i=t.exception=t.exception||{},a=i.values=i.values||[],s=a[0]=a[0]||{};s.value||(s.value=e||""),s.type||(s.type=r||"Error")}function Dh(t,e){const r=Ph(t);if(!r)return;const i={type:"generic",handled:!0},a=r.mechanism;if(r.mechanism={...i,...a,...e},e&&"data"in e){const s={...a&&a.data,...e.data};r.mechanism.data=s}}function cA(t){if(t&&t.__sentry_captured__)return!0;try{Ou(t,"__sentry_captured__",!0)}catch{}return!1}function jh(t){return Array.isArray(t)?t:[t]}function uA(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function r(a){if(t)return e.has(a)?!0:(e.add(a),!1);for(let s=0;s<e.length;s++)if(e[s]===a)return!0;return e.push(a),!1}function i(a){if(t)e.delete(a);else for(let s=0;s<e.length;s++)if(e[s]===a){e.splice(s,1);break}}return[r,i]}function En(t,e=100,r=1/0){try{return Cu("",t,e,r)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function Uh(t,e=3,r=100*1024){const i=En(t,e);return dA(i)>r?Uh(t,e-1,r):i}function Cu(t,e,r=1/0,i=1/0,a=uA()){const[s,c]=a;if(e==null||["number","boolean","string"].includes(typeof e)&&!VT(e))return e;const u=lA(t,e);if(!u.startsWith("[object "))return u;if(e.__sentry_skip_normalization__)return e;const p=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:r;if(p===0)return u.replace("object ","");if(s(e))return"[Circular ~]";const m=e;if(m&&typeof m.toJSON=="function")try{const E=m.toJSON();return Cu("",E,p-1,i,a)}catch{}const g=Array.isArray(e)?[]:{};let h=0;const y=Oh(e);for(const E in y){if(!Object.prototype.hasOwnProperty.call(y,E))continue;if(h>=i){g[E]="[MaxProperties ~]";break}const x=y[E];g[E]=Cu(E,x,p-1,i,a),h++}return c(e),g}function lA(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(bh(e))return"[VueViewModel]";if(zT(e))return"[SyntheticEvent]";if(typeof e=="number"&&e!==e)return"[NaN]";if(typeof e=="function")return`[Function: ${Rh(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const r=pA(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}}function pA(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function fA(t){return~-encodeURI(t).split(/%..|./).length}function dA(t){return fA(JSON.stringify(t))}var nn;(function(t){t[t.PENDING=0]="PENDING";const e=1;t[t.RESOLVED=e]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(nn||(nn={}));function hA(t){return new Ur(e=>{e(t)})}function gA(t){return new Ur((e,r)=>{r(t)})}class Ur{constructor(e){Ur.prototype.__init.call(this),Ur.prototype.__init2.call(this),Ur.prototype.__init3.call(this),Ur.prototype.__init4.call(this),this._state=nn.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(r){this._reject(r)}}then(e,r){return new Ur((i,a)=>{this._handlers.push([!1,s=>{if(!e)i(s);else try{i(e(s))}catch(c){a(c)}},s=>{if(!r)a(s);else try{i(r(s))}catch(c){a(c)}}]),this._executeHandlers()})}catch(e){return this.then(r=>r,e)}finally(e){return new Ur((r,i)=>{let a,s;return this.then(c=>{s=!1,a=c,e&&e()},c=>{s=!0,a=c,e&&e()}).then(()=>{if(s){i(a);return}r(a)})})}__init(){this._resolve=e=>{this._setResult(nn.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(nn.REJECTED,e)}}__init3(){this._setResult=(e,r)=>{if(this._state===nn.PENDING){if(Ns(r)){r.then(this._resolve,this._reject);return}this._state=e,this._value=r,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===nn.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(r=>{r[0]||(this._state===nn.RESOLVED&&r[1](this._value),this._state===nn.REJECTED&&r[2](this._value),r[0]=!0)})}}}const Lh=1e3;function Zi(){return Date.now()/Lh}function mA(){const{performance:t}=He;if(!t||!t.now)return Zi;const e=Date.now()-t.now(),r=t.timeOrigin==null?e:t.timeOrigin;return()=>(r+t.now())/Lh}const Bh=mA();(()=>{const{performance:t}=He;if(!t||!t.now)return;const e=3600*1e3,r=t.now(),i=Date.now(),a=t.timeOrigin?Math.abs(t.timeOrigin+r-i):e,s=a<e,c=t.timing&&t.timing.navigationStart,u=typeof c=="number"?Math.abs(c+r-i):e,p=u<e;return s||p?a<=u?t.timeOrigin:c:i})();const Ji=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ps="production";function xu(){return Sh("globalEventProcessors",()=>[])}function _A(t){xu().push(t)}function Ds(t,e,r,i=0){return new Ur((a,s)=>{const c=t[i];if(e===null||typeof c!="function")a(e);else{const u=c({...e},r);Ji&&c.id&&u===null&&Fr.log(`Event processor "${c.id}" dropped event`),Ns(u)?u.then(p=>Ds(t,p,r,i+1).then(a)).then(null,s):Ds(t,u,r,i+1).then(a).then(null,s)}})}function Mh(t){const e=Bh(),r={sid:vr(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>yA(r)};return t&&yi(r,t),r}function yi(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Bh(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:vr()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Fh(t,e){let r={};e?r={status:e}:t.status==="ok"&&(r={status:"exited"}),yi(t,r)}function yA(t){return Sn({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const vA=1;function bA(t){const{spanId:e,traceId:r}=t.spanContext(),{data:i,op:a,parent_span_id:s,status:c,tags:u,origin:p}=Xi(t);return Sn({data:i,op:a,parent_span_id:s,span_id:e,status:c,tags:u,trace_id:r,origin:p})}function Xi(t){return wA(t)?t.getSpanJSON():typeof t.toJSON=="function"?t.toJSON():{}}function wA(t){return typeof t.getSpanJSON=="function"}function SA(t){const{traceFlags:e}=t.spanContext();return!!(e&vA)}function EA(t,e,r,i,a,s){const{normalizeDepth:c=3,normalizeMaxBreadth:u=1e3}=t,p={...e,event_id:e.event_id||r.event_id||vr(),timestamp:e.timestamp||Zi()},m=r.integrations||t.integrations.map(D=>D.name);IA(p,t),AA(p,m),e.type===void 0&&OA(p,t.stackParser);const g=xA(i,r.captureContext);r.mechanism&&Dh(p,r.mechanism);const h=a&&a.getEventProcessors?a.getEventProcessors():[],y=QA().getScopeData();if(s){const D=s.getScopeData();Gh(y,D)}if(g){const D=g.getScopeData();Gh(y,D)}const E=[...r.attachments||[],...y.attachments];E.length&&(r.attachments=E),Hh(p,y);const x=[...h,...xu(),...y.eventProcessors];return Ds(x,p,r).then(D=>(D&&TA(D),typeof c=="number"&&c>0?CA(D,c,u):D))}function IA(t,e){const{environment:r,release:i,dist:a,maxValueLength:s=250}=e;"environment"in t||(t.environment="environment"in e?r:Ps),t.release===void 0&&i!==void 0&&(t.release=i),t.dist===void 0&&a!==void 0&&(t.dist=a),t.message&&(t.message=_i(t.message,s));const c=t.exception&&t.exception.values&&t.exception.values[0];c&&c.value&&(c.value=_i(c.value,s));const u=t.request;u&&u.url&&(u.url=_i(u.url,s))}const qh=new WeakMap;function OA(t,e){const r=He._sentryDebugIds;if(!r)return;let i;const a=qh.get(e);a?i=a:(i=new Map,qh.set(e,i));const s=Object.keys(r).reduce((c,u)=>{let p;const m=i.get(u);m?p=m:(p=e(u),i.set(u,p));for(let g=p.length-1;g>=0;g--){const h=p[g];if(h.filename){c[h.filename]=r[u];break}}return c},{});try{t.exception.values.forEach(c=>{c.stacktrace.frames.forEach(u=>{u.filename&&(u.debug_id=s[u.filename])})})}catch{}}function TA(t){const e={};try{t.exception.values.forEach(i=>{i.stacktrace.frames.forEach(a=>{a.debug_id&&(a.abs_path?e[a.abs_path]=a.debug_id:a.filename&&(e[a.filename]=a.debug_id),delete a.debug_id)})})}catch{}if(Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const r=t.debug_meta.images;Object.keys(e).forEach(i=>{r.push({type:"sourcemap",code_file:i,debug_id:e[i]})})}function AA(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function CA(t,e,r){if(!t)return null;const i={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(a=>({...a,...a.data&&{data:En(a.data,e,r)}}))},...t.user&&{user:En(t.user,e,r)},...t.contexts&&{contexts:En(t.contexts,e,r)},...t.extra&&{extra:En(t.extra,e,r)}};return t.contexts&&t.contexts.trace&&i.contexts&&(i.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(i.contexts.trace.data=En(t.contexts.trace.data,e,r))),t.spans&&(i.spans=t.spans.map(a=>{const s=Xi(a).data;return s&&(a.data=En(s,e,r)),a})),i}function xA(t,e){if(!e)return t;const r=t?t.clone():new ln;return r.update(e),r}function kA(t){if(t)return NA(t)?{captureContext:t}:PA(t)?{captureContext:t}:t}function NA(t){return t instanceof ln||typeof t=="function"}const RA=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function PA(t){return Object.keys(t).some(e=>RA.includes(e))}function Kt(t,e){return br().captureException(t,kA(e))}function DA(t,e){const r=typeof e=="string"?e:void 0,i=typeof e!="string"?{captureContext:e}:void 0;return br().captureMessage(t,r,i)}function jA(t,e){return br().captureEvent(t,e)}function UA(t){br().configureScope(t)}function zh(t,e){br().addBreadcrumb(t,e)}function LA(t,e){br().setTag(t,e)}function BA(t){br().setUser(t)}function MA(...t){const e=br();if(t.length===2){const[r,i]=t;return r?e.withScope(()=>(e.getStackTop().scope=r,i(r))):e.withScope(i)}return e.withScope(t[0])}function js(){return br().getClient()}function to(){return br().getScope()}function FA(t){const e=js(),r=Ls(),i=to(),{release:a,environment:s=Ps}=e&&e.getOptions()||{},{userAgent:c}=He.navigator||{},u=Mh({release:a,environment:s,user:i.getUser()||r.getUser(),...c&&{userAgent:c},...t}),p=r.getSession();return p&&p.status==="ok"&&yi(p,{status:"exited"}),Vh(),r.setSession(u),i.setSession(u),u}function Vh(){const t=Ls(),e=to(),r=e.getSession()||t.getSession();r&&Fh(r),$h(),t.setSession(),e.setSession()}function $h(){const t=Ls(),e=to(),r=js(),i=e.getSession()||t.getSession();i&&r&&r.captureSession&&r.captureSession(i)}function qA(t=!1){if(t){Vh();return}$h()}function Wh(t){return t.transaction}function Yh(t,e,r){const i=e.getOptions(),{publicKey:a}=e.getDsn()||{},{segment:s}=r&&r.getUser()||{},c=Sn({environment:i.environment||Ps,release:i.release,user_segment:s,public_key:a,trace_id:t});return e.emit&&e.emit("createDsc",c),c}function zA(t){const e=js();if(!e)return{};const r=Yh(Xi(t).trace_id||"",e,to()),i=Wh(t);if(!i)return r;const a=i&&i._frozenDynamicSamplingContext;if(a)return a;const{sampleRate:s,source:c}=i.metadata;s!=null&&(r.sample_rate=`${s}`);const u=Xi(i);return c&&c!=="url"&&(r.transaction=u.description),r.sampled=String(SA(i)),e.emit&&e.emit("createDsc",r),r}function Hh(t,e){const{fingerprint:r,span:i,breadcrumbs:a,sdkProcessingMetadata:s}=e;VA(t,e),i&&YA(t,i),HA(t,r),$A(t,a),WA(t,s)}function Gh(t,e){const{extra:r,tags:i,user:a,contexts:s,level:c,sdkProcessingMetadata:u,breadcrumbs:p,fingerprint:m,eventProcessors:g,attachments:h,propagationContext:y,transactionName:E,span:x}=e;eo(t,"extra",r),eo(t,"tags",i),eo(t,"user",a),eo(t,"contexts",s),eo(t,"sdkProcessingMetadata",u),c&&(t.level=c),E&&(t.transactionName=E),x&&(t.span=x),p.length&&(t.breadcrumbs=[...t.breadcrumbs,...p]),m.length&&(t.fingerprint=[...t.fingerprint,...m]),g.length&&(t.eventProcessors=[...t.eventProcessors,...g]),h.length&&(t.attachments=[...t.attachments,...h]),t.propagationContext={...t.propagationContext,...y}}function eo(t,e,r){if(r&&Object.keys(r).length){t[e]={...t[e]};for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[e][i]=r[i])}}function VA(t,e){const{extra:r,tags:i,user:a,contexts:s,level:c,transactionName:u}=e,p=Sn(r);p&&Object.keys(p).length&&(t.extra={...p,...t.extra});const m=Sn(i);m&&Object.keys(m).length&&(t.tags={...m,...t.tags});const g=Sn(a);g&&Object.keys(g).length&&(t.user={...g,...t.user});const h=Sn(s);h&&Object.keys(h).length&&(t.contexts={...h,...t.contexts}),c&&(t.level=c),u&&(t.transaction=u)}function $A(t,e){const r=[...t.breadcrumbs||[],...e];t.breadcrumbs=r.length?r:void 0}function WA(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function YA(t,e){t.contexts={trace:bA(e),...t.contexts};const r=Wh(e);if(r){t.sdkProcessingMetadata={dynamicSamplingContext:zA(e),...t.sdkProcessingMetadata};const i=Xi(r).description;i&&(t.tags={transaction:i,...t.tags})}}function HA(t,e){t.fingerprint=t.fingerprint?jh(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}const GA=100;let ku;class ln{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Qh()}static clone(e){return e?e.clone():new ln}clone(){const e=new ln;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&yi(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this._tags={...this._tags,[e]:r},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const r=typeof e=="function"?e(this):e;if(r instanceof ln){const i=r.getScopeData();this._tags={...this._tags,...i.tags},this._extra={...this._extra,...i.extra},this._contexts={...this._contexts,...i.contexts},i.user&&Object.keys(i.user).length&&(this._user=i.user),i.level&&(this._level=i.level),i.fingerprint.length&&(this._fingerprint=i.fingerprint),r.getRequestSession()&&(this._requestSession=r.getRequestSession()),i.propagationContext&&(this._propagationContext=i.propagationContext)}else if(ks(r)){const i=e;this._tags={...this._tags,...i.tags},this._extra={...this._extra,...i.extra},this._contexts={...this._contexts,...i.contexts},i.user&&(this._user=i.user),i.level&&(this._level=i.level),i.fingerprint&&(this._fingerprint=i.fingerprint),i.requestSession&&(this._requestSession=i.requestSession),i.propagationContext&&(this._propagationContext=i.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Qh(),this}addBreadcrumb(e,r){const i=typeof r=="number"?r:GA;if(i<=0)return this;const a={timestamp:Zi(),...e},s=this._breadcrumbs;return s.push(a),this._breadcrumbs=s.length>i?s.slice(-i):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:r,_contexts:i,_tags:a,_extra:s,_user:c,_level:u,_fingerprint:p,_eventProcessors:m,_propagationContext:g,_sdkProcessingMetadata:h,_transactionName:y,_span:E}=this;return{breadcrumbs:e,attachments:r,contexts:i,tags:a,extra:s,user:c,level:u,fingerprint:p||[],eventProcessors:m,propagationContext:g,sdkProcessingMetadata:h,transactionName:y,span:E}}applyToEvent(e,r={},i=[]){Hh(e,this.getScopeData());const a=[...i,...xu(),...this._eventProcessors];return Ds(a,e,r)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,r){const i=r&&r.event_id?r.event_id:vr();if(!this._client)return Fr.warn("No client configured on scope - will not capture exception!"),i;const a=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:a,...r,event_id:i},this),i}captureMessage(e,r,i){const a=i&&i.event_id?i.event_id:vr();if(!this._client)return Fr.warn("No client configured on scope - will not capture message!"),a;const s=new Error(e);return this._client.captureMessage(e,r,{originalException:e,syntheticException:s,...i,event_id:a},this),a}captureEvent(e,r){const i=r&&r.event_id?r.event_id:vr();return this._client?(this._client.captureEvent(e,{...r,event_id:i},this),i):(Fr.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function QA(){return ku||(ku=new ln),ku}function Qh(){return{traceId:vr(),spanId:vr().substring(16)}}const Kh="7.120.3",Zh=parseFloat(Kh),KA=100;class Jh{constructor(e,r,i,a=Zh){this._version=a;let s;r?s=r:(s=new ln,s.setClient(e));let c;i?c=i:(c=new ln,c.setClient(e)),this._stack=[{scope:s}],e&&this.bindClient(e),this._isolationScope=c}isOlderThan(e){return this._version<e}bindClient(e){const r=this.getStackTop();r.client=e,r.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const r=this.pushScope();let i;try{i=e(r)}catch(a){throw this.popScope(),a}return Ns(i)?i.then(a=>(this.popScope(),a),a=>{throw this.popScope(),a}):(this.popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,r){const i=this._lastEventId=r&&r.event_id?r.event_id:vr(),a=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:a,...r,event_id:i}),i}captureMessage(e,r,i){const a=this._lastEventId=i&&i.event_id?i.event_id:vr(),s=new Error(e);return this.getScope().captureMessage(e,r,{originalException:e,syntheticException:s,...i,event_id:a}),a}captureEvent(e,r){const i=r&&r.event_id?r.event_id:vr();return e.type||(this._lastEventId=i),this.getScope().captureEvent(e,{...r,event_id:i}),i}lastEventId(){return this._lastEventId}addBreadcrumb(e,r){const{scope:i,client:a}=this.getStackTop();if(!a)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:c=KA}=a.getOptions&&a.getOptions()||{};if(c<=0)return;const u={timestamp:Zi(),...e},p=s?Iu(()=>s(u,r)):u;p!==null&&(a.emit&&a.emit("beforeAddBreadcrumb",p,r),i.addBreadcrumb(p,c))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,r){this.getScope().setTag(e,r),this.getIsolationScope().setTag(e,r)}setExtra(e,r){this.getScope().setExtra(e,r),this.getIsolationScope().setExtra(e,r)}setContext(e,r){this.getScope().setContext(e,r),this.getIsolationScope().setContext(e,r)}configureScope(e){const{scope:r,client:i}=this.getStackTop();i&&e(r)}run(e){const r=Xh(this);try{e(this)}finally{Xh(r)}}getIntegration(e){const r=this.getClient();if(!r)return null;try{return r.getIntegration(e)}catch{return Ji&&Fr.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,r){const i=this._callExtensionMethod("startTransaction",e,r);return Ji&&!i&&(this.getClient()?Fr.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):Fr.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),i}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,r=e.getSession();r&&Fh(r),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:r,client:i}=this.getStackTop(),{release:a,environment:s=Ps}=i&&i.getOptions()||{},{userAgent:c}=He.navigator||{},u=Mh({release:a,environment:s,user:r.getUser(),...c&&{userAgent:c},...e}),p=r.getSession&&r.getSession();return p&&p.status==="ok"&&yi(p,{status:"exited"}),this.endSession(),r.setSession(u),u}shouldSendDefaultPii(){const e=this.getClient(),r=e&&e.getOptions();return!!(r&&r.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:r}=this.getStackTop(),i=e.getSession();i&&r&&r.captureSession&&r.captureSession(i)}_callExtensionMethod(e,...r){const i=Us().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]=="function")return i.extensions[e].apply(this,r);Ji&&Fr.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Us(){return He.__SENTRY__=He.__SENTRY__||{extensions:{},hub:void 0},He}function Xh(t){const e=Us(),r=Nu(e);return tg(e,t),r}function br(){const t=Us();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return ZA(t)}function Ls(){return br().getIsolationScope()}function ZA(t=Us()){return(!JA(t)||Nu(t).isOlderThan(Zh))&&tg(t,new Jh),Nu(t)}function JA(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function Nu(t){return Sh("hub",()=>new Jh,t)}function tg(t,e){if(!t)return!1;const r=t.__SENTRY__=t.__SENTRY__||{};return r.hub=e,!0}const Re=(t,e="GET",r,i,a={},s=!0)=>new Promise(async(c,u)=>{const p=await chrome.runtime.sendMessage({messageType:"widgetFetch",url:t,method:e,body:r,params:i,headers:a,isAuthenticated:s});chrome.runtime.lastError?u({ok:!1}):p.ok?c(p):u(p)}),Ru=lt("auth/setUserData"),XA=lt("auth/setUserGrowthState"),tC=lt("auth/setUserSettings"),Bs=lt("auth/logOutGlobally"),Ms=Ye("auth/setActiveTeam",async({orgId:t})=>Re("users/active_org/","PUT",{org_id:t}).then(e=>e.data).catch(e=>{throw Kt(e),e})),eC={userData:void 0,loading:!1,setActiveTeamError:"",userGrowthState:void 0,userSettings:void 0},rC=re({name:"auth",initialState:eC,reducers:{setUserData:(t,e)=>{t.userData=e.payload},setUserGrowthState:(t,e)=>{t.userGrowthState=e.payload},setUserSettings:(t,e)=>{t.userSettings=e.payload},logOutGlobally:t=>{t.userData=void 0}},extraReducers:t=>{t.addCase(ve,(e,r)=>{var i;(i=r.payload)!=null&&i.auth&&Object.assign(e,r.payload.auth)}).addCase(Ms.pending,e=>{e.loading=!0,e.setActiveTeamError=""}).addCase(Ms.fulfilled,(e,r)=>{e.loading=!1,e.userData.active_organization=r.payload,e.setActiveTeamError=""}).addCase(Ms.rejected,(e,r)=>{var i;e.loading=!1,e.setActiveTeamError=((i=r.error)==null?void 0:i.message)||""})}}),nC=rC.reducer,Pu={SYSTEM_ADMIN:300,TEAM_CREATOR:200,SCRIBE_CREATOR:100},Du=(t,e)=>!t||!e?!1:(t==null?void 0:t.code)>=e,Hn=_t(t=>({userData:t.auth.userData,loading:t.auth.loading,setActiveTeamError:t.auth.setActiveTeamError,userGrowthState:t.auth.userGrowthState,userSettings:t.auth.userSettings}),t=>t);_t([t=>t.auth.userData],t=>{var u,p,m,g;const e=(p=(u=t==null?void 0:t.active_organization)==null?void 0:u.super_organization)==null?void 0:p.default_role,r=t==null?void 0:t.active_organization,i=Du(e,Pu.SCRIBE_CREATOR),a=Du(e,Pu.SYSTEM_ADMIN),s=(r==null?void 0:r.permission_level)==="admin",c=a||s;return i&&!!r&&!((m=r==null?void 0:r.super_organization)!=null&&m.workos_enable_users_sync)&&!((g=r==null?void 0:r.super_organization)!=null&&g.show_invite_teammates_for_admins_only&&!c)});const eg=_t(t=>t.auth,t=>t.userData),iC=_t(t=>t.auth.userGrowthState,t=>t);_t(t=>t.auth.userSettings,t=>t),_t([t=>t.auth.userData],t=>{var e,r;return((r=(e=t==null?void 0:t.active_organization)==null?void 0:e.super_organization)==null?void 0:r.role)||null});const oC={flags:{}},rg=re({name:"flagsmith",initialState:oC,reducers:{setFlags:(t,e)=>{t.flags=e.payload}},extraReducers:t=>{t.addCase(ve,(e,r)=>{Object.assign(e,r.payload.flagsmith)})}}),{setFlags:sC}=rg.actions,aC=rg.reducer,ng=_t(t=>t.browserContext,t=>t),ig=_t(t=>{const{tab:e,window:r}=t.browserContext,{lastUsableContentWindowId:i}=t.extension;return!!r&&!!e&&(r==null?void 0:r.id)===i&&e.active},t=>t),cC=_t(t=>{const{window:e}=t.browserContext;return(e==null?void 0:e.type)==="normal"},t=>t),uC=_t(t=>{const{window:e}=t.browserContext;return(e==null?void 0:e.type)==="popup"},t=>t),lC=_t(t=>{const e=cC(t)||uC(t),{extensionAllowContentInPopups2025q1:r}=wn(t);return e&&r?!0:ig(t)&&e},t=>t);_t(t=>{var e;return(e=t.browserContext)==null?void 0:e.tab},t=>t);const pC={tab:null,window:null,totalTabCount:0},fC=re({name:"browserContext",initialState:pC,reducers:{setTab:(t,e)=>{t.tab=e.payload},setWindow:(t,e)=>{t.window=e.payload},setBrowserContext:(t,e)=>{t.tab=e.payload.tab,t.window=e.payload.window},setTotalTabCount:(t,e)=>{t.totalTabCount=e.payload}},extraReducers:t=>{t.addCase(ve,(e,r)=>{var i,a;e.totalTabCount=((a=(i=r.payload)==null?void 0:i.browserContext)==null?void 0:a.totalTabCount)??0})}}),dC=fC.reducer,hC="DomSettlementScreenshots",gC=1,be="screenshots";class mC{constructor(){Xr(this,"db",null)}async init(){if(!this.db)return new Promise((e,r)=>{const i=indexedDB.open(hC,gC);i.onerror=()=>{console.error("[ScreenshotStorage] Failed to open database"),r(i.error)},i.onsuccess=()=>{this.db=i.result,e()},i.onupgradeneeded=a=>{const s=a.target.result;if(!s.objectStoreNames.contains(be)){const c=s.createObjectStore(be,{keyPath:"id"});c.createIndex("tabId","tabId",{unique:!1}),c.createIndex("domain","domain",{unique:!1}),c.createIndex("href","href",{unique:!1}),c.createIndex("stage","stage",{unique:!1}),c.createIndex("timestamp","timestamp",{unique:!1})}}})}generateId(){return`screenshot_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async saveScreenshot(e,r,i,a,s="unknown"){await this.init();const c=this.generateId(),u={id:c,base64Data:e,tabId:r,domain:i,href:a,stage:s,timestamp:Date.now()};return new Promise((p,m)=>{const g=this.db.transaction([be],"readwrite").objectStore(be).add(u);g.onsuccess=()=>{p(c)},g.onerror=()=>{console.error("[ScreenshotStorage] Failed to save screenshot"),m(g.error)}})}async getScreenshot(e){return await this.init(),new Promise((r,i)=>{const a=this.db.transaction([be],"readonly").objectStore(be).get(e);a.onsuccess=()=>{const s=a.result;s?(`${e}`,s.domain,s.href,s.stage,s.tabId,s.timestamp):console.warn(`[ScreenshotStorage] Screenshot ${e} not found in IndexedDB`),r((s==null?void 0:s.base64Data)||null)},a.onerror=()=>{console.error(`[ScreenshotStorage] Failed to get screenshot ${e}`),i(a.error)}})}async getScreenshotWithMetadata(e){return await this.init(),new Promise((r,i)=>{const a=this.db.transaction([be],"readonly").objectStore(be).get(e);a.onsuccess=()=>{const s=a.result;s?(`${e}`,s.domain,s.href,s.stage,s.tabId,s.s3DownloadUrl):console.warn(`[ScreenshotStorage] Screenshot ${e} not found in IndexedDB`),r(s||null)},a.onerror=()=>{console.error(`[ScreenshotStorage] Failed to get screenshot ${e}`),i(a.error)}})}async updateS3Urls(e,r,i,a){return await this.init(),new Promise((s,c)=>{const u=this.db.transaction([be],"readwrite").objectStore(be),p=u.get(e);p.onsuccess=()=>{const m=p.result;if(!m){c(new Error(`Screenshot ${e} not found`));return}m.s3InternalUrl=r,m.s3DownloadUrl=i,a&&(m.s3UploadUrl=a);const g=u.put(m);g.onsuccess=()=>{s()},g.onerror=()=>{console.error(`[ScreenshotStorage] Failed to update S3 URLs for ${e}`),c(g.error)}},p.onerror=()=>{console.error(`[ScreenshotStorage] Failed to get screenshot ${e} for update`),c(p.error)}})}async deleteScreenshot(e){return await this.init(),new Promise((r,i)=>{const a=this.db.transaction([be],"readwrite").objectStore(be).delete(e);a.onsuccess=()=>{r()},a.onerror=()=>{console.error(`[ScreenshotStorage] Failed to delete screenshot ${e}`),i(a.error)}})}async deleteScreenshots(e){if(e.length)return await this.init(),new Promise((r,i)=>{const a=this.db.transaction([be],"readwrite").objectStore(be);let s=0,c=0;e.forEach(u=>{const p=a.delete(u);p.onsuccess=()=>{s++,s+c===e.length&&r()},p.onerror=()=>{c++,s+c===e.length&&r()}})})}async deleteExpiredScreenshots(e){return await this.init(),new Promise((r,i)=>{const a=this.db.transaction([be],"readwrite").objectStore(be).index("timestamp"),s=IDBKeyRange.upperBound(e),c=a.openCursor(s),u=[];c.onsuccess=p=>{const m=p.target.result;m?(u.push(m.value.id),m.continue()):u.length>0?this.deleteScreenshots(u).then(r).catch(i):r()},c.onerror=()=>{console.error("[ScreenshotStorage] Failed to query expired screenshots"),i(c.error)}})}async deleteScreenshotsByTab(e){return await this.init(),new Promise((r,i)=>{const a=this.db.transaction([be],"readwrite").objectStore(be).index("tabId").openCursor(IDBKeyRange.only(e)),s=[];a.onsuccess=c=>{const u=c.target.result;u?(s.push(u.value.id),u.continue()):s.length>0?this.deleteScreenshots(s).then(r).catch(i):r()},a.onerror=()=>{console.error(`[ScreenshotStorage] Failed to query screenshots for tab ${e}`),i(a.error)}})}async clearAll(){return await this.init(),new Promise((e,r)=>{const i=this.db.transaction([be],"readwrite").objectStore(be).clear();i.onsuccess=()=>{e()},i.onerror=()=>{console.error("[ScreenshotStorage] Failed to clear screenshots"),r(i.error)}})}}const Fs=new mC,_C={captures:{}},yC=()=>Date.now()+120*1e3,og=re({name:"domSettlement",initialState:_C,reducers:{captureScreenshot:(t,e)=>{const{tabId:r,domain:i,screenshotId:a}=e.payload,s=`${r}-${i}`;t.captures[s]={tabId:r,domain:i,screenshotId:a,captureTime:Date.now(),ttl:yC()}},associateWithScribe:(t,e)=>{const{tabId:r,domain:i,scribeId:a}=e.payload,s=`${r}-${i}`;t.captures[s]&&(t.captures[s].scribeId=a,delete t.captures[s].ttl)},clearScreenshot:(t,e)=>{const{tabId:r,domain:i}=e.payload,a=`${r}-${i}`;delete t.captures[a]},clearScribeScreenshots:(t,e)=>{const r=e.payload;Object.keys(t.captures).forEach(i=>{var a;((a=t.captures[i])==null?void 0:a.scribeId)===r&&delete t.captures[i]})},cleanupExpiredScreenshots:t=>{const e=Date.now(),r=[];Object.keys(t.captures).forEach(i=>{const a=t.captures[i];a.ttl&&a.ttl<e&&(r.push(a.screenshotId),delete t.captures[i])}),t._lastDeletedScreenshotIds=r},clearTabScreenshots:(t,e)=>{const r=e.payload;Object.keys(t.captures).forEach(i=>{i.startsWith(`${r}-`)&&delete t.captures[i]})}},extraReducers:t=>{t.addCase(ve,(e,r)=>{r.payload.domSettlement&&Object.assign(e,r.payload.domSettlement)})}}),{captureScreenshot:vC,associateWithScribe:bC,clearScreenshot:sg,clearScribeScreenshots:wC,cleanupExpiredScreenshots:ag,clearTabScreenshots:cg}=og.actions,SC=og.reducer,EC=t=>e=>async r=>{var c,u,p;const i=t.getState(),a=e(r),s=t.getState();if(ag.match(r)){const m=s.domSettlement._lastDeletedScreenshotIds;if(m&&m.length>0)try{await Fs.deleteScreenshots(m),`${m.length}`}catch(g){console.error("[DomSettlement Middleware] Failed to clean up IndexedDB:",g)}}else if(cg.match(r)){const m=r.payload,g=((c=i.domSettlement)==null?void 0:c.captures)||{},h=[];if(Object.entries(g).forEach(([y,E])=>{y.startsWith(`${m}-`)&&E.screenshotId&&h.push(E.screenshotId)}),h.length>0)try{await Fs.deleteScreenshots(h),`${h.length}${m}`}catch(y){console.error("[DomSettlement Middleware] Failed to clean up tab screenshots:",y)}}else if(sg.match(r)){const{tabId:m,domain:g}=r.payload,h=`${m}-${g}`,y=(p=(u=i.domSettlement)==null?void 0:u.captures)==null?void 0:p[h];if(y!=null&&y.screenshotId)try{await Fs.deleteScreenshot(y.screenshotId),`${g}`}catch(E){console.error("[DomSettlement Middleware] Failed to delete screenshot:",E)}}return a},IC={tabId:"",recordBeforeActionId:void 0,recordAfterActionId:void 0,scribeId:void 0,isStepRecapture:!1,stepRecaptureDescription:""},OC=re({name:"existingScribe",initialState:IC,reducers:{setExistingScribeProperties:(t,e)=>{const{recordBeforeActionId:r,recordAfterActionId:i,scribeId:a,isStepRecapture:s,stepRecaptureDescription:c}=e.payload;t.recordBeforeActionId=r||null,t.recordAfterActionId=i||null,t.scribeId=a||null,t.isStepRecapture=s||!1,t.stepRecaptureDescription=c||""},setExistingTabId:(t,e)=>{t.tabId=e.payload},resetExistingScribe:(t,e)=>{t.recordAfterActionId=null,t.recordBeforeActionId=null,t.scribeId=null,t.isStepRecapture=!1,t.stepRecaptureDescription=""}},extraReducers:t=>{t.addCase(ve,(e,r)=>{Object.assign(e,r.payload.existingScribe)})}}),TC=OC.reducer,ro=_t(t=>t.existingScribe,t=>t);var wr=(t=>(t[t.IDLE=0]="IDLE",t[t.STARTING_RECORDING=1]="STARTING_RECORDING",t[t.RECORDING=2]="RECORDING",t[t.PAUSED_RECORDING=3]="PAUSED_RECORDING",t[t.ENDING_RECORDING=4]="ENDING_RECORDING",t[t.VIEWING_SCRIBE=5]="VIEWING_SCRIBE",t[t.CREATING_PIN=6]="CREATING_PIN",t))(wr||{});const no=lt("extension/setStatus"),AC=lt("extension/setLastUsableContentWindowId"),ju=lt("extension/setCurrentFocusedActiveTabId"),ug=lt("extension/setDropdownOpen");lt("extension/setLastRecordedScribe");const lg=lt("extension/setStillUploadingScreenshots"),pg=lt("extension/setCreatingScribe"),CC=lt("extension/setInCopilotSession"),xC=lt("extension/setSuggestedCopilotNodeId");var Uu=(t=>(t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t))(Uu||{});const kC=lt("scribeViewer/collapseViewer"),NC=lt("scribeViewer/expandViewer"),RC=lt("scribeViewer/setViewerWidth"),PC=lt("scribeViewer/setViewerPosition"),DC=lt("scribeViewer/setProgress"),fg=lt("scribeViewer/startViewer"),dg=lt("scribeViewer/stopViewer"),jC={status:wr.IDLE,lastUsableContentWindowId:void 0,currentFocusedActiveTabId:void 0,dropdownOpen:!1,lastRecordedScribe:void 0,stillUploadingScreenshots:!1,creatingScribe:!1,inCopilotSession:!1,suggestedCopilotNodeId:""},UC=re({name:"extension",initialState:jC,reducers:{setStatus:(t,e)=>{t.status=e.payload},setInCopilotSession:(t,e)=>{t.inCopilotSession=e.payload},setSuggestedCopilotNodeId:(t,e)=>{t.suggestedCopilotNodeId=e.payload},setLastUsableContentWindowId:(t,e)=>{t.lastUsableContentWindowId=e.payload},setCurrentFocusedActiveTabId:(t,e)=>{t.currentFocusedActiveTabId=e.payload,t.dropdownOpen=!1},setDropdownOpen:(t,e)=>{t.dropdownOpen=e.payload},setLastRecordedScribe:(t,e)=>{t.lastRecordedScribe=e.payload},setStillUploadingScreenshots:(t,e)=>{t.stillUploadingScreenshots=e.payload},setCreatingScribe:(t,e)=>{t.creatingScribe=e.payload}},extraReducers:t=>{t.addCase(fg,e=>{e.status=wr.VIEWING_SCRIBE,e.dropdownOpen=!1}).addCase(dg,e=>{e.status=wr.IDLE}).addCase(ve,(e,r)=>{e.dropdownOpen!==r.payload.extension.dropdownOpen&&chrome.runtime.sendMessage({messageType:"trackNewRelicLog",name:"store_replaced"}),Object.assign(e,r.payload.extension)})}}),LC=UC.reducer,BC={lastSentNotification:void 0,domains:void 0,lastFetched:0,currentRecommendedScribeCount:0,defaultName:"Untitled",os:"unknown",linkMap:{},benchmark:{}},MC=re({name:"globalVariables",initialState:BC,reducers:{setLastSentNotification:(t,e)=>{t.lastSentNotification=e.payload},setDomains:(t,e)=>{t.domains=e.payload},setLastFetched:(t,e)=>{t.lastFetched=e.payload},setCurrentRecommendedScribeCount:(t,e)=>{t.currentRecommendedScribeCount=e.payload},setDefaultName:(t,e)=>{t.defaultName=e.payload},updateLinkMap:(t,e)=>{t.linkMap[e.payload.notifId]=e.payload.res},setOs:(t,e)=>{t.os=e.payload},setIpAddress:(t,e)=>{t.ipAddress=e.payload},setBenchmark:(t,e)=>{t.benchmark=e.payload}},extraReducers:t=>{t.addCase(ve,(e,r)=>{Object.assign(e,r.payload.globalVariables)})}}),FC=MC.reducer,Lu=_t(t=>t.globalVariables,t=>t);_t(t=>t.guideMe,t=>t),_t(t=>t.guideMe.autoPilotAction,t=>t);const qC={autoPilotAction:null},zC=re({name:"guideMe",initialState:qC,reducers:{setAutoPilotAction:(t,e)=>{t.autoPilotAction=e.payload}},extraReducers:t=>{t.addCase(ve,(e,r)=>{Object.assign(e,r.payload.guideMe)})}}),VC=zC.reducer,$C={availableMicrophones:[],selectedMicrophoneId:"default"},hg=re({name:"microphones",initialState:$C,reducers:{setAvailableMicrophones:(t,e)=>{t.availableMicrophones=e.payload},selectMicrophoneById:(t,e)=>{t.selectedMicrophoneId=e.payload}},extraReducers:t=>{t.addCase(ve,(e,r)=>{Object.assign(e,r.payload.microphones)})}}),{setAvailableMicrophones:WC,selectMicrophoneById:YC}=hg.actions,HC=hg.reducer,Bu={selectModalVisible:!1,recordModalVisible:!1,startingRecordingModalVisible:!1,endRecordingWithCutoffVisible:!1},GC=re({name:"modals",initialState:Bu,reducers:{setSelectModalVisible:(t,e)=>{t.selectModalVisible=e.payload},setRecordModalVisible:(t,e)=>{t.recordModalVisible=e.payload},setStartingRecordingModalVisible:(t,e)=>{t.startingRecordingModalVisible=e.payload},setEndRecordingWithCutoffVisible:(t,e)=>{t.endRecordingWithCutoffVisible=e.payload}},extraReducers:t=>{t.addCase(no,(e,r)=>{r.payload===wr.STARTING_RECORDING&&(e.startingRecordingModalVisible=!0)}).addCase(ju,e=>{Object.assign(e,Bu)}).addCase(Bs,e=>{Object.assign(e,Bu)}).addCase(ve,(e,r)=>{Object.assign(e,r.payload.modals)})}}),QC=GC.reducer,KC=_t(t=>t.modals,t=>t),ZC=_t(t=>t.extension,t=>t),Mu=_t(t=>[wr.PAUSED_RECORDING,wr.RECORDING].includes(t.extension.status),t=>t),gg=_t(t=>t.extension.status===wr.ENDING_RECORDING,t=>t),JC=_t(t=>t.extension.status===wr.RECORDING,t=>t),XC=_t(t=>t.extension.dropdownOpen,t=>t);_t(t=>t.extension.stillUploadingScreenshots,t=>t);const tx=_t(t=>t.extension.creatingScribe,t=>t),mg=_t(t=>t.extension.inCopilotSession,t=>t),ex=_t(t=>t.extension.suggestedCopilotNodeId,t=>t),rx="https://google.com",nx="Smart Blur cannot be used while voice transcription is enabled.",qs=117;var Xe=(t=>(t.Home="sidebar/home",t.Assistant="sidebar/assistant",t.Recorder="sidebar/recorder",t.Copilot="sidebar/copilot",t.Options="sidebar/options",t.PopularApps="sidebar/popular-apps",t.RecommendedScribes="sidebar/recommended-scribes",t.RecommendedScribesOnboarding="sidebar/recommended-scribes-onboarding",t.RecommendedScribesSuggestedPreview="sidebar/suggested-scribe-preview",t.RecommendedScribesRejectionFeedback="sidebar/recommended-scribes-rejection-feedback",t))(Xe||{}),_g=(t=>(t.AUDIO_ONLY="audio-only",t.ALWAYS="always",t.NEVER="never",t))(_g||{}),ie=(t=>(t.Chrome="Chrome",t.Firefox="Firefox",t.Safari="Safari",t.Opera="Opera",t.Edge="Edge",t.Brave="Brave",t.Arc="Arc",t.Vivaldi="Vivaldi",t.InternetExplorer="Internet Explorer",t.Unknown="Unknown",t))(ie||{}),ur=(t=>(t.MacOS="Mac OS",t.iOS="iOS",t.Windows="Windows",t.Android="Android",t.Linux="Linux",t))(ur||{}),yg=(t=>(t.MacOS="macos",t.iOS="ios",t.Windows="windows",t.Android="android",t.Linux="linux",t))(yg||{}),vi=(t=>(t.ENTERPRISE="enterprise",t.PRO="pro",t.FREE="free",t.BASE="base",t.CORE="core",t.HUB="hub",t.GRID="grid",t))(vi||{});const ix=["enterprise","base","grid","core","hub"];var Fu=(t=>(t.ExtensionAutoCapture="extension_auto_capture",t.ManualCapture="manual_capture",t))(Fu||{});const io=t=>{if(!t)return null;try{return new URL(t)}catch{return null}},ox=t=>{requestAnimationFrame(()=>{requestAnimationFrame(t)})},oo=()=>{if(typeof navigator>"u")return ie.Unknown;const t=navigator==null?void 0:navigator.userAgentData;if(t!=null&&t.brands){const r=t.brands.reduce((i,a)=>(a.brand.includes("Edge")&&(i[ie.Edge]=!0),a.brand.includes("Brave")&&(i[ie.Brave]=!0),a.brand.includes("Chrome")&&(i[ie.Chrome]=!0),a.brand.includes("Opera")&&(i[ie.Opera]=!0),i),{});if(r!=null&&r[ie.Edge])return ie.Edge;if(r!=null&&r[ie.Opera])return ie.Opera;if(r!=null&&r[ie.Brave])return ie.Brave;if(r!=null&&r[ie.Chrome])return ie.Chrome}const{userAgent:e}=navigator;return e.indexOf("Edg")>-1?ie.Edge:e.indexOf("Opera")>-1||e.indexOf("OPR")>-1?ie.Opera:e.indexOf("Chrome")>-1?ie.Chrome:e.indexOf("Firefox")>-1?ie.Firefox:e.indexOf("Safari")>-1&&/^((?!chrome|android).)*safari/i.test(e)?ie.Safari:e.indexOf("Trident")>-1||e.indexOf("MSIE")>-1?ie.InternetExplorer:ie.Unknown},sx=(()=>oo()===ie.Edge)();oo(),ie.Chrome,oo(),ie.Safari;const ax=()=>!!window.getComputedStyle(document.documentElement).getPropertyValue("--arc-palette-title"),qu=()=>{var i,a;if(typeof navigator>"u")return null;const t=(i=navigator==null?void 0:navigator.userAgentData)==null?void 0:i.brands;if(t){const s=(a=t==null?void 0:t.find(c=>c.brand==="Chromium"))==null?void 0:a.version;return s?+s:null}const{userAgent:e}=navigator;let r=null;if(e.includes("Chrome")){const s=e.match(/Chrome\/(\d+)/);r=s?s[1]:null}else if(e.includes("Edg")){const s=e.match(/Edg\/(\d+)/);r=s?s[1]:null}return r?+r:null};function zs(t){const e=qu();return!!(e&&e>=t)}const Vs=()=>{let t=null;if(self.navigator){const e=navigator==null?void 0:navigator.userAgentData;if(e){const{platform:u}=e;if(u)switch(u){case"macOS":case"Macintosh":case"MacIntel":case"MacPPC":case"Mac68K":return ur.MacOS;case"iPhone":case"iPad":case"iPod":return ur.iOS;case"Win32":case"Win64":case"Windows":case"WinCE":return ur.Windows;case"Android":return ur.Android;case"Linux":return ur.Linux;default:return null}}const{userAgent:r}=self.navigator,{platform:i}=self.navigator,a=["Macintosh","MacIntel","MacPPC","Mac68K"],s=["Win32","Win64","Windows","WinCE"],c=["iPhone","iPad","iPod"];a.indexOf(i)!==-1?t=ur.MacOS:c.indexOf(i)!==-1?t=ur.iOS:s.indexOf(i)!==-1?t=ur.Windows:/Android/.test(r)?t=ur.Android:/Linux/.test(i)&&(t=ur.Linux)}return t},vg=()=>{const t=Vs();let e=null;return t&&(e=t.replace(/\s+/,"").toLowerCase()),e},cx=t=>{if(!t)return"";try{let e=t.trim().toLowerCase();if(e=e.replace(/^(https?:\/\/)/,""),e=e.split("/")[0],e=e.replace(/^w{2,3}\./,""),e=e.split(":")[0],!e.includes("."))return e.charAt(0).toUpperCase()+e.slice(1);const r=e.split("."),i=r.length>1?r[r.length-2]:r[0];return i.charAt(0).toUpperCase()+i.slice(1)}catch{return""}},ux=t=>{var e;return(e=t==null?void 0:t.plan)!=null&&e.name?ix.includes(t.plan.name):!1},lx=t=>{var e;return((e=t==null?void 0:t.plan)==null?void 0:e.name)===vi.PRO&&(t==null?void 0:t.stripe_subscription_status)==="active"&&(t==null?void 0:t.pro_plan_type)==="five_user_team"},px=t=>t?[vi.CORE,vi.HUB,vi.GRID].includes(t):!1;var bg,In={DEBUG:!1,LIB_VERSION:"2.45.0"},Ue;if(typeof window>"u"){var wg={hostname:""};Ue={navigator:{userAgent:""},document:{location:wg,referrer:""},screen:{width:0,height:0},location:wg}}else Ue=window;var $s=Array.prototype,fx=Function.prototype,Sg=Object.prototype,Gn=$s.slice,so=Sg.toString,Ws=Sg.hasOwnProperty,we=Ue.console,on=Ue.navigator,Jt=Ue.document,ao=Ue.opera,Ys=Ue.screen,Pr=on.userAgent,zu=fx.bind,Eg=$s.forEach,Ig=$s.indexOf,Og=$s.map,dx=Array.isArray,Vu={},A={trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},Xt={log:function(){if(In.DEBUG&&!A.isUndefined(we)&&we)try{we.log.apply(we,arguments)}catch{A.each(arguments,function(t){we.log(t)})}},warn:function(){if(In.DEBUG&&!A.isUndefined(we)&&we){var t=["Mixpanel warning:"].concat(A.toArray(arguments));try{we.warn.apply(we,t)}catch{A.each(t,function(e){we.warn(e)})}}},error:function(){if(In.DEBUG&&!A.isUndefined(we)&&we){var t=["Mixpanel error:"].concat(A.toArray(arguments));try{we.error.apply(we,t)}catch{A.each(t,function(e){we.error(e)})}}},critical:function(){if(!A.isUndefined(we)&&we){var t=["Mixpanel error:"].concat(A.toArray(arguments));try{we.error.apply(we,t)}catch{A.each(t,function(e){we.error(e)})}}}},$u=function(t,e){return function(){return arguments[0]="["+e+"] "+arguments[0],t.apply(Xt,arguments)}},Wu=function(t){return{log:$u(Xt.log,t),error:$u(Xt.error,t),critical:$u(Xt.critical,t)}};A.bind=function(t,e){var r,i;if(zu&&t.bind===zu)return zu.apply(t,Gn.call(arguments,1));if(!A.isFunction(t))throw new TypeError;return r=Gn.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,r.concat(Gn.call(arguments)));var a={};a.prototype=t.prototype;var s=new a;a.prototype=null;var c=t.apply(s,r.concat(Gn.call(arguments)));return Object(c)===c?c:s},i},A.each=function(t,e,r){if(t!=null){if(Eg&&t.forEach===Eg)t.forEach(e,r);else if(t.length===+t.length){for(var i=0,a=t.length;i<a;i++)if(i in t&&e.call(r,t[i],i,t)===Vu)return}else for(var s in t)if(Ws.call(t,s)&&e.call(r,t[s],s,t)===Vu)return}},A.extend=function(t){return A.each(Gn.call(arguments,1),function(e){for(var r in e)e[r]!==void 0&&(t[r]=e[r])}),t},A.isArray=dx||function(t){return so.call(t)==="[object Array]"},A.isFunction=function(t){try{return/^\s*\bfunction\b/.test(t)}catch{return!1}},A.isArguments=function(t){return!!(t&&Ws.call(t,"callee"))},A.toArray=function(t){return t?t.toArray?t.toArray():A.isArray(t)||A.isArguments(t)?Gn.call(t):A.values(t):[]},A.map=function(t,e,r){if(Og&&t.map===Og)return t.map(e,r);var i=[];return A.each(t,function(a){i.push(e.call(r,a))}),i},A.keys=function(t){var e=[];return t===null||A.each(t,function(r,i){e[e.length]=i}),e},A.values=function(t){var e=[];return t===null||A.each(t,function(r){e[e.length]=r}),e},A.include=function(t,e){var r=!1;return t===null?r:Ig&&t.indexOf===Ig?t.indexOf(e)!=-1:(A.each(t,function(i){if(r||(r=i===e))return Vu}),r)},A.includes=function(t,e){return t.indexOf(e)!==-1},A.inherit=function(t,e){return t.prototype=new e,t.prototype.constructor=t,t.superclass=e.prototype,t},A.isObject=function(t){return t===Object(t)&&!A.isArray(t)},A.isEmptyObject=function(t){if(A.isObject(t)){for(var e in t)if(Ws.call(t,e))return!1;return!0}return!1},A.isUndefined=function(t){return t===void 0},A.isString=function(t){return so.call(t)=="[object String]"},A.isDate=function(t){return so.call(t)=="[object Date]"},A.isNumber=function(t){return so.call(t)=="[object Number]"},A.isElement=function(t){return!!(t&&t.nodeType===1)},A.encodeDates=function(t){return A.each(t,function(e,r){A.isDate(e)?t[r]=A.formatDate(e):A.isObject(e)&&(t[r]=A.encodeDates(e))}),t},A.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},A.formatDate=function(t){function e(r){return r<10?"0"+r:r}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())},A.strip_empty_properties=function(t){var e={};return A.each(t,function(r,i){A.isString(r)&&r.length>0&&(e[i]=r)}),e},A.truncate=function(t,e){var r;return typeof t=="string"?r=t.slice(0,e):A.isArray(t)?(r=[],A.each(t,function(i){r.push(A.truncate(i,e))})):A.isObject(t)?(r={},A.each(t,function(i,a){r[a]=A.truncate(i,e)})):r=t,r},A.JSONEncode=function(){return function(t){var e=t,r=function(a){var s=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return s.lastIndex=0,s.test(a)?'"'+a.replace(s,function(u){var p=c[u];return typeof p=="string"?p:"\\u"+("0000"+u.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},i=function(a,s){var c="",u="    ",p=0,m="",g="",h=0,y=c,E=[],x=s[a];switch(x&&typeof x=="object"&&typeof x.toJSON=="function"&&(x=x.toJSON(a)),typeof x){case"string":return r(x);case"number":return isFinite(x)?String(x):"null";case"boolean":case"null":return String(x);case"object":if(!x)return"null";if(c+=u,E=[],so.apply(x)==="[object Array]"){for(h=x.length,p=0;p<h;p+=1)E[p]=i(p,x)||"null";return g=E.length===0?"[]":c?`[
`+c+E.join(`,
`+c)+`
`+y+"]":"["+E.join(",")+"]",c=y,g}for(m in x)Ws.call(x,m)&&(g=i(m,x),g&&E.push(r(m)+(c?": ":":")+g));return g=E.length===0?"{}":c?"{"+E.join(",")+y+"}":"{"+E.join(",")+"}",c=y,g}};return i("",{"":e})}}(),A.JSONDecode=function(){var t,e,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},i,a=function(E){var x=new SyntaxError(E);throw x.at=t,x.text=i,x},s=function(E){return E&&E!==e&&a("Expected '"+E+"' instead of '"+e+"'"),e=i.charAt(t),t+=1,e},c=function(){var E,x="";for(e==="-"&&(x="-",s("-"));e>="0"&&e<="9";)x+=e,s();if(e===".")for(x+=".";s()&&e>="0"&&e<="9";)x+=e;if(e==="e"||e==="E")for(x+=e,s(),(e==="-"||e==="+")&&(x+=e,s());e>="0"&&e<="9";)x+=e,s();if(E=+x,!isFinite(E))a("Bad number");else return E},u=function(){var E,x,D="",U;if(e==='"')for(;s();){if(e==='"')return s(),D;if(e==="\\")if(s(),e==="u"){for(U=0,x=0;x<4&&(E=parseInt(s(),16),!!isFinite(E));x+=1)U=U*16+E;D+=String.fromCharCode(U)}else if(typeof r[e]=="string")D+=r[e];else break;else D+=e}a("Bad string")},p=function(){for(;e&&e<=" ";)s()},m=function(){switch(e){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}a('Unexpected "'+e+'"')},g,h=function(){var E=[];if(e==="["){if(s("["),p(),e==="]")return s("]"),E;for(;e;){if(E.push(g()),p(),e==="]")return s("]"),E;s(","),p()}}a("Bad array")},y=function(){var E,x={};if(e==="{"){if(s("{"),p(),e==="}")return s("}"),x;for(;e;){if(E=u(),p(),s(":"),Object.hasOwnProperty.call(x,E)&&a('Duplicate key "'+E+'"'),x[E]=g(),p(),e==="}")return s("}"),x;s(","),p()}}a("Bad object")};return g=function(){switch(p(),e){case"{":return y();case"[":return h();case'"':return u();case"-":return c();default:return e>="0"&&e<="9"?c():m()}},function(E){var x;return i=E,t=0,e=" ",x=g(),p(),e&&a("Syntax error"),x}}(),A.base64Encode=function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r,i,a,s,c,u,p,m,g=0,h=0,y="",E=[];if(!t)return t;t=A.utf8Encode(t);do r=t.charCodeAt(g++),i=t.charCodeAt(g++),a=t.charCodeAt(g++),m=r<<16|i<<8|a,s=m>>18&63,c=m>>12&63,u=m>>6&63,p=m&63,E[h++]=e.charAt(s)+e.charAt(c)+e.charAt(u)+e.charAt(p);while(g<t.length);switch(y=E.join(""),t.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"=";break}return y},A.utf8Encode=function(t){t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var e="",r,i,a=0,s;for(r=i=0,a=t.length,s=0;s<a;s++){var c=t.charCodeAt(s),u=null;c<128?i++:c>127&&c<2048?u=String.fromCharCode(c>>6|192,c&63|128):u=String.fromCharCode(c>>12|224,c>>6&63|128,c&63|128),u!==null&&(i>r&&(e+=t.substring(r,i)),e+=u,r=i=s+1)}return i>r&&(e+=t.substring(r,t.length)),e},A.UUID=function(){var t=function(){for(var i=1*new Date,a=0;i==1*new Date;)a++;return i.toString(16)+a.toString(16)},e=function(){return Math.random().toString(16).replace(".","")},r=function(){var i=Pr,a,s,c=[],u=0;function p(m,g){var h,y=0;for(h=0;h<g.length;h++)y|=c[h]<<h*8;return m^y}for(a=0;a<i.length;a++)s=i.charCodeAt(a),c.unshift(s&255),c.length>=4&&(u=p(u,c),c=[]);return c.length>0&&(u=p(u,c)),u.toString(16)};return function(){var i=(Ys.height*Ys.width).toString(16);return t()+"-"+e()+"-"+r()+"-"+i+"-"+t()}}();var Tg=["ahrefsbot","baiduspider","bingbot","bingpreview","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];A.isBlockedUA=function(t){var e;for(t=t.toLowerCase(),e=0;e<Tg.length;e++)if(t.indexOf(Tg[e])!==-1)return!0;return!1},A.HTTPBuildQuery=function(t,e){var r,i,a=[];return A.isUndefined(e)&&(e="&"),A.each(t,function(s,c){r=encodeURIComponent(s.toString()),i=encodeURIComponent(c),a[a.length]=i+"="+r}),a.join(e)},A.getQueryParam=function(t,e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var r="[\\?&]"+e+"=([^&#]*)",i=new RegExp(r),a=i.exec(t);if(a===null||a&&typeof a[1]!="string"&&a[1].length)return"";var s=a[1];try{s=decodeURIComponent(s)}catch{Xt.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},A.cookie={get:function(t){for(var e=t+"=",r=Jt.cookie.split(";"),i=0;i<r.length;i++){for(var a=r[i];a.charAt(0)==" ";)a=a.substring(1,a.length);if(a.indexOf(e)===0)return decodeURIComponent(a.substring(e.length,a.length))}return null},parse:function(t){var e;try{e=A.JSONDecode(A.cookie.get(t))||{}}catch{}return e},set_seconds:function(t,e,r,i,a,s,c){var u="",p="",m="";if(c)u="; domain="+c;else if(i){var g=Ag(Jt.location.hostname);u=g?"; domain=."+g:""}if(r){var h=new Date;h.setTime(h.getTime()+r*1e3),p="; expires="+h.toGMTString()}s&&(a=!0,m="; SameSite=None"),a&&(m+="; secure"),Jt.cookie=t+"="+encodeURIComponent(e)+p+"; path=/"+u+m},set:function(t,e,r,i,a,s,c){var u="",p="",m="";if(c)u="; domain="+c;else if(i){var g=Ag(Jt.location.hostname);u=g?"; domain=."+g:""}if(r){var h=new Date;h.setTime(h.getTime()+r*24*60*60*1e3),p="; expires="+h.toGMTString()}s&&(a=!0,m="; SameSite=None"),a&&(m+="; secure");var y=t+"="+encodeURIComponent(e)+p+"; path=/"+u+m;return Jt.cookie=y,y},remove:function(t,e,r){A.cookie.set(t,"",-1,e,!1,!1,r)}};var Yu=null,Hs=function(t,e){if(Yu!==null&&!e)return Yu;var r=!0;try{t=t||window.localStorage;var i="__mplss_"+Hu(8),a="xyz";t.setItem(i,a),t.getItem(i)!==a&&(r=!1),t.removeItem(i)}catch{r=!1}return Yu=r,r};A.localStorage={is_supported:function(t){var e=Hs(null,t);return e||Xt.error("localStorage unsupported; falling back to cookie store"),e},error:function(t){Xt.error("localStorage error: "+t)},get:function(t){try{return window.localStorage.getItem(t)}catch(e){A.localStorage.error(e)}return null},parse:function(t){try{return A.JSONDecode(A.localStorage.get(t))||{}}catch{}return null},set:function(t,e){try{window.localStorage.setItem(t,e)}catch(r){A.localStorage.error(r)}},remove:function(t){try{window.localStorage.removeItem(t)}catch(e){A.localStorage.error(e)}}},A.register_event=function(){var t=function(i,a,s,c,u){if(!i){Xt.error("No valid element provided to register_event");return}if(i.addEventListener&&!c)i.addEventListener(a,s,!!u);else{var p="on"+a,m=i[p];i[p]=e(i,s,m)}};function e(i,a,s){var c=function(u){if(u=u||r(window.event),!!u){var p=!0,m,g;return A.isFunction(s)&&(m=s(u)),g=a.call(i,u),(m===!1||g===!1)&&(p=!1),p}};return c}function r(i){return i&&(i.preventDefault=r.preventDefault,i.stopPropagation=r.stopPropagation),i}return r.preventDefault=function(){this.returnValue=!1},r.stopPropagation=function(){this.cancelBubble=!0},t}();var hx=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');A.dom_query=function(){function t(a){return a.all?a.all:a.getElementsByTagName("*")}var e=/[\t\r\n]/g;function r(a,s){var c=" "+s+" ";return(" "+a.className+" ").replace(e," ").indexOf(c)>=0}function i(a){if(!Jt.getElementsByTagName)return[];var s=a.split(" "),c,u,p,m,g,h,y,E,x,D,U=[Jt];for(h=0;h<s.length;h++){if(c=s[h].replace(/^\s+/,"").replace(/\s+$/,""),c.indexOf("#")>-1){u=c.split("#"),p=u[0];var j=u[1],R=Jt.getElementById(j);if(!R||p&&R.nodeName.toLowerCase()!=p)return[];U=[R];continue}if(c.indexOf(".")>-1){u=c.split("."),p=u[0];var w=u[1];for(p||(p="*"),m=[],g=0,y=0;y<U.length;y++)for(p=="*"?x=t(U[y]):x=U[y].getElementsByTagName(p),E=0;E<x.length;E++)m[g++]=x[E];for(U=[],D=0,y=0;y<m.length;y++)m[y].className&&A.isString(m[y].className)&&r(m[y],w)&&(U[D++]=m[y]);continue}var T=c.match(hx);if(T){p=T[1];var P=T[2],F=T[3],V=T[4];for(p||(p="*"),m=[],g=0,y=0;y<U.length;y++)for(p=="*"?x=t(U[y]):x=U[y].getElementsByTagName(p),E=0;E<x.length;E++)m[g++]=x[E];U=[],D=0;var Y;switch(F){case"=":Y=function(b){return b.getAttribute(P)==V};break;case"~":Y=function(b){return b.getAttribute(P).match(new RegExp("\\b"+V+"\\b"))};break;case"|":Y=function(b){return b.getAttribute(P).match(new RegExp("^"+V+"-?"))};break;case"^":Y=function(b){return b.getAttribute(P).indexOf(V)===0};break;case"$":Y=function(b){return b.getAttribute(P).lastIndexOf(V)==b.getAttribute(P).length-V.length};break;case"*":Y=function(b){return b.getAttribute(P).indexOf(V)>-1};break;default:Y=function(b){return b.getAttribute(P)}}for(U=[],D=0,y=0;y<m.length;y++)Y(m[y])&&(U[D++]=m[y]);continue}for(p=c,m=[],g=0,y=0;y<U.length;y++)for(x=U[y].getElementsByTagName(p),E=0;E<x.length;E++)m[g++]=x[E];U=m}return U}return function(a){return A.isElement(a)?[a]:A.isObject(a)&&!A.isUndefined(a.length)?a:i.call(this,a)}}(),A.info={campaignParams:function(){var t="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),e="",r={};return A.each(t,function(i){e=A.getQueryParam(Jt.URL,i),e.length&&(r[i]=e)}),r},searchEngine:function(t){return t.search("https?://(.*)google.([^/?]*)")===0?"google":t.search("https?://(.*)bing.com")===0?"bing":t.search("https?://(.*)yahoo.com")===0?"yahoo":t.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(t){var e=A.info.searchEngine(t),r=e!="yahoo"?"q":"p",i={};if(e!==null){i.$search_engine=e;var a=A.getQueryParam(t,r);a.length&&(i.mp_keyword=a)}return i},browser:function(t,e,r){return e=e||"",r||A.includes(t," OPR/")?A.includes(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":A.includes(t,"IEMobile")||A.includes(t,"WPDesktop")?"Internet Explorer Mobile":A.includes(t,"SamsungBrowser/")?"Samsung Internet":A.includes(t,"Edge")||A.includes(t,"Edg/")?"Microsoft Edge":A.includes(t,"FBIOS")?"Facebook Mobile":A.includes(t,"Chrome")?"Chrome":A.includes(t,"CriOS")?"Chrome iOS":A.includes(t,"UCWEB")||A.includes(t,"UCBrowser")?"UC Browser":A.includes(t,"FxiOS")?"Firefox iOS":A.includes(e,"Apple")?A.includes(t,"Mobile")?"Mobile Safari":"Safari":A.includes(t,"Android")?"Android Mobile":A.includes(t,"Konqueror")?"Konqueror":A.includes(t,"Firefox")?"Firefox":A.includes(t,"MSIE")||A.includes(t,"Trident/")?"Internet Explorer":A.includes(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,r){var i=A.info.browser(t,e,r),a={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},s=a[i];if(s===void 0)return null;var c=t.match(s);return c?parseFloat(c[c.length-2]):null},os:function(){var t=Pr;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"Chrome OS":""},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)?"Android":""},referringDomain:function(t){var e=t.split("/");return e.length>=3?e[2]:""},properties:function(){return A.extend(A.strip_empty_properties({$os:A.info.os(),$browser:A.info.browser(Pr,on.vendor,ao),$referrer:Jt.referrer,$referring_domain:A.info.referringDomain(Jt.referrer),$device:A.info.device(Pr)}),{$current_url:Ue.location.href,$browser_version:A.info.browserVersion(Pr,on.vendor,ao),$screen_height:Ys.height,$screen_width:Ys.width,mp_lib:"web",$lib_version:In.LIB_VERSION,$insert_id:Hu(),time:A.timestamp()/1e3})},people_properties:function(){return A.extend(A.strip_empty_properties({$os:A.info.os(),$browser:A.info.browser(Pr,on.vendor,ao)}),{$browser_version:A.info.browserVersion(Pr,on.vendor,ao)})},pageviewInfo:function(t){return A.strip_empty_properties({mp_page:t,mp_referrer:Jt.referrer,mp_browser:A.info.browser(Pr,on.vendor,ao),mp_platform:A.info.os()})}};var Hu=function(t){var e=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return t?e.substring(0,t):e},gx=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,mx=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,Ag=function(t){var e=mx,r=t.split("."),i=r[r.length-1];(i.length>4||i==="com"||i==="org")&&(e=gx);var a=t.match(e);return a?a[0]:""},Gs=null,Qs=null;typeof JSON<"u"&&(Gs=JSON.stringify,Qs=JSON.parse),Gs=Gs||A.JSONEncode,Qs=Qs||A.JSONDecode,A.toArray=A.toArray,A.isObject=A.isObject,A.JSONEncode=A.JSONEncode,A.JSONDecode=A.JSONDecode,A.isBlockedUA=A.isBlockedUA,A.isEmptyObject=A.isEmptyObject,A.info=A.info,A.info.device=A.info.device,A.info.browser=A.info.browser,A.info.browserVersion=A.info.browserVersion,A.info.properties=A.info.properties;var sn=function(){};sn.prototype.create_properties=function(){},sn.prototype.event_handler=function(){},sn.prototype.after_track_handler=function(){},sn.prototype.init=function(t){return this.mp=t,this},sn.prototype.track=function(t,e,r,i){var a=this,s=A.dom_query(t);if(s.length===0){Xt.error("The DOM query ("+t+") returned 0 elements");return}return A.each(s,function(c){A.register_event(c,this.override_event,function(u){var p={},m=a.create_properties(r,this),g=a.mp.get_config("track_links_timeout");a.event_handler(u,this,p),window.setTimeout(a.track_callback(i,m,p,!0),g),a.mp.track(e,m,a.track_callback(i,m,p))})},this),!0},sn.prototype.track_callback=function(t,e,r,i){i=i||!1;var a=this;return function(){r.callback_fired||(r.callback_fired=!0,!(t&&t(i,e)===!1)&&a.after_track_handler(e,r,i))}},sn.prototype.create_properties=function(t,e){var r;return typeof t=="function"?r=t(e):r=A.extend({},t),r};var bi=function(){this.override_event="click"};A.inherit(bi,sn),bi.prototype.create_properties=function(t,e){var r=bi.superclass.create_properties.apply(this,arguments);return e.href&&(r.url=e.href),r},bi.prototype.event_handler=function(t,e,r){r.new_tab=t.which===2||t.metaKey||t.ctrlKey||e.target==="_blank",r.href=e.href,r.new_tab||t.preventDefault()},bi.prototype.after_track_handler=function(t,e){e.new_tab||setTimeout(function(){window.location=e.href},0)};var Ks=function(){this.override_event="submit"};A.inherit(Ks,sn),Ks.prototype.event_handler=function(t,e,r){r.element=e,t.preventDefault()},Ks.prototype.after_track_handler=function(t,e){setTimeout(function(){e.element.submit()},0)};var _x=Wu("lock"),Cg=function(t,e){e=e||{},this.storageKey=t,this.storage=e.storage||window.localStorage,this.pollIntervalMS=e.pollIntervalMS||100,this.timeoutMS=e.timeoutMS||2e3};Cg.prototype.withLock=function(t,e,r){!r&&typeof e!="function"&&(r=e,e=null);var i=r||new Date().getTime()+"|"+Math.random(),a=new Date().getTime(),s=this.storageKey,c=this.pollIntervalMS,u=this.timeoutMS,p=this.storage,m=s+":X",g=s+":Y",h=s+":Z",y=function(R){e&&e(R)},E=function(R){if(new Date().getTime()-a>u){_x.error("Timeout waiting for mutex on "+s+"; clearing lock. ["+i+"]"),p.removeItem(h),p.removeItem(g),U();return}setTimeout(function(){try{R()}catch(w){y(w)}},c*(Math.random()+.1))},x=function(R,w){R()?w():E(function(){x(R,w)})},D=function(){var R=p.getItem(g);if(R&&R!==i)return!1;if(p.setItem(g,i),p.getItem(g)===i)return!0;if(!Hs(p,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},U=function(){p.setItem(m,i),x(D,function(){if(p.getItem(m)===i){j();return}E(function(){if(p.getItem(g)!==i){U();return}x(function(){return!p.getItem(h)},j)})})},j=function(){p.setItem(h,"1");try{t()}finally{p.removeItem(h),p.getItem(g)===i&&p.removeItem(g),p.getItem(m)===i&&p.removeItem(m)}};try{if(Hs(p,!0))U();else throw new Error("localStorage support check failed")}catch(R){y(R)}};var xg=Wu("batch"),On=function(t,e){e=e||{},this.storageKey=t,this.storage=e.storage||window.localStorage,this.reportError=e.errorReporter||A.bind(xg.error,xg),this.lock=new Cg(t,{storage:this.storage}),this.pid=e.pid||null,this.memQueue=[]};On.prototype.enqueue=function(t,e,r){var i={id:Hu(),flushAfter:new Date().getTime()+e*2,payload:t};this.lock.withLock(A.bind(function(){var a;try{var s=this.readFromStorage();s.push(i),a=this.saveToStorage(s),a&&this.memQueue.push(i)}catch{this.reportError("Error enqueueing item",t),a=!1}r&&r(a)},this),A.bind(function(a){this.reportError("Error acquiring storage lock",a),r&&r(!1)},this),this.pid)},On.prototype.fillBatch=function(t){var e=this.memQueue.slice(0,t);if(e.length<t){var r=this.readFromStorage();if(r.length){var i={};A.each(e,function(c){i[c.id]=!0});for(var a=0;a<r.length;a++){var s=r[a];if(new Date().getTime()>s.flushAfter&&!i[s.id]&&(s.orphaned=!0,e.push(s),e.length>=t))break}}}return e};var kg=function(t,e){var r=[];return A.each(t,function(i){i.id&&!e[i.id]&&r.push(i)}),r};On.prototype.removeItemsByID=function(t,e){var r={};A.each(t,function(a){r[a]=!0}),this.memQueue=kg(this.memQueue,r);var i=A.bind(function(){var a;try{var s=this.readFromStorage();if(s=kg(s,r),a=this.saveToStorage(s),a){s=this.readFromStorage();for(var c=0;c<s.length;c++){var u=s[c];if(u.id&&r[u.id])return this.reportError("Item not removed from storage"),!1}}}catch{this.reportError("Error removing items",t),a=!1}return a},this);this.lock.withLock(function(){var a=i();e&&e(a)},A.bind(function(a){var s=!1;if(this.reportError("Error acquiring storage lock",a),!Hs(this.storage,!0)&&(s=i(),!s))try{this.storage.removeItem(this.storageKey)}catch(c){this.reportError("Error clearing queue",c)}e&&e(s)},this),this.pid)};var Ng=function(t,e){var r=[];return A.each(t,function(i){var a=i.id;if(a in e){var s=e[a];s!==null&&(i.payload=s,r.push(i))}else r.push(i)}),r};On.prototype.updatePayloads=function(t,e){this.memQueue=Ng(this.memQueue,t),this.lock.withLock(A.bind(function(){var r;try{var i=this.readFromStorage();i=Ng(i,t),r=this.saveToStorage(i)}catch{this.reportError("Error updating items",t),r=!1}e&&e(r)},this),A.bind(function(r){this.reportError("Error acquiring storage lock",r),e&&e(!1)},this),this.pid)},On.prototype.readFromStorage=function(){var t;try{t=this.storage.getItem(this.storageKey),t&&(t=Qs(t),A.isArray(t)||(this.reportError("Invalid storage entry:",t),t=null))}catch(e){this.reportError("Error retrieving queue",e),t=null}return t||[]},On.prototype.saveToStorage=function(t){try{return this.storage.setItem(this.storageKey,Gs(t)),!0}catch(e){return this.reportError("Error saving queue",e),!1}},On.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var yx=10*60*1e3,co=Wu("batch"),qr=function(t,e){this.errorReporter=e.errorReporter,this.queue=new On(t,{errorReporter:A.bind(this.reportError,this),storage:e.storage}),this.libConfig=e.libConfig,this.sendRequest=e.sendRequestFunc,this.beforeSendHook=e.beforeSendHook,this.stopAllBatching=e.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0};qr.prototype.enqueue=function(t,e){this.queue.enqueue(t,this.flushInterval,e)},qr.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()},qr.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},qr.prototype.clear=function(){this.queue.clear()},qr.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size},qr.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)},qr.prototype.scheduleFlush=function(t){this.flushInterval=t,this.stopped||(this.timeoutID=setTimeout(A.bind(this.flush,this),this.flushInterval))},qr.prototype.flush=function(t){try{if(this.requestInProgress){co.log("Flush: Request already in progress");return}t=t||{};var e=this.libConfig.batch_request_timeout_ms,r=new Date().getTime(),i=this.batchSize,a=this.queue.fillBatch(i),s=[],c={};if(A.each(a,function(m){var g=m.payload;this.beforeSendHook&&!m.orphaned&&(g=this.beforeSendHook(g)),g&&s.push(g),c[m.id]=g},this),s.length<1){this.resetFlush();return}this.requestInProgress=!0;var u=A.bind(function(m){this.requestInProgress=!1;try{var g=!1;if(t.unloading)this.queue.updatePayloads(c);else if(A.isObject(m)&&m.error==="timeout"&&new Date().getTime()-r>=e)this.reportError("Network timeout; retrying"),this.flush();else if(A.isObject(m)&&m.xhr_req&&(m.xhr_req.status>=500||m.xhr_req.status===429||m.error==="timeout")){var h=this.flushInterval*2,y=m.xhr_req.responseHeaders;if(y){var E=y["Retry-After"];E&&(h=parseInt(E,10)*1e3||h)}h=Math.min(yx,h),this.reportError("Error; retry in "+h+" ms"),this.scheduleFlush(h)}else if(A.isObject(m)&&m.xhr_req&&m.xhr_req.status===413)if(a.length>1){var x=Math.max(1,Math.floor(i/2));this.batchSize=Math.min(this.batchSize,x,a.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",a),this.resetBatchSize(),g=!0;else g=!0;g&&this.queue.removeItemsByID(A.map(a,function(D){return D.id}),A.bind(function(D){D?(this.consecutiveRemovalFailures=0,this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())},this))}catch(D){this.reportError("Error handling API response",D),this.resetFlush()}},this),p={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:e};t.unloading&&(p.transport="sendBeacon"),co.log("MIXPANEL REQUEST:",s),this.sendRequest(s,p,u)}catch(m){this.reportError("Error flushing request queue",m),this.resetFlush()}},qr.prototype.reportError=function(t,e){if(co.error.apply(co.error,arguments),this.errorReporter)try{e instanceof Error||(e=new Error(t)),this.errorReporter(t,e)}catch(r){co.error(r)}};var vx="__mp_opt_in_out_";function bx(t,e){Dg(!0,t,e)}function wx(t,e){Dg(!1,t,e)}function Sx(t,e){return Pg(t,e)==="1"}function Rg(t,e){if(Ix(e))return Xt.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var r=Pg(t,e)==="0";return r&&Xt.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),r}function uo(t){return Ku(t,function(e){return this.get_config(e)})}function Tn(t){return Ku(t,function(e){return this._get_config(e)})}function wi(t){return Ku(t,function(e){return this._get_config(e)})}function Ex(t,e){e=e||{},Gu(e).remove(Qu(t,e),!!e.crossSubdomainCookie,e.cookieDomain)}function Gu(t){return t=t||{},t.persistenceType==="localStorage"?A.localStorage:A.cookie}function Qu(t,e){return e=e||{},(e.persistencePrefix||vx)+t}function Pg(t,e){return Gu(e).get(Qu(t,e))}function Ix(t){if(t&&t.ignoreDnt)return!1;var e=t&&t.window||Ue,r=e.navigator||{},i=!1;return A.each([r.doNotTrack,r.msDoNotTrack,e.doNotTrack],function(a){A.includes([!0,1,"1","yes"],a)&&(i=!0)}),i}function Dg(t,e,r){if(!A.isString(e)||!e.length){Xt.error("gdpr."+(t?"optIn":"optOut")+" called with an invalid token");return}r=r||{},Gu(r).set(Qu(e,r),t?1:0,A.isNumber(r.cookieExpiration)?r.cookieExpiration:null,!!r.crossSubdomainCookie,!!r.secureCookie,!!r.crossSiteCookie,r.cookieDomain),r.track&&t&&r.track(r.trackEventName||"$opt_in",r.trackProperties,{send_immediately:!0})}function Ku(t,e){return function(){var r=!1;try{var i=e.call(this,"token"),a=e.call(this,"ignore_dnt"),s=e.call(this,"opt_out_tracking_persistence_type"),c=e.call(this,"opt_out_tracking_cookie_prefix"),u=e.call(this,"window");i&&(r=Rg(i,{ignoreDnt:a,persistenceType:s,persistencePrefix:c,window:u}))}catch(m){Xt.error("Unexpected error when checking tracking opt-out status: "+m)}if(!r)return t.apply(this,arguments);var p=arguments[arguments.length-1];typeof p=="function"&&p(0)}}var An="$set",Si="$set_once",Dr="$unset",Qn="$add",an="$append",Kn="$union",Cn="$remove",Ox="$delete",jg={set_action:function(t,e){var r={},i={};return A.isObject(t)?A.each(t,function(a,s){this._is_reserved_property(s)||(i[s]=a)},this):i[t]=e,r[An]=i,r},unset_action:function(t){var e={},r=[];return A.isArray(t)||(t=[t]),A.each(t,function(i){this._is_reserved_property(i)||r.push(i)},this),e[Dr]=r,e},set_once_action:function(t,e){var r={},i={};return A.isObject(t)?A.each(t,function(a,s){this._is_reserved_property(s)||(i[s]=a)},this):i[t]=e,r[Si]=i,r},union_action:function(t,e){var r={},i={};return A.isObject(t)?A.each(t,function(a,s){this._is_reserved_property(s)||(i[s]=A.isArray(a)?a:[a])},this):i[t]=A.isArray(e)?e:[e],r[Kn]=i,r},append_action:function(t,e){var r={},i={};return A.isObject(t)?A.each(t,function(a,s){this._is_reserved_property(s)||(i[s]=a)},this):i[t]=e,r[an]=i,r},remove_action:function(t,e){var r={},i={};return A.isObject(t)?A.each(t,function(a,s){this._is_reserved_property(s)||(i[s]=a)},this):i[t]=e,r[Cn]=i,r},delete_action:function(){var t={};return t[Ox]="",t}},oe=function(){};A.extend(oe.prototype,jg),oe.prototype._init=function(t,e,r){this._mixpanel=t,this._group_key=e,this._group_id=r},oe.prototype.set=wi(function(t,e,r){var i=this.set_action(t,e);return A.isObject(t)&&(r=e),this._send_request(i,r)}),oe.prototype.set_once=wi(function(t,e,r){var i=this.set_once_action(t,e);return A.isObject(t)&&(r=e),this._send_request(i,r)}),oe.prototype.unset=wi(function(t,e){var r=this.unset_action(t);return this._send_request(r,e)}),oe.prototype.union=wi(function(t,e,r){A.isObject(t)&&(r=e);var i=this.union_action(t,e);return this._send_request(i,r)}),oe.prototype.delete=wi(function(t){var e=this.delete_action();return this._send_request(e,t)}),oe.prototype.remove=wi(function(t,e,r){var i=this.remove_action(t,e);return this._send_request(i,r)}),oe.prototype._send_request=function(t,e){t.$group_key=this._group_key,t.$group_id=this._group_id,t.$token=this._get_config("token");var r=A.encodeDates(t);return this._mixpanel._track_or_batch({type:"groups",data:r,endpoint:this._get_config("api_host")+"/groups/",batcher:this._mixpanel.request_batchers.groups},e)},oe.prototype._is_reserved_property=function(t){return t==="$group_key"||t==="$group_id"},oe.prototype._get_config=function(t){return this._mixpanel.get_config(t)},oe.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id},oe.prototype.remove=oe.prototype.remove,oe.prototype.set=oe.prototype.set,oe.prototype.set_once=oe.prototype.set_once,oe.prototype.union=oe.prototype.union,oe.prototype.unset=oe.prototype.unset,oe.prototype.toString=oe.prototype.toString;var Rt=function(){};A.extend(Rt.prototype,jg),Rt.prototype._init=function(t){this._mixpanel=t},Rt.prototype.set=Tn(function(t,e,r){var i=this.set_action(t,e);return A.isObject(t)&&(r=e),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(Jt.referrer),i[An]=A.extend({},A.info.people_properties(),this._mixpanel.persistence.get_referrer_info(),i[An]),this._send_request(i,r)}),Rt.prototype.set_once=Tn(function(t,e,r){var i=this.set_once_action(t,e);return A.isObject(t)&&(r=e),this._send_request(i,r)}),Rt.prototype.unset=Tn(function(t,e){var r=this.unset_action(t);return this._send_request(r,e)}),Rt.prototype.increment=Tn(function(t,e,r){var i={},a={};return A.isObject(t)?(A.each(t,function(s,c){if(!this._is_reserved_property(c))if(isNaN(parseFloat(s))){Xt.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else a[c]=s},this),r=e):(A.isUndefined(e)&&(e=1),a[t]=e),i[Qn]=a,this._send_request(i,r)}),Rt.prototype.append=Tn(function(t,e,r){A.isObject(t)&&(r=e);var i=this.append_action(t,e);return this._send_request(i,r)}),Rt.prototype.remove=Tn(function(t,e,r){A.isObject(t)&&(r=e);var i=this.remove_action(t,e);return this._send_request(i,r)}),Rt.prototype.union=Tn(function(t,e,r){A.isObject(t)&&(r=e);var i=this.union_action(t,e);return this._send_request(i,r)}),Rt.prototype.track_charge=Tn(function(t,e,r){if(!A.isNumber(t)&&(t=parseFloat(t),isNaN(t))){Xt.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}return this.append("$transactions",A.extend({$amount:t},e),r)}),Rt.prototype.clear_charges=function(t){return this.set("$transactions",[],t)},Rt.prototype.delete_user=function(){if(!this._identify_called()){Xt.error("mixpanel.people.delete_user() requires you to call identify() first");return}var t={$delete:this._mixpanel.get_distinct_id()};return this._send_request(t)},Rt.prototype.toString=function(){return this._mixpanel.toString()+".people"},Rt.prototype._send_request=function(t,e){t.$token=this._get_config("token"),t.$distinct_id=this._mixpanel.get_distinct_id();var r=this._mixpanel.get_property("$device_id"),i=this._mixpanel.get_property("$user_id"),a=this._mixpanel.get_property("$had_persisted_distinct_id");r&&(t.$device_id=r),i&&(t.$user_id=i),a&&(t.$had_persisted_distinct_id=a);var s=A.encodeDates(t);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:s,endpoint:this._get_config("api_host")+"/engage/",batcher:this._mixpanel.request_batchers.people},e):(this._enqueue(t),A.isUndefined(e)||(this._get_config("verbose")?e({status:-1,error:null}):e(-1)),A.truncate(s,255))},Rt.prototype._get_config=function(t){return this._mixpanel.get_config(t)},Rt.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0},Rt.prototype._enqueue=function(t){An in t?this._mixpanel.persistence._add_to_people_queue(An,t):Si in t?this._mixpanel.persistence._add_to_people_queue(Si,t):Dr in t?this._mixpanel.persistence._add_to_people_queue(Dr,t):Qn in t?this._mixpanel.persistence._add_to_people_queue(Qn,t):an in t?this._mixpanel.persistence._add_to_people_queue(an,t):Cn in t?this._mixpanel.persistence._add_to_people_queue(Cn,t):Kn in t?this._mixpanel.persistence._add_to_people_queue(Kn,t):Xt.error("Invalid call to _enqueue():",t)},Rt.prototype._flush_one_queue=function(t,e,r,i){var a=this,s=A.extend({},this._mixpanel.persistence._get_queue(t)),c=s;!A.isUndefined(s)&&A.isObject(s)&&!A.isEmptyObject(s)&&(a._mixpanel.persistence._pop_from_people_queue(t,s),i&&(c=i(s)),e.call(a,c,function(u,p){u===0&&a._mixpanel.persistence._add_to_people_queue(t,s),A.isUndefined(r)||r(u,p)}))},Rt.prototype._flush=function(t,e,r,i,a,s,c){var u=this,p=this._mixpanel.persistence._get_queue(an),m=this._mixpanel.persistence._get_queue(Cn);if(this._flush_one_queue(An,this.set,t),this._flush_one_queue(Si,this.set_once,i),this._flush_one_queue(Dr,this.unset,s,function(U){return A.keys(U)}),this._flush_one_queue(Qn,this.increment,e),this._flush_one_queue(Kn,this.union,a),!A.isUndefined(p)&&A.isArray(p)&&p.length){for(var g,h=function(U,j){U===0&&u._mixpanel.persistence._add_to_people_queue(an,g),A.isUndefined(r)||r(U,j)},y=p.length-1;y>=0;y--)g=p.pop(),A.isEmptyObject(g)||u.append(g,h);u._mixpanel.persistence.save()}if(!A.isUndefined(m)&&A.isArray(m)&&m.length){for(var E,x=function(U,j){U===0&&u._mixpanel.persistence._add_to_people_queue(Cn,E),A.isUndefined(c)||c(U,j)},D=m.length-1;D>=0;D--)E=m.pop(),A.isEmptyObject(E)||u.remove(E,x);u._mixpanel.persistence.save()}},Rt.prototype._is_reserved_property=function(t){return t==="$distinct_id"||t==="$token"||t==="$device_id"||t==="$user_id"||t==="$had_persisted_distinct_id"},Rt.prototype.set=Rt.prototype.set,Rt.prototype.set_once=Rt.prototype.set_once,Rt.prototype.unset=Rt.prototype.unset,Rt.prototype.increment=Rt.prototype.increment,Rt.prototype.append=Rt.prototype.append,Rt.prototype.remove=Rt.prototype.remove,Rt.prototype.union=Rt.prototype.union,Rt.prototype.track_charge=Rt.prototype.track_charge,Rt.prototype.clear_charges=Rt.prototype.clear_charges,Rt.prototype.delete_user=Rt.prototype.delete_user,Rt.prototype.toString=Rt.prototype.toString;var Zu="__mps",Ju="__mpso",Xu="__mpus",tl="__mpa",el="__mpap",rl="__mpr",nl="__mpu",Ug="$people_distinct_id",Zs="__alias",lo="__timers",Tx=[Zu,Ju,Xu,tl,el,rl,nl,Ug,Zs,lo],Bt=function(t){this.props={},this.campaign_params_saved=!1,t.persistence_name?this.name="mp_"+t.persistence_name:this.name="mp_"+t.token+"_mixpanel";var e=t.persistence;e!=="cookie"&&e!=="localStorage"&&(Xt.critical("Unknown persistence type "+e+"; falling back to cookie"),e=t.persistence="cookie"),e==="localStorage"&&A.localStorage.is_supported()?this.storage=A.localStorage:this.storage=A.cookie,this.load(),this.update_config(t),this.upgrade(t),this.save()};Bt.prototype.properties=function(){var t={};return A.each(this.props,function(e,r){A.include(Tx,r)||(t[r]=e)}),t},Bt.prototype.load=function(){if(!this.disabled){var t=this.storage.parse(this.name);t&&(this.props=A.extend({},t))}},Bt.prototype.upgrade=function(t){var e=t.upgrade,r,i;e&&(r="mp_super_properties",typeof e=="string"&&(r=e),i=this.storage.parse(r),this.storage.remove(r),this.storage.remove(r,!0),i&&(this.props=A.extend(this.props,i.all,i.events))),!t.cookie_name&&t.name!=="mixpanel"&&(r="mp_"+t.token+"_"+t.name,i=this.storage.parse(r),i&&(this.storage.remove(r),this.storage.remove(r,!0),this.register_once(i))),this.storage===A.localStorage&&(i=A.cookie.parse(this.name),A.cookie.remove(this.name),A.cookie.remove(this.name,!0),i&&this.register_once(i))},Bt.prototype.save=function(){this.disabled||this.storage.set(this.name,A.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)},Bt.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)},Bt.prototype.clear=function(){this.remove(),this.props={}},Bt.prototype.register_once=function(t,e,r){return A.isObject(t)?(typeof e>"u"&&(e="None"),this.expire_days=typeof r>"u"?this.default_expiry:r,A.each(t,function(i,a){(!this.props.hasOwnProperty(a)||this.props[a]===e)&&(this.props[a]=i)},this),this.save(),!0):!1},Bt.prototype.register=function(t,e){return A.isObject(t)?(this.expire_days=typeof e>"u"?this.default_expiry:e,A.extend(this.props,t),this.save(),!0):!1},Bt.prototype.unregister=function(t){t in this.props&&(delete this.props[t],this.save())},Bt.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(A.info.campaignParams()),this.campaign_params_saved=!0)},Bt.prototype.update_search_keyword=function(t){this.register(A.info.searchInfo(t))},Bt.prototype.update_referrer_info=function(t){this.register_once({$initial_referrer:t||"$direct",$initial_referring_domain:A.info.referringDomain(t)||"$direct"},"")},Bt.prototype.get_referrer_info=function(){return A.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},Bt.prototype.safe_merge=function(t){return A.each(this.props,function(e,r){r in t||(t[r]=e)}),t},Bt.prototype.update_config=function(t){this.default_expiry=this.expire_days=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cookie_domain(t.cookie_domain),this.set_cross_site(t.cross_site_cookie),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie)},Bt.prototype.set_disabled=function(t){this.disabled=t,this.disabled?this.remove():this.save()},Bt.prototype.set_cookie_domain=function(t){t!==this.cookie_domain&&(this.remove(),this.cookie_domain=t,this.save())},Bt.prototype.set_cross_site=function(t){t!==this.cross_site&&(this.cross_site=t,this.remove(),this.save())},Bt.prototype.set_cross_subdomain=function(t){t!==this.cross_subdomain&&(this.cross_subdomain=t,this.remove(),this.save())},Bt.prototype.get_cross_subdomain=function(){return this.cross_subdomain},Bt.prototype.set_secure=function(t){t!==this.secure&&(this.secure=!!t,this.remove(),this.save())},Bt.prototype._add_to_people_queue=function(t,e){var r=this._get_queue_key(t),i=e[t],a=this._get_or_create_queue(An),s=this._get_or_create_queue(Si),c=this._get_or_create_queue(Dr),u=this._get_or_create_queue(Qn),p=this._get_or_create_queue(Kn),m=this._get_or_create_queue(Cn,[]),g=this._get_or_create_queue(an,[]);r===Zu?(A.extend(a,i),this._pop_from_people_queue(Qn,i),this._pop_from_people_queue(Kn,i),this._pop_from_people_queue(Dr,i)):r===Ju?(A.each(i,function(h,y){y in s||(s[y]=h)}),this._pop_from_people_queue(Dr,i)):r===Xu?A.each(i,function(h){A.each([a,s,u,p],function(y){h in y&&delete y[h]}),A.each(g,function(y){h in y&&delete y[h]}),c[h]=!0}):r===tl?(A.each(i,function(h,y){y in a?a[y]+=h:(y in u||(u[y]=0),u[y]+=h)},this),this._pop_from_people_queue(Dr,i)):r===nl?(A.each(i,function(h,y){A.isArray(h)&&(y in p||(p[y]=[]),p[y]=p[y].concat(h))}),this._pop_from_people_queue(Dr,i)):r===rl?(m.push(i),this._pop_from_people_queue(an,i)):r===el&&(g.push(i),this._pop_from_people_queue(Dr,i)),Xt.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),Xt.log(e),this.save()},Bt.prototype._pop_from_people_queue=function(t,e){var r=this._get_queue(t);A.isUndefined(r)||(A.each(e,function(i,a){t===an||t===Cn?A.each(r,function(s){s[a]===i&&delete s[a]}):delete r[a]},this),this.save())},Bt.prototype._get_queue_key=function(t){if(t===An)return Zu;if(t===Si)return Ju;if(t===Dr)return Xu;if(t===Qn)return tl;if(t===an)return el;if(t===Cn)return rl;if(t===Kn)return nl;Xt.error("Invalid queue:",t)},Bt.prototype._get_queue=function(t){return this.props[this._get_queue_key(t)]},Bt.prototype._get_or_create_queue=function(t,e){var r=this._get_queue_key(t);return e=A.isUndefined(e)?{}:e,this.props[r]||(this.props[r]=e)},Bt.prototype.set_event_timer=function(t,e){var r=this.props[lo]||{};r[t]=e,this.props[lo]=r,this.save()},Bt.prototype.remove_event_timer=function(t){var e=this.props[lo]||{},r=e[t];return A.isUndefined(r)||(delete this.props[lo][t],this.save()),r};var il,Le,Lg=0,Ax=1,Cx=function(t){return t},po=function(){},Sr="mixpanel",Bg="base64",xx="json",Ei=Ue.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,fo=!A.isUndefined(fetch)&&typeof fetch=="function",Mg=!Ei&&!fo&&Pr.indexOf("MSIE")===-1&&Pr.indexOf("Mozilla")===-1,Js=null;on.sendBeacon&&(Js=function(){return on.sendBeacon.apply(on,arguments)});var Fg={api_host:"https://api-js.mixpanel.com",api_method:"POST",api_transport:"XHR",api_payload_format:Bg,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:po,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:po,store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{}},qg=!1,rt=function(){},ol=function(t,e,r){var i,a=r===Sr?Le:Le[r];if(a&&il===Lg)i=a;else{if(a&&!A.isArray(a)){Xt.error("You have already initialized "+r);return}i=new rt}return i._cached_groups={},i._init(t,e,r),i.people=new Rt,i.people._init(i),In.DEBUG=In.DEBUG||i.get_config("debug"),!A.isUndefined(a)&&A.isArray(a)&&(i._execute_array.call(i.people,a.people),i._execute_array(a)),i};rt.prototype.init=function(t,e,r){if(A.isUndefined(r)){this.report_error("You must name your new library: init(token, config, name)");return}if(r===Sr){this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var i=ol(t,e,r);return Le[r]=i,i._loaded(),i},rt.prototype._init=function(t,e,r){e=e||{},this.__loaded=!0,this.config={};var i={};if(!("api_payload_format"in e)){var a=e.api_host||Fg.api_host;a.match(/\.mixpanel\.com$/)&&(i.api_payload_format=xx)}if(this.set_config(A.extend({},Fg,i,e,{name:r,token:t,callback_fn:(r===Sr?r:Sr+"."+r)+"._jsc"})),this._jsc=po,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests){if(!A.localStorage.is_supported(!0)||!Ei)this._batch_requests=!1,Xt.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support");else if(this.init_batchers(),Js&&Ue.addEventListener){var s=A.bind(function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})},this);Ue.addEventListener("pagehide",function(u){u.persisted&&s()}),Ue.addEventListener("visibilitychange",function(){Jt.visibilityState==="hidden"&&s()})}}this.persistence=this.cookie=new Bt(this.config),this.unpersisted_superprops={},this._gdpr_init();var c=A.UUID();this.get_distinct_id()||this.register_once({distinct_id:c,$device_id:c},"")},rt.prototype._loaded=function(){this.get_config("loaded")(this),this._set_default_superprops()},rt.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(Jt.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(Jt.referrer)},rt.prototype._dom_loaded=function(){A.each(this.__dom_loaded_queue,function(t){this._track_dom.apply(this,t)},this),this.has_opted_out_tracking()||A.each(this.__request_queue,function(t){this._send_request.apply(this,t)},this),delete this.__dom_loaded_queue,delete this.__request_queue},rt.prototype._track_dom=function(t,e){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!qg)return this.__dom_loaded_queue.push([t,e]),!1;var r=new t().init(this);return r.track.apply(r,e)},rt.prototype._prepare_callback=function(t,e){if(A.isUndefined(t))return null;if(Ei||fo){var r=function(c){t(c,e)};return r}else{var i=this._jsc,a=""+Math.floor(Math.random()*1e8),s=this.get_config("callback_fn")+"["+a+"]";return i[a]=function(c){delete i[a],t(c,e)},s}},rt.prototype._send_request=function(t,e,r,i){var a=!0;if(Mg)return this.__request_queue.push(arguments),a;var s={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},c=null;!i&&(A.isFunction(r)||typeof r=="string")&&(i=r,r=null),r=A.extend(s,r||{}),!Ei&&!fo&&(r.method="GET");var u=r.method==="POST",p=Js&&u&&r.transport.toLowerCase()==="sendbeacon",m=r.verbose;e.verbose&&(m=!0),this.get_config("test")&&(e.test=1),m&&(e.verbose=1),this.get_config("img")&&(e.img=1),!Ei&&!fo&&(i?e.callback=i:(m||this.get_config("test"))&&(e.callback="(function(){})")),e.ip=this.get_config("ip")?1:0,e._=new Date().getTime().toString(),u&&(c="data="+encodeURIComponent(e.data),delete e.data),t+="?"+A.HTTPBuildQuery(e);var g=this;if("img"in e){var h=Jt.createElement("img");h.src=t,Jt.body.appendChild(h)}else if(p){try{a=Js(t,c)}catch(R){g.report_error(R),a=!1}try{i&&i(a?1:0)}catch(R){g.report_error(R)}}else if(Ei)try{var y=new XMLHttpRequest;y.open(r.method,t,!0);var E=this.get_config("xhr_headers");if(u&&(E["Content-Type"]="application/x-www-form-urlencoded"),A.each(E,function(R,w){y.setRequestHeader(w,R)}),r.timeout_ms&&typeof y.timeout<"u"){y.timeout=r.timeout_ms;var x=new Date().getTime()}y.withCredentials=!0,y.onreadystatechange=function(){if(y.readyState===4)if(y.status===200){if(i)if(m){var R;try{R=A.JSONDecode(y.responseText)}catch(T){if(g.report_error(T),r.ignore_json_errors)R=y.responseText;else return}i(R)}else i(Number(y.responseText))}else{var w;y.timeout&&!y.status&&new Date().getTime()-x>=y.timeout?w="timeout":w="Bad HTTP status: "+y.status+" "+y.statusText,g.report_error(w),i&&i(m?{status:0,error:w,xhr_req:y}:0)}},y.send(c)}catch(R){g.report_error(R),a=!1}else if(fo)try{var E=this.get_config("xhr_headers");u&&(E["Content-Type"]="application/x-www-form-urlencoded");var D={method:r.method,mode:"cors",credentials:"include",headers:E,body:c};fetch(t,D).then(function(w){return w.text().then(function(T){return{status:w.status,statusText:w.statusText,headers:w.headers,body:T}})}).then(function(w){if(w.status===200){if(i){var T=w.body;if(m){var P;try{P=A.JSONDecode(T)}catch(Y){if(g.report_error(Y),r.ignore_json_errors)P=T;else return}i(P)}else i(Number(T))}}else{var F="Bad HTTP status: "+w.status+" "+w.statusText;if(g.report_error(F),i)if(m){var V={status:w.status,responseHeaders:w.headers};i({status:0,error:F,xhr_req:V})}else i(0)}})}catch(R){g.report_error(R),a=!1}else{var U=Jt.createElement("script");U.type="text/javascript",U.async=!0,U.defer=!0,U.src=t;var j=Jt.getElementsByTagName("script")[0];j.parentNode.insertBefore(U,j)}return a},rt.prototype._execute_array=function(t){var e,r=[],i=[],a=[];A.each(t,function(c){c&&(e=c[0],A.isArray(e)?a.push(c):typeof c=="function"?c.call(this):A.isArray(c)&&e==="alias"?r.push(c):A.isArray(c)&&e.indexOf("track")!==-1&&typeof this[e]=="function"?a.push(c):i.push(c))},this);var s=function(c,u){A.each(c,function(p){if(A.isArray(p[0])){var m=u;A.each(p,function(g){m=m[g[0]].apply(m,g.slice(1))})}else this[p[0]].apply(this,p.slice(1))},u)};s(r,this),s(i,this),s(a,this)},rt.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events},rt.prototype.init_batchers=function(){var t=this.get_config("token");if(!this.are_batchers_initialized()){var e=A.bind(function(r){return new qr("__mpq_"+t+r.queue_suffix,{libConfig:this.config,sendRequestFunc:A.bind(function(i,a,s){this._send_request(this.get_config("api_host")+r.endpoint,this._encode_data_for_request(i),a,this._prepare_callback(s,i))},this),beforeSendHook:A.bind(function(i){return this._run_hook("before_send_"+r.type,i)},this),errorReporter:this.get_config("error_reporter"),stopAllBatchingFunc:A.bind(this.stop_batch_senders,this)})},this);this.request_batchers={events:e({type:"events",endpoint:"/track/",queue_suffix:"_ev"}),people:e({type:"people",endpoint:"/engage/",queue_suffix:"_pp"}),groups:e({type:"groups",endpoint:"/groups/",queue_suffix:"_gr"})}}this.get_config("batch_autostart")&&this.start_batch_senders()},rt.prototype.start_batch_senders=function(){this.are_batchers_initialized()&&(this._batch_requests=!0,A.each(this.request_batchers,function(t){t.start()}))},rt.prototype.stop_batch_senders=function(){this._batch_requests=!1,A.each(this.request_batchers,function(t){t.stop(),t.clear()})},rt.prototype.push=function(t){this._execute_array([t])},rt.prototype.disable=function(t){typeof t>"u"?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(t)},rt.prototype._encode_data_for_request=function(t){var e=A.JSONEncode(t);return this.get_config("api_payload_format")===Bg&&(e=A.base64Encode(e)),{data:e}},rt.prototype._track_or_batch=function(t,e){var r=A.truncate(t.data,255),i=t.endpoint,a=t.batcher,s=t.should_send_immediately,c=t.send_request_options||{};e=e||po;var u=!0,p=A.bind(function(){return c.skip_hooks||(r=this._run_hook("before_send_"+t.type,r)),r?(Xt.log("MIXPANEL REQUEST:"),Xt.log(r),this._send_request(i,this._encode_data_for_request(r),c,this._prepare_callback(e,r))):null},this);return this._batch_requests&&!s?a.enqueue(r,function(m){m?e(1,r):p()}):u=p(),u&&r},rt.prototype.track=uo(function(t,e,r,i){!i&&typeof r=="function"&&(i=r,r=null),r=r||{};var a=r.transport;a&&(r.transport=a);var s=r.send_immediately;if(typeof i!="function"&&(i=po),A.isUndefined(t)){this.report_error("No event name provided to mixpanel.track");return}if(this._event_is_disabled(t)){i(0);return}e=e||{},e.token=this.get_config("token");var c=this.persistence.remove_event_timer(t);if(!A.isUndefined(c)){var u=new Date().getTime()-c;e.$duration=parseFloat((u/1e3).toFixed(3))}this._set_default_superprops(),e=A.extend({},A.info.properties(),this.persistence.properties(),this.unpersisted_superprops,e);var p=this.get_config("property_blacklist");A.isArray(p)?A.each(p,function(h){delete e[h]}):this.report_error("Invalid value for property_blacklist config: "+p);var m={event:t,properties:e},g=this._track_or_batch({type:"events",data:m,endpoint:this.get_config("api_host")+"/track/",batcher:this.request_batchers.events,should_send_immediately:s,send_request_options:r},i);return g}),rt.prototype.set_group=uo(function(t,e,r){A.isArray(e)||(e=[e]);var i={};return i[t]=e,this.register(i),this.people.set(t,e,r)}),rt.prototype.add_group=uo(function(t,e,r){var i=this.get_property(t);if(i===void 0){var a={};a[t]=[e],this.register(a)}else i.indexOf(e)===-1&&(i.push(e),this.register(a));return this.people.union(t,e,r)}),rt.prototype.remove_group=uo(function(t,e,r){var i=this.get_property(t);if(i!==void 0){var a=i.indexOf(e);a>-1&&(i.splice(a,1),this.register({group_key:i})),i.length===0&&this.unregister(t)}return this.people.remove(t,e,r)}),rt.prototype.track_with_groups=uo(function(t,e,r,i){var a=A.extend({},e||{});return A.each(r,function(s,c){s!=null&&(a[c]=s)}),this.track(t,a,i)}),rt.prototype._create_map_key=function(t,e){return t+"_"+JSON.stringify(e)},rt.prototype._remove_group_from_cache=function(t,e){delete this._cached_groups[this._create_map_key(t,e)]},rt.prototype.get_group=function(t,e){var r=this._create_map_key(t,e),i=this._cached_groups[r];return(i===void 0||i._group_key!==t||i._group_id!==e)&&(i=new oe,i._init(this,t,e),this._cached_groups[r]=i),i},rt.prototype.track_pageview=function(t){A.isUndefined(t)&&(t=Jt.location.href),this.track("mp_page_view",A.info.pageviewInfo(t))},rt.prototype.track_links=function(){return this._track_dom.call(this,bi,arguments)},rt.prototype.track_forms=function(){return this._track_dom.call(this,Ks,arguments)},rt.prototype.time_event=function(t){if(A.isUndefined(t)){this.report_error("No event name provided to mixpanel.time_event");return}this._event_is_disabled(t)||this.persistence.set_event_timer(t,new Date().getTime())};var kx={persistent:!0},sl=function(t){var e;return A.isObject(t)?e=t:A.isUndefined(t)?e={}:e={days:t},A.extend({},kx,e)};rt.prototype.register=function(t,e){var r=sl(e);r.persistent?this.persistence.register(t,r.days):A.extend(this.unpersisted_superprops,t)},rt.prototype.register_once=function(t,e,r){var i=sl(r);i.persistent?this.persistence.register_once(t,e,i.days):(typeof e>"u"&&(e="None"),A.each(t,function(a,s){(!this.unpersisted_superprops.hasOwnProperty(s)||this.unpersisted_superprops[s]===e)&&(this.unpersisted_superprops[s]=a)},this))},rt.prototype.unregister=function(t,e){e=sl(e),e.persistent?this.persistence.unregister(t):delete this.unpersisted_superprops[t]},rt.prototype._register_single=function(t,e){var r={};r[t]=e,this.register(r)},rt.prototype.identify=function(t,e,r,i,a,s,c,u){var p=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var m=p;this.register_once({$had_persisted_distinct_id:!0,$device_id:m},"")}t!==p&&t!==this.get_property(Zs)&&(this.unregister(Zs),this.register({distinct_id:t})),this._flags.identify_called=!0,this.people._flush(e,r,i,a,s,c,u),t!==p&&this.track("$identify",{distinct_id:t,$anon_distinct_id:p},{skip_hooks:!0})},rt.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var t=A.UUID();this.register_once({distinct_id:t,$device_id:t},"")},rt.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},rt.prototype.alias=function(t,e){if(t===this.get_property(Ug))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var r=this;return A.isUndefined(e)&&(e=this.get_distinct_id()),t!==e?(this._register_single(Zs,t),this.track("$create_alias",{alias:t,distinct_id:e},{skip_hooks:!0},function(){r.identify(t)})):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(t),-1)},rt.prototype.name_tag=function(t){this._register_single("mp_name_tag",t)},rt.prototype.set_config=function(t){if(A.isObject(t)){A.extend(this.config,t);var e=t.batch_size;e&&A.each(this.request_batchers,function(r){r.resetBatchSize()}),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),In.DEBUG=In.DEBUG||this.get_config("debug")}},rt.prototype.get_config=function(t){return this.config[t]},rt.prototype._run_hook=function(t){var e=(this.config.hooks[t]||Cx).apply(this,Gn.call(arguments,1));return typeof e>"u"&&(this.report_error(t+" hook did not return a value"),e=null),e},rt.prototype.get_property=function(t){return this.persistence.props[t]},rt.prototype.toString=function(){var t=this.get_config("name");return t!==Sr&&(t=Sr+"."+t),t},rt.prototype._event_is_disabled=function(t){return A.isBlockedUA(Pr)||this._flags.disable_all_events||A.include(this.__disabled_events,t)},rt.prototype._gdpr_init=function(){var t=this.get_config("opt_out_tracking_persistence_type")==="localStorage";t&&A.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_tracking()&&(this.get_config("opt_out_tracking_by_default")||A.cookie.get("mp_optout"))&&(A.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))},rt.prototype._gdpr_update_persistence=function(t){var e;if(t&&t.clear_persistence)e=!0;else if(t&&t.enable_persistence)e=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==e&&this.persistence.set_disabled(e),e&&A.each(this.request_batchers,function(r){r.clear()})},rt.prototype._gdpr_call_func=function(t,e){return e=A.extend({track:A.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},e),A.localStorage.is_supported()||(e.persistence_type="cookie"),t(this.get_config("token"),{track:e.track,trackEventName:e.track_event_name,trackProperties:e.track_properties,persistenceType:e.persistence_type,persistencePrefix:e.cookie_prefix,cookieDomain:e.cookie_domain,cookieExpiration:e.cookie_expiration,crossSiteCookie:e.cross_site_cookie,crossSubdomainCookie:e.cross_subdomain_cookie,secureCookie:e.secure_cookie,ignoreDnt:e.ignore_dnt})},rt.prototype.opt_in_tracking=function(t){t=A.extend({enable_persistence:!0},t),this._gdpr_call_func(bx,t),this._gdpr_update_persistence(t)},rt.prototype.opt_out_tracking=function(t){t=A.extend({clear_persistence:!0,delete_user:!0},t),t.delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(wx,t),this._gdpr_update_persistence(t)},rt.prototype.has_opted_in_tracking=function(t){return this._gdpr_call_func(Sx,t)},rt.prototype.has_opted_out_tracking=function(t){return this._gdpr_call_func(Rg,t)},rt.prototype.clear_opt_in_out_tracking=function(t){t=A.extend({enable_persistence:!0},t),this._gdpr_call_func(Ex,t),this._gdpr_update_persistence(t)},rt.prototype.report_error=function(t,e){Xt.error.apply(Xt.error,arguments);try{!e&&!(t instanceof Error)&&(t=new Error(t)),this.get_config("error_reporter")(t,e)}catch(r){Xt.error(r)}},rt.prototype.init=rt.prototype.init,rt.prototype.reset=rt.prototype.reset,rt.prototype.disable=rt.prototype.disable,rt.prototype.time_event=rt.prototype.time_event,rt.prototype.track=rt.prototype.track,rt.prototype.track_links=rt.prototype.track_links,rt.prototype.track_forms=rt.prototype.track_forms,rt.prototype.track_pageview=rt.prototype.track_pageview,rt.prototype.register=rt.prototype.register,rt.prototype.register_once=rt.prototype.register_once,rt.prototype.unregister=rt.prototype.unregister,rt.prototype.identify=rt.prototype.identify,rt.prototype.alias=rt.prototype.alias,rt.prototype.name_tag=rt.prototype.name_tag,rt.prototype.set_config=rt.prototype.set_config,rt.prototype.get_config=rt.prototype.get_config,rt.prototype.get_property=rt.prototype.get_property,rt.prototype.get_distinct_id=rt.prototype.get_distinct_id,rt.prototype.toString=rt.prototype.toString,rt.prototype.opt_out_tracking=rt.prototype.opt_out_tracking,rt.prototype.opt_in_tracking=rt.prototype.opt_in_tracking,rt.prototype.has_opted_out_tracking=rt.prototype.has_opted_out_tracking,rt.prototype.has_opted_in_tracking=rt.prototype.has_opted_in_tracking,rt.prototype.clear_opt_in_out_tracking=rt.prototype.clear_opt_in_out_tracking,rt.prototype.get_group=rt.prototype.get_group,rt.prototype.set_group=rt.prototype.set_group,rt.prototype.add_group=rt.prototype.add_group,rt.prototype.remove_group=rt.prototype.remove_group,rt.prototype.track_with_groups=rt.prototype.track_with_groups,rt.prototype.start_batch_senders=rt.prototype.start_batch_senders,rt.prototype.stop_batch_senders=rt.prototype.stop_batch_senders,Bt.prototype.properties=Bt.prototype.properties,Bt.prototype.update_search_keyword=Bt.prototype.update_search_keyword,Bt.prototype.update_referrer_info=Bt.prototype.update_referrer_info,Bt.prototype.get_cross_subdomain=Bt.prototype.get_cross_subdomain,Bt.prototype.clear=Bt.prototype.clear;var Ii={},Nx=function(){A.each(Ii,function(t,e){e!==Sr&&(Le[e]=t)}),Le._=A},Rx=function(){Le.init=function(t,e,r){if(r)return Le[r]||(Le[r]=Ii[r]=ol(t,e,r),Le[r]._loaded()),Le[r];var i=Le;Ii[Sr]?i=Ii[Sr]:t&&(i=ol(t,e,Sr),i._loaded(),Ii[Sr]=i),Le=i,il===Ax&&(Ue[Sr]=Le),Nx()}},Px=function(){function t(){t.done||(t.done=!0,qg=!0,Mg=!1,A.each(Ii,function(i){i._dom_loaded()}))}function e(){try{Jt.documentElement.doScroll("left")}catch{setTimeout(e,1);return}t()}if(Jt.addEventListener)Jt.readyState==="complete"?t():Jt.addEventListener("DOMContentLoaded",t,!1);else if(Jt.attachEvent){Jt.attachEvent("onreadystatechange",t);var r=!1;try{r=Ue.frameElement===null}catch{}Jt.documentElement.doScroll&&r&&e()}A.register_event(Ue,"load",t,!0)};function Dx(){return il=Lg,Le=new rt,Rx(),Le.init(),Px(),Le}bg=Dx();const Xs=bg;var ho={},zg,al,cl=0,ul=0;function jx(t,e,r){var i=e&&r||0,a=e||new Array(16);t=t||{};var s=t.node||zg,c=t.clockseq!==void 0?t.clockseq:al;if(s==null||c==null){var u=t.random||(t.rng||OI)();s==null&&(s=zg=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),c==null&&(c=al=(u[6]<<8|u[7])&16383)}var p=t.msecs!==void 0?t.msecs:Date.now(),m=t.nsecs!==void 0?t.nsecs:ul+1,g=p-cl+(m-ul)/1e4;if(g<0&&t.clockseq===void 0&&(c=c+1&16383),(g<0||p>cl)&&t.nsecs===void 0&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");cl=p,ul=m,al=c,p+=122192928e5;var h=((p&268435455)*1e4+m)%4294967296;a[i++]=h>>>24&255,a[i++]=h>>>16&255,a[i++]=h>>>8&255,a[i++]=h&255;var y=p/4294967296*1e4&268435455;a[i++]=y>>>8&255,a[i++]=y&255,a[i++]=y>>>24&15|16,a[i++]=y>>>16&255,a[i++]=c>>>8|128,a[i++]=c&255;for(var E=0;E<6;++E)a[i+E]=s[E];return e||Yc(a)}function Vg(t){if(!Hc(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Ux(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var Lx="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Bx="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function $g(t,e,r){function i(a,s,c,u){if(typeof a=="string"&&(a=Ux(a)),typeof s=="string"&&(s=Vg(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var p=new Uint8Array(16+a.length);if(p.set(s),p.set(a,s.length),p=r(p),p[6]=p[6]&15|e,p[8]=p[8]&63|128,c){u=u||0;for(var m=0;m<16;++m)c[u+m]=p[m];return c}return Yc(p)}try{i.name=t}catch{}return i.DNS=Lx,i.URL=Bx,i}function Mx(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return Fx(qx(zx(t),t.length*8))}function Fx(t){for(var e=[],r=t.length*32,i="0123456789abcdef",a=0;a<r;a+=8){var s=t[a>>5]>>>a%32&255,c=parseInt(i.charAt(s>>>4&15)+i.charAt(s&15),16);e.push(c)}return e}function Wg(t){return(t+64>>>9<<4)+14+1}function qx(t,e){t[e>>5]|=128<<e%32,t[Wg(e)-1]=e;for(var r=1732584193,i=-271733879,a=-1732584194,s=271733878,c=0;c<t.length;c+=16){var u=r,p=i,m=a,g=s;r=Be(r,i,a,s,t[c],7,-680876936),s=Be(s,r,i,a,t[c+1],12,-389564586),a=Be(a,s,r,i,t[c+2],17,606105819),i=Be(i,a,s,r,t[c+3],22,-1044525330),r=Be(r,i,a,s,t[c+4],7,-176418897),s=Be(s,r,i,a,t[c+5],12,1200080426),a=Be(a,s,r,i,t[c+6],17,-1473231341),i=Be(i,a,s,r,t[c+7],22,-45705983),r=Be(r,i,a,s,t[c+8],7,1770035416),s=Be(s,r,i,a,t[c+9],12,-1958414417),a=Be(a,s,r,i,t[c+10],17,-42063),i=Be(i,a,s,r,t[c+11],22,-1990404162),r=Be(r,i,a,s,t[c+12],7,1804603682),s=Be(s,r,i,a,t[c+13],12,-40341101),a=Be(a,s,r,i,t[c+14],17,-1502002290),i=Be(i,a,s,r,t[c+15],22,1236535329),r=Me(r,i,a,s,t[c+1],5,-165796510),s=Me(s,r,i,a,t[c+6],9,-1069501632),a=Me(a,s,r,i,t[c+11],14,643717713),i=Me(i,a,s,r,t[c],20,-373897302),r=Me(r,i,a,s,t[c+5],5,-701558691),s=Me(s,r,i,a,t[c+10],9,38016083),a=Me(a,s,r,i,t[c+15],14,-660478335),i=Me(i,a,s,r,t[c+4],20,-405537848),r=Me(r,i,a,s,t[c+9],5,568446438),s=Me(s,r,i,a,t[c+14],9,-1019803690),a=Me(a,s,r,i,t[c+3],14,-187363961),i=Me(i,a,s,r,t[c+8],20,1163531501),r=Me(r,i,a,s,t[c+13],5,-1444681467),s=Me(s,r,i,a,t[c+2],9,-51403784),a=Me(a,s,r,i,t[c+7],14,1735328473),i=Me(i,a,s,r,t[c+12],20,-1926607734),r=Fe(r,i,a,s,t[c+5],4,-378558),s=Fe(s,r,i,a,t[c+8],11,-2022574463),a=Fe(a,s,r,i,t[c+11],16,1839030562),i=Fe(i,a,s,r,t[c+14],23,-35309556),r=Fe(r,i,a,s,t[c+1],4,-1530992060),s=Fe(s,r,i,a,t[c+4],11,1272893353),a=Fe(a,s,r,i,t[c+7],16,-155497632),i=Fe(i,a,s,r,t[c+10],23,-1094730640),r=Fe(r,i,a,s,t[c+13],4,681279174),s=Fe(s,r,i,a,t[c],11,-358537222),a=Fe(a,s,r,i,t[c+3],16,-722521979),i=Fe(i,a,s,r,t[c+6],23,76029189),r=Fe(r,i,a,s,t[c+9],4,-640364487),s=Fe(s,r,i,a,t[c+12],11,-421815835),a=Fe(a,s,r,i,t[c+15],16,530742520),i=Fe(i,a,s,r,t[c+2],23,-995338651),r=qe(r,i,a,s,t[c],6,-198630844),s=qe(s,r,i,a,t[c+7],10,1126891415),a=qe(a,s,r,i,t[c+14],15,-1416354905),i=qe(i,a,s,r,t[c+5],21,-57434055),r=qe(r,i,a,s,t[c+12],6,1700485571),s=qe(s,r,i,a,t[c+3],10,-1894986606),a=qe(a,s,r,i,t[c+10],15,-1051523),i=qe(i,a,s,r,t[c+1],21,-2054922799),r=qe(r,i,a,s,t[c+8],6,1873313359),s=qe(s,r,i,a,t[c+15],10,-30611744),a=qe(a,s,r,i,t[c+6],15,-1560198380),i=qe(i,a,s,r,t[c+13],21,1309151649),r=qe(r,i,a,s,t[c+4],6,-145523070),s=qe(s,r,i,a,t[c+11],10,-1120210379),a=qe(a,s,r,i,t[c+2],15,718787259),i=qe(i,a,s,r,t[c+9],21,-343485551),r=xn(r,u),i=xn(i,p),a=xn(a,m),s=xn(s,g)}return[r,i,a,s]}function zx(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(Wg(e)),i=0;i<e;i+=8)r[i>>5]|=(t[i/8]&255)<<i%32;return r}function xn(t,e){var r=(t&65535)+(e&65535),i=(t>>16)+(e>>16)+(r>>16);return i<<16|r&65535}function Vx(t,e){return t<<e|t>>>32-e}function ta(t,e,r,i,a,s){return xn(Vx(xn(xn(e,t),xn(i,s)),a),r)}function Be(t,e,r,i,a,s,c){return ta(e&r|~e&i,t,e,a,s,c)}function Me(t,e,r,i,a,s,c){return ta(e&i|r&~i,t,e,a,s,c)}function Fe(t,e,r,i,a,s,c){return ta(e^r^i,t,e,a,s,c)}function qe(t,e,r,i,a,s,c){return ta(r^(e|~i),t,e,a,s,c)}var $x=$g("v3",48,Mx);const Wx=$x;function Yx(t,e,r,i){switch(t){case 0:return e&r^~e&i;case 1:return e^r^i;case 2:return e&r^e&i^r&i;case 3:return e^r^i}}function ll(t,e){return t<<e|t>>>32-e}function Hx(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var i=unescape(encodeURIComponent(t));t=[];for(var a=0;a<i.length;++a)t.push(i.charCodeAt(a))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,c=Math.ceil(s/16),u=new Array(c),p=0;p<c;++p){for(var m=new Uint32Array(16),g=0;g<16;++g)m[g]=t[p*64+g*4]<<24|t[p*64+g*4+1]<<16|t[p*64+g*4+2]<<8|t[p*64+g*4+3];u[p]=m}u[c-1][14]=(t.length-1)*8/Math.pow(2,32),u[c-1][14]=Math.floor(u[c-1][14]),u[c-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<c;++h){for(var y=new Uint32Array(80),E=0;E<16;++E)y[E]=u[h][E];for(var x=16;x<80;++x)y[x]=ll(y[x-3]^y[x-8]^y[x-14]^y[x-16],1);for(var D=r[0],U=r[1],j=r[2],R=r[3],w=r[4],T=0;T<80;++T){var P=Math.floor(T/20),F=ll(D,5)+Yx(P,U,j,R)+w+e[P]+y[T]>>>0;w=R,R=j,j=ll(U,30)>>>0,U=D,D=F}r[0]=r[0]+D>>>0,r[1]=r[1]+U>>>0,r[2]=r[2]+j>>>0,r[3]=r[3]+R>>>0,r[4]=r[4]+w>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Gx=$g("v5",80,Hx);const Qx=Gx,Kx="00000000-0000-0000-0000-000000000000";function Zx(t){if(!Hc(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Jx=Object.freeze(Object.defineProperty({__proto__:null,NIL:Kx,parse:Vg,stringify:Yc,v1:jx,v3:Wx,v4:hs,v5:Qx,validate:Hc,version:Zx},Symbol.toStringTag,{value:"Module"})),Xx=Ad(Jx);var ea=Xx,pl=(()=>typeof Buffer<"u"?t=>Buffer.from(t).toString("base64"):t=>btoa(String.fromCharCode(...t)))(),tk=(()=>typeof Buffer<"u"?t=>Buffer.from(t,"base64"):t=>Uint8Array.from(atob(t),e=>e.charCodeAt(0)))();ho.encode=function(t){var e=ea.parse(t),r=pl(e),i=r.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return i},ho.decode=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/")+"==";return ea.stringify(tk(e))},ho.v4=function(){var t=ea.v4(null,new Uint8Array(16)),e=pl(t),r=e.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return r},ho.nice=function(){var t=ea.v4(null,new Uint8Array(16));t[0]=t[0]&127;var e=pl(t),r=e.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return r};var ek=ho;const rk=Wc(ek);var Yg={exports:{}};(function(t,e){(function(r,i,a){t.exports=a(),t.exports.default=a()})("slugify",It,function(){var r=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","\xA2":"cent","\xA3":"pound","\xA4":"currency","\xA5":"yen","\xA9":"(c)","\xAA":"a","\xAE":"(r)","\xBA":"o","\xC0":"A","\xC1":"A","\xC2":"A","\xC3":"A","\xC4":"A","\xC5":"A","\xC6":"AE","\xC7":"C","\xC8":"E","\xC9":"E","\xCA":"E","\xCB":"E","\xCC":"I","\xCD":"I","\xCE":"I","\xCF":"I","\xD0":"D","\xD1":"N","\xD2":"O","\xD3":"O","\xD4":"O","\xD5":"O","\xD6":"O","\xD8":"O","\xD9":"U","\xDA":"U","\xDB":"U","\xDC":"U","\xDD":"Y","\xDE":"TH","\xDF":"ss","\xE0":"a","\xE1":"a","\xE2":"a","\xE3":"a","\xE4":"a","\xE5":"a","\xE6":"ae","\xE7":"c","\xE8":"e","\xE9":"e","\xEA":"e","\xEB":"e","\xEC":"i","\xED":"i","\xEE":"i","\xEF":"i","\xF0":"d","\xF1":"n","\xF2":"o","\xF3":"o","\xF4":"o","\xF5":"o","\xF6":"o","\xF8":"o","\xF9":"u","\xFA":"u","\xFB":"u","\xFC":"u","\xFD":"y","\xFE":"th","\xFF":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u010C":"C","\u010D":"c","\u010E":"D","\u010F":"d","\u0110":"DJ","\u0111":"dj","\u0112":"E","\u0113":"e","\u0116":"E","\u0117":"e","\u0118":"e","\u0119":"e","\u011A":"E","\u011B":"e","\u011E":"G","\u011F":"g","\u0122":"G","\u0123":"g","\u0128":"I","\u0129":"i","\u012A":"i","\u012B":"i","\u012E":"I","\u012F":"i","\u0130":"I","\u0131":"i","\u0136":"k","\u0137":"k","\u013B":"L","\u013C":"l","\u013D":"L","\u013E":"l","\u0141":"L","\u0142":"l","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u014C":"O","\u014D":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","\u0154":"R","\u0155":"r","\u0158":"R","\u0159":"r","\u015A":"S","\u015B":"s","\u015E":"S","\u015F":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u0164":"T","\u0165":"t","\u0168":"U","\u0169":"u","\u016A":"u","\u016B":"u","\u016E":"U","\u016F":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017A":"z","\u017B":"Z","\u017C":"z","\u017D":"Z","\u017E":"z","\u018F":"E","\u0192":"f","\u01A0":"O","\u01A1":"o","\u01AF":"U","\u01B0":"u","\u01C8":"LJ","\u01C9":"lj","\u01CB":"NJ","\u01CC":"nj","\u0218":"S","\u0219":"s","\u021A":"T","\u021B":"t","\u0259":"e","\u02DA":"o","\u0386":"A","\u0388":"E","\u0389":"H","\u038A":"I","\u038C":"O","\u038E":"Y","\u038F":"W","\u0390":"i","\u0391":"A","\u0392":"B","\u0393":"G","\u0394":"D","\u0395":"E","\u0396":"Z","\u0397":"H","\u0398":"8","\u0399":"I","\u039A":"K","\u039B":"L","\u039C":"M","\u039D":"N","\u039E":"3","\u039F":"O","\u03A0":"P","\u03A1":"R","\u03A3":"S","\u03A4":"T","\u03A5":"Y","\u03A6":"F","\u03A7":"X","\u03A8":"PS","\u03A9":"W","\u03AA":"I","\u03AB":"Y","\u03AC":"a","\u03AD":"e","\u03AE":"h","\u03AF":"i","\u03B0":"y","\u03B1":"a","\u03B2":"b","\u03B3":"g","\u03B4":"d","\u03B5":"e","\u03B6":"z","\u03B7":"h","\u03B8":"8","\u03B9":"i","\u03BA":"k","\u03BB":"l","\u03BC":"m","\u03BD":"n","\u03BE":"3","\u03BF":"o","\u03C0":"p","\u03C1":"r","\u03C2":"s","\u03C3":"s","\u03C4":"t","\u03C5":"y","\u03C6":"f","\u03C7":"x","\u03C8":"ps","\u03C9":"w","\u03CA":"i","\u03CB":"y","\u03CC":"o","\u03CD":"y","\u03CE":"w","\u0401":"Yo","\u0402":"DJ","\u0404":"Ye","\u0406":"I","\u0407":"Yi","\u0408":"J","\u0409":"LJ","\u040A":"NJ","\u040B":"C","\u040F":"DZ","\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041A":"K","\u041B":"L","\u041C":"M","\u041D":"N","\u041E":"O","\u041F":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"C","\u0427":"Ch","\u0428":"Sh","\u0429":"Sh","\u042A":"U","\u042B":"Y","\u042C":"","\u042D":"E","\u042E":"Yu","\u042F":"Ya","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043A":"k","\u043B":"l","\u043C":"m","\u043D":"n","\u043E":"o","\u043F":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"c","\u0447":"ch","\u0448":"sh","\u0449":"sh","\u044A":"u","\u044B":"y","\u044C":"","\u044D":"e","\u044E":"yu","\u044F":"ya","\u0451":"yo","\u0452":"dj","\u0454":"ye","\u0456":"i","\u0457":"yi","\u0458":"j","\u0459":"lj","\u045A":"nj","\u045B":"c","\u045D":"u","\u045F":"dz","\u0490":"G","\u0491":"g","\u0492":"GH","\u0493":"gh","\u049A":"KH","\u049B":"kh","\u04A2":"NG","\u04A3":"ng","\u04AE":"UE","\u04AF":"ue","\u04B0":"U","\u04B1":"u","\u04BA":"H","\u04BB":"h","\u04D8":"AE","\u04D9":"ae","\u04E8":"OE","\u04E9":"oe","\u0531":"A","\u0532":"B","\u0533":"G","\u0534":"D","\u0535":"E","\u0536":"Z","\u0537":"E'","\u0538":"Y'","\u0539":"T'","\u053A":"JH","\u053B":"I","\u053C":"L","\u053D":"X","\u053E":"C'","\u053F":"K","\u0540":"H","\u0541":"D'","\u0542":"GH","\u0543":"TW","\u0544":"M","\u0545":"Y","\u0546":"N","\u0547":"SH","\u0549":"CH","\u054A":"P","\u054B":"J","\u054C":"R'","\u054D":"S","\u054E":"V","\u054F":"T","\u0550":"R","\u0551":"C","\u0553":"P'","\u0554":"Q'","\u0555":"O''","\u0556":"F","\u0587":"EV","\u0621":"a","\u0622":"aa","\u0623":"a","\u0624":"u","\u0625":"i","\u0626":"e","\u0627":"a","\u0628":"b","\u0629":"h","\u062A":"t","\u062B":"th","\u062C":"j","\u062D":"h","\u062E":"kh","\u062F":"d","\u0630":"th","\u0631":"r","\u0632":"z","\u0633":"s","\u0634":"sh","\u0635":"s","\u0636":"dh","\u0637":"t","\u0638":"z","\u0639":"a","\u063A":"gh","\u0641":"f","\u0642":"q","\u0643":"k","\u0644":"l","\u0645":"m","\u0646":"n","\u0647":"h","\u0648":"w","\u0649":"a","\u064A":"y","\u064B":"an","\u064C":"on","\u064D":"en","\u064E":"a","\u064F":"u","\u0650":"e","\u0652":"","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u067E":"p","\u0686":"ch","\u0698":"zh","\u06A9":"k","\u06AF":"g","\u06CC":"y","\u06F0":"0","\u06F1":"1","\u06F2":"2","\u06F3":"3","\u06F4":"4","\u06F5":"5","\u06F6":"6","\u06F7":"7","\u06F8":"8","\u06F9":"9","\u0E3F":"baht","\u10D0":"a","\u10D1":"b","\u10D2":"g","\u10D3":"d","\u10D4":"e","\u10D5":"v","\u10D6":"z","\u10D7":"t","\u10D8":"i","\u10D9":"k","\u10DA":"l","\u10DB":"m","\u10DC":"n","\u10DD":"o","\u10DE":"p","\u10DF":"zh","\u10E0":"r","\u10E1":"s","\u10E2":"t","\u10E3":"u","\u10E4":"f","\u10E5":"k","\u10E6":"gh","\u10E7":"q","\u10E8":"sh","\u10E9":"ch","\u10EA":"ts","\u10EB":"dz","\u10EC":"ts","\u10ED":"ch","\u10EE":"kh","\u10EF":"j","\u10F0":"h","\u1E62":"S","\u1E63":"s","\u1E80":"W","\u1E81":"w","\u1E82":"W","\u1E83":"w","\u1E84":"W","\u1E85":"w","\u1E9E":"SS","\u1EA0":"A","\u1EA1":"a","\u1EA2":"A","\u1EA3":"a","\u1EA4":"A","\u1EA5":"a","\u1EA6":"A","\u1EA7":"a","\u1EA8":"A","\u1EA9":"a","\u1EAA":"A","\u1EAB":"a","\u1EAC":"A","\u1EAD":"a","\u1EAE":"A","\u1EAF":"a","\u1EB0":"A","\u1EB1":"a","\u1EB2":"A","\u1EB3":"a","\u1EB4":"A","\u1EB5":"a","\u1EB6":"A","\u1EB7":"a","\u1EB8":"E","\u1EB9":"e","\u1EBA":"E","\u1EBB":"e","\u1EBC":"E","\u1EBD":"e","\u1EBE":"E","\u1EBF":"e","\u1EC0":"E","\u1EC1":"e","\u1EC2":"E","\u1EC3":"e","\u1EC4":"E","\u1EC5":"e","\u1EC6":"E","\u1EC7":"e","\u1EC8":"I","\u1EC9":"i","\u1ECA":"I","\u1ECB":"i","\u1ECC":"O","\u1ECD":"o","\u1ECE":"O","\u1ECF":"o","\u1ED0":"O","\u1ED1":"o","\u1ED2":"O","\u1ED3":"o","\u1ED4":"O","\u1ED5":"o","\u1ED6":"O","\u1ED7":"o","\u1ED8":"O","\u1ED9":"o","\u1EDA":"O","\u1EDB":"o","\u1EDC":"O","\u1EDD":"o","\u1EDE":"O","\u1EDF":"o","\u1EE0":"O","\u1EE1":"o","\u1EE2":"O","\u1EE3":"o","\u1EE4":"U","\u1EE5":"u","\u1EE6":"U","\u1EE7":"u","\u1EE8":"U","\u1EE9":"u","\u1EEA":"U","\u1EEB":"u","\u1EEC":"U","\u1EED":"u","\u1EEE":"U","\u1EEF":"u","\u1EF0":"U","\u1EF1":"u","\u1EF2":"Y","\u1EF3":"y","\u1EF4":"Y","\u1EF5":"y","\u1EF6":"Y","\u1EF7":"y","\u1EF8":"Y","\u1EF9":"y","\u2013":"-","\u2018":"'","\u2019":"'","\u201C":"\\"","\u201D":"\\"","\u201E":"\\"","\u2020":"+","\u2022":"*","\u2026":"...","\u20A0":"ecu","\u20A2":"cruzeiro","\u20A3":"french franc","\u20A4":"lira","\u20A5":"mill","\u20A6":"naira","\u20A7":"peseta","\u20A8":"rupee","\u20A9":"won","\u20AA":"new shequel","\u20AB":"dong","\u20AC":"euro","\u20AD":"kip","\u20AE":"tugrik","\u20AF":"drachma","\u20B0":"penny","\u20B1":"peso","\u20B2":"guarani","\u20B3":"austral","\u20B4":"hryvnia","\u20B5":"cedi","\u20B8":"kazakhstani tenge","\u20B9":"indian rupee","\u20BA":"turkish lira","\u20BD":"russian ruble","\u20BF":"bitcoin","\u2120":"sm","\u2122":"tm","\u2202":"d","\u2206":"delta","\u2211":"sum","\u221E":"infinity","\u2665":"love","\u5143":"yuan","\u5186":"yen","\uFDFC":"rial","\uFEF5":"laa","\uFEF7":"laa","\uFEF9":"lai","\uFEFB":"la"}`),i=JSON.parse('{"bg":{"\u0419":"Y","\u0426":"Ts","\u0429":"Sht","\u042A":"A","\u042C":"Y","\u0439":"y","\u0446":"ts","\u0449":"sht","\u044A":"a","\u044C":"y"},"de":{"\xC4":"AE","\xE4":"ae","\xD6":"OE","\xF6":"oe","\xDC":"UE","\xFC":"ue","\xDF":"ss","%":"prozent","&":"und","|":"oder","\u2211":"summe","\u221E":"unendlich","\u2665":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","\xA2":"centavos","\xA3":"libras","\xA4":"moneda","\u20A3":"francos","\u2211":"suma","\u221E":"infinito","\u2665":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","\xA2":"centime","\xA3":"livre","\xA4":"devise","\u20A3":"franc","\u2211":"somme","\u221E":"infini","\u2665":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","\xA2":"centavo","\u2211":"soma","\xA3":"libra","\u221E":"infinito","\u2665":"amor"},"uk":{"\u0418":"Y","\u0438":"y","\u0419":"Y","\u0439":"y","\u0426":"Ts","\u0446":"ts","\u0425":"Kh","\u0445":"kh","\u0429":"Shch","\u0449":"shch","\u0413":"H","\u0433":"h"},"vi":{"\u0110":"D","\u0111":"d"},"da":{"\xD8":"OE","\xF8":"oe","\xC5":"AA","\xE5":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"st\xF8rre end"},"nb":{"&":"og","\xC5":"AA","\xC6":"AE","\xD8":"OE","\xE5":"aa","\xE6":"ae","\xF8":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","\xC5":"AA","\xC4":"AE","\xD6":"OE","\xE5":"aa","\xE4":"ae","\xF6":"oe"}}');function a(s,c){if(typeof s!="string")throw new Error("slugify: string argument expected");c=typeof c=="string"?{replacement:c}:c||{};var u=i[c.locale]||{},p=c.replacement===void 0?"-":c.replacement,m=c.trim===void 0?!0:c.trim,g=s.normalize().split("").reduce(function(h,y){var E=u[y];return E===void 0&&(E=r[y]),E===void 0&&(E=y),E===p&&(E=" "),h+E.replace(c.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return c.strict&&(g=g.replace(/[^A-Za-z0-9\s]/g,"")),m&&(g=g.trim()),g=g.replace(/\s+/g,p),c.lower&&(g=g.toLowerCase()),g}return a.extend=function(s){Object.assign(r,s)},a})})(Yg);var nk=Yg.exports;const ik=Wc(nk),ok={strict:!0},fl="_",sk=(t,e)=>t.length<=e||(t=t.substring(0,e),t.lastIndexOf(fl)==-1)?t:t.substring(0,t.lastIndexOf(fl)),ak=(t,e)=>{let r=t.split(" ").filter(a=>a.length>0);r=r.map(a=>ik(a,ok).trim());const i=r.join(fl);return e?sk(i,e):i},ck=300,Hg=(t,e)=>{const r=ak(e,ck),i=rk.encode(t);return`${r}__${i}`},uk=(t,e,r=!0,i="",a="scribe",s)=>!t||!e?null:`${s}${a==="knowledge_page"?"page":r?"edit":"shared"}/${Hg(t,e)}`;async function Gg(t){if(!t)return!0;const e=`http${t.secure?"s":""}`,r=t.domain,i=t.path;return!await chrome.cookies.get({url:`${e}://${r}${i}`,name:t.name})}const Zn=t=>t&&t.replace(/\/+$/,""),ra=(t,...e)=>{const r=new URL(t);return e.forEach(i=>{r.searchParams.set(i.name,i.value)}),r.href},lk=t=>t?Object.keys(t).map(e=>`${e}=${t[e]}`).join("&"):"",pk=t=>!(t!=null&&t.length)||t.length===1&&t[0]==="/"?"":t[0]==="/"?t.substring(1):t,Qg=(t,e)=>{var r,i;return(i=(r=io(t))==null?void 0:r.searchParams)==null?void 0:i.get(e)},Kg=t=>{if(!t)return null;const e=/url=([^&?]+)/,r=t.match(e);if(r&&r[1])try{return new URL(decodeURIComponent(r[1])).origin}catch{return null}return null},fk=t=>t.split(/[?#]/)[0],Zg={}.VITE_E2E==="true",dk=!1,hk=!0,Jg=!Zg,Oi=(()=>Jg?{FRONTEND_URL:"https://scribehow.com",BACKEND_BASE_URL:"https://scribe-api.scribehow.com/api",SUGGESTIONS_BASE_URL:"https://scribe-api-suggestions.scribehow.com/api"}:{FRONTEND_URL:"http://localhost:3000",BACKEND_BASE_URL:"http://127.0.0.1:5000/api",SUGGESTIONS_BASE_URL:"http://localhost:5000/api"})(),de={...Oi};let na="localhost";const ia="data",gk="flagsmithUniqueId",oa="customUrls",sa="refresh_data",aa="/";let Xg="http://localhost:3000/uninstall",tm="n4nQaZs4TSQwWqeJTvxqPA";Xs.init("52e5e0805583e8a410f1ed50d8e0c049",{save_referrer:!1,disable_persistence:!0,ignore_dnt:!0,api_host:"https://usage.scribehow.com"}),Jg&&(na=".scribehow.com",Xg="https://scribehow.com/uninstall",tm="5Grtw9n7BhnupdWtJvyEb3");const mk=["chrome://","chrome-extension://","https://chrome.google.com","file://","edge://","https://microsoftedge.microsoft.com","favorites://","topsites://","https://chromewebstore.google.com","null"],_k=`${Oi.FRONTEND_URL}/signin?extension=true`,yk=()=>`${de.FRONTEND_URL}/signup`,em=()=>`${de.FRONTEND_URL}/workspace`,vk=()=>`${de.FRONTEND_URL}/workspace#documents`,bk={name:"from",value:"post_extension_install"},wk={name:"show_pin_extension_modal",value:!0},Sk={name:"cutoff",value:!0},Ek=()=>ra(yk(),bk),Ik=()=>ra(em(),wk),go=(t,e)=>`${de.FRONTEND_URL}/shared/${Hg(t,e)}?extension=true`,Ok=(t,e)=>ra(go(t,e),Sk),rm=t=>t.endsWith(na),ca=()=>{de.FRONTEND_URL=Oi.FRONTEND_URL,de.BACKEND_BASE_URL=Oi.BACKEND_BASE_URL,de.SUGGESTIONS_BASE_URL=Oi.SUGGESTIONS_BASE_URL},nm=t=>{if(t){const e=JSON.parse(decodeURIComponent(t));de.FRONTEND_URL=Zn(e.frontendUrl),de.BACKEND_BASE_URL=Zn(e.backendUrl),de.SUGGESTIONS_BASE_URL=Zn(e.suggestionsBackendUrl)}else ca()},Tk=async({removed:t,cookie:e,cause:r})=>{if(rm(e.domain)&&(e.name===ia||e.name===sa||e.name===oa)&&e.path===aa&&r!=="overwrite"){if(t&&await Gg(e))ca();else if(e.name===oa){const i=JSON.parse(decodeURIComponent(e.value));de.FRONTEND_URL=Zn(i.frontendUrl),de.BACKEND_BASE_URL=Zn(i.backendUrl),de.SUGGESTIONS_BASE_URL=Zn(i.suggestionsUrl)}}},Ak=()=>{var g,h,y,E,x,D;const t=ut.getState(),{userData:e}=Hn(t),{ipAddress:r,benchmark:i}=Lu(ut.getState()),a=i==null?void 0:i.cores,s=i==null?void 0:i.bench,c=i==null?void 0:i.rtt,u=i==null?void 0:i.downlink,{scribeId:p}=Pn(ut.getState()),{totalTabCount:m}=ng(ut.getState());return{email:e==null?void 0:e.email,ipAddress:r,scribeId:p,cores:a,bench:s,rtt:c,downlink:u,activeTeam:(g=e==null?void 0:e.active_organization)==null?void 0:g.id,superOrg:(y=(h=e==null?void 0:e.active_organization)==null?void 0:h.super_organization)==null?void 0:y.id,extensionVersion:((x=(E=chrome==null?void 0:chrome.runtime)==null?void 0:E.getManifest)==null?void 0:x.call(E).version)??"unknown",isRehydrated:(D=t==null?void 0:t._persist)==null?void 0:D.rehydrated,browser:oo(),browserVersion:qu(),tabCount:m}},im=[];function om(t,e){if(typeof t=="object"&&t!==null){for(const r in t)if(om(t[r],e))return!0}else if(String(t).includes(e))return!0;return!1}function Ck(t){return im.filter(e=>e.some(r=>om(r,t)))}if({}.VITE_SHOULD_ENABLE_LOG_SEARCH==="true"){const t=console.log;console.log=function(...e){im.push(e),t.apply(console,e)},globalThis.searchLogs=Ck}const ce=async(t,e={},r={})=>{var a;const i=JSON.stringify({user_id:(a=Hn(ut.getState()).userData)==null?void 0:a.id,logtype:"scribe-extension",attributes:{...Ak(),...r,...e},message:t});return await Hl(un,"track/log_new_relic/","POST",i,{},{"Content-Type":"application/json"}).catch(()=>{})},xk=lt("existingScribe/setExistingScribeProperties"),sm=lt("existingScribe/setExistingTabId"),am=lt("existingScribe/resetExistingScribe"),kk=lt("modals/setSelectModalVisible"),Nk=lt("modals/setRecordModalVisible"),Rk=lt("modals/setStartingRecordingModalVisible"),ua=lt("modals/setEndRecordingWithCutoffVisible"),Pk=lt("recordingControls/setPosition"),cm=lt("recordingControls/setMenuOpen"),Dk=lt("recordingControls/setScreenPositionMenuOpen"),jk=lt("recordingControls/setDeleteScribeModalOpen"),Uk=lt("recordingControls/setBlurEnabled"),Lk=lt("recordingControls/setBlurSettings"),dl=lt("task/setTaskId"),Jn=_t(t=>t.options,t=>t),hl=_t(t=>{var e,r;return((r=(e=t.flagsmith)==null?void 0:e.flags)==null?void 0:r.audioTranscription)&&t.options.recordAudio&&!t.extension.inCopilotSession},t=>t),um=_t(t=>t.preFlightChecks,t=>t),Bk={networkError:!1,s3ConnectionError:!1,assemblyAIConnectionError:!1,backendConnectionError:!1,isRecordingStartedFromBrowser:!1,networkOrServerError:""},Mk=re({name:"preFlightChecks",initialState:Bk,reducers:{setNetworkError:(t,e)=>{t.networkError=e.payload,t.networkError&&(t.networkOrServerError="unstable_network")},setS3ConnectionError:(t,e)=>{t.s3ConnectionError=e.payload,t.s3ConnectionError&&!t.networkError&&(t.networkOrServerError="s3_connection_error")},setAssemblyAIConnectionError:(t,e)=>{t.assemblyAIConnectionError=e.payload,t.assemblyAIConnectionError&&!t.networkError&&(t.networkOrServerError="assemblyai_connection_error")},setBackendConnectionError:(t,e)=>{t.backendConnectionError=e.payload,t.backendConnectionError&&!t.networkError&&(t.networkOrServerError="backend_connection_error")},setIsRecordingStartedFromBrowser:(t,e)=>{t.isRecordingStartedFromBrowser=e.payload}},extraReducers:t=>{t.addCase(ve,(e,r)=>{Object.assign(e,r.payload.preFlightChecks)})}}),Fk=Mk.reducer,lm=_t(t=>t.recordingControls,t=>t);var la=(t=>(t[t.BOTTOM_LEFT=0]="BOTTOM_LEFT",t[t.TOP_LEFT=1]="TOP_LEFT",t[t.TOP_RIGHT=2]="TOP_RIGHT",t[t.BOTTOM_RIGHT=3]="BOTTOM_RIGHT",t))(la||{});const Ti={showBadgeNotifications:!0,recordingControlsPreference:zs(qs)?"sidepanel":"floating-button",pinsBlockedUrls:[],pinsSnoozedUntilTimestamp:void 0,pinsSawIntroducingPinsModal:!1,pinsSnoozedIntroducingPinsModal:void 0,pinsSawPinThisScribeModal:!1,pinsSnoozedPinThisScribeModal:void 0,pinsSawPinMoreScribesModal:!1,pinsSnoozedPinMoreScribesModal:void 0,pinsSawPromptToViewInDashboardModal:!1,pinsSnoozedPromptToViewInDashboardModal:void 0,recordingControlsPosition:la.BOTTOM_LEFT,recordAudio:!1,showSidepanelFob:!0,shouldUseScribeSuggestions:!1},pm={position:la.BOTTOM_LEFT,menuOpen:!1,screenPositionMenuOpen:!1,deleteScribeModalOpen:!1,liveBlurEnabled:!1,liveBlurSettings:{emailAddresses:!1,numbers:!1,longText:!1,tableRows:!1,formFields:!1,images:!1}},qk={showBadgeNotifications:Ti.showBadgeNotifications,recordingControlsPreference:Ti.recordingControlsPreference,recordingControlsPosition:pm.position,recordAudio:Ti.recordAudio,showSidepanelFob:Ti.showSidepanelFob,shouldUseScribeSuggestions:Ti.shouldUseScribeSuggestions},zk=re({name:"recordingControls",initialState:pm,reducers:{setPosition:(t,e)=>{t.position=e.payload,t.menuOpen=!1,t.screenPositionMenuOpen=!1},setMenuOpen:(t,e)=>{t.menuOpen=e.payload,e.payload||(t.screenPositionMenuOpen=!1)},setScreenPositionMenuOpen:(t,e)=>{t.screenPositionMenuOpen=e.payload},setDeleteScribeModalOpen:(t,e)=>{t.deleteScribeModalOpen=e.payload},setBlurEnabled:(t,e)=>{t.liveBlurEnabled=e.payload},setBlurSettings:(t,e)=>{t.liveBlurSettings={...e.payload}}},extraReducers:t=>{t.addCase(ju,e=>{e.screenPositionMenuOpen=!1,e.menuOpen=!1,e.deleteScribeModalOpen=!1}).addCase(ve,(e,r)=>{var i;Object.assign(e,(i=r.payload)==null?void 0:i.recordingControls)})}}),Vk=zk.reducer,Ct={BUTTON_FROM_NUMBER:{0:"left",1:"middle",2:"right"},KEYBOARD_ACTIONS:{PRESS:"keyboard_action",SEQUENCE:"keyboard_sequence_action",COMBINATION:"keyboard_combination_action"},KEY_DIRECTIONS:{DOWN:"down",UP:"up"},MOUSE_ACTIONS:{CLICK:"mouse_click_action",START_DRAG:"mouse_start_drag_action",END_DRAG:"mouse_end_drag_action",CANCEL_DRAG:"mouse_cancel_drag_action"},INPUT_BLUR:"input_blur_action",INSTRUCTION:"instruction",RECORDING_STATES:{IDLE:"idle",RECORDING:"recording",ENDING:"ending"},BACKSPACE:"backspace",ARROW_KEYS:["up","down","left","right"],UPLOAD_STATUS:{WAITING:"WAITING",ERROR:"ERROR",SUCCESS:"SUCCESS"},SPECIAL_INDICATORS:{SWITCH_TO_TAB_PREFIX:"Switch to tab "}},fm=t=>{try{return JSON.parse(t)}catch{return null}},dm=t=>["Control","Shift","Alt","Meta","CapsLock","NumLock","ScrollLock"].includes(t),$k=(t,e)=>{if(t==="Dead"&&e){const r=e.match(/^Key([A-Z])$/);if(r)return r[1].toLowerCase();const i=e.match(/^Digit([0-9])$/);if(i)return i[1];const a={Backquote:"`",IntlBackslash:"\\",BracketLeft:"[",BracketRight:"]",Semicolon:";",Quote:"'",Comma:",",Period:".",Slash:"/",Backslash:"\\",Minus:"-",Equal:"="};return a[e]?a[e]:`Dead:${e}`}return t},hm=(t,e)=>{if(dm(t))return"";if(e)switch(t.toLowerCase()){case" ":return"space";case"delete":return"del"}switch(t.toLowerCase()){case"arrowleft":return"left";case"arrowright":return"right";case"arrowup":return"up";case"arrowdown":return"down";case"escape":return"esc";default:return e?t.toLowerCase():t}},gl=t=>{const e=t.codePointAt(0);return e>=57344&&e<=63743},Wk=t=>!t||gl(t)?"":t,Yk=6;function Hk(t){const e=["aria-label","title","aria-title","data-tooltip"];let r=t.parentElement,i=0;for(;r;){const a=e.find(c=>{const u=r.getAttribute(c);return!!(u&&u.trim()!=="")}),s=r.getAttribute(a);if(s)return s;if(r=r.parentElement,i+=1,i>Yk)break}return null}function Gk(t){let e;try{e=t==null?void 0:t.cloneNode(!0)}catch{}if(!e)return t;if(t.isConnected&&typeof window<"u"&&window.getComputedStyle){const r=i=>{try{const a=window.getComputedStyle(i);return a.display==="none"||a.visibility==="hidden"}catch{return!1}};if(t.childElementCount>0||r(t)){const i=[],a=[{o:t,c:e}];for(;a.length;){const{o:s,c}=a.pop();if(r(s))i.push(c);else{const u=s.children,p=c.children;for(let m=u.length-1;m>=0;m-=1)a.push({o:u[m],c:p[m]})}}i.forEach(s=>{try{s.remove()}catch{}})}}return e.querySelectorAll('script, style, [hidden], [type="hidden"], [aria-hidden="true"]').forEach(r=>{try{r.remove()}catch{}}),e}const gm=(t,e)=>{const r=t||e;return r?gl(r)?"Click here.":`Click "${ml(r)}"`:"Click here."},Qk=t=>{const e=Gk(t),r=e.innerText||e.textContent,i=t.innerText||t.textContent;let a=r??i;a&&(a=a.replace(/\s+/g," ").trim(),a===""&&(a=null));let s=t.getAttribute("aria-label")||t.getAttribute("title")||t.getAttribute("aria-title");switch(s&&(s=s.trim(),s===""&&(s=null)),t.tagName&&t.tagName.toLowerCase()){case"textarea":case"input":let c="field";if(t.getAttribute("type"))if(c=t.getAttribute("type").toLowerCase(),c==="tel")c="telephone field";else if(c==="datetime-local")c="date and time field";else if(c==="checkbox")c="checkbox";else if(c==="radio")c="radio button";else if(c==="submit"){if(!t.innerText&&!t.ariaLabel)return'Click "Submit"';c="button"}else c=`${c} field`;const{labels:u}=t;let p="";return u.length>0&&(u[0].innerText&&u[0].innerText!==""&&(p=u[0].innerText.trim()),u[0].textContent&&u[0].textContent!==""&&(p=u[0].textContent.trim())),p===""&&t.getAttribute("placeholder")&&(p=t.getAttribute("placeholder").trim()),p===""?`Click this ${c}.`:`Click the "${p}" field.`;case"select":return"Click this dropdown.";case"a":if(!a)return"Click this link.";case"button":return a?`Click "${a}"`:"Click this button.";case"svg":return"Click this icon.";case"img":case"image":return"Click this image.";case"div":return a&&t.childNodes.length===1&&t.childNodes[0].nodeType===3?`Click "${ml(a)}"`:!a&&s?`Click "${ml(s)}"`:gm(a||s||Hk(t),s);case"style":return"Click here.";default:return gm(a,s)}},ml=t=>t&&t.length>144?`${t.substring(0,144)}...`:t;function Kk(t){return t.charAt(0).toUpperCase()+t.slice(1)}const mm=t=>{if(!t||!t.description||!t.description.toLowerCase().startsWith("click")||["left","right","middle"].indexOf(t.button)===-1||t.click_count!==1&&t.click_count!==2)return t.description;const e=t.description.slice(5);let r="",i="",a="Click";return["right","middle"].indexOf(t.button)!==-1&&(i=`${Kk(t.button)}-`),t.click_count===2&&(i===""?r="Double-":r="double-"),(r!==""||i!=="")&&(a="click"),`${i}${r}${a}${e}`},_m="src/messages/capture-with-voice-transcription/index.html",Zk={[Hi.GRANTED]:{isMicrophoneTabActive:!1},[Hi.DENIED]:{isMicrophoneTabActive:!0},[Hi.PROMPT]:{isMicrophoneTabActive:!0}};var ym=(t=>(t.MICROPHONE="microphone",t))(ym||{});const Jk=()=>{var i,a,s;const t=Hn(ut.getState()),{audioTranscription:e,sidekickRefresh:r}=wn(ut.getState());return!r&&((s=(a=(i=t==null?void 0:t.userData)==null?void 0:i.active_organization)==null?void 0:a.super_organization)==null?void 0:s.allow_openai)&&e},Xk=()=>{var r,i,a,s;const t=(s=(a=(i=(r=Hn(ut.getState()))==null?void 0:r.userData)==null?void 0:i.active_organization)==null?void 0:a.super_organization)==null?void 0:s.allow_openai,{audioTranscription:e}=wn(ut.getState());return t&&e},t2=()=>{const t=hl(ut.getState());return Xk()&&t},e2=t=>!!t.useAssemblyAiV3,vm=async()=>{const t=await chrome.tabs.query({}),e=chrome.runtime.getURL(_m);return t.find(r=>r.url===e)},r2=async()=>{const t=await vm();return t!=null&&t.id?t:chrome.tabs.create({url:chrome.runtime.getURL(_m),active:!1,pinned:!0})},n2=async(t,e)=>{t&&Zk[e].isMicrophoneTabActive&&(t!=null&&t.id)&&chrome.tabs.update(t.id,{active:!0})},i2=(...t)=>t!=null&&t.length?t.reduce((e,r)=>r?`${e} ${r}`:e,""):"",o2="transcription-in-progress",s2={button:"",click_count:0,description:"",transcribed_description:"",domain:"",download_url:"",end_timestamp:0,kind:"instruction",start_timestamp:0,target_text:"",timestamp:0,isTranscribing:!0,url:"",tempId:o2},bm=(t,e)=>{let r={...t||{}};return r?e.audio_start_timestamp in r?r[e.audio_start_timestamp].message_type==="PartialTranscript"&&(r[e.audio_start_timestamp]=e):r[e.audio_start_timestamp]=e:r={[e.audio_start_timestamp]:e},r},_l=t=>t?Object.values(t).reduce((e,r)=>i2(e,r.text),"").trim():"",a2=(t,e,r)=>{const i=t.start+r;return e.findLastIndex(a=>i>=a.start_timestamp&&i<=a.end_timestamp)},c2=(t,e,r)=>{const i=new Map;return t.forEach(a=>{var c;const s=a2(a,e,r);s!==-1&&(i.has(s)||i.set(s,[]),(c=i.get(s))==null||c.push(a))}),Array.from(i.entries()).map(([a,s])=>({actionIndex:a,words:s,useFullText:!1}))},u2=(t,e)=>{const r=e.findLastIndex(i=>t.audio_start_timestamp<=i.end_timestamp);return r!==-1?[{actionIndex:r,words:[],useFullText:!0}]:[]},pa=(t,e,r)=>{const i=[...t],a={},s=r?{...e||{},[r.audio_start_timestamp]:r}:{...e||{}},c=Object.values(s);return c.length?(c.sort((u,p)=>u.audio_start_timestamp-p.audio_end_timestamp).forEach(u=>{if(!u.text)return;const p=(()=>{var m;return(m=u.words)!=null&&m.length?c2(u.words,i,u.relative_audio_start):u2(u,i)})();p.length>0?p.forEach(({actionIndex:m,words:g,useFullText:h})=>{const y={...u,words:g,text:h?u.text:g.map(w=>w.text).join(" "),audio_start_timestamp:g.length>0?g[0].start+u.relative_audio_start:u.audio_start_timestamp,audio_end_timestamp:g.length>0?g[g.length-1].end+u.relative_audio_start:u.audio_end_timestamp},E=bm(i[m].transcription_data,y),x=_l(E),D=i[m],U=!!D.shouldOverrideSelectClick,j=D.kind==="keyboard_sequence_action"||D.kind==="keyboard_combination_action";let R=D.description;x&&(U?R=`${x}
${D.description}`:R=x),i[m]={...i[m],transcription_data:E,transcribed_description:R}}):(u.audio_start_timestamp in a,a[u.audio_start_timestamp]=u)}),{actionsQueue:i,transcribedAudio:a}):{actionsQueue:i,transcribedAudio:{}}},l2=t=>Object.values(Ct.KEYBOARD_ACTIONS).indexOf(t.kind)!==-1,fa=t=>{var e;return((e=t==null?void 0:t.description)==null?void 0:e.startsWith(Ct.SPECIAL_INDICATORS.SWITCH_TO_TAB_PREFIX))??!1},p2=t=>[Ct.KEYBOARD_ACTIONS.PRESS,Ct.KEYBOARD_ACTIONS.SEQUENCE,Ct.KEYBOARD_ACTIONS.COMBINATION,Ct.MOUSE_ACTIONS.CLICK].includes(t.kind),mo=(t,e=!1)=>{if(!t)return!0;let r=mk;return e&&(r=r.filter(i=>i!=="file://")),r.some(i=>t.startsWith(i))},f2=t=>t.filter((e,r)=>{if(r===t.length-1)return!0;const i=t[r+1];return![e,i].every(a=>fa(a))});async function d2(t,e,r,i=0,a=5,s=500,c=1.2){if(i>=a)return;const u=Math.floor(s*c**i);setTimeout(async()=>{try{const p=await chrome.tabs.get(t.id);da(p,e,r,i+1)}catch(p){console.error("Error sending message to tab",p)}},u)}const h2=t=>{if(!t.length)return t;const e=t[t.length-1];if(!fa(e))return t;const r=t==null?void 0:t.findLast(a=>a.kind!==Ct.INSTRUCTION),i=e;return(r==null?void 0:r.tabId)===(i==null?void 0:i.tabId)?t.slice(0,-1):t},g2=t=>h2(f2(t)),da=async(t,e,r,i=1)=>{const a=t!=null&&t.pendingUrl?mo(t.pendingUrl):!1,s=mo(t.url)&&a,c=![void 0,null].includes(t==null?void 0:t.id);if(c&&(t==null?void 0:t.url)!==null&&(t==null?void 0:t.status)==="complete"&&!s)return chrome.tabs.sendMessage(t.id,e,r);c&&(t==null?void 0:t.status)!=="complete"&&!s&&d2(t,e,r,i)},m2=async t=>(await chrome.tabs.query({})).some(e=>e.id===t),_2=500,y2=5,v2=({shiftKey:t,ctrlKey:e,metaKey:r,altKey:i},a="mac")=>{const s=[];return r&&(a==="mac"?s.push("cmd"):s.push("meta")),e&&s.push("ctrl"),i&&(a==="mac"?s.push("option"):s.push("alt")),t&&s.push("shift"),[...new Set(s)]},_o=(t,e)=>{const r=`${t.transcribed_description||""} ${e.transcribed_description||""}`.trim();r&&(t.transcribed_description=r),t.transcription_data={...t.transcription_data||{},...e.transcription_data||{}}},wm=(t,e="mac",r,i,a=!1)=>{let s=null,c=null;const u=[];t.forEach((h,y)=>{if(h.kind===Ct.KEYBOARD_ACTIONS.PRESS){const E=Object.values(h.modifiers).filter(x=>x).length;if(E>1||E>0&&!h.modifiers.shiftKey){const x=v2(h.modifiers,e);x.push(h.key),c={kind:Ct.KEYBOARD_ACTIONS.COMBINATION,keys:x,start_timestamp:h.start_timestamp,end_timestamp:h.end_timestamp,timestamp:h.timestamp,target_selector:h.target_selector,target_xpath:h.target_xpath,target_element_attributes:h.target_element_attributes,target_tag:h.target_tag,target_element:h.target_element,url:h.url,top_frame_origin:h.top_frame_origin,domain:h.domain,page_title:h.page_title,transcribed_description:h.transcribed_description,transcription_data:h.transcription_data,was_in_iframe:h.was_in_iframe,iframe_attributes:h.iframe_attributes,position:h.position,viewport:h.viewport,scrollPosition:h.scrollPosition,devicePixelRatio:h.devicePixelRatio,screenshot_url:h.screenshot_url,screenshot_upload_status:h.screenshot_upload_status,download_url:h.download_url,screenshot:h.screenshot,failed_ss:h.failed_ss,tempId:h.tempId,target_parent_attributes:h.target_parent_attributes,target_parent_tag:h.target_parent_tag}}else s?Ct.ARROW_KEYS.includes(hm(h.key))?(s.includesArrowKeys=!0,s.keys.push(h.key),s.end_timestamp=h.end_timestamp,_o(s,h)):h.key.toLowerCase()===Ct.BACKSPACE&&!s.includesArrowKeys&&s.keys.length>0?(s.keys.pop(),s.end_timestamp=h.end_timestamp,_o(s,h)):(s.keys.push(h.key),s.end_timestamp=h.end_timestamp,_o(s,h)):s={kind:Ct.KEYBOARD_ACTIONS.SEQUENCE,keys:[h.key],start_timestamp:h.start_timestamp,end_timestamp:h.end_timestamp,timestamp:h.timestamp,includesArrowKeys:!1,target_selector:h.target_selector,target_xpath:h.target_xpath,target_element_attributes:h.target_element_attributes,target_tag:h.target_tag,target_element:h.target_element,url:h.url,top_frame_origin:h.top_frame_origin,domain:h.domain,page_title:h.page_title,transcribed_description:h.transcribed_description,transcription_data:h.transcription_data,was_in_iframe:h.was_in_iframe,iframe_attributes:h.iframe_attributes,position:h.position,viewport:h.viewport,scrollPosition:h.scrollPosition,devicePixelRatio:h.devicePixelRatio,target_parent_attributes:h.target_parent_attributes,target_parent_tag:h.target_parent_tag,tempId:h.tempId}}else if(h.kind===Ct.INPUT_BLUR){if(s)s.screenshot_url=h.screenshot_url||s.screenshot_url,s.screenshot_upload_status=h.screenshot_upload_status||s.screenshot_upload_status,s.screenshot=h.screenshot||s.screenshot,s.failed_ss=h.failed_ss||s.failed_ss,s.end_timestamp=h.end_timestamp,s.download_url=h.download_url||s.download_url,h.position&&(s.position=h.position,s.viewport=h.viewport,s.scrollPosition=h.scrollPosition,s.devicePixelRatio=h.devicePixelRatio),_o(s,h);else if(u.length>0){const E=u[u.length-1];(E.kind===Ct.KEYBOARD_ACTIONS.SEQUENCE||E.kind===Ct.KEYBOARD_ACTIONS.COMBINATION)&&(E.screenshot_url=h.screenshot_url||E.screenshot_url,E.screenshot_upload_status=h.screenshot_upload_status||E.screenshot_upload_status,E.screenshot=h.screenshot||E.screenshot,E.failed_ss=h.failed_ss||E.failed_ss,E.end_timestamp=h.end_timestamp,h.position&&(E.position=h.position,E.viewport=h.viewport,E.scrollPosition=h.scrollPosition,E.devicePixelRatio=h.devicePixelRatio),_o(E,h))}}else h.kind===Ct.INSTRUCTION&&h.description==="Do something on another tab"&&u.length>0&&u[u.length-1].kind===Ct.INSTRUCTION&&u[u.length-1].description==="Do something on another tab"?u[u.length-1].timestamp=h.timestamp:h.isTranscribing&&y!==t.length-1||u.push(h);s&&(!l2(h)||c||y===t.length-1)&&(u.push(s),s=null),c&&(u.push(c),c=null)});const p=u.filter(h=>h.keys?h.keys.length>0:!0).sort((h,y)=>h.start_timestamp<y.start_timestamp?-1:y.start_timestamp>h.start_timestamp?1:0),{actionsQueue:m,transcribedAudio:g}=pa(p,r);return i&&!a?m.concat({...s2,transcribed_description:_l(g)}):m},yl=t=>t?new URL(t).hostname:null;function b2(t,e){return t.shouldOverrideSelectClick&&e.length>0&&e[e.length-1].kind===Ct.MOUSE_ACTIONS.CLICK&&e[e.length-1].target_tag==="SELECT"}const w2=(t,e,r,i,a,s,c)=>{var D;const u=b2(a,t);let p=r;const m=!!a&&a==="Open a new tab";if(a.url||(a.url=e),a.url&&!a.domain&&(a.domain=yl(a.url)),a.kind===Ct.MOUSE_ACTIONS.CLICK){if(t.length>0&&((D=t[t.length-1])==null?void 0:D.kind)===Ct.MOUSE_ACTIONS.CLICK&&!u){const U={...t[t.length-1]},j=a.timestamp-U.end_timestamp,R=a.position&&U.position?Math.sqrt((a.position.x-U.position.x)**2+(a.position.y-U.position.y)**2):NaN;if(j<_2&&R<y2)return U.click_count=2,U.description=mm(U),U.end_timestamp=a.timestamp,{newActionsQueue:[...t.slice(0,-1),U],newActionsWithScreenshotCount:p};a.click_count=1}else a.click_count=1;p+=1,u||(a.description=mm(a))}a.kind===Ct.KEYBOARD_ACTIONS.COMBINATION&&a.screenshot_upload_status&&(p+=1),a.kind===Ct.INPUT_BLUR&&a.screenshot_upload_status&&(p+=1);const g=t[t.length-1];if(!m&&g&&a.url&&g.description==="Open a new tab"&&g.tabId===a.tabId&&(g.description=`In a new tab, navigate to ${a.url}`),a.kind===Ct.MOUSE_ACTIONS.START_DRAG&&(g==null?void 0:g.kind)===Ct.MOUSE_ACTIONS.CLICK&&(a={...g,description:"Drag from here.",kind:Ct.MOUSE_ACTIONS.START_DRAG,timestamp:Date.now()},t.pop()),a.kind===Ct.MOUSE_ACTIONS.CANCEL_DRAG){let U=t.at(-1)||null;const j=[Ct.MOUSE_ACTIONS.START_DRAG,Ct.MOUSE_ACTIONS.END_DRAG];for(;t.length>0&&(U==null?void 0:U.kind)!==Ct.MOUSE_ACTIONS.START_DRAG;)j.includes(U==null?void 0:U.kind)&&t.pop(),U=t.at(-1)||null;if(t.length>0&&(U==null?void 0:U.kind)===Ct.MOUSE_ACTIONS.START_DRAG&&t.pop(),t.length===0)return{newActionsQueue:t,newActionsWithScreenshotCount:p};a={...t.at(-1)},t.pop()}const h=t.length>0?t[t.length-1]:void 0;let y=0;if(h&&(y=h.end_timestamp??h.start_timestamp),s&&s>y?a.start_timestamp=s:y>0?a.start_timestamp=y:a.start_timestamp=i,a.end_timestamp=a.timestamp,a.shouldOverrideSelectClick){const U=t[t.length-1];if(U){a.transcription_data={...U.transcription_data||{},...a.transcription_data||{}};const j=[];c&&Object.values(c).forEach(w=>{w.audio_start_timestamp>=U.timestamp&&w.audio_start_timestamp<=a.end_timestamp&&j.push(w)}),j.forEach(w=>{a.transcription_data=bm(a.transcription_data,w)});const R=_l(a.transcription_data);R&&(a.transcribed_description=`${R}
${a.description}`),j.forEach(w=>{delete c[w.audio_start_timestamp]})}t.pop()}const{actionsQueue:E,transcribedAudio:x}=pa(g2([...t,a]),c);return{newActionsQueue:E,newActionsWithScreenshotCount:p,transcribedAudio:x}},S2=(t,e,r)=>(t??[]).map(i=>{let a={...i};return a.tempId===e&&(a={...i,...r}),a}),E2=async()=>{const t=await chrome.storage.local.get("persist:localStorage");return JSON.parse(t["persist:localStorage"])},I2=async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return null}},O2="ScreenshotsUploadFailed",T2=3,Xn="uploadFailed",vl="uploadFailedRecovery";let Ae=null;const Sm=()=>Ae,A2=()=>{Ae&&Ae.close()};function Em(){return new Promise((t,e)=>{const r=indexedDB.open(O2,T2);r.onupgradeneeded=i=>{const a=i.target;if(Ae=a.result,Ae.objectStoreNames.contains(Xn)){if(!a.transaction){console.error("onupgradeneeded: transaction is null");return}const s=a.transaction.objectStore(Xn),c=s.index("imageData"),u=s.index("timestamp");c&&s.deleteIndex("imageData"),u&&s.deleteIndex("timestamp"),s.createIndex("imageData","imageData",{unique:!1}),s.createIndex("timestamp","timestamp",{unique:!1})}else{const s=Ae.createObjectStore(Xn,{keyPath:"id",autoIncrement:!0});s.createIndex("actionId","actionId",{unique:!0}),s.createIndex("imageData","imageData",{unique:!1}),s.createIndex("timestamp","timestamp",{unique:!1}),s.createIndex("numOfRetry","numOfRetry",{unique:!1}),s.createIndex("error","error",{unique:!1})}if(Ae.objectStoreNames.contains(vl)){if(!a.transaction){console.error("onupgradeneeded: transaction is null");return}const s=a.transaction.objectStore(vl),c=s.index("imageData"),u=s.index("timestamp");c&&s.deleteIndex("imageData"),u&&s.deleteIndex("timestamp"),s.createIndex("imageData","imageData",{unique:!1}),s.createIndex("timestamp","timestamp",{unique:!1})}else{const s=Ae.createObjectStore(vl,{keyPath:"id",autoIncrement:!0});s.createIndex("actionId","actionId",{unique:!0}),s.createIndex("imageData","imageData",{unique:!1}),s.createIndex("timestamp","timestamp",{unique:!1}),s.createIndex("numOfRetry","numOfRetry",{unique:!1}),s.createIndex("error","error",{unique:!1})}},r.onsuccess=i=>{Ae=i.target.result,t(Ae)},r.onerror=i=>{const a=i.target;Kt({title:"indexedDB_open_error",error:a.error??{message:"Unknown error"}}),e(a.error)}})}function ha(t,e,r,i,a,{scribeId:s,privacyScreen:c},u="uploadFailed"){if(!Ae){console.error("addDataToDB: No DB");return}const p=Ae.transaction(u,"readwrite").objectStore(u),m=p.index("actionId").get(t);m.onsuccess=()=>{const g=m.result,h={actionId:t,imageData:e,timestamp:r,numOfRetry:i,error:a};g&&(h.id=g.id);const y=p.put(h);y.onsuccess=()=>{},y.onerror=E=>{const x=E.target,D={timestamp:r,scribeId:s,privacyScreen:c};Kt({title:"indexedDB_add_data_error",error:x.error??{message:"Unknown error"},screenshot_data:D}),console.error("Error adding/updating data in IndexedDB:",x.error)}},m.onerror=g=>{const h=g.target;Kt({title:"indexedDB_check_record_error",error:h.error??{message:"Unknown error"}}),console.error("Error checking for existing record:",h.error)}}function Im(t="uploadFailed"){if(!Ae)return;let e=null;try{e=Ae.transaction([t],"readwrite")}catch(i){console.warn(`deleteAllDataFromDB: couldn't create a transaction. Reason: ${i}`)}if(e===null)return;const r=e.objectStore(t).clear();r.onsuccess=()=>{},r.onerror=i=>{const a=i.target;Kt({title:"indexedDB_delete_data_error",error:a.error??{message:"Unknown error"}}),console.error("Error deleting data from IndexedDB:",a.error)}}function Om(t="uploadFailed"){return new Promise(e=>{if(!Ae){e(0);return}let r=null;try{r=Ae.transaction([t],"readonly")}catch(a){Kt({title:"countItemsInDB: couldn't create a transaction.",error:a}),console.warn(`countItemsInDB: couldn't create a transaction. Reason: ${a}`)}if(r===null){e(0);return}const i=r.objectStore(t).count();i.onsuccess=()=>{e(i.result)},i.onerror=a=>{const s=a.target;Kt({title:"indexedDB_count_error",error:s.error??{message:"Unknown error"}}),console.error("Error counting items in DB:",s.error),e(0)}})}async function C2(t="uploadFailed"){return await Em(),new Promise((e,r)=>{if(!Ae){console.error("getAllDataFromDB: No DB"),e([]);return}const i=[],a=Ae.transaction([t],"readonly"),s=a.objectStore(t).openCursor();s.onsuccess=c=>{const u=c.target.result;u&&(i.push(u.value),u.continue())},a.oncomplete=()=>{e(i)},a.onerror=c=>{var u;Kt({title:"getAllDataFromDB: Error retrieving data",error:((u=c.target)==null?void 0:u.error)??{message:"Unknown error"}}),console.error("getAllDataFromDB: Error retrieving data:",c),r(c.target.error)}})}var yo={},ga={};ga.byteLength=N2,ga.toByteArray=P2,ga.fromByteArray=U2;for(var zr=[],Er=[],x2=typeof Uint8Array<"u"?Uint8Array:Array,bl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ai=0,k2=bl.length;Ai<k2;++Ai)zr[Ai]=bl[Ai],Er[bl.charCodeAt(Ai)]=Ai;Er["-".charCodeAt(0)]=62,Er["_".charCodeAt(0)]=63;function Tm(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var i=r===e?0:4-r%4;return[r,i]}function N2(t){var e=Tm(t),r=e[0],i=e[1];return(r+i)*3/4-i}function R2(t,e,r){return(e+r)*3/4-r}function P2(t){var e,r=Tm(t),i=r[0],a=r[1],s=new x2(R2(t,i,a)),c=0,u=a>0?i-4:i,p;for(p=0;p<u;p+=4)e=Er[t.charCodeAt(p)]<<18|Er[t.charCodeAt(p+1)]<<12|Er[t.charCodeAt(p+2)]<<6|Er[t.charCodeAt(p+3)],s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=e&255;return a===2&&(e=Er[t.charCodeAt(p)]<<2|Er[t.charCodeAt(p+1)]>>4,s[c++]=e&255),a===1&&(e=Er[t.charCodeAt(p)]<<10|Er[t.charCodeAt(p+1)]<<4|Er[t.charCodeAt(p+2)]>>2,s[c++]=e>>8&255,s[c++]=e&255),s}function D2(t){return zr[t>>18&63]+zr[t>>12&63]+zr[t>>6&63]+zr[t&63]}function j2(t,e,r){for(var i,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),a.push(D2(i));return a.join("")}function U2(t){for(var e,r=t.length,i=r%3,a=[],s=16383,c=0,u=r-i;c<u;c+=s)a.push(j2(t,c,c+s>u?u:c+s));return i===1?(e=t[r-1],a.push(zr[e>>2]+zr[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],a.push(zr[e>>10]+zr[e>>4&63]+zr[e<<2&63]+"=")),a.join("")}var wl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */wl.read=function(t,e,r,i,a){var s,c,u=a*8-i-1,p=(1<<u)-1,m=p>>1,g=-7,h=r?a-1:0,y=r?-1:1,E=t[e+h];for(h+=y,s=E&(1<<-g)-1,E>>=-g,g+=u;g>0;s=s*256+t[e+h],h+=y,g-=8);for(c=s&(1<<-g)-1,s>>=-g,g+=i;g>0;c=c*256+t[e+h],h+=y,g-=8);if(s===0)s=1-m;else{if(s===p)return c?NaN:(E?-1:1)*(1/0);c=c+Math.pow(2,i),s=s-m}return(E?-1:1)*c*Math.pow(2,s-i)},wl.write=function(t,e,r,i,a,s){var c,u,p,m=s*8-a-1,g=(1<<m)-1,h=g>>1,y=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=i?0:s-1,x=i?1:-1,D=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,c=g):(c=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-c))<1&&(c--,p*=2),c+h>=1?e+=y/p:e+=y*Math.pow(2,1-h),e*p>=2&&(c++,p/=2),c+h>=g?(u=0,c=g):c+h>=1?(u=(e*p-1)*Math.pow(2,a),c=c+h):(u=e*Math.pow(2,h-1)*Math.pow(2,a),c=0));a>=8;t[r+E]=u&255,E+=x,u/=256,a-=8);for(c=c<<a|u,m+=a;m>0;t[r+E]=c&255,E+=x,c/=256,m-=8);t[r+E-x]|=D*128};/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/(function(t){const e=ga,r=wl,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=R,t.INSPECT_MAX_BYTES=50;const a=2147483647;t.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=s(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const f=new Uint8Array(1),v={foo:function(){return 42}};return Object.setPrototypeOf(v,Uint8Array.prototype),Object.setPrototypeOf(f,v),f.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(f){if(f>a)throw new RangeError('The value "'+f+'" is invalid for option "size"');const v=new Uint8Array(f);return Object.setPrototypeOf(v,u.prototype),v}function u(f,v,O){if(typeof f=="number"){if(typeof v=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(f)}return p(f,v,O)}u.poolSize=8192;function p(f,v,O){if(typeof f=="string")return y(f,v);if(ArrayBuffer.isView(f))return x(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(Yt(f,ArrayBuffer)||f&&Yt(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Yt(f,SharedArrayBuffer)||f&&Yt(f.buffer,SharedArrayBuffer)))return D(f,v,O);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=f.valueOf&&f.valueOf();if(B!=null&&B!==f)return u.from(B,v,O);const H=U(f);if(H)return H;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return u.from(f[Symbol.toPrimitive]("string"),v,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}u.from=function(f,v,O){return p(f,v,O)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function m(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function g(f,v,O){return m(f),f<=0?c(f):v!==void 0?typeof O=="string"?c(f).fill(v,O):c(f).fill(v):c(f)}u.alloc=function(f,v,O){return g(f,v,O)};function h(f){return m(f),c(f<0?0:j(f)|0)}u.allocUnsafe=function(f){return h(f)},u.allocUnsafeSlow=function(f){return h(f)};function y(f,v){if((typeof v!="string"||v==="")&&(v="utf8"),!u.isEncoding(v))throw new TypeError("Unknown encoding: "+v);const O=w(f,v)|0;let B=c(O);const H=B.write(f,v);return H!==O&&(B=B.slice(0,H)),B}function E(f){const v=f.length<0?0:j(f.length)|0,O=c(v);for(let B=0;B<v;B+=1)O[B]=f[B]&255;return O}function x(f){if(Yt(f,Uint8Array)){const v=new Uint8Array(f);return D(v.buffer,v.byteOffset,v.byteLength)}return E(f)}function D(f,v,O){if(v<0||f.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<v+(O||0))throw new RangeError('"length" is outside of buffer bounds');let B;return v===void 0&&O===void 0?B=new Uint8Array(f):O===void 0?B=new Uint8Array(f,v):B=new Uint8Array(f,v,O),Object.setPrototypeOf(B,u.prototype),B}function U(f){if(u.isBuffer(f)){const v=j(f.length)|0,O=c(v);return O.length===0||f.copy(O,0,0,v),O}if(f.length!==void 0)return typeof f.length!="number"||Ar(f.length)?c(0):E(f);if(f.type==="Buffer"&&Array.isArray(f.data))return E(f.data)}function j(f){if(f>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return f|0}function R(f){return+f!=f&&(f=0),u.alloc(+f)}u.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==u.prototype},u.compare=function(f,v){if(Yt(f,Uint8Array)&&(f=u.from(f,f.offset,f.byteLength)),Yt(v,Uint8Array)&&(v=u.from(v,v.offset,v.byteLength)),!u.isBuffer(f)||!u.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===v)return 0;let O=f.length,B=v.length;for(let H=0,X=Math.min(O,B);H<X;++H)if(f[H]!==v[H]){O=f[H],B=v[H];break}return O<B?-1:B<O?1:0},u.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(f,v){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return u.alloc(0);let O;if(v===void 0)for(v=0,O=0;O<f.length;++O)v+=f[O].length;const B=u.allocUnsafe(v);let H=0;for(O=0;O<f.length;++O){let X=f[O];if(Yt(X,Uint8Array))H+X.length>B.length?(u.isBuffer(X)||(X=u.from(X)),X.copy(B,H)):Uint8Array.prototype.set.call(B,X,H);else if(u.isBuffer(X))X.copy(B,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=X.length}return B};function w(f,v){if(u.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||Yt(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const O=f.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&O===0)return 0;let H=!1;for(;;)switch(v){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return vt(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return Ee(f).length;default:if(H)return B?-1:vt(f).length;v=(""+v).toLowerCase(),H=!0}}u.byteLength=w;function T(f,v,O){let B=!1;if((v===void 0||v<0)&&(v=0),v>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,v>>>=0,O<=v))return"";for(f||(f="utf8");;)switch(f){case"hex":return ze(this,v,O);case"utf8":case"utf-8":return Tt(this,v,O);case"ascii":return yt(this,v,O);case"latin1":case"binary":return jt(this,v,O);case"base64":return Ot(this,v,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,v,O);default:if(B)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),B=!0}}u.prototype._isBuffer=!0;function P(f,v,O){const B=f[v];f[v]=f[O],f[O]=B}u.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<f;v+=2)P(this,v,v+1);return this},u.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<f;v+=4)P(this,v,v+3),P(this,v+1,v+2);return this},u.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<f;v+=8)P(this,v,v+7),P(this,v+1,v+6),P(this,v+2,v+5),P(this,v+3,v+4);return this},u.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?Tt(this,0,f):T.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(f){if(!u.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:u.compare(this,f)===0},u.prototype.inspect=function(){let f="";const v=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(f+=" ... "),"<Buffer "+f+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(f,v,O,B,H){if(Yt(f,Uint8Array)&&(f=u.from(f,f.offset,f.byteLength)),!u.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(v===void 0&&(v=0),O===void 0&&(O=f?f.length:0),B===void 0&&(B=0),H===void 0&&(H=this.length),v<0||O>f.length||B<0||H>this.length)throw new RangeError("out of range index");if(B>=H&&v>=O)return 0;if(B>=H)return-1;if(v>=O)return 1;if(v>>>=0,O>>>=0,B>>>=0,H>>>=0,this===f)return 0;let X=H-B,at=O-v;const Vt=Math.min(X,at),ue=this.slice(B,H),Zt=f.slice(v,O);for(let Ht=0;Ht<Vt;++Ht)if(ue[Ht]!==Zt[Ht]){X=ue[Ht],at=Zt[Ht];break}return X<at?-1:at<X?1:0};function F(f,v,O,B,H){if(f.length===0)return-1;if(typeof O=="string"?(B=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,Ar(O)&&(O=H?0:f.length-1),O<0&&(O=f.length+O),O>=f.length){if(H)return-1;O=f.length-1}else if(O<0)if(H)O=0;else return-1;if(typeof v=="string"&&(v=u.from(v,B)),u.isBuffer(v))return v.length===0?-1:V(f,v,O,B,H);if(typeof v=="number")return v=v&255,typeof Uint8Array.prototype.indexOf=="function"?H?Uint8Array.prototype.indexOf.call(f,v,O):Uint8Array.prototype.lastIndexOf.call(f,v,O):V(f,[v],O,B,H);throw new TypeError("val must be string, number or Buffer")}function V(f,v,O,B,H){let X=1,at=f.length,Vt=v.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(f.length<2||v.length<2)return-1;X=2,at/=2,Vt/=2,O/=2}function ue(Ht,pe){return X===1?Ht[pe]:Ht.readUInt16BE(pe*X)}let Zt;if(H){let Ht=-1;for(Zt=O;Zt<at;Zt++)if(ue(f,Zt)===ue(v,Ht===-1?0:Zt-Ht)){if(Ht===-1&&(Ht=Zt),Zt-Ht+1===Vt)return Ht*X}else Ht!==-1&&(Zt-=Zt-Ht),Ht=-1}else for(O+Vt>at&&(O=at-Vt),Zt=O;Zt>=0;Zt--){let Ht=!0;for(let pe=0;pe<Vt;pe++)if(ue(f,Zt+pe)!==ue(v,pe)){Ht=!1;break}if(Ht)return Zt}return-1}u.prototype.includes=function(f,v,O){return this.indexOf(f,v,O)!==-1},u.prototype.indexOf=function(f,v,O){return F(this,f,v,O,!0)},u.prototype.lastIndexOf=function(f,v,O){return F(this,f,v,O,!1)};function Y(f,v,O,B){O=Number(O)||0;const H=f.length-O;B?(B=Number(B),B>H&&(B=H)):B=H;const X=v.length;B>X/2&&(B=X/2);let at;for(at=0;at<B;++at){const Vt=parseInt(v.substr(at*2,2),16);if(Ar(Vt))return at;f[O+at]=Vt}return at}function b(f,v,O,B){return se(vt(v,f.length-O),f,O,B)}function G(f,v,O,B){return se(he(v),f,O,B)}function et(f,v,O,B){return se(Ee(v),f,O,B)}function ct(f,v,O,B){return se(Tr(v,f.length-O),f,O,B)}u.prototype.write=function(f,v,O,B){if(v===void 0)B="utf8",O=this.length,v=0;else if(O===void 0&&typeof v=="string")B=v,O=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(O)?(O=O>>>0,B===void 0&&(B="utf8")):(B=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const H=this.length-v;if((O===void 0||O>H)&&(O=H),f.length>0&&(O<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let X=!1;for(;;)switch(B){case"hex":return Y(this,f,v,O);case"utf8":case"utf-8":return b(this,f,v,O);case"ascii":case"latin1":case"binary":return G(this,f,v,O);case"base64":return et(this,f,v,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ct(this,f,v,O);default:if(X)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),X=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ot(f,v,O){return v===0&&O===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(v,O))}function Tt(f,v,O){O=Math.min(f.length,O);const B=[];let H=v;for(;H<O;){const X=f[H];let at=null,Vt=X>239?4:X>223?3:X>191?2:1;if(H+Vt<=O){let ue,Zt,Ht,pe;switch(Vt){case 1:X<128&&(at=X);break;case 2:ue=f[H+1],(ue&192)===128&&(pe=(X&31)<<6|ue&63,pe>127&&(at=pe));break;case 3:ue=f[H+1],Zt=f[H+2],(ue&192)===128&&(Zt&192)===128&&(pe=(X&15)<<12|(ue&63)<<6|Zt&63,pe>2047&&(pe<55296||pe>57343)&&(at=pe));break;case 4:ue=f[H+1],Zt=f[H+2],Ht=f[H+3],(ue&192)===128&&(Zt&192)===128&&(Ht&192)===128&&(pe=(X&15)<<18|(ue&63)<<12|(Zt&63)<<6|Ht&63,pe>65535&&pe<1114112&&(at=pe))}}at===null?(at=65533,Vt=1):at>65535&&(at-=65536,B.push(at>>>10&1023|55296),at=56320|at&1023),B.push(at),H+=Vt}return xt(B)}const Mt=4096;function xt(f){const v=f.length;if(v<=Mt)return String.fromCharCode.apply(String,f);let O="",B=0;for(;B<v;)O+=String.fromCharCode.apply(String,f.slice(B,B+=Mt));return O}function yt(f,v,O){let B="";O=Math.min(f.length,O);for(let H=v;H<O;++H)B+=String.fromCharCode(f[H]&127);return B}function jt(f,v,O){let B="";O=Math.min(f.length,O);for(let H=v;H<O;++H)B+=String.fromCharCode(f[H]);return B}function ze(f,v,O){const B=f.length;(!v||v<0)&&(v=0),(!O||O<0||O>B)&&(O=B);let H="";for(let X=v;X<O;++X)H+=Ni[f[X]];return H}function _e(f,v,O){const B=f.slice(v,O);let H="";for(let X=0;X<B.length-1;X+=2)H+=String.fromCharCode(B[X]+B[X+1]*256);return H}u.prototype.slice=function(f,v){const O=this.length;f=~~f,v=v===void 0?O:~~v,f<0?(f+=O,f<0&&(f=0)):f>O&&(f=O),v<0?(v+=O,v<0&&(v=0)):v>O&&(v=O),v<f&&(v=f);const B=this.subarray(f,v);return Object.setPrototypeOf(B,u.prototype),B};function q(f,v,O){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+v>O)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(f,v,O){f=f>>>0,v=v>>>0,O||q(f,v,this.length);let B=this[f],H=1,X=0;for(;++X<v&&(H*=256);)B+=this[f+X]*H;return B},u.prototype.readUintBE=u.prototype.readUIntBE=function(f,v,O){f=f>>>0,v=v>>>0,O||q(f,v,this.length);let B=this[f+--v],H=1;for(;v>0&&(H*=256);)B+=this[f+--v]*H;return B},u.prototype.readUint8=u.prototype.readUInt8=function(f,v){return f=f>>>0,v||q(f,1,this.length),this[f]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(f,v){return f=f>>>0,v||q(f,2,this.length),this[f]|this[f+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(f,v){return f=f>>>0,v||q(f,2,this.length),this[f]<<8|this[f+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(f,v){return f=f>>>0,v||q(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(f,v){return f=f>>>0,v||q(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},u.prototype.readBigUInt64LE=Pe(function(f){f=f>>>0,Pt(f,"offset");const v=this[f],O=this[f+7];(v===void 0||O===void 0)&&mt(f,this.length-8);const B=v+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,H=this[++f]+this[++f]*2**8+this[++f]*2**16+O*2**24;return BigInt(B)+(BigInt(H)<<BigInt(32))}),u.prototype.readBigUInt64BE=Pe(function(f){f=f>>>0,Pt(f,"offset");const v=this[f],O=this[f+7];(v===void 0||O===void 0)&&mt(f,this.length-8);const B=v*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],H=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+O;return(BigInt(B)<<BigInt(32))+BigInt(H)}),u.prototype.readIntLE=function(f,v,O){f=f>>>0,v=v>>>0,O||q(f,v,this.length);let B=this[f],H=1,X=0;for(;++X<v&&(H*=256);)B+=this[f+X]*H;return H*=128,B>=H&&(B-=Math.pow(2,8*v)),B},u.prototype.readIntBE=function(f,v,O){f=f>>>0,v=v>>>0,O||q(f,v,this.length);let B=v,H=1,X=this[f+--B];for(;B>0&&(H*=256);)X+=this[f+--B]*H;return H*=128,X>=H&&(X-=Math.pow(2,8*v)),X},u.prototype.readInt8=function(f,v){return f=f>>>0,v||q(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},u.prototype.readInt16LE=function(f,v){f=f>>>0,v||q(f,2,this.length);const O=this[f]|this[f+1]<<8;return O&32768?O|4294901760:O},u.prototype.readInt16BE=function(f,v){f=f>>>0,v||q(f,2,this.length);const O=this[f+1]|this[f]<<8;return O&32768?O|4294901760:O},u.prototype.readInt32LE=function(f,v){return f=f>>>0,v||q(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},u.prototype.readInt32BE=function(f,v){return f=f>>>0,v||q(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},u.prototype.readBigInt64LE=Pe(function(f){f=f>>>0,Pt(f,"offset");const v=this[f],O=this[f+7];(v===void 0||O===void 0)&&mt(f,this.length-8);const B=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(O<<24);return(BigInt(B)<<BigInt(32))+BigInt(v+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),u.prototype.readBigInt64BE=Pe(function(f){f=f>>>0,Pt(f,"offset");const v=this[f],O=this[f+7];(v===void 0||O===void 0)&&mt(f,this.length-8);const B=(v<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(B)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+O)}),u.prototype.readFloatLE=function(f,v){return f=f>>>0,v||q(f,4,this.length),r.read(this,f,!0,23,4)},u.prototype.readFloatBE=function(f,v){return f=f>>>0,v||q(f,4,this.length),r.read(this,f,!1,23,4)},u.prototype.readDoubleLE=function(f,v){return f=f>>>0,v||q(f,8,this.length),r.read(this,f,!0,52,8)},u.prototype.readDoubleBE=function(f,v){return f=f>>>0,v||q(f,8,this.length),r.read(this,f,!1,52,8)};function Z(f,v,O,B,H,X){if(!u.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>H||v<X)throw new RangeError('"value" argument is out of bounds');if(O+B>f.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(f,v,O,B){if(f=+f,v=v>>>0,O=O>>>0,!B){const at=Math.pow(2,8*O)-1;Z(this,f,v,O,at,0)}let H=1,X=0;for(this[v]=f&255;++X<O&&(H*=256);)this[v+X]=f/H&255;return v+O},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(f,v,O,B){if(f=+f,v=v>>>0,O=O>>>0,!B){const at=Math.pow(2,8*O)-1;Z(this,f,v,O,at,0)}let H=O-1,X=1;for(this[v+H]=f&255;--H>=0&&(X*=256);)this[v+H]=f/X&255;return v+O},u.prototype.writeUint8=u.prototype.writeUInt8=function(f,v,O){return f=+f,v=v>>>0,O||Z(this,f,v,1,255,0),this[v]=f&255,v+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(f,v,O){return f=+f,v=v>>>0,O||Z(this,f,v,2,65535,0),this[v]=f&255,this[v+1]=f>>>8,v+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(f,v,O){return f=+f,v=v>>>0,O||Z(this,f,v,2,65535,0),this[v]=f>>>8,this[v+1]=f&255,v+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(f,v,O){return f=+f,v=v>>>0,O||Z(this,f,v,4,4294967295,0),this[v+3]=f>>>24,this[v+2]=f>>>16,this[v+1]=f>>>8,this[v]=f&255,v+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(f,v,O){return f=+f,v=v>>>0,O||Z(this,f,v,4,4294967295,0),this[v]=f>>>24,this[v+1]=f>>>16,this[v+2]=f>>>8,this[v+3]=f&255,v+4};function Q(f,v,O,B,H){kt(v,B,H,f,O,7);let X=Number(v&BigInt(4294967295));f[O++]=X,X=X>>8,f[O++]=X,X=X>>8,f[O++]=X,X=X>>8,f[O++]=X;let at=Number(v>>BigInt(32)&BigInt(4294967295));return f[O++]=at,at=at>>8,f[O++]=at,at=at>>8,f[O++]=at,at=at>>8,f[O++]=at,O}function st(f,v,O,B,H){kt(v,B,H,f,O,7);let X=Number(v&BigInt(4294967295));f[O+7]=X,X=X>>8,f[O+6]=X,X=X>>8,f[O+5]=X,X=X>>8,f[O+4]=X;let at=Number(v>>BigInt(32)&BigInt(4294967295));return f[O+3]=at,at=at>>8,f[O+2]=at,at=at>>8,f[O+1]=at,at=at>>8,f[O]=at,O+8}u.prototype.writeBigUInt64LE=Pe(function(f,v=0){return Q(this,f,v,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Pe(function(f,v=0){return st(this,f,v,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(f,v,O,B){if(f=+f,v=v>>>0,!B){const Vt=Math.pow(2,8*O-1);Z(this,f,v,O,Vt-1,-Vt)}let H=0,X=1,at=0;for(this[v]=f&255;++H<O&&(X*=256);)f<0&&at===0&&this[v+H-1]!==0&&(at=1),this[v+H]=(f/X>>0)-at&255;return v+O},u.prototype.writeIntBE=function(f,v,O,B){if(f=+f,v=v>>>0,!B){const Vt=Math.pow(2,8*O-1);Z(this,f,v,O,Vt-1,-Vt)}let H=O-1,X=1,at=0;for(this[v+H]=f&255;--H>=0&&(X*=256);)f<0&&at===0&&this[v+H+1]!==0&&(at=1),this[v+H]=(f/X>>0)-at&255;return v+O},u.prototype.writeInt8=function(f,v,O){return f=+f,v=v>>>0,O||Z(this,f,v,1,127,-128),f<0&&(f=255+f+1),this[v]=f&255,v+1},u.prototype.writeInt16LE=function(f,v,O){return f=+f,v=v>>>0,O||Z(this,f,v,2,32767,-32768),this[v]=f&255,this[v+1]=f>>>8,v+2},u.prototype.writeInt16BE=function(f,v,O){return f=+f,v=v>>>0,O||Z(this,f,v,2,32767,-32768),this[v]=f>>>8,this[v+1]=f&255,v+2},u.prototype.writeInt32LE=function(f,v,O){return f=+f,v=v>>>0,O||Z(this,f,v,4,2147483647,-2147483648),this[v]=f&255,this[v+1]=f>>>8,this[v+2]=f>>>16,this[v+3]=f>>>24,v+4},u.prototype.writeInt32BE=function(f,v,O){return f=+f,v=v>>>0,O||Z(this,f,v,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[v]=f>>>24,this[v+1]=f>>>16,this[v+2]=f>>>8,this[v+3]=f&255,v+4},u.prototype.writeBigInt64LE=Pe(function(f,v=0){return Q(this,f,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Pe(function(f,v=0){return st(this,f,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function dt(f,v,O,B,H,X){if(O+B>f.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function ht(f,v,O,B,H){return v=+v,O=O>>>0,H||dt(f,v,O,4),r.write(f,v,O,B,23,4),O+4}u.prototype.writeFloatLE=function(f,v,O){return ht(this,f,v,!0,O)},u.prototype.writeFloatBE=function(f,v,O){return ht(this,f,v,!1,O)};function k(f,v,O,B,H){return v=+v,O=O>>>0,H||dt(f,v,O,8),r.write(f,v,O,B,52,8),O+8}u.prototype.writeDoubleLE=function(f,v,O){return k(this,f,v,!0,O)},u.prototype.writeDoubleBE=function(f,v,O){return k(this,f,v,!1,O)},u.prototype.copy=function(f,v,O,B){if(!u.isBuffer(f))throw new TypeError("argument should be a Buffer");if(O||(O=0),!B&&B!==0&&(B=this.length),v>=f.length&&(v=f.length),v||(v=0),B>0&&B<O&&(B=O),B===O||f.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),f.length-v<B-O&&(B=f.length-v+O);const H=B-O;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,O,B):Uint8Array.prototype.set.call(f,this.subarray(O,B),v),H},u.prototype.fill=function(f,v,O,B){if(typeof f=="string"){if(typeof v=="string"?(B=v,v=0,O=this.length):typeof O=="string"&&(B=O,O=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!u.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(f.length===1){const X=f.charCodeAt(0);(B==="utf8"&&X<128||B==="latin1")&&(f=X)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(v<0||this.length<v||this.length<O)throw new RangeError("Out of range index");if(O<=v)return this;v=v>>>0,O=O===void 0?this.length:O>>>0,f||(f=0);let H;if(typeof f=="number")for(H=v;H<O;++H)this[H]=f;else{const X=u.isBuffer(f)?f:u.from(f,B),at=X.length;if(at===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(H=0;H<O-v;++H)this[H+v]=X[H%at]}return this};const I={};function J(f,v,O){I[f]=class extends O{constructor(){super(),Object.defineProperty(this,"message",{value:v.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}J("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(f,v){return`The "${f}" argument must be of type number. Received type ${typeof v}`},TypeError),J("ERR_OUT_OF_RANGE",function(f,v,O){let B=`The value of "${f}" is out of range.`,H=O;return Number.isInteger(O)&&Math.abs(O)>2**32?H=z(String(O)):typeof O=="bigint"&&(H=String(O),(O>BigInt(2)**BigInt(32)||O<-(BigInt(2)**BigInt(32)))&&(H=z(H)),H+="n"),B+=` It must be ${v}. Received ${H}`,B},RangeError);function z(f){let v="",O=f.length;const B=f[0]==="-"?1:0;for(;O>=B+4;O-=3)v=`_${f.slice(O-3,O)}${v}`;return`${f.slice(0,O)}${v}`}function wt(f,v,O){Pt(v,"offset"),(f[v]===void 0||f[v+O]===void 0)&&mt(v,f.length-(O+1))}function kt(f,v,O,B,H,X){if(f>O||f<v){const at=typeof v=="bigint"?"n":"";let Vt;throw X>3?v===0||v===BigInt(0)?Vt=`>= 0${at} and < 2${at} ** ${(X+1)*8}${at}`:Vt=`>= -(2${at} ** ${(X+1)*8-1}${at}) and < 2 ** ${(X+1)*8-1}${at}`:Vt=`>= ${v}${at} and <= ${O}${at}`,new I.ERR_OUT_OF_RANGE("value",Vt,f)}wt(B,H,X)}function Pt(f,v){if(typeof f!="number")throw new I.ERR_INVALID_ARG_TYPE(v,"number",f)}function mt(f,v,O){throw Math.floor(f)!==f?(Pt(f,O),new I.ERR_OUT_OF_RANGE(O||"offset","an integer",f)):v<0?new I.ERR_BUFFER_OUT_OF_BOUNDS:new I.ERR_OUT_OF_RANGE(O||"offset",`>= ${O?1:0} and <= ${v}`,f)}const Wt=/[^+/0-9A-Za-z-_]/g;function ye(f){if(f=f.split("=")[0],f=f.trim().replace(Wt,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function vt(f,v){v=v||1/0;let O;const B=f.length;let H=null;const X=[];for(let at=0;at<B;++at){if(O=f.charCodeAt(at),O>55295&&O<57344){if(!H){if(O>56319){(v-=3)>-1&&X.push(239,191,189);continue}else if(at+1===B){(v-=3)>-1&&X.push(239,191,189);continue}H=O;continue}if(O<56320){(v-=3)>-1&&X.push(239,191,189),H=O;continue}O=(H-55296<<10|O-56320)+65536}else H&&(v-=3)>-1&&X.push(239,191,189);if(H=null,O<128){if((v-=1)<0)break;X.push(O)}else if(O<2048){if((v-=2)<0)break;X.push(O>>6|192,O&63|128)}else if(O<65536){if((v-=3)<0)break;X.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((v-=4)<0)break;X.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return X}function he(f){const v=[];for(let O=0;O<f.length;++O)v.push(f.charCodeAt(O)&255);return v}function Tr(f,v){let O,B,H;const X=[];for(let at=0;at<f.length&&!((v-=2)<0);++at)O=f.charCodeAt(at),B=O>>8,H=O%256,X.push(H),X.push(B);return X}function Ee(f){return e.toByteArray(ye(f))}function se(f,v,O,B){let H;for(H=0;H<B&&!(H+O>=v.length||H>=f.length);++H)v[H+O]=f[H];return H}function Yt(f,v){return f instanceof v||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===v.name}function Ar(f){return f!==f}const Ni=function(){const f="0123456789abcdef",v=new Array(256);for(let O=0;O<16;++O){const B=O*16;for(let H=0;H<16;++H)v[B+H]=f[O]+f[H]}return v}();function Pe(f){return typeof BigInt>"u"?Vr:f}function Vr(){throw new Error("BigInt not supported")}})(yo);const Am=(t,e)=>{var i,a,s,c,u,p,m,g,h,y,E,x;t!=null&&t.date_joined&&Math.round(Date.parse(t.date_joined)/1e3);let r={};if(t&&(r={USER_ID:t.id,"Sign up date":t.date_joined,"First name":t.first_name,"Last name":t.last_name,Role:e==null?void 0:e.role,$email:t.email,super_organization_id:(i=t==null?void 0:t.active_organization)==null?void 0:i.super_organization.id,plan:(s=(a=t==null?void 0:t.active_organization)==null?void 0:a.super_organization)==null?void 0:s.plan.name,subscription_status:(u=(c=t==null?void 0:t.active_organization)==null?void 0:c.super_organization)==null?void 0:u.stripe_subscription_status,is_enterprise_self_serve:((m=(p=t==null?void 0:t.active_organization)==null?void 0:p.super_organization)==null?void 0:m.enterprise_plan_type)==="self_serve",pinned_extension:e==null?void 0:e.extension_currently_pinned,active_team_size:(g=t==null?void 0:t.active_organization)==null?void 0:g.user_count}),e!=null&&e.signup_source&&(r.signup_source=e==null?void 0:e.signup_source),(y=(h=chrome==null?void 0:chrome.runtime)==null?void 0:h.getManifest())!=null&&y.version&&(r.extension_version=(x=(E=chrome==null?void 0:chrome.runtime)==null?void 0:E.getManifest())==null?void 0:x.version),Vs()===ur.iOS||Vs()===ur.Android?r.signup_device="mobile":r.signup_device="desktop",t&&!(t!=null&&t.active_organization)){const D={USER_ID:r.USER_ID,pinned_extension:r.pinned_extension,signup_device:r.signup_device,extension_version:r.extension_version};Kt(new Error("User does not have active organization"),{extra:D})}Xs.identify(t==null?void 0:t.id),Xs.people.set(r)},L2=["switched_away_from_browser","extension_dropdown_open_recommended_clicked","enable_smart_blur"],ma=(t,e,r)=>{var u,p,m,g,h,y,E,x,D;const i=ut.getState().auth.userData,{userGrowthState:a}=ut.getState().auth;e==null&&(e={});let s="unknown";chrome.runtime.getManifest&&chrome.runtime.getManifest().version&&(s=chrome.runtime.getManifest().version);const c={...e,is_electron:!1,is_extension:!0,extension_version:s,super_organization_id:(u=i==null?void 0:i.active_organization)==null?void 0:u.super_organization.id,active_organization_id:(p=i==null?void 0:i.active_organization)==null?void 0:p.id,current_plan_atm:((h=(g=(m=i==null?void 0:i.active_organization)==null?void 0:m.super_organization)==null?void 0:g.plan)==null?void 0:h.name)||"free",current_pro_plan_type_atm:(E=(y=i==null?void 0:i.active_organization)==null?void 0:y.super_organization)==null?void 0:E.pro_plan_type,current_active_team_size:(x=i==null?void 0:i.active_organization)==null?void 0:x.user_count,active_team_permission_level:(D=i==null?void 0:i.active_organization)==null?void 0:D.permission_level};c.created_at=Number((Date.now()/1e3).toFixed()),Am(i,a),Xs.track(t,c),r&&L2.includes(t)&&r.post("/track/cio/",{event_name:t})},B2=(t,e,r={},i=!1,a=null,s=null)=>{e!==void 0&&ma("view_experiment",{experiment:t,variant:String(e),...r,didOverride:i,override:a,config:s})};var kn={},Cm={},xm;function Sl(){return xm||(xm=1,(function(){Cm.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(It)),Cm}var km={},Nn={},Rn={},Nm;function cn(){return Nm||(Nm=1,(function(){var t,e,r,i,a,s,c,u=[].slice,p={}.hasOwnProperty;t=function(){var m,g,h,y,E,x;if(x=arguments[0],E=2<=arguments.length?u.call(arguments,1):[],a(Object.assign))Object.assign.apply(null,arguments);else for(m=0,h=E.length;m<h;m++)if(y=E[m],y!=null)for(g in y)p.call(y,g)&&(x[g]=y[g]);return x},a=function(m){return!!m&&Object.prototype.toString.call(m)==="[object Function]"},s=function(m){var g;return!!m&&((g=typeof m)=="function"||g==="object")},r=function(m){return a(Array.isArray)?Array.isArray(m):Object.prototype.toString.call(m)==="[object Array]"},i=function(m){var g;if(r(m))return!m.length;for(g in m)if(p.call(m,g))return!1;return!0},c=function(m){var g,h;return s(m)&&(h=Object.getPrototypeOf(m))&&(g=h.constructor)&&typeof g=="function"&&g instanceof g&&Function.prototype.toString.call(g)===Function.prototype.toString.call(Object)},e=function(m){return a(m.valueOf)?m.valueOf():m},Rn.assign=t,Rn.isFunction=a,Rn.isObject=s,Rn.isArray=r,Rn.isEmpty=i,Rn.isPlainObject=c,Rn.getValue=e}).call(It)),Rn}var Rm={exports:{}},Pm;function Dm(){return Pm||(Pm=1,(function(){Rm.exports=function(){function t(){}return t.prototype.hasFeature=function(e,r){return!0},t.prototype.createDocumentType=function(e,r,i){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(e,r,i){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(e,r){throw new Error("This DOM method is not implemented.")},t}()}).call(It)),Rm.exports}var jm={exports:{}},Um={exports:{}},Lm={exports:{}},Bm;function M2(){return Bm||(Bm=1,(function(){Lm.exports=function(){function t(){}return t.prototype.handleError=function(e){throw new Error(e)},t}()}).call(It)),Lm.exports}var Mm={exports:{}},Fm;function F2(){return Fm||(Fm=1,(function(){Mm.exports=function(){function t(e){this.arr=e||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(e){return this.arr[e]||null},t.prototype.contains=function(e){return this.arr.indexOf(e)!==-1},t}()}).call(It)),Mm.exports}var qm;function q2(){return qm||(qm=1,(function(){var t,e;t=M2(),e=F2(),Um.exports=function(){function r(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new e(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,a){return!0},r.prototype.setParameter=function(i,a){return a!=null?this.params[i]=a:delete this.params[i]},r}()}).call(It)),Um.exports}var zm={exports:{}},Vm={exports:{}},$m={exports:{}},Wm;function Se(){return Wm||(Wm=1,(function(){$m.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(It)),$m.exports}var Ym={exports:{}},Hm;function Gm(){return Hm||(Hm=1,(function(){var t;t=Se(),Ir(),Ym.exports=function(){function e(r,i,a){if(this.parent=r,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),i==null)throw new Error("Missing attribute name. "+this.debugInfo(i));this.name=this.stringify.name(i),this.value=this.stringify.attValue(a),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(r){return this.value=r||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(r){return this.options.writer.attribute(this,this.options.writer.filterOptions(r))},e.prototype.debugInfo=function(r){return r=r||this.name,r==null?"parent: <"+this.parent.name+">":"attribute: {"+r+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(r){return!(r.namespaceURI!==this.namespaceURI||r.prefix!==this.prefix||r.localName!==this.localName||r.value!==this.value)},e}()}).call(It)),Ym.exports}var Qm={exports:{}},Km;function El(){return Km||(Km=1,(function(){Qm.exports=function(){function t(e){this.nodes=e}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(e){return this.nodes[e]},t.prototype.setNamedItem=function(e){var r;return r=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,r||null},t.prototype.removeNamedItem=function(e){var r;return r=this.nodes[e],delete this.nodes[e],r||null},t.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},t.prototype.getNamedItemNS=function(e,r){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(e,r){throw new Error("This DOM method is not implemented.")},t}()}).call(It)),Qm.exports}var Zm;function Il(){return Zm||(Zm=1,(function(){var t,e,r,i,a,s,c,u,p=function(g,h){for(var y in h)m.call(h,y)&&(g[y]=h[y]);function E(){this.constructor=g}return E.prototype=h.prototype,g.prototype=new E,g.__super__=h.prototype,g},m={}.hasOwnProperty;u=cn(),c=u.isObject,s=u.isFunction,a=u.getValue,i=Ir(),t=Se(),e=Gm(),r=El(),Vm.exports=function(g){p(h,g);function h(y,E,x){var D,U,j,R;if(h.__super__.constructor.call(this,y),E==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(E),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,x!=null&&this.attribute(x),y.type===t.Document&&(this.isRoot=!0,this.documentObject=y,y.rootObject=this,y.children)){for(R=y.children,U=0,j=R.length;U<j;U++)if(D=R[U],D.type===t.DocType){D.name=this.name;break}}}return Object.defineProperty(h.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(h.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(h.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),h.prototype.clone=function(){var y,E,x,D;x=Object.create(this),x.isRoot&&(x.documentObject=null),x.attribs={},D=this.attribs;for(E in D)m.call(D,E)&&(y=D[E],x.attribs[E]=y.clone());return x.children=[],this.children.forEach(function(U){var j;return j=U.clone(),j.parent=x,x.children.push(j)}),x},h.prototype.attribute=function(y,E){var x,D;if(y!=null&&(y=a(y)),c(y))for(x in y)m.call(y,x)&&(D=y[x],this.attribute(x,D));else s(E)&&(E=E.apply()),this.options.keepNullAttributes&&E==null?this.attribs[y]=new e(this,y,""):E!=null&&(this.attribs[y]=new e(this,y,E));return this},h.prototype.removeAttribute=function(y){var E,x,D;if(y==null)throw new Error("Missing attribute name. "+this.debugInfo());if(y=a(y),Array.isArray(y))for(x=0,D=y.length;x<D;x++)E=y[x],delete this.attribs[E];else delete this.attribs[y];return this},h.prototype.toString=function(y){return this.options.writer.element(this,this.options.writer.filterOptions(y))},h.prototype.att=function(y,E){return this.attribute(y,E)},h.prototype.a=function(y,E){return this.attribute(y,E)},h.prototype.getAttribute=function(y){return this.attribs.hasOwnProperty(y)?this.attribs[y].value:null},h.prototype.setAttribute=function(y,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNode=function(y){return this.attribs.hasOwnProperty(y)?this.attribs[y]:null},h.prototype.setAttributeNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNS=function(y,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNS=function(y,E,x){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNS=function(y,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNodeNS=function(y,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNodeNS=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(y,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.hasAttribute=function(y){return this.attribs.hasOwnProperty(y)},h.prototype.hasAttributeNS=function(y,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttribute=function(y,E){return this.attribs.hasOwnProperty(y)?this.attribs[y].isId:E},h.prototype.setIdAttributeNS=function(y,E,x){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttributeNode=function(y,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(y,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByClassName=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.isEqualNode=function(y){var E,x,D;if(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(y)||y.namespaceURI!==this.namespaceURI||y.prefix!==this.prefix||y.localName!==this.localName||y.attribs.length!==this.attribs.length)return!1;for(E=x=0,D=this.attribs.length-1;0<=D?x<=D:x>=D;E=0<=D?++x:--x)if(!this.attribs[E].isEqualNode(y.attribs[E]))return!1;return!0},h}(i)}).call(It)),Vm.exports}var Jm={exports:{}},Xm={exports:{}},t_;function _a(){return t_||(t_=1,(function(){var t,e=function(i,a){for(var s in a)r.call(a,s)&&(i[s]=a[s]);function c(){this.constructor=i}return c.prototype=a.prototype,i.prototype=new c,i.__super__=a.prototype,i},r={}.hasOwnProperty;t=Ir(),Xm.exports=function(i){e(a,i);function a(s){a.__super__.constructor.call(this,s),this.value=""}return Object.defineProperty(a.prototype,"data",{get:function(){return this.value},set:function(s){return this.value=s||""}}),Object.defineProperty(a.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(a.prototype,"textContent",{get:function(){return this.value},set:function(s){return this.value=s||""}}),a.prototype.clone=function(){return Object.create(this)},a.prototype.substringData=function(s,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.appendData=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.insertData=function(s,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.deleteData=function(s,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.replaceData=function(s,c,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.isEqualNode=function(s){return!(!a.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.data!==this.data)},a}(t)}).call(It)),Xm.exports}var e_;function Ol(){return e_||(e_=1,(function(){var t,e,r=function(a,s){for(var c in s)i.call(s,c)&&(a[c]=s[c]);function u(){this.constructor=a}return u.prototype=s.prototype,a.prototype=new u,a.__super__=s.prototype,a},i={}.hasOwnProperty;t=Se(),e=_a(),Jm.exports=function(a){r(s,a);function s(c,u){if(s.__super__.constructor.call(this,c),u==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(u)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(c){return this.options.writer.cdata(this,this.options.writer.filterOptions(c))},s}(e)}).call(It)),Jm.exports}var r_={exports:{}},n_;function Tl(){return n_||(n_=1,(function(){var t,e,r=function(a,s){for(var c in s)i.call(s,c)&&(a[c]=s[c]);function u(){this.constructor=a}return u.prototype=s.prototype,a.prototype=new u,a.__super__=s.prototype,a},i={}.hasOwnProperty;t=Se(),e=_a(),r_.exports=function(a){r(s,a);function s(c,u){if(s.__super__.constructor.call(this,c),u==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(u)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(c){return this.options.writer.comment(this,this.options.writer.filterOptions(c))},s}(e)}).call(It)),r_.exports}var i_={exports:{}},o_;function Al(){return o_||(o_=1,(function(){var t,e,r,i=function(s,c){for(var u in c)a.call(c,u)&&(s[u]=c[u]);function p(){this.constructor=s}return p.prototype=c.prototype,s.prototype=new p,s.__super__=c.prototype,s},a={}.hasOwnProperty;r=cn().isObject,e=Ir(),t=Se(),i_.exports=function(s){i(c,s);function c(u,p,m,g){var h;c.__super__.constructor.call(this,u),r(p)&&(h=p,p=h.version,m=h.encoding,g=h.standalone),p||(p="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(p),m!=null&&(this.encoding=this.stringify.xmlEncoding(m)),g!=null&&(this.standalone=this.stringify.xmlStandalone(g))}return c.prototype.toString=function(u){return this.options.writer.declaration(this,this.options.writer.filterOptions(u))},c}(e)}).call(It)),i_.exports}var s_={exports:{}},a_={exports:{}},c_;function Cl(){return c_||(c_=1,(function(){var t,e,r=function(a,s){for(var c in s)i.call(s,c)&&(a[c]=s[c]);function u(){this.constructor=a}return u.prototype=s.prototype,a.prototype=new u,a.__super__=s.prototype,a},i={}.hasOwnProperty;e=Ir(),t=Se(),a_.exports=function(a){r(s,a);function s(c,u,p,m,g,h){if(s.__super__.constructor.call(this,c),u==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(p==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(u));if(!m)throw new Error("Missing DTD attribute type. "+this.debugInfo(u));if(!g)throw new Error("Missing DTD attribute default. "+this.debugInfo(u));if(g.indexOf("#")!==0&&(g="#"+g),!g.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(u));if(h&&!g.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(u));this.elementName=this.stringify.name(u),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(p),this.attributeType=this.stringify.dtdAttType(m),h&&(this.defaultValue=this.stringify.dtdAttDefault(h)),this.defaultValueType=g}return s.prototype.toString=function(c){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(c))},s}(e)}).call(It)),a_.exports}var u_={exports:{}},l_;function xl(){return l_||(l_=1,(function(){var t,e,r,i=function(s,c){for(var u in c)a.call(c,u)&&(s[u]=c[u]);function p(){this.constructor=s}return p.prototype=c.prototype,s.prototype=new p,s.__super__=c.prototype,s},a={}.hasOwnProperty;r=cn().isObject,e=Ir(),t=Se(),u_.exports=function(s){i(c,s);function c(u,p,m,g){if(c.__super__.constructor.call(this,u),m==null)throw new Error("Missing DTD entity name. "+this.debugInfo(m));if(g==null)throw new Error("Missing DTD entity value. "+this.debugInfo(m));if(this.pe=!!p,this.name=this.stringify.name(m),this.type=t.EntityDeclaration,!r(g))this.value=this.stringify.dtdEntityValue(g),this.internal=!0;else{if(!g.pubID&&!g.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(m));if(g.pubID&&!g.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(m));if(this.internal=!1,g.pubID!=null&&(this.pubID=this.stringify.dtdPubID(g.pubID)),g.sysID!=null&&(this.sysID=this.stringify.dtdSysID(g.sysID)),g.nData!=null&&(this.nData=this.stringify.dtdNData(g.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(m))}}return Object.defineProperty(c.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(c.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(c.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(c.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(c.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(c.prototype,"xmlVersion",{get:function(){return null}}),c.prototype.toString=function(u){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(u))},c}(e)}).call(It)),u_.exports}var p_={exports:{}},f_;function kl(){return f_||(f_=1,(function(){var t,e,r=function(a,s){for(var c in s)i.call(s,c)&&(a[c]=s[c]);function u(){this.constructor=a}return u.prototype=s.prototype,a.prototype=new u,a.__super__=s.prototype,a},i={}.hasOwnProperty;e=Ir(),t=Se(),p_.exports=function(a){r(s,a);function s(c,u,p){if(s.__super__.constructor.call(this,c),u==null)throw new Error("Missing DTD element name. "+this.debugInfo());p||(p="(#PCDATA)"),Array.isArray(p)&&(p="("+p.join(",")+")"),this.name=this.stringify.name(u),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(p)}return s.prototype.toString=function(c){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(c))},s}(e)}).call(It)),p_.exports}var d_={exports:{}},h_;function Nl(){return h_||(h_=1,(function(){var t,e,r=function(a,s){for(var c in s)i.call(s,c)&&(a[c]=s[c]);function u(){this.constructor=a}return u.prototype=s.prototype,a.prototype=new u,a.__super__=s.prototype,a},i={}.hasOwnProperty;e=Ir(),t=Se(),d_.exports=function(a){r(s,a);function s(c,u,p){if(s.__super__.constructor.call(this,c),u==null)throw new Error("Missing DTD notation name. "+this.debugInfo(u));if(!p.pubID&&!p.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(u));this.name=this.stringify.name(u),this.type=t.NotationDeclaration,p.pubID!=null&&(this.pubID=this.stringify.dtdPubID(p.pubID)),p.sysID!=null&&(this.sysID=this.stringify.dtdSysID(p.sysID))}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),s.prototype.toString=function(c){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(c))},s}(e)}).call(It)),d_.exports}var g_;function Rl(){return g_||(g_=1,(function(){var t,e,r,i,a,s,c,u,p=function(g,h){for(var y in h)m.call(h,y)&&(g[y]=h[y]);function E(){this.constructor=g}return E.prototype=h.prototype,g.prototype=new E,g.__super__=h.prototype,g},m={}.hasOwnProperty;u=cn().isObject,c=Ir(),t=Se(),e=Cl(),i=xl(),r=kl(),a=Nl(),s=El(),s_.exports=function(g){p(h,g);function h(y,E,x){var D,U,j,R,w,T;if(h.__super__.constructor.call(this,y),this.type=t.DocType,y.children){for(R=y.children,U=0,j=R.length;U<j;U++)if(D=R[U],D.type===t.Element){this.name=D.name;break}}this.documentObject=y,u(E)&&(w=E,E=w.pubID,x=w.sysID),x==null&&(T=[E,x],x=T[0],E=T[1]),E!=null&&(this.pubID=this.stringify.dtdPubID(E)),x!=null&&(this.sysID=this.stringify.dtdSysID(x))}return Object.defineProperty(h.prototype,"entities",{get:function(){var y,E,x,D,U;for(D={},U=this.children,E=0,x=U.length;E<x;E++)y=U[E],y.type===t.EntityDeclaration&&!y.pe&&(D[y.name]=y);return new s(D)}}),Object.defineProperty(h.prototype,"notations",{get:function(){var y,E,x,D,U;for(D={},U=this.children,E=0,x=U.length;E<x;E++)y=U[E],y.type===t.NotationDeclaration&&(D[y.name]=y);return new s(D)}}),Object.defineProperty(h.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(h.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(h.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),h.prototype.element=function(y,E){var x;return x=new r(this,y,E),this.children.push(x),this},h.prototype.attList=function(y,E,x,D,U){var j;return j=new e(this,y,E,x,D,U),this.children.push(j),this},h.prototype.entity=function(y,E){var x;return x=new i(this,!1,y,E),this.children.push(x),this},h.prototype.pEntity=function(y,E){var x;return x=new i(this,!0,y,E),this.children.push(x),this},h.prototype.notation=function(y,E){var x;return x=new a(this,y,E),this.children.push(x),this},h.prototype.toString=function(y){return this.options.writer.docType(this,this.options.writer.filterOptions(y))},h.prototype.ele=function(y,E){return this.element(y,E)},h.prototype.att=function(y,E,x,D,U){return this.attList(y,E,x,D,U)},h.prototype.ent=function(y,E){return this.entity(y,E)},h.prototype.pent=function(y,E){return this.pEntity(y,E)},h.prototype.not=function(y,E){return this.notation(y,E)},h.prototype.up=function(){return this.root()||this.documentObject},h.prototype.isEqualNode=function(y){return!(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(y)||y.name!==this.name||y.publicId!==this.publicId||y.systemId!==this.systemId)},h}(c)}).call(It)),s_.exports}var m_={exports:{}},__;function Pl(){return __||(__=1,(function(){var t,e,r=function(a,s){for(var c in s)i.call(s,c)&&(a[c]=s[c]);function u(){this.constructor=a}return u.prototype=s.prototype,a.prototype=new u,a.__super__=s.prototype,a},i={}.hasOwnProperty;t=Se(),e=Ir(),m_.exports=function(a){r(s,a);function s(c,u){if(s.__super__.constructor.call(this,c),u==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(u)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(c){return this.options.writer.raw(this,this.options.writer.filterOptions(c))},s}(e)}).call(It)),m_.exports}var y_={exports:{}},v_;function Dl(){return v_||(v_=1,(function(){var t,e,r=function(a,s){for(var c in s)i.call(s,c)&&(a[c]=s[c]);function u(){this.constructor=a}return u.prototype=s.prototype,a.prototype=new u,a.__super__=s.prototype,a},i={}.hasOwnProperty;t=Se(),e=_a(),y_.exports=function(a){r(s,a);function s(c,u){if(s.__super__.constructor.call(this,c),u==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(u)}return Object.defineProperty(s.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"wholeText",{get:function(){var c,u,p;for(p="",u=this.previousSibling;u;)p=u.data+p,u=u.previousSibling;for(p+=this.data,c=this.nextSibling;c;)p=p+c.data,c=c.nextSibling;return p}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(c){return this.options.writer.text(this,this.options.writer.filterOptions(c))},s.prototype.splitText=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceWholeText=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(e)}).call(It)),y_.exports}var b_={exports:{}},w_;function jl(){return w_||(w_=1,(function(){var t,e,r=function(a,s){for(var c in s)i.call(s,c)&&(a[c]=s[c]);function u(){this.constructor=a}return u.prototype=s.prototype,a.prototype=new u,a.__super__=s.prototype,a},i={}.hasOwnProperty;t=Se(),e=_a(),b_.exports=function(a){r(s,a);function s(c,u,p){if(s.__super__.constructor.call(this,c),u==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(u),this.name=this.target,p&&(this.value=this.stringify.insValue(p))}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(c){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(c))},s.prototype.isEqualNode=function(c){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(c)||c.target!==this.target)},s}(e)}).call(It)),b_.exports}var S_={exports:{}},E_;function I_(){return E_||(E_=1,(function(){var t,e,r=function(a,s){for(var c in s)i.call(s,c)&&(a[c]=s[c]);function u(){this.constructor=a}return u.prototype=s.prototype,a.prototype=new u,a.__super__=s.prototype,a},i={}.hasOwnProperty;e=Ir(),t=Se(),S_.exports=function(a){r(s,a);function s(c){s.__super__.constructor.call(this,c),this.type=t.Dummy}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(c){return""},s}(e)}).call(It)),S_.exports}var O_={exports:{}},T_;function z2(){return T_||(T_=1,(function(){O_.exports=function(){function t(e){this.nodes=e}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(e){return this.nodes[e]||null},t}()}).call(It)),O_.exports}var A_={exports:{}},C_;function V2(){return C_||(C_=1,(function(){A_.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(It)),A_.exports}var x_;function Ir(){return x_||(x_=1,(function(){var t,e,r,i,a,s,c,u,p,m,g,h,y,E,x,D,U,j={}.hasOwnProperty;U=cn(),D=U.isObject,x=U.isFunction,E=U.isEmpty,y=U.getValue,u=null,r=null,i=null,a=null,s=null,g=null,h=null,m=null,c=null,e=null,p=null,t=null,zm.exports=function(){function R(w){this.parent=w,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,u||(u=Il(),r=Ol(),i=Tl(),a=Al(),s=Rl(),g=Pl(),h=Dl(),m=jl(),c=I_(),e=Se(),p=z2(),El(),t=V2())}return Object.defineProperty(R.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(R.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(R.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(R.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(R.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new p(this.children)),this.childNodeList}}),Object.defineProperty(R.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(R.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(R.prototype,"previousSibling",{get:function(){var w;return w=this.parent.children.indexOf(this),this.parent.children[w-1]||null}}),Object.defineProperty(R.prototype,"nextSibling",{get:function(){var w;return w=this.parent.children.indexOf(this),this.parent.children[w+1]||null}}),Object.defineProperty(R.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(R.prototype,"textContent",{get:function(){var w,T,P,F,V;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(V="",F=this.children,T=0,P=F.length;T<P;T++)w=F[T],w.textContent&&(V+=w.textContent);return V}else return null},set:function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),R.prototype.setParent=function(w){var T,P,F,V,Y;for(this.parent=w,w&&(this.options=w.options,this.stringify=w.stringify),V=this.children,Y=[],P=0,F=V.length;P<F;P++)T=V[P],Y.push(T.setParent(this));return Y},R.prototype.element=function(w,T,P){var F,V,Y,b,G,et,ct,Ot,Tt,Mt,xt;if(et=null,T===null&&P==null&&(Tt=[{},null],T=Tt[0],P=Tt[1]),T==null&&(T={}),T=y(T),D(T)||(Mt=[T,P],P=Mt[0],T=Mt[1]),w!=null&&(w=y(w)),Array.isArray(w))for(Y=0,ct=w.length;Y<ct;Y++)V=w[Y],et=this.element(V);else if(x(w))et=this.element(w.apply());else if(D(w)){for(G in w)if(j.call(w,G))if(xt=w[G],x(xt)&&(xt=xt.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&G.indexOf(this.stringify.convertAttKey)===0)et=this.attribute(G.substr(this.stringify.convertAttKey.length),xt);else if(!this.options.separateArrayItems&&Array.isArray(xt)&&E(xt))et=this.dummy();else if(D(xt)&&E(xt))et=this.element(G);else if(!this.options.keepNullNodes&&xt==null)et=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(xt))for(b=0,Ot=xt.length;b<Ot;b++)V=xt[b],F={},F[G]=V,et=this.element(F);else D(xt)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&G.indexOf(this.stringify.convertTextKey)===0?et=this.element(xt):(et=this.element(G),et.element(xt)):et=this.element(G,xt)}else!this.options.keepNullNodes&&P===null?et=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&w.indexOf(this.stringify.convertTextKey)===0?et=this.text(P):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&w.indexOf(this.stringify.convertCDataKey)===0?et=this.cdata(P):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&w.indexOf(this.stringify.convertCommentKey)===0?et=this.comment(P):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&w.indexOf(this.stringify.convertRawKey)===0?et=this.raw(P):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&w.indexOf(this.stringify.convertPIKey)===0?et=this.instruction(w.substr(this.stringify.convertPIKey.length),P):et=this.node(w,T,P);if(et==null)throw new Error("Could not create any elements with: "+w+". "+this.debugInfo());return et},R.prototype.insertBefore=function(w,T,P){var F,V,Y,b,G;if(w!=null&&w.type)return Y=w,b=T,Y.setParent(this),b?(V=children.indexOf(b),G=children.splice(V),children.push(Y),Array.prototype.push.apply(children,G)):children.push(Y),Y;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(w));return V=this.parent.children.indexOf(this),G=this.parent.children.splice(V),F=this.parent.element(w,T,P),Array.prototype.push.apply(this.parent.children,G),F},R.prototype.insertAfter=function(w,T,P){var F,V,Y;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(w));return V=this.parent.children.indexOf(this),Y=this.parent.children.splice(V+1),F=this.parent.element(w,T,P),Array.prototype.push.apply(this.parent.children,Y),F},R.prototype.remove=function(){var w;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return w=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[w,w-w+1].concat([])),this.parent},R.prototype.node=function(w,T,P){var F,V;return w!=null&&(w=y(w)),T||(T={}),T=y(T),D(T)||(V=[T,P],P=V[0],T=V[1]),F=new u(this,w,T),P!=null&&F.text(P),this.children.push(F),F},R.prototype.text=function(w){var T;return D(w)&&this.element(w),T=new h(this,w),this.children.push(T),this},R.prototype.cdata=function(w){var T;return T=new r(this,w),this.children.push(T),this},R.prototype.comment=function(w){var T;return T=new i(this,w),this.children.push(T),this},R.prototype.commentBefore=function(w){var T,P;return T=this.parent.children.indexOf(this),P=this.parent.children.splice(T),this.parent.comment(w),Array.prototype.push.apply(this.parent.children,P),this},R.prototype.commentAfter=function(w){var T,P;return T=this.parent.children.indexOf(this),P=this.parent.children.splice(T+1),this.parent.comment(w),Array.prototype.push.apply(this.parent.children,P),this},R.prototype.raw=function(w){var T;return T=new g(this,w),this.children.push(T),this},R.prototype.dummy=function(){var w;return w=new c(this),w},R.prototype.instruction=function(w,T){var P,F,V,Y,b;if(w!=null&&(w=y(w)),T!=null&&(T=y(T)),Array.isArray(w))for(Y=0,b=w.length;Y<b;Y++)P=w[Y],this.instruction(P);else if(D(w))for(P in w)j.call(w,P)&&(F=w[P],this.instruction(P,F));else x(T)&&(T=T.apply()),V=new m(this,w,T),this.children.push(V);return this},R.prototype.instructionBefore=function(w,T){var P,F;return P=this.parent.children.indexOf(this),F=this.parent.children.splice(P),this.parent.instruction(w,T),Array.prototype.push.apply(this.parent.children,F),this},R.prototype.instructionAfter=function(w,T){var P,F;return P=this.parent.children.indexOf(this),F=this.parent.children.splice(P+1),this.parent.instruction(w,T),Array.prototype.push.apply(this.parent.children,F),this},R.prototype.declaration=function(w,T,P){var F,V;return F=this.document(),V=new a(F,w,T,P),F.children.length===0?F.children.unshift(V):F.children[0].type===e.Declaration?F.children[0]=V:F.children.unshift(V),F.root()||F},R.prototype.dtd=function(w,T){var P,F,V,Y,b,G,et,ct,Ot,Tt;for(F=this.document(),V=new s(F,w,T),Ot=F.children,Y=b=0,et=Ot.length;b<et;Y=++b)if(P=Ot[Y],P.type===e.DocType)return F.children[Y]=V,V;for(Tt=F.children,Y=G=0,ct=Tt.length;G<ct;Y=++G)if(P=Tt[Y],P.isRoot)return F.children.splice(Y,0,V),V;return F.children.push(V),V},R.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},R.prototype.root=function(){var w;for(w=this;w;){if(w.type===e.Document)return w.rootObject;if(w.isRoot)return w;w=w.parent}},R.prototype.document=function(){var w;for(w=this;w;){if(w.type===e.Document)return w;w=w.parent}},R.prototype.end=function(w){return this.document().end(w)},R.prototype.prev=function(){var w;if(w=this.parent.children.indexOf(this),w<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[w-1]},R.prototype.next=function(){var w;if(w=this.parent.children.indexOf(this),w===-1||w===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[w+1]},R.prototype.importDocument=function(w){var T;return T=w.root().clone(),T.parent=this,T.isRoot=!1,this.children.push(T),this},R.prototype.debugInfo=function(w){var T,P;return w=w||this.name,w==null&&!((T=this.parent)!=null&&T.name)?"":w==null?"parent: <"+this.parent.name+">":(P=this.parent)!=null&&P.name?"node: <"+w+">, parent: <"+this.parent.name+">":"node: <"+w+">"},R.prototype.ele=function(w,T,P){return this.element(w,T,P)},R.prototype.nod=function(w,T,P){return this.node(w,T,P)},R.prototype.txt=function(w){return this.text(w)},R.prototype.dat=function(w){return this.cdata(w)},R.prototype.com=function(w){return this.comment(w)},R.prototype.ins=function(w,T){return this.instruction(w,T)},R.prototype.doc=function(){return this.document()},R.prototype.dec=function(w,T,P){return this.declaration(w,T,P)},R.prototype.e=function(w,T,P){return this.element(w,T,P)},R.prototype.n=function(w,T,P){return this.node(w,T,P)},R.prototype.t=function(w){return this.text(w)},R.prototype.d=function(w){return this.cdata(w)},R.prototype.c=function(w){return this.comment(w)},R.prototype.r=function(w){return this.raw(w)},R.prototype.i=function(w,T){return this.instruction(w,T)},R.prototype.u=function(){return this.up()},R.prototype.importXMLBuilder=function(w){return this.importDocument(w)},R.prototype.replaceChild=function(w,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.removeChild=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.appendChild=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.hasChildNodes=function(){return this.children.length!==0},R.prototype.cloneNode=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.isSupported=function(w,T){return!0},R.prototype.hasAttributes=function(){return this.attribs.length!==0},R.prototype.compareDocumentPosition=function(w){var T,P;return T=this,T===w?0:this.document()!==w.document()?(P=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?P|=t.Preceding:P|=t.Following,P):T.isAncestor(w)?t.Contains|t.Preceding:T.isDescendant(w)?t.Contains|t.Following:T.isPreceding(w)?t.Preceding:t.Following},R.prototype.isSameNode=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.lookupPrefix=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.isDefaultNamespace=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.lookupNamespaceURI=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.isEqualNode=function(w){var T,P,F;if(w.nodeType!==this.nodeType||w.children.length!==this.children.length)return!1;for(T=P=0,F=this.children.length-1;0<=F?P<=F:P>=F;T=0<=F?++P:--P)if(!this.children[T].isEqualNode(w.children[T]))return!1;return!0},R.prototype.getFeature=function(w,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.setUserData=function(w,T,P){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.getUserData=function(w){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.contains=function(w){return w?w===this||this.isDescendant(w):!1},R.prototype.isDescendant=function(w){var T,P,F,V,Y;for(Y=this.children,F=0,V=Y.length;F<V;F++)if(T=Y[F],w===T||(P=T.isDescendant(w),P))return!0;return!1},R.prototype.isAncestor=function(w){return w.isDescendant(this)},R.prototype.isPreceding=function(w){var T,P;return T=this.treePosition(w),P=this.treePosition(this),T===-1||P===-1?!1:T<P},R.prototype.isFollowing=function(w){var T,P;return T=this.treePosition(w),P=this.treePosition(this),T===-1||P===-1?!1:T>P},R.prototype.treePosition=function(w){var T,P;return P=0,T=!1,this.foreachTreeNode(this.document(),function(F){if(P++,!T&&F===w)return T=!0}),T?P:-1},R.prototype.foreachTreeNode=function(w,T){var P,F,V,Y,b;for(w||(w=this.document()),Y=w.children,F=0,V=Y.length;F<V;F++)if(P=Y[F],(b=T(P))||(b=this.foreachTreeNode(P,T),b))return b},R}()}).call(It)),zm.exports}var k_={exports:{}},N_;function R_(){return N_||(N_=1,(function(){var t=function(r,i){return function(){return r.apply(i,arguments)}},e={}.hasOwnProperty;k_.exports=function(){function r(i){this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this);var a,s,c;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),s=i.stringify||{};for(a in s)e.call(s,a)&&(c=s[a],this[a]=c)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var a,s;if(this.options.noValidation)return i;if(a="",this.options.version==="1.0"){if(a=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(a))throw new Error("Invalid character in string: "+i+" at index "+s.index)}else if(this.options.version==="1.1"&&(a=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(a)))throw new Error("Invalid character in string: "+i+" at index "+s.index);return i},r.prototype.assertLegalName=function(i){var a;if(this.options.noValidation)return i;if(this.assertLegalChar(i),a=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(a))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var a;return this.options.noValidation?i:(a=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(a,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var a;return this.options.noValidation?i:(a=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(a,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(It)),k_.exports}var P_={exports:{}},D_={exports:{}},j_={exports:{}},U_;function ya(){return U_||(U_=1,(function(){j_.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(It)),j_.exports}var L_;function B_(){return L_||(L_=1,(function(){var t,e,r,i={}.hasOwnProperty;r=cn().assign,t=Se(),Al(),Rl(),Ol(),Tl(),Il(),Pl(),Dl(),jl(),I_(),Cl(),kl(),xl(),Nl(),e=ya(),D_.exports=function(){function a(s){var c,u,p;s||(s={}),this.options=s,u=s.writer||{};for(c in u)i.call(u,c)&&(p=u[c],this["_"+c]=this[c],this[c]=p)}return a.prototype.filterOptions=function(s){var c,u,p,m,g,h,y,E;return s||(s={}),s=r({},this.options,s),c={writer:this},c.pretty=s.pretty||!1,c.allowEmpty=s.allowEmpty||!1,c.indent=(u=s.indent)!=null?u:"  ",c.newline=(p=s.newline)!=null?p:`
`,c.offset=(m=s.offset)!=null?m:0,c.dontPrettyTextNodes=(g=(h=s.dontPrettyTextNodes)!=null?h:s.dontprettytextnodes)!=null?g:0,c.spaceBeforeSlash=(y=(E=s.spaceBeforeSlash)!=null?E:s.spacebeforeslash)!=null?y:"",c.spaceBeforeSlash===!0&&(c.spaceBeforeSlash=" "),c.suppressPrettyCount=0,c.user={},c.state=e.None,c},a.prototype.indent=function(s,c,u){var p;return!c.pretty||c.suppressPrettyCount?"":c.pretty&&(p=(u||0)+c.offset+1,p>0)?new Array(p).join(c.indent):""},a.prototype.endline=function(s,c,u){return!c.pretty||c.suppressPrettyCount?"":c.newline},a.prototype.attribute=function(s,c,u){var p;return this.openAttribute(s,c,u),p=" "+s.name+'="'+s.value+'"',this.closeAttribute(s,c,u),p},a.prototype.cdata=function(s,c,u){var p;return this.openNode(s,c,u),c.state=e.OpenTag,p=this.indent(s,c,u)+"<![CDATA[",c.state=e.InsideTag,p+=s.value,c.state=e.CloseTag,p+="]]>"+this.endline(s,c,u),c.state=e.None,this.closeNode(s,c,u),p},a.prototype.comment=function(s,c,u){var p;return this.openNode(s,c,u),c.state=e.OpenTag,p=this.indent(s,c,u)+"<!-- ",c.state=e.InsideTag,p+=s.value,c.state=e.CloseTag,p+=" -->"+this.endline(s,c,u),c.state=e.None,this.closeNode(s,c,u),p},a.prototype.declaration=function(s,c,u){var p;return this.openNode(s,c,u),c.state=e.OpenTag,p=this.indent(s,c,u)+"<?xml",c.state=e.InsideTag,p+=' version="'+s.version+'"',s.encoding!=null&&(p+=' encoding="'+s.encoding+'"'),s.standalone!=null&&(p+=' standalone="'+s.standalone+'"'),c.state=e.CloseTag,p+=c.spaceBeforeSlash+"?>",p+=this.endline(s,c,u),c.state=e.None,this.closeNode(s,c,u),p},a.prototype.docType=function(s,c,u){var p,m,g,h,y;if(u||(u=0),this.openNode(s,c,u),c.state=e.OpenTag,h=this.indent(s,c,u),h+="<!DOCTYPE "+s.root().name,s.pubID&&s.sysID?h+=' PUBLIC "'+s.pubID+'" "'+s.sysID+'"':s.sysID&&(h+=' SYSTEM "'+s.sysID+'"'),s.children.length>0){for(h+=" [",h+=this.endline(s,c,u),c.state=e.InsideTag,y=s.children,m=0,g=y.length;m<g;m++)p=y[m],h+=this.writeChildNode(p,c,u+1);c.state=e.CloseTag,h+="]"}return c.state=e.CloseTag,h+=c.spaceBeforeSlash+">",h+=this.endline(s,c,u),c.state=e.None,this.closeNode(s,c,u),h},a.prototype.element=function(s,c,u){var p,m,g,h,y,E,x,D,U,j,R,w,T,P;u||(u=0),j=!1,R="",this.openNode(s,c,u),c.state=e.OpenTag,R+=this.indent(s,c,u)+"<"+s.name,w=s.attribs;for(U in w)i.call(w,U)&&(p=w[U],R+=this.attribute(p,c,u));if(g=s.children.length,h=g===0?null:s.children[0],g===0||s.children.every(function(F){return(F.type===t.Text||F.type===t.Raw)&&F.value===""}))c.allowEmpty?(R+=">",c.state=e.CloseTag,R+="</"+s.name+">"+this.endline(s,c,u)):(c.state=e.CloseTag,R+=c.spaceBeforeSlash+"/>"+this.endline(s,c,u));else if(c.pretty&&g===1&&(h.type===t.Text||h.type===t.Raw)&&h.value!=null)R+=">",c.state=e.InsideTag,c.suppressPrettyCount++,j=!0,R+=this.writeChildNode(h,c,u+1),c.suppressPrettyCount--,j=!1,c.state=e.CloseTag,R+="</"+s.name+">"+this.endline(s,c,u);else{if(c.dontPrettyTextNodes){for(T=s.children,y=0,x=T.length;y<x;y++)if(m=T[y],(m.type===t.Text||m.type===t.Raw)&&m.value!=null){c.suppressPrettyCount++,j=!0;break}}for(R+=">"+this.endline(s,c,u),c.state=e.InsideTag,P=s.children,E=0,D=P.length;E<D;E++)m=P[E],R+=this.writeChildNode(m,c,u+1);c.state=e.CloseTag,R+=this.indent(s,c,u)+"</"+s.name+">",j&&c.suppressPrettyCount--,R+=this.endline(s,c,u),c.state=e.None}return this.closeNode(s,c,u),R},a.prototype.writeChildNode=function(s,c,u){switch(s.type){case t.CData:return this.cdata(s,c,u);case t.Comment:return this.comment(s,c,u);case t.Element:return this.element(s,c,u);case t.Raw:return this.raw(s,c,u);case t.Text:return this.text(s,c,u);case t.ProcessingInstruction:return this.processingInstruction(s,c,u);case t.Dummy:return"";case t.Declaration:return this.declaration(s,c,u);case t.DocType:return this.docType(s,c,u);case t.AttributeDeclaration:return this.dtdAttList(s,c,u);case t.ElementDeclaration:return this.dtdElement(s,c,u);case t.EntityDeclaration:return this.dtdEntity(s,c,u);case t.NotationDeclaration:return this.dtdNotation(s,c,u);default:throw new Error("Unknown XML node type: "+s.constructor.name)}},a.prototype.processingInstruction=function(s,c,u){var p;return this.openNode(s,c,u),c.state=e.OpenTag,p=this.indent(s,c,u)+"<?",c.state=e.InsideTag,p+=s.target,s.value&&(p+=" "+s.value),c.state=e.CloseTag,p+=c.spaceBeforeSlash+"?>",p+=this.endline(s,c,u),c.state=e.None,this.closeNode(s,c,u),p},a.prototype.raw=function(s,c,u){var p;return this.openNode(s,c,u),c.state=e.OpenTag,p=this.indent(s,c,u),c.state=e.InsideTag,p+=s.value,c.state=e.CloseTag,p+=this.endline(s,c,u),c.state=e.None,this.closeNode(s,c,u),p},a.prototype.text=function(s,c,u){var p;return this.openNode(s,c,u),c.state=e.OpenTag,p=this.indent(s,c,u),c.state=e.InsideTag,p+=s.value,c.state=e.CloseTag,p+=this.endline(s,c,u),c.state=e.None,this.closeNode(s,c,u),p},a.prototype.dtdAttList=function(s,c,u){var p;return this.openNode(s,c,u),c.state=e.OpenTag,p=this.indent(s,c,u)+"<!ATTLIST",c.state=e.InsideTag,p+=" "+s.elementName+" "+s.attributeName+" "+s.attributeType,s.defaultValueType!=="#DEFAULT"&&(p+=" "+s.defaultValueType),s.defaultValue&&(p+=' "'+s.defaultValue+'"'),c.state=e.CloseTag,p+=c.spaceBeforeSlash+">"+this.endline(s,c,u),c.state=e.None,this.closeNode(s,c,u),p},a.prototype.dtdElement=function(s,c,u){var p;return this.openNode(s,c,u),c.state=e.OpenTag,p=this.indent(s,c,u)+"<!ELEMENT",c.state=e.InsideTag,p+=" "+s.name+" "+s.value,c.state=e.CloseTag,p+=c.spaceBeforeSlash+">"+this.endline(s,c,u),c.state=e.None,this.closeNode(s,c,u),p},a.prototype.dtdEntity=function(s,c,u){var p;return this.openNode(s,c,u),c.state=e.OpenTag,p=this.indent(s,c,u)+"<!ENTITY",c.state=e.InsideTag,s.pe&&(p+=" %"),p+=" "+s.name,s.value?p+=' "'+s.value+'"':(s.pubID&&s.sysID?p+=' PUBLIC "'+s.pubID+'" "'+s.sysID+'"':s.sysID&&(p+=' SYSTEM "'+s.sysID+'"'),s.nData&&(p+=" NDATA "+s.nData)),c.state=e.CloseTag,p+=c.spaceBeforeSlash+">"+this.endline(s,c,u),c.state=e.None,this.closeNode(s,c,u),p},a.prototype.dtdNotation=function(s,c,u){var p;return this.openNode(s,c,u),c.state=e.OpenTag,p=this.indent(s,c,u)+"<!NOTATION",c.state=e.InsideTag,p+=" "+s.name,s.pubID&&s.sysID?p+=' PUBLIC "'+s.pubID+'" "'+s.sysID+'"':s.pubID?p+=' PUBLIC "'+s.pubID+'"':s.sysID&&(p+=' SYSTEM "'+s.sysID+'"'),c.state=e.CloseTag,p+=c.spaceBeforeSlash+">"+this.endline(s,c,u),c.state=e.None,this.closeNode(s,c,u),p},a.prototype.openNode=function(s,c,u){},a.prototype.closeNode=function(s,c,u){},a.prototype.openAttribute=function(s,c,u){},a.prototype.closeAttribute=function(s,c,u){},a}()}).call(It)),D_.exports}var M_;function Ul(){return M_||(M_=1,(function(){var t,e=function(i,a){for(var s in a)r.call(a,s)&&(i[s]=a[s]);function c(){this.constructor=i}return c.prototype=a.prototype,i.prototype=new c,i.__super__=a.prototype,i},r={}.hasOwnProperty;t=B_(),P_.exports=function(i){e(a,i);function a(s){a.__super__.constructor.call(this,s)}return a.prototype.document=function(s,c){var u,p,m,g,h;for(c=this.filterOptions(c),g="",h=s.children,p=0,m=h.length;p<m;p++)u=h[p],g+=this.writeChildNode(u,c,0);return c.pretty&&g.slice(-c.newline.length)===c.newline&&(g=g.slice(0,-c.newline.length)),g},a}(t)}).call(It)),P_.exports}var F_;function q_(){return F_||(F_=1,(function(){var t,e,r,i,a,s,c,u=function(m,g){for(var h in g)p.call(g,h)&&(m[h]=g[h]);function y(){this.constructor=m}return y.prototype=g.prototype,m.prototype=new y,m.__super__=g.prototype,m},p={}.hasOwnProperty;c=cn().isPlainObject,r=Dm(),e=q2(),i=Ir(),t=Se(),s=R_(),a=Ul(),jm.exports=function(m){u(g,m);function g(h){g.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new e,h||(h={}),h.writer||(h.writer=new a),this.options=h,this.stringify=new s(h)}return Object.defineProperty(g.prototype,"implementation",{value:new r}),Object.defineProperty(g.prototype,"doctype",{get:function(){var h,y,E,x;for(x=this.children,y=0,E=x.length;y<E;y++)if(h=x[y],h.type===t.DocType)return h;return null}}),Object.defineProperty(g.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(g.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(g.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(g.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(g.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(g.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(g.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(g.prototype,"origin",{get:function(){return null}}),Object.defineProperty(g.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(g.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(g.prototype,"contentType",{get:function(){return null}}),g.prototype.end=function(h){var y;return y={},h?c(h)&&(y=h,h=this.options.writer):h=this.options.writer,h.document(this,h.filterOptions(y))},g.prototype.toString=function(h){return this.options.writer.document(this,this.options.writer.filterOptions(h))},g.prototype.createElement=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createTextNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createComment=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createCDATASection=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createProcessingInstruction=function(h,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createAttribute=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createEntityReference=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.importNode=function(h,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createElementNS=function(h,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createAttributeNS=function(h,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(h,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementById=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.adoptNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.renameNode=function(h,y,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByClassName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createEvent=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createNodeIterator=function(h,y,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createTreeWalker=function(h,y,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},g}(i)}).call(It)),jm.exports}var z_={exports:{}},V_;function $2(){return V_||(V_=1,(function(){var t,e,r,i,a,s,c,u,p,m,g,h,y,E,x,D,U,j,R,w,T,P,F,V={}.hasOwnProperty;F=cn(),T=F.isObject,w=F.isFunction,P=F.isPlainObject,R=F.getValue,t=Se(),h=q_(),y=Il(),i=Ol(),a=Tl(),x=Pl(),j=Dl(),E=jl(),m=Al(),g=Rl(),s=Cl(),u=xl(),c=kl(),p=Nl(),r=Gm(),U=R_(),D=Ul(),e=ya(),z_.exports=function(){function Y(b,G,et){var ct;this.name="?xml",this.type=t.Document,b||(b={}),ct={},b.writer?P(b.writer)&&(ct=b.writer,b.writer=new D):b.writer=new D,this.options=b,this.writer=b.writer,this.writerOptions=this.writer.filterOptions(ct),this.stringify=new U(b),this.onDataCallback=G||function(){},this.onEndCallback=et||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return Y.prototype.createChildNode=function(b){var G,et,ct,Ot,Tt,Mt,xt,yt;switch(b.type){case t.CData:this.cdata(b.value);break;case t.Comment:this.comment(b.value);break;case t.Element:ct={},xt=b.attribs;for(et in xt)V.call(xt,et)&&(G=xt[et],ct[et]=G.value);this.node(b.name,ct);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(b.value);break;case t.Text:this.text(b.value);break;case t.ProcessingInstruction:this.instruction(b.target,b.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+b.constructor.name)}for(yt=b.children,Tt=0,Mt=yt.length;Tt<Mt;Tt++)Ot=yt[Tt],this.createChildNode(Ot),Ot.type===t.Element&&this.up();return this},Y.prototype.dummy=function(){return this},Y.prototype.node=function(b,G,et){var ct;if(b==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(b));return this.openCurrent(),b=R(b),G==null&&(G={}),G=R(G),T(G)||(ct=[G,et],et=ct[0],G=ct[1]),this.currentNode=new y(this,b,G),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,et!=null&&this.text(et),this},Y.prototype.element=function(b,G,et){var ct,Ot,Tt,Mt,xt,yt;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(b)||T(b)||w(b))for(Mt=this.options.noValidation,this.options.noValidation=!0,yt=new h(this.options).element("TEMP_ROOT"),yt.element(b),this.options.noValidation=Mt,xt=yt.children,Ot=0,Tt=xt.length;Ot<Tt;Ot++)ct=xt[Ot],this.createChildNode(ct),ct.type===t.Element&&this.up();else this.node(b,G,et);return this},Y.prototype.attribute=function(b,G){var et,ct;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(b));if(b!=null&&(b=R(b)),T(b))for(et in b)V.call(b,et)&&(ct=b[et],this.attribute(et,ct));else w(G)&&(G=G.apply()),this.options.keepNullAttributes&&G==null?this.currentNode.attribs[b]=new r(this,b,""):G!=null&&(this.currentNode.attribs[b]=new r(this,b,G));return this},Y.prototype.text=function(b){var G;return this.openCurrent(),G=new j(this,b),this.onData(this.writer.text(G,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Y.prototype.cdata=function(b){var G;return this.openCurrent(),G=new i(this,b),this.onData(this.writer.cdata(G,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Y.prototype.comment=function(b){var G;return this.openCurrent(),G=new a(this,b),this.onData(this.writer.comment(G,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Y.prototype.raw=function(b){var G;return this.openCurrent(),G=new x(this,b),this.onData(this.writer.raw(G,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Y.prototype.instruction=function(b,G){var et,ct,Ot,Tt,Mt;if(this.openCurrent(),b!=null&&(b=R(b)),G!=null&&(G=R(G)),Array.isArray(b))for(et=0,Tt=b.length;et<Tt;et++)ct=b[et],this.instruction(ct);else if(T(b))for(ct in b)V.call(b,ct)&&(Ot=b[ct],this.instruction(ct,Ot));else w(G)&&(G=G.apply()),Mt=new E(this,b,G),this.onData(this.writer.processingInstruction(Mt,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},Y.prototype.declaration=function(b,G,et){var ct;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return ct=new m(this,b,G,et),this.onData(this.writer.declaration(ct,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Y.prototype.doctype=function(b,G,et){if(this.openCurrent(),b==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new g(this,G,et),this.currentNode.rootNodeName=b,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},Y.prototype.dtdElement=function(b,G){var et;return this.openCurrent(),et=new c(this,b,G),this.onData(this.writer.dtdElement(et,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Y.prototype.attList=function(b,G,et,ct,Ot){var Tt;return this.openCurrent(),Tt=new s(this,b,G,et,ct,Ot),this.onData(this.writer.dtdAttList(Tt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Y.prototype.entity=function(b,G){var et;return this.openCurrent(),et=new u(this,!1,b,G),this.onData(this.writer.dtdEntity(et,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Y.prototype.pEntity=function(b,G){var et;return this.openCurrent(),et=new u(this,!0,b,G),this.onData(this.writer.dtdEntity(et,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Y.prototype.notation=function(b,G){var et;return this.openCurrent(),et=new p(this,b,G),this.onData(this.writer.dtdNotation(et,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Y.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},Y.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},Y.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},Y.prototype.openNode=function(b){var G,et,ct,Ot;if(!b.isOpen){if(!this.root&&this.currentLevel===0&&b.type===t.Element&&(this.root=b),et="",b.type===t.Element){this.writerOptions.state=e.OpenTag,et=this.writer.indent(b,this.writerOptions,this.currentLevel)+"<"+b.name,Ot=b.attribs;for(ct in Ot)V.call(Ot,ct)&&(G=Ot[ct],et+=this.writer.attribute(G,this.writerOptions,this.currentLevel));et+=(b.children?">":"/>")+this.writer.endline(b,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,et=this.writer.indent(b,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+b.rootNodeName,b.pubID&&b.sysID?et+=' PUBLIC "'+b.pubID+'" "'+b.sysID+'"':b.sysID&&(et+=' SYSTEM "'+b.sysID+'"'),b.children?(et+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,et+=">"),et+=this.writer.endline(b,this.writerOptions,this.currentLevel);return this.onData(et,this.currentLevel),b.isOpen=!0}},Y.prototype.closeNode=function(b){var G;if(!b.isClosed)return G="",this.writerOptions.state=e.CloseTag,b.type===t.Element?G=this.writer.indent(b,this.writerOptions,this.currentLevel)+"</"+b.name+">"+this.writer.endline(b,this.writerOptions,this.currentLevel):G=this.writer.indent(b,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(b,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(G,this.currentLevel),b.isClosed=!0},Y.prototype.onData=function(b,G){return this.documentStarted=!0,this.onDataCallback(b,G+1)},Y.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},Y.prototype.debugInfo=function(b){return b==null?"":"node: <"+b+">"},Y.prototype.ele=function(){return this.element.apply(this,arguments)},Y.prototype.nod=function(b,G,et){return this.node(b,G,et)},Y.prototype.txt=function(b){return this.text(b)},Y.prototype.dat=function(b){return this.cdata(b)},Y.prototype.com=function(b){return this.comment(b)},Y.prototype.ins=function(b,G){return this.instruction(b,G)},Y.prototype.dec=function(b,G,et){return this.declaration(b,G,et)},Y.prototype.dtd=function(b,G,et){return this.doctype(b,G,et)},Y.prototype.e=function(b,G,et){return this.element(b,G,et)},Y.prototype.n=function(b,G,et){return this.node(b,G,et)},Y.prototype.t=function(b){return this.text(b)},Y.prototype.d=function(b){return this.cdata(b)},Y.prototype.c=function(b){return this.comment(b)},Y.prototype.r=function(b){return this.raw(b)},Y.prototype.i=function(b,G){return this.instruction(b,G)},Y.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},Y.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},Y.prototype.ent=function(b,G){return this.entity(b,G)},Y.prototype.pent=function(b,G){return this.pEntity(b,G)},Y.prototype.not=function(b,G){return this.notation(b,G)},Y}()}).call(It)),z_.exports}var $_={exports:{}},W_;function W2(){return W_||(W_=1,(function(){var t,e,r,i=function(s,c){for(var u in c)a.call(c,u)&&(s[u]=c[u]);function p(){this.constructor=s}return p.prototype=c.prototype,s.prototype=new p,s.__super__=c.prototype,s},a={}.hasOwnProperty;t=Se(),r=B_(),e=ya(),$_.exports=function(s){i(c,s);function c(u,p){this.stream=u,c.__super__.constructor.call(this,p)}return c.prototype.endline=function(u,p,m){return u.isLastRootNode&&p.state===e.CloseTag?"":c.__super__.endline.call(this,u,p,m)},c.prototype.document=function(u,p){var m,g,h,y,E,x,D,U,j;for(D=u.children,g=h=0,E=D.length;h<E;g=++h)m=D[g],m.isLastRootNode=g===u.children.length-1;for(p=this.filterOptions(p),U=u.children,j=[],y=0,x=U.length;y<x;y++)m=U[y],j.push(this.writeChildNode(m,p,0));return j},c.prototype.attribute=function(u,p,m){return this.stream.write(c.__super__.attribute.call(this,u,p,m))},c.prototype.cdata=function(u,p,m){return this.stream.write(c.__super__.cdata.call(this,u,p,m))},c.prototype.comment=function(u,p,m){return this.stream.write(c.__super__.comment.call(this,u,p,m))},c.prototype.declaration=function(u,p,m){return this.stream.write(c.__super__.declaration.call(this,u,p,m))},c.prototype.docType=function(u,p,m){var g,h,y,E;if(m||(m=0),this.openNode(u,p,m),p.state=e.OpenTag,this.stream.write(this.indent(u,p,m)),this.stream.write("<!DOCTYPE "+u.root().name),u.pubID&&u.sysID?this.stream.write(' PUBLIC "'+u.pubID+'" "'+u.sysID+'"'):u.sysID&&this.stream.write(' SYSTEM "'+u.sysID+'"'),u.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(u,p,m)),p.state=e.InsideTag,E=u.children,h=0,y=E.length;h<y;h++)g=E[h],this.writeChildNode(g,p,m+1);p.state=e.CloseTag,this.stream.write("]")}return p.state=e.CloseTag,this.stream.write(p.spaceBeforeSlash+">"),this.stream.write(this.endline(u,p,m)),p.state=e.None,this.closeNode(u,p,m)},c.prototype.element=function(u,p,m){var g,h,y,E,x,D,U,j,R;m||(m=0),this.openNode(u,p,m),p.state=e.OpenTag,this.stream.write(this.indent(u,p,m)+"<"+u.name),j=u.attribs;for(U in j)a.call(j,U)&&(g=j[U],this.attribute(g,p,m));if(y=u.children.length,E=y===0?null:u.children[0],y===0||u.children.every(function(w){return(w.type===t.Text||w.type===t.Raw)&&w.value===""}))p.allowEmpty?(this.stream.write(">"),p.state=e.CloseTag,this.stream.write("</"+u.name+">")):(p.state=e.CloseTag,this.stream.write(p.spaceBeforeSlash+"/>"));else if(p.pretty&&y===1&&(E.type===t.Text||E.type===t.Raw)&&E.value!=null)this.stream.write(">"),p.state=e.InsideTag,p.suppressPrettyCount++,this.writeChildNode(E,p,m+1),p.suppressPrettyCount--,p.state=e.CloseTag,this.stream.write("</"+u.name+">");else{for(this.stream.write(">"+this.endline(u,p,m)),p.state=e.InsideTag,R=u.children,x=0,D=R.length;x<D;x++)h=R[x],this.writeChildNode(h,p,m+1);p.state=e.CloseTag,this.stream.write(this.indent(u,p,m)+"</"+u.name+">")}return this.stream.write(this.endline(u,p,m)),p.state=e.None,this.closeNode(u,p,m)},c.prototype.processingInstruction=function(u,p,m){return this.stream.write(c.__super__.processingInstruction.call(this,u,p,m))},c.prototype.raw=function(u,p,m){return this.stream.write(c.__super__.raw.call(this,u,p,m))},c.prototype.text=function(u,p,m){return this.stream.write(c.__super__.text.call(this,u,p,m))},c.prototype.dtdAttList=function(u,p,m){return this.stream.write(c.__super__.dtdAttList.call(this,u,p,m))},c.prototype.dtdElement=function(u,p,m){return this.stream.write(c.__super__.dtdElement.call(this,u,p,m))},c.prototype.dtdEntity=function(u,p,m){return this.stream.write(c.__super__.dtdEntity.call(this,u,p,m))},c.prototype.dtdNotation=function(u,p,m){return this.stream.write(c.__super__.dtdNotation.call(this,u,p,m))},c}(r)}).call(It)),$_.exports}var Y_;function Y2(){return Y_||(Y_=1,(function(){var t,e,r,i,a,s,c,u,p,m;m=cn(),u=m.assign,p=m.isFunction,r=Dm(),i=q_(),a=$2(),c=Ul(),s=W2(),t=Se(),e=ya(),Nn.create=function(g,h,y,E){var x,D;if(g==null)throw new Error("Root element needs a name.");return E=u({},h,y,E),x=new i(E),D=x.element(g),E.headless||(x.declaration(E),(E.pubID!=null||E.sysID!=null)&&x.dtd(E)),D},Nn.begin=function(g,h,y){var E;return p(g)&&(E=[g,h],h=E[0],y=E[1],g={}),h?new a(g,h,y):new i(g)},Nn.stringWriter=function(g){return new c(g)},Nn.streamWriter=function(g,h){return new s(g,h)},Nn.implementation=new r,Nn.nodeType=t,Nn.writerState=e}).call(It)),Nn}var H_;function H2(){return H_||(H_=1,(function(){var t,e,r,i,a,s={}.hasOwnProperty;t=Y2(),e=Sl().defaults,i=function(c){return typeof c=="string"&&(c.indexOf("&")>=0||c.indexOf(">")>=0||c.indexOf("<")>=0)},a=function(c){return"<![CDATA["+r(c)+"]]>"},r=function(c){return c.replace("]]>","]]]]><![CDATA[>")},km.Builder=function(){function c(u){var p,m,g;this.options={},m=e["0.2"];for(p in m)s.call(m,p)&&(g=m[p],this.options[p]=g);for(p in u)s.call(u,p)&&(g=u[p],this.options[p]=g)}return c.prototype.buildObject=function(u){var p,m,g,h,y;return p=this.options.attrkey,m=this.options.charkey,Object.keys(u).length===1&&this.options.rootName===e["0.2"].rootName?(y=Object.keys(u)[0],u=u[y]):y=this.options.rootName,g=function(E){return function(x,D){var U,j,R,w,T,P;if(typeof D!="object")E.options.cdata&&i(D)?x.raw(a(D)):x.txt(D);else if(Array.isArray(D)){for(w in D)if(s.call(D,w)){j=D[w];for(T in j)R=j[T],x=g(x.ele(T),R).up()}}else for(T in D)if(s.call(D,T))if(j=D[T],T===p){if(typeof j=="object")for(U in j)P=j[U],x=x.att(U,P)}else if(T===m)E.options.cdata&&i(j)?x=x.raw(a(j)):x=x.txt(j);else if(Array.isArray(j))for(w in j)s.call(j,w)&&(R=j[w],typeof R=="string"?E.options.cdata&&i(R)?x=x.ele(T).raw(a(R)).up():x=x.ele(T,R).up():x=g(x.ele(T),R).up());else typeof j=="object"?x=g(x.ele(T),j).up():typeof j=="string"&&E.options.cdata&&i(j)?x=x.ele(T).raw(a(j)).up():(j==null&&(j=""),x=x.ele(T,j.toString()).up());return x}}(this),h=t.create(y,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),g(h,u).end(this.options.renderOpts)},c}()}).call(It)),km}var G_={},Q_={};const G2={},Q2=Object.freeze(Object.defineProperty({__proto__:null,default:G2},Symbol.toStringTag,{value:"Module"})),Ll=Ad(Q2);var Bl={},Ml={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var K_;function K2(){return K_||(K_=1,function(t,e){var r=yo,i=r.Buffer;function a(c,u){for(var p in c)u[p]=c[p]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=s);function s(c,u,p){return i(c,u,p)}s.prototype=Object.create(i.prototype),a(i,s),s.from=function(c,u,p){if(typeof c=="number")throw new TypeError("Argument must not be a number");return i(c,u,p)},s.alloc=function(c,u,p){if(typeof c!="number")throw new TypeError("Argument must be a number");var m=i(c);return u!==void 0?typeof p=="string"?m.fill(u,p):m.fill(u):m.fill(0),m},s.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return i(c)},s.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(c)}}(Ml,Ml.exports)),Ml.exports}var Z_;function Z2(){if(Z_)return Bl;Z_=1;var t=K2().Buffer,e=t.isEncoding||function(j){switch(j=""+j,j&&j.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(j){if(!j)return"utf8";for(var R;;)switch(j){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return j;default:if(R)return;j=(""+j).toLowerCase(),R=!0}}function i(j){var R=r(j);if(typeof R!="string"&&(t.isEncoding===e||!e(j)))throw new Error("Unknown encoding: "+j);return R||j}Bl.StringDecoder=a;function a(j){this.encoding=i(j);var R;switch(this.encoding){case"utf16le":this.text=h,this.end=y,R=4;break;case"utf8":this.fillLast=p,R=4;break;case"base64":this.text=E,this.end=x,R=3;break;default:this.write=D,this.end=U;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(R)}a.prototype.write=function(j){if(j.length===0)return"";var R,w;if(this.lastNeed){if(R=this.fillLast(j),R===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<j.length?R?R+this.text(j,w):this.text(j,w):R||""},a.prototype.end=g,a.prototype.text=m,a.prototype.fillLast=function(j){if(this.lastNeed<=j.length)return j.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);j.copy(this.lastChar,this.lastTotal-this.lastNeed,0,j.length),this.lastNeed-=j.length};function s(j){return j<=127?0:j>>5===6?2:j>>4===14?3:j>>3===30?4:j>>6===2?-1:-2}function c(j,R,w){var T=R.length-1;if(T<w)return 0;var P=s(R[T]);return P>=0?(P>0&&(j.lastNeed=P-1),P):--T<w||P===-2?0:(P=s(R[T]),P>=0?(P>0&&(j.lastNeed=P-2),P):--T<w||P===-2?0:(P=s(R[T]),P>=0?(P>0&&(P===2?P=0:j.lastNeed=P-3),P):0))}function u(j,R,w){if((R[0]&192)!==128)return j.lastNeed=0,"\uFFFD";if(j.lastNeed>1&&R.length>1){if((R[1]&192)!==128)return j.lastNeed=1,"\uFFFD";if(j.lastNeed>2&&R.length>2&&(R[2]&192)!==128)return j.lastNeed=2,"\uFFFD"}}function p(j){var R=this.lastTotal-this.lastNeed,w=u(this,j);if(w!==void 0)return w;if(this.lastNeed<=j.length)return j.copy(this.lastChar,R,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);j.copy(this.lastChar,R,0,j.length),this.lastNeed-=j.length}function m(j,R){var w=c(this,j,R);if(!this.lastNeed)return j.toString("utf8",R);this.lastTotal=w;var T=j.length-(w-this.lastNeed);return j.copy(this.lastChar,0,T),j.toString("utf8",R,T)}function g(j){var R=j&&j.length?this.write(j):"";return this.lastNeed?R+"\uFFFD":R}function h(j,R){if((j.length-R)%2===0){var w=j.toString("utf16le",R);if(w){var T=w.charCodeAt(w.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=j[j.length-2],this.lastChar[1]=j[j.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=j[j.length-1],j.toString("utf16le",R,j.length-1)}function y(j){var R=j&&j.length?this.write(j):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return R+this.lastChar.toString("utf16le",0,w)}return R}function E(j,R){var w=(j.length-R)%3;return w===0?j.toString("base64",R):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=j[j.length-1]:(this.lastChar[0]=j[j.length-2],this.lastChar[1]=j[j.length-1]),j.toString("base64",R,j.length-w))}function x(j){var R=j&&j.length?this.write(j):"";return this.lastNeed?R+this.lastChar.toString("base64",0,3-this.lastNeed):R}function D(j){return j.toString(this.encoding)}function U(j){return j&&j.length?this.write(j):""}return Bl}var J_;function J2(){return J_||(J_=1,function(t){(function(e){e.parser=function(k,I){return new i(k,I)},e.SAXParser=i,e.SAXStream=g,e.createStream=m,e.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function i(k,I){if(!(this instanceof i))return new i(k,I);var J=this;s(J),J.q=J.c="",J.bufferCheckPosition=e.MAX_BUFFER_LENGTH,J.opt=I||{},J.opt.lowercase=J.opt.lowercase||J.opt.lowercasetags,J.looseCase=J.opt.lowercase?"toLowerCase":"toUpperCase",J.tags=[],J.closed=J.closedRoot=J.sawRoot=!1,J.tag=J.error=null,J.strict=!!k,J.noscript=!!(k||J.opt.noscript),J.state=b.BEGIN,J.strictEntities=J.opt.strictEntities,J.ENTITIES=J.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),J.attribList=[],J.opt.xmlns&&(J.ns=Object.create(D)),J.opt.unquotedAttributeValues===void 0&&(J.opt.unquotedAttributeValues=!k),J.trackPosition=J.opt.position!==!1,J.trackPosition&&(J.position=J.line=J.column=0),et(J,"onready")}Object.create||(Object.create=function(k){function I(){}I.prototype=k;var J=new I;return J}),Object.keys||(Object.keys=function(k){var I=[];for(var J in k)k.hasOwnProperty(J)&&I.push(J);return I});function a(k){for(var I=Math.max(e.MAX_BUFFER_LENGTH,10),J=0,z=0,wt=r.length;z<wt;z++){var kt=k[r[z]].length;if(kt>I)switch(r[z]){case"textNode":Ot(k);break;case"cdata":ct(k,"oncdata",k.cdata),k.cdata="";break;case"script":ct(k,"onscript",k.script),k.script="";break;default:Mt(k,"Max buffer length exceeded: "+r[z])}J=Math.max(J,kt)}var Pt=e.MAX_BUFFER_LENGTH-J;k.bufferCheckPosition=Pt+k.position}function s(k){for(var I=0,J=r.length;I<J;I++)k[r[I]]=""}function c(k){Ot(k),k.cdata!==""&&(ct(k,"oncdata",k.cdata),k.cdata=""),k.script!==""&&(ct(k,"onscript",k.script),k.script="")}i.prototype={end:function(){xt(this)},write:ht,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){c(this)}};var u;try{u=Ll.Stream}catch{u=function(){}}u||(u=function(){});var p=e.EVENTS.filter(function(k){return k!=="error"&&k!=="end"});function m(k,I){return new g(k,I)}function g(k,I){if(!(this instanceof g))return new g(k,I);u.apply(this),this._parser=new i(k,I),this.writable=!0,this.readable=!0;var J=this;this._parser.onend=function(){J.emit("end")},this._parser.onerror=function(z){J.emit("error",z),J._parser.error=null},this._decoder=null,p.forEach(function(z){Object.defineProperty(J,"on"+z,{get:function(){return J._parser["on"+z]},set:function(wt){if(!wt)return J.removeAllListeners(z),J._parser["on"+z]=wt,wt;J.on(z,wt)},enumerable:!0,configurable:!1})})}g.prototype=Object.create(u.prototype,{constructor:{value:g}}),g.prototype.write=function(k){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(k)){if(!this._decoder){var I=Z2().StringDecoder;this._decoder=new I("utf8")}k=this._decoder.write(k)}return this._parser.write(k.toString()),this.emit("data",k),!0},g.prototype.end=function(k){return k&&k.length&&this.write(k),this._parser.end(),!0},g.prototype.on=function(k,I){var J=this;return!J._parser["on"+k]&&p.indexOf(k)!==-1&&(J._parser["on"+k]=function(){var z=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);z.splice(0,0,k),J.emit.apply(J,z)}),u.prototype.on.call(J,k,I)};var h="[CDATA[",y="DOCTYPE",E="http://www.w3.org/XML/1998/namespace",x="http://www.w3.org/2000/xmlns/",D={xml:E,xmlns:x},U=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,j=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,R=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function T(k){return k===" "||k===`
`||k==="\r"||k==="	"}function P(k){return k==='"'||k==="'"}function F(k){return k===">"||T(k)}function V(k,I){return k.test(I)}function Y(k,I){return!V(k,I)}var b=0;e.STATE={BEGIN:b++,BEGIN_WHITESPACE:b++,TEXT:b++,TEXT_ENTITY:b++,OPEN_WAKA:b++,SGML_DECL:b++,SGML_DECL_QUOTED:b++,DOCTYPE:b++,DOCTYPE_QUOTED:b++,DOCTYPE_DTD:b++,DOCTYPE_DTD_QUOTED:b++,COMMENT_STARTING:b++,COMMENT:b++,COMMENT_ENDING:b++,COMMENT_ENDED:b++,CDATA:b++,CDATA_ENDING:b++,CDATA_ENDING_2:b++,PROC_INST:b++,PROC_INST_BODY:b++,PROC_INST_ENDING:b++,OPEN_TAG:b++,OPEN_TAG_SLASH:b++,ATTRIB:b++,ATTRIB_NAME:b++,ATTRIB_NAME_SAW_WHITE:b++,ATTRIB_VALUE:b++,ATTRIB_VALUE_QUOTED:b++,ATTRIB_VALUE_CLOSED:b++,ATTRIB_VALUE_UNQUOTED:b++,ATTRIB_VALUE_ENTITY_Q:b++,ATTRIB_VALUE_ENTITY_U:b++,CLOSE_TAG:b++,CLOSE_TAG_SAW_WHITE:b++,SCRIPT:b++,SCRIPT_ENDING:b++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(k){var I=e.ENTITIES[k],J=typeof I=="number"?String.fromCharCode(I):I;e.ENTITIES[k]=J});for(var G in e.STATE)e.STATE[e.STATE[G]]=G;b=e.STATE;function et(k,I,J){k[I]&&k[I](J)}function ct(k,I,J){k.textNode&&Ot(k),et(k,I,J)}function Ot(k){k.textNode=Tt(k.opt,k.textNode),k.textNode&&et(k,"ontext",k.textNode),k.textNode=""}function Tt(k,I){return k.trim&&(I=I.trim()),k.normalize&&(I=I.replace(/\s+/g," ")),I}function Mt(k,I){return Ot(k),k.trackPosition&&(I+=`
Line: `+k.line+`
Column: `+k.column+`
Char: `+k.c),I=new Error(I),k.error=I,et(k,"onerror",I),k}function xt(k){return k.sawRoot&&!k.closedRoot&&yt(k,"Unclosed root tag"),k.state!==b.BEGIN&&k.state!==b.BEGIN_WHITESPACE&&k.state!==b.TEXT&&Mt(k,"Unexpected end"),Ot(k),k.c="",k.closed=!0,et(k,"onend"),i.call(k,k.strict,k.opt),k}function yt(k,I){if(typeof k!="object"||!(k instanceof i))throw new Error("bad call to strictFail");k.strict&&Mt(k,I)}function jt(k){k.strict||(k.tagName=k.tagName[k.looseCase]());var I=k.tags[k.tags.length-1]||k,J=k.tag={name:k.tagName,attributes:{}};k.opt.xmlns&&(J.ns=I.ns),k.attribList.length=0,ct(k,"onopentagstart",J)}function ze(k,I){var J=k.indexOf(":"),z=J<0?["",k]:k.split(":"),wt=z[0],kt=z[1];return I&&k==="xmlns"&&(wt="xmlns",kt=""),{prefix:wt,local:kt}}function _e(k){if(k.strict||(k.attribName=k.attribName[k.looseCase]()),k.attribList.indexOf(k.attribName)!==-1||k.tag.attributes.hasOwnProperty(k.attribName)){k.attribName=k.attribValue="";return}if(k.opt.xmlns){var I=ze(k.attribName,!0),J=I.prefix,z=I.local;if(J==="xmlns")if(z==="xml"&&k.attribValue!==E)yt(k,"xml: prefix must be bound to "+E+`
Actual: `+k.attribValue);else if(z==="xmlns"&&k.attribValue!==x)yt(k,"xmlns: prefix must be bound to "+x+`
Actual: `+k.attribValue);else{var wt=k.tag,kt=k.tags[k.tags.length-1]||k;wt.ns===kt.ns&&(wt.ns=Object.create(kt.ns)),wt.ns[z]=k.attribValue}k.attribList.push([k.attribName,k.attribValue])}else k.tag.attributes[k.attribName]=k.attribValue,ct(k,"onattribute",{name:k.attribName,value:k.attribValue});k.attribName=k.attribValue=""}function q(k,I){if(k.opt.xmlns){var J=k.tag,z=ze(k.tagName);J.prefix=z.prefix,J.local=z.local,J.uri=J.ns[z.prefix]||"",J.prefix&&!J.uri&&(yt(k,"Unbound namespace prefix: "+JSON.stringify(k.tagName)),J.uri=z.prefix);var wt=k.tags[k.tags.length-1]||k;J.ns&&wt.ns!==J.ns&&Object.keys(J.ns).forEach(function(Yt){ct(k,"onopennamespace",{prefix:Yt,uri:J.ns[Yt]})});for(var kt=0,Pt=k.attribList.length;kt<Pt;kt++){var mt=k.attribList[kt],Wt=mt[0],ye=mt[1],vt=ze(Wt,!0),he=vt.prefix,Tr=vt.local,Ee=he===""?"":J.ns[he]||"",se={name:Wt,value:ye,prefix:he,local:Tr,uri:Ee};he&&he!=="xmlns"&&!Ee&&(yt(k,"Unbound namespace prefix: "+JSON.stringify(he)),se.uri=he),k.tag.attributes[Wt]=se,ct(k,"onattribute",se)}k.attribList.length=0}k.tag.isSelfClosing=!!I,k.sawRoot=!0,k.tags.push(k.tag),ct(k,"onopentag",k.tag),I||(!k.noscript&&k.tagName.toLowerCase()==="script"?k.state=b.SCRIPT:k.state=b.TEXT,k.tag=null,k.tagName=""),k.attribName=k.attribValue="",k.attribList.length=0}function Z(k){if(!k.tagName){yt(k,"Weird empty close tag."),k.textNode+="</>",k.state=b.TEXT;return}if(k.script){if(k.tagName!=="script"){k.script+="</"+k.tagName+">",k.tagName="",k.state=b.SCRIPT;return}ct(k,"onscript",k.script),k.script=""}var I=k.tags.length,J=k.tagName;k.strict||(J=J[k.looseCase]());for(var z=J;I--;){var wt=k.tags[I];if(wt.name!==z)yt(k,"Unexpected close tag");else break}if(I<0){yt(k,"Unmatched closing tag: "+k.tagName),k.textNode+="</"+k.tagName+">",k.state=b.TEXT;return}k.tagName=J;for(var kt=k.tags.length;kt-- >I;){var Pt=k.tag=k.tags.pop();k.tagName=k.tag.name,ct(k,"onclosetag",k.tagName);var mt={};for(var Wt in Pt.ns)mt[Wt]=Pt.ns[Wt];var ye=k.tags[k.tags.length-1]||k;k.opt.xmlns&&Pt.ns!==ye.ns&&Object.keys(Pt.ns).forEach(function(vt){var he=Pt.ns[vt];ct(k,"onclosenamespace",{prefix:vt,uri:he})})}I===0&&(k.closedRoot=!0),k.tagName=k.attribValue=k.attribName="",k.attribList.length=0,k.state=b.TEXT}function Q(k){var I=k.entity,J=I.toLowerCase(),z,wt="";return k.ENTITIES[I]?k.ENTITIES[I]:k.ENTITIES[J]?k.ENTITIES[J]:(I=J,I.charAt(0)==="#"&&(I.charAt(1)==="x"?(I=I.slice(2),z=parseInt(I,16),wt=z.toString(16)):(I=I.slice(1),z=parseInt(I,10),wt=z.toString(10))),I=I.replace(/^0+/,""),isNaN(z)||wt.toLowerCase()!==I?(yt(k,"Invalid character entity"),"&"+k.entity+";"):String.fromCodePoint(z))}function st(k,I){I==="<"?(k.state=b.OPEN_WAKA,k.startTagPosition=k.position):T(I)||(yt(k,"Non-whitespace before first tag."),k.textNode=I,k.state=b.TEXT)}function dt(k,I){var J="";return I<k.length&&(J=k.charAt(I)),J}function ht(k){var I=this;if(this.error)throw this.error;if(I.closed)return Mt(I,"Cannot write after close. Assign an onready handler.");if(k===null)return xt(I);typeof k=="object"&&(k=k.toString());for(var J=0,z="";z=dt(k,J++),I.c=z,!!z;)switch(I.trackPosition&&(I.position++,z===`
`?(I.line++,I.column=0):I.column++),I.state){case b.BEGIN:if(I.state=b.BEGIN_WHITESPACE,z==="\uFEFF")continue;st(I,z);continue;case b.BEGIN_WHITESPACE:st(I,z);continue;case b.TEXT:if(I.sawRoot&&!I.closedRoot){for(var wt=J-1;z&&z!=="<"&&z!=="&";)z=dt(k,J++),z&&I.trackPosition&&(I.position++,z===`
`?(I.line++,I.column=0):I.column++);I.textNode+=k.substring(wt,J-1)}z==="<"&&!(I.sawRoot&&I.closedRoot&&!I.strict)?(I.state=b.OPEN_WAKA,I.startTagPosition=I.position):(!T(z)&&(!I.sawRoot||I.closedRoot)&&yt(I,"Text data outside of root node."),z==="&"?I.state=b.TEXT_ENTITY:I.textNode+=z);continue;case b.SCRIPT:z==="<"?I.state=b.SCRIPT_ENDING:I.script+=z;continue;case b.SCRIPT_ENDING:z==="/"?I.state=b.CLOSE_TAG:(I.script+="<"+z,I.state=b.SCRIPT);continue;case b.OPEN_WAKA:if(z==="!")I.state=b.SGML_DECL,I.sgmlDecl="";else if(!T(z))if(V(U,z))I.state=b.OPEN_TAG,I.tagName=z;else if(z==="/")I.state=b.CLOSE_TAG,I.tagName="";else if(z==="?")I.state=b.PROC_INST,I.procInstName=I.procInstBody="";else{if(yt(I,"Unencoded <"),I.startTagPosition+1<I.position){var kt=I.position-I.startTagPosition;z=new Array(kt).join(" ")+z}I.textNode+="<"+z,I.state=b.TEXT}continue;case b.SGML_DECL:if(I.sgmlDecl+z==="--"){I.state=b.COMMENT,I.comment="",I.sgmlDecl="";continue}I.doctype&&I.doctype!==!0&&I.sgmlDecl?(I.state=b.DOCTYPE_DTD,I.doctype+="<!"+I.sgmlDecl+z,I.sgmlDecl=""):(I.sgmlDecl+z).toUpperCase()===h?(ct(I,"onopencdata"),I.state=b.CDATA,I.sgmlDecl="",I.cdata=""):(I.sgmlDecl+z).toUpperCase()===y?(I.state=b.DOCTYPE,(I.doctype||I.sawRoot)&&yt(I,"Inappropriately located doctype declaration"),I.doctype="",I.sgmlDecl=""):z===">"?(ct(I,"onsgmldeclaration",I.sgmlDecl),I.sgmlDecl="",I.state=b.TEXT):(P(z)&&(I.state=b.SGML_DECL_QUOTED),I.sgmlDecl+=z);continue;case b.SGML_DECL_QUOTED:z===I.q&&(I.state=b.SGML_DECL,I.q=""),I.sgmlDecl+=z;continue;case b.DOCTYPE:z===">"?(I.state=b.TEXT,ct(I,"ondoctype",I.doctype),I.doctype=!0):(I.doctype+=z,z==="["?I.state=b.DOCTYPE_DTD:P(z)&&(I.state=b.DOCTYPE_QUOTED,I.q=z));continue;case b.DOCTYPE_QUOTED:I.doctype+=z,z===I.q&&(I.q="",I.state=b.DOCTYPE);continue;case b.DOCTYPE_DTD:z==="]"?(I.doctype+=z,I.state=b.DOCTYPE):z==="<"?(I.state=b.OPEN_WAKA,I.startTagPosition=I.position):P(z)?(I.doctype+=z,I.state=b.DOCTYPE_DTD_QUOTED,I.q=z):I.doctype+=z;continue;case b.DOCTYPE_DTD_QUOTED:I.doctype+=z,z===I.q&&(I.state=b.DOCTYPE_DTD,I.q="");continue;case b.COMMENT:z==="-"?I.state=b.COMMENT_ENDING:I.comment+=z;continue;case b.COMMENT_ENDING:z==="-"?(I.state=b.COMMENT_ENDED,I.comment=Tt(I.opt,I.comment),I.comment&&ct(I,"oncomment",I.comment),I.comment=""):(I.comment+="-"+z,I.state=b.COMMENT);continue;case b.COMMENT_ENDED:z!==">"?(yt(I,"Malformed comment"),I.comment+="--"+z,I.state=b.COMMENT):I.doctype&&I.doctype!==!0?I.state=b.DOCTYPE_DTD:I.state=b.TEXT;continue;case b.CDATA:z==="]"?I.state=b.CDATA_ENDING:I.cdata+=z;continue;case b.CDATA_ENDING:z==="]"?I.state=b.CDATA_ENDING_2:(I.cdata+="]"+z,I.state=b.CDATA);continue;case b.CDATA_ENDING_2:z===">"?(I.cdata&&ct(I,"oncdata",I.cdata),ct(I,"onclosecdata"),I.cdata="",I.state=b.TEXT):z==="]"?I.cdata+="]":(I.cdata+="]]"+z,I.state=b.CDATA);continue;case b.PROC_INST:z==="?"?I.state=b.PROC_INST_ENDING:T(z)?I.state=b.PROC_INST_BODY:I.procInstName+=z;continue;case b.PROC_INST_BODY:if(!I.procInstBody&&T(z))continue;z==="?"?I.state=b.PROC_INST_ENDING:I.procInstBody+=z;continue;case b.PROC_INST_ENDING:z===">"?(ct(I,"onprocessinginstruction",{name:I.procInstName,body:I.procInstBody}),I.procInstName=I.procInstBody="",I.state=b.TEXT):(I.procInstBody+="?"+z,I.state=b.PROC_INST_BODY);continue;case b.OPEN_TAG:V(j,z)?I.tagName+=z:(jt(I),z===">"?q(I):z==="/"?I.state=b.OPEN_TAG_SLASH:(T(z)||yt(I,"Invalid character in tag name"),I.state=b.ATTRIB));continue;case b.OPEN_TAG_SLASH:z===">"?(q(I,!0),Z(I)):(yt(I,"Forward-slash in opening tag not followed by >"),I.state=b.ATTRIB);continue;case b.ATTRIB:if(T(z))continue;z===">"?q(I):z==="/"?I.state=b.OPEN_TAG_SLASH:V(U,z)?(I.attribName=z,I.attribValue="",I.state=b.ATTRIB_NAME):yt(I,"Invalid attribute name");continue;case b.ATTRIB_NAME:z==="="?I.state=b.ATTRIB_VALUE:z===">"?(yt(I,"Attribute without value"),I.attribValue=I.attribName,_e(I),q(I)):T(z)?I.state=b.ATTRIB_NAME_SAW_WHITE:V(j,z)?I.attribName+=z:yt(I,"Invalid attribute name");continue;case b.ATTRIB_NAME_SAW_WHITE:if(z==="=")I.state=b.ATTRIB_VALUE;else{if(T(z))continue;yt(I,"Attribute without value"),I.tag.attributes[I.attribName]="",I.attribValue="",ct(I,"onattribute",{name:I.attribName,value:""}),I.attribName="",z===">"?q(I):V(U,z)?(I.attribName=z,I.state=b.ATTRIB_NAME):(yt(I,"Invalid attribute name"),I.state=b.ATTRIB)}continue;case b.ATTRIB_VALUE:if(T(z))continue;P(z)?(I.q=z,I.state=b.ATTRIB_VALUE_QUOTED):(I.opt.unquotedAttributeValues||Mt(I,"Unquoted attribute value"),I.state=b.ATTRIB_VALUE_UNQUOTED,I.attribValue=z);continue;case b.ATTRIB_VALUE_QUOTED:if(z!==I.q){z==="&"?I.state=b.ATTRIB_VALUE_ENTITY_Q:I.attribValue+=z;continue}_e(I),I.q="",I.state=b.ATTRIB_VALUE_CLOSED;continue;case b.ATTRIB_VALUE_CLOSED:T(z)?I.state=b.ATTRIB:z===">"?q(I):z==="/"?I.state=b.OPEN_TAG_SLASH:V(U,z)?(yt(I,"No whitespace between attributes"),I.attribName=z,I.attribValue="",I.state=b.ATTRIB_NAME):yt(I,"Invalid attribute name");continue;case b.ATTRIB_VALUE_UNQUOTED:if(!F(z)){z==="&"?I.state=b.ATTRIB_VALUE_ENTITY_U:I.attribValue+=z;continue}_e(I),z===">"?q(I):I.state=b.ATTRIB;continue;case b.CLOSE_TAG:if(I.tagName)z===">"?Z(I):V(j,z)?I.tagName+=z:I.script?(I.script+="</"+I.tagName,I.tagName="",I.state=b.SCRIPT):(T(z)||yt(I,"Invalid tagname in closing tag"),I.state=b.CLOSE_TAG_SAW_WHITE);else{if(T(z))continue;Y(U,z)?I.script?(I.script+="</"+z,I.state=b.SCRIPT):yt(I,"Invalid tagname in closing tag."):I.tagName=z}continue;case b.CLOSE_TAG_SAW_WHITE:if(T(z))continue;z===">"?Z(I):yt(I,"Invalid characters in closing tag");continue;case b.TEXT_ENTITY:case b.ATTRIB_VALUE_ENTITY_Q:case b.ATTRIB_VALUE_ENTITY_U:var Pt,mt;switch(I.state){case b.TEXT_ENTITY:Pt=b.TEXT,mt="textNode";break;case b.ATTRIB_VALUE_ENTITY_Q:Pt=b.ATTRIB_VALUE_QUOTED,mt="attribValue";break;case b.ATTRIB_VALUE_ENTITY_U:Pt=b.ATTRIB_VALUE_UNQUOTED,mt="attribValue";break}if(z===";"){var Wt=Q(I);I.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes(Wt)?(I.entity="",I.state=Pt,I.write(Wt)):(I[mt]+=Wt,I.entity="",I.state=Pt)}else V(I.entity.length?w:R,z)?I.entity+=z:(yt(I,"Invalid character in entity name"),I[mt]+="&"+I.entity+z,I.entity="",I.state=Pt);continue;default:throw new Error(I,"Unknown state: "+I.state)}return I.position>=I.bufferCheckPosition&&a(I),I}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var k=String.fromCharCode,I=Math.floor,J=function(){var z=16384,wt=[],kt,Pt,mt=-1,Wt=arguments.length;if(!Wt)return"";for(var ye="";++mt<Wt;){var vt=Number(arguments[mt]);if(!isFinite(vt)||vt<0||vt>1114111||I(vt)!==vt)throw RangeError("Invalid code point: "+vt);vt<=65535?wt.push(vt):(vt-=65536,kt=(vt>>10)+55296,Pt=vt%1024+56320,wt.push(kt,Pt)),(mt+1===Wt||wt.length>z)&&(ye+=k.apply(null,wt),wt.length=0)}return ye};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:J,configurable:!0,writable:!0}):String.fromCodePoint=J}()})(t)}(Q_)),Q_}var va={exports:{}},X_;function X2(){if(X_)return va.exports;X_=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(T,P,F){return Function.prototype.apply.call(T,P,F)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:r=function(T){return Object.getOwnPropertyNames(T)};function i(T){console&&console.warn&&console.warn(T)}var a=Number.isNaN||function(T){return T!==T};function s(){s.init.call(this)}va.exports=s,va.exports.once=j,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function u(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(T){if(typeof T!="number"||T<0||a(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");c=T}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||a(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function p(T){return T._maxListeners===void 0?s.defaultMaxListeners:T._maxListeners}s.prototype.getMaxListeners=function(){return p(this)},s.prototype.emit=function(T){for(var P=[],F=1;F<arguments.length;F++)P.push(arguments[F]);var V=T==="error",Y=this._events;if(Y!==void 0)V=V&&Y.error===void 0;else if(!V)return!1;if(V){var b;if(P.length>0&&(b=P[0]),b instanceof Error)throw b;var G=new Error("Unhandled error."+(b?" ("+b.message+")":""));throw G.context=b,G}var et=Y[T];if(et===void 0)return!1;if(typeof et=="function")e(et,this,P);else for(var ct=et.length,Ot=x(et,ct),F=0;F<ct;++F)e(Ot[F],this,P);return!0};function m(T,P,F,V){var Y,b,G;if(u(F),b=T._events,b===void 0?(b=T._events=Object.create(null),T._eventsCount=0):(b.newListener!==void 0&&(T.emit("newListener",P,F.listener?F.listener:F),b=T._events),G=b[P]),G===void 0)G=b[P]=F,++T._eventsCount;else if(typeof G=="function"?G=b[P]=V?[F,G]:[G,F]:V?G.unshift(F):G.push(F),Y=p(T),Y>0&&G.length>Y&&!G.warned){G.warned=!0;var et=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");et.name="MaxListenersExceededWarning",et.emitter=T,et.type=P,et.count=G.length,i(et)}return T}s.prototype.addListener=function(T,P){return m(this,T,P,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(T,P){return m(this,T,P,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(T,P,F){var V={fired:!1,wrapFn:void 0,target:T,type:P,listener:F},Y=g.bind(V);return Y.listener=F,V.wrapFn=Y,Y}s.prototype.once=function(T,P){return u(P),this.on(T,h(this,T,P)),this},s.prototype.prependOnceListener=function(T,P){return u(P),this.prependListener(T,h(this,T,P)),this},s.prototype.removeListener=function(T,P){var F,V,Y,b,G;if(u(P),V=this._events,V===void 0)return this;if(F=V[T],F===void 0)return this;if(F===P||F.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete V[T],V.removeListener&&this.emit("removeListener",T,F.listener||P));else if(typeof F!="function"){for(Y=-1,b=F.length-1;b>=0;b--)if(F[b]===P||F[b].listener===P){G=F[b].listener,Y=b;break}if(Y<0)return this;Y===0?F.shift():D(F,Y),F.length===1&&(V[T]=F[0]),V.removeListener!==void 0&&this.emit("removeListener",T,G||P)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(T){var P,F,V;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[T]),this;if(arguments.length===0){var Y=Object.keys(F),b;for(V=0;V<Y.length;++V)b=Y[V],b!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=F[T],typeof P=="function")this.removeListener(T,P);else if(P!==void 0)for(V=P.length-1;V>=0;V--)this.removeListener(T,P[V]);return this};function y(T,P,F){var V=T._events;if(V===void 0)return[];var Y=V[P];return Y===void 0?[]:typeof Y=="function"?F?[Y.listener||Y]:[Y]:F?U(Y):x(Y,Y.length)}s.prototype.listeners=function(T){return y(this,T,!0)},s.prototype.rawListeners=function(T){return y(this,T,!1)},s.listenerCount=function(T,P){return typeof T.listenerCount=="function"?T.listenerCount(P):E.call(T,P)},s.prototype.listenerCount=E;function E(T){var P=this._events;if(P!==void 0){var F=P[T];if(typeof F=="function")return 1;if(F!==void 0)return F.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function x(T,P){for(var F=new Array(P),V=0;V<P;++V)F[V]=T[V];return F}function D(T,P){for(;P+1<T.length;P++)T[P]=T[P+1];T.pop()}function U(T){for(var P=new Array(T.length),F=0;F<P.length;++F)P[F]=T[F].listener||T[F];return P}function j(T,P){return new Promise(function(F,V){function Y(G){T.removeListener(P,b),V(G)}function b(){typeof T.removeListener=="function"&&T.removeListener("error",Y),F([].slice.call(arguments))}w(T,P,b,{once:!0}),P!=="error"&&R(T,Y,{once:!0})})}function R(T,P,F){typeof T.on=="function"&&w(T,"error",P,F)}function w(T,P,F,V){if(typeof T.on=="function")V.once?T.once(P,F):T.on(P,F);else if(typeof T.addEventListener=="function")T.addEventListener(P,function Y(b){V.once&&T.removeEventListener(P,Y),F(b)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return va.exports}var ty={},ey;function tN(){return ey||(ey=1,(function(){ty.stripBOM=function(t){return t[0]==="\uFEFF"?t.substring(1):t}}).call(It)),ty}var Ci={},ry;function ny(){return ry||(ry=1,(function(){var t;t=new RegExp(/(?!xmlns)^.*:/),Ci.normalize=function(e){return e.toLowerCase()},Ci.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},Ci.stripPrefix=function(e){return e.replace(t,"")},Ci.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},Ci.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(It)),Ci}var iy;function eN(){return iy||(iy=1,function(t){(function(){var e,r,i,a,s,c,u,p,m,g=function(E,x){return function(){return E.apply(x,arguments)}},h=function(E,x){for(var D in x)y.call(x,D)&&(E[D]=x[D]);function U(){this.constructor=E}return U.prototype=x.prototype,E.prototype=new U,E.__super__=x.prototype,E},y={}.hasOwnProperty;p=J2(),a=X2(),e=tN(),u=ny(),m=Ll.setImmediate,r=Sl().defaults,s=function(E){return typeof E=="object"&&E!=null&&Object.keys(E).length===0},c=function(E,x,D){var U,j,R;for(U=0,j=E.length;U<j;U++)R=E[U],x=R(x,D);return x},i=function(E,x,D){var U;return U=Object.create(null),U.value=D,U.writable=!0,U.enumerable=!0,U.configurable=!0,Object.defineProperty(E,x,U)},t.Parser=function(E){h(x,E);function x(D){this.parseStringPromise=g(this.parseStringPromise,this),this.parseString=g(this.parseString,this),this.reset=g(this.reset,this),this.assignOrPush=g(this.assignOrPush,this),this.processAsync=g(this.processAsync,this);var U,j,R;if(!(this instanceof t.Parser))return new t.Parser(D);this.options={},j=r["0.2"];for(U in j)y.call(j,U)&&(R=j[U],this.options[U]=R);for(U in D)y.call(D,U)&&(R=D[U],this.options[U]=R);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(u.normalize)),this.reset()}return x.prototype.processAsync=function(){var D,U;try{return this.remaining.length<=this.options.chunkSize?(D=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(D),this.saxParser.close()):(D=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(D),m(this.processAsync))}catch(j){if(U=j,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(U)}},x.prototype.assignOrPush=function(D,U,j){return U in D?(D[U]instanceof Array||i(D,U,[D[U]]),D[U].push(j)):this.options.explicitArray?i(D,U,[j]):i(D,U,j)},x.prototype.reset=function(){var D,U,j,R;return this.removeAllListeners(),this.saxParser=p.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(w){return function(T){if(w.saxParser.resume(),!w.saxParser.errThrown)return w.saxParser.errThrown=!0,w.emit("error",T)}}(this),this.saxParser.onend=function(w){return function(){if(!w.saxParser.ended)return w.saxParser.ended=!0,w.emit("end",w.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,R=[],D=this.options.attrkey,U=this.options.charkey,this.saxParser.onopentag=function(w){return function(T){var P,F,V,Y,b;if(V={},V[U]="",!w.options.ignoreAttrs){b=T.attributes;for(P in b)y.call(b,P)&&(!(D in V)&&!w.options.mergeAttrs&&(V[D]={}),F=w.options.attrValueProcessors?c(w.options.attrValueProcessors,T.attributes[P],P):T.attributes[P],Y=w.options.attrNameProcessors?c(w.options.attrNameProcessors,P):P,w.options.mergeAttrs?w.assignOrPush(V,Y,F):i(V[D],Y,F))}return V["#name"]=w.options.tagNameProcessors?c(w.options.tagNameProcessors,T.name):T.name,w.options.xmlns&&(V[w.options.xmlnskey]={uri:T.uri,local:T.local}),R.push(V)}}(this),this.saxParser.onclosetag=function(w){return function(){var T,P,F,V,Y,b,G,et,ct,Ot;if(b=R.pop(),Y=b["#name"],(!w.options.explicitChildren||!w.options.preserveChildrenOrder)&&delete b["#name"],b.cdata===!0&&(T=b.cdata,delete b.cdata),ct=R[R.length-1],b[U].match(/^\s*$/)&&!T?(P=b[U],delete b[U]):(w.options.trim&&(b[U]=b[U].trim()),w.options.normalize&&(b[U]=b[U].replace(/\s{2,}/g," ").trim()),b[U]=w.options.valueProcessors?c(w.options.valueProcessors,b[U],Y):b[U],Object.keys(b).length===1&&U in b&&!w.EXPLICIT_CHARKEY&&(b=b[U])),s(b)&&(typeof w.options.emptyTag=="function"?b=w.options.emptyTag():b=w.options.emptyTag!==""?w.options.emptyTag:P),w.options.validator!=null&&(Ot="/"+function(){var Tt,Mt,xt;for(xt=[],Tt=0,Mt=R.length;Tt<Mt;Tt++)V=R[Tt],xt.push(V["#name"]);return xt}().concat(Y).join("/"),function(){var Tt;try{return b=w.options.validator(Ot,ct&&ct[Y],b)}catch(Mt){return Tt=Mt,w.emit("error",Tt)}}()),w.options.explicitChildren&&!w.options.mergeAttrs&&typeof b=="object"){if(!w.options.preserveChildrenOrder)V={},w.options.attrkey in b&&(V[w.options.attrkey]=b[w.options.attrkey],delete b[w.options.attrkey]),!w.options.charsAsChildren&&w.options.charkey in b&&(V[w.options.charkey]=b[w.options.charkey],delete b[w.options.charkey]),Object.getOwnPropertyNames(b).length>0&&(V[w.options.childkey]=b),b=V;else if(ct){ct[w.options.childkey]=ct[w.options.childkey]||[],G={};for(F in b)y.call(b,F)&&i(G,F,b[F]);ct[w.options.childkey].push(G),delete b["#name"],Object.keys(b).length===1&&U in b&&!w.EXPLICIT_CHARKEY&&(b=b[U])}}return R.length>0?w.assignOrPush(ct,Y,b):(w.options.explicitRoot&&(et=b,b={},i(b,Y,et)),w.resultObject=b,w.saxParser.ended=!0,w.emit("end",w.resultObject))}}(this),j=function(w){return function(T){var P,F;if(F=R[R.length-1],F)return F[U]+=T,w.options.explicitChildren&&w.options.preserveChildrenOrder&&w.options.charsAsChildren&&(w.options.includeWhiteChars||T.replace(/\\n/g,"").trim()!=="")&&(F[w.options.childkey]=F[w.options.childkey]||[],P={"#name":"__text__"},P[U]=T,w.options.normalize&&(P[U]=P[U].replace(/\s{2,}/g," ").trim()),F[w.options.childkey].push(P)),F}}(this),this.saxParser.ontext=j,this.saxParser.oncdata=function(w){return function(T){var P;if(P=j(T),P)return P.cdata=!0}}()},x.prototype.parseString=function(D,U){var j;U!=null&&typeof U=="function"&&(this.on("end",function(R){return this.reset(),U(null,R)}),this.on("error",function(R){return this.reset(),U(R)}));try{return D=D.toString(),D.trim()===""?(this.emit("end",null),!0):(D=e.stripBOM(D),this.options.async?(this.remaining=D,m(this.processAsync),this.saxParser):this.saxParser.write(D).close())}catch(R){if(j=R,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw j}else return this.emit("error",j),this.saxParser.errThrown=!0}},x.prototype.parseStringPromise=function(D){return new Promise(function(U){return function(j,R){return U.parseString(D,function(w,T){return w?R(w):j(T)})}}(this))},x}(a),t.parseString=function(E,x,D){var U,j,R;return D!=null?(typeof D=="function"&&(U=D),typeof x=="object"&&(j=x)):(typeof x=="function"&&(U=x),j={}),R=new t.Parser(j),R.parseString(E,U)},t.parseStringPromise=function(E,x){var D,U;return typeof x=="object"&&(D=x),U=new t.Parser(D),U.parseStringPromise(E)}}).call(It)}(G_)),G_}var oy;(function(){var t,e,r,i,a=function(c,u){for(var p in u)s.call(u,p)&&(c[p]=u[p]);function m(){this.constructor=c}return m.prototype=u.prototype,c.prototype=new m,c.__super__=u.prototype,c},s={}.hasOwnProperty;e=Sl(),t=H2(),r=eN(),i=ny(),kn.defaults=e.defaults,kn.processors=i,kn.ValidationError=function(c){a(u,c);function u(p){this.message=p}return u}(Error),kn.Builder=t.Builder,kn.Parser=r.Parser,kn.parseString=r.parseString,oy=kn.parseStringPromise=r.parseStringPromise}).call(It);async function sy(t){var e,r,i,a,s,c;if(!t.startsWith("<"))throw new Error("\u26D4\uFE0F AWS did not respond with expected XML error");try{const u=await kn.parseStringPromise(t);return{awsErrorCode:((r=(e=u==null?void 0:u.Error)==null?void 0:e.Code)==null?void 0:r[0])||"Unknown",awsErrorMessage:((a=(i=u==null?void 0:u.Error)==null?void 0:i.Message)==null?void 0:a[0])||"No message",awsRequestId:((c=(s=u==null?void 0:u.Error)==null?void 0:s.RequestId)==null?void 0:c[0])||"Unknown"}}catch{throw new Error("\u26D4\uFE0F Failed to parse AWS error response as XML, possibly intercepted by firewall or proxy")}}async function vo(t,e,r,i={}){const{contentEncoding:a,timeout:s=6e4}=i,c=new AbortController,u=setTimeout(()=>c.abort(),s);try{const p={"Content-Type":r};a&&(p["Content-Encoding"]=a);const m=await fetch(t,{method:"PUT",body:e,headers:p,signal:c.signal});if(!m.ok){const g=await m.text(),h=await sy(g);throw new Error(`AWS Upload failed: ${h.awsErrorMessage} (${h.awsErrorCode})`)}return m}finally{clearTimeout(u)}}const xi=async()=>{if(!chrome.tabs)return null;const t=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});if(!t.length){const e=await chrome.tabs.query({active:!0});return e.reduce((r,i)=>((r==null?void 0:r.lastAccessed)??0)>(i.lastAccessed??0)?r:i,e[0]||null)}return t[0]},rN=async()=>{var r,i,a;const t=((a=(i=(r=ut.getState())==null?void 0:r.recordingState)==null?void 0:i.actionsQueue)==null?void 0:a.findLast(s=>p2(s)))||null;let e=null;return t!=null&&t.tabId&&(e=await chrome.tabs.get(t==null?void 0:t.tabId)||null),e||null},nN=async()=>{var e;const t=await xi();return t&&((e=io(t.url))==null?void 0:e.hostname)||null},iN=async()=>{const t=await xi();return t?io(t.url):null},oN=()=>Promise.all([chrome.tabs.query({}),chrome.extension.isAllowedFileSchemeAccess()]).then(([t,e])=>t.filter(r=>!mo(r.url,e))),sN=200;class Fl extends Error{constructor(r,i){super(r);Xr(this,"metadata");this.name=this.constructor.name,this.metadata=i||{},Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class aN extends Error{constructor(r,i){super(r);Xr(this,"metadata");this.name=this.constructor.name,this.metadata=i||{},Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}function ba(t,e){return t.metadata=e,t}const cN=async(t=null,e="",r=20)=>{const i=performance.now();let a;try{a=await rN()}catch(s){throw ba(s,{screenshotAttemptId:e})}if(a||(a=await xi()),!a){const s=performance.now()-i;throw ba(new Error("Backup screenshot capture method could not find a current tab."),{screenshotAttemptId:e,failDuration:s})}return ce("screenshot_canvas_fallback",{reason:t==null?void 0:t.message,url:a==null?void 0:a.url,screenshotAttemptId:e}),new Promise((s,c)=>{let u;const p=`${Math.random()}`,m=(g,h,y)=>{if(!(g.messageType!=="html2canvasScreenshotResponse"||g.responseId!==p)){if(g.error)return clearTimeout(u),chrome.runtime.onMessage.removeListener(m),c(new Fl(g.error.message,{fallbackMethodCaptureUrl:a.url,errorName:g.error.name,errorStack:g.error.stack,captureDuration:g.captureTimestamp?g.captureTimestamp-g.startTimestamp:null,failDuration:g.failTimestamp?g.failTimestamp-g.startTimestamp:null,screenshotAttemptId:e,wasFallback:!0,wasEarlyScreenshot:!1})),y(null);if(g.screenshot)return clearTimeout(u),chrome.runtime.onMessage.removeListener(m),s({base64Image:g.screenshot,attemptId:e,successDuration:g.successTimestamp?g.successTimestamp-g.startTimestamp:void 0,wasFallback:!0,didNotAttemptFallback:!1,wasEarlyScreenshot:!1}),y(null)}};chrome.runtime.onMessage.addListener(m),u=setTimeout(()=>{const g=performance.now()-i,h=new Fl(`Backup screenshot capture method timed out (${r} seconds passed).`);c(ba(h,{fallbackMethodCaptureUrl:(a==null?void 0:a.url)||null,screenshotAttemptId:e,wasFallback:!0,didNotAttemptFallback:!1,failDuration:g}))},Math.floor(r*1e3)),chrome.tabs.sendMessage(a.id,{messageType:"getHtml2CanvasScreenshot",requestId:p}).catch(g=>{clearTimeout(u),chrome.runtime.onMessage.removeListener(m),c(ba(g,{screenshotAttemptId:e,wasFallback:!0}))})})},uN=t=>{var e;return(e=t==null?void 0:t.message)==null?void 0:e.includes("This request exceeds the MAX_CAPTURE_VISIBLE_TAB_CALLS_PER_SECOND quota.")},lN=(t,e)=>{const r=["chrome://","chrome-extension://","about:blank#blocked","externalfile:"].some(a=>{var s;return(s=t.url)==null?void 0:s.startsWith(a)}),i=e&&["Cannot access a chrome:// URL"].some(a=>{var s;return(s=e.message)==null?void 0:s.startsWith(a)});return!(r||i)},pN=async()=>{const t=performance.now(),e=Math.random().toString(),r=t-t,i=await xi();mg(ut.getState());try{const a=await chrome.tabs.captureVisibleTab({format:"jpeg"}),s=performance.now()-t;return{base64Image:a,attemptId:e,successDuration:s,wasFallback:!1,didNotAttemptFallback:!0,wasEarlyScreenshot:!1}}catch(a){if(uN(a))throw a.metadata={durationSinceMostRecentScreenshotAttempt:r,screenshotAttemptId:e,wasFallback:!1,wasEarlyScreenshot:!1},a;return i&&lN(i,a)?cN(a,e):Promise.resolve({base64Image:null,attemptId:e,wasFallback:!1,didNotAttemptFallback:!0,wasEarlyScreenshot:!1})}};function fN(t,e,r,i,a){var u;const s=(u=eg(ut.getState()))==null?void 0:u.email,c={scribeId:t,timestamp:i,privacyScreen:"True"};return ut.dispatch(en({tempId:e,partialAction:{screenshot_upload_status:Ct.UPLOAD_STATUS.WAITING}})),Dn().then(p=>{ha(e,r,i,a,"proactively uploading screenshot",p,"uploadFailedRecovery")}),un.post("/sps/",{name:"screenshot",needs_redaction:"True",image_data:r,email:s,screenshot_data:c}).then(p=>{const{data:{uploaded_file:m}}=p,g={...p};ce("screenshot_sent_for_redaction",{url:g.data.internal_url,screenshot_data:c}),ut.dispatch(en({tempId:e,partialAction:{screenshot:m,screenshot_upload_status:Ct.UPLOAD_STATUS.SUCCESS}}))}).catch(async p=>{throw Kt(p),ut.dispatch(en({tempId:e,partialAction:{failed_ss:!0,screenshot_upload_status:Ct.UPLOAD_STATUS.WAITING}})),ha(e,r,i,a,p.message,await Dn()),p})}function dN(t,e,r,i,a,s){return en({tempId:e,partialAction:{screenshot_upload_status:Ct.UPLOAD_STATUS.WAITING}}),Dn().then(c=>{ha(e,r,i,a,"proactively uploading screenshot",c,"uploadFailedRecovery")}),un.post("/signed_urls/",{name:"a screenshot"}).then(c=>{const{data:{internal_url:u,upload_url:p,download_url:m}}=c;return{internal_url:u,upload_url:p,download_url:m}}).then(({internal_url:c,upload_url:u,download_url:p})=>(ut.dispatch(en({tempId:e,partialAction:{screenshot_url:c,screenshot_upload_status:Ct.UPLOAD_STATUS.WAITING,download_url:p}})),vo(u,yo.Buffer.from(r,"base64"),"image/jpeg",{contentEncoding:"base64",timeout:6e4}).then(m=>({res:m,upload_url:u})))).then(({res:c,upload_url:u})=>{if(c.ok){const p={scribeId:t,timestamp:i,privacyScreen:"False"},m={status:c.status,statusText:c.statusText,url:u,headers:Object.fromEntries(c.headers.entries()),config:{url:u,data:{}},request:{}};return ce("screenshot_upload_succeeded",{screenshot_data:p,url:u,screenshotAttemptId:(s==null?void 0:s.attemptId)??null,wasFallback:(s==null?void 0:s.wasFallback)??null,captureSuccessDuration:(s==null?void 0:s.successDuration)??null,didNotAttemptFallback:(s==null?void 0:s.didNotAttemptFallback)??null}),ma("screenshot_upload_succeeded",m),ut.dispatch(en({tempId:e,partialAction:{screenshot_upload_status:Ct.UPLOAD_STATUS.SUCCESS}})),c}return c.text().then(p=>{if(p.startsWith("<"))return oy(p).then(m=>{var h,y,E,x,D,U;const g={awsErrorCode:((y=(h=m==null?void 0:m.Error)==null?void 0:h.Code)==null?void 0:y[0])||"Unknown",awsErrorMessage:((x=(E=m==null?void 0:m.Error)==null?void 0:E.Message)==null?void 0:x[0])||"No message",awsRequestId:((U=(D=m==null?void 0:m.Error)==null?void 0:D.RequestId)==null?void 0:U[0])||"Unknown"};throw ce("screenshot_upload_aws_error",{details:g,url:u,screenshotAttemptId:(s==null?void 0:s.attemptId)??null}),new Error(`AWS Error: ${g.awsErrorMessage} (Code: ${g.awsErrorCode})`)}).catch(m=>{throw ce("screenshot_upload_aws_error_parse_failed",{error:m.message,responseText:p,url:u,screenshotAttemptId:(s==null?void 0:s.attemptId)??null}),m});throw ce("screenshot_upload_non_xml_error",{error:`Screenshot upload failed with status ${c.status}`,responseText:p,url:u,screenshotAttemptId:(s==null?void 0:s.attemptId)??null}),new Error(`Screenshot upload failed with status ${c.status}`)})},async c=>{throw Kt(c),ce("screenshot_upload_network_error",{error:c.message,screenshotAttemptId:(s==null?void 0:s.attemptId)??null}),ut.dispatch(en({tempId:e,partialAction:{failed_ss:!0,screenshot_upload_status:Ct.UPLOAD_STATUS.WAITING}})),ha(e,r,i,a,c.message,await Dn()),c})}async function hN(t){const e=await un.post("/signed_urls/",{name:"additional_screenshot",file_type:"jpeg"}),{internal_url:r,upload_url:i,download_url:a}=e.data;return await vo(i,yo.Buffer.from(t.split(",")[1],"base64"),"image/jpeg",{contentEncoding:"base64",timeout:6e4}),{internal_url:r,download_url:a}}const ay=async(t,e,r,i,a,s,c,u=null)=>{if(s>sN){ce("screenshot_upload_failed",{screenshot_data:{timestamp:a,scribeId:t,privacyScreen:e,retries:s},error:u,reason:"retry_count_exceeded",screenshotAttemptId:(c==null?void 0:c.attemptId)??null,wasFallback:(c==null?void 0:c.wasFallback)??null,captureSuccessDuration:(c==null?void 0:c.successDuration)??null,didNotAttemptFallback:(c==null?void 0:c.didNotAttemptFallback)??null}),ut.dispatch(en({tempId:r,partialAction:{screenshot_upload_status:Ct.UPLOAD_STATUS.ERROR}}));return}return e?fN(t,r,i,a,s):dN(t,r,i,a,s,c)},gN=1e4;let wa=null;async function mN({isLocalScribe:t=!1}){const e=Sm();return e?new Promise(async r=>{const i=e.transaction([Xn],"readwrite").objectStore(Xn).openCursor(),{scribeId:a,privacyScreen:s}=await Dn({isLocalScribe:t});let c=!1,u=0;i.onsuccess=()=>{const p=i.result;p?(u++,ay(a,s,p.value.actionId,p.value.imageData,p.value.timestamp,p.value.numOfRetry+1,null,p.value.error).catch(m=>{c=!0,Kt(m);const g={scribeId:a,timestamp:p.value.timestamp,privacyScreen:s,isLocalScribe:t,isLocalImageRetry:t};ce("screenshot_upload_requeued",{screenshot_data:g,error:p.value.error,isLocalScribe:t,isLocalImageRetry:t})}).finally(()=>{u--,u===0&&(ce("scribe_retry_upload_success",{scribeId:a,isLocalScribe:t,isLocalImageRetry:t}),r(!c))}),p.delete(),p.continue()):u===0&&r(!0)},i.onerror=()=>{Kt({title:"Error opening cursor:",error:i.error}),console.error("Error opening cursor:",i.error),r(!1)}}):!1}function _N(t=null){wa=setInterval(async function(){await mN({isLocalScribe:!!t})&&t&&chrome.runtime.sendMessage(t)},gN)}function cy(){wa&&(clearInterval(wa),wa=null)}function yN(t=null){cy(),_N(t)}let ql=!1;function bo(t){t?ql=!0:ql=!1}async function vN(){var t;if(ql)return console.warn("handleInRecoveryScribeScreenshots: Already running"),!1;bo(!0);try{const{scribeId:e,privacyScreen:r}=await Dn({isLocalScribe:!0});ce("local_scribe_retry_upload_attempt_start",{scribeId:e,isLocalScribe:!0,isLocalImageRetry:!0});const i=await C2("uploadFailedRecovery");if(i.length===0)return bo(!1),!0;const a=await ti();if(!a||!a.actionsQueue||a.actionsQueue.length===0)return bo(!1),!0;for(const s of a.actionsQueue){const c=s.tempId;if(!c||s.screenshot_upload_status===Ct.UPLOAD_STATUS.SUCCESS)continue;const u=i.find(y=>y.actionId===c);if(!u){console.error("No action data found for",c);continue}const{imageData:p}=u;if(!p){console.error("No image data found for",c);continue}const m=await un.post("/signed_urls/",{name:"a screenshot"}),g=await vo(m.data.upload_url,yo.Buffer.from(p,"base64"),"image/jpeg",{contentEncoding:"base64",timeout:6e4});if(!g.ok){const y=await g.text(),E=await sy(y);Kt({title:"AWS upload failed for recovery image",error:E}),console.error("AWS upload failed for",c);continue}const h=(((t=await ti())==null?void 0:t.actionsQueue)||[]).map(y=>y.tempId===c?{...y,screenshot_url:m.data.internal_url,screenshot_upload_status:Ct.UPLOAD_STATUS.SUCCESS,download_url:m.data.download_url}:y);await wo(h)}return ce("scribe_retry_upload_success",{scribeId:e,isLocalScribe:!0,isLocalImageRetry:!0}),bo(!1),!0}catch(e){return console.error("Unexpected error in handleInRecoveryScribeScreenshots:",e),Kt({title:"Unexpected error in handleInRecoveryScribeScreenshots:",error:e}),bo(!1),!1}}const jr="inProgressScribes",uy=async()=>{try{const t=await chrome.storage.local.get(null);jr in t||await chrome.storage.local.set({[jr]:{}})}catch(t){Kt({title:`Error finding ${jr}`,error:t}),console.error("Storage error:",t)}},ti=async()=>{try{return await new Promise((t,e)=>{chrome.storage.local.get(jr,r=>{try{const i=r[jr],a=typeof i!==null&&typeof i=="object"?i:fm(i);t(a||null)}catch(i){Kt({title:"Error getting local scribe data",error:i}),e(i)}})})}catch(t){throw Kt({title:"Error getting local scribe data",error:t}),console.error("Error getting local scribe data:",t),t}},ly=async()=>{var t,e;await uy();try{const{recordingState:r}=await E2();return((e=(t=JSON.parse(r))==null?void 0:t.actionsQueue)==null?void 0:e.length)>0?(await chrome.storage.local.set({[jr]:r}),!0):!1}catch(r){return Kt({title:"Error copying scribe to local storage",error:r}),console.error("Error copying scribe to local storage:",r),!1}},bN=t=>t.every(e=>"screenshot_upload_status"in e?e.screenshot_upload_status==="SUCCESS":!0),wN=async()=>{var t;try{await uy();const e=await ti();if(e!=null&&e.deletedActionIds&&e.deletedActionIds.length>0&&ut.dispatch(sh(e.deletedActionIds)),e&&((t=e.actionsQueue)==null?void 0:t.length)>0){const r=bN(e.actionsQueue);let i=e==null?void 0:e.scribeId;return i||(i=hs(),await chrome.storage.local.set({[jr]:{...e,scribeId:i}})),r?(chrome.runtime.sendMessage({messageType:"scribeInProgressDetected"}),{localScribeDetected:!0,scribeId:i}):(await vN(),chrome.runtime.sendMessage({messageType:"scribeInProgressDetected"}),{localScribeDetected:!0,scribeId:i})}return{localScribeDetected:!1,scribeId:null}}catch(e){throw Kt({title:"Error checking for local in progress scribe",error:e}),console.error("Error checking for scribe in progress:",e),e}},wo=async t=>{try{const e=await ti(),r=ut.getState().recordingState.deletedActionIds||[];return chrome.storage.local.set({[jr]:{...e,actionsQueue:t,deletedActionIds:r}}),!0}catch(e){return Kt({title:"Error updating actions queue for local in progress scribe",error:e}),console.error("Error updating actions queue for local in progress scribe:",e),!1}},SN=async()=>{try{const t=await ti();if(!t)return!1;const e=ut.getState().recordingState.deletedActionIds||[];return chrome.storage.local.set({[jr]:{...t,deletedActionIds:e}}),!0}catch(t){return Kt({title:"Error updating deleted action IDs for local in progress scribe",error:t}),console.error("Error updating deleted action IDs for local in progress scribe:",t),!1}},EN=async()=>{var t;try{const e=await ti();return e&&((t=e==null?void 0:e.actionsQueue)==null?void 0:t.length)>0&&(ut.dispatch($O(e.actionsQueue)),e.deletedActionIds&&e.deletedActionIds.length>0&&ut.dispatch(sh(e.deletedActionIds)),await Ia({isLocalScribe:!0}))?(await chrome.storage.local.remove(jr),!0):(console.error("No scribes in progress to end and save"),!1)}catch(e){return Kt({title:"Error attempting to end and save scribe in progress",error:e}),console.error("Error attempting to end and save scribe in progress:",e),!1}},IN=async()=>{try{await Im("uploadFailedRecovery")}catch{}return!0},py=async()=>{try{return await IN(),await new Promise((t,e)=>{chrome.storage.local.remove(jr,()=>{chrome.runtime.lastError&&e(chrome.runtime.lastError),t(!0)})})}catch(t){return Kt({title:"Error clearing locally stored scribe",error:t}),console.error("Error clearing locally stored scribe:",t),!1}},ON=async()=>{try{const t=await ti();return t&&(t!=null&&t.scribeId)?t.scribeId:null}catch(t){return Kt({title:"Error getting local scribe ID",error:t}),console.error("Error getting local scribe ID:",t),null}},fy={actionsWithScreenshotCount:0,actionsQueue:[],createWithId:!1,currentTab:null,currentHost:null,currentUrl:null,endedWithCutoff:!1,recordedTabs:[],scribeId:"",startTimestamp:void 0,startedBy:void 0,lastUnpauseTimestamp:void 0,lastPauseTimestamp:void 0,pauseRanges:[],entryPoint:void 0,isScribeEditMode:!1,isTranscriberReady:!1,deletedActionIds:[],isTranscribing:!1,isTranscribingBeforePause:!1},TN=re({name:"recordingState",initialState:fy,reducers:{removeFailedScreenshotsAndTabIdFromActions:t=>{t.actionsQueue=t.actionsQueue.map(e=>{const r={...e};return delete r.failed_ss,delete r.tabId,r.screenshot_upload_status===Ct.UPLOAD_STATUS.WAITING&&(r.screenshot_upload_status=Ct.UPLOAD_STATUS.ERROR),r})},coalesceContiguousTabSwitches:t=>t.actionsQueue.filter((e,r)=>{if(r===t.actionsQueue.length-1)return!0;const i=t.actionsQueue[r+1];return![e,i].every(a=>fa(a))}),removeMaybeOneTrailingTabSwitchAction:t=>{t.actionsQueue=fa(t.actionsQueue.at(-1))?t.actionsQueue.slice(0,-1):t.actionsQueue},reduceKeyActions:(t,e)=>{t.actionsQueue=wm(t.actionsQueue,e.payload.os,t.transcribedAudio,e.payload.transcribeAudio,!0),wo(t.actionsQueue)},mergeWithActionByTempId:(t,e)=>{t.actionsQueue=S2(t.actionsQueue,e.payload.tempId,e.payload.partialAction),wo(t.actionsQueue)},appendNewAction:(t,e)=>{const{newActionsQueue:r,newActionsWithScreenshotCount:i,transcribedAudio:a}=w2(t.actionsQueue,t.currentUrl,t.actionsWithScreenshotCount,t.startTimestamp,e.payload,t.lastUnpauseTimestamp,t.transcribedAudio||{});if(t.actionsQueue=r,t.actionsWithScreenshotCount=i,t.transcribedAudio=a,t.transcribedAudio&&Object.keys(t.transcribedAudio).length>0){const{actionsQueue:s,transcribedAudio:c}=pa(t.actionsQueue,t.transcribedAudio,void 0);t.actionsQueue=s,t.transcribedAudio=c}wo(t.actionsQueue)},batchAppendActions:(t,e)=>{t.actionsQueue=e.payload},updateAction:(t,e)=>{const{index:r,...i}=e.payload;t.actionsQueue[r]={...t.actionsQueue[r],...i}},appendTranscribedAudio:(t,e)=>{const{actionsQueue:r,transcribedAudio:i}=pa(t.actionsQueue,t.transcribedAudio||{},e.payload);t.actionsQueue=r,t.transcribedAudio=i,wo(r)},setStartedBy:(t,e)=>{t.startedBy=e.payload},setScribeId:(t,e)=>{t.scribeId=e.payload},setCreateWithId:(t,e)=>{t.createWithId=e.payload},setLastUnpauseTimestamp:(t,e)=>{t.lastUnpauseTimestamp=e.payload},setLastPauseTimestamp:(t,e)=>{var a;const r=typeof e.payload=="number"?e.payload:((a=e.payload)==null?void 0:a.valueOf())||Date.now();t.lastPauseTimestamp=r,t.pauseRanges||(t.pauseRanges=[]);const i={pauseTimestamp:r};t.pauseRanges.push(i)},editCurrentTabInformation:(t,e)=>{const{tab:r,host:i,url:a}=e.payload;t.currentTab=r||t.currentTab,t.currentHost=i||t.currentHost,t.currentUrl=a||t.currentUrl},setEndedWithCutoff:(t,e)=>{t.endedWithCutoff=e.payload},resetRecordingState:(t,e)=>({...fy,...e.payload}),addNewTabToRecordedTabs:(t,e)=>{var r;(r=t.recordedTabs)!=null&&r.length&&t.recordedTabs.length>0?t.recordedTabs=[...t.recordedTabs,e.payload]:t.recordedTabs=[e.payload]},setAudioError:(t,e)=>{t.audioError=e.payload},setIsTranscriberReady:(t,e)=>{t.isTranscriberReady=e.payload},setEntryPoint:(t,e)=>{t.entryPoint=e.payload},setIsScribeEditMode:(t,e)=>{t.isScribeEditMode=e.payload},addDeletedActionId:(t,e)=>{t.deletedActionIds||(t.deletedActionIds=[]),t.deletedActionIds.includes(e.payload)||t.deletedActionIds.push(e.payload)},removeDeletedActionId:(t,e)=>{t.deletedActionIds&&(t.deletedActionIds=t.deletedActionIds.filter(r=>r!==e.payload))},setDeletedActionIds:(t,e)=>{t.deletedActionIds=e.payload},setIsTranscribing:(t,e)=>{if(t.isTranscribing=e.payload,e.payload){const r=t.lastUnpauseTimestamp||Date.now();if(t.pauseRanges&&t.pauseRanges.length>0){const i=t.pauseRanges[t.pauseRanges.length-1];i&&!i.unpauseTimestamp&&(i.unpauseTimestamp=r)}}},setIsTranscribingBeforePause:(t,e)=>{t.isTranscribingBeforePause=e.payload}},extraReducers:t=>{t.addCase(ve,(e,r)=>{Object.assign(e,r.payload.recordingState)})}}),AN=TN.reducer,Pn=_t(t=>t.recordingState,t=>t),dy=_t(t=>{var e;return(e=t==null?void 0:t.recordingState)!=null&&e.actionsQueue?t.recordingState.actionsQueue.filter(r=>{var i;return((i=r==null?void 0:r.screenshot_upload_status)==null?void 0:i.toUpperCase())===Ct.UPLOAD_STATUS.WAITING}).length:0},t=>t),CN=t=>t.recordingState.transcribedAudio,xN=t=>t.recordingState.isScribeEditMode,kN={taskId:""},NN=re({name:"task",initialState:kN,reducers:{setTaskId:(t,e)=>{t.taskId=e.payload}}}),RN=NN.reducer,PN=_t(t=>({taskId:t.task.taskId}),t=>t);var hy=(t=>(t.NONE="none",t.SIDEKICK="sidekick_capture",t.CLASSIC="classic",t))(hy||{});const gy=(t,e)=>{if(e){const r=typeof chrome<"u"&&"sidePanel"in chrome,i=zs(qs);return r&&i?"sidekick_capture":"classic"}switch(t){case"sidepanel":return"sidekick_capture";case"floating-button":return"classic";case"none":return"none";default:return"sidekick_capture"}};var my=(t=>(t.CurrentTabChanged="currentTabChanged",t.UpdateSidepanelUrl="update-sidepanel-url",t.UpdateLiveIndex="update-live-index",t.SetGuideMeStepNotFound="setGuideMeStepNotFound",t.CancelStepRecapture="cancelStepRecapture",t.CompleteStepRecapture="completeStepRecapture",t.Action="action",t.StartRecording="startRecording",t.ExtensionStateUpdate="extensionStateUpdate",t.EndRecording="endRecording",t.SendDomtoSidepanel="send-dom-to-sidepanel",t.SetSidepanelClosed="sidepanelClosed",t.GetSidepanelActive="getSidepanelActive",t.SendScreenshotCoordinates="sendScreenshotCoordinates",t.SavedCopilotScribe="savedCopilotScribe",t.PauseCopilotFromBrowser="pauseCopilotFromBrowser",t.StopCopilotFromBrowser="stopCopilotFromBrowser",t.NetworkConnectionStatus="networkConnectionStatus",t.Recapture="recapture",t.PreviousLiveStep="guideMePreviousStepToSidepanel",t.GuideMeOtherElementClicked="guideMeOtherElementClicked",t.GuideMeCaptureFreshPageScreenshot="guideMeCaptureFreshPageScreenshot",t))(my||{}),tr=(t=>(t.RouteConfig="sidePanelRouteConfig",t.FrameContentUrl="frameContentUrl",t))(tr||{});class _y{constructor(e={}){Xr(this,"config");Xr(this,"requestInterceptors");Xr(this,"responseInterceptors");this.config={baseURL:"",headers:{},timeout:3e4,...e},this.requestInterceptors=[],this.responseInterceptors=[]}get interceptors(){return{request:{use:(e,r)=>{this.requestInterceptors.push({onFulfilled:e,onRejected:r})}},response:{use:(e,r)=>{this.responseInterceptors.push({onFulfilled:e,onRejected:r})}}}}async request(e){var h;const r={...e};let i={...this.config,...e};for(const y of this.requestInterceptors)if(y.onFulfilled)try{i=await y.onFulfilled(i)}catch(E){if(y.onRejected)return y.onRejected(E);throw E}const a=i.baseURL||"",s=i.url||"";let c;if(s.startsWith("http"))c=s;else{const y=a.replace(/\/+$/,""),E=s.replace(/^\/+/,"");c=y&&E?`${y}/${E}`:y+E}const u={...this.config.headers,...i.headers};if(i.transformRequest){const y=Array.isArray(i.transformRequest)?i.transformRequest:[i.transformRequest];for(const E of y)i.data=E(i.data,u)}const p={method:((h=i.method)==null?void 0:h.toUpperCase())||"GET",headers:u};if(i.data&&(i.data instanceof FormData||i.data instanceof Blob||i.data instanceof ArrayBuffer?p.body=i.data:typeof i.data=="object"?(p.body=JSON.stringify(i.data),(!p.headers||!("Content-Type"in p.headers))&&(p.headers={...p.headers,"Content-Type":"application/json"})):p.body=i.data),i.params){const y=new URLSearchParams;Object.keys(i.params).forEach(x=>{i.params[x]!==void 0&&i.params[x]!==null&&y.append(x,i.params[x])});const E=y.toString();if(E){const x=c.includes("?")?"&":"?";c=`${c}${x}${E}`}}let m,g;(i.timeout||this.config.timeout)&&(m=new AbortController,p.signal=m==null?void 0:m.signal,g=setTimeout(()=>{m.abort()},i.timeout||this.config.timeout));try{const y=await fetch(c,p);g&&clearTimeout(g);let E;const x=y.headers.get("content-type");if(x&&x.includes("application/json"))try{E=await y.json()}catch{E=await y.text()}else E=await y.text();const D={};y.headers.forEach((w,T)=>{D[T]=w});const U={data:E,status:y.status,statusText:y.statusText,headers:D,config:i,request:{responseURL:y.url}};if(y.ok){let w=U;for(const T of this.responseInterceptors)if(T.onFulfilled)try{w=await T.onFulfilled(w)}catch(P){if(T.onRejected)return T.onRejected(P);throw P}return w}const j=new Error(`Request failed with status ${y.status}`);j.response=U,j.config=i,j.request={responseURL:y.url};let R=j;for(const w of this.responseInterceptors)if(w.onRejected)try{return await w.onRejected(R)}catch(T){R=T}throw R}catch(y){if(g&&clearTimeout(g),y.name==="AbortError"){const x=new Error(`Timeout of ${i.timeout}ms exceeded`);throw x.code="ECONNABORTED",x.config=r,x.request={responseURL:c},x}if(y instanceof TypeError&&y.message.includes("fetch")){const x=new Error("Network Error");throw x.code="NETWORK_ERROR",x.config=r,x.request={responseURL:c},x}if(!y.config){const x=y;x.config=r,x.request={responseURL:c}}let E=y;for(const x of this.responseInterceptors)if(x.onRejected)try{return await x.onRejected(E)}catch(D){E=D}throw E}}get(e,r={}){return this.request({...r,method:"GET",url:e})}post(e,r,i={}){return this.request({...i,method:"POST",url:e,data:r})}put(e,r,i={}){return this.request({...i,method:"PUT",url:e,data:r})}patch(e,r,i={}){return this.request({...i,method:"PATCH",url:e,data:r})}delete(e,r={}){return this.request({...r,method:"DELETE",url:e})}head(e,r={}){return this.request({...r,method:"HEAD",url:e})}options(e,r={}){return this.request({...r,method:"OPTIONS",url:e})}}function DN(t){return Ce.request(t)}const Ce=new _y,Or=DN;Or.request=Ce.request.bind(Ce),Or.get=Ce.get.bind(Ce),Or.post=Ce.post.bind(Ce),Or.put=Ce.put.bind(Ce),Or.patch=Ce.patch.bind(Ce),Or.delete=Ce.delete.bind(Ce),Or.head=Ce.head.bind(Ce),Or.options=Ce.options.bind(Ce),Or.interceptors=Ce.interceptors,Or.create=(t={})=>{const e=new _y(t);function r(a){return e.request(a)}const i=r;return i.request=e.request.bind(e),i.get=e.get.bind(e),i.post=e.post.bind(e),i.put=e.put.bind(e),i.patch=e.patch.bind(e),i.delete=e.delete.bind(e),i.head=e.head.bind(e),i.options=e.options.bind(e),i.interceptors=e.interceptors,i};const jN=async t=>chrome.storage.local.set({[tr.RouteConfig]:t}),So=async(t,e)=>{var a,s,c,u,p,m,g;const r=lk((e==null?void 0:e.queryParams)||{}),i={path:t,queryParams:(e==null?void 0:e.queryParams)||{},url:`${t}${r?`?${r}`:""}`,frontendUrl:e==null?void 0:e.frontendUrl};t===Xe.Home?(a=chrome==null?void 0:chrome.sidePanel)==null||a.setOptions({path:"src/sidepanel/sidepanel-home.html"}):t===Xe.Options?(s=chrome==null?void 0:chrome.sidePanel)==null||s.setOptions({path:"src/scripts/options/sidepanel-options.html"}):t===Xe.RecommendedScribes?(c=chrome==null?void 0:chrome.sidePanel)==null||c.setOptions({path:"src/sidepanel/sidepanel-recommended-scribes.html"}):t===Xe.RecommendedScribesOnboarding?(u=chrome==null?void 0:chrome.sidePanel)==null||u.setOptions({path:"src/sidepanel/sidepanel-autocapture-onboarding.html"}):t===Xe.RecommendedScribesSuggestedPreview?(p=chrome==null?void 0:chrome.sidePanel)==null||p.setOptions({path:"src/sidepanel/sidepanel-suggested-scribe-preview.html"}):t===Xe.RecommendedScribesRejectionFeedback?(m=chrome==null?void 0:chrome.sidePanel)==null||m.setOptions({path:"src/sidepanel/sidepanel-rejection-feedback.html"}):(g=chrome==null?void 0:chrome.sidePanel)==null||g.setOptions({path:"src/sidepanel/sidepanel.html"}),jN(i)},yy=({tabId:t,windowId:e})=>{try{e?chrome.sidePanel.open({windowId:e}):t?chrome.sidePanel.open({tabId:t}):ce("side_panel_not_opened",{reason:"No target tab nor window ID provided",function:"openChromeSidePanel"})}catch(r){console.error("Error opening sidepanel:",r),ce("side_panel_not_opened",{reason:r.message||"Unknown error",function:"openChromeSidePanel",error:r})}finally{const{showSidepanelFob:r}=Jn(ut.getState());r&&chrome.tabs.query({},i=>{i.forEach(a=>{da(a,{messageType:"sidepanelOpened"})})})}},UN=async(t,e,r)=>{So(e,r),yy({tabId:t})},LN=async(t,e,r)=>{So(e,r),yy({windowId:t})},BN=async(t,e)=>{So(t,e)},Sa={isRecording:!1},vy=async()=>{var r,i,a,s;const t=await chrome.storage.local.get([tr.RouteConfig]);if(!t)return null;const e=((r=t[tr.RouteConfig])==null?void 0:r.url)==="undefined"||((i=t[tr.RouteConfig])==null?void 0:i.url)==="null"?"":(a=t[tr.RouteConfig])==null?void 0:a.url;return Sa.isRecording=((s=t[tr.RouteConfig])==null?void 0:s.path)===Xe.Recorder,t[tr.RouteConfig]?{...t[tr.RouteConfig],url:e}:null},by=async()=>{var t;return((t=await chrome.storage.local.get([tr.FrameContentUrl]))==null?void 0:t[tr.FrameContentUrl])||null},MN=async t=>{await chrome.storage.local.set({[tr.FrameContentUrl]:t})},FN=async()=>chrome.storage.local.remove([tr.RouteConfig]),wy=()=>document.getElementById("scribe-sidepanel-iframe"),Sy=t=>{const e=wy(),r=Qg(t,"url")??"";t.includes(Xe.Assistant)&&r.startsWith("chrome-extension://")||e&&(e.src=t)},qN=t=>{if(t.newValue){const e=t.newValue;Sy(`${e.frontendUrl??de.FRONTEND_URL}/${e.url}`),Sa.isRecording=e.path===Xe.Recorder}else Sa.isRecording=!1},zN=async()=>{const[t,e]=await Promise.all([vy(),by()]);return(e==null?void 0:e.includes(Xe.Assistant))&&(t==null?void 0:t.path)===Xe.Assistant&&Kg(e)===Kg(t==null?void 0:t.url)},VN=async({sessionId:t,requestId:e,pathPrefix:r,name:i})=>{try{const a=await un.post("/signed_urls/",{name:`${e}.jpeg`,path_prefix:r}),{upload_url:s,download_url:c}=a.data;return{uploadUrl:s,downloadUrl:c}}catch(a){return console.error(`Error fetching signed URL for ${i} screenshot:`,{error:a,sessionId:t,requestId:e}),{uploadUrl:"",downloadUrl:""}}},$N=async({screenshotBlob:t,uploadUrl:e})=>{try{await Or({url:e,method:"PUT",data:t,headers:{"Content-Type":"image/jpeg"},timeout:6e4})}catch(r){console.error("Error uploading copilot screenshot to S3",{error:r,uploadUrl:e})}},WN=t=>{const e=atob(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return new Blob([i],{type:r})};let Ey=null;function Iy(){return Ey}function YN(t){Ey=t}const HN=200,GN=4e4;async function Dn({isLocalScribe:t=!1}={}){let e;t?e=await ON()||"":e=Pn(ut.getState()).scribeId;const{userData:r}=Hn(ut.getState()),i=r&&r.active_organization&&r.active_organization.smart_privacy_screen_enabled;return{scribeId:e||"",privacyScreen:i}}const Oy=()=>{var i;const t=ut.getState(),e=wn(t),r=(i=Jn(t))==null?void 0:i.recordingControlsPreference;if(e!=null&&e.deprecateCaptureOptions){const a=typeof(chrome==null?void 0:chrome.sidePanel)<"u",s=zs(qs);return a&&s}return r==="sidepanel"||!r},QN=t=>{const e=ut.getState(),{liveBlurEnabled:r,liveBlurSettings:i}=lm(e);da(t,{messageType:"changeLiveBlurSettings",liveBlurEnabled:r,liveBlurSettings:i})},Ty=t=>(ut.dispatch(Uk(t)),xi().then(e=>{e&&QN(e)}),!0),KN=()=>new Promise((t,e)=>{var c,u;ut.dispatch(lg(!0));const r=ut.getState(),i=!!((c=wn(r))!=null&&c.deprecateCaptureOptions);gy((u=Jn(r))==null?void 0:u.recordingControlsPreference,i)!==hy.SIDEKICK&&ut.dispatch(ug(!0));let a=null;const s=setInterval(async()=>{const p=await Om(),m=dy(ut.getState());(p===0||p===null)&&m===0&&(clearInterval(s),a&&clearTimeout(a),t(!0))},500);a=setTimeout(()=>{clearInterval(s),t(!1)},GN)});function ZN(){const t=Sm();if(!t)return;let e=null;try{e=t.transaction([Xn]).objectStore(Xn).openCursor()}catch(r){console.warn(`trackFailedScreenshotUploads: couldn't create a transaction. Reason: ${r}`)}e!==null&&(e.onsuccess=async()=>{const r=e.result;if(r){const{scribeId:i,privacyScreen:a}=await Dn(),s={timestamp:r.value.timestamp,scribeId:i,privacyScreen:a};ce("screenshot_upload_failed",{screenshot_data:s,error:r.value.error,reason:"scribe_finished_recording"}),r.continue()}})}const JN=t=>{t&&(chrome.tabs.query({},e=>{e.forEach(r=>{var i;(i=r.url)!=null&&i.includes("workspace#tasks")&&r.id&&chrome.tabs.sendMessage(r.id,{messageType:"stopTaskRecording"})})}),ut.dispatch(dl(null)))},Ea=async({isCopilot:t=!1,goHome:e=!1,keepIndexedDBData:r=!1}={})=>{var u,p;const i=Oy(),a=hl(ut.getState());ut.dispatch(lg(!1)),ut.dispatch(pg(!1)),r&&(Im(),cy(),A2());const s=Pn(ut.getState()),{isStepRecapture:c}=ro(ut.getState());c&&chrome.runtime.sendMessage({messageType:"cancelStepRecapture",data:{liveTranscriptions:i,audioRecordingEnabled:a,isStepRecapture:c}}),ce("emit_endRecording",{recordingControls:(u=Jn(ut.getState()))==null?void 0:u.recordingControlsPreference,liveTranscriptions:i}),(p=s.recordedTabs)==null||p.forEach(m=>{try{chrome.tabs.sendMessage(m,{messageType:"endRecording",data:{liveTranscriptions:i,audioRecordingEnabled:a,isStepRecapture:c}})}catch{}}),!c&&!t&&!e&&chrome.runtime.sendMessage({messageType:"endRecording",data:{liveTranscriptions:i,audioRecordingEnabled:a,isStepRecapture:c}}),Ty(!1),ut.dispatch(oh({currentTab:null,startTimestamp:null})),ut.dispatch(no(wr.IDLE)),ut.dispatch(cm(!1)),ut.dispatch(am()),ut.dispatch(dl("")),e&&So(Xe.Home)},XN=async t=>{const e=ut.getState(),r=Pn(e).actionsQueue.filter(a=>a.additional_screenshot_data).map(a=>({action_timestamp:a.timestamp,...a.additional_screenshot_data}));if(r.length===0)return;const i=await un.post("/signed_urls/",{name:`${t}.json`,file_type:"json",path_prefix:"ml_metadata/post_navigation_screenshots"});return await vo(i.data.upload_url,JSON.stringify(r),"application/json"),{metadata_download_url:i.data.download_url,metadata_content:r}},Ay=t=>{t.isCopilot&&chrome.runtime.sendMessage({messageType:"savedCopilotScribe"}),Ea({isCopilot:t.isCopilot,goHome:t.goHome,keepIndexedDBData:!t.wasSuccessful}),JN(t.taskId)},Ia=async({isCopilot:t=!1,copilotPrompt:e="",isLocalScribe:r=!1,isLocalImageRetry:i=!1,deletedActionIds:a=[]}={})=>{var Tt,Mt,xt,yt;const{endedWithCutoff:s,deletedActionIds:c}=Pn(ut.getState()),u=c||a||[],{networkOrServerError:p}=um(ut.getState());ut.dispatch(no(wr.ENDING_RECORDING));const m=await Om(),g=dy(ut.getState());(m!==0||g>0)&&await KN(),ZN();const h=ut.getState(),y=!!((Tt=wn(h))!=null&&Tt.deprecateCaptureOptions),E=gy((Mt=Jn(h))==null?void 0:Mt.recordingControlsPreference,y);ma("stopped_recording",{recorder:"extension",captureSetting:E,endedWithCutoff:s,networkOrServerError:p,isLocalScribe:r,isLocalImageRetry:i,deletedActionIds:u});const{defaultName:x,os:D}=Lu(ut.getState()),{tabId:U,recordBeforeActionId:j,recordAfterActionId:R}=ro(ut.getState());ut.dispatch(MO()),ut.dispatch(FO()),ut.dispatch(qO()),ut.dispatch(zO({os:D}));const{scribeId:w,createWithId:T,actionsQueue:P,endedWithCutoff:F,entryPoint:V}=Pn(ut.getState()),Y=gg(ut.getState()),b=P.map(({target_element:jt,tempId:ze,..._e})=>({..._e,id:ze||hs()}));if(!Y)return!1;ut.dispatch(pg(!0)),ce("recording_stopped",{actionsQueue:P,endedWithCutoff:s,scribeId:w,tabId:U,recordBeforeActionId:j,recordAfterActionId:R,networkOrServerError:p,recordingControls:(xt=Jn(ut.getState()))==null?void 0:xt.recordingControlsPreference,deletedActionIds:u});const{taskId:G}=PN(ut.getState()),{userData:et}=Hn(ut.getState()),ct=(yt=et==null?void 0:et.active_organization)==null?void 0:yt.id;if(!ct)return zh({level:"info",category:"recording",message:"No org id found during complete capture",data:{isCopilot:t,copilotPrompt:e,isLocalScribe:r,isLocalImageRetry:i,captureSetting:E,deletedActionIds:u}}),ce("complete_capture_failure_no_org_id",{isCopilot:t,copilotPrompt:e,isLocalScribe:r,isLocalImageRetry:i,captureSetting:E,deletedActionIds:u}),Ay({isCopilot:t,taskId:G,goHome:!0,wasSuccessful:!1}),!1;let Ot=!0;return await un.post("/scribe_file/",{id:w,organization_id:ct,name:e||x,actions:b,recorder_type:"web",insert_before_action:j,create_with_id:T,recorder_os:vg(),task_id:G,entry_point:V,created_with_copilot:t,deleted_action_ids:u,capture_type:Fu.ManualCapture}).then(async jt=>{const ze=R;if(!jt.status||!(jt.status>=200&&jt.status<300))ce("scribe_created_failure",{error:jt}),await ly(),ce("scribe_created_failure-saving-to-storage.local",{error:jt}),Ot=!1;else{let _e;try{_e=await XN(jt.data.id)}catch{}try{const Q=Iy();if(Q){const st=await Q.getCapturesForScribe(jt.data.id);if(st&&st.length>0){const dt={scribeId:jt.data.id,scribeName:jt.data.name,screenshotCount:st.length,screenshots:st.map(ht=>({domain:ht.domain,tabId:ht.tabId,captureTime:ht.captureTime,stage:ht.stage,url:ht.url,s3DownloadUrl:ht.s3DownloadUrl||null,s3InternalUrl:ht.s3InternalUrl||null}))};ce("dom_settlement_capture_completed",dt)}}}catch{}ce("scribe_created_success",{scribeId:jt.data.id,scribeName:jt.data.name,scribeUrl:go(jt.data.id,jt.data.name),isLocalScribe:r,isLocalImageRetry:i,additionalScreenshotMetadata:_e?{download_url:_e.metadata_download_url,screenshot_count:_e.metadata_content.length}:null,deletedActionIds:u}),py();const q=F||jt.data.ended_with_cutoff,{isStepRecapture:Z}=ro(ut.getState());if(Z)return chrome.runtime.sendMessage({messageType:"completeStepRecapture"}),!0;if(w!==""&&U!==""){const Q=typeof U=="string"?parseInt(U,10):U;ut.dispatch(sm("")),chrome.tabs.get(Q,st=>{var dt;if(!((dt=st==null?void 0:st.url)!=null&&dt.includes(de.FRONTEND_URL))||chrome.runtime.lastError)chrome.tabs.create({url:go(jt.data.id,jt.data.name)});else{const ht=io(st.url);ht==null||ht.searchParams.set("editmode","true"),q&&(ht==null||ht.searchParams.set("cutoff","true"));let k=ht==null?void 0:ht.toString();ze&&(k+=`#${ze.split("-")[0]}`),chrome.tabs.reload(Q).then(()=>chrome.tabs.update(Q,{url:k})).then(()=>chrome.tabs.get(Q)).then(I=>chrome.tabs.highlight({tabs:[I.index]})).catch(I=>console.error(I))}}),q&&ut.dispatch(ua(!1))}else q?(chrome.tabs.create({url:Ok(jt.data.id,jt.data.name)}),ut.dispatch(ua(!1))):chrome.tabs.create({url:go(jt.data.id,jt.data.name)})}}).catch(async jt=>{Kt({title:"Error creating scribe",err:jt}),await ly(),ce("scribe_created_failure-saving-to-storage.local",{error:jt}),Ot=!1}).finally(()=>{Ay({isCopilot:t,taskId:G,goHome:!1,wasSuccessful:Ot})}),Ot};async function tR(){return!!wn(ut.getState()).theStepLimitDoesNotExist}const Cy=async t=>{const e=Pn(ut.getState());!await tR()&&e.actionsWithScreenshotCount>=HN&&(ut.dispatch(ua(!0)),ut.dispatch(RO(!0)),Ia()),ut.dispatch(VO(t));const{isStepRecapture:r}=ro(ut.getState());r&&Ia()},eR=t=>{Cy({kind:"instruction",description:`Navigate to ${t.url}`,url:t.url,domain:(t.domain?t.domain:yl(t.url))||"",tabId:t.tabId,tempId:hs()})},rR=()=>{const t=new Date,e=new Date(t.getFullYear()+1,t.getMonth(),t.getDate());return Math.floor(e/1e3)},Eo=async t=>{const e=await chrome.cookies.getAll({name:t,path:aa,domain:na});return e.length>0?e[0].value:void 0},zl=async(t,e)=>{var r;return((r=await chrome.cookies.set({name:t,path:aa,domain:na,expirationDate:rR(),value:e,url:de.FRONTEND_URL,secure:hk,sameSite:"no_restriction"}))==null?void 0:r.value)||null},nR=async(t,e)=>await chrome.permissions.contains({permissions:["cookies"],origins:["<all_urls>"]})?await Eo(t)||await zl(t,e):null,Vl=async()=>({token:await Eo(ia),refresh:await Eo(sa),customUrls:await Eo(oa)}),$l=async({token:t,refresh:e})=>{await zl(ia,t),e&&await zl(sa,e)},iR=async()=>{const t=await Eo(oa);nm(t)},oR="scribe-extension",sR="2.63.0",aR={name:"Scribe",email:"team@scribehow.com",url:"https://scribehow.com"},cR="Document any workflow automatically. Share beautiful step-by-step guides in seconds. Save each team member 35 hours/month.",uR="module",lR={lint:"tsc && eslint --fix src/",build:"tsc && NODE_ENV=production BROWSER=chrome sh -c 'vite build -- --no-crxid && rimraf build/**/*.map && yarn logo-cleanup'","build:prod-static":"tsc && NODE_ENV=production BROWSER=chrome sh -c 'vite build && rimraf build/**/*.map && yarn logo-cleanup'","build:staging":"tsc && NODE_ENV=staging BROWSER=chrome sh -c 'vite build && rimraf staging-build/**/*.map && yarn logo-cleanup'","build:hosteddev":"rm -rf dev-build && tsc && NODE_ENV=hosteddevelop BROWSER=chrome sh -c 'vite build && rimraf dev-build/**/*.map && yarn logo-cleanup'",dev:"TAILWIND_MODE=dynamic NODE_ENV=development BROWSER=chrome vite","dev:fast":"TAILWIND_MODE=fast NODE_ENV=development BROWSER=chrome vite","test:watch":"jest --watch",test:"jest --maxWorkers=2 --silent","test:cov":"jest --coverage --maxWorkers=2 --silent ","build-edge":"rm -rf build-edge && tsc && NODE_ENV=production BROWSER=edge sh -c 'vite build -- --no-crxid && rimraf build-edge/**/*.map && yarn logo-cleanup'","build-edge:prod-static":"rm -rf build-edge && tsc && NODE_ENV=production BROWSER=edge sh -c 'vite build && rimraf build-edge/**/*.map && yarn logo-cleanup'","build-edge:staging":"rm -rf staging-build-edge && tsc && NODE_ENV=staging BROWSER=edge sh -c 'vite build && rimraf staging-build-edge/**/*.map && yarn logo-cleanup'","build-edge:hosteddev":"rm -rf dev-build-edge && tsc && NODE_ENV=hosteddevelop BROWSER=edge sh -c 'vite build && rimraf dev-build-edge/**/*.map && yarn logo-cleanup'",preview:"vite preview",cleanup:"rm -rf dist build build-edge staging-build staging-build-edge dev-build dev-build-edge","make-release-candidate":"tsx scripts/make-release-candidate.ts","make-hotfix":"tsx scripts/make-release-candidate.ts --hotfix","generate-changelog":"tsx ./scripts/generate-changelog.ts",storybook:"NODE_ENV=development BROWSER=chrome storybook dev -p 9009","logo-cleanup":"tsx scripts/logo-cleanup.ts"},pR={"@crxjs/vite-plugin":"2.0.0-beta.31","@fortawesome/fontawesome-common-types":"^7.1.0","@fortawesome/fontawesome-svg-core":"^7.1.0","@fortawesome/pro-duotone-svg-icons":"^7.1.0","@fortawesome/pro-regular-svg-icons":"^7.1.0","@fortawesome/pro-solid-svg-icons":"^7.1.0","@fortawesome/react-fontawesome":"^3.1.0","@headlessui/react":"1.5.0","@medv/finder":"^3.1.0","@popperjs/core":"2.11.8","@reduxjs/toolkit":"^2.0.1","@sentry/browser":"7.120.3","@sentry/tracing":"7.120.3","@sentry/vite-plugin":"^0.4.0","@storybook/addon-actions":"^8.4.7","@storybook/addon-backgrounds":"^8.4.7","@storybook/addon-docs":"^8.4.7","@storybook/addon-essentials":"^8.4.7","@storybook/addon-interactions":"^8.4.7","@storybook/addon-links":"^8.4.7","@storybook/react":"^8.4.7","@storybook/react-vite":"^8.4.7","@storybook/test":"^8.4.7","@tailwindcss/container-queries":"^0.1.1","@tailwindcss/forms":"^0.5.3","@tailwindcss/typography":"^0.5.2",assemblyai:"^4.12.2",classnames:"2.3.2",cmdk:"^1.1.1","copy-to-clipboard":"^3.3.1","css-selector-generator":"^3.6.7","date-fns":"^4.1.0","deep-object-diff":"^1.1.9",dompurify:"^3.2.4","eslint-config-scribe":"*","eslint-plugin-scribe-extension":"*",flagsmith:"^3.21.0","get-xpath":"^3.1.0","html-react-parser":"^5.2.1","html2canvas-with-self-identification":"*",lodash:"^4.17.21",lru_map:"^0.4.1",process:"^0.11.10","prop-types":"15.7.2","re-resizable":"^6.9.9",react:"^18.3.0","react-dom":"^18.3.0","react-linkify":"^1.0.0-alpha","react-popper":"2.3.0","react-portal":"4.3.0","react-redux":"^9.0.4","react-transition-group":"^4.4.5",redux:"^4.1.2","redux-logger":"^3.0.6","redux-persist":"^6.0.0","redux-persist-webextension-storage":"^1.0.2","scribe-messaging":"*","scribe-networking":"*","scribe-web-shared":"*",showdown:"^2.1.0",slugid:"^3.1.0",slugify:"^1.6.3",storybook:"^8.4.7","stream-browserify":"^3.0.0","stylus-ui":"*","tailwindcss-animate":"^1.0.7","tailwindcss-animation-delay":"^2.0.2","tld-extract":"^2.1.0",uuid:"^8.3.2","vite-plugin-top-level-await":"^1.4.4",xml2js:"^0.6.2"},fR={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.18.9","@babel/preset-env":"7.21.4","@babel/preset-typescript":"7.21.4","@testing-library/dom":"^10.4.0","@testing-library/jest-dom":"^6.6.2","@testing-library/react":"^16.0.1","@testing-library/user-event":"^14.5.2","@types/chrome":"^0.0.306","@types/jest":"^29.5.13","@types/lodash":"^4.14.186","@types/mime":"3.0.4","@types/node":"^16.11.11","@types/react":"^18.3.0","@types/react-dom":"^18.3.0","@types/react-portal":"4.0.7","@types/react-redux":"^7.1.33","@types/react-transition-group":"^4.4.6","@types/showdown":"^2.0.6","@types/uuid":"^8.3.3","@types/xml2js":"^0.4.14","@vitejs/plugin-react":"^4.2.1",autoprefixer:"^10.4.13","babel-loader":"^8.3.0",concurrently:"^7.6.0",eslint:"^9.15.0","eslint-plugin-only-warn":"^1.1.0",jest:"29.7.0","jest-environment-jsdom":"28.1.3","path-browserify":"^1.0.1",postcss:"^8.4.19","postcss-cli":"^10.1.0","postcss-import":"^15.0.1","postcss-rem-to-pixel":"^4.1.2","prettier-plugin-tailwindcss":"^0.6.9","resize-observer-polyfill":"^1.5.1",tailwindcss:"^3.4.17","ts-jest":"^29.2.5",tsx:"^4.19.1",typescript:"^5.5.2",vite:"https://registry.npmjs.org/vite/-/vite-4.5.5.tgz","vite-plugin-svgr":"^2.4.0","vite-tsconfig-paths":"^4.0.5"},Wl={name:oR,private:!0,version:sR,author:aR,description:cR,type:uR,scripts:lR,dependencies:pR,devDependencies:fR},Yl=({baseURL:t,baseURLKey:e,getAuthToken:r,forbiddenCallback:i,setAuthToken:a})=>{const s=Or.create({baseURL:t,headers:{"X-Product":"extension","X-Product-Version":Wl.version},timeout:1e5});let c=null;return s.interceptors.request.use(async u=>{if(r){const p=await r(),{token:m}=p;m&&u.headers&&(u.headers.Authorization=`Bearer ${m}`),nm(p.customUrls),u.baseURL=e?de[e]:de.BACKEND_BASE_URL}return u}),s.interceptors.response.use(u=>u,async u=>{var p;if(((p=u==null?void 0:u.response)==null?void 0:p.status)===401)try{const{refresh:m}=await r();if(m)return c||(c=fetch(`${t}/tokens/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:m})}).then(async g=>{if(!g.ok)throw new Error(`Refresh failed with status ${g.status}`);const h=await g.json(),{token:y,refresh:E}=h;return a({token:y,refresh:E}),y}).catch(g=>{throw Kt(g,{tags:{component:"backgroundApi",operation:"token_refresh"},extra:{originalError:u,refreshToken:m?"present":"missing"}}),console.error("Token refresh failed:",g),i==null||i(),g}).finally(()=>{c=null})),c.then(g=>(u.config.headers||(u.config.headers={}),u.config.headers.Authorization=`Bearer ${g}`,s.request(u.config))).catch(()=>Promise.reject(u));i==null||i()}catch(m){Kt(m,{tags:{component:"backgroundApi",operation:"get_auth_token"},extra:{originalError:u}}),console.error("Error getting auth token:",m),i==null||i()}return Promise.reject(u)}),s},Hl=(t,e,r="GET",i,a,s={},c=!0)=>{const u={"X-Product":"extension","X-Product-Version":Wl.version,...s};r!=="GET"&&(u["Content-Type"]="application/json");const p={method:r,url:e,headers:u,...i&&{data:i},...a&&{params:a},...!c&&{transformRequest:(m,g)=>(delete g.Authorization,m)}};return t(p).then(m=>({ok:!0,data:m.data,status:m.status})).catch(m=>{var g,h;return{ok:!1,data:(g=m==null?void 0:m.response)==null?void 0:g.data,status:(h=m==null?void 0:m.response)==null?void 0:h.status}})},un=Yl({baseURL:de.BACKEND_BASE_URL,setAuthToken:async t=>{await $l(t)},forbiddenCallback:()=>{ut.dispatch(Ru(null)),ca(),Mu(ut.getState())&&Ea()},getAuthToken:async()=>Vl()}),dR=Yl({baseURL:de.SUGGESTIONS_BASE_URL||de.BACKEND_BASE_URL,baseURLKey:"SUGGESTIONS_BASE_URL",setAuthToken:async t=>{await $l(t)},forbiddenCallback:()=>{ut.dispatch(Ru(null)),ca(),Mu(ut.getState())&&Ea()},getAuthToken:async()=>Vl()}),hR=async({api:t})=>await Hl(t,"user_extension_settings/","get"),gR={getUserExtensionOptions:hR},mR=lt("options/setLocalOptions"),_R=lt("options/setRecordAudio"),xy=Ye("options/getBackendOptions",async({api:t},{rejectWithValue:e})=>gR.getUserExtensionOptions({api:t}).then(r=>r.ok?{pinsSnoozedUntilTimestamp:r.data.pins_snoozed_until_timestamp,pinsBlockedUrls:r.data.pins_blocked_urls,pinsSawIntroducingPinsModal:r.data.pins_saw_introducing_pins_modal,pinsSnoozedIntroducingPinsModal:r.data.pins_snoozed_introducing_pins_modal,pinsSawPinThisScribeModal:r.data.pins_saw_pin_this_scribe_modal,pinsSnoozedPinThisScribeModal:r.data.pins_snoozed_pin_this_scribe_modal,pinsSawPinMoreScribesModal:r.data.pins_saw_pin_more_scribes_modal,pinsSnoozedPinMoreScribesModal:r.data.pins_snoozed_pin_more_scribes_modal,pinsSawPromptToViewInDashboardModal:r.data.pins_saw_prompt_to_view_in_dashboard_modal,pinsSnoozedPromptToViewInDashboardModal:r.data.pins_snoozed_prompt_to_view_in_dashboard_modal}:e(r)).catch(r=>e(r))),yR=re({name:"options",initialState:Ti,reducers:{setLocalOptions:(t,e)=>{Object.assign(t,e.payload)},setBackendOptions:(t,e)=>{Object.assign(t,e.payload)}},extraReducers:t=>{t.addCase(xy.fulfilled,(e,r)=>{Object.assign(e,r.payload)}).addCase(ve,(e,r)=>{Object.assign(e,r.payload.options)})}}),vR=yR.reducer,bR={getTeamUsers:async({id:t,nameParam:e,sortParam:r,annotateCountInfo:i,annotateViewCountInfo:a,role:s,limit:c})=>{const u=e?encodeURIComponent(e.trim()):"",p=[];u&&p.push(`q=${u}`),r&&p.push(`sort_by=${r}`),i&&p.push("annotate_count_info=1"),a&&p.push("annotate_view_count_info=1"),s&&p.push(`role=${s}`),c&&p.push(`limit=${c}`);const m=p.length?`?${p.join("&")}`:"";return Re(`organizations/${t}/users${m}`,"GET")}},Oa=Ye("organization/getTeamUsers",async({id:t,nameParam:e,sortParam:r,annotateCountInfo:i,annotateViewCountInfo:a,role:s,limit:c})=>bR.getTeamUsers({id:t,nameParam:e,sortParam:r,annotateCountInfo:i,annotateViewCountInfo:a,role:s,limit:c})),wR={teammates:[],loading:!1,error:null},ky=re({name:"organization",initialState:wR,reducers:{clearOrganizationState:t=>{t.teammates=[],t.error=null}},extraReducers:t=>{t.addCase(Oa.pending,e=>{e.loading=!0,e.error=null}).addCase(Oa.fulfilled,(e,r)=>{var i;e.loading=!1,e.teammates=((i=r.payload)==null?void 0:i.results)||r.payload||[]}).addCase(Oa.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message||null})}});ky.actions;const SR=ky.reducer,ER={isMissingPermissions:!1},IR=re({name:"permissions",initialState:ER,reducers:{setMissingPermissions:(t,e)=>{t.isMissingPermissions=e.payload}},extraReducers:t=>{t.addCase(ve,(e,r)=>{Object.assign(e,r.payload.permissions)})}}),OR=IR.reducer,Ny=_t(t=>t.pins,t=>t),TR=_t(Ny,t=>t.viewedPins),AR=_t(t=>t.pins.pinDropping,t=>t),CR=_t(t=>t.pins.pinShiftClickThrough,t=>t),xR=_t(t=>t.pins.hoveredPinId,t=>t),kR=_t(t=>t.pins.pinDocument,t=>t),NR=_t(t=>t.pins.pinsLoading,t=>t),RR=_t(t=>t.pins.hiddenPinsUrlList,t=>t),PR={pinDropping:!1,pins:[],viewedPins:[],hoveredPinId:null,pinShiftClickThrough:!1,pinDocument:null,pinsLoading:!1,hiddenPinsUrlList:[]},DR=re({name:"pins",initialState:PR,reducers:{setPinDropping:(t,e)=>{t.pinDropping=e.payload},setPins:(t,e)=>{t.pins=e.payload,t.pinsLoading=!1},setPinsLoading:(t,e)=>{t.pinsLoading=e.payload},setViewedPins:(t,e)=>{t.viewedPins=e.payload},setHoveredPinId:(t,e)=>{t.hoveredPinId=e.payload},setPinShiftClickThrough:(t,e)=>{t.pinShiftClickThrough=e.payload},setPinDocument:(t,e)=>{t.pinDocument=e.payload},setHiddenPinsUrlList:(t,e)=>{t.hiddenPinsUrlList=e.payload}},extraReducers:t=>{t.addCase(ve,(e,r)=>{Object.assign(e,r.payload.pins)})}}),jR=DR.reducer,UR={fetchWorkspaceScribes:({organizationId:t,folder:e,typeFilter:r,skip:i,category:a,userOwnerFilter:s,sortParam:c,permission:u="all",isShared:p})=>{const m=["get_first=20"];e&&m.push(`folder=${e}`),r&&m.push(`type=${r}`),i&&m.push(`skip=${i}`),a&&m.push(`category=${a}`),s&&m.push(`user_id=${s}`),c&&m.push(`sort_by=${c}`),u&&m.push(`global_permission=${u}`),p!==void 0&&m.push(`is_shared=${p}`);const g=m.length>0?`?${m.join("&")}`:"";return Re(`workspace/${t?`${t}/`:""}${g}`,"GET")}},Io={listScribes:async({searchQuery:t,domain:e,skip:r,get_first:i})=>{const a={};return t&&t.trim().length>0&&(a.q=t.trim()),e&&e.trim().length>0&&(a.domain=e.trim()),r!=null&&(a.skip=r),i!=null&&(a.get_first=i),Re("scribe_file/","GET",void 0,a,void 0)},listTextExportableScribes:async({searchQuery:t,skip:e,get_first:r})=>{const i={};return t&&t.trim().length>0&&(i.name=t.trim()),e!=null&&(i.skip=e),r!=null&&(i.get_first=r),Re("scribe_documents/text_exportable/","GET",void 0,i,void 0)},fetchSuggestions:async({domain:t,url:e,sort:r,organizationId:i,limit:a})=>{const s=mo(e)?"":e;return Re("suggestions","GET",void 0,{domain:t,url:s,sort:r,organization_id:i,limit:a})},fetchIndividualScribe:async t=>Re(`scribe_file/${t}`,"GET"),fetchSingleScribeActions:async t=>Re(`scribe_documents/${t}/actions`,"GET",!0),fetchDocumentPermissions:async t=>Re(`document_metadata/${t}/sharing`,"GET"),exportScribeDocument:async(t,e)=>Re(`scribe_documents/${t}/export/?as=${e}`,"GET"),countScribesOnDomain:async t=>Re(`scribe_documents/count/?domain=${t}`,"GET")},LR=30,Ry=20,Gl=Ye("scribes/listScribesOnDomain",async({searchQuery:t,domain:e,skip:r,limit:i})=>(await Io.listScribes({searchQuery:t,domain:e,skip:r,get_first:i||LR})).data),Ta=Ye("scribes/getSuggestionsForUrl",async({domain:t,url:e,sort:r="popular",organizationId:i,limit:a=Ry})=>(await Io.fetchSuggestions({domain:t,url:e,sort:r,organizationId:i,limit:a})).data),Py=lt("scribe/recommendedScribesDomainAllowlistReceived"),Aa=Ye("scribes/listRecommendedScribesOnDomain",async({domain:t,query:e,source:r})=>{const i=await new Promise(a=>{chrome.runtime.sendMessage({messageType:"suggestionsRequested",domain:t,query:e,source:r},s=>{a(s)})});return{...i,isAsynchronous:!!i.taskId,taskId:i.taskId||null}}),Dy=lt("scribe/recommendedScribesDomainCountReceived");Ye("scribes/countScribesOnDomain",async({domain:t})=>(await Io.countScribesOnDomain(t)).data);const BR=lt("scribes/setSelectedFilter"),MR=lt("scribes/setCurrentTabUrl"),Ca=Ye("scribes/getSavedScribes",async t=>({data:(await UR.fetchWorkspaceScribes({...t,category:"saved"})).data,isLoadingMore:(t.skip||0)>0})),jy={haveRecommendedScribesDomainAllowlist:!1,recommendedScribesFromWorkspace:null,recommendedScribesFromGallery:null,scribes:null,isLoading:!1,loadedAll:!1,searchQuery:"",isError:!1,errorMessage:null,scribeCountOnDomain:0,isAsynchronousProcessing:!1,taskId:null,selectedFilter:"popular",currentTabUrl:null},FR=re({name:"scribes",initialState:{...jy},reducers:{setSelectedFilter:(t,e)=>{t.selectedFilter=e.payload;try{localStorage.setItem("extension_selected_recommendations_filter",e.payload)}catch{console.error("localStorage error when setting filter")}},setCurrentTabUrl:(t,e)=>{t.currentTabUrl=e.payload}},extraReducers:t=>{t.addCase(ve,(e,r)=>{var a,s;const i=(s=(a=r==null?void 0:r.payload)==null?void 0:a.globalVariables)==null?void 0:s.currentRecommendedScribeCount;typeof i=="number"&&(e.scribeCountOnDomain=i)}).addCase(Py,e=>{e.haveRecommendedScribesDomainAllowlist=!0}).addCase(Aa.pending,e=>{e.isLoading=!0}).addCase(Aa.fulfilled,(e,r)=>{var i,a,s;e.recommendedScribesFromWorkspace=(i=r.payload)==null?void 0:i.user,e.recommendedScribesFromGallery=(a=r.payload)==null?void 0:a.gallery,e.isAsynchronousProcessing=!!((s=r.payload)!=null&&s.taskId),e.isLoading=!1}).addCase(Aa.rejected,e=>{e.isLoading=!1}).addCase(Ta.fulfilled,(e,r)=>{var s,c;const i=r.meta.arg.url,a=e.currentTabUrl;(!a||i===a)&&(e.recommendedScribesFromWorkspace=((s=r.payload)==null?void 0:s.user)||[],e.recommendedScribesFromGallery=((c=r.payload)==null?void 0:c.gallery)||[]),e.isLoading=!1}).addCase(Ta.pending,e=>{e.isLoading=!0,e.isError=!1,e.errorMessage=null}).addCase(Ta.rejected,e=>{e.recommendedScribesFromWorkspace=[],e.recommendedScribesFromGallery=[],e.isLoading=!1,e.isError=!0,e.errorMessage=null}).addCase(Gl.fulfilled,(e,r)=>{r.payload.length===0||e.scribeCountOnDomain>0&&e.scribeCountOnDomain>=e.scribes.length?e.loadedAll=!0:e.loadedAll=!1;const i=e.scribes.length,a=r.meta.arg.searchQuery||"",s=r.payload.current_folder_scribe_documents;if(e.searchQuery!==a){const c=s.map((u,p)=>({...u,sort_order:p}));e.scribes=c}else{const c=s.map((u,p)=>({...u,sort_order:p+i}));e.scribes=_.sortBy(_.unionBy(c,e.scribes,"id"),"sort_order")}e.isLoading=!1,e.isError=!1,e.errorMessage=null,e.searchQuery=a}).addCase(Gl.pending,e=>{e.isLoading=!0,e.isError=!1,e.errorMessage=null}).addCase(Gl.rejected,(e,r)=>{e.scribes=[],e.isLoading=!1,e.isError=!0,e.errorMessage=null}).addCase(Dy,(e,r)=>{e.scribeCountOnDomain=r.payload}).addCase(Bs,(e,r)=>({...jy})).addCase(Ca.pending,(e,r)=>{(r.meta.arg.skip||0)>0||(e.isLoading=!0)}).addCase(Ca.fulfilled,(e,r)=>{const{data:i,isLoadingMore:a}=r.payload;a?e.savedScribes={...e.savedScribes,documents:[...e.savedScribes.documents,...i.documents]}:e.savedScribes=i,e.isLoading=!1}).addCase(Ca.rejected,e=>{e.isLoading=!1})}}),qR=FR.reducer;_t(t=>({scribes:t.scribes.scribes,searchQuery:t.scribes.searchQuery,isLoading:t.scribes.isLoading,loadedAll:t.scribes.loadedAll,scribeCountOnDomain:t.scribes.scribeCountOnDomain}),t=>t);const zR=_t(t=>({workspaceScribes:t.scribes.recommendedScribesFromWorkspace,galleryScribes:t.scribes.recommendedScribesFromGallery,scribeCountOnDomain:t.scribes.scribeCountOnDomain}),t=>t),VR=_t(t=>t.scribes.isLoading,t=>t),$R=_t(t=>({scribeCountOnDomain:t.scribes.scribeCountOnDomain,domainAllowlistLoaded:t.scribes.haveRecommendedScribesDomainAllowlist}),t=>t),WR=_t(t=>t.scribes.selectedFilter,t=>t),YR=_t(t=>t.scribes.savedScribes,t=>t);var xa={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/xa.exports,function(t,e){(function(){var r,i="4.17.21",a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",u="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",m=500,g="__lodash_placeholder__",h=1,y=2,E=4,x=1,D=2,U=1,j=2,R=4,w=8,T=16,P=32,F=64,V=128,Y=256,b=512,G=30,et="...",ct=800,Ot=16,Tt=1,Mt=2,xt=3,yt=1/0,jt=9007199254740991,ze=17976931348623157e292,_e=0/0,q=4294967295,Z=q-1,Q=q>>>1,st=[["ary",V],["bind",U],["bindKey",j],["curry",w],["curryRight",T],["flip",b],["partial",P],["partialRight",F],["rearg",Y]],dt="[object Arguments]",ht="[object Array]",k="[object AsyncFunction]",I="[object Boolean]",J="[object Date]",z="[object DOMException]",wt="[object Error]",kt="[object Function]",Pt="[object GeneratorFunction]",mt="[object Map]",Wt="[object Number]",ye="[object Null]",vt="[object Object]",he="[object Promise]",Tr="[object Proxy]",Ee="[object RegExp]",se="[object Set]",Yt="[object String]",Ar="[object Symbol]",Ni="[object Undefined]",Pe="[object WeakMap]",Vr="[object WeakSet]",f="[object ArrayBuffer]",v="[object DataView]",O="[object Float32Array]",B="[object Float64Array]",H="[object Int8Array]",X="[object Int16Array]",at="[object Int32Array]",Vt="[object Uint8Array]",ue="[object Uint8ClampedArray]",Zt="[object Uint16Array]",Ht="[object Uint32Array]",pe=/\b__p \+= '';/g,Wy=/\b(__p \+=) '' \+/g,Yy=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Zl=/&(?:amp|lt|gt|quot|#39);/g,Jl=/[&<>"']/g,Hy=RegExp(Zl.source),Gy=RegExp(Jl.source),Qy=/<%-([\s\S]+?)%>/g,Ky=/<%([\s\S]+?)%>/g,Xl=/<%=([\s\S]+?)%>/g,Zy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jy=/^\w*$/,Xy=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pa=/[\\^$.*+?()[\]{}|]/g,tv=RegExp(Pa.source),Da=/^\s+/,ev=/\s/,rv=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nv=/\{\n\/\* \[wrapped with (.+)\] \*/,iv=/,? & /,ov=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sv=/[()=,{}\[\]\/\s]/,av=/\\(\\)?/g,cv=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,tp=/\w*$/,uv=/^[-+]0x[0-9a-f]+$/i,lv=/^0b[01]+$/i,pv=/^\[object .+?Constructor\]$/,fv=/^0o[0-7]+$/i,dv=/^(?:0|[1-9]\d*)$/,hv=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,To=/($^)/,gv=/['\n\r\u2028\u2029\\]/g,Ao="\\ud800-\\udfff",mv="\\u0300-\\u036f",_v="\\ufe20-\\ufe2f",yv="\\u20d0-\\u20ff",ep=mv+_v+yv,rp="\\u2700-\\u27bf",np="a-z\\xdf-\\xf6\\xf8-\\xff",vv="\\xac\\xb1\\xd7\\xf7",bv="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",wv="\\u2000-\\u206f",Sv=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ip="A-Z\\xc0-\\xd6\\xd8-\\xde",op="\\ufe0e\\ufe0f",sp=vv+bv+wv+Sv,ja="['\u2019]",Ev="["+Ao+"]",ap="["+sp+"]",Co="["+ep+"]",cp="\\d+",Iv="["+rp+"]",up="["+np+"]",lp="[^"+Ao+sp+cp+rp+np+ip+"]",Ua="\\ud83c[\\udffb-\\udfff]",Ov="(?:"+Co+"|"+Ua+")",pp="[^"+Ao+"]",La="(?:\\ud83c[\\udde6-\\uddff]){2}",Ba="[\\ud800-\\udbff][\\udc00-\\udfff]",ei="["+ip+"]",fp="\\u200d",dp="(?:"+up+"|"+lp+")",Tv="(?:"+ei+"|"+lp+")",hp="(?:"+ja+"(?:d|ll|m|re|s|t|ve))?",gp="(?:"+ja+"(?:D|LL|M|RE|S|T|VE))?",mp=Ov+"?",_p="["+op+"]?",Av="(?:"+fp+"(?:"+[pp,La,Ba].join("|")+")"+_p+mp+")*",Cv="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",yp=_p+mp+Av,kv="(?:"+[Iv,La,Ba].join("|")+")"+yp,Nv="(?:"+[pp+Co+"?",Co,La,Ba,Ev].join("|")+")",Rv=RegExp(ja,"g"),Pv=RegExp(Co,"g"),Ma=RegExp(Ua+"(?="+Ua+")|"+Nv+yp,"g"),Dv=RegExp([ei+"?"+up+"+"+hp+"(?="+[ap,ei,"$"].join("|")+")",Tv+"+"+gp+"(?="+[ap,ei+dp,"$"].join("|")+")",ei+"?"+dp+"+"+hp,ei+"+"+gp,xv,Cv,cp,kv].join("|"),"g"),jv=RegExp("["+fp+Ao+ep+op+"]"),Uv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Lv=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Bv=-1,ne={};ne[O]=ne[B]=ne[H]=ne[X]=ne[at]=ne[Vt]=ne[ue]=ne[Zt]=ne[Ht]=!0,ne[dt]=ne[ht]=ne[f]=ne[I]=ne[v]=ne[J]=ne[wt]=ne[kt]=ne[mt]=ne[Wt]=ne[vt]=ne[Ee]=ne[se]=ne[Yt]=ne[Pe]=!1;var ee={};ee[dt]=ee[ht]=ee[f]=ee[v]=ee[I]=ee[J]=ee[O]=ee[B]=ee[H]=ee[X]=ee[at]=ee[mt]=ee[Wt]=ee[vt]=ee[Ee]=ee[se]=ee[Yt]=ee[Ar]=ee[Vt]=ee[ue]=ee[Zt]=ee[Ht]=!0,ee[wt]=ee[kt]=ee[Pe]=!1;var Mv={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Fv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vv=parseFloat,$v=parseInt,vp=typeof It=="object"&&It&&It.Object===Object&&It,Wv=typeof self=="object"&&self&&self.Object===Object&&self,xe=vp||Wv||Function("return this")(),Fa=e&&!e.nodeType&&e,Un=Fa&&!0&&t&&!t.nodeType&&t,bp=Un&&Un.exports===Fa,qa=bp&&vp.process,lr=function(){try{var $=Un&&Un.require&&Un.require("util").types;return $||qa&&qa.binding&&qa.binding("util")}catch{}}(),wp=lr&&lr.isArrayBuffer,Sp=lr&&lr.isDate,Ep=lr&&lr.isMap,Ip=lr&&lr.isRegExp,Op=lr&&lr.isSet,Tp=lr&&lr.isTypedArray;function er($,tt,K){switch(K.length){case 0:return $.call(tt);case 1:return $.call(tt,K[0]);case 2:return $.call(tt,K[0],K[1]);case 3:return $.call(tt,K[0],K[1],K[2])}return $.apply(tt,K)}function Yv($,tt,K,ft){for(var At=-1,$t=$==null?0:$.length;++At<$t;){var Ie=$[At];tt(ft,Ie,K(Ie),$)}return ft}function pr($,tt){for(var K=-1,ft=$==null?0:$.length;++K<ft&&tt($[K],K,$)!==!1;);return $}function Hv($,tt){for(var K=$==null?0:$.length;K--&&tt($[K],K,$)!==!1;);return $}function Ap($,tt){for(var K=-1,ft=$==null?0:$.length;++K<ft;)if(!tt($[K],K,$))return!1;return!0}function pn($,tt){for(var K=-1,ft=$==null?0:$.length,At=0,$t=[];++K<ft;){var Ie=$[K];tt(Ie,K,$)&&($t[At++]=Ie)}return $t}function xo($,tt){var K=$==null?0:$.length;return!!K&&ri($,tt,0)>-1}function za($,tt,K){for(var ft=-1,At=$==null?0:$.length;++ft<At;)if(K(tt,$[ft]))return!0;return!1}function ae($,tt){for(var K=-1,ft=$==null?0:$.length,At=Array(ft);++K<ft;)At[K]=tt($[K],K,$);return At}function fn($,tt){for(var K=-1,ft=tt.length,At=$.length;++K<ft;)$[At+K]=tt[K];return $}function Va($,tt,K,ft){var At=-1,$t=$==null?0:$.length;for(ft&&$t&&(K=$[++At]);++At<$t;)K=tt(K,$[At],At,$);return K}function Gv($,tt,K,ft){var At=$==null?0:$.length;for(ft&&At&&(K=$[--At]);At--;)K=tt(K,$[At],At,$);return K}function $a($,tt){for(var K=-1,ft=$==null?0:$.length;++K<ft;)if(tt($[K],K,$))return!0;return!1}var Qv=Wa("length");function Kv($){return $.split("")}function Zv($){return $.match(ov)||[]}function Cp($,tt,K){var ft;return K($,function(At,$t,Ie){if(tt(At,$t,Ie))return ft=$t,!1}),ft}function ko($,tt,K,ft){for(var At=$.length,$t=K+(ft?1:-1);ft?$t--:++$t<At;)if(tt($[$t],$t,$))return $t;return-1}function ri($,tt,K){return tt===tt?ub($,tt,K):ko($,xp,K)}function Jv($,tt,K,ft){for(var At=K-1,$t=$.length;++At<$t;)if(ft($[At],tt))return At;return-1}function xp($){return $!==$}function kp($,tt){var K=$==null?0:$.length;return K?Ha($,tt)/K:_e}function Wa($){return function(tt){return tt==null?r:tt[$]}}function Ya($){return function(tt){return $==null?r:$[tt]}}function Np($,tt,K,ft,At){return At($,function($t,Ie,te){K=ft?(ft=!1,$t):tt(K,$t,Ie,te)}),K}function Xv($,tt){var K=$.length;for($.sort(tt);K--;)$[K]=$[K].value;return $}function Ha($,tt){for(var K,ft=-1,At=$.length;++ft<At;){var $t=tt($[ft]);$t!==r&&(K=K===r?$t:K+$t)}return K}function Ga($,tt){for(var K=-1,ft=Array($);++K<$;)ft[K]=tt(K);return ft}function tb($,tt){return ae(tt,function(K){return[K,$[K]]})}function Rp($){return $&&$.slice(0,Up($)+1).replace(Da,"")}function rr($){return function(tt){return $(tt)}}function Qa($,tt){return ae(tt,function(K){return $[K]})}function Ri($,tt){return $.has(tt)}function Pp($,tt){for(var K=-1,ft=$.length;++K<ft&&ri(tt,$[K],0)>-1;);return K}function Dp($,tt){for(var K=$.length;K--&&ri(tt,$[K],0)>-1;);return K}function eb($,tt){for(var K=$.length,ft=0;K--;)$[K]===tt&&++ft;return ft}var rb=Ya(Mv),nb=Ya(Fv);function ib($){return"\\"+zv[$]}function ob($,tt){return $==null?r:$[tt]}function ni($){return jv.test($)}function sb($){return Uv.test($)}function ab($){for(var tt,K=[];!(tt=$.next()).done;)K.push(tt.value);return K}function Ka($){var tt=-1,K=Array($.size);return $.forEach(function(ft,At){K[++tt]=[At,ft]}),K}function jp($,tt){return function(K){return $(tt(K))}}function dn($,tt){for(var K=-1,ft=$.length,At=0,$t=[];++K<ft;){var Ie=$[K];(Ie===tt||Ie===g)&&($[K]=g,$t[At++]=K)}return $t}function No($){var tt=-1,K=Array($.size);return $.forEach(function(ft){K[++tt]=ft}),K}function cb($){var tt=-1,K=Array($.size);return $.forEach(function(ft){K[++tt]=[ft,ft]}),K}function ub($,tt,K){for(var ft=K-1,At=$.length;++ft<At;)if($[ft]===tt)return ft;return-1}function lb($,tt,K){for(var ft=K+1;ft--;)if($[ft]===tt)return ft;return ft}function ii($){return ni($)?fb($):Qv($)}function Cr($){return ni($)?db($):Kv($)}function Up($){for(var tt=$.length;tt--&&ev.test($.charAt(tt)););return tt}var pb=Ya(qv);function fb($){for(var tt=Ma.lastIndex=0;Ma.test($);)++tt;return tt}function db($){return $.match(Ma)||[]}function hb($){return $.match(Dv)||[]}var gb=function $(tt){tt=tt==null?xe:oi.defaults(xe.Object(),tt,oi.pick(xe,Lv));var K=tt.Array,ft=tt.Date,At=tt.Error,$t=tt.Function,Ie=tt.Math,te=tt.Object,Za=tt.RegExp,mb=tt.String,fr=tt.TypeError,Ro=K.prototype,_b=$t.prototype,si=te.prototype,Po=tt["__core-js_shared__"],Do=_b.toString,Qt=si.hasOwnProperty,yb=0,Lp=function(){var n=/[^.]+$/.exec(Po&&Po.keys&&Po.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),jo=si.toString,vb=Do.call(te),bb=xe._,wb=Za("^"+Do.call(Qt).replace(Pa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Uo=bp?tt.Buffer:r,hn=tt.Symbol,Lo=tt.Uint8Array,Bp=Uo?Uo.allocUnsafe:r,Bo=jp(te.getPrototypeOf,te),Mp=te.create,Fp=si.propertyIsEnumerable,Mo=Ro.splice,qp=hn?hn.isConcatSpreadable:r,Pi=hn?hn.iterator:r,Ln=hn?hn.toStringTag:r,Fo=function(){try{var n=zn(te,"defineProperty");return n({},"",{}),n}catch{}}(),Sb=tt.clearTimeout!==xe.clearTimeout&&tt.clearTimeout,Eb=ft&&ft.now!==xe.Date.now&&ft.now,Ib=tt.setTimeout!==xe.setTimeout&&tt.setTimeout,qo=Ie.ceil,zo=Ie.floor,Ja=te.getOwnPropertySymbols,Ob=Uo?Uo.isBuffer:r,zp=tt.isFinite,Tb=Ro.join,Ab=jp(te.keys,te),Oe=Ie.max,De=Ie.min,Cb=ft.now,xb=tt.parseInt,Vp=Ie.random,kb=Ro.reverse,Xa=zn(tt,"DataView"),Di=zn(tt,"Map"),tc=zn(tt,"Promise"),ai=zn(tt,"Set"),ji=zn(tt,"WeakMap"),Ui=zn(te,"create"),Vo=ji&&new ji,ci={},Nb=Vn(Xa),Rb=Vn(Di),Pb=Vn(tc),Db=Vn(ai),jb=Vn(ji),$o=hn?hn.prototype:r,Li=$o?$o.valueOf:r,$p=$o?$o.toString:r;function C(n){if(fe(n)&&!Nt(n)&&!(n instanceof qt)){if(n instanceof dr)return n;if(Qt.call(n,"__wrapped__"))return Yf(n)}return new dr(n)}var ui=function(){function n(){}return function(o){if(!le(o))return{};if(Mp)return Mp(o);n.prototype=o;var l=new n;return n.prototype=r,l}}();function Wo(){}function dr(n,o){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=r}C.templateSettings={escape:Qy,evaluate:Ky,interpolate:Xl,variable:"",imports:{_:C}},C.prototype=Wo.prototype,C.prototype.constructor=C,dr.prototype=ui(Wo.prototype),dr.prototype.constructor=dr;function qt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=q,this.__views__=[]}function Ub(){var n=new qt(this.__wrapped__);return n.__actions__=Ge(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Ge(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Ge(this.__views__),n}function Lb(){if(this.__filtered__){var n=new qt(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Bb(){var n=this.__wrapped__.value(),o=this.__dir__,l=Nt(n),d=o<0,S=l?n.length:0,N=K0(0,S,this.__views__),L=N.start,M=N.end,W=M-L,nt=d?M:L-1,it=this.__iteratees__,ot=it.length,pt=0,gt=De(W,this.__takeCount__);if(!l||!d&&S==W&&gt==W)return gf(n,this.__actions__);var St=[];t:for(;W--&&pt<gt;){nt+=o;for(var Ut=-1,Et=n[nt];++Ut<ot;){var Ft=it[Ut],zt=Ft.iteratee,or=Ft.type,We=zt(Et);if(or==Mt)Et=We;else if(!We){if(or==Tt)continue t;break t}}St[pt++]=Et}return St}qt.prototype=ui(Wo.prototype),qt.prototype.constructor=qt;function Bn(n){var o=-1,l=n==null?0:n.length;for(this.clear();++o<l;){var d=n[o];this.set(d[0],d[1])}}function Mb(){this.__data__=Ui?Ui(null):{},this.size=0}function Fb(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o}function qb(n){var o=this.__data__;if(Ui){var l=o[n];return l===p?r:l}return Qt.call(o,n)?o[n]:r}function zb(n){var o=this.__data__;return Ui?o[n]!==r:Qt.call(o,n)}function Vb(n,o){var l=this.__data__;return this.size+=this.has(n)?0:1,l[n]=Ui&&o===r?p:o,this}Bn.prototype.clear=Mb,Bn.prototype.delete=Fb,Bn.prototype.get=qb,Bn.prototype.has=zb,Bn.prototype.set=Vb;function $r(n){var o=-1,l=n==null?0:n.length;for(this.clear();++o<l;){var d=n[o];this.set(d[0],d[1])}}function $b(){this.__data__=[],this.size=0}function Wb(n){var o=this.__data__,l=Yo(o,n);if(l<0)return!1;var d=o.length-1;return l==d?o.pop():Mo.call(o,l,1),--this.size,!0}function Yb(n){var o=this.__data__,l=Yo(o,n);return l<0?r:o[l][1]}function Hb(n){return Yo(this.__data__,n)>-1}function Gb(n,o){var l=this.__data__,d=Yo(l,n);return d<0?(++this.size,l.push([n,o])):l[d][1]=o,this}$r.prototype.clear=$b,$r.prototype.delete=Wb,$r.prototype.get=Yb,$r.prototype.has=Hb,$r.prototype.set=Gb;function Wr(n){var o=-1,l=n==null?0:n.length;for(this.clear();++o<l;){var d=n[o];this.set(d[0],d[1])}}function Qb(){this.size=0,this.__data__={hash:new Bn,map:new(Di||$r),string:new Bn}}function Kb(n){var o=is(this,n).delete(n);return this.size-=o?1:0,o}function Zb(n){return is(this,n).get(n)}function Jb(n){return is(this,n).has(n)}function Xb(n,o){var l=is(this,n),d=l.size;return l.set(n,o),this.size+=l.size==d?0:1,this}Wr.prototype.clear=Qb,Wr.prototype.delete=Kb,Wr.prototype.get=Zb,Wr.prototype.has=Jb,Wr.prototype.set=Xb;function Mn(n){var o=-1,l=n==null?0:n.length;for(this.__data__=new Wr;++o<l;)this.add(n[o])}function t0(n){return this.__data__.set(n,p),this}function e0(n){return this.__data__.has(n)}Mn.prototype.add=Mn.prototype.push=t0,Mn.prototype.has=e0;function xr(n){var o=this.__data__=new $r(n);this.size=o.size}function r0(){this.__data__=new $r,this.size=0}function n0(n){var o=this.__data__,l=o.delete(n);return this.size=o.size,l}function i0(n){return this.__data__.get(n)}function o0(n){return this.__data__.has(n)}function s0(n,o){var l=this.__data__;if(l instanceof $r){var d=l.__data__;if(!Di||d.length<a-1)return d.push([n,o]),this.size=++l.size,this;l=this.__data__=new Wr(d)}return l.set(n,o),this.size=l.size,this}xr.prototype.clear=r0,xr.prototype.delete=n0,xr.prototype.get=i0,xr.prototype.has=o0,xr.prototype.set=s0;function Wp(n,o){var l=Nt(n),d=!l&&$n(n),S=!l&&!d&&vn(n),N=!l&&!d&&!S&&di(n),L=l||d||S||N,M=L?Ga(n.length,mb):[],W=M.length;for(var nt in n)(o||Qt.call(n,nt))&&!(L&&(nt=="length"||S&&(nt=="offset"||nt=="parent")||N&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||Qr(nt,W)))&&M.push(nt);return M}function Yp(n){var o=n.length;return o?n[pc(0,o-1)]:r}function a0(n,o){return os(Ge(n),Fn(o,0,n.length))}function c0(n){return os(Ge(n))}function ec(n,o,l){(l!==r&&!kr(n[o],l)||l===r&&!(o in n))&&Yr(n,o,l)}function Bi(n,o,l){var d=n[o];(!(Qt.call(n,o)&&kr(d,l))||l===r&&!(o in n))&&Yr(n,o,l)}function Yo(n,o){for(var l=n.length;l--;)if(kr(n[l][0],o))return l;return-1}function u0(n,o,l,d){return gn(n,function(S,N,L){o(d,S,l(S),L)}),d}function Hp(n,o){return n&&Br(o,Te(o),n)}function l0(n,o){return n&&Br(o,Ke(o),n)}function Yr(n,o,l){o=="__proto__"&&Fo?Fo(n,o,{configurable:!0,enumerable:!0,value:l,writable:!0}):n[o]=l}function rc(n,o){for(var l=-1,d=o.length,S=K(d),N=n==null;++l<d;)S[l]=N?r:Uc(n,o[l]);return S}function Fn(n,o,l){return n===n&&(l!==r&&(n=n<=l?n:l),o!==r&&(n=n>=o?n:o)),n}function hr(n,o,l,d,S,N){var L,M=o&h,W=o&y,nt=o&E;if(l&&(L=S?l(n,d,S,N):l(n)),L!==r)return L;if(!le(n))return n;var it=Nt(n);if(it){if(L=J0(n),!M)return Ge(n,L)}else{var ot=je(n),pt=ot==kt||ot==Pt;if(vn(n))return yf(n,M);if(ot==vt||ot==dt||pt&&!S){if(L=W||pt?{}:Lf(n),!M)return W?q0(n,l0(L,n)):F0(n,Hp(L,n))}else{if(!ee[ot])return S?n:{};L=X0(n,ot,M)}}N||(N=new xr);var gt=N.get(n);if(gt)return gt;N.set(n,L),fd(n)?n.forEach(function(Et){L.add(hr(Et,o,l,Et,n,N))}):ld(n)&&n.forEach(function(Et,Ft){L.set(Ft,hr(Et,o,l,Ft,n,N))});var St=nt?W?Sc:wc:W?Ke:Te,Ut=it?r:St(n);return pr(Ut||n,function(Et,Ft){Ut&&(Ft=Et,Et=n[Ft]),Bi(L,Ft,hr(Et,o,l,Ft,n,N))}),L}function p0(n){var o=Te(n);return function(l){return Gp(l,n,o)}}function Gp(n,o,l){var d=l.length;if(n==null)return!d;for(n=te(n);d--;){var S=l[d],N=o[S],L=n[S];if(L===r&&!(S in n)||!N(L))return!1}return!0}function Qp(n,o,l){if(typeof n!="function")throw new fr(c);return Wi(function(){n.apply(r,l)},o)}function Mi(n,o,l,d){var S=-1,N=xo,L=!0,M=n.length,W=[],nt=o.length;if(!M)return W;l&&(o=ae(o,rr(l))),d?(N=za,L=!1):o.length>=a&&(N=Ri,L=!1,o=new Mn(o));t:for(;++S<M;){var it=n[S],ot=l==null?it:l(it);if(it=d||it!==0?it:0,L&&ot===ot){for(var pt=nt;pt--;)if(o[pt]===ot)continue t;W.push(it)}else N(o,ot,d)||W.push(it)}return W}var gn=Ef(Lr),Kp=Ef(ic,!0);function f0(n,o){var l=!0;return gn(n,function(d,S,N){return l=!!o(d,S,N),l}),l}function Ho(n,o,l){for(var d=-1,S=n.length;++d<S;){var N=n[d],L=o(N);if(L!=null&&(M===r?L===L&&!ir(L):l(L,M)))var M=L,W=N}return W}function d0(n,o,l,d){var S=n.length;for(l=Dt(l),l<0&&(l=-l>S?0:S+l),d=d===r||d>S?S:Dt(d),d<0&&(d+=S),d=l>d?0:hd(d);l<d;)n[l++]=o;return n}function Zp(n,o){var l=[];return gn(n,function(d,S,N){o(d,S,N)&&l.push(d)}),l}function ke(n,o,l,d,S){var N=-1,L=n.length;for(l||(l=ew),S||(S=[]);++N<L;){var M=n[N];o>0&&l(M)?o>1?ke(M,o-1,l,d,S):fn(S,M):d||(S[S.length]=M)}return S}var nc=If(),Jp=If(!0);function Lr(n,o){return n&&nc(n,o,Te)}function ic(n,o){return n&&Jp(n,o,Te)}function Go(n,o){return pn(o,function(l){return Kr(n[l])})}function qn(n,o){o=_n(o,n);for(var l=0,d=o.length;n!=null&&l<d;)n=n[Mr(o[l++])];return l&&l==d?n:r}function Xp(n,o,l){var d=o(n);return Nt(n)?d:fn(d,l(n))}function Ve(n){return n==null?n===r?Ni:ye:Ln&&Ln in te(n)?Q0(n):cw(n)}function oc(n,o){return n>o}function h0(n,o){return n!=null&&Qt.call(n,o)}function g0(n,o){return n!=null&&o in te(n)}function m0(n,o,l){return n>=De(o,l)&&n<Oe(o,l)}function sc(n,o,l){for(var d=l?za:xo,S=n[0].length,N=n.length,L=N,M=K(N),W=1/0,nt=[];L--;){var it=n[L];L&&o&&(it=ae(it,rr(o))),W=De(it.length,W),M[L]=!l&&(o||S>=120&&it.length>=120)?new Mn(L&&it):r}it=n[0];var ot=-1,pt=M[0];t:for(;++ot<S&&nt.length<W;){var gt=it[ot],St=o?o(gt):gt;if(gt=l||gt!==0?gt:0,!(pt?Ri(pt,St):d(nt,St,l))){for(L=N;--L;){var Ut=M[L];if(!(Ut?Ri(Ut,St):d(n[L],St,l)))continue t}pt&&pt.push(St),nt.push(gt)}}return nt}function _0(n,o,l,d){return Lr(n,function(S,N,L){o(d,l(S),N,L)}),d}function Fi(n,o,l){o=_n(o,n),n=qf(n,o);var d=n==null?n:n[Mr(mr(o))];return d==null?r:er(d,n,l)}function tf(n){return fe(n)&&Ve(n)==dt}function y0(n){return fe(n)&&Ve(n)==f}function v0(n){return fe(n)&&Ve(n)==J}function qi(n,o,l,d,S){return n===o?!0:n==null||o==null||!fe(n)&&!fe(o)?n!==n&&o!==o:b0(n,o,l,d,qi,S)}function b0(n,o,l,d,S,N){var L=Nt(n),M=Nt(o),W=L?ht:je(n),nt=M?ht:je(o);W=W==dt?vt:W,nt=nt==dt?vt:nt;var it=W==vt,ot=nt==vt,pt=W==nt;if(pt&&vn(n)){if(!vn(o))return!1;L=!0,it=!1}if(pt&&!it)return N||(N=new xr),L||di(n)?Df(n,o,l,d,S,N):H0(n,o,W,l,d,S,N);if(!(l&x)){var gt=it&&Qt.call(n,"__wrapped__"),St=ot&&Qt.call(o,"__wrapped__");if(gt||St){var Ut=gt?n.value():n,Et=St?o.value():o;return N||(N=new xr),S(Ut,Et,l,d,N)}}return pt?(N||(N=new xr),G0(n,o,l,d,S,N)):!1}function w0(n){return fe(n)&&je(n)==mt}function ac(n,o,l,d){var S=l.length,N=S,L=!d;if(n==null)return!N;for(n=te(n);S--;){var M=l[S];if(L&&M[2]?M[1]!==n[M[0]]:!(M[0]in n))return!1}for(;++S<N;){M=l[S];var W=M[0],nt=n[W],it=M[1];if(L&&M[2]){if(nt===r&&!(W in n))return!1}else{var ot=new xr;if(d)var pt=d(nt,it,W,n,o,ot);if(!(pt===r?qi(it,nt,x|D,d,ot):pt))return!1}}return!0}function ef(n){if(!le(n)||nw(n))return!1;var o=Kr(n)?wb:pv;return o.test(Vn(n))}function S0(n){return fe(n)&&Ve(n)==Ee}function E0(n){return fe(n)&&je(n)==se}function I0(n){return fe(n)&&ps(n.length)&&!!ne[Ve(n)]}function rf(n){return typeof n=="function"?n:n==null?Ze:typeof n=="object"?Nt(n)?sf(n[0],n[1]):of(n):Od(n)}function cc(n){if(!$i(n))return Ab(n);var o=[];for(var l in te(n))Qt.call(n,l)&&l!="constructor"&&o.push(l);return o}function O0(n){if(!le(n))return aw(n);var o=$i(n),l=[];for(var d in n)d=="constructor"&&(o||!Qt.call(n,d))||l.push(d);return l}function uc(n,o){return n<o}function nf(n,o){var l=-1,d=Qe(n)?K(n.length):[];return gn(n,function(S,N,L){d[++l]=o(S,N,L)}),d}function of(n){var o=Ic(n);return o.length==1&&o[0][2]?Mf(o[0][0],o[0][1]):function(l){return l===n||ac(l,n,o)}}function sf(n,o){return Tc(n)&&Bf(o)?Mf(Mr(n),o):function(l){var d=Uc(l,n);return d===r&&d===o?Lc(l,n):qi(o,d,x|D)}}function Qo(n,o,l,d,S){n!==o&&nc(o,function(N,L){if(S||(S=new xr),le(N))T0(n,o,L,l,Qo,d,S);else{var M=d?d(Cc(n,L),N,L+"",n,o,S):r;M===r&&(M=N),ec(n,L,M)}},Ke)}function T0(n,o,l,d,S,N,L){var M=Cc(n,l),W=Cc(o,l),nt=L.get(W);if(nt){ec(n,l,nt);return}var it=N?N(M,W,l+"",n,o,L):r,ot=it===r;if(ot){var pt=Nt(W),gt=!pt&&vn(W),St=!pt&&!gt&&di(W);it=W,pt||gt||St?Nt(M)?it=M:ge(M)?it=Ge(M):gt?(ot=!1,it=yf(W,!0)):St?(ot=!1,it=vf(W,!0)):it=[]:Yi(W)||$n(W)?(it=M,$n(M)?it=gd(M):(!le(M)||Kr(M))&&(it=Lf(W))):ot=!1}ot&&(L.set(W,it),S(it,W,d,N,L),L.delete(W)),ec(n,l,it)}function af(n,o){var l=n.length;if(l)return o+=o<0?l:0,Qr(o,l)?n[o]:r}function cf(n,o,l){o.length?o=ae(o,function(N){return Nt(N)?function(L){return qn(L,N.length===1?N[0]:N)}:N}):o=[Ze];var d=-1;o=ae(o,rr(bt()));var S=nf(n,function(N,L,M){var W=ae(o,function(nt){return nt(N)});return{criteria:W,index:++d,value:N}});return Xv(S,function(N,L){return M0(N,L,l)})}function A0(n,o){return uf(n,o,function(l,d){return Lc(n,d)})}function uf(n,o,l){for(var d=-1,S=o.length,N={};++d<S;){var L=o[d],M=qn(n,L);l(M,L)&&zi(N,_n(L,n),M)}return N}function C0(n){return function(o){return qn(o,n)}}function lc(n,o,l,d){var S=d?Jv:ri,N=-1,L=o.length,M=n;for(n===o&&(o=Ge(o)),l&&(M=ae(n,rr(l)));++N<L;)for(var W=0,nt=o[N],it=l?l(nt):nt;(W=S(M,it,W,d))>-1;)M!==n&&Mo.call(M,W,1),Mo.call(n,W,1);return n}function lf(n,o){for(var l=n?o.length:0,d=l-1;l--;){var S=o[l];if(l==d||S!==N){var N=S;Qr(S)?Mo.call(n,S,1):hc(n,S)}}return n}function pc(n,o){return n+zo(Vp()*(o-n+1))}function x0(n,o,l,d){for(var S=-1,N=Oe(qo((o-n)/(l||1)),0),L=K(N);N--;)L[d?N:++S]=n,n+=l;return L}function fc(n,o){var l="";if(!n||o<1||o>jt)return l;do o%2&&(l+=n),o=zo(o/2),o&&(n+=n);while(o);return l}function Lt(n,o){return xc(Ff(n,o,Ze),n+"")}function k0(n){return Yp(hi(n))}function N0(n,o){var l=hi(n);return os(l,Fn(o,0,l.length))}function zi(n,o,l,d){if(!le(n))return n;o=_n(o,n);for(var S=-1,N=o.length,L=N-1,M=n;M!=null&&++S<N;){var W=Mr(o[S]),nt=l;if(W==="__proto__"||W==="constructor"||W==="prototype")return n;if(S!=L){var it=M[W];nt=d?d(it,W,M):r,nt===r&&(nt=le(it)?it:Qr(o[S+1])?[]:{})}Bi(M,W,nt),M=M[W]}return n}var pf=Vo?function(n,o){return Vo.set(n,o),n}:Ze,R0=Fo?function(n,o){return Fo(n,"toString",{configurable:!0,enumerable:!1,value:Mc(o),writable:!0})}:Ze;function P0(n){return os(hi(n))}function gr(n,o,l){var d=-1,S=n.length;o<0&&(o=-o>S?0:S+o),l=l>S?S:l,l<0&&(l+=S),S=o>l?0:l-o>>>0,o>>>=0;for(var N=K(S);++d<S;)N[d]=n[d+o];return N}function D0(n,o){var l;return gn(n,function(d,S,N){return l=o(d,S,N),!l}),!!l}function Ko(n,o,l){var d=0,S=n==null?d:n.length;if(typeof o=="number"&&o===o&&S<=Q){for(;d<S;){var N=d+S>>>1,L=n[N];L!==null&&!ir(L)&&(l?L<=o:L<o)?d=N+1:S=N}return S}return dc(n,o,Ze,l)}function dc(n,o,l,d){var S=0,N=n==null?0:n.length;if(N===0)return 0;o=l(o);for(var L=o!==o,M=o===null,W=ir(o),nt=o===r;S<N;){var it=zo((S+N)/2),ot=l(n[it]),pt=ot!==r,gt=ot===null,St=ot===ot,Ut=ir(ot);if(L)var Et=d||St;else nt?Et=St&&(d||pt):M?Et=St&&pt&&(d||!gt):W?Et=St&&pt&&!gt&&(d||!Ut):gt||Ut?Et=!1:Et=d?ot<=o:ot<o;Et?S=it+1:N=it}return De(N,Z)}function ff(n,o){for(var l=-1,d=n.length,S=0,N=[];++l<d;){var L=n[l],M=o?o(L):L;if(!l||!kr(M,W)){var W=M;N[S++]=L===0?0:L}}return N}function df(n){return typeof n=="number"?n:ir(n)?_e:+n}function nr(n){if(typeof n=="string")return n;if(Nt(n))return ae(n,nr)+"";if(ir(n))return $p?$p.call(n):"";var o=n+"";return o=="0"&&1/n==-yt?"-0":o}function mn(n,o,l){var d=-1,S=xo,N=n.length,L=!0,M=[],W=M;if(l)L=!1,S=za;else if(N>=a){var nt=o?null:W0(n);if(nt)return No(nt);L=!1,S=Ri,W=new Mn}else W=o?[]:M;t:for(;++d<N;){var it=n[d],ot=o?o(it):it;if(it=l||it!==0?it:0,L&&ot===ot){for(var pt=W.length;pt--;)if(W[pt]===ot)continue t;o&&W.push(ot),M.push(it)}else S(W,ot,l)||(W!==M&&W.push(ot),M.push(it))}return M}function hc(n,o){return o=_n(o,n),n=qf(n,o),n==null||delete n[Mr(mr(o))]}function hf(n,o,l,d){return zi(n,o,l(qn(n,o)),d)}function Zo(n,o,l,d){for(var S=n.length,N=d?S:-1;(d?N--:++N<S)&&o(n[N],N,n););return l?gr(n,d?0:N,d?N+1:S):gr(n,d?N+1:0,d?S:N)}function gf(n,o){var l=n;return l instanceof qt&&(l=l.value()),Va(o,function(d,S){return S.func.apply(S.thisArg,fn([d],S.args))},l)}function gc(n,o,l){var d=n.length;if(d<2)return d?mn(n[0]):[];for(var S=-1,N=K(d);++S<d;)for(var L=n[S],M=-1;++M<d;)M!=S&&(N[S]=Mi(N[S]||L,n[M],o,l));return mn(ke(N,1),o,l)}function mf(n,o,l){for(var d=-1,S=n.length,N=o.length,L={};++d<S;){var M=d<N?o[d]:r;l(L,n[d],M)}return L}function mc(n){return ge(n)?n:[]}function _c(n){return typeof n=="function"?n:Ze}function _n(n,o){return Nt(n)?n:Tc(n,o)?[n]:Wf(Gt(n))}var j0=Lt;function yn(n,o,l){var d=n.length;return l=l===r?d:l,!o&&l>=d?n:gr(n,o,l)}var _f=Sb||function(n){return xe.clearTimeout(n)};function yf(n,o){if(o)return n.slice();var l=n.length,d=Bp?Bp(l):new n.constructor(l);return n.copy(d),d}function yc(n){var o=new n.constructor(n.byteLength);return new Lo(o).set(new Lo(n)),o}function U0(n,o){var l=o?yc(n.buffer):n.buffer;return new n.constructor(l,n.byteOffset,n.byteLength)}function L0(n){var o=new n.constructor(n.source,tp.exec(n));return o.lastIndex=n.lastIndex,o}function B0(n){return Li?te(Li.call(n)):{}}function vf(n,o){var l=o?yc(n.buffer):n.buffer;return new n.constructor(l,n.byteOffset,n.length)}function bf(n,o){if(n!==o){var l=n!==r,d=n===null,S=n===n,N=ir(n),L=o!==r,M=o===null,W=o===o,nt=ir(o);if(!M&&!nt&&!N&&n>o||N&&L&&W&&!M&&!nt||d&&L&&W||!l&&W||!S)return 1;if(!d&&!N&&!nt&&n<o||nt&&l&&S&&!d&&!N||M&&l&&S||!L&&S||!W)return-1}return 0}function M0(n,o,l){for(var d=-1,S=n.criteria,N=o.criteria,L=S.length,M=l.length;++d<L;){var W=bf(S[d],N[d]);if(W){if(d>=M)return W;var nt=l[d];return W*(nt=="desc"?-1:1)}}return n.index-o.index}function wf(n,o,l,d){for(var S=-1,N=n.length,L=l.length,M=-1,W=o.length,nt=Oe(N-L,0),it=K(W+nt),ot=!d;++M<W;)it[M]=o[M];for(;++S<L;)(ot||S<N)&&(it[l[S]]=n[S]);for(;nt--;)it[M++]=n[S++];return it}function Sf(n,o,l,d){for(var S=-1,N=n.length,L=-1,M=l.length,W=-1,nt=o.length,it=Oe(N-M,0),ot=K(it+nt),pt=!d;++S<it;)ot[S]=n[S];for(var gt=S;++W<nt;)ot[gt+W]=o[W];for(;++L<M;)(pt||S<N)&&(ot[gt+l[L]]=n[S++]);return ot}function Ge(n,o){var l=-1,d=n.length;for(o||(o=K(d));++l<d;)o[l]=n[l];return o}function Br(n,o,l,d){var S=!l;l||(l={});for(var N=-1,L=o.length;++N<L;){var M=o[N],W=d?d(l[M],n[M],M,l,n):r;W===r&&(W=n[M]),S?Yr(l,M,W):Bi(l,M,W)}return l}function F0(n,o){return Br(n,Oc(n),o)}function q0(n,o){return Br(n,jf(n),o)}function Jo(n,o){return function(l,d){var S=Nt(l)?Yv:u0,N=o?o():{};return S(l,n,bt(d,2),N)}}function li(n){return Lt(function(o,l){var d=-1,S=l.length,N=S>1?l[S-1]:r,L=S>2?l[2]:r;for(N=n.length>3&&typeof N=="function"?(S--,N):r,L&&$e(l[0],l[1],L)&&(N=S<3?r:N,S=1),o=te(o);++d<S;){var M=l[d];M&&n(o,M,d,N)}return o})}function Ef(n,o){return function(l,d){if(l==null)return l;if(!Qe(l))return n(l,d);for(var S=l.length,N=o?S:-1,L=te(l);(o?N--:++N<S)&&d(L[N],N,L)!==!1;);return l}}function If(n){return function(o,l,d){for(var S=-1,N=te(o),L=d(o),M=L.length;M--;){var W=L[n?M:++S];if(l(N[W],W,N)===!1)break}return o}}function z0(n,o,l){var d=o&U,S=Vi(n);function N(){var L=this&&this!==xe&&this instanceof N?S:n;return L.apply(d?l:this,arguments)}return N}function Of(n){return function(o){o=Gt(o);var l=ni(o)?Cr(o):r,d=l?l[0]:o.charAt(0),S=l?yn(l,1).join(""):o.slice(1);return d[n]()+S}}function pi(n){return function(o){return Va(Ed(Sd(o).replace(Rv,"")),n,"")}}function Vi(n){return function(){var o=arguments;switch(o.length){case 0:return new n;case 1:return new n(o[0]);case 2:return new n(o[0],o[1]);case 3:return new n(o[0],o[1],o[2]);case 4:return new n(o[0],o[1],o[2],o[3]);case 5:return new n(o[0],o[1],o[2],o[3],o[4]);case 6:return new n(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new n(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var l=ui(n.prototype),d=n.apply(l,o);return le(d)?d:l}}function V0(n,o,l){var d=Vi(n);function S(){for(var N=arguments.length,L=K(N),M=N,W=fi(S);M--;)L[M]=arguments[M];var nt=N<3&&L[0]!==W&&L[N-1]!==W?[]:dn(L,W);if(N-=nt.length,N<l)return kf(n,o,Xo,S.placeholder,r,L,nt,r,r,l-N);var it=this&&this!==xe&&this instanceof S?d:n;return er(it,this,L)}return S}function Tf(n){return function(o,l,d){var S=te(o);if(!Qe(o)){var N=bt(l,3);o=Te(o),l=function(M){return N(S[M],M,S)}}var L=n(o,l,d);return L>-1?S[N?o[L]:L]:r}}function Af(n){return Gr(function(o){var l=o.length,d=l,S=dr.prototype.thru;for(n&&o.reverse();d--;){var N=o[d];if(typeof N!="function")throw new fr(c);if(S&&!L&&ns(N)=="wrapper")var L=new dr([],!0)}for(d=L?d:l;++d<l;){N=o[d];var M=ns(N),W=M=="wrapper"?Ec(N):r;W&&Ac(W[0])&&W[1]==(V|w|P|Y)&&!W[4].length&&W[9]==1?L=L[ns(W[0])].apply(L,W[3]):L=N.length==1&&Ac(N)?L[M]():L.thru(N)}return function(){var nt=arguments,it=nt[0];if(L&&nt.length==1&&Nt(it))return L.plant(it).value();for(var ot=0,pt=l?o[ot].apply(this,nt):it;++ot<l;)pt=o[ot].call(this,pt);return pt}})}function Xo(n,o,l,d,S,N,L,M,W,nt){var it=o&V,ot=o&U,pt=o&j,gt=o&(w|T),St=o&b,Ut=pt?r:Vi(n);function Et(){for(var Ft=arguments.length,zt=K(Ft),or=Ft;or--;)zt[or]=arguments[or];if(gt)var We=fi(Et),sr=eb(zt,We);if(d&&(zt=wf(zt,d,S,gt)),N&&(zt=Sf(zt,N,L,gt)),Ft-=sr,gt&&Ft<nt){var me=dn(zt,We);return kf(n,o,Xo,Et.placeholder,l,zt,me,M,W,nt-Ft)}var Nr=ot?l:this,Jr=pt?Nr[n]:n;return Ft=zt.length,M?zt=uw(zt,M):St&&Ft>1&&zt.reverse(),it&&W<Ft&&(zt.length=W),this&&this!==xe&&this instanceof Et&&(Jr=Ut||Vi(Jr)),Jr.apply(Nr,zt)}return Et}function Cf(n,o){return function(l,d){return _0(l,n,o(d),{})}}function ts(n,o){return function(l,d){var S;if(l===r&&d===r)return o;if(l!==r&&(S=l),d!==r){if(S===r)return d;typeof l=="string"||typeof d=="string"?(l=nr(l),d=nr(d)):(l=df(l),d=df(d)),S=n(l,d)}return S}}function vc(n){return Gr(function(o){return o=ae(o,rr(bt())),Lt(function(l){var d=this;return n(o,function(S){return er(S,d,l)})})})}function es(n,o){o=o===r?" ":nr(o);var l=o.length;if(l<2)return l?fc(o,n):o;var d=fc(o,qo(n/ii(o)));return ni(o)?yn(Cr(d),0,n).join(""):d.slice(0,n)}function $0(n,o,l,d){var S=o&U,N=Vi(n);function L(){for(var M=-1,W=arguments.length,nt=-1,it=d.length,ot=K(it+W),pt=this&&this!==xe&&this instanceof L?N:n;++nt<it;)ot[nt]=d[nt];for(;W--;)ot[nt++]=arguments[++M];return er(pt,S?l:this,ot)}return L}function xf(n){return function(o,l,d){return d&&typeof d!="number"&&$e(o,l,d)&&(l=d=r),o=Zr(o),l===r?(l=o,o=0):l=Zr(l),d=d===r?o<l?1:-1:Zr(d),x0(o,l,d,n)}}function rs(n){return function(o,l){return typeof o=="string"&&typeof l=="string"||(o=_r(o),l=_r(l)),n(o,l)}}function kf(n,o,l,d,S,N,L,M,W,nt){var it=o&w,ot=it?L:r,pt=it?r:L,gt=it?N:r,St=it?r:N;o|=it?P:F,o&=~(it?F:P),o&R||(o&=~(U|j));var Ut=[n,o,S,gt,ot,St,pt,M,W,nt],Et=l.apply(r,Ut);return Ac(n)&&zf(Et,Ut),Et.placeholder=d,Vf(Et,n,o)}function bc(n){var o=Ie[n];return function(l,d){if(l=_r(l),d=d==null?0:De(Dt(d),292),d&&zp(l)){var S=(Gt(l)+"e").split("e"),N=o(S[0]+"e"+(+S[1]+d));return S=(Gt(N)+"e").split("e"),+(S[0]+"e"+(+S[1]-d))}return o(l)}}var W0=ai&&1/No(new ai([,-0]))[1]==yt?function(n){return new ai(n)}:zc;function Nf(n){return function(o){var l=je(o);return l==mt?Ka(o):l==se?cb(o):tb(o,n(o))}}function Hr(n,o,l,d,S,N,L,M){var W=o&j;if(!W&&typeof n!="function")throw new fr(c);var nt=d?d.length:0;if(nt||(o&=~(P|F),d=S=r),L=L===r?L:Oe(Dt(L),0),M=M===r?M:Dt(M),nt-=S?S.length:0,o&F){var it=d,ot=S;d=S=r}var pt=W?r:Ec(n),gt=[n,o,l,d,S,it,ot,N,L,M];if(pt&&sw(gt,pt),n=gt[0],o=gt[1],l=gt[2],d=gt[3],S=gt[4],M=gt[9]=gt[9]===r?W?0:n.length:Oe(gt[9]-nt,0),!M&&o&(w|T)&&(o&=~(w|T)),!o||o==U)var St=z0(n,o,l);else o==w||o==T?St=V0(n,o,M):(o==P||o==(U|P))&&!S.length?St=$0(n,o,l,d):St=Xo.apply(r,gt);var Ut=pt?pf:zf;return Vf(Ut(St,gt),n,o)}function Rf(n,o,l,d){return n===r||kr(n,si[l])&&!Qt.call(d,l)?o:n}function Pf(n,o,l,d,S,N){return le(n)&&le(o)&&(N.set(o,n),Qo(n,o,r,Pf,N),N.delete(o)),n}function Y0(n){return Yi(n)?r:n}function Df(n,o,l,d,S,N){var L=l&x,M=n.length,W=o.length;if(M!=W&&!(L&&W>M))return!1;var nt=N.get(n),it=N.get(o);if(nt&&it)return nt==o&&it==n;var ot=-1,pt=!0,gt=l&D?new Mn:r;for(N.set(n,o),N.set(o,n);++ot<M;){var St=n[ot],Ut=o[ot];if(d)var Et=L?d(Ut,St,ot,o,n,N):d(St,Ut,ot,n,o,N);if(Et!==r){if(Et)continue;pt=!1;break}if(gt){if(!$a(o,function(Ft,zt){if(!Ri(gt,zt)&&(St===Ft||S(St,Ft,l,d,N)))return gt.push(zt)})){pt=!1;break}}else if(!(St===Ut||S(St,Ut,l,d,N))){pt=!1;break}}return N.delete(n),N.delete(o),pt}function H0(n,o,l,d,S,N,L){switch(l){case v:if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case f:return!(n.byteLength!=o.byteLength||!N(new Lo(n),new Lo(o)));case I:case J:case Wt:return kr(+n,+o);case wt:return n.name==o.name&&n.message==o.message;case Ee:case Yt:return n==o+"";case mt:var M=Ka;case se:var W=d&x;if(M||(M=No),n.size!=o.size&&!W)return!1;var nt=L.get(n);if(nt)return nt==o;d|=D,L.set(n,o);var it=Df(M(n),M(o),d,S,N,L);return L.delete(n),it;case Ar:if(Li)return Li.call(n)==Li.call(o)}return!1}function G0(n,o,l,d,S,N){var L=l&x,M=wc(n),W=M.length,nt=wc(o),it=nt.length;if(W!=it&&!L)return!1;for(var ot=W;ot--;){var pt=M[ot];if(!(L?pt in o:Qt.call(o,pt)))return!1}var gt=N.get(n),St=N.get(o);if(gt&&St)return gt==o&&St==n;var Ut=!0;N.set(n,o),N.set(o,n);for(var Et=L;++ot<W;){pt=M[ot];var Ft=n[pt],zt=o[pt];if(d)var or=L?d(zt,Ft,pt,o,n,N):d(Ft,zt,pt,n,o,N);if(!(or===r?Ft===zt||S(Ft,zt,l,d,N):or)){Ut=!1;break}Et||(Et=pt=="constructor")}if(Ut&&!Et){var We=n.constructor,sr=o.constructor;We!=sr&&"constructor"in n&&"constructor"in o&&!(typeof We=="function"&&We instanceof We&&typeof sr=="function"&&sr instanceof sr)&&(Ut=!1)}return N.delete(n),N.delete(o),Ut}function Gr(n){return xc(Ff(n,r,Qf),n+"")}function wc(n){return Xp(n,Te,Oc)}function Sc(n){return Xp(n,Ke,jf)}var Ec=Vo?function(n){return Vo.get(n)}:zc;function ns(n){for(var o=n.name+"",l=ci[o],d=Qt.call(ci,o)?l.length:0;d--;){var S=l[d],N=S.func;if(N==null||N==n)return S.name}return o}function fi(n){var o=Qt.call(C,"placeholder")?C:n;return o.placeholder}function bt(){var n=C.iteratee||Fc;return n=n===Fc?rf:n,arguments.length?n(arguments[0],arguments[1]):n}function is(n,o){var l=n.__data__;return rw(o)?l[typeof o=="string"?"string":"hash"]:l.map}function Ic(n){for(var o=Te(n),l=o.length;l--;){var d=o[l],S=n[d];o[l]=[d,S,Bf(S)]}return o}function zn(n,o){var l=ob(n,o);return ef(l)?l:r}function Q0(n){var o=Qt.call(n,Ln),l=n[Ln];try{n[Ln]=r;var d=!0}catch{}var S=jo.call(n);return d&&(o?n[Ln]=l:delete n[Ln]),S}var Oc=Ja?function(n){return n==null?[]:(n=te(n),pn(Ja(n),function(o){return Fp.call(n,o)}))}:Vc,jf=Ja?function(n){for(var o=[];n;)fn(o,Oc(n)),n=Bo(n);return o}:Vc,je=Ve;(Xa&&je(new Xa(new ArrayBuffer(1)))!=v||Di&&je(new Di)!=mt||tc&&je(tc.resolve())!=he||ai&&je(new ai)!=se||ji&&je(new ji)!=Pe)&&(je=function(n){var o=Ve(n),l=o==vt?n.constructor:r,d=l?Vn(l):"";if(d)switch(d){case Nb:return v;case Rb:return mt;case Pb:return he;case Db:return se;case jb:return Pe}return o});function K0(n,o,l){for(var d=-1,S=l.length;++d<S;){var N=l[d],L=N.size;switch(N.type){case"drop":n+=L;break;case"dropRight":o-=L;break;case"take":o=De(o,n+L);break;case"takeRight":n=Oe(n,o-L);break}}return{start:n,end:o}}function Z0(n){var o=n.match(nv);return o?o[1].split(iv):[]}function Uf(n,o,l){o=_n(o,n);for(var d=-1,S=o.length,N=!1;++d<S;){var L=Mr(o[d]);if(!(N=n!=null&&l(n,L)))break;n=n[L]}return N||++d!=S?N:(S=n==null?0:n.length,!!S&&ps(S)&&Qr(L,S)&&(Nt(n)||$n(n)))}function J0(n){var o=n.length,l=new n.constructor(o);return o&&typeof n[0]=="string"&&Qt.call(n,"index")&&(l.index=n.index,l.input=n.input),l}function Lf(n){return typeof n.constructor=="function"&&!$i(n)?ui(Bo(n)):{}}function X0(n,o,l){var d=n.constructor;switch(o){case f:return yc(n);case I:case J:return new d(+n);case v:return U0(n,l);case O:case B:case H:case X:case at:case Vt:case ue:case Zt:case Ht:return vf(n,l);case mt:return new d;case Wt:case Yt:return new d(n);case Ee:return L0(n);case se:return new d;case Ar:return B0(n)}}function tw(n,o){var l=o.length;if(!l)return n;var d=l-1;return o[d]=(l>1?"& ":"")+o[d],o=o.join(l>2?", ":" "),n.replace(rv,`{
/* [wrapped with `+o+`] */
`)}function ew(n){return Nt(n)||$n(n)||!!(qp&&n&&n[qp])}function Qr(n,o){var l=typeof n;return o=o??jt,!!o&&(l=="number"||l!="symbol"&&dv.test(n))&&n>-1&&n%1==0&&n<o}function $e(n,o,l){if(!le(l))return!1;var d=typeof o;return(d=="number"?Qe(l)&&Qr(o,l.length):d=="string"&&o in l)?kr(l[o],n):!1}function Tc(n,o){if(Nt(n))return!1;var l=typeof n;return l=="number"||l=="symbol"||l=="boolean"||n==null||ir(n)?!0:Jy.test(n)||!Zy.test(n)||o!=null&&n in te(o)}function rw(n){var o=typeof n;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null}function Ac(n){var o=ns(n),l=C[o];if(typeof l!="function"||!(o in qt.prototype))return!1;if(n===l)return!0;var d=Ec(l);return!!d&&n===d[0]}function nw(n){return!!Lp&&Lp in n}var iw=Po?Kr:$c;function $i(n){var o=n&&n.constructor,l=typeof o=="function"&&o.prototype||si;return n===l}function Bf(n){return n===n&&!le(n)}function Mf(n,o){return function(l){return l==null?!1:l[n]===o&&(o!==r||n in te(l))}}function ow(n){var o=us(n,function(d){return l.size===m&&l.clear(),d}),l=o.cache;return o}function sw(n,o){var l=n[1],d=o[1],S=l|d,N=S<(U|j|V),L=d==V&&l==w||d==V&&l==Y&&n[7].length<=o[8]||d==(V|Y)&&o[7].length<=o[8]&&l==w;if(!(N||L))return n;d&U&&(n[2]=o[2],S|=l&U?0:R);var M=o[3];if(M){var W=n[3];n[3]=W?wf(W,M,o[4]):M,n[4]=W?dn(n[3],g):o[4]}return M=o[5],M&&(W=n[5],n[5]=W?Sf(W,M,o[6]):M,n[6]=W?dn(n[5],g):o[6]),M=o[7],M&&(n[7]=M),d&V&&(n[8]=n[8]==null?o[8]:De(n[8],o[8])),n[9]==null&&(n[9]=o[9]),n[0]=o[0],n[1]=S,n}function aw(n){var o=[];if(n!=null)for(var l in te(n))o.push(l);return o}function cw(n){return jo.call(n)}function Ff(n,o,l){return o=Oe(o===r?n.length-1:o,0),function(){for(var d=arguments,S=-1,N=Oe(d.length-o,0),L=K(N);++S<N;)L[S]=d[o+S];S=-1;for(var M=K(o+1);++S<o;)M[S]=d[S];return M[o]=l(L),er(n,this,M)}}function qf(n,o){return o.length<2?n:qn(n,gr(o,0,-1))}function uw(n,o){for(var l=n.length,d=De(o.length,l),S=Ge(n);d--;){var N=o[d];n[d]=Qr(N,l)?S[N]:r}return n}function Cc(n,o){if(!(o==="constructor"&&typeof n[o]=="function")&&o!="__proto__")return n[o]}var zf=$f(pf),Wi=Ib||function(n,o){return xe.setTimeout(n,o)},xc=$f(R0);function Vf(n,o,l){var d=o+"";return xc(n,tw(d,lw(Z0(d),l)))}function $f(n){var o=0,l=0;return function(){var d=Cb(),S=Ot-(d-l);if(l=d,S>0){if(++o>=ct)return arguments[0]}else o=0;return n.apply(r,arguments)}}function os(n,o){var l=-1,d=n.length,S=d-1;for(o=o===r?d:o;++l<o;){var N=pc(l,S),L=n[N];n[N]=n[l],n[l]=L}return n.length=o,n}var Wf=ow(function(n){var o=[];return n.charCodeAt(0)===46&&o.push(""),n.replace(Xy,function(l,d,S,N){o.push(S?N.replace(av,"$1"):d||l)}),o});function Mr(n){if(typeof n=="string"||ir(n))return n;var o=n+"";return o=="0"&&1/n==-yt?"-0":o}function Vn(n){if(n!=null){try{return Do.call(n)}catch{}try{return n+""}catch{}}return""}function lw(n,o){return pr(st,function(l){var d="_."+l[0];o&l[1]&&!xo(n,d)&&n.push(d)}),n.sort()}function Yf(n){if(n instanceof qt)return n.clone();var o=new dr(n.__wrapped__,n.__chain__);return o.__actions__=Ge(n.__actions__),o.__index__=n.__index__,o.__values__=n.__values__,o}function pw(n,o,l){(l?$e(n,o,l):o===r)?o=1:o=Oe(Dt(o),0);var d=n==null?0:n.length;if(!d||o<1)return[];for(var S=0,N=0,L=K(qo(d/o));S<d;)L[N++]=gr(n,S,S+=o);return L}function fw(n){for(var o=-1,l=n==null?0:n.length,d=0,S=[];++o<l;){var N=n[o];N&&(S[d++]=N)}return S}function dw(){var n=arguments.length;if(!n)return[];for(var o=K(n-1),l=arguments[0],d=n;d--;)o[d-1]=arguments[d];return fn(Nt(l)?Ge(l):[l],ke(o,1))}var hw=Lt(function(n,o){return ge(n)?Mi(n,ke(o,1,ge,!0)):[]}),gw=Lt(function(n,o){var l=mr(o);return ge(l)&&(l=r),ge(n)?Mi(n,ke(o,1,ge,!0),bt(l,2)):[]}),mw=Lt(function(n,o){var l=mr(o);return ge(l)&&(l=r),ge(n)?Mi(n,ke(o,1,ge,!0),r,l):[]});function _w(n,o,l){var d=n==null?0:n.length;return d?(o=l||o===r?1:Dt(o),gr(n,o<0?0:o,d)):[]}function yw(n,o,l){var d=n==null?0:n.length;return d?(o=l||o===r?1:Dt(o),o=d-o,gr(n,0,o<0?0:o)):[]}function vw(n,o){return n&&n.length?Zo(n,bt(o,3),!0,!0):[]}function bw(n,o){return n&&n.length?Zo(n,bt(o,3),!0):[]}function ww(n,o,l,d){var S=n==null?0:n.length;return S?(l&&typeof l!="number"&&$e(n,o,l)&&(l=0,d=S),d0(n,o,l,d)):[]}function Hf(n,o,l){var d=n==null?0:n.length;if(!d)return-1;var S=l==null?0:Dt(l);return S<0&&(S=Oe(d+S,0)),ko(n,bt(o,3),S)}function Gf(n,o,l){var d=n==null?0:n.length;if(!d)return-1;var S=d-1;return l!==r&&(S=Dt(l),S=l<0?Oe(d+S,0):De(S,d-1)),ko(n,bt(o,3),S,!0)}function Qf(n){var o=n==null?0:n.length;return o?ke(n,1):[]}function Sw(n){var o=n==null?0:n.length;return o?ke(n,yt):[]}function Ew(n,o){var l=n==null?0:n.length;return l?(o=o===r?1:Dt(o),ke(n,o)):[]}function Iw(n){for(var o=-1,l=n==null?0:n.length,d={};++o<l;){var S=n[o];d[S[0]]=S[1]}return d}function Kf(n){return n&&n.length?n[0]:r}function Ow(n,o,l){var d=n==null?0:n.length;if(!d)return-1;var S=l==null?0:Dt(l);return S<0&&(S=Oe(d+S,0)),ri(n,o,S)}function Tw(n){var o=n==null?0:n.length;return o?gr(n,0,-1):[]}var Aw=Lt(function(n){var o=ae(n,mc);return o.length&&o[0]===n[0]?sc(o):[]}),Cw=Lt(function(n){var o=mr(n),l=ae(n,mc);return o===mr(l)?o=r:l.pop(),l.length&&l[0]===n[0]?sc(l,bt(o,2)):[]}),xw=Lt(function(n){var o=mr(n),l=ae(n,mc);return o=typeof o=="function"?o:r,o&&l.pop(),l.length&&l[0]===n[0]?sc(l,r,o):[]});function kw(n,o){return n==null?"":Tb.call(n,o)}function mr(n){var o=n==null?0:n.length;return o?n[o-1]:r}function Nw(n,o,l){var d=n==null?0:n.length;if(!d)return-1;var S=d;return l!==r&&(S=Dt(l),S=S<0?Oe(d+S,0):De(S,d-1)),o===o?lb(n,o,S):ko(n,xp,S,!0)}function Rw(n,o){return n&&n.length?af(n,Dt(o)):r}var Pw=Lt(Zf);function Zf(n,o){return n&&n.length&&o&&o.length?lc(n,o):n}function Dw(n,o,l){return n&&n.length&&o&&o.length?lc(n,o,bt(l,2)):n}function jw(n,o,l){return n&&n.length&&o&&o.length?lc(n,o,r,l):n}var Uw=Gr(function(n,o){var l=n==null?0:n.length,d=rc(n,o);return lf(n,ae(o,function(S){return Qr(S,l)?+S:S}).sort(bf)),d});function Lw(n,o){var l=[];if(!(n&&n.length))return l;var d=-1,S=[],N=n.length;for(o=bt(o,3);++d<N;){var L=n[d];o(L,d,n)&&(l.push(L),S.push(d))}return lf(n,S),l}function kc(n){return n==null?n:kb.call(n)}function Bw(n,o,l){var d=n==null?0:n.length;return d?(l&&typeof l!="number"&&$e(n,o,l)?(o=0,l=d):(o=o==null?0:Dt(o),l=l===r?d:Dt(l)),gr(n,o,l)):[]}function Mw(n,o){return Ko(n,o)}function Fw(n,o,l){return dc(n,o,bt(l,2))}function qw(n,o){var l=n==null?0:n.length;if(l){var d=Ko(n,o);if(d<l&&kr(n[d],o))return d}return-1}function zw(n,o){return Ko(n,o,!0)}function Vw(n,o,l){return dc(n,o,bt(l,2),!0)}function $w(n,o){var l=n==null?0:n.length;if(l){var d=Ko(n,o,!0)-1;if(kr(n[d],o))return d}return-1}function Ww(n){return n&&n.length?ff(n):[]}function Yw(n,o){return n&&n.length?ff(n,bt(o,2)):[]}function Hw(n){var o=n==null?0:n.length;return o?gr(n,1,o):[]}function Gw(n,o,l){return n&&n.length?(o=l||o===r?1:Dt(o),gr(n,0,o<0?0:o)):[]}function Qw(n,o,l){var d=n==null?0:n.length;return d?(o=l||o===r?1:Dt(o),o=d-o,gr(n,o<0?0:o,d)):[]}function Kw(n,o){return n&&n.length?Zo(n,bt(o,3),!1,!0):[]}function Zw(n,o){return n&&n.length?Zo(n,bt(o,3)):[]}var Jw=Lt(function(n){return mn(ke(n,1,ge,!0))}),Xw=Lt(function(n){var o=mr(n);return ge(o)&&(o=r),mn(ke(n,1,ge,!0),bt(o,2))}),t1=Lt(function(n){var o=mr(n);return o=typeof o=="function"?o:r,mn(ke(n,1,ge,!0),r,o)});function e1(n){return n&&n.length?mn(n):[]}function r1(n,o){return n&&n.length?mn(n,bt(o,2)):[]}function n1(n,o){return o=typeof o=="function"?o:r,n&&n.length?mn(n,r,o):[]}function Nc(n){if(!(n&&n.length))return[];var o=0;return n=pn(n,function(l){if(ge(l))return o=Oe(l.length,o),!0}),Ga(o,function(l){return ae(n,Wa(l))})}function Jf(n,o){if(!(n&&n.length))return[];var l=Nc(n);return o==null?l:ae(l,function(d){return er(o,r,d)})}var i1=Lt(function(n,o){return ge(n)?Mi(n,o):[]}),o1=Lt(function(n){return gc(pn(n,ge))}),s1=Lt(function(n){var o=mr(n);return ge(o)&&(o=r),gc(pn(n,ge),bt(o,2))}),a1=Lt(function(n){var o=mr(n);return o=typeof o=="function"?o:r,gc(pn(n,ge),r,o)}),c1=Lt(Nc);function u1(n,o){return mf(n||[],o||[],Bi)}function l1(n,o){return mf(n||[],o||[],zi)}var p1=Lt(function(n){var o=n.length,l=o>1?n[o-1]:r;return l=typeof l=="function"?(n.pop(),l):r,Jf(n,l)});function Xf(n){var o=C(n);return o.__chain__=!0,o}function f1(n,o){return o(n),n}function ss(n,o){return o(n)}var d1=Gr(function(n){var o=n.length,l=o?n[0]:0,d=this.__wrapped__,S=function(N){return rc(N,n)};return o>1||this.__actions__.length||!(d instanceof qt)||!Qr(l)?this.thru(S):(d=d.slice(l,+l+(o?1:0)),d.__actions__.push({func:ss,args:[S],thisArg:r}),new dr(d,this.__chain__).thru(function(N){return o&&!N.length&&N.push(r),N}))});function h1(){return Xf(this)}function g1(){return new dr(this.value(),this.__chain__)}function m1(){this.__values__===r&&(this.__values__=dd(this.value()));var n=this.__index__>=this.__values__.length,o=n?r:this.__values__[this.__index__++];return{done:n,value:o}}function _1(){return this}function y1(n){for(var o,l=this;l instanceof Wo;){var d=Yf(l);d.__index__=0,d.__values__=r,o?S.__wrapped__=d:o=d;var S=d;l=l.__wrapped__}return S.__wrapped__=n,o}function v1(){var n=this.__wrapped__;if(n instanceof qt){var o=n;return this.__actions__.length&&(o=new qt(this)),o=o.reverse(),o.__actions__.push({func:ss,args:[kc],thisArg:r}),new dr(o,this.__chain__)}return this.thru(kc)}function b1(){return gf(this.__wrapped__,this.__actions__)}var w1=Jo(function(n,o,l){Qt.call(n,l)?++n[l]:Yr(n,l,1)});function S1(n,o,l){var d=Nt(n)?Ap:f0;return l&&$e(n,o,l)&&(o=r),d(n,bt(o,3))}function E1(n,o){var l=Nt(n)?pn:Zp;return l(n,bt(o,3))}var I1=Tf(Hf),O1=Tf(Gf);function T1(n,o){return ke(as(n,o),1)}function A1(n,o){return ke(as(n,o),yt)}function C1(n,o,l){return l=l===r?1:Dt(l),ke(as(n,o),l)}function td(n,o){var l=Nt(n)?pr:gn;return l(n,bt(o,3))}function ed(n,o){var l=Nt(n)?Hv:Kp;return l(n,bt(o,3))}var x1=Jo(function(n,o,l){Qt.call(n,l)?n[l].push(o):Yr(n,l,[o])});function k1(n,o,l,d){n=Qe(n)?n:hi(n),l=l&&!d?Dt(l):0;var S=n.length;return l<0&&(l=Oe(S+l,0)),fs(n)?l<=S&&n.indexOf(o,l)>-1:!!S&&ri(n,o,l)>-1}var N1=Lt(function(n,o,l){var d=-1,S=typeof o=="function",N=Qe(n)?K(n.length):[];return gn(n,function(L){N[++d]=S?er(o,L,l):Fi(L,o,l)}),N}),R1=Jo(function(n,o,l){Yr(n,l,o)});function as(n,o){var l=Nt(n)?ae:nf;return l(n,bt(o,3))}function P1(n,o,l,d){return n==null?[]:(Nt(o)||(o=o==null?[]:[o]),l=d?r:l,Nt(l)||(l=l==null?[]:[l]),cf(n,o,l))}var D1=Jo(function(n,o,l){n[l?0:1].push(o)},function(){return[[],[]]});function j1(n,o,l){var d=Nt(n)?Va:Np,S=arguments.length<3;return d(n,bt(o,4),l,S,gn)}function U1(n,o,l){var d=Nt(n)?Gv:Np,S=arguments.length<3;return d(n,bt(o,4),l,S,Kp)}function L1(n,o){var l=Nt(n)?pn:Zp;return l(n,ls(bt(o,3)))}function B1(n){var o=Nt(n)?Yp:k0;return o(n)}function M1(n,o,l){(l?$e(n,o,l):o===r)?o=1:o=Dt(o);var d=Nt(n)?a0:N0;return d(n,o)}function F1(n){var o=Nt(n)?c0:P0;return o(n)}function q1(n){if(n==null)return 0;if(Qe(n))return fs(n)?ii(n):n.length;var o=je(n);return o==mt||o==se?n.size:cc(n).length}function z1(n,o,l){var d=Nt(n)?$a:D0;return l&&$e(n,o,l)&&(o=r),d(n,bt(o,3))}var V1=Lt(function(n,o){if(n==null)return[];var l=o.length;return l>1&&$e(n,o[0],o[1])?o=[]:l>2&&$e(o[0],o[1],o[2])&&(o=[o[0]]),cf(n,ke(o,1),[])}),cs=Eb||function(){return xe.Date.now()};function $1(n,o){if(typeof o!="function")throw new fr(c);return n=Dt(n),function(){if(--n<1)return o.apply(this,arguments)}}function rd(n,o,l){return o=l?r:o,o=n&&o==null?n.length:o,Hr(n,V,r,r,r,r,o)}function nd(n,o){var l;if(typeof o!="function")throw new fr(c);return n=Dt(n),function(){return--n>0&&(l=o.apply(this,arguments)),n<=1&&(o=r),l}}var Rc=Lt(function(n,o,l){var d=U;if(l.length){var S=dn(l,fi(Rc));d|=P}return Hr(n,d,o,l,S)}),id=Lt(function(n,o,l){var d=U|j;if(l.length){var S=dn(l,fi(id));d|=P}return Hr(o,d,n,l,S)});function od(n,o,l){o=l?r:o;var d=Hr(n,w,r,r,r,r,r,o);return d.placeholder=od.placeholder,d}function sd(n,o,l){o=l?r:o;var d=Hr(n,T,r,r,r,r,r,o);return d.placeholder=sd.placeholder,d}function ad(n,o,l){var d,S,N,L,M,W,nt=0,it=!1,ot=!1,pt=!0;if(typeof n!="function")throw new fr(c);o=_r(o)||0,le(l)&&(it=!!l.leading,ot="maxWait"in l,N=ot?Oe(_r(l.maxWait)||0,o):N,pt="trailing"in l?!!l.trailing:pt);function gt(me){var Nr=d,Jr=S;return d=S=r,nt=me,L=n.apply(Jr,Nr),L}function St(me){return nt=me,M=Wi(Ft,o),it?gt(me):L}function Ut(me){var Nr=me-W,Jr=me-nt,Td=o-Nr;return ot?De(Td,N-Jr):Td}function Et(me){var Nr=me-W,Jr=me-nt;return W===r||Nr>=o||Nr<0||ot&&Jr>=N}function Ft(){var me=cs();if(Et(me))return zt(me);M=Wi(Ft,Ut(me))}function zt(me){return M=r,pt&&d?gt(me):(d=S=r,L)}function or(){M!==r&&_f(M),nt=0,d=W=S=M=r}function We(){return M===r?L:zt(cs())}function sr(){var me=cs(),Nr=Et(me);if(d=arguments,S=this,W=me,Nr){if(M===r)return St(W);if(ot)return _f(M),M=Wi(Ft,o),gt(W)}return M===r&&(M=Wi(Ft,o)),L}return sr.cancel=or,sr.flush=We,sr}var W1=Lt(function(n,o){return Qp(n,1,o)}),Y1=Lt(function(n,o,l){return Qp(n,_r(o)||0,l)});function H1(n){return Hr(n,b)}function us(n,o){if(typeof n!="function"||o!=null&&typeof o!="function")throw new fr(c);var l=function(){var d=arguments,S=o?o.apply(this,d):d[0],N=l.cache;if(N.has(S))return N.get(S);var L=n.apply(this,d);return l.cache=N.set(S,L)||N,L};return l.cache=new(us.Cache||Wr),l}us.Cache=Wr;function ls(n){if(typeof n!="function")throw new fr(c);return function(){var o=arguments;switch(o.length){case 0:return!n.call(this);case 1:return!n.call(this,o[0]);case 2:return!n.call(this,o[0],o[1]);case 3:return!n.call(this,o[0],o[1],o[2])}return!n.apply(this,o)}}function G1(n){return nd(2,n)}var Q1=j0(function(n,o){o=o.length==1&&Nt(o[0])?ae(o[0],rr(bt())):ae(ke(o,1),rr(bt()));var l=o.length;return Lt(function(d){for(var S=-1,N=De(d.length,l);++S<N;)d[S]=o[S].call(this,d[S]);return er(n,this,d)})}),Pc=Lt(function(n,o){var l=dn(o,fi(Pc));return Hr(n,P,r,o,l)}),cd=Lt(function(n,o){var l=dn(o,fi(cd));return Hr(n,F,r,o,l)}),K1=Gr(function(n,o){return Hr(n,Y,r,r,r,o)});function Z1(n,o){if(typeof n!="function")throw new fr(c);return o=o===r?o:Dt(o),Lt(n,o)}function J1(n,o){if(typeof n!="function")throw new fr(c);return o=o==null?0:Oe(Dt(o),0),Lt(function(l){var d=l[o],S=yn(l,0,o);return d&&fn(S,d),er(n,this,S)})}function X1(n,o,l){var d=!0,S=!0;if(typeof n!="function")throw new fr(c);return le(l)&&(d="leading"in l?!!l.leading:d,S="trailing"in l?!!l.trailing:S),ad(n,o,{leading:d,maxWait:o,trailing:S})}function tS(n){return rd(n,1)}function eS(n,o){return Pc(_c(o),n)}function rS(){if(!arguments.length)return[];var n=arguments[0];return Nt(n)?n:[n]}function nS(n){return hr(n,E)}function iS(n,o){return o=typeof o=="function"?o:r,hr(n,E,o)}function oS(n){return hr(n,h|E)}function sS(n,o){return o=typeof o=="function"?o:r,hr(n,h|E,o)}function aS(n,o){return o==null||Gp(n,o,Te(o))}function kr(n,o){return n===o||n!==n&&o!==o}var cS=rs(oc),uS=rs(function(n,o){return n>=o}),$n=tf(function(){return arguments}())?tf:function(n){return fe(n)&&Qt.call(n,"callee")&&!Fp.call(n,"callee")},Nt=K.isArray,lS=wp?rr(wp):y0;function Qe(n){return n!=null&&ps(n.length)&&!Kr(n)}function ge(n){return fe(n)&&Qe(n)}function pS(n){return n===!0||n===!1||fe(n)&&Ve(n)==I}var vn=Ob||$c,fS=Sp?rr(Sp):v0;function dS(n){return fe(n)&&n.nodeType===1&&!Yi(n)}function hS(n){if(n==null)return!0;if(Qe(n)&&(Nt(n)||typeof n=="string"||typeof n.splice=="function"||vn(n)||di(n)||$n(n)))return!n.length;var o=je(n);if(o==mt||o==se)return!n.size;if($i(n))return!cc(n).length;for(var l in n)if(Qt.call(n,l))return!1;return!0}function gS(n,o){return qi(n,o)}function mS(n,o,l){l=typeof l=="function"?l:r;var d=l?l(n,o):r;return d===r?qi(n,o,r,l):!!d}function Dc(n){if(!fe(n))return!1;var o=Ve(n);return o==wt||o==z||typeof n.message=="string"&&typeof n.name=="string"&&!Yi(n)}function _S(n){return typeof n=="number"&&zp(n)}function Kr(n){if(!le(n))return!1;var o=Ve(n);return o==kt||o==Pt||o==k||o==Tr}function ud(n){return typeof n=="number"&&n==Dt(n)}function ps(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=jt}function le(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")}function fe(n){return n!=null&&typeof n=="object"}var ld=Ep?rr(Ep):w0;function yS(n,o){return n===o||ac(n,o,Ic(o))}function vS(n,o,l){return l=typeof l=="function"?l:r,ac(n,o,Ic(o),l)}function bS(n){return pd(n)&&n!=+n}function wS(n){if(iw(n))throw new At(s);return ef(n)}function SS(n){return n===null}function ES(n){return n==null}function pd(n){return typeof n=="number"||fe(n)&&Ve(n)==Wt}function Yi(n){if(!fe(n)||Ve(n)!=vt)return!1;var o=Bo(n);if(o===null)return!0;var l=Qt.call(o,"constructor")&&o.constructor;return typeof l=="function"&&l instanceof l&&Do.call(l)==vb}var jc=Ip?rr(Ip):S0;function IS(n){return ud(n)&&n>=-jt&&n<=jt}var fd=Op?rr(Op):E0;function fs(n){return typeof n=="string"||!Nt(n)&&fe(n)&&Ve(n)==Yt}function ir(n){return typeof n=="symbol"||fe(n)&&Ve(n)==Ar}var di=Tp?rr(Tp):I0;function OS(n){return n===r}function TS(n){return fe(n)&&je(n)==Pe}function AS(n){return fe(n)&&Ve(n)==Vr}var CS=rs(uc),xS=rs(function(n,o){return n<=o});function dd(n){if(!n)return[];if(Qe(n))return fs(n)?Cr(n):Ge(n);if(Pi&&n[Pi])return ab(n[Pi]());var o=je(n),l=o==mt?Ka:o==se?No:hi;return l(n)}function Zr(n){if(!n)return n===0?n:0;if(n=_r(n),n===yt||n===-yt){var o=n<0?-1:1;return o*ze}return n===n?n:0}function Dt(n){var o=Zr(n),l=o%1;return o===o?l?o-l:o:0}function hd(n){return n?Fn(Dt(n),0,q):0}function _r(n){if(typeof n=="number")return n;if(ir(n))return _e;if(le(n)){var o=typeof n.valueOf=="function"?n.valueOf():n;n=le(o)?o+"":o}if(typeof n!="string")return n===0?n:+n;n=Rp(n);var l=lv.test(n);return l||fv.test(n)?$v(n.slice(2),l?2:8):uv.test(n)?_e:+n}function gd(n){return Br(n,Ke(n))}function kS(n){return n?Fn(Dt(n),-jt,jt):n===0?n:0}function Gt(n){return n==null?"":nr(n)}var NS=li(function(n,o){if($i(o)||Qe(o)){Br(o,Te(o),n);return}for(var l in o)Qt.call(o,l)&&Bi(n,l,o[l])}),md=li(function(n,o){Br(o,Ke(o),n)}),ds=li(function(n,o,l,d){Br(o,Ke(o),n,d)}),RS=li(function(n,o,l,d){Br(o,Te(o),n,d)}),PS=Gr(rc);function DS(n,o){var l=ui(n);return o==null?l:Hp(l,o)}var jS=Lt(function(n,o){n=te(n);var l=-1,d=o.length,S=d>2?o[2]:r;for(S&&$e(o[0],o[1],S)&&(d=1);++l<d;)for(var N=o[l],L=Ke(N),M=-1,W=L.length;++M<W;){var nt=L[M],it=n[nt];(it===r||kr(it,si[nt])&&!Qt.call(n,nt))&&(n[nt]=N[nt])}return n}),US=Lt(function(n){return n.push(r,Pf),er(_d,r,n)});function LS(n,o){return Cp(n,bt(o,3),Lr)}function BS(n,o){return Cp(n,bt(o,3),ic)}function MS(n,o){return n==null?n:nc(n,bt(o,3),Ke)}function FS(n,o){return n==null?n:Jp(n,bt(o,3),Ke)}function qS(n,o){return n&&Lr(n,bt(o,3))}function zS(n,o){return n&&ic(n,bt(o,3))}function VS(n){return n==null?[]:Go(n,Te(n))}function $S(n){return n==null?[]:Go(n,Ke(n))}function Uc(n,o,l){var d=n==null?r:qn(n,o);return d===r?l:d}function WS(n,o){return n!=null&&Uf(n,o,h0)}function Lc(n,o){return n!=null&&Uf(n,o,g0)}var YS=Cf(function(n,o,l){o!=null&&typeof o.toString!="function"&&(o=jo.call(o)),n[o]=l},Mc(Ze)),HS=Cf(function(n,o,l){o!=null&&typeof o.toString!="function"&&(o=jo.call(o)),Qt.call(n,o)?n[o].push(l):n[o]=[l]},bt),GS=Lt(Fi);function Te(n){return Qe(n)?Wp(n):cc(n)}function Ke(n){return Qe(n)?Wp(n,!0):O0(n)}function QS(n,o){var l={};return o=bt(o,3),Lr(n,function(d,S,N){Yr(l,o(d,S,N),d)}),l}function KS(n,o){var l={};return o=bt(o,3),Lr(n,function(d,S,N){Yr(l,S,o(d,S,N))}),l}var ZS=li(function(n,o,l){Qo(n,o,l)}),_d=li(function(n,o,l,d){Qo(n,o,l,d)}),JS=Gr(function(n,o){var l={};if(n==null)return l;var d=!1;o=ae(o,function(N){return N=_n(N,n),d||(d=N.length>1),N}),Br(n,Sc(n),l),d&&(l=hr(l,h|y|E,Y0));for(var S=o.length;S--;)hc(l,o[S]);return l});function XS(n,o){return yd(n,ls(bt(o)))}var tE=Gr(function(n,o){return n==null?{}:A0(n,o)});function yd(n,o){if(n==null)return{};var l=ae(Sc(n),function(d){return[d]});return o=bt(o),uf(n,l,function(d,S){return o(d,S[0])})}function eE(n,o,l){o=_n(o,n);var d=-1,S=o.length;for(S||(S=1,n=r);++d<S;){var N=n==null?r:n[Mr(o[d])];N===r&&(d=S,N=l),n=Kr(N)?N.call(n):N}return n}function rE(n,o,l){return n==null?n:zi(n,o,l)}function nE(n,o,l,d){return d=typeof d=="function"?d:r,n==null?n:zi(n,o,l,d)}var vd=Nf(Te),bd=Nf(Ke);function iE(n,o,l){var d=Nt(n),S=d||vn(n)||di(n);if(o=bt(o,4),l==null){var N=n&&n.constructor;S?l=d?new N:[]:le(n)?l=Kr(N)?ui(Bo(n)):{}:l={}}return(S?pr:Lr)(n,function(L,M,W){return o(l,L,M,W)}),l}function oE(n,o){return n==null?!0:hc(n,o)}function sE(n,o,l){return n==null?n:hf(n,o,_c(l))}function aE(n,o,l,d){return d=typeof d=="function"?d:r,n==null?n:hf(n,o,_c(l),d)}function hi(n){return n==null?[]:Qa(n,Te(n))}function cE(n){return n==null?[]:Qa(n,Ke(n))}function uE(n,o,l){return l===r&&(l=o,o=r),l!==r&&(l=_r(l),l=l===l?l:0),o!==r&&(o=_r(o),o=o===o?o:0),Fn(_r(n),o,l)}function lE(n,o,l){return o=Zr(o),l===r?(l=o,o=0):l=Zr(l),n=_r(n),m0(n,o,l)}function pE(n,o,l){if(l&&typeof l!="boolean"&&$e(n,o,l)&&(o=l=r),l===r&&(typeof o=="boolean"?(l=o,o=r):typeof n=="boolean"&&(l=n,n=r)),n===r&&o===r?(n=0,o=1):(n=Zr(n),o===r?(o=n,n=0):o=Zr(o)),n>o){var d=n;n=o,o=d}if(l||n%1||o%1){var S=Vp();return De(n+S*(o-n+Vv("1e-"+((S+"").length-1))),o)}return pc(n,o)}var fE=pi(function(n,o,l){return o=o.toLowerCase(),n+(l?wd(o):o)});function wd(n){return Bc(Gt(n).toLowerCase())}function Sd(n){return n=Gt(n),n&&n.replace(hv,rb).replace(Pv,"")}function dE(n,o,l){n=Gt(n),o=nr(o);var d=n.length;l=l===r?d:Fn(Dt(l),0,d);var S=l;return l-=o.length,l>=0&&n.slice(l,S)==o}function hE(n){return n=Gt(n),n&&Gy.test(n)?n.replace(Jl,nb):n}function gE(n){return n=Gt(n),n&&tv.test(n)?n.replace(Pa,"\\$&"):n}var mE=pi(function(n,o,l){return n+(l?"-":"")+o.toLowerCase()}),_E=pi(function(n,o,l){return n+(l?" ":"")+o.toLowerCase()}),yE=Of("toLowerCase");function vE(n,o,l){n=Gt(n),o=Dt(o);var d=o?ii(n):0;if(!o||d>=o)return n;var S=(o-d)/2;return es(zo(S),l)+n+es(qo(S),l)}function bE(n,o,l){n=Gt(n),o=Dt(o);var d=o?ii(n):0;return o&&d<o?n+es(o-d,l):n}function wE(n,o,l){n=Gt(n),o=Dt(o);var d=o?ii(n):0;return o&&d<o?es(o-d,l)+n:n}function SE(n,o,l){return l||o==null?o=0:o&&(o=+o),xb(Gt(n).replace(Da,""),o||0)}function EE(n,o,l){return(l?$e(n,o,l):o===r)?o=1:o=Dt(o),fc(Gt(n),o)}function IE(){var n=arguments,o=Gt(n[0]);return n.length<3?o:o.replace(n[1],n[2])}var OE=pi(function(n,o,l){return n+(l?"_":"")+o.toLowerCase()});function TE(n,o,l){return l&&typeof l!="number"&&$e(n,o,l)&&(o=l=r),l=l===r?q:l>>>0,l?(n=Gt(n),n&&(typeof o=="string"||o!=null&&!jc(o))&&(o=nr(o),!o&&ni(n))?yn(Cr(n),0,l):n.split(o,l)):[]}var AE=pi(function(n,o,l){return n+(l?" ":"")+Bc(o)});function CE(n,o,l){return n=Gt(n),l=l==null?0:Fn(Dt(l),0,n.length),o=nr(o),n.slice(l,l+o.length)==o}function xE(n,o,l){var d=C.templateSettings;l&&$e(n,o,l)&&(o=r),n=Gt(n),o=ds({},o,d,Rf);var S=ds({},o.imports,d.imports,Rf),N=Te(S),L=Qa(S,N),M,W,nt=0,it=o.interpolate||To,ot="__p += '",pt=Za((o.escape||To).source+"|"+it.source+"|"+(it===Xl?cv:To).source+"|"+(o.evaluate||To).source+"|$","g"),gt="//# sourceURL="+(Qt.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Bv+"]")+`
`;n.replace(pt,function(Et,Ft,zt,or,We,sr){return zt||(zt=or),ot+=n.slice(nt,sr).replace(gv,ib),Ft&&(M=!0,ot+=`' +
__e(`+Ft+`) +
'`),We&&(W=!0,ot+=`';
`+We+`;
__p += '`),zt&&(ot+=`' +
((__t = (`+zt+`)) == null ? '' : __t) +
'`),nt=sr+Et.length,Et}),ot+=`';
`;var St=Qt.call(o,"variable")&&o.variable;if(!St)ot=`with (obj) {
`+ot+`
}
`;else if(sv.test(St))throw new At(u);ot=(W?ot.replace(pe,""):ot).replace(Wy,"$1").replace(Yy,"$1;"),ot="function("+(St||"obj")+`) {
`+(St?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(M?", __e = _.escape":"")+(W?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ot+`return __p
}`;var Ut=Id(function(){return $t(N,gt+"return "+ot).apply(r,L)});if(Ut.source=ot,Dc(Ut))throw Ut;return Ut}function kE(n){return Gt(n).toLowerCase()}function NE(n){return Gt(n).toUpperCase()}function RE(n,o,l){if(n=Gt(n),n&&(l||o===r))return Rp(n);if(!n||!(o=nr(o)))return n;var d=Cr(n),S=Cr(o),N=Pp(d,S),L=Dp(d,S)+1;return yn(d,N,L).join("")}function PE(n,o,l){if(n=Gt(n),n&&(l||o===r))return n.slice(0,Up(n)+1);if(!n||!(o=nr(o)))return n;var d=Cr(n),S=Dp(d,Cr(o))+1;return yn(d,0,S).join("")}function DE(n,o,l){if(n=Gt(n),n&&(l||o===r))return n.replace(Da,"");if(!n||!(o=nr(o)))return n;var d=Cr(n),S=Pp(d,Cr(o));return yn(d,S).join("")}function jE(n,o){var l=G,d=et;if(le(o)){var S="separator"in o?o.separator:S;l="length"in o?Dt(o.length):l,d="omission"in o?nr(o.omission):d}n=Gt(n);var N=n.length;if(ni(n)){var L=Cr(n);N=L.length}if(l>=N)return n;var M=l-ii(d);if(M<1)return d;var W=L?yn(L,0,M).join(""):n.slice(0,M);if(S===r)return W+d;if(L&&(M+=W.length-M),jc(S)){if(n.slice(M).search(S)){var nt,it=W;for(S.global||(S=Za(S.source,Gt(tp.exec(S))+"g")),S.lastIndex=0;nt=S.exec(it);)var ot=nt.index;W=W.slice(0,ot===r?M:ot)}}else if(n.indexOf(nr(S),M)!=M){var pt=W.lastIndexOf(S);pt>-1&&(W=W.slice(0,pt))}return W+d}function UE(n){return n=Gt(n),n&&Hy.test(n)?n.replace(Zl,pb):n}var LE=pi(function(n,o,l){return n+(l?" ":"")+o.toUpperCase()}),Bc=Of("toUpperCase");function Ed(n,o,l){return n=Gt(n),o=l?r:o,o===r?sb(n)?hb(n):Zv(n):n.match(o)||[]}var Id=Lt(function(n,o){try{return er(n,r,o)}catch(l){return Dc(l)?l:new At(l)}}),BE=Gr(function(n,o){return pr(o,function(l){l=Mr(l),Yr(n,l,Rc(n[l],n))}),n});function ME(n){var o=n==null?0:n.length,l=bt();return n=o?ae(n,function(d){if(typeof d[1]!="function")throw new fr(c);return[l(d[0]),d[1]]}):[],Lt(function(d){for(var S=-1;++S<o;){var N=n[S];if(er(N[0],this,d))return er(N[1],this,d)}})}function FE(n){return p0(hr(n,h))}function Mc(n){return function(){return n}}function qE(n,o){return n==null||n!==n?o:n}var zE=Af(),VE=Af(!0);function Ze(n){return n}function Fc(n){return rf(typeof n=="function"?n:hr(n,h))}function $E(n){return of(hr(n,h))}function WE(n,o){return sf(n,hr(o,h))}var YE=Lt(function(n,o){return function(l){return Fi(l,n,o)}}),HE=Lt(function(n,o){return function(l){return Fi(n,l,o)}});function qc(n,o,l){var d=Te(o),S=Go(o,d);l==null&&!(le(o)&&(S.length||!d.length))&&(l=o,o=n,n=this,S=Go(o,Te(o)));var N=!(le(l)&&"chain"in l)||!!l.chain,L=Kr(n);return pr(S,function(M){var W=o[M];n[M]=W,L&&(n.prototype[M]=function(){var nt=this.__chain__;if(N||nt){var it=n(this.__wrapped__),ot=it.__actions__=Ge(this.__actions__);return ot.push({func:W,args:arguments,thisArg:n}),it.__chain__=nt,it}return W.apply(n,fn([this.value()],arguments))})}),n}function GE(){return xe._===this&&(xe._=bb),this}function zc(){}function QE(n){return n=Dt(n),Lt(function(o){return af(o,n)})}var KE=vc(ae),ZE=vc(Ap),JE=vc($a);function Od(n){return Tc(n)?Wa(Mr(n)):C0(n)}function XE(n){return function(o){return n==null?r:qn(n,o)}}var tI=xf(),eI=xf(!0);function Vc(){return[]}function $c(){return!1}function rI(){return{}}function nI(){return""}function iI(){return!0}function oI(n,o){if(n=Dt(n),n<1||n>jt)return[];var l=q,d=De(n,q);o=bt(o),n-=q;for(var S=Ga(d,o);++l<n;)o(l);return S}function sI(n){return Nt(n)?ae(n,Mr):ir(n)?[n]:Ge(Wf(Gt(n)))}function aI(n){var o=++yb;return Gt(n)+o}var cI=ts(function(n,o){return n+o},0),uI=bc("ceil"),lI=ts(function(n,o){return n/o},1),pI=bc("floor");function fI(n){return n&&n.length?Ho(n,Ze,oc):r}function dI(n,o){return n&&n.length?Ho(n,bt(o,2),oc):r}function hI(n){return kp(n,Ze)}function gI(n,o){return kp(n,bt(o,2))}function mI(n){return n&&n.length?Ho(n,Ze,uc):r}function _I(n,o){return n&&n.length?Ho(n,bt(o,2),uc):r}var yI=ts(function(n,o){return n*o},1),vI=bc("round"),bI=ts(function(n,o){return n-o},0);function wI(n){return n&&n.length?Ha(n,Ze):0}function SI(n,o){return n&&n.length?Ha(n,bt(o,2)):0}return C.after=$1,C.ary=rd,C.assign=NS,C.assignIn=md,C.assignInWith=ds,C.assignWith=RS,C.at=PS,C.before=nd,C.bind=Rc,C.bindAll=BE,C.bindKey=id,C.castArray=rS,C.chain=Xf,C.chunk=pw,C.compact=fw,C.concat=dw,C.cond=ME,C.conforms=FE,C.constant=Mc,C.countBy=w1,C.create=DS,C.curry=od,C.curryRight=sd,C.debounce=ad,C.defaults=jS,C.defaultsDeep=US,C.defer=W1,C.delay=Y1,C.difference=hw,C.differenceBy=gw,C.differenceWith=mw,C.drop=_w,C.dropRight=yw,C.dropRightWhile=vw,C.dropWhile=bw,C.fill=ww,C.filter=E1,C.flatMap=T1,C.flatMapDeep=A1,C.flatMapDepth=C1,C.flatten=Qf,C.flattenDeep=Sw,C.flattenDepth=Ew,C.flip=H1,C.flow=zE,C.flowRight=VE,C.fromPairs=Iw,C.functions=VS,C.functionsIn=$S,C.groupBy=x1,C.initial=Tw,C.intersection=Aw,C.intersectionBy=Cw,C.intersectionWith=xw,C.invert=YS,C.invertBy=HS,C.invokeMap=N1,C.iteratee=Fc,C.keyBy=R1,C.keys=Te,C.keysIn=Ke,C.map=as,C.mapKeys=QS,C.mapValues=KS,C.matches=$E,C.matchesProperty=WE,C.memoize=us,C.merge=ZS,C.mergeWith=_d,C.method=YE,C.methodOf=HE,C.mixin=qc,C.negate=ls,C.nthArg=QE,C.omit=JS,C.omitBy=XS,C.once=G1,C.orderBy=P1,C.over=KE,C.overArgs=Q1,C.overEvery=ZE,C.overSome=JE,C.partial=Pc,C.partialRight=cd,C.partition=D1,C.pick=tE,C.pickBy=yd,C.property=Od,C.propertyOf=XE,C.pull=Pw,C.pullAll=Zf,C.pullAllBy=Dw,C.pullAllWith=jw,C.pullAt=Uw,C.range=tI,C.rangeRight=eI,C.rearg=K1,C.reject=L1,C.remove=Lw,C.rest=Z1,C.reverse=kc,C.sampleSize=M1,C.set=rE,C.setWith=nE,C.shuffle=F1,C.slice=Bw,C.sortBy=V1,C.sortedUniq=Ww,C.sortedUniqBy=Yw,C.split=TE,C.spread=J1,C.tail=Hw,C.take=Gw,C.takeRight=Qw,C.takeRightWhile=Kw,C.takeWhile=Zw,C.tap=f1,C.throttle=X1,C.thru=ss,C.toArray=dd,C.toPairs=vd,C.toPairsIn=bd,C.toPath=sI,C.toPlainObject=gd,C.transform=iE,C.unary=tS,C.union=Jw,C.unionBy=Xw,C.unionWith=t1,C.uniq=e1,C.uniqBy=r1,C.uniqWith=n1,C.unset=oE,C.unzip=Nc,C.unzipWith=Jf,C.update=sE,C.updateWith=aE,C.values=hi,C.valuesIn=cE,C.without=i1,C.words=Ed,C.wrap=eS,C.xor=o1,C.xorBy=s1,C.xorWith=a1,C.zip=c1,C.zipObject=u1,C.zipObjectDeep=l1,C.zipWith=p1,C.entries=vd,C.entriesIn=bd,C.extend=md,C.extendWith=ds,qc(C,C),C.add=cI,C.attempt=Id,C.camelCase=fE,C.capitalize=wd,C.ceil=uI,C.clamp=uE,C.clone=nS,C.cloneDeep=oS,C.cloneDeepWith=sS,C.cloneWith=iS,C.conformsTo=aS,C.deburr=Sd,C.defaultTo=qE,C.divide=lI,C.endsWith=dE,C.eq=kr,C.escape=hE,C.escapeRegExp=gE,C.every=S1,C.find=I1,C.findIndex=Hf,C.findKey=LS,C.findLast=O1,C.findLastIndex=Gf,C.findLastKey=BS,C.floor=pI,C.forEach=td,C.forEachRight=ed,C.forIn=MS,C.forInRight=FS,C.forOwn=qS,C.forOwnRight=zS,C.get=Uc,C.gt=cS,C.gte=uS,C.has=WS,C.hasIn=Lc,C.head=Kf,C.identity=Ze,C.includes=k1,C.indexOf=Ow,C.inRange=lE,C.invoke=GS,C.isArguments=$n,C.isArray=Nt,C.isArrayBuffer=lS,C.isArrayLike=Qe,C.isArrayLikeObject=ge,C.isBoolean=pS,C.isBuffer=vn,C.isDate=fS,C.isElement=dS,C.isEmpty=hS,C.isEqual=gS,C.isEqualWith=mS,C.isError=Dc,C.isFinite=_S,C.isFunction=Kr,C.isInteger=ud,C.isLength=ps,C.isMap=ld,C.isMatch=yS,C.isMatchWith=vS,C.isNaN=bS,C.isNative=wS,C.isNil=ES,C.isNull=SS,C.isNumber=pd,C.isObject=le,C.isObjectLike=fe,C.isPlainObject=Yi,C.isRegExp=jc,C.isSafeInteger=IS,C.isSet=fd,C.isString=fs,C.isSymbol=ir,C.isTypedArray=di,C.isUndefined=OS,C.isWeakMap=TS,C.isWeakSet=AS,C.join=kw,C.kebabCase=mE,C.last=mr,C.lastIndexOf=Nw,C.lowerCase=_E,C.lowerFirst=yE,C.lt=CS,C.lte=xS,C.max=fI,C.maxBy=dI,C.mean=hI,C.meanBy=gI,C.min=mI,C.minBy=_I,C.stubArray=Vc,C.stubFalse=$c,C.stubObject=rI,C.stubString=nI,C.stubTrue=iI,C.multiply=yI,C.nth=Rw,C.noConflict=GE,C.noop=zc,C.now=cs,C.pad=vE,C.padEnd=bE,C.padStart=wE,C.parseInt=SE,C.random=pE,C.reduce=j1,C.reduceRight=U1,C.repeat=EE,C.replace=IE,C.result=eE,C.round=vI,C.runInContext=$,C.sample=B1,C.size=q1,C.snakeCase=OE,C.some=z1,C.sortedIndex=Mw,C.sortedIndexBy=Fw,C.sortedIndexOf=qw,C.sortedLastIndex=zw,C.sortedLastIndexBy=Vw,C.sortedLastIndexOf=$w,C.startCase=AE,C.startsWith=CE,C.subtract=bI,C.sum=wI,C.sumBy=SI,C.template=xE,C.times=oI,C.toFinite=Zr,C.toInteger=Dt,C.toLength=hd,C.toLower=kE,C.toNumber=_r,C.toSafeInteger=kS,C.toString=Gt,C.toUpper=NE,C.trim=RE,C.trimEnd=PE,C.trimStart=DE,C.truncate=jE,C.unescape=UE,C.uniqueId=aI,C.upperCase=LE,C.upperFirst=Bc,C.each=td,C.eachRight=ed,C.first=Kf,qc(C,function(){var n={};return Lr(C,function(o,l){Qt.call(C.prototype,l)||(n[l]=o)}),n}(),{chain:!1}),C.VERSION=i,pr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){C[n].placeholder=C}),pr(["drop","take"],function(n,o){qt.prototype[n]=function(l){l=l===r?1:Oe(Dt(l),0);var d=this.__filtered__&&!o?new qt(this):this.clone();return d.__filtered__?d.__takeCount__=De(l,d.__takeCount__):d.__views__.push({size:De(l,q),type:n+(d.__dir__<0?"Right":"")}),d},qt.prototype[n+"Right"]=function(l){return this.reverse()[n](l).reverse()}}),pr(["filter","map","takeWhile"],function(n,o){var l=o+1,d=l==Tt||l==xt;qt.prototype[n]=function(S){var N=this.clone();return N.__iteratees__.push({iteratee:bt(S,3),type:l}),N.__filtered__=N.__filtered__||d,N}}),pr(["head","last"],function(n,o){var l="take"+(o?"Right":"");qt.prototype[n]=function(){return this[l](1).value()[0]}}),pr(["initial","tail"],function(n,o){var l="drop"+(o?"":"Right");qt.prototype[n]=function(){return this.__filtered__?new qt(this):this[l](1)}}),qt.prototype.compact=function(){return this.filter(Ze)},qt.prototype.find=function(n){return this.filter(n).head()},qt.prototype.findLast=function(n){return this.reverse().find(n)},qt.prototype.invokeMap=Lt(function(n,o){return typeof n=="function"?new qt(this):this.map(function(l){return Fi(l,n,o)})}),qt.prototype.reject=function(n){return this.filter(ls(bt(n)))},qt.prototype.slice=function(n,o){n=Dt(n);var l=this;return l.__filtered__&&(n>0||o<0)?new qt(l):(n<0?l=l.takeRight(-n):n&&(l=l.drop(n)),o!==r&&(o=Dt(o),l=o<0?l.dropRight(-o):l.take(o-n)),l)},qt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},qt.prototype.toArray=function(){return this.take(q)},Lr(qt.prototype,function(n,o){var l=/^(?:filter|find|map|reject)|While$/.test(o),d=/^(?:head|last)$/.test(o),S=C[d?"take"+(o=="last"?"Right":""):o],N=d||/^find/.test(o);S&&(C.prototype[o]=function(){var L=this.__wrapped__,M=d?[1]:arguments,W=L instanceof qt,nt=M[0],it=W||Nt(L),ot=function(Ft){var zt=S.apply(C,fn([Ft],M));return d&&pt?zt[0]:zt};it&&l&&typeof nt=="function"&&nt.length!=1&&(W=it=!1);var pt=this.__chain__,gt=!!this.__actions__.length,St=N&&!pt,Ut=W&&!gt;if(!N&&it){L=Ut?L:new qt(this);var Et=n.apply(L,M);return Et.__actions__.push({func:ss,args:[ot],thisArg:r}),new dr(Et,pt)}return St&&Ut?n.apply(this,M):(Et=this.thru(ot),St?d?Et.value()[0]:Et.value():Et)})}),pr(["pop","push","shift","sort","splice","unshift"],function(n){var o=Ro[n],l=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",d=/^(?:pop|shift)$/.test(n);C.prototype[n]=function(){var S=arguments;if(d&&!this.__chain__){var N=this.value();return o.apply(Nt(N)?N:[],S)}return this[l](function(L){return o.apply(Nt(L)?L:[],S)})}}),Lr(qt.prototype,function(n,o){var l=C[o];if(l){var d=l.name+"";Qt.call(ci,d)||(ci[d]=[]),ci[d].push({name:o,func:l})}}),ci[Xo(r,j).name]=[{name:"wrapper",func:r}],qt.prototype.clone=Ub,qt.prototype.reverse=Lb,qt.prototype.value=Bb,C.prototype.at=d1,C.prototype.chain=h1,C.prototype.commit=g1,C.prototype.next=m1,C.prototype.plant=y1,C.prototype.reverse=v1,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=b1,C.prototype.first=C.prototype.head,Pi&&(C.prototype[Pi]=_1),C},oi=gb();Un?((Un.exports=oi)._=oi,Fa._=oi):xe._=oi}).call(It)}(xa,xa.exports);var Uy=xa.exports;const Ly=Wc(Uy),HR=30,ka=Ye("scribeSelector/listScribesForSelector",async({searchQuery:t,skip:e,limit:r},{rejectWithValue:i})=>(await Io.listTextExportableScribes({searchQuery:t,skip:e,get_first:r||HR})).data),By=lt("scribeSelector/resetSelectorScribeList"),Ql={scribes:[],isLoading:!1,loadedAll:!1,searchQuery:"",isError:!1,errorMessage:null},GR=re({name:"scribeSelector",initialState:{...Ql},reducers:{},extraReducers:t=>{t.addCase(ka.fulfilled,(e,r)=>{r.payload.length===0?e.loadedAll=!0:e.loadedAll=!1;const i=e.scribes.length,a=r.meta.arg.searchQuery||"",s=r.payload;if(e.searchQuery!==a){const c=s.map((u,p)=>({...u,sort_order:p}));e.scribes=c}else{const c=s.map((u,p)=>({...u,sort_order:p+i}));e.scribes=Ly.sortBy(Ly.unionBy(c,e.scribes,"id"),"sort_order")}e.isLoading=!1,e.isError=!1,e.errorMessage=null,e.searchQuery=a}).addCase(ka.pending,e=>{e.isLoading=!0,e.isError=!1,e.errorMessage=null}).addCase(ka.rejected,(e,r)=>{e.scribes=[],e.isLoading=!1,e.isError=!0,e.errorMessage=null}).addCase(By,(e,r)=>({...Ql})).addCase(Bs,(e,r)=>({...Ql}))}}),QR=GR.reducer,KR=_t(t=>({scribes:t.scribeSelector.scribes,searchQuery:t.scribeSelector.searchQuery,isLoading:t.scribeSelector.isLoading,loadedAll:t.scribeSelector.loadedAll}),t=>t),ZR=_t(t=>t.scribeViewer,t=>t),JR=450,My={collapsed:!1,stepHash:void 0,scribe:void 0,position:Uu.RIGHT,width:JR,progress:0},XR=re({name:"scribeViewer",initialState:My,reducers:{collapseViewer:(t,e)=>{t.collapsed=!0},expandViewer:(t,e)=>{t.collapsed=!1},setViewerPosition:(t,e)=>{t.position=e.payload},setProgress:(t,e)=>{t.progress=e.payload.progress,t.stepHash=e.payload.stepHash},startViewer:(t,e)=>{t.collapsed=!1,t.stepHash=void 0,t.scribe=e.payload,t.collapsed=!1},setViewerWidth:(t,e)=>{t.width=e.payload}},extraReducers:t=>{t.addCase(no,(e,r)=>{Object.assign(e,My)}).addCase(ve,(e,r)=>{var i;Object.assign(e,(i=r.payload)==null?void 0:i.scribeViewer),r.payload.scribeViewer.stepHash||(e.stepHash=void 0)})}}),tP=XR.reducer,eP=_t(t=>t.sidebar,t=>t),rP={sidebarWindowId:void 0,contentWindowId:void 0,originalContentWindowWidth:void 0},nP=re({name:"sidebar",initialState:rP,reducers:{initializeSidebar:(t,e)=>{t.originalContentWindowWidth=e.payload.originalContentWindowWidth,t.sidebarWindowId=e.payload.sidebarWindowId,t.contentWindowId=e.payload.contentWindowId}}}),iP=nP.reducer;_t(t=>t.sidepanel,t=>t);const oP={frameContentUrl:"sheesh"},sP=re({name:"sidepanel",initialState:oP,reducers:{initializeSidepanel:(t,e)=>{t.frameContentUrl=e.payload.frameContentUrl}}}),aP=sP.reducer,Fy={isAnalyzing:!1,taskId:null,error:null},qy=re({name:"suggestedScribesTask",initialState:{...Fy},reducers:{started:(t,e)=>{var r;t.isAnalyzing=!0,t.taskId=((r=e.payload)==null?void 0:r.taskId)||null,t.error=null},completed:t=>{t.isAnalyzing=!1,t.error=null},failed:(t,e)=>{var r;t.isAnalyzing=!1,t.error=((r=e.payload)==null?void 0:r.error)||"Unknown error"},reset:()=>({...Fy})},extraReducers:t=>{t.addCase(ve,(e,r)=>{r.payload&&r.payload.suggestedScribesTask&&Object.assign(e,r.payload.suggestedScribesTask)})}});qy.actions;const cP=qy.reducer;var Na=(t=>(t.DISCRETE="DISCRETE",t.BULK="BULK",t))(Na||{});const Kl=(t,e={})=>chrome.runtime.sendMessage({messageType:"trackMixpanelEvent",name:t,details:e}),ki={inviteUser:async({email:t,teamId:e,message:r,permissionLevel:i,location:a})=>Re("scribe_invite/","POST",{email:t,organization_id:e,message:r,permission_level:i,location:a}),sendInvites:async({invitations:t,teamId:e,location:r,invitationInputsState:i,bulkPermissionLevel:a})=>{let s={},c={};return Promise.all(Object.entries(t).map(([u,{email:p,permissionLevel:m,errors:g}])=>{const h=i===Na.BULK?a:m;return ki.inviteUser({email:p,teamId:e,permissionLevel:h,location:r}).then(()=>(c={...c,[u]:{email:p,permissionLevel:i===Na.BULK?a:m,errors:[...g]}},Kl("invite_teammate",{status:"success",organization_id:e,email:p,...r===""?{}:{location:r}}),!0)).catch(({data:y})=>(Kl("invite_teammate",{status:"failure",organization_id:e,email:p,...r===""?{}:{location:r}}),s={...s,[u]:{email:p,permissionLevel:m,errors:[...g]}},y[0]?s={...s,[u]:{email:p,permissionLevel:m,errors:[...g,`Error sending an invite to ${p}.
Reason: ${y[0]}`]}}:y.detail&&(s={...s,[u]:{email:p,permissionLevel:m,errors:[...g,y.detail]}}),!1))})).then(()=>({failedInvitations:s,sentInvitations:c}))},getTeamInvites:async t=>Re(`organizations/${t}/invites`,"GET"),deleteInvites:async t=>Re("scribe_invite/delete_invites/","POST",{invite_ids:t}),resendInvite:async t=>Re(`scribe_invite/${t}/resend_invite/`,"POST"),resendAllInvitesForTeam:async t=>Re(`organization/${t}/resend_invites/`,"POST")},jn=Ye("teamInvites/getTeamInvites",async({id:t})=>ki.getTeamInvites(t)),uP=Ye("teamInvites/deleteInvites",async({inviteIds:t,teamId:e},r)=>(await ki.deleteInvites(t),r.dispatch(jn({id:e})),t)),lP=Ye("teamInvites/resendInvite",async({inviteCode:t,teamId:e},r)=>(await ki.resendInvite(t),r.dispatch(jn({id:e})),t)),pP=Ye("teamInvites/resendAllInvitesForTeam",async({teamId:t},e)=>(await ki.resendAllInvitesForTeam(t),e.dispatch(jn({id:t})),t)),Ra=Ye("teamInvites/sendInvites",async({teamId:t,invitations:e,invitationInputsState:r,bulkPermissionLevel:i,location:a},s)=>{const c=await ki.sendInvites({teamId:t,invitations:e,invitationInputsState:r,bulkPermissionLevel:i,location:a});return s.dispatch(jn({id:t})),c}),fP={invites:[],isLoading:!1,isFetched:!1,error:null,sentInvitations:{},failedInvitations:{},isSending:!1},zy=re({name:"teamInvites",initialState:fP,reducers:{clearInviteState:t=>{t.sentInvitations={},t.failedInvitations={},t.error=null}},extraReducers:t=>{t.addCase(Ra.pending,e=>{e.isSending=!0,e.error=null}).addCase(Ra.fulfilled,(e,r)=>{e.isSending=!1,e.failedInvitations=r.payload.failedInvitations,e.sentInvitations=r.payload.sentInvitations}).addCase(Ra.rejected,(e,r)=>{e.isSending=!1,e.error=r.error.message||null}).addCase(jn.pending,e=>{e.isLoading=!e.isFetched&&e.invites.length===0,e.error=null}).addCase(jn.fulfilled,(e,r)=>{e.isLoading=!1,e.isFetched=!0,e.invites=r.payload}).addCase(jn.rejected,(e,r)=>{e.isLoading=!1,e.isFetched=!0,e.error=r.error.message||null})}});zy.actions;const dP=zy.reducer,Vy=Dd({auth:nC,browserContext:dC,domSettlement:SC,scribes:qR,recordingControls:Vk,scribeViewer:tP,modals:QC,scribeSelector:QR,options:vR,organization:SR,permissions:OR,extension:LC,flagsmith:aC,globalVariables:FC,recordingState:AN,existingScribe:TC,preFlightChecks:Fk,sidebar:iP,sidepanel:aP,task:RN,guideMe:VC,microphones:HC,pins:jR,suggestedScribesTask:cP,teamInvites:dP}),hP=(t,e)=>e.type==="PURGE_REDUX"?Vy(void 0,e):Vy(t,e);tT.createLogger({titleFormatter:(t,e,r)=>`[[ SCRIBE WIDGET ]] action ${t.type} @ ${e} (in ${r.toFixed(2)} ms)`});const gP=gT({key:"localStorage",storage:jT.localStorage,transforms:[],timeout:null},hP),ut=aO({reducer:gP,devTools:!0,middleware:t=>t({serializableCheck:{ignoredActions:[pu,Ts,fu,du,hu,gu]}}).concat(EC)});let $y;const mP=new Promise((t,e)=>{$y=t});function _P(){return mP}const yP=ST(ut,{manualPersist:!0},()=>{$y()});export{eg as $,Kt as A,dk as B,BN as C,un as D,wr as E,vo as F,vg as G,Fu as H,go as I,yP as J,ie as K,qs as L,kd as M,cx as N,io as O,Am as P,oN as Q,oo as R,Nd as S,ax as T,de as U,Uy as V,KR as W,ka as X,Io as Y,By as Z,AR as _,Hi as a,Ct as a$,YR as a0,VR as a1,MR as a2,Ca as a3,Ta as a4,iC as a5,xR as a6,TR as a7,JC as a8,RR as a9,uk as aA,iN as aB,Na as aC,lx as aD,Re as aE,Ye as aF,re as aG,Du as aH,Pu as aI,jn as aJ,Oa as aK,Ra as aL,lP as aM,uP as aN,pP as aO,vi as aP,px as aQ,tx as aR,gg as aS,$R as aT,Aa as aU,Bs as aV,ve as aW,Ms as aX,xd as aY,_R as aZ,gl as a_,CR as aa,kR as ab,NR as ac,lm as ad,nx as ae,la as af,ZC as ag,Mu as ah,KC as ai,Jn as aj,zs as ak,lt as al,Wk as am,ux as an,B2 as ao,lC as ap,mg as aq,ng as ar,ig as as,Ny as at,Zg as au,Py as av,Dy as aw,_t as ax,um as ay,fm as az,ym as b,$T as b$,Qk as b0,ex as b1,ox as b2,Zn as b3,dm as b4,$k as b5,hm as b6,fk as b7,Ki as b8,_i as b9,EA as bA,Yh as bB,Ls as bC,Ns as bD,ks as bE,yh as bF,to as bG,Kh as bH,sA as bI,YT as bJ,tA as bK,js as bL,Ih as bM,MA as bN,aA as bO,Dh as bP,UT as bQ,LT as bR,BT as bS,_h as bT,vh as bU,Uh as bV,rA as bW,Nh as bX,zh as bY,Eh as bZ,KT as b_,Iu as ba,wu as bb,Fr as bc,Rh as bd,He as be,Su as bf,XT as bg,Eu as bh,Ou as bi,vr as bj,wh as bk,xs as bl,gA as bm,Ur as bn,hA as bo,Sn as bp,En as bq,Zi as br,eA as bs,jh as bt,Ji as bu,_A as bv,br as bw,cA as bx,MT as by,yi as bz,Cd as c,_P as c$,jA as c0,QT as c1,iA as c2,FA as c3,qA as c4,AC as c5,ju as c6,ug as c7,da as c8,aN as c9,YN as cA,Yl as cB,$l as cC,ro as cD,eR as cE,Cy as cF,Dn as cG,ay as cH,en as cI,wm as cJ,CN as cK,Lu as cL,_g as cM,qu as cN,fg as cO,Xg as cP,iR as cQ,Ru as cR,tC as cS,BA as cT,XA as cU,xy as cV,Ek as cW,em as cX,Ik as cY,Tk as cZ,LN as c_,Fl as ca,Vl as cb,DA as cc,ce as cd,Wl as ce,sC as cf,tm as cg,nR as ch,gk as ci,mR as cj,Pk as ck,mo as cl,n2 as cm,Pn as cn,KO as co,hl as cp,WO as cq,pN as cr,Fs as cs,vC as ct,sg as cu,bC as cv,wC as cw,ag as cx,cg as cy,Iy as cz,tr as d,Vs as d$,Ia as d0,yN as d1,Em as d2,UA as d3,wN as d4,I2 as d5,rm as d6,ia as d7,sa as d8,aa as d9,am as dA,DO as dB,jk as dC,PO as dD,NO as dE,cm as dF,Dk as dG,ua as dH,kC as dI,NC as dJ,Uu as dK,PC as dL,ZR as dM,dg as dN,RC as dO,DC as dP,Rk as dQ,nN as dR,BR as dS,WR as dT,Ry as dU,no as dV,BO as dW,XO as dX,JO as dY,LO as dZ,vm as d_,Gg as da,So as db,Oi as dc,py as dd,Ea as de,Oy as df,Hl as dg,dR as dh,zN as di,m2 as dj,xk as dk,HO as dl,dl as dm,GO as dn,Jk as dp,hN as dq,WC as dr,EN as ds,xN as dt,Nk as du,kk as dv,Ty as dw,Lk as dx,YO as dy,CC as dz,wy as e,rx as e0,sm as e1,YC as e2,XC as e3,r2 as e4,MN as e5,vk as e6,xC as e7,QO as e8,_k as e9,yl as ea,t2 as eb,oh as ec,jO as ed,UO as ee,by as ef,Qg as eg,yg as eh,pk as ei,ra as ej,eP as ek,qk as el,ZO as em,SN as en,Ll as eo,xi as f,e2 as g,qN as h,sx as i,my as j,VN as k,WN as l,Xe as m,FN as n,UN as o,vy as p,Sy as q,Sa as r,ut as s,ma as t,$N as u,zR as v,Hn as w,wn as x,LA as y,Kl as z};
