import"./modulepreload-polyfill-3cfb730f.js";import{j as e}from"./Icon-f3e43e02.js";import{r as d,R as P}from"./index-8b3efc3f.js";import{c as M}from"./client-2e7161fd.js";import{u as z,P as B}from"./react-redux-52a3bd12.js";import{w as F,z as m,C as c,m as n,s as L}from"./store-f163b43d.js";import{p as W}from"./production-ca86ce5a.js";import{F as D}from"./FAIcon-609711c8.js";import{B as S}from"./Button-97d280d1.js";import{S as V,a as E,T as G}from"./TextArea-cc3d5eef.js";import{T as H}from"./Toolbar-58c4db6f.js";import"./_commonjsHelpers-de833af9.js";import"./v4-c70744d4.js";import"./index-e309a1d1.js";import"./index-50993b56.js";import"./index-3744168d.js";import"./index-3e4171d5.js";import"./index-9279c646.js";import"./index-eeca2896.js";const $=({reasons:l,onContinue:t,onSkip:p,user:u,onVisitWorkspaceDocuments:h,onGoToOptionsPage:x,onBack:f,icon:r="sparkle",iconVariant:s="duotone",iconColor:a="text-brand-300",additionalFeedbackLabel:j,additionalFeedbackPlaceholder:v,fullScreen:i=!1,title:_="Why did you reject that Scribe?",subtitle:y="Select all that are applicable."})=>{const[b,C]=d.useState([]),[g,N]=d.useState(""),R=d.useMemo(()=>{const o=l.includes("Other"),k=[...l.filter(O=>O!=="Other")].sort(()=>Math.random()-.5);return o?[...k,"Other"]:k},[l]),I=o=>{C(o)},T=b.length===0&&g.trim().length===0;return e.jsxs("div",{className:i?"w-full min-h-screen bg-slate-50 flex flex-col":"w-[360px] bg-slate-50 rounded-xl shadow-lg outline outline-1 outline-black/5 flex flex-col",children:[e.jsx("div",{className:"p-4",children:e.jsx(H,{user:u,onVisitWorkspaceDocuments:h??(()=>{}),onGoToOptionsPage:x??(()=>{}),showTeamSelector:!1,showHomeIcon:!1,showSettingsIcon:!1,onBack:f,centerContent:e.jsx("span",{})})}),e.jsxs("div",{className:i?"flex flex-col items-center justify-center px-12 pt-4 pb-12 gap-8 flex-1 max-w-[380px] mx-auto w-full":"flex flex-col items-center px-6 flex-1",children:[r&&!i&&e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx(D,{icon:r,variant:s,className:`text-4xl ${a}`})}),e.jsxs("div",{className:i?"text-center w-full flex flex-col gap-1":"text-center mb-6",children:[e.jsx("p",{className:i?"text-lg font-bold leading-7 m-0 text-slate-900":"text-lg font-bold leading-7 mb-1",children:_}),e.jsx("p",{className:"text-sm text-slate-600 m-0",children:y})]}),e.jsx("div",{className:"w-full",children:e.jsx(V,{type:"multiple",orientation:"vertical",onValueChange:I,value:b,children:R.map(o=>e.jsx(E,{value:o,label:o},o))})}),j&&e.jsx("div",{className:i?"w-full max-w-[284px]":"w-full",children:e.jsx(G,{label:j,placeholder:v,value:g,onChange:o=>N(o.target.value),rows:4,resize:!1})}),e.jsxs("div",{className:"w-full flex flex-col gap-3 mb-8 mt-8",children:[e.jsx(S,{variant:"primary",size:"large",onClick:()=>t(b,g),disabled:T,children:"Continue"}),e.jsx(S,{variant:"ghost",size:"large",onClick:p,children:"Skip"})]})]})]})},q=()=>{const{userData:l}=z(F),[t,p]=d.useState(null);d.useEffect(()=>{const r=()=>{try{chrome.runtime.sendMessage({messageType:"getDWOptimizeState"},async a=>{chrome.runtime.lastError||a!=null&&a.isOptimizeConfigured&&await c(n.Home)})}catch{}};r();const s=a=>{(a==null?void 0:a.messageType)==="optionsChanged"&&r()};try{chrome.runtime.onMessage.addListener(s)}catch{}return chrome.storage.local.get(["feedbackReturnState"]).then(a=>{a.feedbackReturnState&&p(a.feedbackReturnState)}),m("rejection_feedback_shown",{location:"sidepanel_rejection_feedback"}),()=>{try{chrome.runtime.onMessage.removeListener(s)}catch{}}},[]);const u=["Scribe topic not relevant","Too long","Too short","Missing steps","Scribe is inaccurate","Other"],h=async(r,s)=>{m("rejection_feedback_submitted",{location:"sidepanel_rejection_feedback",selected_reasons:r,reason_count:r.length,has_additional_feedback:!!s,additional_feedback_length:(s==null?void 0:s.length)||0}),await chrome.storage.local.remove(["feedbackReturnState"]),t!=null&&t.hasPendingScribes&&t.nextScribeId?(await chrome.storage.local.set({previewScribeId:t.nextScribeId}),await c(n.RecommendedScribesSuggestedPreview)):await c(n.RecommendedScribes)},x=async()=>{m("rejection_feedback_skipped",{location:"sidepanel_rejection_feedback"}),await chrome.storage.local.remove(["feedbackReturnState"]),t!=null&&t.hasPendingScribes&&t.nextScribeId?(await chrome.storage.local.set({previewScribeId:t.nextScribeId}),await c(n.RecommendedScribesSuggestedPreview)):await c(n.RecommendedScribes)},f=async()=>{m("rejection_feedback_back_clicked",{location:"sidepanel_rejection_feedback"}),await chrome.storage.local.remove(["feedbackReturnState"]),await c(n.RecommendedScribes)};return e.jsx($,{reasons:u,onContinue:h,onSkip:x,user:l,onBack:f,additionalFeedbackLabel:"What other issues did you have?",additionalFeedbackPlaceholder:"Let us know how we can improve",fullScreen:!0})},A=()=>e.jsxs(P.StrictMode,{children:[e.jsx("style",{type:"text/css",children:W}),e.jsx(B,{store:L,children:e.jsx(q,{})})]}),w=document.getElementById("root");w&&M(w).render(e.jsx(A,{}));
