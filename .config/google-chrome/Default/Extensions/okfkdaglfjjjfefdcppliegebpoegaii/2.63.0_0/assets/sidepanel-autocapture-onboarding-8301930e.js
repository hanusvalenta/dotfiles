import"./modulepreload-polyfill-3cfb730f.js";import{j as e,I as x}from"./Icon-f3e43e02.js";import{r as a,R as y}from"./index-8b3efc3f.js";import{c as N}from"./client-2e7161fd.js";import{u as _,P as k}from"./react-redux-52a3bd12.js";import{x as C,z as i,C as n,m as l,J as S,s as T}from"./store-f163b43d.js";import{p as B}from"./production-ca86ce5a.js";import{m as D,n as H}from"./index-eeca2896.js";import{a as P,B as c}from"./Button-97d280d1.js";import{A as z,a as I}from"./AllowedDomainsManagerAppTags-77ffb57f.js";import{T as M}from"./Toolbar-58c4db6f.js";import{s as h,a as f}from"./allowedDomainsDB-163b9f7f.js";import{s as W}from"./Chip-a9e6023b.js";import{B as E}from"./Badge-4b362304.js";import{B as O}from"./Banner-f157b97e.js";import{C as A}from"./Checkbox-8ee7413e.js";import"./_commonjsHelpers-de833af9.js";import"./v4-c70744d4.js";import"./appTagUtils-f127d137.js";import"./index-3744168d.js";import"./TextInput-abe61b07.js";import"./index-c8b043be.js";import"./options-d8a3c135.js";import"./index-0b89f2da.js";import"./index-9279c646.js";import"./index-6034fac0.js";import"./index-50993b56.js";const G=()=>{const m=_(t=>C(t).dwApptagUi),[o,d]=a.useState("defaultDenied"),[r,g]=a.useState([]),[b,w]=a.useState([]);a.useEffect(()=>{const t=()=>{try{chrome.runtime.sendMessage({messageType:"getDWOptimizeState"},async s=>{chrome.runtime.lastError||s!=null&&s.isOptimizeConfigured&&await n(l.Home)})}catch{}};t();const p=s=>{(s==null?void 0:s.messageType)==="optionsChanged"&&t()};try{chrome.runtime.onMessage.addListener(p)}catch{}return()=>{try{chrome.runtime.onMessage.removeListener(p)}catch{}}},[]);const j=async()=>{i("autocapture_onboarding_back_clicked",{location:"sidepanel_autocapture_onboarding"}),m?h([]):f([]),await n(l.Home)},v=async()=>{if(i("try_auto_capture_get_started_clicked",{location:"extension",allow_previous_scribes_for_suggestions_clicked:o==="consented",auto_capture_domains_added:r,domainsCount:r.length}),o!=="consented"){d("denied");return}await Promise.all([f(r),h(b),W(!0),n(l.Home)])};return e.jsxs("div",{className:"flex flex-col h-screen overflow-y-auto",children:[e.jsx("div",{className:"flex-none p-4",children:e.jsx(M,{onVisitWorkspaceDocuments:()=>{},onGoToOptionsPage:()=>{},onBack:j,showTeamSelector:!1,showHomeIcon:!1,showSettingsIcon:!1,centerContent:null})}),e.jsxs("div",{className:"flex-1 pt-6 px-6 flex flex-col grow items-center text-center min-h-0",children:[e.jsx("div",{className:"mb-10 flex justify-center items-center",children:e.jsxs("div",{className:"relative",children:[e.jsx(x,{icon:D,className:"text-[38px] text-brand-300"}),e.jsx("div",{className:"absolute -bottom-1 -right-3",children:e.jsx(x,{icon:P,className:"text-[28px] rounded-full text-brand-500",style:{stroke:"white",strokeWidth:"30"}})})]})}),e.jsxs("h3",{className:"text-lg font-bold leading-7 text-slate-800 m-0 mb-2 flex items-center gap-2",children:["Try Workflow Discovery ",e.jsx(E,{children:"Beta"})]}),e.jsx("div",{className:"min-w-[260px]",children:e.jsxs("p",{className:"text-slate-600 text-sm font-normal mb-10",children:["Get Scribes captured for you based on your ",e.jsx("br",{})," workflows on approved domains ",e.jsx("br",{}),"(and their subdomains)."]})}),e.jsxs("div",{className:"flex flex-col min-w-[280px] w-full text-left flex-1 min-h-0 relative",children:[e.jsx("h3",{className:"text-slate-600 text-[13px] font-semibold m-0 pb-2",children:"Your approved parent domains"}),m?e.jsx(z,{className:"w-full flex-1 min-h-0",maxChipHeight:"calc(100vh - 550px)",includeTopDomains:!0,onChange:w}):e.jsx(I,{className:"w-full flex-1 min-h-0",maxChipHeight:"calc(100vh - 550px)",includeTopDomains:!0,addButtonType:"text",onChange:g}),e.jsx("div",{className:"absolute -bottom-2 left-0 right-0 h-8 bg-gradient-to-t from-white to-white/0 pointer-events-none"})]})]}),e.jsxs("div",{className:"w-full flex flex-col flex-none items-center mx-auto mt-2 pb-10 backdrop-blur-xs bg-gradient-to-t from-white via-white/95 to-white/0",children:[e.jsxs("div",{className:"pb-6 px-6",children:[e.jsx(A,{checked:o==="consented",className:"mb-2",onCheckedChange:t=>{i("autocapture_onboarding_checkbox_toggled",{location:"sidepanel_autocapture_onboarding",checked:t===!0}),d(t===!0?"consented":"denied")},label:"Yes, capture workflows for me based on my activity on approved domains."}),e.jsx(c,{variant:"link",href:"https://support.scribehow.com/hc/en-us/articles/30708953411229-Using-discover-workflows",target:"_blank",rel:"noreferrer",className:"ml-4 text-slate-600 decoration-dotted",children:"Learn more about workflow capture"})]}),o==="denied"&&e.jsx("div",{className:"w-full px-6 pb-4",children:e.jsx(O,{title:"Please enable workflow capture",description:"",variant:"error"})}),e.jsx("div",{className:"px-6 w-full",children:e.jsx(c,{variant:"primary",icon:H,iconPosition:"right",onClick:v,className:"mt-auto text-[15px] py-3 m-auto w-full",size:"default",children:"Get Started!"})}),e.jsx("div",{className:"mt-3",children:e.jsx(c,{variant:"link",href:"https://scribehow.com/legal/privacy",target:"_blank",rel:"noreferrer",className:"text-slate-600 decoration-dotted",children:"Privacy policy"})})]})]})},L=()=>e.jsxs(y.StrictMode,{children:[e.jsx("style",{type:"text/css",children:B}),e.jsx(k,{store:T,children:e.jsx(G,{})})]});S.persist();const u=document.getElementById("root");u&&N(u).render(e.jsx(L,{}));
