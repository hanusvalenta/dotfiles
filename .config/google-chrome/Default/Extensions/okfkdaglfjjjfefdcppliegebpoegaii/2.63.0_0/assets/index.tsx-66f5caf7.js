var Ts;import{R as Lt,j as l,c as re,I as se,a as Lo,r as Fo}from"./Icon-f3e43e02.js";import{p as Is}from"./App.styles-7e62dbda.js";import{R as G,r as p}from"./index-8b3efc3f.js";import{a as zo,u as W,P as Rs}from"./react-redux-52a3bd12.js";import{R as Ms,K as Ft,T as Ns,t as te,V as Qn,w as zt,W as Ds,X as Bo,Y as As,Z as Os,_ as Jn,$ as Bt,z as Ce,a0 as Ls,v as Ho,a1 as Fs,a2 as zs,a3 as Bs,a4 as Hs,x as Ze,s as de,a5 as $s,a6 as Us,a7 as Vs,a8 as Gs,a9 as qs,aa as Ws,ab as Xs,ac as Ys,E as pe,U as $o,ad as Uo,ae as Ks,af as be,ag as Vo,ah as Go,ai as qo,aj as gn,ak as Qs,L as Js,al as Zs,am as el,an as tl,ao as nl,N as rl,m as bn,D as Wo,ap as ol,aq as al,ar as il,as as sl,at as ll,au as cl,y as ul}from"./store-f163b43d.js";import{s as dl}from"./options-d8a3c135.js";import{m as Ht}from"./index-24f6db5b.js";import{a as pl,B as oe,g as fl,h as ml,i as Zn,j as hl,k as gl,c as Xo,l as bl,m as vl,n as xl,o as yl,p as wl,q as _l,r as kl,s as El,t as Cl}from"./Button-97d280d1.js";import{T as et,a as ve,b as xe,c as ce}from"./Tooltip-cd1b4e9d.js";import{B as Yo,g as jl,a as Sl,c as Pl,L as Tl,P as Il,b as Ko,O as Qo,d as Rl,D as Ml,e as Nl,f as Dl,h as Jo,A as Zo,i as ea,j as ta,k as na,l as Al,m as ra,n as oa,o as aa,p as Ol,W as er,q as Ll,r as Fl,t as zl,u as Bl,v as Hl,w as $l,x as Ul,M as Vl,y as ia,z as Gl,C as ql,F as Wl,G as Xl,H as Yl,I as Kl,J as Ql,K as sa,N as Jl,Q as la,R as Ve,S as Zl,T as ca,U as tr,V as ec,X as tc,Y as nc,Z as rc,_ as oc,s as ac,$ as ic,E as sc}from"./ExtensionDropdown-d7f09c83.js";import{u as lc}from"./useBackgroundReduxState-bd3d6a86.js";import{u as cc,a as uc}from"./useDomainAllowlistListener-7908de64.js";import{C as dc,u as pc}from"./useExtensionMessagesListener-367ac98c.js";import{r as fc,s as mc,k as ua,t as hc,l as gc,u as bc,v as vc,w as xc,p as yc,x as wc,y as _c,z as kc,A as nr,B as Ec,C as Cc,D as jc,E as Sc,F as Pc,G as Tc,H as Ic,I as Rc}from"./index-eeca2896.js";import{w as da}from"./waitForPageSettled-5dce853c.js";import{f as rr,I as Mc,i as Nc,a as Dc,g as or,b as vn,p as Ac,t as pa,c as ar,d as fa,e as Oc,h as Lc,j as Fc}from"./util-e36b51ae.js";import{B as ma}from"./Badge-4b362304.js";import{g as zc,s as tt}from"./scribeLiveUtils-a357dd05.js";import{C as Bc,S as Hc,A as $c}from"./Chip-a9e6023b.js";import{B as Uc}from"./Banner-f157b97e.js";import{c as ha,b as ir,M as $t,P as sr,a as ga}from"./index-c8b043be.js";import{S as Ae}from"./DocumentIcon-1c27b6c5.js";import{T as ba}from"./TextInput-abe61b07.js";import{c as mt}from"./index-e131923d.js";import{g as lr,c as ie}from"./_commonjsHelpers-de833af9.js";import{g as Vc}from"./getExtensionStatus-1ed3356e.js";import{f as va,g as Gc}from"./index.esm-e3d6f8ec.js";import{g as xa,F as ya,B as qc}from"./AudioSwitch-0040166e.js";import{S as Ge}from"./Switch-3bd90944.js";import{S as Wc,a as cr}from"./redactionManager-d80ce84d.js";import{v as wa}from"./v4-c70744d4.js";import{a as _a}from"./domCopyAnnotate-a2b92afc.js";import{T as Xc,a as Yc,b as Kc,t as Qc,c as Jc,d as xn}from"./useToast-35be614d.js";import{g as ka,s as Zc,a as eu}from"./utils-9daa9855.js";import{C as tu}from"./Checkbox-8ee7413e.js";import{T as nu}from"./Toaster-4f59bb56.js";import"./appTagUtils-f127d137.js";import"./index-3744168d.js";import"./index-0b89f2da.js";import"./index-6034fac0.js";import"./index-025f2019.js";import"./index-e309a1d1.js";import"./allowedDomainsDB-163b9f7f.js";import"./Toolbar-58c4db6f.js";import"./index-3e4171d5.js";import"./index-9279c646.js";import"./FAIcon-609711c8.js";import"./getGuideMeOptimizedElement-ced88426.js";import"./getTargetElementAttributes-3f1109f1.js";import"./browserContext-85999045.js";import"./dwResultsDB-a3d52d5f.js";import"./index-50993b56.js";var Ut=(e=>(e.NotFoundScreenshot="Refer to the screenshot, then click \u201CNext\u201D to continue.",e.NotFoundStep="Refer to the step, then click \u201CNext\u201D to continue.",e.UrlMismatch="Looks like you\u2019re on a different page.",e))(Ut||{});const ru=async()=>{var t,r;const e=Ms();return e===Ft.Chrome||e===Ft.Unknown?Ns()?Ft.Arc:(r=await((t=chrome==null?void 0:chrome.windows)==null?void 0:t.getCurrent()))!=null&&r.vivExtData?Ft.Vivaldi:e:e},Vt="crxjs-ext",ou=e=>e.length===0?null:e.length>=2&&e[0]===document.getElementById(Vt)?e[1]:e[0],ur=()=>{const e=document.getElementById(Vt);if(!e)return null;const{shadowRoot:t}=e;return t?t.getElementById("root-scribe-elem"):null};function dr(){return dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dr.apply(null,arguments)}function Ea(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function pr(e,t){return pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},pr(e,t)}function Ca(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,pr(e,t)}function au(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function iu(e,t){e.classList?e.classList.add(t):au(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function ja(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function su(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=ja(e.className,t):e.setAttribute("class",ja(e.className&&e.className.baseVal||"",t))}const Sa={disabled:!1},Pa=G.createContext(null);var Ta=function(e){return e.scrollTop},Gt="unmounted",nt="exited",rt="entering",ht="entered",fr="exiting",Be=function(e){Ca(t,e);function t(n,a){var i;i=e.call(this,n,a)||this;var u=a,s=u&&!u.isMounting?n.enter:n.appear,c;return i.appearStatus=null,n.in?s?(c=nt,i.appearStatus=rt):c=ht:n.unmountOnExit||n.mountOnEnter?c=Gt:c=nt,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(n,a){var i=n.in;return i&&a.status===Gt?{status:nt}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(n){var a=null;if(n!==this.props){var i=this.state.status;this.props.in?i!==rt&&i!==ht&&(a=rt):(i===rt||i===ht)&&(a=fr)}this.updateStatus(!1,a)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var n=this.props.timeout,a,i,u;return a=i=u=n,n!=null&&typeof n!="number"&&(a=n.exit,i=n.enter,u=n.appear!==void 0?n.appear:i),{exit:a,enter:i,appear:u}},r.updateStatus=function(n,a){if(n===void 0&&(n=!1),a!==null)if(this.cancelNextCallback(),a===rt){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:Lt.findDOMNode(this);i&&Ta(i)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===nt&&this.setState({status:Gt})},r.performEnter=function(n){var a=this,i=this.props.enter,u=this.context?this.context.isMounting:n,s=this.props.nodeRef?[u]:[Lt.findDOMNode(this),u],c=s[0],m=s[1],h=this.getTimeouts(),v=u?h.appear:h.enter;if(!n&&!i||Sa.disabled){this.safeSetState({status:ht},function(){a.props.onEntered(c)});return}this.props.onEnter(c,m),this.safeSetState({status:rt},function(){a.props.onEntering(c,m),a.onTransitionEnd(v,function(){a.safeSetState({status:ht},function(){a.props.onEntered(c,m)})})})},r.performExit=function(){var n=this,a=this.props.exit,i=this.getTimeouts(),u=this.props.nodeRef?void 0:Lt.findDOMNode(this);if(!a||Sa.disabled){this.safeSetState({status:nt},function(){n.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:fr},function(){n.props.onExiting(u),n.onTransitionEnd(i.exit,function(){n.safeSetState({status:nt},function(){n.props.onExited(u)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(n,a){a=this.setNextCallback(a),this.setState(n,a)},r.setNextCallback=function(n){var a=this,i=!0;return this.nextCallback=function(u){i&&(i=!1,a.nextCallback=null,n(u))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},r.onTransitionEnd=function(n,a){this.setNextCallback(a);var i=this.props.nodeRef?this.props.nodeRef.current:Lt.findDOMNode(this),u=n==null&&!this.props.addEndListener;if(!i||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],c=s[0],m=s[1];this.props.addEndListener(c,m)}n!=null&&setTimeout(this.nextCallback,n)},r.render=function(){var n=this.state.status;if(n===Gt)return null;var a=this.props,i=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var u=Ea(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return G.createElement(Pa.Provider,{value:null},typeof i=="function"?i(n,u):G.cloneElement(G.Children.only(i),u))},t}(G.Component);Be.contextType=Pa,Be.propTypes={};function gt(){}Be.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:gt,onEntering:gt,onEntered:gt,onExit:gt,onExiting:gt,onExited:gt},Be.UNMOUNTED=Gt,Be.EXITED=nt,Be.ENTERING=rt,Be.ENTERED=ht,Be.EXITING=fr;const lu=Be;var cu=function(e,t){return e&&t&&t.split(" ").forEach(function(r){return iu(e,r)})},mr=function(e,t){return e&&t&&t.split(" ").forEach(function(r){return su(e,r)})},hr=function(e){Ca(t,e);function t(){for(var n,a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return n=e.call.apply(e,[this].concat(i))||this,n.appliedClasses={appear:{},enter:{},exit:{}},n.onEnter=function(s,c){var m=n.resolveArguments(s,c),h=m[0],v=m[1];n.removeClasses(h,"exit"),n.addClass(h,v?"appear":"enter","base"),n.props.onEnter&&n.props.onEnter(s,c)},n.onEntering=function(s,c){var m=n.resolveArguments(s,c),h=m[0],v=m[1],w=v?"appear":"enter";n.addClass(h,w,"active"),n.props.onEntering&&n.props.onEntering(s,c)},n.onEntered=function(s,c){var m=n.resolveArguments(s,c),h=m[0],v=m[1],w=v?"appear":"enter";n.removeClasses(h,w),n.addClass(h,w,"done"),n.props.onEntered&&n.props.onEntered(s,c)},n.onExit=function(s){var c=n.resolveArguments(s),m=c[0];n.removeClasses(m,"appear"),n.removeClasses(m,"enter"),n.addClass(m,"exit","base"),n.props.onExit&&n.props.onExit(s)},n.onExiting=function(s){var c=n.resolveArguments(s),m=c[0];n.addClass(m,"exit","active"),n.props.onExiting&&n.props.onExiting(s)},n.onExited=function(s){var c=n.resolveArguments(s),m=c[0];n.removeClasses(m,"exit"),n.addClass(m,"exit","done"),n.props.onExited&&n.props.onExited(s)},n.resolveArguments=function(s,c){return n.props.nodeRef?[n.props.nodeRef.current,s]:[s,c]},n.getClassNames=function(s){var c=n.props.classNames,m=typeof c=="string",h=m&&c?c+"-":"",v=m?""+h+s:c[s],w=m?v+"-active":c[s+"Active"],C=m?v+"-done":c[s+"Done"];return{baseClassName:v,activeClassName:w,doneClassName:C}},n}var r=t.prototype;return r.addClass=function(n,a,i){var u=this.getClassNames(a)[i+"ClassName"],s=this.getClassNames("enter"),c=s.doneClassName;a==="appear"&&i==="done"&&c&&(u+=" "+c),i==="active"&&n&&Ta(n),u&&(this.appliedClasses[a][i]=u,cu(n,u))},r.removeClasses=function(n,a){var i=this.appliedClasses[a],u=i.base,s=i.active,c=i.done;this.appliedClasses[a]={},u&&mr(n,u),s&&mr(n,s),c&&mr(n,c)},r.render=function(){var n=this.props;n.classNames;var a=Ea(n,["classNames"]);return G.createElement(lu,dr({},a,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(G.Component);hr.defaultProps={classNames:""},hr.propTypes={};const uu=hr,du=({children:e})=>{const[t,r]=p.useState(!1),n=p.useRef(null);return p.useEffect(()=>{const a=s=>{var c;if(s.messageType==="currentTabChanged"){const m=n.current===((c=s==null?void 0:s.selfTab)==null?void 0:c.id);r(m),Ht.send("isCurrentTab").then(h=>{var v;r(h.isCurrent||!1),n.current=((v=h.selfTab)==null?void 0:v.id)||null})}},i=()=>{document.visibilityState==="hidden"?r(!1):Ht.send("isCurrentTab").then(s=>{var c;r(s.isCurrent||!1),n.current=((c=s.selfTab)==null?void 0:c.id)||null})};Ht.send("isCurrentTab").then(s=>{var c;r(s.isCurrent||!1),n.current=((c=s.selfTab)==null?void 0:c.id)||null}),chrome.runtime.onMessage.addListener(a),document.addEventListener("visibilitychange",i);const u=window.setInterval(()=>{Ht.send("isCurrentTab").then(s=>{var c;r(s.isCurrent||!1),n.current=((c=s.selfTab)==null?void 0:c.id)||null})},1e3);return()=>{chrome.runtime.onMessage.removeListener(a),document.removeEventListener("visibilitychange",i),window.clearInterval(u)}},[]),t?e:null};function pu(){var e;(e=document==null?void 0:document.querySelectorAll("[_i_d]"))==null||e.forEach(t=>t==null?void 0:t.removeAttribute("_i_d"))}function Ia(){let e=0;pu(),Array.from(document.body.querySelectorAll("*")).reverse().forEach(t=>{const{display:r,visibility:n,opacity:a}=window.getComputedStyle(t),{height:i,width:u}=t.getBoundingClientRect(),s=r==="none"||n==="hidden"||n==="collapse"||a==="0";!t.hasAttribute("_i_d")&&u&&i&&!s&&(t.setAttribute("_i_d",`${e}`),e+=1)})}const fu=()=>{const[e,t]=p.useState(!1);return p.useEffect(()=>{const r=window.matchMedia("(prefers-reduced-motion: reduce)");t(r.matches);const n=()=>t(r.matches);return r.addEventListener("change",n),()=>r.removeEventListener("change",n)},[]),{prefersReducedMotion:e,prefersReducedMotionClassNames:e?"motion-reduce:transition-none":""}},Ra=p.forwardRef((e,t)=>{const{prefersReducedMotion:r}=fu(),n=3,a=e.sizeIncrease?56:32,i=128,u=(e==null?void 0:e.clickTargetColor)||"F43F5E",s=typeof u=="object"&&u!==null,c=a/2,m=2,h=s?"url(#target-gradient)":`#${u}`,v=s?u==null?void 0:u.from:`#${u}`,w=i/2,C=i/3,b=i/2-2,g=({inset:N=0})=>l.jsx("animate",{begin:0,attributeName:"r",dur:n,from:c-N,to:c-N,values:`${c-N}; ${c+2-N}; ${c-N};`,calcMode:"spline",keySplines:"0.4 0 0.5 1; 0.5 0 0.4 1",repeatCount:"indefinite"}),_=({size:N,delay:A=0})=>!r&&l.jsxs(l.Fragment,{children:[l.jsx("animate",{begin:A,attributeName:"r",from:0,to:N,values:`0; ${N}; ${N}; ${N}`,dur:n,calcMode:"spline",keySplines:"0 0 0 1; 0 0 1 1; 0 0 1 1",repeatCount:"indefinite"}),l.jsx("animate",{begin:A,attributeName:"opacity",from:"0.8",to:"0",values:"0.8; 0.05; 0; 0; 0",dur:n,repeatCount:"indefinite"})]}),I=()=>s&&l.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:`0 ${w} ${w}`,to:`360 ${w} ${w}`,dur:n,repeatCount:"indefinite"});return l.jsx("div",{className:"relative flex size-8 items-center justify-center overflow-visible",children:l.jsxs("svg",{width:i,height:i,viewBox:`0 0 ${i} ${i}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,className:"pointer-events-none absolute",...e,children:[l.jsx("defs",{children:s&&u&&l.jsxs("linearGradient",{id:"target-gradient",x1:"0",y1:"0",x2:"1",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:u.from,children:l.jsx("animate",{attributeName:"stop-color",values:`${u.from}; ${u.to}; ${u.via}; ${u.from}`,dur:n,repeatCount:"indefinite"})}),l.jsx("stop",{offset:"50%",stopColor:u.via,children:l.jsx("animate",{attributeName:"stop-color",values:`${u.via}; ${u.from}; ${u.to}; ${u.via}`,dur:n,repeatCount:"indefinite"})}),l.jsx("stop",{offset:"100%",stopColor:u.to,children:l.jsx("animate",{attributeName:"stop-color",values:`${u.to}; ${u.via}; ${u.from}; ${u.to}`,dur:n,repeatCount:"indefinite"})})]})}),l.jsx("defs",{children:l.jsxs("mask",{id:"cutout",children:[l.jsx("rect",{width:"100%",height:"100%",fill:"white"}),l.jsx("circle",{r:c,cx:w,cy:w,fill:"black",children:g({inset:m})})]})}),l.jsxs("g",{mask:"url(#cutout)",children:[l.jsx("circle",{cx:w,cy:w,r:c+m,fill:h,vectorEffect:"non-scaling-stroke",children:g({})}),l.jsx("circle",{cx:w,cy:w,r:C,opacity:"0.3",fill:h,fillOpacity:"0.4",stroke:v,vectorEffect:"non-scaling-stroke",children:_({size:C,delay:.3})}),l.jsx("circle",{cx:w,cy:w,r:b,opacity:"0.3",fill:h,fillOpacity:"0.2",stroke:v,vectorEffect:"non-scaling-stroke",children:_({size:b})}),I()]})]})})}),gr=({element:e,subtreeEnabled:t,isPinning:r})=>{const[n,a]=p.useState({x:0,y:0}),[i,u]=p.useState(!1),s=()=>{if(e){const{x:c,y:m}=e.getBoundingClientRect();a({x:c,y:m})}};return p.useEffect(()=>{if(!e||r){u(!1),a({x:0,y:0});return}s();const c=new IntersectionObserver(g=>{const _=g[0];u(_.isIntersecting),_.isIntersecting&&s()},{threshold:[0]});c.observe(e);const m=[];let h=e.parentElement;for(;h;){const{overflowY:g}=window.getComputedStyle(h);(g==="auto"||g==="scroll")&&(m.push(h),h.addEventListener("scroll",s)),h=h.parentElement}window.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",s);const v=new ResizeObserver(()=>{s()});v.observe(e);let w=e.parentElement;for(;w;)v.observe(w),w=w.parentElement;const C=new MutationObserver(()=>{s()});let b=e;for(;b;)C.observe(b,{attributes:!0,childList:!0,subtree:t}),b=b.parentElement;return()=>{c.disconnect(),v.disconnect(),C.disconnect(),window.removeEventListener("scroll",s),window.removeEventListener("resize",s),m.forEach(g=>{g.removeEventListener("scroll",s)})}},[e,r]),{position:n,isVisible:i}},Ma=({className:e})=>l.jsxs("div",{className:re("h-[20px] px-1.5 py-2 bg-gradient-to-r from-brand-600/20 to-cyan-400/20 rounded-md inline-flex justify-center items-center gap-1",e),children:[l.jsx(se,{icon:pl,className:"text-cyan-400 size-3"}),l.jsx("div",{className:"text-center justify-start text-white/90 text-xs font-medium font-['Public_Sans'] leading-[10px]",children:"Suggested step"})]}),mu=({targetHovered:e,modalInstruction:t,isClickContainerVisible:r})=>{const[n,a]=p.useState(!1),i=p.useRef(null),u=p.useRef(null),s=p.useRef(null);return p.useEffect(()=>{var h;const c=v=>{var w,C;v.stopPropagation(),(v.target===(u==null?void 0:u.current)||(w=u==null?void 0:u.current)!=null&&w.contains(v.target))&&chrome.runtime.sendMessage({messageType:"pauseCopilotFromBrowser",source:"ClickTargetModal.tsx"}),(v.target===(s==null?void 0:s.current)||(C=s==null?void 0:s.current)!=null&&C.contains(v.target))&&chrome.runtime.sendMessage({messageType:"stopCopilotFromBrowser"})},m=(h=i.current)==null?void 0:h.getRootNode();return m&&m.addEventListener("mousedown",c),()=>{m&&m.removeEventListener("mousedown",c)}},[i]),p.useLayoutEffect(()=>{const c=()=>{i.current&&requestAnimationFrame(()=>{if(!i.current)return;const m=i.current.getBoundingClientRect(),h=window.innerWidth<Math.ceil(m.right)+12,v=window.innerWidth-Math.ceil(m.x)-Math.ceil(m.width)*2-56-12>36;!n&&h&&a(!0),n&&v&&a(!1)})};return c(),window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c)}},[n,r]),l.jsx(et,{children:l.jsx("div",{ref:i,className:re("pointer-events-auto cursor-default h-20 w-max max-w-[450px] mt-[-12px] pl-3 pr-3.5 py-2 bg-slate-950/75 rounded-xl shadow-[0px_10px_16px_-11px_rgba(2,6,23,0.75)] ring-1 ring-slate-950/75 border border-white/25 backdrop-blur-lg flex-col justify-center items-start gap-1 inline-flex overflow-hidden",{"relative right-full mr-4":n,"opacity-0":e}),children:l.jsxs("div",{className:"pl-1 flex-col gap-2 flex",children:[l.jsx("div",{className:"text-slate-100 text-sm font-medium leading-tight ml-1",children:t||"Click here"}),l.jsxs("div",{className:"flex gap-1 items-center",children:[l.jsx(Ma,{}),l.jsxs(ve,{children:[l.jsx(xe,{children:l.jsx(oe,{"data-testid":"copilot-modal-pause-btn",variant:"ghost",icon:fl,theme:"dark",size:"small",ref:u})}),l.jsx(ce,{side:"top",sideOffset:8,className:"text-xs",variant:"compact",avoidCollisions:!1,children:"Pause"})]}),l.jsxs(ve,{children:[l.jsx(xe,{children:l.jsx(oe,{"data-testid":"copilot-modal-stop-btn",variant:"ghost",icon:ml,theme:"dark",size:"small",ref:s})}),l.jsx(ce,{side:"top",sideOffset:8,className:"text-xs",variant:"compact",avoidCollisions:!1,children:"Done"})]})]})]})})})},hu=()=>{const[e,t]=p.useState(null),[r,n]=p.useState(!1),[a,i]=p.useState(""),[u,s]=p.useState(!1),[c,m]=p.useState(!1),h=(e==null?void 0:e.element)||null;p.useEffect(()=>{const A=o=>{if(o.messageType==="highlightElementWithId"){if(m(!1),Number.isNaN(Number(o.elementId))||o.url!==window.location.href)return;const d=document.querySelector(`[_i_d="${o.elementId}"]`);if(d){t({element:d}),i(o.modalInstruction||"");let f=null;const x=new IntersectionObserver((j,S)=>{j.forEach(E=>{E.isIntersecting&&(f&&(clearTimeout(f),f=null),setTimeout(()=>{chrome.runtime.sendMessage({messageType:"sendScreenshotCoordinates",data:{coordinates:d.getBoundingClientRect(),sessionId:o.sessionId,requestId:o.requestId}}),S.disconnect()},200))})});o.hasScreenshot?s(!0):(x.observe(d),f=setTimeout(()=>{x.disconnect(),te("copilot_debugging_screenshot_fallback",{elementId:o.elementId,url:window.location.href,messageUrl:o.url,sessionId:o.sessionId,requestId:o.requestId}),chrome.runtime.sendMessage({messageType:"sendScreenshotCoordinates",data:{coordinates:d.getBoundingClientRect(),sessionId:o.sessionId,requestId:o.requestId}})},4e3))}else te("copilot_debugging_element_not_found",{elementId:o.elementId,url:window.location.href,messageUrl:o.url,sessionId:o.sessionId,requestId:o.requestId}),chrome.runtime.sendMessage({messageType:"getDomForCopilot"})}if(o.messageType==="getCurrentDom"&&window.self===window.top){Ia();const d=document.body.outerHTML;chrome.runtime.sendMessage({messageType:"currentDomForCopilot",currentDom:d,url:window.location.href,sessionId:o.sessionId})}o.messageType==="removeCopilotClickTarget"&&s(!1),o.messageType==="screenshotCaptureDone"&&(s(!0),m(!0))};return chrome.runtime.onMessage.addListener(A),()=>{chrome.runtime.onMessage.removeListener(A)}},[]);const{isVisible:v}=gr({element:h,subtreeEnabled:!0}),w=(()=>{if(!h)return{left:0,top:0,width:0,height:0};const A=h.getBoundingClientRect();return{left:A.left,top:A.top,width:A.width,height:A.height}})(),C=()=>{const A=w.left+w.width/2||0,o=w.top+w.height/2||0;return{x:A??0,y:o??0}},b=(()=>C())(),g=()=>n(!0),_=()=>n(!1),I=h&&w.width&&w.height;if(p.useEffect(()=>{var A;I&&!v&&!c&&((A=e==null?void 0:e.element)==null||A.scrollIntoView({behavior:"smooth",block:"center"}))},[e,I,v,c]),p.useEffect(()=>(n(!1),h==null||h.addEventListener("mouseenter",g),h==null||h.addEventListener("mouseleave",_),()=>{h==null||h.removeEventListener("mouseenter",g),h==null||h.removeEventListener("mouseleave",_)}),[h]),!I)return null;const N=16;return l.jsx("div",{id:"copilot-click-target-container",className:"group pointer-events-none absolute z-[999999] cursor-pointer opacity-100 transition-opacity",style:{position:"absolute",top:b.y-N,left:b.x-N,zIndex:999999},children:v&&l.jsxs("div",{id:"copilot-click-target",className:"gap-6",style:{display:u?"flex":"none"},children:[l.jsx(Ra,{sizeIncrease:!0,clickTargetColor:{from:"#3AC3FF",via:"#FFFFFF",to:"#6366F1"}}),l.jsx(mu,{targetHovered:r,modalInstruction:a,isClickContainerVisible:u})]})})},Na=()=>l.jsxs("div",{"aria-hidden":!0,className:re("fixed select-none blur-3xl inset-0 z-99 pointer-events-none animate-grow-in-from-right *:[clip-path:ellipse(closest-side_farthest-side)] *:absolute *:mix-blend-overlay *:bg-gradient-to-br"),children:[l.jsx("div",{className:"top-0 -right-5 w-20 h-[80dvh] from-blue-700/70 via-blue-500/90 to-cyan-500 animate-glow-loader"}),l.jsx("div",{className:"bottom-0 -right-5 w-20 h-[80dvh] from-blue-700/70 via-blue-500/90 to-cyan-500 animate-glow-loader-2"})]}),gu=()=>{const[e,t]=p.useState(!1);return p.useEffect(()=>{const r=n=>{n.messageType==="startCopilotGenerating"&&t(!0),n.messageType==="stopCopilotGenerating"&&t(!1)};return chrome.runtime.onMessage.addListener(r),()=>{chrome.runtime.onMessage.removeListener(r)}},[]),e?l.jsx(Na,{}):null};function bu(e,...t){const r=document.getElementById("crxjs-ext"),n=u=>{r.contains(u.target)||(e==null||e(u))},a=u=>{let s=!1;t.forEach(c=>{var m;c&&((m=c.contains)!=null&&m.call(c,u.target))&&(s=!0)}),s||(e==null||e(t))},i=u=>{let s=null;return u.forEach(c=>{c&&c.current&&(s=c.current.getRootNode().getElementById("root-scribe-elem"))}),s};p.useEffect(()=>{const u=i(t);return document.addEventListener("mousedown",n),u!==null&&u.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",n),u!==null&&u.removeEventListener("mousedown",a)}},t)}const vu=()=>{const e=p.useMemo(()=>{const t=window.location&&window.location.href?window.location.href:null;if(!t||t.trim()==="")return!1;const r=new URL(t).origin.split("//");return r[r.length-1]==="mail.google.com"},[]);return l.jsx("div",{style:ke.modal,onMouseDown:t=>{t.stopPropagation(),chrome.runtime.sendMessage({messageType:"closedGmailRecordModal"})},children:e?l.jsxs("div",{style:ke.outerBoxGmail,onMouseDown:t=>{t.stopPropagation()},children:[l.jsx("style",{children:`
                            @keyframes MoveUpDown {
                                0%,
                                100% {
                                    margin-right: 12px;
                                    margin-left: 12px;
                                }
                                50% {
                                    margin-right: 8px;
                                    margin-left: 16px;
                                }
                            }

                            @-webkit-keyframes MoveUpDown {
                                from {
                                    margin-bottom: 12px;
                                    margin-top: 12px;
                                }
                                to {
                                    margin-bottom: 8px;
                                    margin-top: 16px;
                                }
                            }`}),l.jsxs("div",{style:ke.iconsContainer,children:[l.jsx("img",{style:ke.extensionInstalledImg,src:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/logo/extension.svg"}),l.jsx("div",{style:ke.arrowGmail,children:l.jsx("svg",{width:"36px",height:"36px",version:"1.2",fill:"#aaaac8",baseProfile:"tiny",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12 3.172l-6.414 6.414c-.781.781-.781 2.047 0 2.828s2.047.781 2.828 0l1.586-1.586v7.242c0 1.104.895 2 2 2 1.104 0 2-.896 2-2v-7.242l1.586 1.586c.391.391.902.586 1.414.586s1.023-.195 1.414-.586c.781-.781.781-2.047 0-2.828l-6.414-6.414z"})})}),l.jsx("div",{style:ke.extensionInstalledImg,children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"52 42 88 66",width:"26",height:"25",children:[l.jsx("path",{fill:"#4285f4",d:"M58 108h14V74L52 59v43c0 3.32 2.69 6 6 6"}),l.jsx("path",{fill:"#34a853",d:"M120 108h14c3.32 0 6-2.69 6-6V59l-20 15"}),l.jsx("path",{fill:"#fbbc04",d:"M120 48v26l20-15v-8c0-7.42-8.47-11.65-14.4-7.2"}),l.jsx("path",{fill:"#ea4335",d:"M72 74V48l24 18 24-18v26L96 92"}),l.jsx("path",{fill:"#c5221f",d:"M52 51v8l20 15V48l-5.6-4.2c-5.94-4.45-14.4-.22-14.4 7.2"})]})})]}),l.jsx("div",{style:ke.instructionTextContainer,children:l.jsx("p",{style:ke.arrowText,children:"Start capturing from the extension and when finished, add it to your Gmail."})})]}):l.jsxs("div",{style:ke.outerBox,onMouseDown:t=>{t.stopPropagation()},children:[l.jsx("style",{children:`
                            @keyframes MoveUpDown {
                                0%,
                                100% {
                                    margin-bottom: 12px;
                                    margin-top: 12px;
                                }
                                50% {
                                    margin-bottom: 8px;
                                    margin-top: 16px;
                                }
                            }

                            @-webkit-keyframes MoveUpDown {
                                from {
                                    margin-bottom: 12px;
                                    margin-top: 12px;
                                }
                                to {
                                    margin-bottom: 8px;
                                    margin-top: 16px;
                                }
                            }`}),l.jsx("div",{style:ke.arrow,children:l.jsx("svg",{width:"36px",height:"36px",version:"1.2",fill:"#aaaac8",baseProfile:"tiny",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12 3.172l-6.414 6.414c-.781.781-.781 2.047 0 2.828s2.047.781 2.828 0l1.586-1.586v7.242c0 1.104.895 2 2 2 1.104 0 2-.896 2-2v-7.242l1.586 1.586c.391.391.902.586 1.414.586s1.023-.195 1.414-.586c.781-.781.781-2.047 0-2.828l-6.414-6.414z"})})}),l.jsx("img",{style:ke.extensionInstalledImg,src:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/logo/extension.svg"}),l.jsx("div",{style:ke.instructionTextContainer,children:l.jsx("p",{style:ke.arrowText,children:"Click the extension, start capturing, and then do the steps you want to appear in your guide."})})]})})},qt={modal:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(6px)",zIndex:"100",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",pointerEvents:"all"},outerBox:{position:"fixed",top:"16px",right:"32px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"8px",backgroundColor:"white",width:"192px",boxShadow:"4px 4px 16px 4px rgba(0, 0, 0, 0.3)",overflow:"hidden",boxSizing:"content-box",padding:"20px 16px"},iconsContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignOtems:"center"},arrow:{color:"#aaaac8",animation:"MoveUpDown 1s linear infinite"},arrowText:{marginTop:"16px",fontSize:"16px",textAlign:"center",fontFamily:"Mulish, sans-serif"},extensionInstalledImg:{width:"38px",height:"38px",minWidth:"38px",minHeight:"38px",boxShadow:"2px 2px 8px 2px rgba(0, 0, 0, 0.3)",borderRadius:"100%",display:"flex",justifyContent:"center",alignItems:"center"},instructionTextContainer:{overflowY:"hidden",fontSize:"16px"}},ke={...qt,outerBoxGmail:{...qt.outerBox},outerBox:{...qt.outerBox,paddingTop:"8px"},arrow:{...qt.arrow},arrowGmail:{...qt.arrow,transform:"rotate(90deg)"}};function xu(e,t){const r={leading:!0,trailing:!0},n=p.useRef(e);return p.useEffect(()=>{n.current=e}),p.useCallback(Qn.debounce((...a)=>n.current(...a),t,r),[t])}function yu(e,t){const[r,n]=p.useState(e),a=xu(n,t);return[r,a]}const br=e=>{e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()},Da=e=>{e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()},wu=({initialValue:e,onChange:t})=>{const[r,n]=p.useState(e||"");return l.jsxs("div",{className:"w-full flex items-center justify-start relative",children:[l.jsx("div",{className:"absolute right-4 top-0 h-full flex flex-col items-center justify-center",children:l.jsx(se,{icon:fc,className:"text-brand-500 w-5 h-5"})}),l.jsx("input",{autoFocus:!0,type:"text",className:"[all:unset] bg-white text-slate-500 py-0 px-1 pl-[18px] w-full h-10 rounded-lg border border-slate-200 text-base font-normal font-sans",placeholder:"Search all...",value:r,onChange:a=>{const i=a.target.value;n(i),t(i)},onMouseDown:br,onMouseUp:br,onClick:br,onKeyDown:Da,onKeyUp:Da})]})},_u=e=>{const[t,r]=p.useState(!1);return l.jsxs("div",{style:{...Wt.listItem,...t?Wt.hovered:{},...e.selectedScribe&&e.selectedScribe.id===e.item.id?Wt.selected:{}},onClick:()=>{e.setSelectedScribe(e.item)},onMouseEnter:()=>{r(!0)},onMouseLeave:()=>{r(!1)},children:[l.jsx("div",{style:Wt.listTitle,children:e.item.name}),l.jsx("div",{style:Wt.additionalInfo,children:e.item.author})]})},Wt={listItem:{padding:"8px 12px",borderRadius:"8px",cursor:"pointer",display:"flex",flexDirection:"column",width:"calc(100% - 24px)",textAlign:"left"},selected:{backgroundColor:"#e0e7ff"},hovered:{transition:"ease 0.4s",backgroundColor:"#e0e7ff",backgroundOpacity:"0.5"},listTitle:{fontWeight:"bold",fontSize:"16px",lineHeight:"17px",marginBottom:"2px",fontFamily:"Pro-Sans, sans-serif",color:"#1E222A"},additionalInfo:{opacity:"0.7",fontSize:"12px",fontFamily:"Pro-Sans, sans-serif"}},ku=45,Eu=6,Cu=()=>{const e=zo(),{userData:t}=W(zt),{scribes:r,isLoading:n,loadedAll:a}=W(Ds),[i,u]=p.useState(!1),[s,c]=yu("",600),[m,h]=p.useState(!1),[v,w]=p.useState(!1),[C,b]=p.useState(!1),g=Qn.throttle(()=>{!a&&!n&&e(Bo({searchQuery:s,skip:r.length}))},1e3,{leading:!0});p.useEffect(()=>{if(t){const I=e(Bo({searchQuery:s}));return I.then(()=>{h(!0)}),()=>{I.abort()}}},[s]),p.useEffect(()=>{const I=i?r.find(N=>N.id===i.id):void 0;u(I)},[r]);const _=()=>{chrome.runtime.sendMessage({messageType:"closedGmailSelectModal"}),e(Os())};return l.jsx("div",{style:je.modal,onMouseDown:I=>{!v&&_(),I.stopPropagation()},children:l.jsxs("div",{style:je.outerBox,onMouseDown:I=>{I.stopPropagation()},children:[v&&l.jsx("div",{style:je.loadingOverlay,onMouseDown:I=>{I.stopPropagation()}}),l.jsx("div",{style:je.container,children:t?l.jsx("div",{style:je.loggedIn,children:m?l.jsxs("div",{style:je.loggedIn,children:[l.jsx("div",{style:je.modalTitle,children:"Select a Scribe"}),l.jsx(wu,{onChange:I=>{C&&b(!1),c(I)}}),l.jsx("div",{style:je.listItems,onScroll:I=>{const{clientHeight:N,scrollTop:A,scrollHeight:o}=I.target;o-A-N<ku*Eu&&g()},children:r.map(I=>l.jsx(_u,{item:I,selectedScribe:i,setSelectedScribe:N=>{C&&b(!1),u(N)}},I.id))}),l.jsxs("div",{style:je.buttonRow,children:[l.jsx(oe,{variant:"secondary",onClick:()=>{chrome.runtime.sendMessage({messageType:"widgetCancelModal"}),_()},children:"Cancel"}),l.jsx(oe,{variant:"primary",disabled:!i,onClick:()=>{w(!0),b(!1),As.exportScribeDocument(i.id,"html").then(async I=>{const N=await jl(i.id,i.name,!1,i.type),A={messageType:"widgetSelectedFromModal",scribe_id:i.id,url:N,name:i.name,html:I.data.exported_data};chrome.runtime.sendMessage(A,o=>{o?_():b(!0),w(!1)})}).catch(I=>{b(!0),w(!1)})},children:"Insert selected"})]}),C&&l.jsx("div",{style:je.errorMessage,children:"There was an error. Please try again."})]}):l.jsx("div",{style:je.loader,children:l.jsx(Yo,{size:40,color:"rgb(165, 180, 252)",loading:!0})})}):l.jsx("div",{style:je.notLoggedIn,children:"Please log in to proceed"})})]})})},je={modal:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(6px)",zIndex:"100",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",pointerEvents:"all"},outerBox:{position:"relative",display:"inline-block",borderRadius:"8px",width:"420px",height:"480px",boxShadow:"4px 4px 16px 4px rgba(0, 0, 0, 0.4)",overflow:"hidden",backgroundColor:"white",justifyContent:"center",alignItems:"center",boxSizing:"content-box",padding:"16px"},container:{width:"100%",height:"100%",display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"center",backgroundColor:"white"},modalTitle:{fontSize:"24px",fontWeight:"600",marginBottom:"12px",marginLeft:"4px",textAlign:"left",fontFamily:"Pro-Sans, sans-serif",color:"#1E222A"},inner:{display:"flex",flex:1,width:"100%",backgroundColor:"white"},loader:{display:"flex",width:"100%",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center"},listItems:{flex:1,overflow:"scroll",width:"100%",paddingTop:8},loggedIn:{display:"flex",flexDirection:"column",alignContent:"center",backgroundColor:"white",flex:1,height:"100%",width:"100%",overflow:"visible"},buttonRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"4px 0px",margin:"auto",overflow:"visible",marginTop:"12px"},cancelButton:{backgroundColor:"#e04340"},searchBar:{height:"30px"},searchBarInner:{background:"transparent"},loadingOverlay:{position:"absolute",top:0,left:0,zIndex:5,width:"100%",height:"100%",backgroundColor:"white",opacity:.43,pointerEvents:"all"},errorMessage:{fontFamily:"Pro-Sans, sans-serif",height:"20px",color:"#e04340",fontSize:"12px",marginLeft:"4px",marginTop:"12px",textAlign:"left"}},Aa=e=>{try{return new URL(e),!0}catch{return!1}},Oa=e=>e.replace(/\/+$/,""),vr=e=>{if(typeof e!="string"||!Aa(e))return"";try{const t=new URL(e);return t.hash="",Oa(t.toString())}catch{return""}},ju=e=>{if(typeof e!="string"||!Aa(e))return"";try{const t=new URL(e);return t.search="",Oa(t.toString())}catch{return""}},La=e=>{const t=ju(e);return t?vr(t):""},Xt=p.forwardRef(({x:e,y:t,color:r,animate:n=!1,shape:a="circle",enablePointerEvents:i=!1,enableDragging:u=!1,isHovered:s=!1,inCluster:c=!1,inClusterContainer:m=!1,logoUrl:h,onDragStart:v,onDrag:w,onDragEnd:C,onMouseEnter:b,onMouseLeave:g},_)=>{const I=p.useRef(null),N=M=>{I.current=M,_&&(typeof _=="function"?_(M):_.current=M)},[A,o]=p.useState(!1),[d,f]=p.useState({x:e,y:t}),x=W(Jn);p.useEffect(()=>{A||f({x:e,y:t})},[e,t,A]),p.useEffect(()=>{const M=y=>{document.body.style.cursor=y;const D=O=>{O.querySelectorAll("iframe").forEach(L=>{var z;try{const F=L.contentDocument||((z=L.contentWindow)==null?void 0:z.document);F&&F.body&&(F.body.style.cursor=y,D(F))}catch(F){console.warn("Cannot access iframe content for cursor styling:",F)}})};D(document)};if(A)return M("grabbing"),()=>{M("")}},[A]),p.useEffect(()=>{if(!u)return;const M=I.current;if(!M)return;const y=D=>{D.preventDefault(),D.stopPropagation(),D.stopImmediatePropagation();const O={x:D.clientX-8,y:D.clientY-8};f(O),o(!0),v==null||v(O)};return M.addEventListener("mousedown",y),()=>M.removeEventListener("mousedown",y)},[u,v]),p.useEffect(()=>{if(!A)return;const M=O=>{const L={x:O.clientX-8,y:O.clientY-8};f(L),w==null||w(L)},y=O=>{O.preventDefault(),O.stopPropagation(),O.stopImmediatePropagation(),o(!1),C==null||C(d,O)},D=[];return window.addEventListener("mousemove",M),window.addEventListener("mouseup",y),Sl(document,D,{eventTypes:["mousemove","mouseup"],createHandlers:(O,L)=>({mousemove:z=>{const F={x:z.clientX+O,y:z.clientY+L};f(F),w==null||w(F)},mouseup:z=>{const F=new MouseEvent("mouseup",{...z,clientX:z.clientX+O,clientY:z.clientY+L});Object.defineProperty(F,"target",{value:z.target,enumerable:!0,configurable:!0}),Object.defineProperty(F,"offsetX",{value:z.offsetX,enumerable:!0,configurable:!0}),Object.defineProperty(F,"offsetY",{value:z.offsetY,enumerable:!0,configurable:!0}),o(!1),C==null||C(d,F)}})}),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",y),Pl(D,["mousemove","mouseup"])}},[A,d,w,C]);const j=(()=>{switch(a){case"circle":return Zn;default:return Zn}})(),S=()=>{A||(b==null||b())},E=()=>{g==null||g()},k=p.useCallback((M,y)=>{const D=I.current;if(!D)return null;const O=D.style.pointerEvents;D.style.pointerEvents="none";try{return document.elementFromPoint(M,y)}finally{D.style.pointerEvents=O}},[]),P=p.useCallback((M,y,D,O)=>{const L=M;if(typeof L.click=="function"){L.click();return}const z=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!0,clientX:y,clientY:D,view:O});M.dispatchEvent(z)},[]),R=p.useCallback(M=>{var D;if(A||u)return;const y=k(M.clientX,M.clientY);if(y){if(y instanceof HTMLIFrameElement)try{const O=y.contentDocument||((D=y.contentWindow)==null?void 0:D.document);if(O){const L=y.getBoundingClientRect(),z=M.clientX-L.left,F=M.clientY-L.top,B=O.elementFromPoint(z,F);if(B){P(B,z,F,y.contentWindow||window),M.preventDefault(),M.stopPropagation();return}}}catch{}P(y,M.clientX,M.clientY,window),M.preventDefault(),M.stopPropagation()}},[P,k,u,A]),T=h?Tl:Il;return l.jsxs("div",{ref:N,style:{position:A?"fixed":m?"absolute":"fixed",top:d.y,left:d.x,width:`${T}px`,height:`${T}px`,zIndex:1e5-2,pointerEvents:i&&!A&&!x?"auto":"none",transform:s?"scale(1.5)":"scale(1)",opacity:s&&!A?.5:1,transformOrigin:"center center",transition:"transform 0.4s ease-in-out",cursor:A?"grabbing":u?"grab":"pointer",visibility:c?"hidden":"visible"},onMouseEnter:S,onMouseLeave:E,onClickCapture:R,children:[n&&l.jsx(se,{style:{color:r,width:`${T}px`,height:`${T}px`,position:"absolute",top:0,left:0},icon:j,size:"lg",className:"animate-ping opacity-75"}),h?l.jsx("img",{src:h,alt:"Organization logo",style:{width:`${T}px`,height:`${T}px`,position:"absolute",top:0,left:0,borderRadius:"50%",border:`2px solid ${r}`}}):l.jsx(se,{style:{color:r,width:`${T}px`,height:`${T}px`,position:"absolute",top:0,left:0},icon:j,size:"lg"})]})}),Fa=(e,t=document,r=0,n=0)=>{var i;if(e===t)return{offsetX:r,offsetY:n};const a=t.querySelectorAll("iframe");for(const u of a)try{const s=u.contentDocument||((i=u.contentWindow)==null?void 0:i.document);if(!s)continue;if(s===e){const g=u.getBoundingClientRect(),_=window.getComputedStyle(u),I=parseFloat(_.borderLeftWidth)||0,N=parseFloat(_.borderTopWidth)||0,A=parseFloat(_.paddingLeft)||0,o=parseFloat(_.paddingTop)||0;return{offsetX:r+g.left+I+A,offsetY:n+g.top+N+o}}const c=u.getBoundingClientRect(),m=window.getComputedStyle(u),h=parseFloat(m.borderLeftWidth)||0,v=parseFloat(m.borderTopWidth)||0,w=parseFloat(m.paddingLeft)||0,C=parseFloat(m.paddingTop)||0,b=Fa(e,s,r+c.left+h+w,n+c.top+v+C);if(b.offsetX!==0||b.offsetY!==0||e===s)return b}catch{continue}return{offsetX:0,offsetY:0}},Su=(e,t,r)=>{const n=r.elementFromPoint(e,t);if(!n)return null;const a=n.getBoundingClientRect();let i=0,u=0;if(r!==document){const{offsetX:s,offsetY:c}=Fa(r);i=s,u=c}else if(n.tagName==="IFRAME"){const s=n,c=Ko(s);if(c){const m=s.getBoundingClientRect(),h=e-m.left,v=t-m.top,w=c.elementFromPoint(h,v);if(w){const C=w.getBoundingClientRect();return{element:w,left:C.left+m.left,top:C.top+m.top,width:C.width,height:C.height}}}}return{element:n,left:a.left+i,top:a.top+u,width:a.width,height:a.height}},Pu=(e,t)=>{const[r,n]=p.useState({x:e.x+12,y:e.y+12});return p.useLayoutEffect(()=>{t.current&&requestAnimationFrame(()=>{if(!t.current)return;const a=t.current.getBoundingClientRect(),i=12,u=12;let s=e.x+u,c=e.y+u;s+a.width>window.innerWidth-i&&(s=e.x-u-a.width),c+a.height>window.innerHeight-i&&(c=e.y-u-a.height),s<i&&(s=i),c<i&&(c=i),n({x:s,y:c})})},[e.x,e.y,t]),r},Tu=({mousePos:e,color:t,pinShiftClickThrough:r,logoUrl:n})=>{const a=p.useRef(null),i=p.useRef(null),u=Pu(e,a);return l.jsxs(l.Fragment,{children:[l.jsx(Xt,{ref:i,x:e.x-8,y:e.y-8,animate:!0,color:t,logoUrl:n}),l.jsx("div",{ref:a,className:"absolute text-white pt-2 pl-3 pr-3 pb-3 rounded-xl text-xs border-2 border-slate-700",style:{left:u.x,top:u.y,zIndex:999999,backgroundColor:"#0C0D12CC",width:"max-content",borderColor:"#636671",transition:"left 0.03s ease, top 0.03s ease",willChange:"left, top",visibility:r?"hidden":"visible"},children:l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("p",{style:{marginBottom:0,marginTop:0},className:"text-sm font-medium",children:"Click anywhere to pin"}),l.jsxs("div",{className:"flex flex-row gap-2 text-slate-400",children:[l.jsx(ma,{theme:"dark",children:"SHIFT + CLICK"}),"navigate ",l.jsx(ma,{theme:"dark",children:"ESC"})," cancel"]})]})})]})},xr=({onPinDrop:e,isDragging:t=!1,pinShiftClickThrough:r=!1,color:n,isUpdatingPin:a=!1,logoUrl:i})=>{const[u,s]=p.useState(()=>{const C=typeof window<"u"?window.innerWidth:0,b=typeof window<"u"?window.innerHeight:0;return{x:Math.floor(C/2),y:Math.floor(b/2)}}),c=p.useRef(null),m=(C,b,g,_)=>{c.current&&(c.current.style.display="block",c.current.style.left=`${C}px`,c.current.style.top=`${b}px`,c.current.style.width=`${g}px`,c.current.style.height=`${_}px`)},h=(C,b,g=document)=>{const _=Su(C,b,g);_&&m(_.left,_.top,_.width,_.height)},v=(C,b,g)=>_=>{const I=_.clientX+b,N=_.clientY+g;s({x:I,y:N}),h(_.clientX,_.clientY,C)},w=(C,b,g,_=0,I=0)=>{C.querySelectorAll("iframe").forEach(N=>{const A=Ko(N);if(!A)return;const o=N.getBoundingClientRect(),d=_+o.left,f=I+o.top,x=v(A,d,f),j=S=>{if(r&&S.shiftKey){const k=S.target;if(!k)return;if(k.tagName==="BUTTON"||k.getAttribute("role")==="button"){Object.defineProperty(S,"shiftKey",{value:!1,writable:!1,configurable:!0});return}const P=k.closest("a");if(P&&P.href){window.open(P.href,"_self");return}}S.preventDefault(),S.stopPropagation(),S.stopImmediatePropagation();const E=new MouseEvent("click",{clientX:S.clientX+d,clientY:S.clientY+f,button:S.button,buttons:S.buttons,shiftKey:S.shiftKey,ctrlKey:S.ctrlKey,altKey:S.altKey,metaKey:S.metaKey});Object.defineProperty(E,"target",{value:S.target,enumerable:!0,configurable:!0}),Object.defineProperty(E,"offsetX",{value:S.offsetX,enumerable:!0,configurable:!0}),Object.defineProperty(E,"offsetY",{value:S.offsetY,enumerable:!0,configurable:!0}),g(E)};A.addEventListener("mousemove",x),A.addEventListener("click",j,{capture:!0}),b.push({iframeWindow:N.contentWindow,mouseHandler:x,clickHandler:j}),w(A,b,g,d,f)})};return p.useEffect(()=>{const C=_=>{s({x:_.clientX,y:_.clientY}),h(_.clientX,_.clientY)},b=_=>{if(r){if(_.shiftKey&&_.target instanceof HTMLElement){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation();const I=_.target.closest("a");if(I&&I.href){window.open(I.href,"_self");return}const N=_.target.closest('button, [role="button"], [onclick]');if(N){setTimeout(()=>{N.click()},0);return}setTimeout(()=>{var o;const A=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:_.view,detail:_.detail,screenX:_.screenX,screenY:_.screenY,clientX:_.clientX,clientY:_.clientY,ctrlKey:_.ctrlKey,altKey:_.altKey,shiftKey:!1,metaKey:_.metaKey,button:_.button,buttons:_.buttons,relatedTarget:_.relatedTarget});(o=_.target)==null||o.dispatchEvent(A)},0);return}return}_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),e==null||e(_)},g=[];return window.addEventListener("mousemove",C),window.addEventListener("click",b,{capture:!0}),w(document,g,b),()=>{window.removeEventListener("mousemove",C),window.removeEventListener("click",b,{capture:!0}),c.current&&(c.current.style.display="none"),g.forEach(({iframeWindow:_,mouseHandler:I,clickHandler:N})=>{try{_==null||_.document.removeEventListener("mousemove",I),_==null||_.document.removeEventListener("click",N,{capture:!0})}catch(A){console.warn("Error cleaning up iframe listener:",A)}})}},[e]),p.useEffect(()=>(t||(document.body.style.cursor="grab"),()=>{t||(document.body.style.cursor="")}),[t]),l.jsxs("div",{id:"guide-click-target",children:[!t&&!a&&l.jsx(Tu,{mousePos:u,color:n,pinShiftClickThrough:r,logoUrl:i||null}),l.jsx("div",{className:"border-rounded-sm",ref:c,style:{position:"absolute",border:"solid 3px #FBBF24",borderRadius:"8px",pointerEvents:"none"}})]})},Iu=16,Ru=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Mu=(e,t)=>e.pinIds.some(r=>t[r]!==void 0&&t[r].pinTargetOnScreen),Nu=e=>{const t=Object.entries(e);if(t.length===0)return{clusters:{},clusteredIds:new Set};const r=new Set;for(let s=0;s<t.length;s+=1)for(let c=s+1;c<t.length;c+=1){const[m,h]=t[s],[v,w]=t[c];Ru(h,w)<=Iu&&r.add(`${m},${v}`)}const n=new Set,a={},i=new Set;let u=0;return t.forEach(([s])=>{if(n.has(s))return;const c=[s],m=[s];for(n.add(s);m.length>0;){const h=m.shift();h&&t.forEach(([v])=>{!n.has(v)&&(r.has(`${h},${v}`)||r.has(`${v},${h}`))&&(n.add(v),c.push(v),m.push(v))})}if(c.length>=2){const{totalX:h,totalY:v}=c.reduce((C,b)=>({totalX:C.totalX+e[b].x,totalY:C.totalY+e[b].y}),{totalX:0,totalY:0}),w=`cluster-${u}`;u+=1,a[w]={pinIds:c,centerPosition:{x:h/c.length,y:v/c.length}},c.forEach(C=>i.add(C))}}),{clusters:a,clusteredIds:i}},Du=e=>{const[t,r]=p.useState({}),[n,a]=p.useState({}),[i,u]=p.useState(new Set),s=p.useCallback((h,v,w)=>{r(C=>({...C,[h]:{...v,pinTargetOnScreen:w}}))},[]),c=p.useCallback(h=>Mu(h,t),[t]),m=p.useMemo(()=>Nu(t),[t]);return p.useEffect(()=>{if(!e)return;const h=new Set(e.map(w=>w.id).filter(Boolean)),v=Object.keys(t).filter(w=>!h.has(w));v.length>0&&r(w=>{const C={...w};return v.forEach(b=>{delete C[b]}),C})},[e,t]),p.useEffect(()=>{a(m.clusters),u(m.clusteredIds)},[m]),{pinCoordinates:t,pinClusters:n,clusteredPinIds:i,updatePinCoordinates:s,isClusterVisible:c}},ot=()=>{const[e,t]=p.useState(null);return p.useEffect(()=>{const r=()=>{const n=ur();n&&t(n)};if(r(),!e){const n=new MutationObserver(()=>{r()});return n.observe(document.body,{childList:!0,subtree:!0}),()=>n.disconnect()}},[e]),e},za=({children:e,onPointerDown:t})=>l.jsx(dc,{className:re("group relative p-2 text-slate-500 flex items-start gap-2 max-w-[300px] bg-slate-50 border-slate-200",{"cursor-pointer":t}),onPointerDown:t,children:e}),Ba=({name:e,author:t,organization:r})=>l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-1 truncate",children:e}),l.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[l.jsx(Qo,{text:r}),l.jsx("div",{className:"text-xs text-slate-500 truncate flex-1 min-w-0",children:t})]})]}),Au=27,Ha=({pin:e,deletePin:t,editPin:r})=>{var m;const n=W(Bt),a=ot(),[i,u]=p.useState(!1),s=!!(e.description&&e.description.length>Au),c=h=>{var g,_,I,N,A;if(h.button!==0)return;const{name:v,navigate_to_url:w,guide_me_starting_index:C}=(g=e.attached_file)==null?void 0:g.contents,{id:b}=e.attached_file;if(Ce("pins_document_clicked",{pin_id:e.id,location:"browser",document_id:b}),((_=e.attached_file)==null?void 0:_.type)==="scribe"){const o=zc(b,v,w||"",String(C||""),!1);chrome.runtime.sendMessage({messageType:"openSidePanel",route:o})}if(((I=e.attached_file)==null?void 0:I.type)==="knowledge_page"){const o=`${(N=e.attached_file)==null?void 0:N.url}?sidepanel=true&referrer=sidekick`;chrome.runtime.sendMessage({messageType:"openSidePanel",route:(A=e.attached_file)==null?void 0:A.url}),chrome.runtime.sendMessage({messageType:"openUrlInSidepanel",url:o})}};return l.jsx(et,{children:l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[l.jsx("div",{className:"flex-1 min-w-0",children:e.description&&l.jsx(l.Fragment,{children:s?l.jsxs(ve,{children:[l.jsx(xe,{children:l.jsx("div",{className:"text-sm text-gray-900 leading-relaxed text-left line-clamp-2",children:e.description})}),l.jsx(ce,{variant:"compact",className:"w-[300px]",children:l.jsx("p",{className:"text-xs",children:e.description})})]}):l.jsx("div",{className:"text-sm text-gray-900 leading-relaxed text-left line-clamp-2",children:e.description})})}),n&&Rl(n)&&l.jsx("div",{className:"flex-shrink-0 z-[999999]",children:l.jsxs(Ml,{children:[l.jsx(Nl,{asChild:!0,children:l.jsx(oe,{variant:"ghost",size:"small",icon:hl,"aria-label":"Pin options",className:"text-slate-600"})}),l.jsxs(Dl,{align:"end",container:a,className:"z-[999999]",children:[l.jsx(Jo,{onSelect:()=>r(e.id),icon:mc,children:"Edit Pin"}),l.jsx(Jo,{onSelect:()=>u(!0),icon:ua,children:"Delete Pin"})]})]})})]}),e.attached_file&&!e.attached_file.error&&l.jsxs(za,{onPointerDown:c,children:[l.jsx(Zo,{fileType:e.attached_file.type,iconUrl:e.attached_file.contents.icon_url||""}),l.jsx(Ba,{name:e.attached_file.contents.name,author:e.attached_file.contents.author,organization:(m=e.attached_file.contents.organization_owner)==null?void 0:m.name})]}),i&&l.jsx(ea,{open:i,onOpenChange:()=>u(!1),children:l.jsxs(ta,{container:a,children:[l.jsx(na,{title:"Delete Pin",description:Al({pin:e,userTeams:(n==null?void 0:n.organizations)||[]})}),l.jsx(ra,{primaryAction:{children:"Delete",variant:"danger",onClick:()=>t(e.id)},secondaryAction:{children:"Cancel",onClick:()=>u(!1)}})]})})]})})},yr=({pinX:e,pinY:t,isVisible:r,onMouseEnter:n,onMouseLeave:a,enableKeyboardCapture:i=!1,disableAutoPosition:u=!1,positionOverride:s=null,positioning:c="fixed",inClusterStack:m=!1,firstInStack:h=!1,lastInStack:v=!1,children:w})=>{const C=p.useRef(null),[b,g]=p.useState(null),_=ot();return p.useEffect(()=>{if(u){g(null);return}if(C.current&&r){const I=C.current.getBoundingClientRect(),N=oa({pinX:e,pinY:t,dialogWidth:I.width,dialogHeight:I.height,horizontalSpacing:12,verticalSpacing:12,tightHorizontalSpacing:6,tightVerticalSpacing:6});g(N)}},[e,t,r,u]),p.useEffect(()=>{if(i&&_){const I=["keydown","keypress"],N=[];return I.forEach(A=>{const o=d=>{d.stopPropagation()};_.addEventListener(A,o),N.push(o)}),()=>{I.forEach((A,o)=>{_.removeEventListener(A,N[o])})}}},[i,_]),r?l.jsx("div",{ref:C,className:re("bg-white p-3",!m&&"rounded-lg shadow-lg"),style:{position:c,left:(s==null?void 0:s.x)??(b==null?void 0:b.x)??e,top:(s==null?void 0:s.y)??(b==null?void 0:b.y)??t,zIndex:1e5-1,width:c==="relative"?"100%":"300px",visibility:u||b?"visible":"hidden",pointerEvents:"auto",...m?{boxShadow:"none",borderTopLeftRadius:h?"8px":void 0,borderTopRightRadius:h?"8px":void 0,borderBottomLeftRadius:v?"8px":void 0,borderBottomRightRadius:v?"8px":void 0,borderBottom:v?void 0:"2px solid #E4E8EE"}:{}},onMouseEnter:n,onMouseLeave:a,children:w}):null},Ou=e=>{const t={};let r=null,n=0;return e.forEach(a=>{const i=a.pin_color;if(!i)return;const u=(t[i]??0)+1;t[i]=u,u>n&&(n=u,r=i)}),r},Lu=({centerPosition:e,pins:t,color:r="#3C2EDD",deletePin:n,editPin:a,editingPin:i,repositionPin:u,onRepositionStart:s,tempPinPosition:c})=>{const[m,h]=p.useState(!1),v=p.useRef(null),w=p.useRef(null),C=p.useRef(0),b=p.useRef(!1),[g,_]=p.useState(!1),I=W(Jn),N=i&&t.some(P=>P.id===i.id);p.useEffect(()=>{b.current=!!N,N?(v.current&&(clearTimeout(v.current),v.current=null),w.current&&(clearTimeout(w.current),w.current=null),h(!0)):N||(v.current&&(clearTimeout(v.current),v.current=null),w.current&&(clearTimeout(w.current),w.current=null),h(!1))},[N]);const A=()=>{N||(t==null||t.forEach(P=>{var R;Ce("pin_hovered",{pin_id:P.id,location:"browser",document_id:(R=P.attached_file)==null?void 0:R.id,pin_is_clustered:!0})}),w.current&&(clearTimeout(w.current),w.current=null),C.current=Math.max(0,C.current)+1,m||(v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{h(!0),v.current=null},500)))},o=()=>{N||(C.current=Math.max(0,C.current-1),v.current&&(clearTimeout(v.current),v.current=null),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{C.current===0&&!b.current&&h(!1),w.current=null},150))},d=(P,R)=>c&&(i==null?void 0:i.id)===P.id?{x:c.x-e.x,y:c.y-e.y}:R,f=Ou(t),x=!!(m&&!g&&!N),j=p.useRef(null),[S,E]=p.useState(0);p.useLayoutEffect(()=>{if(!x)return;const P=j.current;if(!P)return;const R=()=>{const M=P.getBoundingClientRect();E(M.height)};R();const T=new ResizeObserver(()=>R());return T.observe(P),()=>{T.disconnect()}},[x,t.length]);const k=p.useMemo(()=>{if(!x)return null;const P=Math.max(S,0),{x:R}=oa({pinX:e.x,pinY:e.y,dialogWidth:300,dialogHeight:P||300,horizontalSpacing:12,verticalSpacing:12,tightVerticalSpacing:6}),T=document.documentElement.clientHeight,M=e.y-(P||300)/2,y=Math.max(0,Math.min(M,T-(P||300)));return{x:R,y}},[x,S,e.x,e.y]);return l.jsxs(l.Fragment,{children:[g&&i&&t.some(P=>P.id===i.id)&&l.jsx(xr,{isDragging:g,color:i.pin_color,pinShiftClickThrough:!1,isUpdatingPin:!0}),l.jsxs("div",{style:{position:"absolute",left:e.x,top:e.y,zIndex:1e5-1,pointerEvents:I||g&&i?"none":"auto"},onMouseEnter:N||i?void 0:A,onMouseLeave:N||i?void 0:o,children:[!N&&l.jsx("div",{className:"flex items-center justify-center",style:{transform:"scale(1.2)",transformOrigin:"center center"},children:l.jsx(Xt,{x:0,y:0,color:f||r,shape:"circle",animate:!0,enablePointerEvents:!0,isHovered:m,inClusterContainer:!0})}),x&&k&&l.jsx("div",{className:"shadow-lg rounded-lg",style:{position:"fixed",left:k.x,top:k.y,width:300,zIndex:1e5-1,pointerEvents:I?"none":"auto",boxSizing:"border-box"},onMouseEnter:A,onMouseLeave:o,children:l.jsx("div",{className:"no-scrollbar",ref:j,style:{display:"flex",flexDirection:"column",gap:0,width:"100%",maxHeight:400,overflowY:"auto",overflowX:"hidden"},children:t.map((P,R)=>l.jsx(yr,{pinX:e.x,pinY:e.y,isVisible:!0,disableAutoPosition:!0,positioning:"relative",positionOverride:{x:0,y:0},inClusterStack:!0,firstInStack:R===0,lastInStack:R===t.length-1,children:l.jsx(Ha,{pin:P,deletePin:()=>n&&n({pinId:P.id,location:"browser"}),editPin:T=>a&&a(T,{x:e.x,y:e.y})})},P.id))})}),N&&i&&l.jsx("div",{style:{position:"absolute",left:0,top:0,transform:(()=>{const P=d(i,{x:0,y:0});return g?"none":`translate(${P.x}px, ${P.y}px)`})(),transformOrigin:"0 0",transition:g?"none":"transform 0.2s ease-out",pointerEvents:I?"none":"auto"},children:l.jsx(Xt,{x:0,y:0,color:i.pin_color,shape:"circle",animate:!1,enablePointerEvents:!0,enableDragging:!0,isHovered:!1,inCluster:!1,inClusterContainer:!0,onDragStart:()=>{_(!0),v.current&&(clearTimeout(v.current),v.current=null),w.current&&(clearTimeout(w.current),w.current=null),s&&s()},onDragEnd:(P,R)=>{_(!1),u&&u(R)}})})]})]})},Fu=({baseDomain:e,urlChips:t,setUrlChips:r,originalPathSegments:n})=>{const a=p.useRef(new Map),i=({label:u,onClick:s})=>l.jsx(Bc,{onClick:s,label:u,className:"bg-slate-100 text-slate-900 border-none focus:bg-slate-200"});return l.jsx("div",{className:"group relative mb-2 box-border rounded-md border border-slate-300 bg-white  text-slate-400 outline outline-0 transition-all p-3",children:l.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[l.jsxs("span",{className:"text-sm break-all flex items-center",children:[e,"/"]}),t.map((u,s)=>l.jsxs(p.Fragment,{children:[s>0&&l.jsx("span",{className:"text-slate-400",children:"/"}),l.jsx(i,{label:u,onClick:()=>{r(c=>{const m=[...c];if(m[s]==="*"){const h=a.current.get(s)??n[s];h!==void 0&&(m[s]=h)}else a.current.set(s,m[s]),m[s]="*";return m})}})]},s))]})})},zu=({setPinUrl:e,originalUrl:t,pinUrl:r,isEditMode:n,editingPinUrl:a})=>{const[i,u]=p.useState(r);p.useEffect(()=>{n||u(r),n&&a&&u(a)},[a,n,r]);const{pathSegments:s}=p.useMemo(()=>aa(t),[t]),{baseDomain:c,pathSegments:m}=p.useMemo(()=>aa(i),[i]),[h,v]=p.useState(m);p.useEffect(()=>{v(m)},[m]);const w=p.useMemo(()=>{if(m.length!==h.length)return!0;for(let _=0;_<m.length;_+=1)if(m[_]!==h[_])return!0;return!1},[m,h]),C=()=>{const _=`${c}/${h.join("/")}`;e(_)},b=()=>{v(m)},g=ot();return l.jsxs(ea,{children:[l.jsx(Ol,{asChild:!0,children:l.jsx(er,{tooltipContent:l.jsx(ce,{variant:"compact",children:"Edit URL configuration"}),children:l.jsx(oe,{className:"text-slate-600",icon:gl,variant:"ghost","aria-label":"Edit URL configuration",size:"small"})})}),l.jsxs(ta,{container:g,children:[l.jsx(na,{title:"Pin visibility configuration",description:"Customizing the URL allows the pin to persist and appear on all pages matching the configured URL path."}),l.jsxs(Ll,{children:[l.jsx(Fu,{baseDomain:c,originalPathSegments:s,urlChips:h,setUrlChips:v}),l.jsx("div",{className:"text-xs text-slate-500 mb-3",children:"Change URL parameters by clicking on the blocks above."})]}),l.jsx(ra,{primaryAction:{children:"Save",variant:"primary",onClick:C},secondaryAction:{children:"Cancel",onClick:b},children:w&&l.jsx(oe,{variant:"secondary","aria-label":"reset",onClick:()=>{v(m)},children:"Reset"})})]})]})},Bu=({documentGlobalPermissions:e,pinTeamIds:t,documentTeamId:r})=>e==="private"||e==="team"&&!t.some(n=>n===r),Hu=({selectedDocument:e,editingPin:t,selectedTeamIds:r})=>{var n,a,i,u;return Bu(e?{documentGlobalPermissions:e.global_permission,pinTeamIds:r,documentTeamId:String((n=e==null?void 0:e.organization_owner)==null?void 0:n.id)??""}:{documentGlobalPermissions:(a=t==null?void 0:t.attached_file)==null?void 0:a.contents.global_permission,pinTeamIds:r,documentTeamId:String((u=(i=t==null?void 0:t.attached_file)==null?void 0:i.contents.organization_owner)==null?void 0:u.id)??""})},$a=e=>l.jsx(sr,{...e}),Ua=G.forwardRef((e,t)=>l.jsx(ha,{ref:t,...e})),$u=G.forwardRef((e,t)=>l.jsx(Fl,{ref:t,...e})),Va=G.forwardRef(({theme:e="dark",children:t,className:r,...n},a)=>l.jsx(ir,{theme:e,className:re("z-[100000] w-56 overflow-hidden px-0 py-2",r),ref:a,collisionPadding:16,...n,children:t})),Ga=({showAvatar:e,avatarProps:t,icon:r,childrenClassName:n,children:a,disabled:i})=>l.jsxs(l.Fragment,{children:[e&&l.jsx("div",{className:re("pl-1",{"pointer-events-none opacity-50":i}),children:l.jsx($c,{size:"xs",...t})}),r&&!e&&l.jsx("span",{className:"mr-1 size-5 flex-none items-center justify-center pl-1",children:l.jsx(se,{icon:r,className:re(Hl(),"text-sm transition-colors")})}),l.jsx("span",{className:re("w-full truncate px-1 text-left",n),children:a})]}),qa=Lo("group relative flex cursor-pointer select-none min-h-8 px-3 py-1 items-center gap-1 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:text-slate-500 w-full justify-between text-slate-900 bg-white dark:bg-slate-800 focus:bg-slate-50 dark:text-slate-100 dark:hover:bg-slate-700 dark:focus:bg-slate-700"),wr=G.forwardRef(({showAvatar:e,avatarProps:t,icon:r,checked:n=!1,menuType:a=$t.Radio,className:i,childrenClassName:u,children:s,onItemSelect:c,onItemKeyDown:m,value:h,disabled:v,...w},C)=>{const b={label:(s==null?void 0:s.toString())||h.toString(),checked:n,value:h},g=()=>{c==null||c(b)};return l.jsxs("div",{ref:C,className:re(qa(),i),onClick:g,onKeyDown:_=>m==null?void 0:m(_,b),tabIndex:0,role:"button","data-disabled":v,...w,children:[a!==$t.Item&&l.jsx("div",{className:"size-4 flex-none",children:n&&l.jsx("div",{className:"flex size-4 items-center justify-center",children:l.jsx(se,{icon:Xo,className:re(zl(),"size-3")})})}),l.jsx(Ga,{showAvatar:e,avatarProps:t,icon:r,childrenClassName:u,disabled:v,children:s})]})});G.forwardRef(({showAvatar:e,avatarProps:t,icon:r,className:n,childrenClassName:a,children:i,onClick:u,disabled:s,...c},m)=>l.jsx("button",{ref:m,className:re(qa(),n),onClick:u,"data-disabled":s,...c,children:l.jsx(Ga,{showAvatar:e,avatarProps:t,icon:r,childrenClassName:a,disabled:s,children:i})}));const Uu=Lo("z-50 overflow-x-hidden max-h-[calc(var(--radix-dropdown-menu-content-available-height)_-_8px)]"),Vu=()=>l.jsxs("div",{className:"flex flex-col space-y-4 px-4 py-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ae,{className:"h-4 w-8 rounded-md"}),l.jsx(Ae,{className:"h-4 w-[60%] rounded-md"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ae,{className:"h-4 w-8 rounded-md"}),l.jsx(Ae,{className:"h-4 w-[75%] rounded-md"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ae,{className:"h-4 w-8 rounded-md"}),l.jsx(Ae,{className:"h-4 w-[69%] rounded-md"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ae,{className:"h-4 w-8 rounded-md"}),l.jsx(Ae,{className:"h-4 w-[71%] rounded-md"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ae,{className:"h-4 w-8 rounded-md"}),l.jsx(Ae,{className:"h-4 w-[66%] rounded-md"})]})]}),Wa=G.forwardRef(({theme:e,placeholder:t="Search",menuType:r=$t.Radio,onOptionSelect:n,onValueChange:a,noResultsText:i,isLoading:u=!1,isSearchable:s=!0,children:c,className:m,scrollAreaChildren:h,handleInputChange:v},w)=>{const C=p.useMemo(()=>c.map(k=>k.props),[c]),[b,g]=p.useState(""),[_,I]=p.useState(C),[N,A]=p.useState(null),[o,d]=p.useState(0),f=p.useRef(null),x=p.useRef([]),j=p.useRef(null);p.useEffect(()=>{if(b!==""){const k=C.filter(P=>(P.children||P.label).toLowerCase().includes(b.toLowerCase()));I(k)}else I(C.slice(0,C.length))},[b,C]),p.useEffect(()=>{if(N){const k=_.map(P=>{if(P.value===N.value){const R={...P,checked:r===$t.Checkbox?!P.checked:!0};return n==null||n(R),R}return r===$t.Radio?{...P,checked:!1}:P});a==null||a(k.filter(P=>P.checked)),I(k)}},[N]);const S=k=>{A(k)},E=(k,P)=>{var R,T,M,y,D,O;if((k.key===" "||k.key==="Enter")&&(k.preventDefault(),S(P)),k.key==="ArrowDown"||k.key==="Tab"){if(k.preventDefault(),(R=x.current[o])==null||R.scrollIntoView({behavior:"smooth",block:"start"}),o<_.length-1)d(L=>L),(T=x.current[o])==null||T.focus(),(M=j.current)==null||M.scrollIntoView({behavior:"smooth",block:"end"});else{d(0),(y=f.current)==null||y.focus();return}d(L=>{var F;const z=L===_.length-1?0:L+1;return(F=x.current[z])==null||F.focus(),z})}if(k.key==="ArrowUp"){if(k.preventDefault(),(D=x.current[o])==null||D.scrollIntoView({behavior:"smooth",block:"start"}),o===0){(O=f.current)==null||O.focus();return}d(L=>{var F;const z=L===0?_.length-1:L-1;return(F=x.current[z])==null||F.focus(),z})}};return l.jsxs("div",{ref:w,"data-theme":e,children:[s&&l.jsx("div",{className:"px-2",children:l.jsx(ba,{iconLeft:hc,placeholder:t,theme:e,iconProps:{className:"text-slate-500 size-4"},small:!0,className:"outline-0 focus:outline-0",onChange:k=>v?v(k.target.value):g(k.target.value),fullWidth:!0,...!v&&{value:b},ref:f})}),c&&s&&l.jsx($u,{}),l.jsx("div",{className:re(Uu(),m),children:u?l.jsx(Vu,{}):l.jsxs(Hc,{ref:j,children:[_.length>0?_.map((k,P)=>l.jsx(wr,{onItemSelect:()=>S(k),onItemKeyDown:E,menuType:r,ref:R=>{x.current[P]=R},...k,children:k.children},k.value)):l.jsx("div",{className:"p-4 text-center text-sm text-slate-200",children:i??"No results found."}),!!h&&h]})})]})});G.forwardRef((e,t)=>l.jsx(Bl,{ref:t,...e}));const Xa=()=>"dark",Gu=({result:e})=>{var n,a,i,u;const t=[(n=e==null?void 0:e.user_owner)==null?void 0:n.first_name,(a=e==null?void 0:e.user_owner)==null?void 0:a.last_name].filter(s=>!!s&&s.length>0).join(" ")||void 0,r=(i=e==null?void 0:e.organization_owner)!=null&&i.name?`${(u=e==null?void 0:e.organization_owner)==null?void 0:u.name}`:void 0;return l.jsxs("div",{className:"flex flex-row text-xs text-slate-500 gap-1 align-middle",children:[l.jsx(Qo,{text:r}),t&&l.jsx("span",{children:t})]})},qu=e=>({created:new Date((e==null?void 0:e.created)||""),icon_and_color_updated:e==null?void 0:e.icon_and_color_updated,app_tags:e==null?void 0:e.app_tags,icon:e==null?void 0:e.icon,icon_color:e==null?void 0:e.icon_color,logo_app_tag:e==null?void 0:e.logo_app_tag}),Wu=(e,t,r,n,a)=>{const[i,u]=p.useState(!1),s=r!==void 0?r:i,c=n||u,m=p.useCallback(w=>{const C=document.getElementById("crxjs-ext");C&&!C.contains(w.target)&&c(!1)},[c]),h=p.useCallback(w=>{const C=w.target;if(e.current&&(e.current===C||e.current.contains(C))){c(!s);return}if(a!=null&&a.current&&(a.current===C||a.current.contains(C))){c(!s);return}t.current&&(t.current===C||t.current.contains(C))||c(!1)},[s,e,t,a,c]),v=p.useCallback(()=>{if(e.current){const w=e.current.getRootNode();if("getElementById"in w)return w.getElementById("root-scribe-elem")}return null},[e]);return p.useEffect(()=>{const w=v();return document.addEventListener("mousedown",m),w&&w.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",m),w&&w.removeEventListener("mousedown",h)}},[m,h,v]),p.useEffect(()=>{if(s){const w=v();w&&requestAnimationFrame(()=>{const C=w.querySelector("[data-radix-popper-content-wrapper] input");C instanceof HTMLInputElement&&C.focus()})}},[s,v]),[s,c]},Ya=({selectedDocument:e,setSelectedDocument:t,external:r=!1,externalOpen:n,onExternalOpenChange:a,externalTriggerRef:i})=>{var k;const u=Xa(),s=ot(),c=p.useRef(null),m=p.useRef(null),h=zo(),[v,w]=Wu(c,m,n,a,i),C=W(Ls),{workspaceScribes:b}=W(Ho),g=W(Fs),_=W(Bt),[I,N]=p.useState("popular"),A=p.useCallback(()=>{try{chrome.runtime.sendMessage({messageType:"getSelectedSuggestionsFilter"},P=>{N(P||"popular")})}catch(P){console.error("Failed to get initial filter:",P)}},[]);p.useEffect(()=>{A()},[v,A]);const o=p.useMemo(()=>I==="saved"?(C==null?void 0:C.documents)??[]:b??[],[C,b,I]),d=p.useMemo(()=>o.map(P=>({value:P.id,label:P.name||"",...P})),[o]),[f,x]=p.useState(""),j=p.useMemo(()=>{const P=f.trim().toLowerCase();return P?d.filter(R=>{var T,M;return(M=(T=R.label)==null?void 0:T.toLowerCase())==null?void 0:M.includes(P)}):d},[d,f]),S=P=>{const R=P.map(y=>String(y.value));if(R.length===0){t(null);return}const T=R[R.length-1],M=d.find(y=>y.value===T)||null;t(M),w(!1)},E=`menu-${(e==null?void 0:e.id)??"none"}`;return p.useEffect(()=>{var M;if(!v)return;const P=typeof window<"u"?window.location.href:null,R=(M=_==null?void 0:_.active_organization)==null?void 0:M.id;if(P&&h(zs(P)),!R)return;if(I==="saved"){h(Bs({organizationId:R}));return}const T=["popular","new","viewed"].includes(I)?I:"popular";h(Hs({url:P,sort:T,organizationId:R}))},[h,v,I,(k=_==null?void 0:_.active_organization)==null?void 0:k.id]),l.jsxs($a,{open:v,children:[r&&(i==null?void 0:i.current)&&l.jsx(ga,{asChild:!0,children:l.jsx("span",{})}),l.jsx(Ua,{asChild:!0,className:r?"hidden":"",children:l.jsx(oe,{ref:c,size:"small",variant:"secondary",icon:gc,children:"Link document"})}),l.jsx(Va,{ref:m,theme:u,container:s,align:"start",alignOffset:-16,style:{maxHeight:"220px",overflowY:"scroll",width:"320px"},children:l.jsx(Wa,{theme:u,placeholder:"Search document to attach",isLoading:g,onValueChange:S,isSearchable:!0,handleInputChange:x,noResultsText:"No scribe documents found",children:j.map(P=>{var R;return l.jsx(wr,{value:P.value,className:"flex justify-start",childrenClassName:"w-[320px] overflow-x-hidden px-0",checked:(e==null?void 0:e.id)===P.value,menuType:"item",children:l.jsxs("div",{className:"flex items-center gap-2",children:[P.type==="scribe"&&l.jsx("div",{className:"",children:l.jsx($l,{document:P,size:13,className:"size-5"})}),P.type==="knowledge_page"&&l.jsx("div",{children:l.jsx(Ul,{isColorfulHeaderEnabled:!!((R=P==null?void 0:P.features)!=null&&R.includes("colorful_header")),colorfulHeader:(P==null?void 0:P.colorful_header)||"",className:"flex-none",size:"small"})}),l.jsxs("div",{style:{textWrap:"wrap"},children:[l.jsx("span",{children:P.label}),l.jsx(Gu,{result:P})]})]})},P.value)})},E)})]})},Xu=e=>{var t,r,n,a;return{fileType:e.type||"scribe",faIcon:e.icon||void 0,iconUrl:(t=qu(e).app_tags[0])==null?void 0:t.icon_url,name:e.name||"",author:[(r=e==null?void 0:e.user_owner)==null?void 0:r.first_name,(n=e==null?void 0:e.user_owner)==null?void 0:n.last_name].filter(Boolean).join(" "),organization:((a=e==null?void 0:e.organization_owner)==null?void 0:a.name)||""}},Yu=({selectedDocument:e,setSelectedDocument:t,editingPin:r,handleUpdateEditingPinAttachedFile:n})=>{var C;const[a,i]=p.useState(!1),u=p.useRef(null),s=e?Xu(e):r!=null&&r.attached_file?{fileType:r.attached_file.type,iconUrl:r.attached_file.contents.icon_url||void 0,name:r.attached_file.contents.name,author:r.attached_file.contents.author,organization:(C=r.attached_file.contents.organization_owner)==null?void 0:C.name}:null;if(!s)return null;const{fileType:c,iconUrl:m,name:h,author:v,organization:w}=s;return l.jsxs(za,{children:[l.jsx(Zo,{fileType:c,iconUrl:m}),l.jsx(Ba,{name:h,author:v,organization:w}),l.jsx(Ya,{selectedDocument:e,setSelectedDocument:t,external:!0,externalOpen:a,onExternalOpenChange:i,externalTriggerRef:u}),l.jsxs(Vl,{className:re("absolute right-1 top-1 opacity-0 transition-opacity duration-200 group-focus-within:opacity-100 group-hover:opacity-100"),children:[l.jsx(ia,{ref:u,icon:bc,onClick:()=>i(!0),label:"Change document"}),l.jsx(ia,{icon:ua,onClick:()=>{e&&t(null),r&&n(null)},label:"Delete document",variant:"danger"})]})]})},Ka=(e,t)=>{const r=e.startsWith("#")?e.slice(1):e,n=parseInt(r.slice(0,2),16),a=parseInt(r.slice(2,4),16),i=parseInt(r.slice(4,6),16);return`rgba(${n}, ${a}, ${i}, ${t})`},Ku=(e,t=.1)=>{const r=e.startsWith("#")?e.slice(1):e,n=Math.min(255,parseInt(r.slice(0,2),16)+255*t),a=Math.min(255,parseInt(r.slice(2,4),16)+255*t),i=Math.min(255,parseInt(r.slice(4,6),16)+255*t);return`#${[n,a,i].map(u=>Math.round(u).toString(16).padStart(2,"0")).join("")}`},bt=e=>/^[0-9A-F]{6}$/i.test(e),Qu=e=>e.length===3?e.split("").map(t=>t+t).join(""):e,Ju=[{id:"D946EF",color:"#D946EF"},{id:"8B5CF6",color:"#8B5CF6"},{id:"3C2EDD",color:"#3C2EDD"},{id:"3B82F6",color:"#3B82F6"},{id:"0EA5E9",color:"#0EA5E9"},{id:"06B6D4",color:"#06B6D4"},{id:"34D399",color:"#34D399"},{id:"EAB308",color:"#EAB308"},{id:"FB923C",color:"#FB923C"},{id:"F97316",color:"#F97316"},{id:"EF4444",color:"#EF4444"},{id:"F43F5E",color:"#F43F5E"},{id:"EC4899",color:"#EC4899"}],Zu=({onColorChange:e,customColor:t,organizationLogos:r=[],selectedLogoId:n,onLogoChange:a})=>{const[i,u]=p.useState(!1),[s,c]=p.useState(t.slice(1)),[m,h]=p.useState(!1),v=ot(),w=p.useRef(null),C=p.useRef(null),b=r.find(g=>g.id===n);return l.jsxs(sr,{open:m,onOpenChange:h,children:[l.jsx(ha,{asChild:!0,children:l.jsx(er,{tooltipContent:l.jsx(ce,{variant:"compact",children:"Customize pin appearance"}),children:b?l.jsx(oe,{"aria-label":"customize pin appearance",ref:C,size:"small",variant:"ghost",children:l.jsx("img",{src:b.logoUrl,alt:"Selected logo",className:"rounded-full w-5 h-5",style:{border:`2px solid ${t}`}})}):l.jsx(oe,{"aria-label":"Customize pin appearance",ref:C,style:{color:t},size:"small",variant:"ghost",icon:Zn})})}),l.jsxs(ir,{className:"pt-2 pb-2",style:{zIndex:1e6,width:"230px",marginTop:"-1px"},side:"bottom",container:v,theme:"dark",children:[r.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"pb-1 text-xs uppercase text-slate-400 text-left",children:"team logos"}),l.jsx("div",{className:"relative flex flex-row flex-wrap p-1 gap-3 mb-3",children:r.map(g=>{const _=n===g.id;return l.jsxs("button",{className:"cursor-pointer h-4 w-4 rounded-full relative items-center justify-center flex","aria-label":`Select ${g.name} logo`,onClick:()=>{u(!1),a==null||a(_?null:g.id)},children:[l.jsxs("div",{className:"flex h-6 w-6 items-center justify-center",children:[l.jsx("img",{src:g.logoUrl,alt:g.name,className:"absolute h-4 w-4 rounded-full object-cover",style:{boxShadow:"rgba(255, 255, 255, 0.3) 0px 0px 0px 1px"}}),l.jsx("div",{className:"absolute inset-0 h-4 w-4 rounded-full hover:animate-ping",style:{backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)"}})]}),_&&l.jsx("div",{className:"absolute h-7 w-7 rounded-full pointer-events-none left-[-6px] top-[-6px]",style:{border:"2px solid #6366F1"}})]},g.id)})})]}),l.jsx("div",{className:"pb-1 text-xs uppercase text-slate-400 text-left",children:"Select color"}),l.jsxs("div",{className:"relative flex flex-row flex-wrap p-1 gap-3",children:[l.jsxs("button",{onClick:()=>{u(!0)},"aria-label":"Select custom color",className:re("flex h-4 w-4 cursor-pointer items-center justify-center rounded-full bg-transparent text-white hover:bg-slate-800"),children:[l.jsx("div",{className:"flex rounded-full text-white",children:l.jsx(se,{icon:bl,style:{width:"15px",height:"15px"}})}),i&&l.jsx("div",{className:"absolute h-7 w-7 rounded-full pointer-events-none",style:{border:"2px solid #6366F1"}})]}),Ju.map(g=>{const _=t===g.color&&!i;return l.jsx("button",{className:"cursor-pointer h-4 w-4 rounded-full relative items-center justify-center flex","aria-label":`Select ${g.color} color`,onClick:()=>{_||(u(!1),e(g.color),c(g.color.slice(1)))},children:l.jsxs("div",{className:"flex h-6 w-6 items-center justify-center",children:[l.jsx("div",{className:"absolute h-4 w-4 rounded-full",style:{backgroundColor:g.color,boxShadow:`${Ku(g.id,.3)} 0px 0px 0px 1px`},children:l.jsx("div",{className:"absolute inset-0 h-4 w-4 rounded-full hover:animate-ping",style:{backgroundColor:Ka(g.id,.3),border:`1px solid ${g.color}`}})}),_&&l.jsx("div",{className:"absolute h-7 w-7 rounded-full pointer-events-none left-[-6px] top-[-6px]",style:{border:"2px solid #6366F1"}})]})},g.id)}),i&&l.jsx("div",{className:"mb-2 mt-2 block w-full flex-row justify-around align-middle",style:{backgroundColor:"#32394326",border:"1px solid #323943",borderRadius:"4px",width:"200px"},children:l.jsxs("div",{className:"relative rounded-md shadow-sm grid grid-cols-[auto_1fr_auto] items-center pl-2",children:[l.jsx("div",{className:"h-4 w-4 rounded-full mr-2",onClick:()=>{w.current&&w.current.focus()},style:{backgroundColor:Ka(s,1),boxShadow:"rgba(255, 255, 255, 0.15) 0px 0px 0px 1px inset"}}),l.jsx("input",{type:"text",ref:w,style:{width:"100%",height:"1rem",backgroundColor:"#212D3F",border:"none",fontSize:"12px"},className:"p-0 text-slate-100",maxLength:7,minLength:3,value:s,onKeyDown:g=>{if(g.key==="Enter"&&bt(s)){const _=`#${s}`;u(!0),e(_),c(_.slice(1)),h(!1)}},onChange:g=>{let _=g.target.value;_=_.replace("#",""),_=_.replace(/[^0-9a-f]/gi,""),bt(_)?c(Qu(_)):c(_)}}),l.jsx("button",{"aria-label":"Select custom color",disabled:!bt(s),onClick:()=>{if(bt(s)){const g=`#${s}`;u(!0),e(g),c(g.slice(1)),h(!1)}},className:"pt-1 pb-1",style:{borderTopRightRadius:"4px",borderBottomRightRadius:"4px",backgroundColor:"#212D3F",cursor:bt(s)?"pointer":"default"},children:l.jsx(se,{icon:Xo,style:{width:"1rem",height:"100%"},className:re("h-4 w-4",bt(s)?"text-white":"text-gray-500"),"aria-hidden":"true"})})]})})]})]})]})},ed=({pinDescription:e,onDescriptionChange:t})=>{const r=e.length>=140;return l.jsx("div",{className:"mb-3",children:l.jsx(ba,{"data-testid":"pin-description-input",value:e,onChange:n=>t(n.target.value),placeholder:"Describe your pin...",required:!0,small:!0,fullWidth:!0,maxLength:140,className:"mt-3",error:r,helpText:r?"Description is too long. Max 140 characters.":void 0})})},td=({selectedTeamIds:e,onTeamChange:t})=>{const r=Xa(),n=ot(),a=W(Bt),i=Gl(a,e),u=((a==null?void 0:a.organizations)||[]).filter(v=>v.permission_level!=="read"),s=p.useMemo(()=>{var v;if(e.length===0)return"";if(e.length===1){const w=((v=u.find(b=>b.id===e[0]))==null?void 0:v.name)||"",C=10;return w.length>C?`${w.slice(0,C)}...`:w}return`${e.length} teams`},[e,u]),c=v=>{const w=v.map(g=>g.value),C=w.includes("all-teams"),b=u.length>0&&u.every(g=>e.includes(g.id));if(C&&!b){const g=u.map(_=>_.id);t(g)}else if(!C&&b)t([]);else{const g=w.filter(_=>_!=="all-teams");t(g)}},m=u.length>0&&u.every(v=>e.includes(v.id)),h=`menu-${m}-${e.join(",")}`;return l.jsxs($a,{children:[l.jsx(Ua,{asChild:!0,children:l.jsx(er,{tooltipContent:l.jsx(ce,{variant:"compact",children:"Select team"}),children:l.jsx(oe,{"data-testid":"pin-team-picker-button",className:"text-slate-600",size:"small",variant:"ghost",icon:vc,children:s})})}),l.jsx(Va,{theme:r,container:n,align:"start",alignOffset:-13,style:{marginTop:"-1px",maxHeight:"220px",overflowY:"auto",width:"300px",scrollbarColor:"rgba(255, 255, 255, 0.3) transparent",WebkitScrollbarWidth:"8px"},children:l.jsx(Wa,{menuType:"checkbox",theme:r,onValueChange:c,children:i.map(v=>l.jsx(wr,{value:v.value,checked:v.value==="all-teams"?m:e.includes(v.value),...v.menuItemProps,children:v.label},v.value))},h)})]})},nd=({handleCreatePin:e,selectedTeamIds:t,onTeamChange:r,onColorChange:n,customColor:a,selectedLogoId:i,onLogoChange:u,pinUrl:s,setPinUrl:c,pinDescription:m,onDescriptionChange:h,selectedDocument:v,setSelectedDocument:w,editingPin:C,handleUpdatePin:b,handleCancelEdit:g,handleDialogCancel:_,handleUpdateEditingPinAttachedFile:I})=>{var k,P;const N=C!==null,{pinTreasuresAiUrl:A}=Ze(de.getState()),{userData:o}=W(zt),d=(P=(k=o==null?void 0:o.active_organization)==null?void 0:k.super_organization)==null?void 0:P.allow_openai,[f,x]=p.useState(!1),j=((o==null?void 0:o.organizations)||[]).filter(R=>{var T,M;return((T=R.logo)==null?void 0:T.download_url)&&((M=R.logo)==null?void 0:M.id)}).map(R=>({id:R.logo.id,logoUrl:R.logo.download_url,name:R.name})),S=Hu({selectedDocument:v,editingPin:C,selectedTeamIds:t}),E=!(m.trim()||v||N&&(C!=null&&C.attached_file))||t.length===0;return p.useEffect(()=>{if(N)return;const R=vr(window.location.href);d&&A&&!N?(x(!0),chrome.runtime.sendMessage({messageType:"generateAiUrl",originalUrl:R}).then(T=>{T.success?c(La(T.generatedUrl)):c(R)}).catch(()=>{c(R)}).finally(()=>{x(!1)})):(c(R),x(!1))},[N,d,A,c]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsx("div",{className:"text-slate-900 font-semibold",children:"Add pin"}),l.jsx(oe,{"aria-label":"close",variant:"ghost",size:"small",icon:vl,iconProps:{className:"text-slate-600"},onClick:()=>{N?g():_()}})]}),l.jsx(ed,{pinDescription:m,onDescriptionChange:h}),S&&l.jsx(Uc,{icon:xl,title:"Document is not shared with all teams",variant:"warning",className:"mb-2"}),(v||N&&(C==null?void 0:C.attached_file))&&l.jsx(Yu,{selectedDocument:v,setSelectedDocument:w,editingPin:C,handleUpdateEditingPinAttachedFile:I}),!v&&(!N||!(C!=null&&C.attached_file))&&l.jsx(Ya,{selectedDocument:v,setSelectedDocument:w}),l.jsx("div",{className:"flex gap-2 mt-8",children:l.jsxs(et,{children:[l.jsx(td,{selectedTeamIds:t,onTeamChange:r}),l.jsx(zu,{originalUrl:La((C==null?void 0:C.url)||window.location.href),isEditMode:N,pinUrl:s,editingPinUrl:C==null?void 0:C.user_chosen_url,setPinUrl:c}),l.jsx(Zu,{onColorChange:n,customColor:a,organizationLogos:j,selectedLogoId:i,onLogoChange:u}),l.jsxs(ve,{children:[l.jsx(xe,{children:l.jsx(oe,{className:"text-white ml-auto",variant:"primary",size:"small",loading:f,onClick:()=>{N?b():e()},disabled:E,children:"Save"})}),E&&l.jsx(ce,{variant:"compact",children:t.length===0?"Select at least one team":"Enter description or select a document to save"})]})]})})]})},rd={attributes:!0,childList:!0,subtree:!0},od=({callback:e,debounceMs:t=0,options:r=rd})=>{const[n,a]=p.useState();return p.useEffect(()=>{const i=new MutationObserver(t>0?Qn.debounce(e,t):e);return a(i),()=>i==null?void 0:i.disconnect()},[e]),p.useEffect(()=>{n&&n.observe(document,r)},[r,n]),n},ad={attributes:!0,childList:!0,subtree:!0},Qa=({selector:e,xpath:t,tag:r,text:n,attributes:a,debounceMs:i,options:u=ad,retryCount:s=0,timestamp:c,actionType:m,aiFallbackElementId:h,actionId:v,wasInIframe:w,iframeAttributes:C,parentAttributes:b,parentTag:g})=>{const{guideMeAlgo:_,guideMeAlgoV3:I,guideMeAiFallbackAlwaysOn:N,guideMeAiFallback:A}=Ze(de.getState()),[o,d]=p.useState(null),[f,x]=p.useState(null),[j,S]=p.useState(""),[E,k]=p.useState(null),P=(y,D=1)=>{let O=0,L=y;for(;O<=D;){if(!L.parentElement)return y;if(Nc(L.parentElement))return L.parentElement;O+=1,L=L.parentElement}return y},R=y=>y?y!=null&&y.matches(Mc.join(", "))||m!=="mouse_click_action"?y:P(y):null,T=p.useRef({selector:e,xpath:t,tag:r,text:n,attributes:a,aiFallbackElementId:h,actionId:v,wasInIframe:w,iframeAttributes:C,parentAttributes:b,parentTag:g});p.useEffect(()=>{T.current={selector:e,xpath:t,tag:r,text:n,attributes:a,aiFallbackElementId:h,actionId:v,wasInIframe:w,iframeAttributes:C,parentAttributes:b,parentTag:g}},[e,t,r,n,a,h,v,w,C,b,g]);const M=p.useCallback(()=>{var z,F,B,X,U,$,q,Q,J,ge,Me;const{element:y,matchMethod:D,parentIframe:O,algorithm:L}=rr({selector:(z=T==null?void 0:T.current)==null?void 0:z.selector,attributes:(F=T==null?void 0:T.current)==null?void 0:F.attributes,xpath:(B=T==null?void 0:T.current)==null?void 0:B.xpath,tag:(X=T==null?void 0:T.current)==null?void 0:X.tag,text:(U=T==null?void 0:T.current)==null?void 0:U.text,parentAttributes:($=T==null?void 0:T.current)==null?void 0:$.parentAttributes,parentTag:(q=T==null?void 0:T.current)==null?void 0:q.parentTag,algoVersion:_==null?void 0:_.toString(),algoV3Enabled:!!I,isAiFallbackEnabled:!!A,isAiFallbackAlwaysOnEnabled:!!N,aiFallbackElementId:(Q=T==null?void 0:T.current)==null?void 0:Q.aiFallbackElementId,actionId:((J=T==null?void 0:T.current)==null?void 0:J.actionId)||"",wasInIframe:(ge=T==null?void 0:T.current)==null?void 0:ge.wasInIframe,iframeAttributes:(Me=T==null?void 0:T.current)==null?void 0:Me.iframeAttributes});d(R(y)??y??null),x(D),k(O||null),S(L||"")},[v]);return p.useEffect(()=>{const{element:y,matchMethod:D,parentIframe:O,algorithm:L}=rr({selector:e,attributes:a,xpath:t,tag:r,text:n,parentAttributes:b,parentTag:g,algoVersion:_==null?void 0:_.toString(),algoV3Enabled:!!I,isAiFallbackEnabled:!!A,isAiFallbackAlwaysOnEnabled:!!N,aiFallbackElementId:h,actionId:v??"",wasInIframe:w,iframeAttributes:C});d(R(y)??y??null),x(D),k(O||null),S(L||"")},[d,e,t,r,n,s,c,h]),od({callback:M,debounceMs:i,options:u}),{element:o,matchMethod:f,parentIframe:E,algorithm:j}},id=({displayCoordinates:e})=>{const t=ot(),r=()=>{chrome.runtime.sendMessage({messageType:"updateGrowthState",updates:{has_seen_view_pin_callout:!0}})};return l.jsx("div",{style:{position:"absolute",top:e.y,left:e.x},children:l.jsxs(ql,{open:!0,children:[l.jsx(Wl,{}),l.jsxs(Xl,{className:"p-3",sideOffset:30,align:"start",showCloseButton:!0,onCloseAction:r,portalContainer:t,children:[l.jsx(Yl,{title:"Hover over this pin to view it",icon:xc,titleClassName:"text-sm"}),l.jsx(Kl,{className:"text-xs text-wrap",children:"Your Scribe team admin has added something useful to the webpage!"})]})]})})},sd=({pin:e,isPinning:t,deletePin:r,editPin:n,editingPin:a,repositionPin:i,onRepositionStart:u,tempPinPosition:s,animate:c=!1,onCoordinatesUpdate:m,clusteredPinIds:h,attachCallout:v=!1})=>{var D,O,L,z,F,B,X,U,$,q,Q;const[w,C]=p.useState(!1),b=p.useRef(null),g=p.useRef(null),_=W(Us),I=W(Vs),N=p.useRef(null),[A,o]=p.useState(!1),d=(w||_===e.id)&&(a==null?void 0:a.id)!==e.id,{element:f,parentIframe:x}=Qa({aiFallbackElementId:(D=e.id)==null?void 0:D.toString(),selector:((O=e.location_metadata)==null?void 0:O.selector)??null,xpath:((L=e.location_metadata)==null?void 0:L.target_xpath)||"",tag:((z=e.location_metadata)==null?void 0:z.target_tag)||"",text:((F=e.location_metadata)==null?void 0:F.text)||"",attributes:((B=e.location_metadata)==null?void 0:B.attributes)??null,debounceMs:200,retryCount:0,timestamp:(X=e.location_metadata)==null?void 0:X.timestamp.toString(),actionType:"mouse_click_action",wasInIframe:((U=e.location_metadata)==null?void 0:U.was_in_iframe)??null,iframeAttributes:(($=e.location_metadata)==null?void 0:$.iframe_attributes)??null,parentAttributes:((q=e.location_metadata)==null?void 0:q.target_parent_attributes)??null,parentTag:((Q=e.location_metadata)==null?void 0:Q.target_parent_tag)??""}),{isVisible:j}=gr({element:f,subtreeEnabled:!1,isPinning:t}),S=sa({pin:e,pinTarget:f,parentIframe:x}),E={x:S.x,y:S.y},k=j&&S.isClickPointInViewport,P=s&&(a==null?void 0:a.id)===e.id?s:E;p.useEffect(()=>()=>{b.current&&clearTimeout(b.current),g.current&&clearTimeout(g.current)},[]),p.useEffect(()=>{e.id&&S&&m(e.id,{x:S.x,y:S.y},k)},[e.id,S.x,S.y,k]);const R=()=>{var J;e!=null&&e.id&&!(I!=null&&I.includes(e.id))&&chrome.runtime.sendMessage({messageType:"setViewedPin",data:{pinId:e.id}}),Ce("pin_hovered",{pin_id:e.id,location:"browser",document_id:(J=e.attached_file)==null?void 0:J.id,pin_is_clustered:!1}),b.current&&(clearTimeout(b.current),b.current=null),g.current&&(clearTimeout(g.current),g.current=null),g.current=setTimeout(()=>{C(!0)},500)},T=()=>{g.current&&(clearTimeout(g.current),g.current=null),b.current=setTimeout(()=>{C(!1)},150)},M=()=>{b.current&&(clearTimeout(b.current),b.current=null)},y=()=>{C(!1)};return k?l.jsxs(l.Fragment,{children:[A&&(a==null?void 0:a.id)===e.id&&l.jsx(xr,{isDragging:A,color:e.pin_color,pinShiftClickThrough:!1,isUpdatingPin:!0,logoUrl:e.logo_url||null}),l.jsx(Xt,{inCluster:h==null?void 0:h.has(e.id||""),x:P.x,y:P.y,enableDragging:(a==null?void 0:a.id)===e.id,ref:N,animate:c,shape:"circle",enablePointerEvents:!0,color:e.pin_color,logoUrl:e.logo_url||null,isHovered:d,onMouseEnter:R,onMouseLeave:T,onDragStart:()=>{o(!0),(a==null?void 0:a.id)===e.id&&u()},onDragEnd:(J,ge)=>{o(!1),(a==null?void 0:a.id)===e.id&&i(ge)}}),l.jsx(yr,{pinX:P.x,pinY:P.y,isVisible:d,onMouseEnter:M,onMouseLeave:y,children:l.jsx(Ha,{pin:e,deletePin:()=>r({pinId:e.id,location:"browser"}),editPin:J=>n(J,P)})}),v&&l.jsx(id,{displayCoordinates:P})]}):null},ld=({pins:e,isPinning:t,deletePin:r,editPin:n,editingPin:a,repositionPin:i,onRepositionStart:u,tempPinPosition:s,onCoordinatesUpdate:c,clusteredPinIds:m})=>{var A,o,d,f,x,j,S;const[h,v]=p.useState(!1),w=W(Bt),C=Dc(w),b=(A=W($s))==null?void 0:A.has_seen_view_pin_callout,g=Ql(),_=C&&!b&&!g;p.useEffect(()=>{e&&e.length>0&&Ce("pins_displayed",{pins_visible_count:e.length,pins_total_count:e.length,page_domain:window.location.hostname,iframe_pins_count:e.filter(E=>{var k;return(k=E.location_metadata)==null?void 0:k.was_in_iframe}).length})},[e]),p.useEffect(()=>{chrome.runtime.sendMessage({messageType:"isSidepanelOpen"},k=>{k.isSidepanelOpen&&v(!0)});const E=k=>{k.messageType==="sidepanelOpened"&&(h||v(!0)),k.messageType==="sidepanelClosed"&&h&&v(!1)};return chrome.runtime.onMessage.addListener(E),()=>{chrome.runtime.onMessage.removeListener(E)}},[h]);const I=(d=new URL((o=document.location)==null?void 0:o.href))==null?void 0:d.hostname,N=((x=new URL((f=e[0])==null?void 0:f.url))==null?void 0:x.hostname)||((S=new URL((j=e[0])==null?void 0:j.url))==null?void 0:S.hostname);return I!==N?null:l.jsx(l.Fragment,{children:e.map((E,k)=>l.jsx(sd,{pin:E,isPinning:t,deletePin:r,editPin:n,editingPin:a,repositionPin:i,onRepositionStart:u,tempPinPosition:s,animate:h,onCoordinatesUpdate:c,clusteredPinIds:m,attachCallout:k===0&&_},E.id))})},_r="#3C2EDD",cd=({pins:e})=>{var Mt,Nt,Dt,jo,So,Po;const t=W(Jn),[r,n]=p.useState(!1),a=W(Gs),i=W(qs),u=window.location.href,s=i.includes(u),[c,m]=p.useState(!1),[h,v]=p.useState(!1),[w,C]=p.useState(!1),[b,g]=p.useState(null),_=W(Bt),[I,N]=p.useState((Mt=_==null?void 0:_.active_organization)!=null&&Mt.id?[(Nt=_==null?void 0:_.active_organization)==null?void 0:Nt.id]:[]),[A,o]=p.useState(!1),[d,f]=p.useState(_r),[x,j]=p.useState(null),[S,E]=p.useState(null),[k,P]=p.useState(""),[R,T]=p.useState(null),[M,y]=p.useState({x:0,y:0}),[D,O]=p.useState(null),L=x&&((So=(jo=(Dt=_==null?void 0:_.organizations)==null?void 0:Dt.find(H=>{var V;return((V=H.logo)==null?void 0:V.id)===x}))==null?void 0:jo.logo)==null?void 0:So.download_url)||null,{pinClusters:z,clusteredPinIds:F,updatePinCoordinates:B,isClusterVisible:X}=Du(e),U=W(Ws),$=W(Xs),[q,Q]=p.useState($||null),J=p.useRef(null),ge=((Po=_==null?void 0:_.active_organization)==null?void 0:Po.id)||"",Me=H=>{var At,Ot;if(!H)return{element:null,elementTag:"unknown",elementClass:"",isInIframe:!1};const V=H.target,ee=((At=V==null?void 0:V.tagName)==null?void 0:At.toLowerCase())||"unknown",le=(V==null?void 0:V.className)||"",ft=document!==((Ot=window.top)==null?void 0:Ot.document);return{element:V,elementTag:ee,elementClass:le,isInIframe:ft}},Fe=H=>{H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation();const{element:V,elementTag:ee,elementClass:le,isInIframe:ft}=Me(H);Ce("pins_pin_dropped",{element:V,element_tag:ee,element_class:le,pin_x:H.clientX,pin_y:H.clientY,iframe_context:ft,page_domain:window.location.hostname}),chrome.runtime.sendMessage({messageType:"stopDropPin"}),g(H),m(!0)},Ke=()=>{if(m(!1),!b)return;const H=ca(b),V=vr(window.location.href),ee={shared_with_orgs:I,url:V,attached_file:q==null?void 0:q.id,description:k,...S&&S!==V&&{user_chosen_url:S},location_metadata:H,pin_color:d,pin_shape:"circle",...x&&{logo_id:x}};Ce("pins_save_pin_clicked",{pin:{...ee,document_id:ee==null?void 0:ee.attached_file},page_domain:window.location.hostname,pin_save_type:"creation"}),chrome.runtime.sendMessage({messageType:"createPin",pin:ee}).then(le=>{if(!le.success){tr("Error creating pin");return}Ce("pins_create_success",{pin_id:le.pin.id,page_domain:window.location.hostname})}),De(),g(null)},De=()=>{P(""),Q(null),f(_r),N([ge]),E(ec()),j(null)},Kn=()=>{var ee;if(!R)return;const H=(q==null?void 0:q.id)??(R.attached_file===null?null:(ee=R.attached_file)==null?void 0:ee.id),V={shared_with_orgs:I,attached_file:H,description:k,...S&&{user_chosen_url:S},...R.location_metadata&&{location_metadata:R.location_metadata},pin_color:d,pin_shape:R.pin_shape,logo_id:x};Ce("pins_save_pin_clicked",{pin:V,page_domain:window.location.hostname,pin_save_type:"edit"}),chrome.runtime.sendMessage({messageType:"updatePin",pin:V,pinId:R.id,location:"browser"}).then(le=>{if(!le.success){tr("Error updating pin");return}Ce("pins_update_success",{pin_id:R.id,page_domain:window.location.hostname})}),chrome.runtime.sendMessage({messageType:"stopDropPin"}),T(null),m(!1),y({x:0,y:0}),O(null),De(),g(null)},fn=()=>{C(!0)},pt=H=>{if(!R)return;C(!1),y({x:H.clientX-Ve,y:H.clientY-Ve}),O({x:H.clientX-Ve,y:H.clientY-Ve});const V=ca(H);T({...R,location_metadata:V}),Ce("pins_reposition_during_edit",{pin_id:R.id,new_position:V,page_domain:window.location.hostname})},Pt=H=>{var ft,At,Ot,To,Io,Ro,Mo,No,Do,Ao,Oo;const V=Ze(de.getState()),{element:ee,parentIframe:le}=rr({selector:((ft=H.location_metadata)==null?void 0:ft.selector)??null,attributes:((At=H.location_metadata)==null?void 0:At.attributes)??null,xpath:((Ot=H.location_metadata)==null?void 0:Ot.target_xpath)||"",tag:((To=H.location_metadata)==null?void 0:To.target_tag)||"",text:((Io=H.location_metadata)==null?void 0:Io.text)||"",parentAttributes:((Ro=H.location_metadata)==null?void 0:Ro.target_parent_attributes)??null,parentTag:((Mo=H.location_metadata)==null?void 0:Mo.target_parent_tag)??"",algoVersion:((No=V.guideMeAlgo)==null?void 0:No.toString())||"",algoV3Enabled:!!V.guideMeAlgoV3,isAiFallbackEnabled:!!V.guideMeAiFallback,isAiFallbackAlwaysOnEnabled:!!V.guideMeAiFallbackAlwaysOn,aiFallbackElementId:(Do=H.id)==null?void 0:Do.toString(),actionId:"",wasInIframe:((Ao=H.location_metadata)==null?void 0:Ao.was_in_iframe)??null,iframeAttributes:((Oo=H.location_metadata)==null?void 0:Oo.iframe_attributes)??null});return sa({pin:H,pinTarget:ee,parentIframe:le})},Qe=p.useCallback((H,V)=>{Ce("pins_edit_pin_clicked",{pin_id:H,page_domain:window.location.hostname,location:"browser"}),g(null);const ee=e==null?void 0:e.find(le=>le.id===H);ee&&(T(ee),V&&y(V),f(ee.pin_color||_r),N(ee.shared_with_orgs||[ge]),P(ee.description||""),E(ee.user_chosen_url||ee.url),j(ee.logo_id||null))},[e,ge]),Tt=()=>{T(null),y({x:0,y:0}),O(null),De(),g(null)},ze=H=>{R&&T({...R,attached_file:H})},Je=()=>{const{element:H}=Me(b);Ce("pins_creation_canceled",{pin_text:k,pin_teams:I,pin_color:d,page_domain:window.location.hostname,element:H}),m(!1),De(),g(null)},It=R!==null;Jl({isDropping:t,isPinning:c,isEditingPin:It,onDialogCancel:It?Tt:Je});const mn=H=>{N(H)},Rt=async()=>{const H=await or();n(H)};p.useEffect(()=>(da(()=>{o(!0),Rt()}),chrome.storage.local.onChanged.addListener(H=>{if(H!=null&&H.isGuiding){if(!H.isGuiding.newValue)return;const V=H.isGuiding.newValue==="true";n(V)}}),()=>{chrome.storage.local.onChanged.removeListener(()=>{})}),[]),p.useEffect(()=>{const H=$?{...$,external_id:$.id,value:$.id,label:$.name}:null;Q(H)},[$]),p.useEffect(()=>{const H=V=>{if(V.messageType==="showErrorToast"&&tr(V.title),V.messageType==="editPin"){const ee=e==null?void 0:e.find(le=>le.id===V.pinId);if(ee){const le=Pt(ee);Qe(V.pinId,le)}else Qe(V.pinId)}V.messageType==="cancelEditPin"&&Tt(),V.messageType==="setPinDocument"&&Q(V.document)};return chrome.runtime.onMessage.addListener(H),()=>{chrome.runtime.onMessage.removeListener(H)}},[e,Qe]),p.useEffect(()=>{const H=()=>{if(!R)return;const V=Pt(R);y(V),O(V)};return R&&window.addEventListener("scroll",H),()=>{window.removeEventListener("scroll",H)}},[R]);const hn=W(Ys);return l.jsxs(l.Fragment,{children:[e&&e.length!==0&&A&&!r&&!a&&!hn&&!s&&l.jsxs(l.Fragment,{children:[Object.entries(z).map(([H,V])=>{if(!X(V))return null;const ee=e.filter(le=>V.pinIds.includes(le.id));return l.jsx(Lu,{centerPosition:V.centerPosition,pins:ee,deletePin:la,editPin:Qe,editingPin:R,repositionPin:pt,onRepositionStart:fn,tempPinPosition:D},H)}),l.jsx(ld,{pins:e,isPinning:c,deletePin:la,editPin:Qe,editingPin:R,repositionPin:pt,onRepositionStart:fn,tempPinPosition:D,onCoordinatesUpdate:B,clusteredPinIds:F})]}),t&&l.jsx(xr,{onPinDrop:Fe,isDragging:h,color:d,logoUrl:L,pinShiftClickThrough:U}),(c&&b||R)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{display:w||h?"none":"block"},children:l.jsx(yr,{pinX:c&&b?b.x-Ve+Zl:M.x,pinY:c&&b?b.y-Ve:M.y,isVisible:!0,enableKeyboardCapture:!0,children:l.jsx(nd,{handleCreatePin:Ke,selectedTeamIds:I,onTeamChange:mn,customColor:d,onColorChange:f,selectedLogoId:x,onLogoChange:j,pinUrl:S||"",setPinUrl:E,pinDescription:k,onDescriptionChange:P,selectedDocument:q,setSelectedDocument:Q,editingPin:R,handleUpdatePin:Kn,handleCancelEdit:Tt,handleDialogCancel:Je,handleUpdateEditingPinAttachedFile:ze})})}),c&&b&&l.jsx(Xt,{color:d,logoUrl:L,ref:J,x:b.x-Ve,y:b.y-Ve,animate:!0,enablePointerEvents:!0,enableDragging:!0,onDragStart:()=>{v(!0),chrome.runtime.sendMessage({messageType:"startDropPin",scribe:q})},onDragEnd:(H,V)=>{v(!1),chrome.runtime.sendMessage({messageType:"stopDropPin"}),Fe(V),pt(V)}})]})]})};var Ja=function(e){return e.reduce(function(t,r){var n=r[0],a=r[1];return t[n]=a,t},{})},Za=typeof window<"u"&&window.document&&window.document.createElement?p.useLayoutEffect:p.useEffect,ye="top",Se="bottom",Pe="right",we="left",kr="auto",Yt=[ye,Se,Pe,we],vt="start",Kt="end",ud="clippingParents",ei="viewport",Qt="popper",dd="reference",ti=Yt.reduce(function(e,t){return e.concat([t+"-"+vt,t+"-"+Kt])},[]),ni=[].concat(Yt,[kr]).reduce(function(e,t){return e.concat([t,t+"-"+vt,t+"-"+Kt])},[]),pd="beforeRead",fd="read",md="afterRead",hd="beforeMain",gd="main",bd="afterMain",vd="beforeWrite",xd="write",yd="afterWrite",wd=[pd,fd,md,hd,gd,bd,vd,xd,yd];function Oe(e){return e?(e.nodeName||"").toLowerCase():null}function Ee(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function at(e){var t=Ee(e).Element;return e instanceof t||e instanceof Element}function Te(e){var t=Ee(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Er(e){if(typeof ShadowRoot>"u")return!1;var t=Ee(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function _d(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},a=t.attributes[r]||{},i=t.elements[r];!Te(i)||!Oe(i)||(Object.assign(i.style,n),Object.keys(a).forEach(function(u){var s=a[u];s===!1?i.removeAttribute(u):i.setAttribute(u,s===!0?"":s)}))})}function kd(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var a=t.elements[n],i=t.attributes[n]||{},u=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),s=u.reduce(function(c,m){return c[m]="",c},{});!Te(a)||!Oe(a)||(Object.assign(a.style,s),Object.keys(i).forEach(function(c){a.removeAttribute(c)}))})}}const Ed={name:"applyStyles",enabled:!0,phase:"write",fn:_d,effect:kd,requires:["computeStyles"]};function Le(e){return e.split("-")[0]}var it=Math.max,yn=Math.min,xt=Math.round;function Cr(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ri(){return!/^((?!chrome|android).)*safari/i.test(Cr())}function yt(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),a=1,i=1;t&&Te(e)&&(a=e.offsetWidth>0&&xt(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&xt(n.height)/e.offsetHeight||1);var u=at(e)?Ee(e):window,s=u.visualViewport,c=!ri()&&r,m=(n.left+(c&&s?s.offsetLeft:0))/a,h=(n.top+(c&&s?s.offsetTop:0))/i,v=n.width/a,w=n.height/i;return{width:v,height:w,top:h,right:m+v,bottom:h+w,left:m,x:m,y:h}}function jr(e){var t=yt(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function oi(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Er(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function He(e){return Ee(e).getComputedStyle(e)}function Cd(e){return["table","td","th"].indexOf(Oe(e))>=0}function qe(e){return((at(e)?e.ownerDocument:e.document)||window.document).documentElement}function wn(e){return Oe(e)==="html"?e:e.assignedSlot||e.parentNode||(Er(e)?e.host:null)||qe(e)}function ai(e){return!Te(e)||He(e).position==="fixed"?null:e.offsetParent}function jd(e){var t=/firefox/i.test(Cr()),r=/Trident/i.test(Cr());if(r&&Te(e)){var n=He(e);if(n.position==="fixed")return null}var a=wn(e);for(Er(a)&&(a=a.host);Te(a)&&["html","body"].indexOf(Oe(a))<0;){var i=He(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function Jt(e){for(var t=Ee(e),r=ai(e);r&&Cd(r)&&He(r).position==="static";)r=ai(r);return r&&(Oe(r)==="html"||Oe(r)==="body"&&He(r).position==="static")?t:r||jd(e)||t}function Sr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Zt(e,t,r){return it(e,yn(t,r))}function Sd(e,t,r){var n=Zt(e,t,r);return n>r?r:n}function ii(){return{top:0,right:0,bottom:0,left:0}}function si(e){return Object.assign({},ii(),e)}function li(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Pd=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,si(typeof e!="number"?e:li(e,Yt))};function Td(e){var t,r=e.state,n=e.name,a=e.options,i=r.elements.arrow,u=r.modifiersData.popperOffsets,s=Le(r.placement),c=Sr(s),m=[we,Pe].indexOf(s)>=0,h=m?"height":"width";if(!(!i||!u)){var v=Pd(a.padding,r),w=jr(i),C=c==="y"?ye:we,b=c==="y"?Se:Pe,g=r.rects.reference[h]+r.rects.reference[c]-u[c]-r.rects.popper[h],_=u[c]-r.rects.reference[c],I=Jt(i),N=I?c==="y"?I.clientHeight||0:I.clientWidth||0:0,A=g/2-_/2,o=v[C],d=N-w[h]-v[b],f=N/2-w[h]/2+A,x=Zt(o,f,d),j=c;r.modifiersData[n]=(t={},t[j]=x,t.centerOffset=x-f,t)}}function Id(e){var t=e.state,r=e.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||oi(t.elements.popper,a)&&(t.elements.arrow=a))}const Rd={name:"arrow",enabled:!0,phase:"main",fn:Td,effect:Id,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wt(e){return e.split("-")[1]}var Md={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Nd(e,t){var r=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:xt(r*a)/a||0,y:xt(n*a)/a||0}}function ci(e){var t,r=e.popper,n=e.popperRect,a=e.placement,i=e.variation,u=e.offsets,s=e.position,c=e.gpuAcceleration,m=e.adaptive,h=e.roundOffsets,v=e.isFixed,w=u.x,C=w===void 0?0:w,b=u.y,g=b===void 0?0:b,_=typeof h=="function"?h({x:C,y:g}):{x:C,y:g};C=_.x,g=_.y;var I=u.hasOwnProperty("x"),N=u.hasOwnProperty("y"),A=we,o=ye,d=window;if(m){var f=Jt(r),x="clientHeight",j="clientWidth";if(f===Ee(r)&&(f=qe(r),He(f).position!=="static"&&s==="absolute"&&(x="scrollHeight",j="scrollWidth")),f=f,a===ye||(a===we||a===Pe)&&i===Kt){o=Se;var S=v&&f===d&&d.visualViewport?d.visualViewport.height:f[x];g-=S-n.height,g*=c?1:-1}if(a===we||(a===ye||a===Se)&&i===Kt){A=Pe;var E=v&&f===d&&d.visualViewport?d.visualViewport.width:f[j];C-=E-n.width,C*=c?1:-1}}var k=Object.assign({position:s},m&&Md),P=h===!0?Nd({x:C,y:g},Ee(r)):{x:C,y:g};if(C=P.x,g=P.y,c){var R;return Object.assign({},k,(R={},R[o]=N?"0":"",R[A]=I?"0":"",R.transform=(d.devicePixelRatio||1)<=1?"translate("+C+"px, "+g+"px)":"translate3d("+C+"px, "+g+"px, 0)",R))}return Object.assign({},k,(t={},t[o]=N?g+"px":"",t[A]=I?C+"px":"",t.transform="",t))}function Dd(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=n===void 0?!0:n,i=r.adaptive,u=i===void 0?!0:i,s=r.roundOffsets,c=s===void 0?!0:s,m={placement:Le(t.placement),variation:wt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ci(Object.assign({},m,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:u,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ci(Object.assign({},m,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Ad={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Dd,data:{}};var _n={passive:!0};function Od(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,i=a===void 0?!0:a,u=n.resize,s=u===void 0?!0:u,c=Ee(t.elements.popper),m=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&m.forEach(function(h){h.addEventListener("scroll",r.update,_n)}),s&&c.addEventListener("resize",r.update,_n),function(){i&&m.forEach(function(h){h.removeEventListener("scroll",r.update,_n)}),s&&c.removeEventListener("resize",r.update,_n)}}const Ld={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Od,data:{}};var Fd={left:"right",right:"left",bottom:"top",top:"bottom"};function kn(e){return e.replace(/left|right|bottom|top/g,function(t){return Fd[t]})}var zd={start:"end",end:"start"};function ui(e){return e.replace(/start|end/g,function(t){return zd[t]})}function Pr(e){var t=Ee(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Tr(e){return yt(qe(e)).left+Pr(e).scrollLeft}function Bd(e,t){var r=Ee(e),n=qe(e),a=r.visualViewport,i=n.clientWidth,u=n.clientHeight,s=0,c=0;if(a){i=a.width,u=a.height;var m=ri();(m||!m&&t==="fixed")&&(s=a.offsetLeft,c=a.offsetTop)}return{width:i,height:u,x:s+Tr(e),y:c}}function Hd(e){var t,r=qe(e),n=Pr(e),a=(t=e.ownerDocument)==null?void 0:t.body,i=it(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),u=it(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-n.scrollLeft+Tr(e),c=-n.scrollTop;return He(a||r).direction==="rtl"&&(s+=it(r.clientWidth,a?a.clientWidth:0)-i),{width:i,height:u,x:s,y:c}}function Ir(e){var t=He(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function di(e){return["html","body","#document"].indexOf(Oe(e))>=0?e.ownerDocument.body:Te(e)&&Ir(e)?e:di(wn(e))}function en(e,t){var r;t===void 0&&(t=[]);var n=di(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),i=Ee(n),u=a?[i].concat(i.visualViewport||[],Ir(n)?n:[]):n,s=t.concat(u);return a?s:s.concat(en(wn(u)))}function Rr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function $d(e,t){var r=yt(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function pi(e,t,r){return t===ei?Rr(Bd(e,r)):at(t)?$d(t,r):Rr(Hd(qe(e)))}function Ud(e){var t=en(wn(e)),r=["absolute","fixed"].indexOf(He(e).position)>=0,n=r&&Te(e)?Jt(e):e;return at(n)?t.filter(function(a){return at(a)&&oi(a,n)&&Oe(a)!=="body"}):[]}function Vd(e,t,r,n){var a=t==="clippingParents"?Ud(e):[].concat(t),i=[].concat(a,[r]),u=i[0],s=i.reduce(function(c,m){var h=pi(e,m,n);return c.top=it(h.top,c.top),c.right=yn(h.right,c.right),c.bottom=yn(h.bottom,c.bottom),c.left=it(h.left,c.left),c},pi(e,u,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function fi(e){var t=e.reference,r=e.element,n=e.placement,a=n?Le(n):null,i=n?wt(n):null,u=t.x+t.width/2-r.width/2,s=t.y+t.height/2-r.height/2,c;switch(a){case ye:c={x:u,y:t.y-r.height};break;case Se:c={x:u,y:t.y+t.height};break;case Pe:c={x:t.x+t.width,y:s};break;case we:c={x:t.x-r.width,y:s};break;default:c={x:t.x,y:t.y}}var m=a?Sr(a):null;if(m!=null){var h=m==="y"?"height":"width";switch(i){case vt:c[m]=c[m]-(t[h]/2-r[h]/2);break;case Kt:c[m]=c[m]+(t[h]/2-r[h]/2);break}}return c}function tn(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=n===void 0?e.placement:n,i=r.strategy,u=i===void 0?e.strategy:i,s=r.boundary,c=s===void 0?ud:s,m=r.rootBoundary,h=m===void 0?ei:m,v=r.elementContext,w=v===void 0?Qt:v,C=r.altBoundary,b=C===void 0?!1:C,g=r.padding,_=g===void 0?0:g,I=si(typeof _!="number"?_:li(_,Yt)),N=w===Qt?dd:Qt,A=e.rects.popper,o=e.elements[b?N:w],d=Vd(at(o)?o:o.contextElement||qe(e.elements.popper),c,h,u),f=yt(e.elements.reference),x=fi({reference:f,element:A,strategy:"absolute",placement:a}),j=Rr(Object.assign({},A,x)),S=w===Qt?j:f,E={top:d.top-S.top+I.top,bottom:S.bottom-d.bottom+I.bottom,left:d.left-S.left+I.left,right:S.right-d.right+I.right},k=e.modifiersData.offset;if(w===Qt&&k){var P=k[a];Object.keys(E).forEach(function(R){var T=[Pe,Se].indexOf(R)>=0?1:-1,M=[ye,Se].indexOf(R)>=0?"y":"x";E[R]+=P[M]*T})}return E}function Gd(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=r.boundary,i=r.rootBoundary,u=r.padding,s=r.flipVariations,c=r.allowedAutoPlacements,m=c===void 0?ni:c,h=wt(n),v=h?s?ti:ti.filter(function(b){return wt(b)===h}):Yt,w=v.filter(function(b){return m.indexOf(b)>=0});w.length===0&&(w=v);var C=w.reduce(function(b,g){return b[g]=tn(e,{placement:g,boundary:a,rootBoundary:i,padding:u})[Le(g)],b},{});return Object.keys(C).sort(function(b,g){return C[b]-C[g]})}function qd(e){if(Le(e)===kr)return[];var t=kn(e);return[ui(e),t,ui(t)]}function Wd(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,i=a===void 0?!0:a,u=r.altAxis,s=u===void 0?!0:u,c=r.fallbackPlacements,m=r.padding,h=r.boundary,v=r.rootBoundary,w=r.altBoundary,C=r.flipVariations,b=C===void 0?!0:C,g=r.allowedAutoPlacements,_=t.options.placement,I=Le(_),N=I===_,A=c||(N||!b?[kn(_)]:qd(_)),o=[_].concat(A).reduce(function(U,$){return U.concat(Le($)===kr?Gd(t,{placement:$,boundary:h,rootBoundary:v,padding:m,flipVariations:b,allowedAutoPlacements:g}):$)},[]),d=t.rects.reference,f=t.rects.popper,x=new Map,j=!0,S=o[0],E=0;E<o.length;E++){var k=o[E],P=Le(k),R=wt(k)===vt,T=[ye,Se].indexOf(P)>=0,M=T?"width":"height",y=tn(t,{placement:k,boundary:h,rootBoundary:v,altBoundary:w,padding:m}),D=T?R?Pe:we:R?Se:ye;d[M]>f[M]&&(D=kn(D));var O=kn(D),L=[];if(i&&L.push(y[P]<=0),s&&L.push(y[D]<=0,y[O]<=0),L.every(function(U){return U})){S=k,j=!1;break}x.set(k,L)}if(j)for(var z=b?3:1,F=function(U){var $=o.find(function(q){var Q=x.get(q);if(Q)return Q.slice(0,U).every(function(J){return J})});if($)return S=$,"break"},B=z;B>0;B--){var X=F(B);if(X==="break")break}t.placement!==S&&(t.modifiersData[n]._skip=!0,t.placement=S,t.reset=!0)}}const Xd={name:"flip",enabled:!0,phase:"main",fn:Wd,requiresIfExists:["offset"],data:{_skip:!1}};function mi(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function hi(e){return[ye,Pe,Se,we].some(function(t){return e[t]>=0})}function Yd(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,u=tn(t,{elementContext:"reference"}),s=tn(t,{altBoundary:!0}),c=mi(u,n),m=mi(s,a,i),h=hi(c),v=hi(m);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:m,isReferenceHidden:h,hasPopperEscaped:v},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":v})}const Kd={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Yd};function Qd(e,t,r){var n=Le(e),a=[we,ye].indexOf(n)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,u=i[0],s=i[1];return u=u||0,s=(s||0)*a,[we,Pe].indexOf(n)>=0?{x:s,y:u}:{x:u,y:s}}function Jd(e){var t=e.state,r=e.options,n=e.name,a=r.offset,i=a===void 0?[0,0]:a,u=ni.reduce(function(h,v){return h[v]=Qd(v,t.rects,i),h},{}),s=u[t.placement],c=s.x,m=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=m),t.modifiersData[n]=u}const Zd={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Jd};function ep(e){var t=e.state,r=e.name;t.modifiersData[r]=fi({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const tp={name:"popperOffsets",enabled:!0,phase:"read",fn:ep,data:{}};function np(e){return e==="x"?"y":"x"}function rp(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,i=a===void 0?!0:a,u=r.altAxis,s=u===void 0?!1:u,c=r.boundary,m=r.rootBoundary,h=r.altBoundary,v=r.padding,w=r.tether,C=w===void 0?!0:w,b=r.tetherOffset,g=b===void 0?0:b,_=tn(t,{boundary:c,rootBoundary:m,padding:v,altBoundary:h}),I=Le(t.placement),N=wt(t.placement),A=!N,o=Sr(I),d=np(o),f=t.modifiersData.popperOffsets,x=t.rects.reference,j=t.rects.popper,S=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,E=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(f){if(i){var R,T=o==="y"?ye:we,M=o==="y"?Se:Pe,y=o==="y"?"height":"width",D=f[o],O=D+_[T],L=D-_[M],z=C?-j[y]/2:0,F=N===vt?x[y]:j[y],B=N===vt?-j[y]:-x[y],X=t.elements.arrow,U=C&&X?jr(X):{width:0,height:0},$=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ii(),q=$[T],Q=$[M],J=Zt(0,x[y],U[y]),ge=A?x[y]/2-z-J-q-E.mainAxis:F-J-q-E.mainAxis,Me=A?-x[y]/2+z+J+Q+E.mainAxis:B+J+Q+E.mainAxis,Fe=t.elements.arrow&&Jt(t.elements.arrow),Ke=Fe?o==="y"?Fe.clientTop||0:Fe.clientLeft||0:0,De=(R=k==null?void 0:k[o])!=null?R:0,Kn=D+ge-De-Ke,fn=D+Me-De,pt=Zt(C?yn(O,Kn):O,D,C?it(L,fn):L);f[o]=pt,P[o]=pt-D}if(s){var Pt,Qe=o==="x"?ye:we,Tt=o==="x"?Se:Pe,ze=f[d],Je=d==="y"?"height":"width",It=ze+_[Qe],mn=ze-_[Tt],Rt=[ye,we].indexOf(I)!==-1,hn=(Pt=k==null?void 0:k[d])!=null?Pt:0,Mt=Rt?It:ze-x[Je]-j[Je]-hn+E.altAxis,Nt=Rt?ze+x[Je]+j[Je]-hn-E.altAxis:mn,Dt=C&&Rt?Sd(Mt,ze,Nt):Zt(C?Mt:It,ze,C?Nt:mn);f[d]=Dt,P[d]=Dt-ze}t.modifiersData[n]=P}}const op={name:"preventOverflow",enabled:!0,phase:"main",fn:rp,requiresIfExists:["offset"]};function ap(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ip(e){return e===Ee(e)||!Te(e)?Pr(e):ap(e)}function sp(e){var t=e.getBoundingClientRect(),r=xt(t.width)/e.offsetWidth||1,n=xt(t.height)/e.offsetHeight||1;return r!==1||n!==1}function lp(e,t,r){r===void 0&&(r=!1);var n=Te(t),a=Te(t)&&sp(t),i=qe(t),u=yt(e,a,r),s={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((Oe(t)!=="body"||Ir(i))&&(s=ip(t)),Te(t)?(c=yt(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=Tr(i))),{x:u.left+s.scrollLeft-c.x,y:u.top+s.scrollTop-c.y,width:u.width,height:u.height}}function cp(e){var t=new Map,r=new Set,n=[];e.forEach(function(i){t.set(i.name,i)});function a(i){r.add(i.name);var u=[].concat(i.requires||[],i.requiresIfExists||[]);u.forEach(function(s){if(!r.has(s)){var c=t.get(s);c&&a(c)}}),n.push(i)}return e.forEach(function(i){r.has(i.name)||a(i)}),n}function up(e){var t=cp(e);return wd.reduce(function(r,n){return r.concat(t.filter(function(a){return a.phase===n}))},[])}function dp(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function pp(e){var t=e.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var gi={placement:"bottom",modifiers:[],strategy:"absolute"};function bi(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function fp(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,a=t.defaultOptions,i=a===void 0?gi:a;return function(u,s,c){c===void 0&&(c=i);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},gi,i),modifiersData:{},elements:{reference:u,popper:s},attributes:{},styles:{}},h=[],v=!1,w={state:m,setOptions:function(g){var _=typeof g=="function"?g(m.options):g;b(),m.options=Object.assign({},i,m.options,_),m.scrollParents={reference:at(u)?en(u):u.contextElement?en(u.contextElement):[],popper:en(s)};var I=up(pp([].concat(n,m.options.modifiers)));return m.orderedModifiers=I.filter(function(N){return N.enabled}),C(),w.update()},forceUpdate:function(){if(!v){var g=m.elements,_=g.reference,I=g.popper;if(bi(_,I)){m.rects={reference:lp(_,Jt(I),m.options.strategy==="fixed"),popper:jr(I)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(j){return m.modifiersData[j.name]=Object.assign({},j.data)});for(var N=0;N<m.orderedModifiers.length;N++){if(m.reset===!0){m.reset=!1,N=-1;continue}var A=m.orderedModifiers[N],o=A.fn,d=A.options,f=d===void 0?{}:d,x=A.name;typeof o=="function"&&(m=o({state:m,options:f,name:x,instance:w})||m)}}}},update:dp(function(){return new Promise(function(g){w.forceUpdate(),g(m)})}),destroy:function(){b(),v=!0}};if(!bi(u,s))return w;w.setOptions(c).then(function(g){!v&&c.onFirstUpdate&&c.onFirstUpdate(g)});function C(){m.orderedModifiers.forEach(function(g){var _=g.name,I=g.options,N=I===void 0?{}:I,A=g.effect;if(typeof A=="function"){var o=A({state:m,name:_,instance:w,options:N}),d=function(){};h.push(o||d)}})}function b(){h.forEach(function(g){return g()}),h=[]}return w}}var mp=[Ld,tp,Ad,Ed,Zd,Xd,op,Rd,Kd],hp=fp({defaultModifiers:mp}),gp=typeof Element<"u",bp=typeof Map=="function",vp=typeof Set=="function",xp=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function En(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!En(e[n],t[n]))return!1;return!0}var i;if(bp&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;for(i=e.entries();!(n=i.next()).done;)if(!En(n.value[1],t.get(n.value[0])))return!1;return!0}if(vp&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(xp&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;if(gp&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&e.$$typeof)&&!En(e[a[n]],t[a[n]]))return!1;return!0}return e!==e&&t!==t}var yp=function(e,t){try{return En(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const wp=lr(yp);var _p=[],vi=function(e,t,r){r===void 0&&(r={});var n=p.useRef(null),a={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||_p},i=p.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),u=i[0],s=i[1],c=p.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(v){var w=v.state,C=Object.keys(w.elements);Fo.flushSync(function(){s({styles:Ja(C.map(function(b){return[b,w.styles[b]||{}]})),attributes:Ja(C.map(function(b){return[b,w.attributes[b]]}))})})},requires:["computeStyles"]}},[]),m=p.useMemo(function(){var v={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[c,{name:"applyStyles",enabled:!1}])};return wp(n.current,v)?n.current||v:(n.current=v,v)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,c]),h=p.useRef();return Za(function(){h.current&&h.current.setOptions(m)},[m]),Za(function(){if(!(e==null||t==null)){var v=r.createPopper||hp,w=v(e,t,m);return h.current=w,function(){w.destroy(),h.current=null}}},[e,t,r.createPopper]),{state:h.current?h.current.state:null,styles:u.styles,attributes:u.attributes,update:h.current?h.current.update:null,forceUpdate:h.current?h.current.forceUpdate:null}};function Ie(){let e=[],t=[],r={enqueue(n){t.push(n)},requestAnimationFrame(...n){let a=requestAnimationFrame(...n);r.add(()=>cancelAnimationFrame(a))},nextFrame(...n){r.requestAnimationFrame(()=>{r.requestAnimationFrame(...n)})},setTimeout(...n){let a=setTimeout(...n);r.add(()=>clearTimeout(a))},add(n){e.push(n)},dispose(){for(let n of e.splice(0))n()},async workQueue(){for(let n of t.splice(0))await n()}};return r}function st(){let[e]=p.useState(Ie);return p.useEffect(()=>()=>e.dispose(),[e]),e}var Y=typeof window<"u"?p.useLayoutEffect:p.useEffect,Mr={serverHandoffComplete:!1};function Cn(){let[e,t]=p.useState(Mr.serverHandoffComplete);return p.useEffect(()=>{e!==!0&&t(!0)},[e]),p.useEffect(()=>{Mr.serverHandoffComplete===!1&&(Mr.serverHandoffComplete=!0)},[]),e}var kp=0;function xi(){return++kp}function ae(){let e=Cn(),[t,r]=p.useState(e?xi:null);return Y(()=>{t===null&&r(xi())},[t]),t!=null?""+t:void 0}function yi(e){let t=p.useRef(e);return p.useEffect(()=>{t.current=e},[e]),t}function nn(e,t){let[r,n]=p.useState(e),a=yi(e);return Y(()=>n(a.current),[a,n,...t]),r}function fe(...e){let t=p.useRef(e);return p.useEffect(()=>{t.current=e},[e]),p.useCallback(r=>{for(let n of t.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[t])}function ne(e,t,...r){if(e in t){let a=t[e];return typeof a=="function"?a(...r):a}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ne),n}function Z({props:e,slot:t,defaultTag:r,features:n,visible:a=!0,name:i}){if(a)return jn(e,t,r,i);let u=n??0;if(u&2){let{static:s=!1,...c}=e;if(s)return jn(c,t,r,i)}if(u&1){let{unmount:s=!0,...c}=e;return ne(s?0:1,{0(){return null},1(){return jn({...c,hidden:!0,style:{display:"none"}},t,r,i)}})}return jn(e,t,r,i)}function jn(e,t={},r,n){let{as:a=r,children:i,refName:u="ref",...s}=Nr(e,["unmount","static"]),c=e.ref!==void 0?{[u]:e.ref}:{},m=typeof i=="function"?i(t):i;if(s.className&&typeof s.className=="function"&&(s.className=s.className(t)),a===p.Fragment&&Object.keys(s).length>0){if(!p.isValidElement(m)||Array.isArray(m)&&m.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(s).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`));return p.cloneElement(m,Object.assign({},Ep(Cp(Nr(s,["ref"])),m.props,["onClick"]),c))}return p.createElement(a,Object.assign({},Nr(s,["ref"]),a!==p.Fragment&&c),m)}function Ep(e,t,r){let n=Object.assign({},e);for(let a of r)e[a]!==void 0&&t[a]!==void 0&&Object.assign(n,{[a](i){i.defaultPrevented||e[a](i),i.defaultPrevented||t[a](i)}});return n}function me(e){var t;return Object.assign(p.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Cp(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function Nr(e,t=[]){let r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}function jp(e){throw new Error("Unexpected object: "+e)}function Dr(e,t){let r=t.resolveItems();if(r.length<=0)return null;let n=t.resolveActiveIndex(),a=n??-1,i=(()=>{switch(e.focus){case 0:return r.findIndex(u=>!t.resolveDisabled(u));case 1:{let u=r.slice().reverse().findIndex((s,c,m)=>a!==-1&&m.length-c-1>=a?!1:!t.resolveDisabled(s));return u===-1?u:r.length-1-u}case 2:return r.findIndex((u,s)=>s<=a?!1:!t.resolveDisabled(u));case 3:{let u=r.slice().reverse().findIndex(s=>!t.resolveDisabled(s));return u===-1?u:r.length-1-u}case 4:return r.findIndex(u=>t.resolveId(u)===e.id);case 5:return null;default:jp(e)}})();return i===-1?n:i}function lt(e){let t=e.parentElement,r=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(r=t),t=t.parentElement;let n=(t==null?void 0:t.getAttribute("disabled"))==="";return n&&Sp(r)?!1:n}function Sp(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}function Re(e,t,r){let n=p.useRef(t);n.current=t,p.useEffect(()=>{function a(i){n.current.call(window,i)}return window.addEventListener(e,a,r),()=>window.removeEventListener(e,a,r)},[e,r])}var Ar=p.createContext(null);Ar.displayName="OpenClosedContext";function $e(){return p.useContext(Ar)}function _t({value:e,children:t}){return G.createElement(Ar.Provider,{value:e},t)}function wi(e){var t;if(e.type)return e.type;let r=(t=e.as)!=null?t:"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function rn(e,t){let[r,n]=p.useState(()=>wi(e));return Y(()=>{n(wi(e))},[e.type,e.as]),Y(()=>{r||!t.current||t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&n("button")},[r,t]),r}function _i({container:e,accept:t,walk:r,enabled:n=!0}){let a=p.useRef(t),i=p.useRef(r);p.useEffect(()=>{a.current=t,i.current=r},[t,r]),Y(()=>{if(!e||!n)return;let u=a.current,s=i.current,c=Object.assign(h=>u(h),{acceptNode:u}),m=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,c,!1);for(;m.nextNode();)s(m.currentNode)},[e,n,a,i])}var Pp={1(e){return e.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1}},0(e){return e.disabled||e.comboboxState===0?e:{...e,comboboxState:0}},2(e,t){return e.disabled===t.disabled?e:{...e,disabled:t.disabled}},3(e,t){if(e.disabled||e.optionsRef.current&&!e.optionsPropsRef.current.static&&e.comboboxState===1)return e;let r=Dr(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.current.disabled});return e.activeOptionIndex===r?e:{...e,activeOptionIndex:r}},4:(e,t)=>{var r;let n=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,a=Array.from((r=e.optionsRef.current)==null?void 0:r.querySelectorAll('[id^="headlessui-combobox-option-"]')).reduce((u,s,c)=>Object.assign(u,{[s.id]:c}),{}),i=[...e.options,{id:t.id,dataRef:t.dataRef}].sort((u,s)=>a[u.id]-a[s.id]);return{...e,options:i,activeOptionIndex:(()=>n===null?null:i.indexOf(n))()}},5:(e,t)=>{let r=e.options.slice(),n=e.activeOptionIndex!==null?r[e.activeOptionIndex]:null,a=r.findIndex(i=>i.id===t.id);return a!==-1&&r.splice(a,1),{...e,options:r,activeOptionIndex:(()=>a===e.activeOptionIndex||n===null?null:r.indexOf(n))()}}},Or=p.createContext(null);Or.displayName="ComboboxContext";function kt(e){let t=p.useContext(Or);if(t===null){let r=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,kt),r}return t}var Lr=p.createContext(null);Lr.displayName="ComboboxActions";function Sn(){let e=p.useContext(Lr);if(e===null){let t=new Error("ComboboxActions is missing a parent <Combobox /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Sn),t}return e}function Tp(e,t){return ne(t.type,Pp,e,t)}var Ip=p.Fragment,Rp=me(function(e,t){let{value:r,onChange:n,disabled:a=!1,...i}=e,u=p.useRef({value:r,onChange:n}),s=p.useRef({static:!1,hold:!1}),c=p.useRef({displayValue:void 0}),m=p.useReducer(Tp,{comboboxState:1,comboboxPropsRef:u,optionsPropsRef:s,inputPropsRef:c,labelRef:p.createRef(),inputRef:p.createRef(),buttonRef:p.createRef(),optionsRef:p.createRef(),disabled:a,options:[],activeOptionIndex:null}),[{comboboxState:h,options:v,activeOptionIndex:w,optionsRef:C,inputRef:b,buttonRef:g},_]=m;Y(()=>{u.current.value=r},[r,u]),Y(()=>{u.current.onChange=n},[n,u]),Y(()=>_({type:2,disabled:a}),[a]),Re("mousedown",x=>{var j,S,E;let k=x.target;h===0&&((j=g.current)!=null&&j.contains(k)||(S=b.current)!=null&&S.contains(k)||(E=C.current)!=null&&E.contains(k)||_({type:1}))});let I=w===null?null:v[w].dataRef.current.value,N=p.useMemo(()=>({open:h===0,disabled:a,activeIndex:w,activeOption:I}),[h,a,v,w]),A=p.useCallback(()=>{if(!b.current||r===void 0)return;let x=c.current.displayValue;typeof x=="function"?b.current.value=x(r):typeof r=="string"&&(b.current.value=r)},[r,b,c]),o=p.useCallback(x=>{let j=v.find(E=>E.id===x);if(!j)return;let{dataRef:S}=j;u.current.onChange(S.current.value),A()},[v,u,b]),d=p.useCallback(()=>{if(w!==null){let{dataRef:x}=v[w];u.current.onChange(x.current.value),A()}},[w,v,u,b]),f=p.useMemo(()=>({selectOption:o,selectActiveOption:d}),[o,d]);return Y(()=>{h===1&&A()},[A,h]),Y(A,[A]),G.createElement(Lr.Provider,{value:f},G.createElement(Or.Provider,{value:m},G.createElement(_t,{value:ne(h,{0:0,1:1})},Z({props:t===null?i:{...i,ref:t},slot:N,defaultTag:Ip,name:"Combobox"}))))}),Mp="input",Np=me(function(e,t){var r,n;let{value:a,onChange:i,displayValue:u,...s}=e,[c,m]=kt("Combobox.Input"),h=Sn(),v=fe(c.inputRef,t),w=c.inputPropsRef,C=`headlessui-combobox-input-${ae()}`,b=st(),g=yi(i);Y(()=>{w.current.displayValue=u},[u,w]);let _=p.useCallback(d=>{switch(d.key){case"Enter":d.preventDefault(),d.stopPropagation(),h.selectActiveOption(),m({type:1});break;case"ArrowDown":return d.preventDefault(),d.stopPropagation(),ne(c.comboboxState,{0:()=>m({type:3,focus:2}),1:()=>{m({type:0}),b.nextFrame(()=>{c.comboboxPropsRef.current.value||m({type:3,focus:0})})}});case"ArrowUp":return d.preventDefault(),d.stopPropagation(),ne(c.comboboxState,{0:()=>m({type:3,focus:1}),1:()=>{m({type:0}),b.nextFrame(()=>{c.comboboxPropsRef.current.value||m({type:3,focus:3})})}});case"Home":case"PageUp":return d.preventDefault(),d.stopPropagation(),m({type:3,focus:0});case"End":case"PageDown":return d.preventDefault(),d.stopPropagation(),m({type:3,focus:3});case"Escape":return d.preventDefault(),c.optionsRef.current&&!c.optionsPropsRef.current.static&&d.stopPropagation(),m({type:1});case"Tab":h.selectActiveOption(),m({type:1});break}},[b,m,c,h]),I=p.useCallback(d=>{var f;m({type:0}),(f=g.current)==null||f.call(g,d)},[m,g]),N=nn(()=>{if(c.labelRef.current)return[c.labelRef.current.id].join(" ")},[c.labelRef.current]),A=p.useMemo(()=>({open:c.comboboxState===0,disabled:c.disabled}),[c]),o={ref:v,id:C,role:"combobox",type:"text","aria-controls":(r=c.optionsRef.current)==null?void 0:r.id,"aria-expanded":c.disabled?void 0:c.comboboxState===0,"aria-activedescendant":c.activeOptionIndex===null||(n=c.options[c.activeOptionIndex])==null?void 0:n.id,"aria-labelledby":N,disabled:c.disabled,onKeyDown:_,onChange:I};return Z({props:{...s,...o},slot:A,defaultTag:Mp,name:"Combobox.Input"})}),Dp="button",Ap=me(function(e,t){var r;let[n,a]=kt("Combobox.Button"),i=Sn(),u=fe(n.buttonRef,t),s=`headlessui-combobox-button-${ae()}`,c=st(),m=p.useCallback(g=>{switch(g.key){case"ArrowDown":return g.preventDefault(),g.stopPropagation(),n.comboboxState===1&&(a({type:0}),c.nextFrame(()=>{n.comboboxPropsRef.current.value||a({type:3,focus:0})})),c.nextFrame(()=>{var _;return(_=n.inputRef.current)==null?void 0:_.focus({preventScroll:!0})});case"ArrowUp":return g.preventDefault(),g.stopPropagation(),n.comboboxState===1&&(a({type:0}),c.nextFrame(()=>{n.comboboxPropsRef.current.value||a({type:3,focus:3})})),c.nextFrame(()=>{var _;return(_=n.inputRef.current)==null?void 0:_.focus({preventScroll:!0})});case"Escape":return g.preventDefault(),n.optionsRef.current&&!n.optionsPropsRef.current.static&&g.stopPropagation(),a({type:1}),c.nextFrame(()=>{var _;return(_=n.inputRef.current)==null?void 0:_.focus({preventScroll:!0})})}},[c,a,n,i]),h=p.useCallback(g=>{if(lt(g.currentTarget))return g.preventDefault();n.comboboxState===0?a({type:1}):(g.preventDefault(),a({type:0})),c.nextFrame(()=>{var _;return(_=n.inputRef.current)==null?void 0:_.focus({preventScroll:!0})})},[a,c,n]),v=nn(()=>{if(n.labelRef.current)return[n.labelRef.current.id,s].join(" ")},[n.labelRef.current,s]),w=p.useMemo(()=>({open:n.comboboxState===0,disabled:n.disabled}),[n]),C=e,b={ref:u,id:s,type:rn(e,n.buttonRef),tabIndex:-1,"aria-haspopup":!0,"aria-controls":(r=n.optionsRef.current)==null?void 0:r.id,"aria-expanded":n.disabled?void 0:n.comboboxState===0,"aria-labelledby":v,disabled:n.disabled,onClick:h,onKeyDown:m};return Z({props:{...C,...b},slot:w,defaultTag:Dp,name:"Combobox.Button"})}),Op="label";function Lp(e){let[t]=kt("Combobox.Label"),r=`headlessui-combobox-label-${ae()}`,n=p.useCallback(()=>{var u;return(u=t.inputRef.current)==null?void 0:u.focus({preventScroll:!0})},[t.inputRef]),a=p.useMemo(()=>({open:t.comboboxState===0,disabled:t.disabled}),[t]),i={ref:t.labelRef,id:r,onClick:n};return Z({props:{...e,...i},slot:a,defaultTag:Op,name:"Combobox.Label"})}var Fp="ul",zp=3,Bp=me(function(e,t){var r;let{hold:n=!1,...a}=e,[i]=kt("Combobox.Options"),{optionsPropsRef:u}=i,s=fe(i.optionsRef,t),c=`headlessui-combobox-options-${ae()}`,m=$e(),h=(()=>m!==null?m===0:i.comboboxState===0)();Y(()=>{var b;u.current.static=(b=e.static)!=null?b:!1},[u,e.static]),Y(()=>{u.current.hold=n},[n,u]),_i({container:i.optionsRef.current,enabled:i.comboboxState===0,accept(b){return b.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:b.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(b){b.setAttribute("role","none")}});let v=nn(()=>{var b,g,_;return(_=(b=i.labelRef.current)==null?void 0:b.id)!=null?_:(g=i.buttonRef.current)==null?void 0:g.id},[i.labelRef.current,i.buttonRef.current]),w=p.useMemo(()=>({open:i.comboboxState===0}),[i]),C={"aria-activedescendant":i.activeOptionIndex===null||(r=i.options[i.activeOptionIndex])==null?void 0:r.id,"aria-labelledby":v,role:"listbox",id:c,ref:s};return Z({props:{...a,...C},slot:w,defaultTag:Fp,features:zp,visible:h,name:"Combobox.Options"})}),Hp="li";function $p(e){let{disabled:t=!1,value:r,...n}=e,[a,i]=kt("Combobox.Option"),u=Sn(),s=`headlessui-combobox-option-${ae()}`,c=a.activeOptionIndex!==null?a.options[a.activeOptionIndex].id===s:!1,m=a.comboboxPropsRef.current.value===r,h=p.useRef({disabled:t,value:r});Y(()=>{h.current.disabled=t},[h,t]),Y(()=>{h.current.value=r},[h,r]),Y(()=>{var I,N;h.current.textValue=(N=(I=document.getElementById(s))==null?void 0:I.textContent)==null?void 0:N.toLowerCase()},[h,s]);let v=p.useCallback(()=>u.selectOption(s),[u,s]);Y(()=>(i({type:4,id:s,dataRef:h}),()=>i({type:5,id:s})),[h,s]),Y(()=>{a.comboboxState===0&&(!m||i({type:3,focus:4,id:s}))},[a.comboboxState,m,s]),Y(()=>{if(a.comboboxState!==0||!c)return;let I=Ie();return I.requestAnimationFrame(()=>{var N,A;(A=(N=document.getElementById(s))==null?void 0:N.scrollIntoView)==null||A.call(N,{block:"nearest"})}),I.dispose},[s,c,a.comboboxState,a.activeOptionIndex]);let w=p.useCallback(I=>{if(t)return I.preventDefault();v(),i({type:1}),Ie().nextFrame(()=>{var N;return(N=a.inputRef.current)==null?void 0:N.focus({preventScroll:!0})})},[i,a.inputRef,t,v]),C=p.useCallback(()=>{if(t)return i({type:3,focus:5});i({type:3,focus:4,id:s})},[t,s,i]),b=p.useCallback(()=>{t||c||i({type:3,focus:4,id:s})},[t,c,s,i]),g=p.useCallback(()=>{t||!c||a.optionsPropsRef.current.hold||i({type:3,focus:5})},[t,c,i,a.comboboxState,a.comboboxPropsRef]),_=p.useMemo(()=>({active:c,selected:m,disabled:t}),[c,m,t]);return Z({props:{...n,id:s,role:"option",tabIndex:t===!0?void 0:-1,"aria-disabled":t===!0?!0:void 0,"aria-selected":m===!0?!0:void 0,disabled:void 0,onClick:w,onFocus:C,onPointerMove:b,onMouseMove:b,onPointerLeave:g,onMouseLeave:g},slot:_,defaultTag:Hp,name:"Combobox.Option"})}Object.assign(Rp,{Input:Np,Button:Ap,Label:Lp,Options:Bp,Option:$p});var Fr=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");function Pn(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Fr))}function zr(e,t=0){return e===document.body?!1:ne(t,{0(){return e.matches(Fr)},1(){let r=e;for(;r!==null;){if(r.matches(Fr))return!0;r=r.parentElement}return!1}})}function on(e){e==null||e.focus({preventScroll:!0})}function Ue(e,t){let r=Array.isArray(e)?e.slice().sort((h,v)=>{let w=h.compareDocumentPosition(v);return w&Node.DOCUMENT_POSITION_FOLLOWING?-1:w&Node.DOCUMENT_POSITION_PRECEDING?1:0}):Pn(e),n=document.activeElement,a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),i=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,r.indexOf(n))-1;if(t&4)return Math.max(0,r.indexOf(n))+1;if(t&8)return r.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},s=0,c=r.length,m;do{if(s>=c||s+c<=0)return 0;let h=i+s;if(t&16)h=(h+c)%c;else{if(h<0)return 3;if(h>=c)return 1}m=r[h],m==null||m.focus(u),s+=a}while(m!==document.activeElement);return m.hasAttribute("tabindex")||m.setAttribute("tabindex","0"),2}function ki(){let e=p.useRef(!1);return p.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Up(e,t=30,{initialFocus:r,containers:n}={}){let a=p.useRef(typeof window<"u"?document.activeElement:null),i=p.useRef(null),u=ki(),s=!!(t&16),c=!!(t&2);p.useEffect(()=>{!s||(a.current=document.activeElement)},[s]),p.useEffect(()=>{if(s)return()=>{on(a.current),a.current=null}},[s]),p.useEffect(()=>{if(!c||!e.current)return;let m=document.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===m){i.current=m;return}}else if(e.current.contains(m)){i.current=m;return}r!=null&&r.current?on(r.current):Ue(e.current,1)===0&&console.warn("There are no focusable elements inside the <FocusTrap />"),i.current=document.activeElement},[e,r,c]),Re("keydown",m=>{!(t&4)||!e.current||m.key==="Tab"&&(m.preventDefault(),Ue(e.current,(m.shiftKey?2:4)|16)===2&&(i.current=document.activeElement))}),Re("focus",m=>{if(!(t&8))return;let h=new Set(n==null?void 0:n.current);if(h.add(e),!h.size)return;let v=i.current;if(!v||!u.current)return;let w=m.target;w&&w instanceof HTMLElement?Vp(h,w)?(i.current=w,on(w)):(m.preventDefault(),m.stopPropagation(),on(v)):on(i.current)},!0)}function Vp(e,t){var r;for(let n of e)if((r=n.current)!=null&&r.contains(t))return!0;return!1}var Et=new Set,We=new Map;function Ei(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function Ci(e){let t=We.get(e);!t||(t["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",t["aria-hidden"]),e.inert=t.inert)}function Gp(e,t=!0){Y(()=>{if(!t||!e.current)return;let r=e.current;Et.add(r);for(let n of We.keys())n.contains(r)&&(Ci(n),We.delete(n));return document.querySelectorAll("body > *").forEach(n=>{if(n instanceof HTMLElement){for(let a of Et)if(n.contains(a))return;Et.size===1&&(We.set(n,{"aria-hidden":n.getAttribute("aria-hidden"),inert:n.inert}),Ei(n))}}),()=>{if(Et.delete(r),Et.size>0)document.querySelectorAll("body > *").forEach(n=>{if(n instanceof HTMLElement&&!We.has(n)){for(let a of Et)if(n.contains(a))return;We.set(n,{"aria-hidden":n.getAttribute("aria-hidden"),inert:n.inert}),Ei(n)}});else for(let n of We.keys())Ci(n),We.delete(n)}},[t])}var ji=p.createContext(!1);function qp(){return p.useContext(ji)}function Si(e){return G.createElement(ji.Provider,{value:e.force},e.children)}function Wp(){let e=qp(),t=p.useContext(Pi),[r,n]=p.useState(()=>{if(!e&&t!==null||typeof window>"u")return null;let a=document.getElementById("headlessui-portal-root");if(a)return a;let i=document.createElement("div");return i.setAttribute("id","headlessui-portal-root"),document.body.appendChild(i)});return p.useEffect(()=>{r!==null&&(document.body.contains(r)||document.body.appendChild(r))},[r]),p.useEffect(()=>{e||t!==null&&n(t.current)},[t,n,e]),r}var Xp=p.Fragment;function Br(e){let t=e,r=Wp(),[n]=p.useState(()=>typeof window>"u"?null:document.createElement("div")),a=Cn();return Y(()=>{if(r&&n)return r.appendChild(n),()=>{var i;!r||!n||(r.removeChild(n),r.childNodes.length<=0&&((i=r.parentElement)==null||i.removeChild(r)))}},[r,n]),a?!r||!n?null:Fo.createPortal(Z({props:t,defaultTag:Xp,name:"Portal"}),n):null}var Yp=p.Fragment,Pi=p.createContext(null);function Kp(e){let{target:t,...r}=e;return G.createElement(Pi.Provider,{value:t},Z({props:r,defaultTag:Yp,name:"Popover.Group"}))}Br.Group=Kp;var Ti=p.createContext(null);function Ii(){let e=p.useContext(Ti);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Ii),t}return e}function Qp(){let[e,t]=p.useState([]);return[e.length>0?e.join(" "):void 0,p.useMemo(()=>function(r){let n=p.useCallback(i=>(t(u=>[...u,i]),()=>t(u=>{let s=u.slice(),c=s.indexOf(i);return c!==-1&&s.splice(c,1),s})),[]),a=p.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props}),[n,r.slot,r.name,r.props]);return G.createElement(Ti.Provider,{value:a},r.children)},[t])]}var Jp="p";function Zp(e){let t=Ii(),r=`headlessui-description-${ae()}`;Y(()=>t.register(r),[r,t.register]);let n=e,a={...t.props,id:r};return Z({props:{...n,...a},slot:t.slot||{},defaultTag:Jp,name:t.name||"Description"})}var Hr=p.createContext(()=>{});Hr.displayName="StackContext";function ef(){return p.useContext(Hr)}function tf({children:e,onUpdate:t,type:r,element:n}){let a=ef(),i=p.useCallback((...u)=>{t==null||t(...u),a(...u)},[a,t]);return Y(()=>(i(0,r,n),()=>i(1,r,n)),[i,r,n]),G.createElement(Hr.Provider,{value:i},e)}var nf={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Tn=p.createContext(null);Tn.displayName="DialogContext";function $r(e){let t=p.useContext(Tn);if(t===null){let r=new Error(`<${e} /> is missing a parent <${pf.displayName} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,$r),r}return t}function rf(e,t){return ne(t.type,nf,e,t)}var of="div",af=3,sf=me(function(e,t){let{open:r,onClose:n,initialFocus:a,...i}=e,[u,s]=p.useState(0),c=$e();r===void 0&&c!==null&&(r=ne(c,{0:!0,1:!1}));let m=p.useRef(new Set),h=p.useRef(null),v=fe(h,t),w=e.hasOwnProperty("open")||c!==null,C=e.hasOwnProperty("onClose");if(!w&&!C)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!w)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!C)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof r!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${r}`);if(typeof n!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${n}`);let b=r?0:1,g=(()=>c!==null?c===0:b===0)(),[_,I]=p.useReducer(rf,{titleId:null,descriptionId:null}),N=p.useCallback(()=>n(!1),[n]),A=p.useCallback(T=>I({type:0,id:T}),[I]),o=Cn()&&b===0,d=u>1,f=p.useContext(Tn)!==null;Up(h,o?ne(d?"parent":"leaf",{parent:16,leaf:30}):1,{initialFocus:a,containers:m}),Gp(h,d?o:!1),Re("mousedown",T=>{var M;let y=T.target;b===0&&(d||(M=h.current)!=null&&M.contains(y)||N())}),Re("keydown",T=>{T.key==="Escape"&&b===0&&(d||(T.preventDefault(),T.stopPropagation(),N()))}),p.useEffect(()=>{if(b!==0||f)return;let T=document.documentElement.style.overflow,M=document.documentElement.style.paddingRight,y=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${y}px`,()=>{document.documentElement.style.overflow=T,document.documentElement.style.paddingRight=M}},[b,f]),p.useEffect(()=>{if(b!==0||!h.current)return;let T=new IntersectionObserver(M=>{for(let y of M)y.boundingClientRect.x===0&&y.boundingClientRect.y===0&&y.boundingClientRect.width===0&&y.boundingClientRect.height===0&&N()});return T.observe(h.current),()=>T.disconnect()},[b,h,N]);let[x,j]=Qp(),S=`headlessui-dialog-${ae()}`,E=p.useMemo(()=>[{dialogState:b,close:N,setTitleId:A},_],[b,_,N,A]),k=p.useMemo(()=>({open:b===0}),[b]),P={ref:v,id:S,role:"dialog","aria-modal":b===0?!0:void 0,"aria-labelledby":_.titleId,"aria-describedby":x,onClick(T){T.stopPropagation()}},R=i;return G.createElement(tf,{type:"Dialog",element:h,onUpdate:p.useCallback((T,M,y)=>{M==="Dialog"&&ne(T,{0(){m.current.add(y),s(D=>D+1)},1(){m.current.add(y),s(D=>D-1)}})},[])},G.createElement(Si,{force:!0},G.createElement(Br,null,G.createElement(Tn.Provider,{value:E},G.createElement(Br.Group,{target:h},G.createElement(Si,{force:!1},G.createElement(j,{slot:k,name:"Dialog.Description"},Z({props:{...R,...P},slot:k,defaultTag:of,features:af,visible:g,name:"Dialog"}))))))))}),lf="div",cf=me(function(e,t){let[{dialogState:r,close:n}]=$r("Dialog.Overlay"),a=fe(t),i=`headlessui-dialog-overlay-${ae()}`,u=p.useCallback(c=>{if(c.target===c.currentTarget){if(lt(c.currentTarget))return c.preventDefault();c.preventDefault(),c.stopPropagation(),n()}},[n]),s=p.useMemo(()=>({open:r===0}),[r]);return Z({props:{...e,ref:a,id:i,"aria-hidden":!0,onClick:u},slot:s,defaultTag:lf,name:"Dialog.Overlay"})}),uf="h2";function df(e){let[{dialogState:t,setTitleId:r}]=$r("Dialog.Title"),n=`headlessui-dialog-title-${ae()}`;p.useEffect(()=>(r(n),()=>r(null)),[n,r]);let a=p.useMemo(()=>({open:t===0}),[t]);return Z({props:{...e,id:n},slot:a,defaultTag:uf,name:"Dialog.Title"})}var pf=Object.assign(sf,{Overlay:cf,Title:df,Description:Zp}),ff={0:e=>({...e,disclosureState:ne(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},4(e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},5(e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},Ur=p.createContext(null);Ur.displayName="DisclosureContext";function Vr(e){let t=p.useContext(Ur);if(t===null){let r=new Error(`<${e} /> is missing a parent <${In.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Vr),r}return t}var Gr=p.createContext(null);Gr.displayName="DisclosureAPIContext";function Ri(e){let t=p.useContext(Gr);if(t===null){let r=new Error(`<${e} /> is missing a parent <${In.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ri),r}return t}var qr=p.createContext(null);qr.displayName="DisclosurePanelContext";function mf(){return p.useContext(qr)}function hf(e,t){return ne(t.type,ff,e,t)}var gf=p.Fragment;function In(e){let{defaultOpen:t=!1,...r}=e,n=`headlessui-disclosure-button-${ae()}`,a=`headlessui-disclosure-panel-${ae()}`,i=p.useReducer(hf,{disclosureState:t?0:1,linkedPanel:!1,buttonId:n,panelId:a}),[{disclosureState:u},s]=i;p.useEffect(()=>s({type:2,buttonId:n}),[n,s]),p.useEffect(()=>s({type:3,panelId:a}),[a,s]);let c=p.useCallback(v=>{s({type:1});let w=(()=>v?v instanceof HTMLElement?v:v.current instanceof HTMLElement?v.current:document.getElementById(n):document.getElementById(n))();w==null||w.focus()},[s,n]),m=p.useMemo(()=>({close:c}),[c]),h=p.useMemo(()=>({open:u===0,close:c}),[u,c]);return G.createElement(Ur.Provider,{value:i},G.createElement(Gr.Provider,{value:m},G.createElement(_t,{value:ne(u,{0:0,1:1})},Z({props:r,slot:h,defaultTag:gf,name:"Disclosure"}))))}var bf="button",vf=me(function(e,t){let[r,n]=Vr("Disclosure.Button"),a=p.useRef(null),i=fe(a,t),u=mf(),s=u===null?!1:u===r.panelId,c=p.useCallback(g=>{var _;if(s){if(r.disclosureState===1)return;switch(g.key){case" ":case"Enter":g.preventDefault(),g.stopPropagation(),n({type:0}),(_=document.getElementById(r.buttonId))==null||_.focus();break}}else switch(g.key){case" ":case"Enter":g.preventDefault(),g.stopPropagation(),n({type:0});break}},[n,s,r.disclosureState,r.buttonId]),m=p.useCallback(g=>{switch(g.key){case" ":g.preventDefault();break}},[]),h=p.useCallback(g=>{var _;lt(g.currentTarget)||e.disabled||(s?(n({type:0}),(_=document.getElementById(r.buttonId))==null||_.focus()):n({type:0}))},[n,e.disabled,r.buttonId,s]),v=p.useMemo(()=>({open:r.disclosureState===0}),[r]),w=rn(e,a),C=e,b=s?{ref:i,type:w,onKeyDown:c,onClick:h}:{ref:i,id:r.buttonId,type:w,"aria-expanded":e.disabled?void 0:r.disclosureState===0,"aria-controls":r.linkedPanel?r.panelId:void 0,onKeyDown:c,onKeyUp:m,onClick:h};return Z({props:{...C,...b},slot:v,defaultTag:bf,name:"Disclosure.Button"})}),xf="div",yf=3,wf=me(function(e,t){let[r,n]=Vr("Disclosure.Panel"),{close:a}=Ri("Disclosure.Panel"),i=fe(t,()=>{r.linkedPanel||n({type:4})}),u=$e(),s=(()=>u!==null?u===0:r.disclosureState===0)();p.useEffect(()=>()=>n({type:5}),[n]),p.useEffect(()=>{var v;r.disclosureState===1&&((v=e.unmount)==null||v)&&n({type:5})},[r.disclosureState,e.unmount,n]);let c=p.useMemo(()=>({open:r.disclosureState===0,close:a}),[r,a]),m={ref:i,id:r.panelId},h=e;return G.createElement(qr.Provider,{value:r.panelId},Z({props:{...h,...m},slot:c,defaultTag:xf,features:yf,visible:s,name:"Disclosure.Panel"}))});In.Button=vf,In.Panel=wf;var _f={1(e){return e.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},0(e){return e.disabled||e.listboxState===0?e:{...e,listboxState:0}},2(e,t){return e.disabled===t.disabled?e:{...e,disabled:t.disabled}},3(e,t){return e.orientation===t.orientation?e:{...e,orientation:t.orientation}},4(e,t){if(e.disabled||e.listboxState===1)return e;let r=Dr(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.current.disabled});return e.searchQuery===""&&e.activeOptionIndex===r?e:{...e,searchQuery:"",activeOptionIndex:r}},5:(e,t)=>{if(e.disabled||e.listboxState===1)return e;let r=e.searchQuery!==""?0:1,n=e.searchQuery+t.value.toLowerCase(),a=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find(u=>{var s;return!u.dataRef.current.disabled&&((s=u.dataRef.current.textValue)==null?void 0:s.startsWith(n))}),i=a?e.options.indexOf(a):-1;return i===-1||i===e.activeOptionIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeOptionIndex:i}},6(e){return e.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},7:(e,t)=>{var r;let n=Array.from((r=e.optionsRef.current)==null?void 0:r.querySelectorAll('[id^="headlessui-listbox-option-"]')).reduce((i,u,s)=>Object.assign(i,{[u.id]:s}),{}),a=[...e.options,{id:t.id,dataRef:t.dataRef}].sort((i,u)=>n[i.id]-n[u.id]);return{...e,options:a}},8:(e,t)=>{let r=e.options.slice(),n=e.activeOptionIndex!==null?r[e.activeOptionIndex]:null,a=r.findIndex(i=>i.id===t.id);return a!==-1&&r.splice(a,1),{...e,options:r,activeOptionIndex:(()=>a===e.activeOptionIndex||n===null?null:r.indexOf(n))()}}},Wr=p.createContext(null);Wr.displayName="ListboxContext";function an(e){let t=p.useContext(Wr);if(t===null){let r=new Error(`<${e} /> is missing a parent <${sn.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,an),r}return t}function kf(e,t){return ne(t.type,_f,e,t)}var Ef=p.Fragment;function sn(e){let{value:t,onChange:r,disabled:n=!1,horizontal:a=!1,...i}=e,u=a?"horizontal":"vertical",s=p.useReducer(kf,{listboxState:1,propsRef:{current:{value:t,onChange:r}},labelRef:p.createRef(),buttonRef:p.createRef(),optionsRef:p.createRef(),disabled:n,orientation:u,options:[],searchQuery:"",activeOptionIndex:null}),[{listboxState:c,propsRef:m,optionsRef:h,buttonRef:v},w]=s;Y(()=>{m.current.value=t},[t,m]),Y(()=>{m.current.onChange=r},[r,m]),Y(()=>w({type:2,disabled:n}),[n]),Y(()=>w({type:3,orientation:u}),[u]),Re("mousedown",b=>{var g,_,I;let N=b.target;c===0&&((g=v.current)!=null&&g.contains(N)||(_=h.current)!=null&&_.contains(N)||(w({type:1}),zr(N,1)||(b.preventDefault(),(I=v.current)==null||I.focus())))});let C=p.useMemo(()=>({open:c===0,disabled:n}),[c,n]);return G.createElement(Wr.Provider,{value:s},G.createElement(_t,{value:ne(c,{0:0,1:1})},Z({props:i,slot:C,defaultTag:Ef,name:"Listbox"})))}var Cf="button",jf=me(function(e,t){var r;let[n,a]=an("Listbox.Button"),i=fe(n.buttonRef,t),u=`headlessui-listbox-button-${ae()}`,s=st(),c=p.useCallback(g=>{switch(g.key){case" ":case"Enter":case"ArrowDown":g.preventDefault(),a({type:0}),s.nextFrame(()=>{n.propsRef.current.value||a({type:4,focus:0})});break;case"ArrowUp":g.preventDefault(),a({type:0}),s.nextFrame(()=>{n.propsRef.current.value||a({type:4,focus:3})});break}},[a,n,s]),m=p.useCallback(g=>{switch(g.key){case" ":g.preventDefault();break}},[]),h=p.useCallback(g=>{if(lt(g.currentTarget))return g.preventDefault();n.listboxState===0?(a({type:1}),s.nextFrame(()=>{var _;return(_=n.buttonRef.current)==null?void 0:_.focus({preventScroll:!0})})):(g.preventDefault(),a({type:0}))},[a,s,n]),v=nn(()=>{if(n.labelRef.current)return[n.labelRef.current.id,u].join(" ")},[n.labelRef.current,u]),w=p.useMemo(()=>({open:n.listboxState===0,disabled:n.disabled}),[n]),C=e,b={ref:i,id:u,type:rn(e,n.buttonRef),"aria-haspopup":!0,"aria-controls":(r=n.optionsRef.current)==null?void 0:r.id,"aria-expanded":n.disabled?void 0:n.listboxState===0,"aria-labelledby":v,disabled:n.disabled,onKeyDown:c,onKeyUp:m,onClick:h};return Z({props:{...C,...b},slot:w,defaultTag:Cf,name:"Listbox.Button"})}),Sf="label";function Pf(e){let[t]=an("Listbox.Label"),r=`headlessui-listbox-label-${ae()}`,n=p.useCallback(()=>{var u;return(u=t.buttonRef.current)==null?void 0:u.focus({preventScroll:!0})},[t.buttonRef]),a=p.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled}),[t]),i={ref:t.labelRef,id:r,onClick:n};return Z({props:{...e,...i},slot:a,defaultTag:Sf,name:"Listbox.Label"})}var Tf="ul",If=3,Rf=me(function(e,t){var r;let[n,a]=an("Listbox.Options"),i=fe(n.optionsRef,t),u=`headlessui-listbox-options-${ae()}`,s=st(),c=st(),m=$e(),h=(()=>m!==null?m===0:n.listboxState===0)();Y(()=>{let g=n.optionsRef.current;!g||n.listboxState===0&&g!==document.activeElement&&g.focus({preventScroll:!0})},[n.listboxState,n.optionsRef]);let v=p.useCallback(g=>{switch(c.dispose(),g.key){case" ":if(n.searchQuery!=="")return g.preventDefault(),g.stopPropagation(),a({type:5,value:g.key});case"Enter":if(g.preventDefault(),g.stopPropagation(),a({type:1}),n.activeOptionIndex!==null){let{dataRef:_}=n.options[n.activeOptionIndex];n.propsRef.current.onChange(_.current.value)}Ie().nextFrame(()=>{var _;return(_=n.buttonRef.current)==null?void 0:_.focus({preventScroll:!0})});break;case ne(n.orientation,{vertical:"ArrowDown",horizontal:"ArrowRight"}):return g.preventDefault(),g.stopPropagation(),a({type:4,focus:2});case ne(n.orientation,{vertical:"ArrowUp",horizontal:"ArrowLeft"}):return g.preventDefault(),g.stopPropagation(),a({type:4,focus:1});case"Home":case"PageUp":return g.preventDefault(),g.stopPropagation(),a({type:4,focus:0});case"End":case"PageDown":return g.preventDefault(),g.stopPropagation(),a({type:4,focus:3});case"Escape":return g.preventDefault(),g.stopPropagation(),a({type:1}),s.nextFrame(()=>{var _;return(_=n.buttonRef.current)==null?void 0:_.focus({preventScroll:!0})});case"Tab":g.preventDefault(),g.stopPropagation();break;default:g.key.length===1&&(a({type:5,value:g.key}),c.setTimeout(()=>a({type:6}),350));break}},[s,a,c,n]),w=nn(()=>{var g,_,I;return(I=(g=n.labelRef.current)==null?void 0:g.id)!=null?I:(_=n.buttonRef.current)==null?void 0:_.id},[n.labelRef.current,n.buttonRef.current]),C=p.useMemo(()=>({open:n.listboxState===0}),[n]),b={"aria-activedescendant":n.activeOptionIndex===null||(r=n.options[n.activeOptionIndex])==null?void 0:r.id,"aria-labelledby":w,"aria-orientation":n.orientation,id:u,onKeyDown:v,role:"listbox",tabIndex:0,ref:i};return Z({props:{...e,...b},slot:C,defaultTag:Tf,features:If,visible:h,name:"Listbox.Options"})}),Mf="li";function Nf(e){let{disabled:t=!1,value:r,...n}=e,[a,i]=an("Listbox.Option"),u=`headlessui-listbox-option-${ae()}`,s=a.activeOptionIndex!==null?a.options[a.activeOptionIndex].id===u:!1,c=a.propsRef.current.value===r,m=p.useRef({disabled:t,value:r});Y(()=>{m.current.disabled=t},[m,t]),Y(()=>{m.current.value=r},[m,r]),Y(()=>{var _,I;m.current.textValue=(I=(_=document.getElementById(u))==null?void 0:_.textContent)==null?void 0:I.toLowerCase()},[m,u]);let h=p.useCallback(()=>a.propsRef.current.onChange(r),[a.propsRef,r]);Y(()=>(i({type:7,id:u,dataRef:m}),()=>i({type:8,id:u})),[m,u]),Y(()=>{var _,I;a.listboxState===0&&(!c||(i({type:4,focus:4,id:u}),(I=(_=document.getElementById(u))==null?void 0:_.focus)==null||I.call(_)))},[a.listboxState]),Y(()=>{if(a.listboxState!==0||!s)return;let _=Ie();return _.requestAnimationFrame(()=>{var I,N;(N=(I=document.getElementById(u))==null?void 0:I.scrollIntoView)==null||N.call(I,{block:"nearest"})}),_.dispose},[u,s,a.listboxState,a.activeOptionIndex]);let v=p.useCallback(_=>{if(t)return _.preventDefault();h(),i({type:1}),Ie().nextFrame(()=>{var I;return(I=a.buttonRef.current)==null?void 0:I.focus({preventScroll:!0})})},[i,a.buttonRef,t,h]),w=p.useCallback(()=>{if(t)return i({type:4,focus:5});i({type:4,focus:4,id:u})},[t,u,i]),C=p.useCallback(()=>{t||s||i({type:4,focus:4,id:u})},[t,s,u,i]),b=p.useCallback(()=>{t||!s||i({type:4,focus:5})},[t,s,i]),g=p.useMemo(()=>({active:s,selected:c,disabled:t}),[s,c,t]);return Z({props:{...n,id:u,role:"option",tabIndex:t===!0?void 0:-1,"aria-disabled":t===!0?!0:void 0,"aria-selected":c===!0?!0:void 0,disabled:void 0,onClick:v,onFocus:w,onPointerMove:C,onMouseMove:C,onPointerLeave:b,onMouseLeave:b},slot:g,defaultTag:Mf,name:"Listbox.Option"})}sn.Button=jf,sn.Label=Pf,sn.Options=Rf,sn.Option=Nf;var Df={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,menuState:0}},2:(e,t)=>{let r=Dr(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.current.disabled});return e.searchQuery===""&&e.activeItemIndex===r?e:{...e,searchQuery:"",activeItemIndex:r}},3:(e,t)=>{let r=e.searchQuery!==""?0:1,n=e.searchQuery+t.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+r).concat(e.items.slice(0,e.activeItemIndex+r)):e.items).find(u=>{var s;return((s=u.dataRef.current.textValue)==null?void 0:s.startsWith(n))&&!u.dataRef.current.disabled}),i=a?e.items.indexOf(a):-1;return i===-1||i===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:i}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{var r;let n=Array.from((r=e.itemsRef.current)==null?void 0:r.querySelectorAll('[id^="headlessui-menu-item-"]')).reduce((i,u,s)=>Object.assign(i,{[u.id]:s}),{}),a=[...e.items,{id:t.id,dataRef:t.dataRef}].sort((i,u)=>n[i.id]-n[u.id]);return{...e,items:a}},6:(e,t)=>{let r=e.items.slice(),n=e.activeItemIndex!==null?r[e.activeItemIndex]:null,a=r.findIndex(i=>i.id===t.id);return a!==-1&&r.splice(a,1),{...e,items:r,activeItemIndex:(()=>a===e.activeItemIndex||n===null?null:r.indexOf(n))()}}},Xr=p.createContext(null);Xr.displayName="MenuContext";function Rn(e){let t=p.useContext(Xr);if(t===null){let r=new Error(`<${e} /> is missing a parent <${Mn.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Rn),r}return t}function Af(e,t){return ne(t.type,Df,e,t)}var Of=p.Fragment;function Mn(e){let t=p.useReducer(Af,{menuState:1,buttonRef:p.createRef(),itemsRef:p.createRef(),items:[],searchQuery:"",activeItemIndex:null}),[{menuState:r,itemsRef:n,buttonRef:a},i]=t;Re("mousedown",s=>{var c,m,h;let v=s.target;r===0&&((c=a.current)!=null&&c.contains(v)||(m=n.current)!=null&&m.contains(v)||(i({type:1}),zr(v,1)||(s.preventDefault(),(h=a.current)==null||h.focus())))});let u=p.useMemo(()=>({open:r===0}),[r]);return G.createElement(Xr.Provider,{value:t},G.createElement(_t,{value:ne(r,{0:0,1:1})},Z({props:e,slot:u,defaultTag:Of,name:"Menu"})))}var Lf="button",Ff=me(function(e,t){var r;let[n,a]=Rn("Menu.Button"),i=fe(n.buttonRef,t),u=`headlessui-menu-button-${ae()}`,s=st(),c=p.useCallback(b=>{switch(b.key){case" ":case"Enter":case"ArrowDown":b.preventDefault(),b.stopPropagation(),a({type:0}),s.nextFrame(()=>a({type:2,focus:0}));break;case"ArrowUp":b.preventDefault(),b.stopPropagation(),a({type:0}),s.nextFrame(()=>a({type:2,focus:3}));break}},[a,s]),m=p.useCallback(b=>{switch(b.key){case" ":b.preventDefault();break}},[]),h=p.useCallback(b=>{if(lt(b.currentTarget))return b.preventDefault();e.disabled||(n.menuState===0?(a({type:1}),s.nextFrame(()=>{var g;return(g=n.buttonRef.current)==null?void 0:g.focus({preventScroll:!0})})):(b.preventDefault(),b.stopPropagation(),a({type:0})))},[a,s,n,e.disabled]),v=p.useMemo(()=>({open:n.menuState===0}),[n]),w=e,C={ref:i,id:u,type:rn(e,n.buttonRef),"aria-haspopup":!0,"aria-controls":(r=n.itemsRef.current)==null?void 0:r.id,"aria-expanded":e.disabled?void 0:n.menuState===0,onKeyDown:c,onKeyUp:m,onClick:h};return Z({props:{...w,...C},slot:v,defaultTag:Lf,name:"Menu.Button"})}),zf="div",Bf=3,Hf=me(function(e,t){var r,n;let[a,i]=Rn("Menu.Items"),u=fe(a.itemsRef,t),s=`headlessui-menu-items-${ae()}`,c=st(),m=$e(),h=(()=>m!==null?m===0:a.menuState===0)();p.useEffect(()=>{let g=a.itemsRef.current;!g||a.menuState===0&&g!==document.activeElement&&g.focus({preventScroll:!0})},[a.menuState,a.itemsRef]),_i({container:a.itemsRef.current,enabled:a.menuState===0,accept(g){return g.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:g.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(g){g.setAttribute("role","none")}});let v=p.useCallback(g=>{var _;switch(c.dispose(),g.key){case" ":if(a.searchQuery!=="")return g.preventDefault(),g.stopPropagation(),i({type:3,value:g.key});case"Enter":if(g.preventDefault(),g.stopPropagation(),i({type:1}),a.activeItemIndex!==null){let{id:I}=a.items[a.activeItemIndex];(_=document.getElementById(I))==null||_.click()}Ie().nextFrame(()=>{var I;return(I=a.buttonRef.current)==null?void 0:I.focus({preventScroll:!0})});break;case"ArrowDown":return g.preventDefault(),g.stopPropagation(),i({type:2,focus:2});case"ArrowUp":return g.preventDefault(),g.stopPropagation(),i({type:2,focus:1});case"Home":case"PageUp":return g.preventDefault(),g.stopPropagation(),i({type:2,focus:0});case"End":case"PageDown":return g.preventDefault(),g.stopPropagation(),i({type:2,focus:3});case"Escape":g.preventDefault(),g.stopPropagation(),i({type:1}),Ie().nextFrame(()=>{var I;return(I=a.buttonRef.current)==null?void 0:I.focus({preventScroll:!0})});break;case"Tab":g.preventDefault(),g.stopPropagation();break;default:g.key.length===1&&(i({type:3,value:g.key}),c.setTimeout(()=>i({type:4}),350));break}},[i,c,a]),w=p.useCallback(g=>{switch(g.key){case" ":g.preventDefault();break}},[]),C=p.useMemo(()=>({open:a.menuState===0}),[a]),b={"aria-activedescendant":a.activeItemIndex===null||(r=a.items[a.activeItemIndex])==null?void 0:r.id,"aria-labelledby":(n=a.buttonRef.current)==null?void 0:n.id,id:s,onKeyDown:v,onKeyUp:w,role:"menu",tabIndex:0,ref:u};return Z({props:{...e,...b},slot:C,defaultTag:zf,features:Bf,visible:h,name:"Menu.Items"})}),$f=p.Fragment;function Uf(e){let{disabled:t=!1,onClick:r,...n}=e,[a,i]=Rn("Menu.Item"),u=`headlessui-menu-item-${ae()}`,s=a.activeItemIndex!==null?a.items[a.activeItemIndex].id===u:!1;Y(()=>{if(a.menuState!==0||!s)return;let b=Ie();return b.requestAnimationFrame(()=>{var g,_;(_=(g=document.getElementById(u))==null?void 0:g.scrollIntoView)==null||_.call(g,{block:"nearest"})}),b.dispose},[u,s,a.menuState,a.activeItemIndex]);let c=p.useRef({disabled:t});Y(()=>{c.current.disabled=t},[c,t]),Y(()=>{var b,g;c.current.textValue=(g=(b=document.getElementById(u))==null?void 0:b.textContent)==null?void 0:g.toLowerCase()},[c,u]),Y(()=>(i({type:5,id:u,dataRef:c}),()=>i({type:6,id:u})),[c,u]);let m=p.useCallback(b=>{if(t)return b.preventDefault();if(i({type:1}),Ie().nextFrame(()=>{var g;return(g=a.buttonRef.current)==null?void 0:g.focus({preventScroll:!0})}),r)return r(b)},[i,a.buttonRef,t,r]),h=p.useCallback(()=>{if(t)return i({type:2,focus:5});i({type:2,focus:4,id:u})},[t,u,i]),v=p.useCallback(()=>{t||s||i({type:2,focus:4,id:u})},[t,s,u,i]),w=p.useCallback(()=>{t||!s||i({type:2,focus:5})},[t,s,i]),C=p.useMemo(()=>({active:s,disabled:t}),[s,t]);return Z({props:{...n,id:u,role:"menuitem",tabIndex:t===!0?void 0:-1,"aria-disabled":t===!0?!0:void 0,disabled:void 0,onClick:m,onFocus:h,onPointerMove:v,onMouseMove:v,onPointerLeave:w,onMouseLeave:w},slot:C,defaultTag:$f,name:"Menu.Item"})}Mn.Button=Ff,Mn.Items=Hf,Mn.Item=Uf;var Vf={0:e=>({...e,popoverState:ne(e.popoverState,{0:1,1:0})}),1(e){return e.popoverState===1?e:{...e,popoverState:1}},2(e,t){return e.button===t.button?e:{...e,button:t.button}},3(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},4(e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},5(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},Yr=p.createContext(null);Yr.displayName="PopoverContext";function Nn(e){let t=p.useContext(Yr);if(t===null){let r=new Error(`<${e} /> is missing a parent <${Ct.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Nn),r}return t}var Kr=p.createContext(null);Kr.displayName="PopoverAPIContext";function Mi(e){let t=p.useContext(Kr);if(t===null){let r=new Error(`<${e} /> is missing a parent <${Ct.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Mi),r}return t}var Qr=p.createContext(null);Qr.displayName="PopoverGroupContext";function Ni(){return p.useContext(Qr)}var Jr=p.createContext(null);Jr.displayName="PopoverPanelContext";function Gf(){return p.useContext(Jr)}function qf(e,t){return ne(t.type,Vf,e,t)}var Wf="div";function Ct(e){let t=`headlessui-popover-button-${ae()}`,r=`headlessui-popover-panel-${ae()}`,n=p.useReducer(qf,{popoverState:1,button:null,buttonId:t,panel:null,panelId:r}),[{popoverState:a,button:i,panel:u},s]=n;p.useEffect(()=>s({type:3,buttonId:t}),[t,s]),p.useEffect(()=>s({type:5,panelId:r}),[r,s]);let c=p.useMemo(()=>({buttonId:t,panelId:r,close:()=>s({type:1})}),[t,r,s]),m=Ni(),h=m==null?void 0:m.registerPopover,v=p.useCallback(()=>{var g;return(g=m==null?void 0:m.isFocusWithinPopoverGroup())!=null?g:(i==null?void 0:i.contains(document.activeElement))||(u==null?void 0:u.contains(document.activeElement))},[m,i,u]);p.useEffect(()=>h==null?void 0:h(c),[h,c]),Re("focus",()=>{a===0&&(v()||!i||!u||s({type:1}))},!0),Re("mousedown",g=>{let _=g.target;a===0&&(i!=null&&i.contains(_)||u!=null&&u.contains(_)||(s({type:1}),zr(_,1)||(g.preventDefault(),i==null||i.focus())))});let w=p.useCallback(g=>{s({type:1});let _=(()=>g?g instanceof HTMLElement?g:g.current instanceof HTMLElement?g.current:i:i)();_==null||_.focus()},[s,i]),C=p.useMemo(()=>({close:w}),[w]),b=p.useMemo(()=>({open:a===0,close:w}),[a,w]);return G.createElement(Yr.Provider,{value:n},G.createElement(Kr.Provider,{value:C},G.createElement(_t,{value:ne(a,{0:0,1:1})},Z({props:e,slot:b,defaultTag:Wf,name:"Popover"}))))}var Xf="button",Yf=me(function(e,t){let[r,n]=Nn("Popover.Button"),a=p.useRef(null),i=Ni(),u=i==null?void 0:i.closeOthers,s=Gf(),c=s===null?!1:s===r.panelId,m=fe(a,t,c?null:o=>n({type:2,button:o})),h=fe(a,t),v=p.useRef(null),w=p.useRef(typeof window>"u"?null:document.activeElement);Re("focus",()=>{w.current=v.current,v.current=document.activeElement},!0);let C=p.useCallback(o=>{var d,f;if(c){if(r.popoverState===1)return;switch(o.key){case" ":case"Enter":o.preventDefault(),o.stopPropagation(),n({type:1}),(d=r.button)==null||d.focus();break}}else switch(o.key){case" ":case"Enter":o.preventDefault(),o.stopPropagation(),r.popoverState===1&&(u==null||u(r.buttonId)),n({type:0});break;case"Escape":if(r.popoverState!==0)return u==null?void 0:u(r.buttonId);if(!a.current||!a.current.contains(document.activeElement))return;o.preventDefault(),o.stopPropagation(),n({type:1});break;case"Tab":if(r.popoverState!==0||!r.panel||!r.button)return;if(o.shiftKey){if(!w.current||(f=r.button)!=null&&f.contains(w.current)||r.panel.contains(w.current))return;let x=Pn(),j=x.indexOf(w.current);if(x.indexOf(r.button)>j)return;o.preventDefault(),o.stopPropagation(),Ue(r.panel,8)}else o.preventDefault(),o.stopPropagation(),Ue(r.panel,1);break}},[n,r.popoverState,r.buttonId,r.button,r.panel,a,u,c]),b=p.useCallback(o=>{var d;if(!c&&(o.key===" "&&o.preventDefault(),r.popoverState===0&&!!r.panel&&!!r.button))switch(o.key){case"Tab":if(!w.current||(d=r.button)!=null&&d.contains(w.current)||r.panel.contains(w.current))return;let f=Pn(),x=f.indexOf(w.current);if(f.indexOf(r.button)>x)return;o.preventDefault(),o.stopPropagation(),Ue(r.panel,8);break}},[r.popoverState,r.panel,r.button,c]),g=p.useCallback(o=>{var d,f;lt(o.currentTarget)||e.disabled||(c?(n({type:1}),(d=r.button)==null||d.focus()):(r.popoverState===1&&(u==null||u(r.buttonId)),(f=r.button)==null||f.focus(),n({type:0})))},[n,r.button,r.popoverState,r.buttonId,e.disabled,u,c]),_=p.useMemo(()=>({open:r.popoverState===0}),[r]),I=rn(e,a),N=e,A=c?{ref:h,type:I,onKeyDown:C,onClick:g}:{ref:m,id:r.buttonId,type:I,"aria-expanded":e.disabled?void 0:r.popoverState===0,"aria-controls":r.panel?r.panelId:void 0,onKeyDown:C,onKeyUp:b,onClick:g};return Z({props:{...N,...A},slot:_,defaultTag:Xf,name:"Popover.Button"})}),Kf="div",Qf=3,Jf=me(function(e,t){let[{popoverState:r},n]=Nn("Popover.Overlay"),a=fe(t),i=`headlessui-popover-overlay-${ae()}`,u=$e(),s=(()=>u!==null?u===0:r===0)(),c=p.useCallback(h=>{if(lt(h.currentTarget))return h.preventDefault();n({type:1})},[n]),m=p.useMemo(()=>({open:r===0}),[r]);return Z({props:{...e,ref:a,id:i,"aria-hidden":!0,onClick:c},slot:m,defaultTag:Kf,features:Qf,visible:s,name:"Popover.Overlay"})}),Zf="div",em=3,tm=me(function(e,t){let{focus:r=!1,...n}=e,[a,i]=Nn("Popover.Panel"),{close:u}=Mi("Popover.Panel"),s=p.useRef(null),c=fe(s,t,b=>{i({type:4,panel:b})}),m=$e(),h=(()=>m!==null?m===0:a.popoverState===0)(),v=p.useCallback(b=>{var g;switch(b.key){case"Escape":if(a.popoverState!==0||!s.current||!s.current.contains(document.activeElement))return;b.preventDefault(),b.stopPropagation(),i({type:1}),(g=a.button)==null||g.focus();break}},[a,s,i]);p.useEffect(()=>()=>i({type:4,panel:null}),[i]),p.useEffect(()=>{var b;e.static||a.popoverState===1&&((b=e.unmount)==null||b)&&i({type:4,panel:null})},[a.popoverState,e.unmount,e.static,i]),p.useEffect(()=>{if(!r||a.popoverState!==0||!s.current)return;let b=document.activeElement;s.current.contains(b)||Ue(s.current,1)},[r,s,a.popoverState]),Re("keydown",b=>{var g;if(a.popoverState!==0||!s.current||b.key!=="Tab"||!document.activeElement||!s.current||!s.current.contains(document.activeElement))return;b.preventDefault();let _=Ue(s.current,b.shiftKey?2:4);if(_===3)return(g=a.button)==null?void 0:g.focus();if(_===1){if(!a.button)return;let I=Pn(),N=I.indexOf(a.button),A=I.splice(N+1).filter(o=>{var d;return!((d=s.current)!=null&&d.contains(o))});Ue(A,1)===0&&Ue(document.body,1)}}),Re("focus",()=>{var b;!r||a.popoverState===0&&(!s.current||(b=s.current)!=null&&b.contains(document.activeElement)||i({type:1}))},!0);let w=p.useMemo(()=>({open:a.popoverState===0,close:u}),[a,u]),C={ref:c,id:a.panelId,onKeyDown:v};return G.createElement(Jr.Provider,{value:a.panelId},Z({props:{...n,...C},slot:w,defaultTag:Zf,features:em,visible:h,name:"Popover.Panel"}))}),nm="div";function rm(e){let t=p.useRef(null),[r,n]=p.useState([]),a=p.useCallback(w=>{n(C=>{let b=C.indexOf(w);if(b!==-1){let g=C.slice();return g.splice(b,1),g}return C})},[n]),i=p.useCallback(w=>(n(C=>[...C,w]),()=>a(w)),[n,a]),u=p.useCallback(()=>{var w;let C=document.activeElement;return(w=t.current)!=null&&w.contains(C)?!0:r.some(b=>{var g,_;return((g=document.getElementById(b.buttonId))==null?void 0:g.contains(C))||((_=document.getElementById(b.panelId))==null?void 0:_.contains(C))})},[t,r]),s=p.useCallback(w=>{for(let C of r)C.buttonId!==w&&C.close()},[r]),c=p.useMemo(()=>({registerPopover:i,unregisterPopover:a,isFocusWithinPopoverGroup:u,closeOthers:s}),[i,a,u,s]),m=p.useMemo(()=>({}),[]),h={ref:t},v=e;return G.createElement(Qr.Provider,{value:c},Z({props:{...v,...h},slot:m,defaultTag:nm,name:"Popover.Group"}))}Ct.Button=Yf,Ct.Overlay=Jf,Ct.Panel=tm,Ct.Group=rm,p.createContext(null);var om=p.createContext(null);om.displayName="RadioGroupContext";var am=p.createContext(null);am.displayName="GroupContext";var im=p.createContext(null);im.displayName="TabsContext";function sm(){let e=p.useRef(!0);return p.useEffect(()=>{e.current=!1},[]),e.current}function lm(e){let t={called:!1};return(...r)=>{if(!t.called)return t.called=!0,e(...r)}}function Zr(e,...t){e&&t.length>0&&e.classList.add(...t)}function Dn(e,...t){e&&t.length>0&&e.classList.remove(...t)}function cm(e,t){let r=Ie();if(!e)return r.dispose;let{transitionDuration:n,transitionDelay:a}=getComputedStyle(e),[i,u]=[n,a].map(s=>{let[c=0]=s.split(",").filter(Boolean).map(m=>m.includes("ms")?parseFloat(m):parseFloat(m)*1e3).sort((m,h)=>h-m);return c});return i!==0?r.setTimeout(()=>{t("finished")},i+u):t("finished"),r.add(()=>t("cancelled")),r.dispose}function Di(e,t,r,n,a,i){let u=Ie(),s=i!==void 0?lm(i):()=>{};return Dn(e,...a),Zr(e,...t,...r),u.nextFrame(()=>{Dn(e,...r),Zr(e,...n),u.add(cm(e,c=>(Dn(e,...n,...t),Zr(e,...a),s(c))))}),u.add(()=>Dn(e,...t,...r,...n,...a)),u.add(()=>s("cancelled")),u.dispose}function ct(e=""){return p.useMemo(()=>e.split(" ").filter(t=>t.trim().length>1),[e])}var An=p.createContext(null);An.displayName="TransitionContext";function um(){let e=p.useContext(An);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function dm(){let e=p.useContext(On);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}var On=p.createContext(null);On.displayName="NestingContext";function Ln(e){return"children"in e?Ln(e.children):e.current.filter(({state:t})=>t==="visible").length>0}function Ai(e){let t=p.useRef(e),r=p.useRef([]),n=ki();p.useEffect(()=>{t.current=e},[e]);let a=p.useCallback((u,s=1)=>{var c;let m=r.current.findIndex(({id:h})=>h===u);m!==-1&&(ne(s,{0(){r.current.splice(m,1)},1(){r.current[m].state="hidden"}}),!Ln(r)&&n.current&&((c=t.current)==null||c.call(t)))},[t,n,r]),i=p.useCallback(u=>{let s=r.current.find(({id:c})=>c===u);return s?s.state!=="visible"&&(s.state="visible"):r.current.push({id:u,state:"visible"}),()=>a(u,0)},[r,a]);return p.useMemo(()=>({children:r,register:i,unregister:a}),[i,a,r])}function pm(){}var fm=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Oi(e){var t;let r={};for(let n of fm)r[n]=(t=e[n])!=null?t:pm;return r}function mm(e){let t=p.useRef(Oi(e));return p.useEffect(()=>{t.current=Oi(e)},[e]),t}var hm="div",Li=1;function Fi(e){let{beforeEnter:t,afterEnter:r,beforeLeave:n,afterLeave:a,enter:i,enterFrom:u,enterTo:s,entered:c,leave:m,leaveFrom:h,leaveTo:v,...w}=e,C=p.useRef(null),[b,g]=p.useState("visible"),_=w.unmount?0:1,{show:I,appear:N,initial:A}=um(),{register:o,unregister:d}=dm(),f=ae(),x=p.useRef(!1),j=Ai(()=>{x.current||(g("hidden"),d(f),y.current.afterLeave())});Y(()=>{if(f)return o(f)},[o,f]),Y(()=>{if(_===1&&f){if(I&&b!=="visible"){g("visible");return}ne(b,{hidden:()=>d(f),visible:()=>o(f)})}},[b,f,o,d,I,_]);let S=ct(i),E=ct(u),k=ct(s),P=ct(c),R=ct(m),T=ct(h),M=ct(v),y=mm({beforeEnter:t,afterEnter:r,beforeLeave:n,afterLeave:a}),D=Cn();p.useEffect(()=>{if(D&&b==="visible"&&C.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[C,b,D]);let O=A&&!N;Y(()=>{let F=C.current;if(F&&!O)return x.current=!0,I&&y.current.beforeEnter(),I||y.current.beforeLeave(),I?Di(F,S,E,k,P,B=>{x.current=!1,B==="finished"&&y.current.afterEnter()}):Di(F,R,T,M,P,B=>{x.current=!1,B==="finished"&&(Ln(j)||(g("hidden"),d(f),y.current.afterLeave()))})},[y,f,x,d,j,C,O,I,S,E,k,R,T,M]);let L={ref:C},z=w;return G.createElement(On.Provider,{value:j},G.createElement(_t,{value:ne(b,{visible:0,hidden:1})},Z({props:{...z,...L},defaultTag:hm,features:Li,visible:b==="visible",name:"Transition.Child"})))}function jt(e){let{show:t,appear:r=!1,unmount:n,...a}=e,i=$e();if(t===void 0&&i!==null&&(t=ne(i,{0:!0,1:!1})),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,s]=p.useState(t?"visible":"hidden"),c=Ai(()=>{s("hidden")}),m=sm(),h=p.useMemo(()=>({show:t,appear:r||!m,initial:m}),[t,r,m]);p.useEffect(()=>{t?s("visible"):Ln(c)||s("hidden")},[t,c]);let v={unmount:n};return G.createElement(On.Provider,{value:c},G.createElement(An.Provider,{value:h},Z({props:{...v,as:p.Fragment,children:G.createElement(Fi,{...v,...a})},defaultTag:p.Fragment,features:Li,visible:u==="visible",name:"Transition"})))}jt.Child=function(e){let t=p.useContext(An)!==null,r=$e()!==null;return!t&&r?G.createElement(jt,{...e}):G.createElement(Fi,{...e})},jt.Root=jt;const zi=({show:e=!0,onClick:t,modalRef:r})=>window===window.top&&l.jsx(jt,{appear:!0,show:e,enter:"transition-opacity duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:l.jsx("div",{role:"presentation",onClick:t,ref:r,className:"absolute left-0 top-0 -z-[1] flex h-screen w-screen items-center justify-center bg-slate-900/70",children:l.jsx("div",{className:"top-[50%] select-none text-5xl font-bold text-white",children:"Now capturing your browser."})})}),Bi=({onClick:e,text:t,showCancel:r,primary:n=!0,dataTestID:a=void 0})=>r?l.jsx("button",{onClick:e,className:n?"DeleteButton":"CancelButton","data-testid":a,children:l.jsx("a",{className:n?"DeleteButton--text":"CancelButton--text",children:t})}):l.jsx("button",{onClick:e,className:"GotItButton",children:l.jsx("a",{className:"GotItButton--text",children:t})});function gm({onCancel:e,onDelete:t,showDelete:r,showCancelButton:n,modalRef:a,title:i,description:u,dataTestID:s=void 0,dataTestIDPrimaryBtn:c=void 0,dataTestIDSecondaryBtn:m=void 0}){return l.jsx("div",{className:"AlertModal--wrapper","data-testid":s,children:l.jsxs("div",{className:"AlertModal",ref:a,children:[l.jsxs("div",{className:"AlertModal--content",children:[l.jsx("div",{className:"AlertModal--row",children:n&&l.jsxs(l.Fragment,{children:[l.jsx("a",{className:"AlertModal--title",children:i}),l.jsx(se,{onClick:e,className:"XButton",icon:yc})]})}),l.jsx("p",{className:"AlertModal--body",children:u})]}),l.jsx("div",{className:"BounceLoaderModal",children:l.jsx(Yo,{size:50,color:"#6466f1",loading:!n})}),n&&l.jsxs("div",{className:r?"AlertModal--row":"GotItScribeModal--row",children:[l.jsx(Bi,{onClick:e,text:r?"Cancel":"Got it",showCancel:r,primary:!1,dataTestID:m}),r&&l.jsx(Bi,{onClick:t,showCancel:r,text:"Yes, Delete Scribe",dataTestID:c})]})]})})}const bm=({onCancel:e,onDelete:t,modalRef:r})=>{const n=p.useCallback(a=>{a.keyCode===27&&e(a)},[]);return p.useEffect(()=>(document.addEventListener("keydown",n,!1),()=>{document.removeEventListener("keydown",n,!1)}),[n]),l.jsx(gm,{onCancel:e,showDelete:!0,onDelete:t,modalRef:r,showCancelButton:!0,title:"Are you sure?",description:"This action is permanent. You can always edit a Scribe when you are done capturing it.",dataTestID:"extensionDeleteCurrentScribeModal",dataTestIDPrimaryBtn:"extensionDeleteCurrentScribeButton",dataTestIDSecondaryBtn:"extensionCancelDeleteCurrentScribeButton"})},vm=()=>l.jsx(jt,{appear:!0,show:!0,enter:"transition-opacity duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:l.jsx("div",{className:"absolute left-0 top-0 -z-[1] flex h-screen w-screen items-center justify-center bg-slate-900/70 text-center",children:l.jsxs("text",{className:"top-[50%] select-none text-5xl font-bold text-white",children:["Step limit has been reached.",l.jsx("br",{}),"Your Scribe has stopped capturing.",l.jsx("br",{}),l.jsx("br",{}),l.jsx("br",{}),"Processing your Scribe...."]})})}),xm=()=>l.jsx("div",{className:"h-5 w-5 animate-pulse rounded-full bg-red-400"}),ym="/assets/spinner.png",wm=()=>l.jsx("img",{className:"h-full w-full animate-spin",src:ym,alt:"Ending capturing"}),_m=()=>l.jsx("div",{className:"h-5 w-5 rounded-full bg-slate-400"}),km=({open:e,hovered:t,status:r})=>{if(e||t)return l.jsx(se,{className:"h-4 w-4 text-slate-100",icon:e?wc:_c});switch(r){case pe.PAUSED_RECORDING:return l.jsx(_m,{});case pe.ENDING_RECORDING:return l.jsx(wm,{});default:return l.jsx(xm,{})}},Em=({status:e,open:t,onClick:r})=>{const[n,a]=p.useState(!1);function i(){a(!0)}function u(){a(!1)}return l.jsx(et,{children:l.jsxs(ve,{children:[l.jsx(xe,{children:l.jsx("button",{"data-testid":"extensionRecordingControlsIndicator",className:mt("flex cursor-pointer flex-col rounded-full border bg-slate-800 p-2 shadow-2xl",{"border-slate-600":t,"border-transparent bg-brand-800":!t&&(e===pe.RECORDING||e===pe.ENDING_RECORDING)}),onClick:r,onMouseEnter:i,onMouseLeave:u,children:l.jsx("div",{className:mt("flex h-10 w-10 items-center justify-center rounded-full  text-slate-100",{"bg-slate-300/10":t||n||e===pe.IDLE}),children:l.jsx(km,{open:t,hovered:n,status:e})})})}),l.jsxs(ce,{side:"right",children:[t?"Hide":"Show"," Controls"]})]})})},eo=p.createContext(null),Hi=({message:e,icon:t,iconClassName:r,children:n,className:a,side:i="bottom",container:u,...s})=>{const c=p.useMemo(()=>({side:i}),[i]);return l.jsxs(sr,{...s,children:[l.jsx(ga,{className:re("fixed left-0 right-0 flex justify-center",{"bottom-0":i==="bottom","top-0":i==="top"})}),l.jsx(ir,{sideOffset:24,onOpenAutoFocus:m=>m.preventDefault(),className:re("flex h-12 min-w-0 items-center justify-between gap-6 rounded-xl p-0 bg-slate-800 shadow-2xl",a),theme:"dark",container:u,children:l.jsxs(eo.Provider,{value:c,children:[!!(t||e)&&l.jsxs("div",{className:"flex items-center gap-2 px-4 h-full",children:[t&&l.jsx(se,{icon:t,className:re("size-4 shrink-0 text-brand-400",r)}),e&&l.jsx("span",{className:"whitespace-nowrap font-sans text-sm font-normal tabular-nums leading-5 text-slate-100",children:e})]}),n&&l.jsx("div",{className:"flex shrink-0 gap-1.5 p-2",children:n})]})})]})};p.forwardRef(({tooltip:e,icon:t,...r},n)=>{const a=p.useContext(eo);if(!a)throw new Error("ActionBarIconButton must be used within an ActionBar");return l.jsxs(ve,{children:[l.jsx(xe,{asChild:!0,children:l.jsx(oe,{theme:"dark",variant:"ghost","aria-label":e,icon:t,ref:n,"data-testid":r["data-testid"],...r})}),l.jsx(ce,{side:a.side==="bottom"?"top":"bottom",variant:"compact",children:e})]})});const to=({children:e,tooltip:t,className:r,...n})=>{const a=p.useContext(eo);if(!a)throw new Error("ActionBarButton must be used within an ActionBar");const i=l.jsx(oe,{theme:"dark",variant:"ghost",size:"small","data-action-bar-text":!0,className:r,...n,children:e});return t?l.jsxs(ve,{children:[l.jsx(xe,{asChild:!0,children:i}),l.jsx(ce,{side:a.side==="bottom"?"top":"bottom",variant:"compact",children:t})]}):i},Cm=(e,t)=>t?document.elementsFromPoint(e.clientX,e.clientY)[0]:ou(document.elementsFromPoint(e.clientX,e.clientY)),jm=e=>{const[t,r]=p.useState(null),[n,a]=p.useState(!1),i=p.useCallback(s=>{r(Cm(s,e)),a(!1)},[]),u=p.useCallback(()=>a(!0),[]);return p.useEffect(()=>(window.addEventListener("scroll",u,!0),()=>{window.removeEventListener("scroll",u)}),[u]),p.useEffect(()=>(window.addEventListener("mousemove",i),()=>{window.removeEventListener("mousemove",i)}),[i]),n?null:t};function $i(e){const t=document.getElementById(Vt);return t?t.contains(e):!1}const Sm=({onClick:e,onEscape:t})=>{const r=jm(!0),[n,a]=p.useState(!1),i=p.useRef(void 0);return p.useEffect(()=>{const u=s=>{s.key==="Escape"&&(t==null||t())};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[t]),p.useEffect(()=>{const u=s=>{s.target&&!$i(s.target)&&(s.preventDefault(),s.stopPropagation(),e==null||e(s))};return document.addEventListener("click",u,!0),()=>document.removeEventListener("click",u,!0)},[e]),p.useEffect(()=>()=>{i.current&&(i.current.style.filter="")},[]),p.useEffect(()=>{i.current&&(i.current.getAttribute(Wc)||(i.current.style.filter="")),r&&!$i(r)?(r.getAttribute(cr)||(r.style.filter="blur(16px)",i.current=r),a(!0)):r&&a(!1)},[r]),n?l.jsx("div",{className:"pointer-events-none fixed z-50 cursor-pointer rounded-md rounded-tr-none border-2 border-dashed border-brand-500 border-opacity-80",style:{top:r==null?void 0:r.getBoundingClientRect().top,left:r==null?void 0:r.getBoundingClientRect().left,width:r==null?void 0:r.getBoundingClientRect().width,height:r==null?void 0:r.getBoundingClientRect().height}}):null},Pm=({isEnabled:e,isPreviewing:t,onEnabledChange:r,onSettingsChange:n,onPrecisionBlurEnabledChange:a,settings:i})=>{const[u,s]=p.useState(!1),c=(h,v)=>{te("change_smart_blur_setting",{key:h,value:v,isPreview:t}),n({...i||{},[h]:v})};p.useEffect(()=>{e||(r(!0),Object.keys(i).filter(h=>!!Object.create(i)[h]).length===0&&n({...i,images:!0,commonNames:!0,emailAddresses:!0,numbers:!0}))},[]);const m=p.useCallback((h,v)=>{const w=h.target.getAttribute(cr);if(w){const C=(v.customTargets||[]).filter(b=>b.id!==w);n({...i||{},customTargets:C})}else{const C=wa().split("-")[0];h.target.setAttribute(cr,C);const b={id:C,selector:va(h.target,{attr:_=>["title","alt"].includes(_)||_.startsWith("aria-label")}),url:`${document.location.protocol}//${document.location.hostname}${document.location.pathname}`},g=JSON.parse(JSON.stringify(Array.from(v.customTargets||[])));g.push(b),n({...v||{},customTargets:g})}},[i,n]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:mt("w-[280px] flex-col rounded-xl bg-slate-800 shadow-2xl",{flex:!u,hidden:u}),children:[l.jsx("div",{className:"flex flex-col gap-3 px-4 py-3",children:l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx("span",{className:"text-base font-semibold leading-6 text-slate-50",children:"Smart Blur"}),l.jsx(Ge,{theme:"dark",checked:e,onCheckedChange:r})]})}),l.jsxs("div",{children:[l.jsx("div",{className:"h-px bg-slate-900"}),l.jsx("div",{className:"h-px bg-slate-700"})]}),l.jsxs("div",{className:"flex flex-col gap-3 px-4 py-3",children:[l.jsx(Ge,{label:"Email Addresses",checked:i==null?void 0:i.emailAddresses,disabled:!e,onCheckedChange:h=>c("emailAddresses",h),theme:"dark"}),l.jsx(Ge,{label:"Numbers",checked:i==null?void 0:i.numbers,disabled:!e,onCheckedChange:h=>c("numbers",h),theme:"dark"}),l.jsx(Ge,{label:"Common Names",checked:(i==null?void 0:i.commonNames)||!1,disabled:!e,onCheckedChange:h=>c("commonNames",h),theme:"dark"}),l.jsx(Ge,{label:"Long Text",checked:i==null?void 0:i.longText,disabled:!e,onCheckedChange:h=>c("longText",h),theme:"dark"}),l.jsx(Ge,{label:"Form Fields",checked:i==null?void 0:i.formFields,disabled:!e,onCheckedChange:h=>c("formFields",h),theme:"dark"}),l.jsx(Ge,{label:"Table Rows",checked:i==null?void 0:i.tableRows,disabled:!e,onCheckedChange:h=>c("tableRows",h),theme:"dark"}),l.jsx(Ge,{label:"Images",checked:i==null?void 0:i.images,disabled:!e,onCheckedChange:h=>c("images",h),theme:"dark"}),l.jsx(oe,{className:"mt-2",onClick:()=>{a(!0),s(!0)},variant:"ghost",theme:"dark",disabled:!e||u,children:l.jsxs("div",{className:"flex items-center justify-center",children:[l.jsx(se,{icon:kc,className:"mr-2 h-3 w-3 text-slate-500"}),"Choose Others"]})}),l.jsx("span",{className:"block text-xs font-normal leading-4 text-slate-400",children:"Elements you hover over will still be visible. Works on most sites."})]})]}),l.jsx(Hi,{icon:nr,message:"Select elements to blur",open:u&&e,container:ur(),children:l.jsx(to,{variant:"primary",onClick:()=>{te("enable_precision_blur"),a(!1),s(!1)},children:"Done"})}),u&&e&&l.jsx(Sm,{onClick:h=>{te("add_precision_blur_target"),m(h,i)},onEscape:()=>{a(!1),s(!1)}}),l.jsxs(Hi,{icon:nr,message:"Capture is paused during preview. Get Scribe Pro to use Smart Blur while capturing a guide.",side:"top",open:t&&e,container:ur(),children:[l.jsx(to,{onClick:()=>{r(!1)},children:"Done"}),l.jsx(to,{variant:"primary",onClick:()=>{te("show_pro_features_workspace_page",{location:"smart_blur_snackbar"});const h=xa({location:"smart_blur_snackbar",frontendUrl:$o.FRONTEND_URL,variant:ya.FREE_TO_PRO});window.open(h,"_blank")},children:"Get Scribe Pro"})]})]})},Tm=({onPrecisionBlurEnabledChange:e})=>{const{liveBlurEnabled:t,liveBlurSettings:r}=W(Uo),{userData:n}=W(zt);return l.jsx(Pm,{isPreviewing:vn(n),onPrecisionBlurEnabledChange:e,isEnabled:t,settings:r,onEnabledChange:a=>{te(a?"enable_smart_blur":"disable_smart_blur",{isPreview:vn(n)}),chrome.runtime.sendMessage({messageType:"changeLiveBlurSettings",liveBlurEnabled:!!a,liveBlurSettings:r})},onSettingsChange:a=>{chrome.runtime.sendMessage({messageType:"changeLiveBlurSettings",liveBlurEnabled:!0,liveBlurSettings:a||{}})}})},St=({color:e="brand",disabled:t=!1,showTooltip:r=!0,icon:n,tooltip:a,showProTag:i=!1,onClick:u=()=>{},setButtonRef:s=void 0,dataTestID:c=void 0})=>{const m=l.jsxs("button",{ref:s,type:"button",disabled:t,className:mt("relative flex h-10 w-10 cursor-pointer items-center justify-center rounded-full border border-transparent bg-slate-300/10 p-0 text-slate-100",{"hover:border-green-400 hover:bg-green-600/30":e==="green","hover:border-brand-400 hover:bg-brand-600/30":e==="brand","hover:border-red-400 hover:bg-red-600/30":e==="red"}),onClick:u,"data-testid":c,children:[i&&l.jsx(qc,{type:"pro",theme:"dark",className:"absolute -right-1 -top-1"}),l.jsx("div",{className:"flex content-center justify-center",children:n})]});return r?l.jsxs(ve,{children:[l.jsx(xe,{children:m}),l.jsx(ce,{className:"z-[99999999]",side:"right",collisionPadding:16,children:a})]}):m},Im=({status:e,isPlanFree:t,screenPositionMenuOpen:r=!1,blurControlsOpen:n=!1,isRecordingAudio:a=!1,onChangeScreenPosition:i=void 0,onPause:u=void 0,onDelete:s=void 0,onComplete:c=void 0,onLiveBlur:m=void 0,screenPositionMenuButtonSetReference:h=void 0})=>{const v=!t&&a;return l.jsx(et,{children:l.jsxs("div",{className:"flex w-fit flex-col gap-2 rounded-full border border-slate-600 bg-slate-800 p-2 shadow-2xl",children:[l.jsx(St,{icon:l.jsx(se,{icon:Ec,className:"h-4 w-4 text-green-400"}),color:"green",onClick:c,tooltip:"Complete Capture",dataTestID:"extensionCompleteRecordingButton"}),e===pe.PAUSED_RECORDING?l.jsx(St,{icon:l.jsx(se,{className:"h-4 w-4",style:{transform:"rotate(90deg)",paddingBottom:"2px"},icon:Cc}),onClick:u,tooltip:"Resume",dataTestID:"extensionResumeRecordingButton"}):l.jsx(St,{icon:l.jsx(se,{icon:jc,className:"h-4 w-4"}),onClick:u,tooltip:"Pause Capture",dataTestID:"extensionPauseRecordingButton"}),l.jsx(St,{showTooltip:!n,showProTag:t,icon:l.jsx(se,{icon:nr,className:"h-4 w-4"}),onClick:m,disabled:v,tooltip:l.jsx("span",{className:"flex items-center justify-center gap-1",children:v?Ks:"Smart Blur"}),dataTestID:"extensionSmartBlurMenuButton"}),l.jsx(St,{showTooltip:!r,icon:l.jsx(se,{icon:Sc,className:"h-4 w-4"}),onClick:i,tooltip:"Move Controls",setButtonRef:h,dataTestID:"extensionScreenPositionMenuButton"}),l.jsx(St,{icon:l.jsx(se,{icon:Pc,className:"h-4 w-4"}),color:"red",onClick:s,tooltip:"Delete Scribe",dataTestID:"extensionDeleteCurrentScribeMenuButton"})]})})},Rm=e=>p.createElement("svg",{width:22,height:18,viewBox:"0 0 22 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("rect",{y:10,width:10,height:8,rx:2,fill:"#C7D2FE"}),p.createElement("rect",{x:12.5,y:.5,width:9,height:7,rx:1.5,stroke:"#C7D2FE"}),p.createElement("rect",{x:12.5,y:10.5,width:9,height:7,rx:1.5,stroke:"#C7D2FE"}),p.createElement("rect",{x:.5,y:.5,width:9,height:7,rx:1.5,stroke:"#C7D2FE"})),Mm=e=>p.createElement("svg",{width:22,height:18,viewBox:"0 0 22 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("rect",{y:10,width:10,height:8,rx:2,fill:"#818CF8"}),p.createElement("rect",{x:12.5,y:.5,width:9,height:7,rx:1.5,stroke:"#818CF8"}),p.createElement("rect",{x:12.5,y:10.5,width:9,height:7,rx:1.5,stroke:"#818CF8"}),p.createElement("rect",{x:.5,y:.5,width:9,height:7,rx:1.5,stroke:"#818CF8"}));function Nm({position:e,brighten:t=!1}){const r=e===be.TOP_RIGHT||e===be.BOTTOM_RIGHT,n=e===be.TOP_LEFT||e===be.TOP_RIGHT,a=t?Rm:Mm;return l.jsx(a,{style:{transform:`scaleX(${r?-1:1}) scaleY(${n?-1:1})`}})}const Dm=({position:e,onClick:t,dataTestID:r=void 0})=>{const[n,a]=p.useState(!1);return l.jsx("button",{className:"relative flex h-10 w-10 cursor-pointer items-center justify-center rounded-full border border-transparent bg-slate-300/10 p-0 hover:border-brand-400 hover:border-brand-400 hover:bg-brand-600/30",onClick:t,onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},"data-testid":r,children:l.jsx(Nm,{position:e,brighten:n})})};function Am({buttonOnClickMaker:e}){return l.jsx("div",{className:"flex w-fit gap-2 rounded-full border border-slate-600 bg-slate-800 p-2 shadow-2xl",children:Object.values(be).filter(t=>typeof t=="number").map(t=>l.jsx(Dm,{position:t,onClick:e?e(t):void 0,dataTestID:`extensionScreenPositionMenuButton-${be[t]}`},`screen-position-menu-button-${t}`))})}const Om=e=>{const t=r=>`${r}px`;switch(e){case be.TOP_LEFT:return{indicator:{top:t(24),left:t(24)}};case be.TOP_RIGHT:return{indicator:{top:t(24),right:t(24)}};case be.BOTTOM_RIGHT:return{indicator:{bottom:t(24),right:t(24)}};case be.BOTTOM_LEFT:default:return{indicator:{bottom:t(24),left:t(24)}}}},no=()=>{chrome.runtime.sendMessage({messageType:"closeStartingRecordingModal"})},Lm=2e3,Fm=({isPlanFree:e})=>{var X;const{status:t}=W(Vo),r=W(Go),{position:n,menuOpen:a,screenPositionMenuOpen:i,deleteScribeModalOpen:u}=W(Uo),{startingRecordingModalVisible:s,endRecordingWithCutoffVisible:c}=W(qo),{recordAudio:m}=W(gn),{recordingControlsPreference:h}=W(gn),v=!!((X=Ze(de.getState()))!=null&&X.deprecateCaptureOptions),[w,C]=p.useState(!1),[b,g]=p.useState(null),[_,I]=p.useState(null),[N,A]=p.useState(!1),[o,d]=p.useState(null),[f,x]=p.useState(null),j=p.useRef(null),S=vi(b,_,{placement:(()=>n===be.TOP_LEFT||n===be.TOP_RIGHT?"bottom":"top")(),modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"flip",options:{fallbackPlacements:[]}},{name:"preventOverflow",options:{mainAxis:!1,altAxis:!1,tether:!1}},{name:"eventListeners",options:{scroll:!1,resize:!1}}]}),E=vi(_,o,{modifiers:[{name:"offset",options:{offset:[24,8]}},{name:"flip",options:{fallbackPlacements:[]}},{name:"preventOverflow",options:{mainAxis:!1,altAxis:!1,tether:!1}},{name:"eventListeners",options:{scroll:!1,resize:!1}}]});p.useEffect(()=>{if(!s)return;const U=setTimeout(no,Lm);return()=>clearTimeout(U)},[s]);const k=()=>{te("recording_controls_button_press",{buttonName:a||s?"indicatorClosed":"indicatorOpened"}),chrome.runtime.sendMessage({messageType:"recordingControlsIndicatorPressed"})},P=()=>{te("recording_controls_button_press",{buttonName:t===pe.PAUSED_RECORDING?"unpaused":"paused"}),chrome.runtime.sendMessage({messageType:"recordingControlsPausePressed"})},R=()=>{te("recording_controls_button_press",{buttonName:"delete"}),chrome.runtime.sendMessage({messageType:"recordingControlsDeletePressed"})},T=()=>{te("recording_controls_button_press",{buttonName:"deleteConfirm"}),chrome.runtime.sendMessage({messageType:"recordingControlsDeleteConfirmPressed"})},M=()=>{u&&(te("recording_controls_button_press",{buttonName:"deleteCancel"}),chrome.runtime.sendMessage({messageType:"recordingControlsDeleteCancelPressed"}))},y=U=>{C($=>{const q=U==="visible"||U==="toggle"&&!$;return Vc().then(Q=>{(q&&Q.status===pe.RECORDING||!q&&Q.status===pe.PAUSED_RECORDING)&&(P==null||P())}),q})};p.useEffect(()=>{const U=$=>{$.messageType==="toggleBlurControls"&&y("toggle"),$.messageType==="hideBlurControls"&&C(!1),$.messageType==="extensionStatusChange"&&$.status===pe.RECORDING&&(A(!1),y("hide"))};return chrome.runtime.onMessage.addListener(U),()=>{chrome.runtime.onMessage.removeListener(U)}},[]);const D=()=>{te("recording_controls_button_press",{buttonName:"completedRecording"}),chrome.runtime.sendMessage({messageType:"recordingCompletedPressed"})},O=()=>{te("recording_controls_button_press",{buttonName:"screenPosition"}),chrome.runtime.sendMessage({messageType:"recordingControlsScreenPositionPressed"})},L=U=>()=>{te("recording_controls_button_press",{buttonName:"screenPositionMenuButton",screenPosition:U}),chrome.runtime.sendMessage({messageType:"recordingControlsScreenPositionMenuButtonPressed",position:U})};if(c)return l.jsx(vm,{});if(!r)return null;const z=(()=>{if(!v)return h;const U=typeof(chrome==null?void 0:chrome.sidePanel)<"u",$=Qs(Js);return U&&$?"sidepanel":"floating-button"})();if(z==="none")return l.jsx(zi,{onClick:no,modalRef:j,show:s});const F=z==="floating-button"&&(a||s),B=z==="floating-button";return l.jsxs(l.Fragment,{children:[u&&l.jsx(bm,{onCancel:M,onDelete:T}),l.jsx(zi,{onClick:no,modalRef:j,show:s}),l.jsx("div",{className:mt("fixed h-screen w-screen",{"pointer-events-none":!a&&!w&&!i||N}),onClick:()=>{(a||w&&!N)&&chrome.runtime.sendMessage({messageType:"recordingControlsClickOutside"}),w&&!N&&y("hide"),i&&chrome.runtime.sendMessage({messageType:"recordingControlsScreenPositionMenuClickOutside"})},children:l.jsxs("div",{className:"pointer-events-auto absolute",style:Om(n).indicator,onClick:U=>U.stopPropagation(),children:[z==="floating-button"&&l.jsx("div",{ref:g,children:l.jsx(Em,{status:t,open:F,onClick:k})}),w&&l.jsx("div",{className:mt({"fixed bottom-4 right-4":!B,"absolute bottom-0 left-[72px]":B&&n===be.BOTTOM_LEFT,"fixed bottom-4 left-4":B&&n!==be.BOTTOM_LEFT}),children:l.jsx(Tm,{onPrecisionBlurEnabledChange:U=>A(U)})}),l.jsx("div",{ref:d,style:E.styles.popper,...E.attributes.popper,children:i&&l.jsx(Am,{buttonOnClickMaker:L})}),F&&l.jsx("div",{ref:I,style:S.styles.popper,...S.attributes.popper,children:l.jsx(Im,{isPlanFree:e,status:t,screenPositionMenuOpen:i,blurControlsOpen:w,onChangeScreenPosition:()=>{y("hide"),O()},isRecordingAudio:m,onPause:P,onDelete:R,onComplete:D,onLiveBlur:()=>{y("toggle"),chrome.runtime.sendMessage({messageType:"recordingControlsScreenPositionClosed"})},screenPositionMenuButtonReference:f,screenPositionMenuButtonSetReference:x})})]})})]})},Ui=e=>{try{const t=new URL(e);return t.search="",t.toString()}catch{return""}},ro=(e,t)=>{if(!e||!t)return!1;const r=Ui(e),n=Ui(t),a=s=>{try{const c=new URL(s),m=c.hostname.replace(/^www\./i,""),h=c.port?`:${c.port}`:"";return`${c.protocol}//${m}${h}`}catch{return s}},i=a(r),u=a(n);return i===u},oo=Zs("guideMe/setAutoPilotAction");var Vi={},ao={},io={},ut={},so={},lo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function r(n){return n.type===t.Tag||n.type===t.Script||n.type===t.Style}e.isTag=r,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(lo);var K={},Xe=ie&&ie.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ln=ie&&ie.__assign||function(){return ln=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ln.apply(this,arguments)};Object.defineProperty(K,"__esModule",{value:!0}),K.cloneNode=K.hasChildren=K.isDocument=K.isDirective=K.isComment=K.isText=K.isCDATA=K.isTag=K.Element=K.Document=K.CDATA=K.NodeWithChildren=K.ProcessingInstruction=K.Comment=K.Text=K.DataNode=K.Node=void 0;var _e=lo,co=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),uo(this,t)},e}();K.Node=co;var Fn=function(e){Xe(t,e);function t(r){var n=e.call(this)||this;return n.data=r,n}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(r){this.data=r},enumerable:!1,configurable:!0}),t}(co);K.DataNode=Fn;var Gi=function(e){Xe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=_e.ElementType.Text,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Fn);K.Text=Gi;var qi=function(e){Xe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=_e.ElementType.Comment,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Fn);K.Comment=qi;var Wi=function(e){Xe(t,e);function t(r,n){var a=e.call(this,n)||this;return a.name=r,a.type=_e.ElementType.Directive,a}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Fn);K.ProcessingInstruction=Wi;var zn=function(e){Xe(t,e);function t(r){var n=e.call(this)||this;return n.children=r,n}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(r){this.children=r},enumerable:!1,configurable:!0}),t}(co);K.NodeWithChildren=zn;var Xi=function(e){Xe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=_e.ElementType.CDATA,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(zn);K.CDATA=Xi;var Yi=function(e){Xe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=_e.ElementType.Root,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(zn);K.Document=Yi;var Ki=function(e){Xe(t,e);function t(r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=r==="script"?_e.ElementType.Script:r==="style"?_e.ElementType.Style:_e.ElementType.Tag);var u=e.call(this,a)||this;return u.name=r,u.attribs=n,u.type=i,u}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(r){this.name=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var r=this;return Object.keys(this.attribs).map(function(n){var a,i;return{name:n,value:r.attribs[n],namespace:(a=r["x-attribsNamespace"])===null||a===void 0?void 0:a[n],prefix:(i=r["x-attribsPrefix"])===null||i===void 0?void 0:i[n]}})},enumerable:!1,configurable:!0}),t}(zn);K.Element=Ki;function Qi(e){return(0,_e.isTag)(e)}K.isTag=Qi;function Ji(e){return e.type===_e.ElementType.CDATA}K.isCDATA=Ji;function Zi(e){return e.type===_e.ElementType.Text}K.isText=Zi;function es(e){return e.type===_e.ElementType.Comment}K.isComment=es;function ts(e){return e.type===_e.ElementType.Directive}K.isDirective=ts;function ns(e){return e.type===_e.ElementType.Root}K.isDocument=ns;function zm(e){return Object.prototype.hasOwnProperty.call(e,"children")}K.hasChildren=zm;function uo(e,t){t===void 0&&(t=!1);var r;if(Zi(e))r=new Gi(e.data);else if(es(e))r=new qi(e.data);else if(Qi(e)){var n=t?po(e.children):[],a=new Ki(e.name,ln({},e.attribs),n);n.forEach(function(c){return c.parent=a}),e.namespace!=null&&(a.namespace=e.namespace),e["x-attribsNamespace"]&&(a["x-attribsNamespace"]=ln({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(a["x-attribsPrefix"]=ln({},e["x-attribsPrefix"])),r=a}else if(Ji(e)){var n=t?po(e.children):[],i=new Xi(n);n.forEach(function(m){return m.parent=i}),r=i}else if(ns(e)){var n=t?po(e.children):[],u=new Yi(n);n.forEach(function(m){return m.parent=u}),e["x-mode"]&&(u["x-mode"]=e["x-mode"]),r=u}else if(ts(e)){var s=new Wi(e.name,e.data);e["x-name"]!=null&&(s["x-name"]=e["x-name"],s["x-publicId"]=e["x-publicId"],s["x-systemId"]=e["x-systemId"]),r=s}else throw new Error("Not implemented yet: ".concat(e.type));return r.startIndex=e.startIndex,r.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(r.sourceCodeLocation=e.sourceCodeLocation),r}K.cloneNode=uo;function po(e){for(var t=e.map(function(n){return uo(n,!0)}),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}(function(e){var t=ie&&ie.__createBinding||(Object.create?function(s,c,m,h){h===void 0&&(h=m);var v=Object.getOwnPropertyDescriptor(c,m);(!v||("get"in v?!c.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return c[m]}}),Object.defineProperty(s,h,v)}:function(s,c,m,h){h===void 0&&(h=m),s[h]=c[m]}),r=ie&&ie.__exportStar||function(s,c){for(var m in s)m!=="default"&&!Object.prototype.hasOwnProperty.call(c,m)&&t(c,s,m)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var n=lo,a=K;r(K,e);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},u=function(){function s(c,m,h){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof m=="function"&&(h=m,m=i),typeof c=="object"&&(m=c,c=void 0),this.callback=c??null,this.options=m??i,this.elementCB=h??null}return s.prototype.onparserinit=function(c){this.parser=c},s.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},s.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},s.prototype.onerror=function(c){this.handleCallback(c)},s.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},s.prototype.onopentag=function(c,m){var h=this.options.xmlMode?n.ElementType.Tag:void 0,v=new a.Element(c,m,void 0,h);this.addNode(v),this.tagStack.push(v)},s.prototype.ontext=function(c){var m=this.lastNode;if(m&&m.type===n.ElementType.Text)m.data+=c,this.options.withEndIndices&&(m.endIndex=this.parser.endIndex);else{var h=new a.Text(c);this.addNode(h),this.lastNode=h}},s.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=c;return}var m=new a.Comment(c);this.addNode(m),this.lastNode=m},s.prototype.oncommentend=function(){this.lastNode=null},s.prototype.oncdatastart=function(){var c=new a.Text(""),m=new a.CDATA([c]);this.addNode(m),c.parent=m,this.lastNode=c},s.prototype.oncdataend=function(){this.lastNode=null},s.prototype.onprocessinginstruction=function(c,m){var h=new a.ProcessingInstruction(c,m);this.addNode(h)},s.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},s.prototype.addNode=function(c){var m=this.tagStack[this.tagStack.length-1],h=m.children[m.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),m.children.push(c),h&&(c.prev=h,h.next=c),c.parent=m,this.lastNode=null},s}();e.DomHandler=u,e.default=u})(so);var rs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CARRIAGE_RETURN_PLACEHOLDER_REGEX=e.CARRIAGE_RETURN_PLACEHOLDER=e.CARRIAGE_RETURN_REGEX=e.CARRIAGE_RETURN=e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,r){return t[r.toLowerCase()]=r,t},{}),e.CARRIAGE_RETURN="\r",e.CARRIAGE_RETURN_REGEX=new RegExp(e.CARRIAGE_RETURN,"g"),e.CARRIAGE_RETURN_PLACEHOLDER="__HTML_DOM_PARSER_CARRIAGE_RETURN_PLACEHOLDER_".concat(Date.now(),"__"),e.CARRIAGE_RETURN_PLACEHOLDER_REGEX=new RegExp(e.CARRIAGE_RETURN_PLACEHOLDER,"g")})(rs),Object.defineProperty(ut,"__esModule",{value:!0}),ut.formatAttributes=os,ut.escapeSpecialCharacters=$m,ut.revertEscapedCharacters=as,ut.formatDOM=is;var Bn=so,cn=rs;function Bm(e){return cn.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function os(e){for(var t={},r=0,n=e.length;r<n;r++){var a=e[r];t[a.name]=a.value}return t}function Hm(e){e=e.toLowerCase();var t=Bm(e);return t||e}function $m(e){return e.replace(cn.CARRIAGE_RETURN_REGEX,cn.CARRIAGE_RETURN_PLACEHOLDER)}function as(e){return e.replace(cn.CARRIAGE_RETURN_PLACEHOLDER_REGEX,cn.CARRIAGE_RETURN)}function is(e,t,r){t===void 0&&(t=null);for(var n=[],a,i=0,u=e.length;i<u;i++){var s=e[i];switch(s.nodeType){case 1:{var c=Hm(s.nodeName);a=new Bn.Element(c,os(s.attributes)),a.children=is(c==="template"?s.content.childNodes:s.childNodes,a);break}case 3:a=new Bn.Text(as(s.nodeValue));break;case 8:a=new Bn.Comment(s.nodeValue);break;default:continue}var m=n[i-1]||null;m&&(m.next=a),a.parent=t,a.prev=m,a.next=null,n.push(a)}return r&&(a=new Bn.ProcessingInstruction(r.substring(0,r.indexOf(" ")).toLowerCase(),r),a.next=n[0]||null,a.parent=t,n.unshift(a),n[1]&&(n[1].prev=n[0])),n}Object.defineProperty(io,"__esModule",{value:!0}),io.default=Wm;var Um=ut,ss="html",ls="head",Hn="body",Vm=/<([a-zA-Z]+[0-9]?)/,cs=/<head[^]*>/i,us=/<body[^]*>/i,$n=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},fo=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},ds=typeof window=="object"&&window.DOMParser;if(typeof ds=="function"){var Gm=new ds,qm="text/html";fo=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),Gm.parseFromString(e,qm)},$n=fo}if(typeof document=="object"&&document.implementation){var Un=document.implementation.createHTMLDocument();$n=function(e,t){if(t){var r=Un.documentElement.querySelector(t);return r&&(r.innerHTML=e),Un}return Un.documentElement.innerHTML=e,Un}}var Vn=typeof document=="object"&&document.createElement("template"),mo;Vn&&Vn.content&&(mo=function(e){return Vn.innerHTML=e,Vn.content.childNodes});function Wm(e){var t,r;e=(0,Um.escapeSpecialCharacters)(e);var n=e.match(Vm),a=n&&n[1]?n[1].toLowerCase():"";switch(a){case ss:{var i=fo(e);if(!cs.test(e)){var u=i.querySelector(ls);(t=u==null?void 0:u.parentNode)===null||t===void 0||t.removeChild(u)}if(!us.test(e)){var u=i.querySelector(Hn);(r=u==null?void 0:u.parentNode)===null||r===void 0||r.removeChild(u)}return i.querySelectorAll(ss)}case ls:case Hn:{var s=$n(e).querySelectorAll(a);return us.test(e)&&cs.test(e)?s[0].parentNode.childNodes:s}default:{if(mo)return mo(e);var u=$n(e,Hn).querySelector(Hn);return u.childNodes}}}var Xm=ie&&ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ao,"__esModule",{value:!0}),ao.default=Jm;var Ym=Xm(io),Km=ut,Qm=/<(![a-zA-Z\s]+)>/;function Jm(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(Qm),r=t?t[1]:void 0;return(0,Km.formatDOM)((0,Ym.default)(e),null,r)}var Gn={},Ne={},qn={},Zm=0;qn.SAME=Zm;var eh=1;qn.CAMELCASE=eh,qn.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const ps=0,Ye=1,Wn=2,Xn=3,ho=4,fs=5,ms=6;function th(e){return ue.hasOwnProperty(e)?ue[e]:null}function he(e,t,r,n,a,i,u){this.acceptsBooleans=t===Wn||t===Xn||t===ho,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=u}const ue={},nh=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];nh.forEach(e=>{ue[e]=new he(e,ps,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{ue[e]=new he(e,Ye,!1,t,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(e=>{ue[e]=new he(e,Wn,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{ue[e]=new he(e,Wn,!1,e,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{ue[e]=new he(e,Xn,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(e=>{ue[e]=new he(e,Xn,!0,e,null,!1,!1)}),["capture","download"].forEach(e=>{ue[e]=new he(e,ho,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(e=>{ue[e]=new he(e,ms,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(e=>{ue[e]=new he(e,fs,!1,e.toLowerCase(),null,!1,!1)});const go=/[\-\:]([a-z])/g,bo=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(go,bo);ue[t]=new he(t,Ye,!1,e,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(go,bo);ue[t]=new he(t,Ye,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(go,bo);ue[t]=new he(t,Ye,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(e=>{ue[e]=new he(e,Ye,!1,e.toLowerCase(),null,!1,!1)});const rh="xlinkHref";ue[rh]=new he("xlinkHref",Ye,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(e=>{ue[e]=new he(e,Ye,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:oh,SAME:ah,possibleStandardNames:hs}=qn,ih=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",sh=ih+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",lh=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+sh+"]*$")),ch=Object.keys(hs).reduce((e,t)=>{const r=hs[t];return r===ah?e[t]=t:r===oh?e[t.toLowerCase()]=t:e[t]=r,e},{});Ne.BOOLEAN=Xn,Ne.BOOLEANISH_STRING=Wn,Ne.NUMERIC=fs,Ne.OVERLOADED_BOOLEAN=ho,Ne.POSITIVE_NUMERIC=ms,Ne.RESERVED=ps,Ne.STRING=Ye,Ne.getPropertyInfo=th,Ne.isCustomAttribute=lh,Ne.possibleStandardNames=ch;var vo={},xo={},gs=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,uh=/\n/g,dh=/^\s*/,ph=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,fh=/^:\s*/,mh=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,hh=/^[;\s]*/,gh=/^\s+|\s+$/g,bh=`
`,bs="/",vs="*",dt="",vh="comment",xh="declaration",yh=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,n=1;function a(b){var g=b.match(uh);g&&(r+=g.length);var _=b.lastIndexOf(bh);n=~_?b.length-_:n+b.length}function i(){var b={line:r,column:n};return function(g){return g.position=new u(b),m(),g}}function u(b){this.start=b,this.end={line:r,column:n},this.source=t.source}u.prototype.content=e;function s(b){var g=new Error(t.source+":"+r+":"+n+": "+b);if(g.reason=b,g.filename=t.source,g.line=r,g.column=n,g.source=e,!t.silent)throw g}function c(b){var g=b.exec(e);if(g){var _=g[0];return a(_),e=e.slice(_.length),g}}function m(){c(dh)}function h(b){var g;for(b=b||[];g=v();)g!==!1&&b.push(g);return b}function v(){var b=i();if(!(bs!=e.charAt(0)||vs!=e.charAt(1))){for(var g=2;dt!=e.charAt(g)&&(vs!=e.charAt(g)||bs!=e.charAt(g+1));)++g;if(g+=2,dt===e.charAt(g-1))return s("End of comment missing");var _=e.slice(2,g-2);return n+=2,a(_),e=e.slice(g),n+=2,b({type:vh,comment:_})}}function w(){var b=i(),g=c(ph);if(g){if(v(),!c(fh))return s("property missing ':'");var _=c(mh),I=b({type:xh,property:xs(g[0].replace(gs,dt)),value:_?xs(_[0].replace(gs,dt)):dt});return c(hh),I}}function C(){var b=[];h(b);for(var g;g=w();)g!==!1&&(b.push(g),h(b));return b}return m(),C()};function xs(e){return e?e.replace(gh,dt):dt}var wh=ie&&ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xo,"__esModule",{value:!0}),xo.default=kh;var _h=wh(yh);function kh(e,t){var r=null;if(!e||typeof e!="string")return r;var n=(0,_h.default)(e),a=typeof t=="function";return n.forEach(function(i){if(i.type==="declaration"){var u=i.property,s=i.value;a?t(u,s,i):s&&(r=r||{},r[u]=s)}}),r}var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.camelCase=void 0;var Eh=/^--[a-zA-Z0-9_-]+$/,Ch=/-([a-z])/g,jh=/^[^-]+$/,Sh=/^-(webkit|moz|ms|o|khtml)-/,Ph=/^-(ms)-/,Th=function(e){return!e||jh.test(e)||Eh.test(e)},Ih=function(e,t){return t.toUpperCase()},ys=function(e,t){return"".concat(t,"-")},Rh=function(e,t){return t===void 0&&(t={}),Th(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Ph,ys):e=e.replace(Sh,ys),e.replace(Ch,Ih))};Yn.camelCase=Rh;var Mh=ie&&ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Nh=Mh(xo),Dh=Yn;function yo(e,t){var r={};return!e||typeof e!="string"||(0,Nh.default)(e,function(n,a){n&&a&&(r[(0,Dh.camelCase)(n,t)]=a)}),r}yo.default=yo;var Ah=yo;(function(e){var t=ie&&ie.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=void 0,e.isCustomComponent=i,e.setStyleProp=s;var r=p,n=t(Ah),a=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function i(h,v){return h.includes("-")?!a.has(h):!!(v&&typeof v.is=="string")}var u={reactCompat:!0};function s(h,v){if(typeof h=="string"){if(!h.trim()){v.style={};return}try{v.style=(0,n.default)(h,u)}catch{v.style={}}}}e.PRESERVE_CUSTOM_ATTRIBUTES=Number(r.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var c=function(h){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(h.name)};e.canTextBeChildOfNode=c;var m=function(h){return h};e.returnFirstArg=m})(vo),Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.default=zh;var un=Ne,ws=vo,Oh=["checked","value"],Lh=["input","select","textarea"],Fh={reset:!0,submit:!0};function zh(e,t){e===void 0&&(e={});var r={},n=!!(e.type&&Fh[e.type]);for(var a in e){var i=e[a];if((0,un.isCustomAttribute)(a)){r[a]=i;continue}var u=a.toLowerCase(),s=_s(u);if(s){var c=(0,un.getPropertyInfo)(s);switch(Oh.includes(s)&&Lh.includes(t)&&!n&&(s=_s("default"+u)),r[s]=i,c&&c.type){case un.BOOLEAN:r[s]=!0;break;case un.OVERLOADED_BOOLEAN:i===""&&(r[s]=!0);break}continue}ws.PRESERVE_CUSTOM_ATTRIBUTES&&(r[a]=i)}return(0,ws.setStyleProp)(e.style,r),r}function _s(e){return un.possibleStandardNames[e]}var wo={},Bh=ie&&ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wo,"__esModule",{value:!0}),wo.default=ks;var _o=p,Hh=Bh(Gn),dn=vo,$h={cloneElement:_o.cloneElement,createElement:_o.createElement,isValidElement:_o.isValidElement};function ks(e,t){t===void 0&&(t={});for(var r=[],n=typeof t.replace=="function",a=t.transform||dn.returnFirstArg,i=t.library||$h,u=i.cloneElement,s=i.createElement,c=i.isValidElement,m=e.length,h=0;h<m;h++){var v=e[h];if(n){var w=t.replace(v,h);if(c(w)){m>1&&(w=u(w,{key:w.key||h})),r.push(a(w,v,h));continue}}if(v.type==="text"){var C=!v.data.trim().length;if(C&&v.parent&&!(0,dn.canTextBeChildOfNode)(v.parent)||t.trim&&C)continue;r.push(a(v.data,v,h));continue}var b=v,g={};Uh(b)?((0,dn.setStyleProp)(b.attribs.style,b.attribs),g=b.attribs):b.attribs&&(g=(0,Hh.default)(b.attribs,b.name));var _=void 0;switch(v.type){case"script":case"style":v.children[0]&&(g.dangerouslySetInnerHTML={__html:v.children[0].data});break;case"tag":v.name==="textarea"&&v.children[0]?g.defaultValue=v.children[0].data:v.children&&v.children.length&&(_=ks(v.children,t));break;default:continue}m>1&&(g.key=h),r.push(a(s(v.name,g,_),v,h))}return r.length===1?r[0]:r}function Uh(e){return dn.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,dn.isCustomComponent)(e.name,e.attribs)}(function(e){var t=ie&&ie.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0,e.default=s;var r=t(ao);e.htmlToDOM=r.default;var n=t(Gn);e.attributesToProps=n.default;var a=t(wo);e.domToReact=a.default;var i=so;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return i.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return i.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return i.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return i.Text}});var u={lowerCaseAttributeNames:!1};function s(c,m){if(typeof c!="string")throw new TypeError("First argument must be a string");return c?(0,a.default)((0,r.default)(c,(m==null?void 0:m.htmlparser2)||u),m):[]}})(Vi);const Es=lr(Vi),ko=Es.default||Es;var Cs={exports:{}};(function(e){(function(){function t(o){var d={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `\xAB\xAB\xAB` and `\xBB\xBB\xBB` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(o===!1)return JSON.parse(JSON.stringify(d));var f={};for(var x in d)d.hasOwnProperty(x)&&(f[x]=d[x].defaultValue);return f}function r(){var o=t(!0),d={};for(var f in o)o.hasOwnProperty(f)&&(d[f]=!0);return d}var n={},a={},i={},u=t(!0),s="vanilla",c={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:t(!0),allOn:r()};n.helper={},n.extensions={},n.setOption=function(o,d){return u[o]=d,this},n.getOption=function(o){return u[o]},n.getOptions=function(){return u},n.resetOptions=function(){u=t(!0)},n.setFlavor=function(o){if(!c.hasOwnProperty(o))throw Error(o+" flavor was not found");n.resetOptions();var d=c[o];s=o;for(var f in d)d.hasOwnProperty(f)&&(u[f]=d[f])},n.getFlavor=function(){return s},n.getFlavorOptions=function(o){if(c.hasOwnProperty(o))return c[o]},n.getDefaultOptions=function(o){return t(o)},n.subParser=function(o,d){if(n.helper.isString(o))if(typeof d<"u")a[o]=d;else{if(a.hasOwnProperty(o))return a[o];throw Error("SubParser named "+o+" not registered!")}},n.extension=function(o,d){if(!n.helper.isString(o))throw Error("Extension 'name' must be a string");if(o=n.helper.stdExtName(o),n.helper.isUndefined(d)){if(!i.hasOwnProperty(o))throw Error("Extension named "+o+" is not registered!");return i[o]}else{typeof d=="function"&&(d=d()),n.helper.isArray(d)||(d=[d]);var f=m(d,o);if(f.valid)i[o]=d;else throw Error(f.error)}},n.getAllExtensions=function(){return i},n.removeExtension=function(o){delete i[o]},n.resetExtensions=function(){i={}};function m(o,d){var f=d?"Error in "+d+" extension->":"Error in unnamed extension",x={valid:!0,error:""};n.helper.isArray(o)||(o=[o]);for(var j=0;j<o.length;++j){var S=f+" sub-extension "+j+": ",E=o[j];if(typeof E!="object")return x.valid=!1,x.error=S+"must be an object, but "+typeof E+" given",x;if(!n.helper.isString(E.type))return x.valid=!1,x.error=S+'property "type" must be a string, but '+typeof E.type+" given",x;var k=E.type=E.type.toLowerCase();if(k==="language"&&(k=E.type="lang"),k==="html"&&(k=E.type="output"),k!=="lang"&&k!=="output"&&k!=="listener")return x.valid=!1,x.error=S+"type "+k+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',x;if(k==="listener"){if(n.helper.isUndefined(E.listeners))return x.valid=!1,x.error=S+'. Extensions of type "listener" must have a property called "listeners"',x}else if(n.helper.isUndefined(E.filter)&&n.helper.isUndefined(E.regex))return x.valid=!1,x.error=S+k+' extensions must define either a "regex" property or a "filter" method',x;if(E.listeners){if(typeof E.listeners!="object")return x.valid=!1,x.error=S+'"listeners" property must be an object but '+typeof E.listeners+" given",x;for(var P in E.listeners)if(E.listeners.hasOwnProperty(P)&&typeof E.listeners[P]!="function")return x.valid=!1,x.error=S+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+P+" must be a function but "+typeof E.listeners[P]+" given",x}if(E.filter){if(typeof E.filter!="function")return x.valid=!1,x.error=S+'"filter" must be a function, but '+typeof E.filter+" given",x}else if(E.regex){if(n.helper.isString(E.regex)&&(E.regex=new RegExp(E.regex,"g")),!(E.regex instanceof RegExp))return x.valid=!1,x.error=S+'"regex" property must either be a string or a RegExp object, but '+typeof E.regex+" given",x;if(n.helper.isUndefined(E.replace))return x.valid=!1,x.error=S+'"regex" extensions must implement a replace string or function',x}}return x}n.validateExtension=function(o){var d=m(o,null);return d.valid?!0:(console.warn(d.error),!1)},n.hasOwnProperty("helper")||(n.helper={}),n.helper.isString=function(o){return typeof o=="string"||o instanceof String},n.helper.isFunction=function(o){var d={};return o&&d.toString.call(o)==="[object Function]"},n.helper.isArray=function(o){return Array.isArray(o)},n.helper.isUndefined=function(o){return typeof o>"u"},n.helper.forEach=function(o,d){if(n.helper.isUndefined(o))throw new Error("obj param is required");if(n.helper.isUndefined(d))throw new Error("callback param is required");if(!n.helper.isFunction(d))throw new Error("callback param must be a function/closure");if(typeof o.forEach=="function")o.forEach(d);else if(n.helper.isArray(o))for(var f=0;f<o.length;f++)d(o[f],f,o);else if(typeof o=="object")for(var x in o)o.hasOwnProperty(x)&&d(o[x],x,o);else throw new Error("obj does not seem to be an array or an iterable object")},n.helper.stdExtName=function(o){return o.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function h(o,d){var f=d.charCodeAt(0);return"\xA8E"+f+"E"}n.helper.escapeCharactersCallback=h,n.helper.escapeCharacters=function(o,d,f){var x="(["+d.replace(/([\[\]\\])/g,"\\$1")+"])";f&&(x="\\\\"+x);var j=new RegExp(x,"g");return o=o.replace(j,h),o},n.helper.unescapeHTMLEntities=function(o){return o.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var v=function(o,d,f,x){var j=x||"",S=j.indexOf("g")>-1,E=new RegExp(d+"|"+f,"g"+j.replace(/g/g,"")),k=new RegExp(d,j.replace(/g/g,"")),P=[],R,T,M,y,D;do for(R=0;M=E.exec(o);)if(k.test(M[0]))R++||(T=E.lastIndex,y=T-M[0].length);else if(R&&!--R){D=M.index+M[0].length;var O={left:{start:y,end:T},match:{start:T,end:M.index},right:{start:M.index,end:D},wholeMatch:{start:y,end:D}};if(P.push(O),!S)return P}while(R&&(E.lastIndex=T));return P};n.helper.matchRecursiveRegExp=function(o,d,f,x){for(var j=v(o,d,f,x),S=[],E=0;E<j.length;++E)S.push([o.slice(j[E].wholeMatch.start,j[E].wholeMatch.end),o.slice(j[E].match.start,j[E].match.end),o.slice(j[E].left.start,j[E].left.end),o.slice(j[E].right.start,j[E].right.end)]);return S},n.helper.replaceRecursiveRegExp=function(o,d,f,x,j){if(!n.helper.isFunction(d)){var S=d;d=function(){return S}}var E=v(o,f,x,j),k=o,P=E.length;if(P>0){var R=[];E[0].wholeMatch.start!==0&&R.push(o.slice(0,E[0].wholeMatch.start));for(var T=0;T<P;++T)R.push(d(o.slice(E[T].wholeMatch.start,E[T].wholeMatch.end),o.slice(E[T].match.start,E[T].match.end),o.slice(E[T].left.start,E[T].left.end),o.slice(E[T].right.start,E[T].right.end))),T<P-1&&R.push(o.slice(E[T].wholeMatch.end,E[T+1].wholeMatch.start));E[P-1].wholeMatch.end<o.length&&R.push(o.slice(E[P-1].wholeMatch.end)),k=R.join("")}return k},n.helper.regexIndexOf=function(o,d,f){if(!n.helper.isString(o))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(d instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var x=o.substring(f||0).search(d);return x>=0?x+(f||0):x},n.helper.splitAtIndex=function(o,d){if(!n.helper.isString(o))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[o.substring(0,d),o.substring(d)]},n.helper.encodeEmailAddress=function(o){var d=[function(f){return"&#"+f.charCodeAt(0)+";"},function(f){return"&#x"+f.charCodeAt(0).toString(16)+";"},function(f){return f}];return o=o.replace(/./g,function(f){if(f==="@")f=d[Math.floor(Math.random()*2)](f);else{var x=Math.random();f=x>.9?d[2](f):x>.45?d[1](f):d[0](f)}return f}),o},n.helper.padEnd=function(o,d,f){return d=d>>0,f=String(f||" "),o.length>d?String(o):(d=d-o.length,d>f.length&&(f+=f.repeat(d/f.length)),String(o)+f.slice(0,d))},typeof console>"u"&&(console={warn:function(o){alert(o)},log:function(o){alert(o)},error:function(o){throw o}}),n.helper.regexes={asteriskDashAndColon:/([*_:~])/g},n.helper.emojis={"+1":"\u{1F44D}","-1":"\u{1F44E}",100:"\u{1F4AF}",1234:"\u{1F522}","1st_place_medal":"\u{1F947}","2nd_place_medal":"\u{1F948}","3rd_place_medal":"\u{1F949}","8ball":"\u{1F3B1}",a:"\u{1F170}\uFE0F",ab:"\u{1F18E}",abc:"\u{1F524}",abcd:"\u{1F521}",accept:"\u{1F251}",aerial_tramway:"\u{1F6A1}",airplane:"\u2708\uFE0F",alarm_clock:"\u23F0",alembic:"\u2697\uFE0F",alien:"\u{1F47D}",ambulance:"\u{1F691}",amphora:"\u{1F3FA}",anchor:"\u2693\uFE0F",angel:"\u{1F47C}",anger:"\u{1F4A2}",angry:"\u{1F620}",anguished:"\u{1F627}",ant:"\u{1F41C}",apple:"\u{1F34E}",aquarius:"\u2652\uFE0F",aries:"\u2648\uFE0F",arrow_backward:"\u25C0\uFE0F",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07\uFE0F",arrow_down_small:"\u{1F53D}",arrow_forward:"\u25B6\uFE0F",arrow_heading_down:"\u2935\uFE0F",arrow_heading_up:"\u2934\uFE0F",arrow_left:"\u2B05\uFE0F",arrow_lower_left:"\u2199\uFE0F",arrow_lower_right:"\u2198\uFE0F",arrow_right:"\u27A1\uFE0F",arrow_right_hook:"\u21AA\uFE0F",arrow_up:"\u2B06\uFE0F",arrow_up_down:"\u2195\uFE0F",arrow_up_small:"\u{1F53C}",arrow_upper_left:"\u2196\uFE0F",arrow_upper_right:"\u2197\uFE0F",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",art:"\u{1F3A8}",articulated_lorry:"\u{1F69B}",artificial_satellite:"\u{1F6F0}",astonished:"\u{1F632}",athletic_shoe:"\u{1F45F}",atm:"\u{1F3E7}",atom_symbol:"\u269B\uFE0F",avocado:"\u{1F951}",b:"\u{1F171}\uFE0F",baby:"\u{1F476}",baby_bottle:"\u{1F37C}",baby_chick:"\u{1F424}",baby_symbol:"\u{1F6BC}",back:"\u{1F519}",bacon:"\u{1F953}",badminton:"\u{1F3F8}",baggage_claim:"\u{1F6C4}",baguette_bread:"\u{1F956}",balance_scale:"\u2696\uFE0F",balloon:"\u{1F388}",ballot_box:"\u{1F5F3}",ballot_box_with_check:"\u2611\uFE0F",bamboo:"\u{1F38D}",banana:"\u{1F34C}",bangbang:"\u203C\uFE0F",bank:"\u{1F3E6}",bar_chart:"\u{1F4CA}",barber:"\u{1F488}",baseball:"\u26BE\uFE0F",basketball:"\u{1F3C0}",basketball_man:"\u26F9\uFE0F",basketball_woman:"\u26F9\uFE0F&zwj;\u2640\uFE0F",bat:"\u{1F987}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",battery:"\u{1F50B}",beach_umbrella:"\u{1F3D6}",bear:"\u{1F43B}",bed:"\u{1F6CF}",bee:"\u{1F41D}",beer:"\u{1F37A}",beers:"\u{1F37B}",beetle:"\u{1F41E}",beginner:"\u{1F530}",bell:"\u{1F514}",bellhop_bell:"\u{1F6CE}",bento:"\u{1F371}",biking_man:"\u{1F6B4}",bike:"\u{1F6B2}",biking_woman:"\u{1F6B4}&zwj;\u2640\uFE0F",bikini:"\u{1F459}",biohazard:"\u2623\uFE0F",bird:"\u{1F426}",birthday:"\u{1F382}",black_circle:"\u26AB\uFE0F",black_flag:"\u{1F3F4}",black_heart:"\u{1F5A4}",black_joker:"\u{1F0CF}",black_large_square:"\u2B1B\uFE0F",black_medium_small_square:"\u25FE\uFE0F",black_medium_square:"\u25FC\uFE0F",black_nib:"\u2712\uFE0F",black_small_square:"\u25AA\uFE0F",black_square_button:"\u{1F532}",blonde_man:"\u{1F471}",blonde_woman:"\u{1F471}&zwj;\u2640\uFE0F",blossom:"\u{1F33C}",blowfish:"\u{1F421}",blue_book:"\u{1F4D8}",blue_car:"\u{1F699}",blue_heart:"\u{1F499}",blush:"\u{1F60A}",boar:"\u{1F417}",boat:"\u26F5\uFE0F",bomb:"\u{1F4A3}",book:"\u{1F4D6}",bookmark:"\u{1F516}",bookmark_tabs:"\u{1F4D1}",books:"\u{1F4DA}",boom:"\u{1F4A5}",boot:"\u{1F462}",bouquet:"\u{1F490}",bowing_man:"\u{1F647}",bow_and_arrow:"\u{1F3F9}",bowing_woman:"\u{1F647}&zwj;\u2640\uFE0F",bowling:"\u{1F3B3}",boxing_glove:"\u{1F94A}",boy:"\u{1F466}",bread:"\u{1F35E}",bride_with_veil:"\u{1F470}",bridge_at_night:"\u{1F309}",briefcase:"\u{1F4BC}",broken_heart:"\u{1F494}",bug:"\u{1F41B}",building_construction:"\u{1F3D7}",bulb:"\u{1F4A1}",bullettrain_front:"\u{1F685}",bullettrain_side:"\u{1F684}",burrito:"\u{1F32F}",bus:"\u{1F68C}",business_suit_levitating:"\u{1F574}",busstop:"\u{1F68F}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",butterfly:"\u{1F98B}",cactus:"\u{1F335}",cake:"\u{1F370}",calendar:"\u{1F4C6}",call_me_hand:"\u{1F919}",calling:"\u{1F4F2}",camel:"\u{1F42B}",camera:"\u{1F4F7}",camera_flash:"\u{1F4F8}",camping:"\u{1F3D5}",cancer:"\u264B\uFE0F",candle:"\u{1F56F}",candy:"\u{1F36C}",canoe:"\u{1F6F6}",capital_abcd:"\u{1F520}",capricorn:"\u2651\uFE0F",car:"\u{1F697}",card_file_box:"\u{1F5C3}",card_index:"\u{1F4C7}",card_index_dividers:"\u{1F5C2}",carousel_horse:"\u{1F3A0}",carrot:"\u{1F955}",cat:"\u{1F431}",cat2:"\u{1F408}",cd:"\u{1F4BF}",chains:"\u26D3",champagne:"\u{1F37E}",chart:"\u{1F4B9}",chart_with_downwards_trend:"\u{1F4C9}",chart_with_upwards_trend:"\u{1F4C8}",checkered_flag:"\u{1F3C1}",cheese:"\u{1F9C0}",cherries:"\u{1F352}",cherry_blossom:"\u{1F338}",chestnut:"\u{1F330}",chicken:"\u{1F414}",children_crossing:"\u{1F6B8}",chipmunk:"\u{1F43F}",chocolate_bar:"\u{1F36B}",christmas_tree:"\u{1F384}",church:"\u26EA\uFE0F",cinema:"\u{1F3A6}",circus_tent:"\u{1F3AA}",city_sunrise:"\u{1F307}",city_sunset:"\u{1F306}",cityscape:"\u{1F3D9}",cl:"\u{1F191}",clamp:"\u{1F5DC}",clap:"\u{1F44F}",clapper:"\u{1F3AC}",classical_building:"\u{1F3DB}",clinking_glasses:"\u{1F942}",clipboard:"\u{1F4CB}",clock1:"\u{1F550}",clock10:"\u{1F559}",clock1030:"\u{1F565}",clock11:"\u{1F55A}",clock1130:"\u{1F566}",clock12:"\u{1F55B}",clock1230:"\u{1F567}",clock130:"\u{1F55C}",clock2:"\u{1F551}",clock230:"\u{1F55D}",clock3:"\u{1F552}",clock330:"\u{1F55E}",clock4:"\u{1F553}",clock430:"\u{1F55F}",clock5:"\u{1F554}",clock530:"\u{1F560}",clock6:"\u{1F555}",clock630:"\u{1F561}",clock7:"\u{1F556}",clock730:"\u{1F562}",clock8:"\u{1F557}",clock830:"\u{1F563}",clock9:"\u{1F558}",clock930:"\u{1F564}",closed_book:"\u{1F4D5}",closed_lock_with_key:"\u{1F510}",closed_umbrella:"\u{1F302}",cloud:"\u2601\uFE0F",cloud_with_lightning:"\u{1F329}",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\u{1F327}",cloud_with_snow:"\u{1F328}",clown_face:"\u{1F921}",clubs:"\u2663\uFE0F",cocktail:"\u{1F378}",coffee:"\u2615\uFE0F",coffin:"\u26B0\uFE0F",cold_sweat:"\u{1F630}",comet:"\u2604\uFE0F",computer:"\u{1F4BB}",computer_mouse:"\u{1F5B1}",confetti_ball:"\u{1F38A}",confounded:"\u{1F616}",confused:"\u{1F615}",congratulations:"\u3297\uFE0F",construction:"\u{1F6A7}",construction_worker_man:"\u{1F477}",construction_worker_woman:"\u{1F477}&zwj;\u2640\uFE0F",control_knobs:"\u{1F39B}",convenience_store:"\u{1F3EA}",cookie:"\u{1F36A}",cool:"\u{1F192}",policeman:"\u{1F46E}",copyright:"\xA9\uFE0F",corn:"\u{1F33D}",couch_and_lamp:"\u{1F6CB}",couple:"\u{1F46B}",couple_with_heart_woman_man:"\u{1F491}",couple_with_heart_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F468}",couple_with_heart_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F469}",couplekiss_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F468}",couplekiss_man_woman:"\u{1F48F}",couplekiss_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F469}",cow:"\u{1F42E}",cow2:"\u{1F404}",cowboy_hat_face:"\u{1F920}",crab:"\u{1F980}",crayon:"\u{1F58D}",credit_card:"\u{1F4B3}",crescent_moon:"\u{1F319}",cricket:"\u{1F3CF}",crocodile:"\u{1F40A}",croissant:"\u{1F950}",crossed_fingers:"\u{1F91E}",crossed_flags:"\u{1F38C}",crossed_swords:"\u2694\uFE0F",crown:"\u{1F451}",cry:"\u{1F622}",crying_cat_face:"\u{1F63F}",crystal_ball:"\u{1F52E}",cucumber:"\u{1F952}",cupid:"\u{1F498}",curly_loop:"\u27B0",currency_exchange:"\u{1F4B1}",curry:"\u{1F35B}",custard:"\u{1F36E}",customs:"\u{1F6C3}",cyclone:"\u{1F300}",dagger:"\u{1F5E1}",dancer:"\u{1F483}",dancing_women:"\u{1F46F}",dancing_men:"\u{1F46F}&zwj;\u2642\uFE0F",dango:"\u{1F361}",dark_sunglasses:"\u{1F576}",dart:"\u{1F3AF}",dash:"\u{1F4A8}",date:"\u{1F4C5}",deciduous_tree:"\u{1F333}",deer:"\u{1F98C}",department_store:"\u{1F3EC}",derelict_house:"\u{1F3DA}",desert:"\u{1F3DC}",desert_island:"\u{1F3DD}",desktop_computer:"\u{1F5A5}",male_detective:"\u{1F575}\uFE0F",diamond_shape_with_a_dot_inside:"\u{1F4A0}",diamonds:"\u2666\uFE0F",disappointed:"\u{1F61E}",disappointed_relieved:"\u{1F625}",dizzy:"\u{1F4AB}",dizzy_face:"\u{1F635}",do_not_litter:"\u{1F6AF}",dog:"\u{1F436}",dog2:"\u{1F415}",dollar:"\u{1F4B5}",dolls:"\u{1F38E}",dolphin:"\u{1F42C}",door:"\u{1F6AA}",doughnut:"\u{1F369}",dove:"\u{1F54A}",dragon:"\u{1F409}",dragon_face:"\u{1F432}",dress:"\u{1F457}",dromedary_camel:"\u{1F42A}",drooling_face:"\u{1F924}",droplet:"\u{1F4A7}",drum:"\u{1F941}",duck:"\u{1F986}",dvd:"\u{1F4C0}","e-mail":"\u{1F4E7}",eagle:"\u{1F985}",ear:"\u{1F442}",ear_of_rice:"\u{1F33E}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",egg:"\u{1F95A}",eggplant:"\u{1F346}",eight_pointed_black_star:"\u2734\uFE0F",eight_spoked_asterisk:"\u2733\uFE0F",electric_plug:"\u{1F50C}",elephant:"\u{1F418}",email:"\u2709\uFE0F",end:"\u{1F51A}",envelope_with_arrow:"\u{1F4E9}",euro:"\u{1F4B6}",european_castle:"\u{1F3F0}",european_post_office:"\u{1F3E4}",evergreen_tree:"\u{1F332}",exclamation:"\u2757\uFE0F",expressionless:"\u{1F611}",eye:"\u{1F441}",eye_speech_bubble:"\u{1F441}&zwj;\u{1F5E8}",eyeglasses:"\u{1F453}",eyes:"\u{1F440}",face_with_head_bandage:"\u{1F915}",face_with_thermometer:"\u{1F912}",fist_oncoming:"\u{1F44A}",factory:"\u{1F3ED}",fallen_leaf:"\u{1F342}",family_man_woman_boy:"\u{1F46A}",family_man_boy:"\u{1F468}&zwj;\u{1F466}",family_man_boy_boy:"\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_girl:"\u{1F468}&zwj;\u{1F467}",family_man_girl_boy:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_girl_girl:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_man_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}",family_man_man_boy_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_man_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}",family_man_man_girl_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_man_girl_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_woman_boy_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_woman_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}",family_man_woman_girl_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_woman_girl_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_boy:"\u{1F469}&zwj;\u{1F466}",family_woman_boy_boy:"\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_girl:"\u{1F469}&zwj;\u{1F467}",family_woman_girl_boy:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_girl_girl:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_woman_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}",family_woman_woman_boy_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_woman_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}",family_woman_woman_girl_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_woman_girl_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",fast_forward:"\u23E9",fax:"\u{1F4E0}",fearful:"\u{1F628}",feet:"\u{1F43E}",female_detective:"\u{1F575}\uFE0F&zwj;\u2640\uFE0F",ferris_wheel:"\u{1F3A1}",ferry:"\u26F4",field_hockey:"\u{1F3D1}",file_cabinet:"\u{1F5C4}",file_folder:"\u{1F4C1}",film_projector:"\u{1F4FD}",film_strip:"\u{1F39E}",fire:"\u{1F525}",fire_engine:"\u{1F692}",fireworks:"\u{1F386}",first_quarter_moon:"\u{1F313}",first_quarter_moon_with_face:"\u{1F31B}",fish:"\u{1F41F}",fish_cake:"\u{1F365}",fishing_pole_and_fish:"\u{1F3A3}",fist_raised:"\u270A",fist_left:"\u{1F91B}",fist_right:"\u{1F91C}",flags:"\u{1F38F}",flashlight:"\u{1F526}",fleur_de_lis:"\u269C\uFE0F",flight_arrival:"\u{1F6EC}",flight_departure:"\u{1F6EB}",floppy_disk:"\u{1F4BE}",flower_playing_cards:"\u{1F3B4}",flushed:"\u{1F633}",fog:"\u{1F32B}",foggy:"\u{1F301}",football:"\u{1F3C8}",footprints:"\u{1F463}",fork_and_knife:"\u{1F374}",fountain:"\u26F2\uFE0F",fountain_pen:"\u{1F58B}",four_leaf_clover:"\u{1F340}",fox_face:"\u{1F98A}",framed_picture:"\u{1F5BC}",free:"\u{1F193}",fried_egg:"\u{1F373}",fried_shrimp:"\u{1F364}",fries:"\u{1F35F}",frog:"\u{1F438}",frowning:"\u{1F626}",frowning_face:"\u2639\uFE0F",frowning_man:"\u{1F64D}&zwj;\u2642\uFE0F",frowning_woman:"\u{1F64D}",middle_finger:"\u{1F595}",fuelpump:"\u26FD\uFE0F",full_moon:"\u{1F315}",full_moon_with_face:"\u{1F31D}",funeral_urn:"\u26B1\uFE0F",game_die:"\u{1F3B2}",gear:"\u2699\uFE0F",gem:"\u{1F48E}",gemini:"\u264A\uFE0F",ghost:"\u{1F47B}",gift:"\u{1F381}",gift_heart:"\u{1F49D}",girl:"\u{1F467}",globe_with_meridians:"\u{1F310}",goal_net:"\u{1F945}",goat:"\u{1F410}",golf:"\u26F3\uFE0F",golfing_man:"\u{1F3CC}\uFE0F",golfing_woman:"\u{1F3CC}\uFE0F&zwj;\u2640\uFE0F",gorilla:"\u{1F98D}",grapes:"\u{1F347}",green_apple:"\u{1F34F}",green_book:"\u{1F4D7}",green_heart:"\u{1F49A}",green_salad:"\u{1F957}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1F62C}",grin:"\u{1F601}",grinning:"\u{1F600}",guardsman:"\u{1F482}",guardswoman:"\u{1F482}&zwj;\u2640\uFE0F",guitar:"\u{1F3B8}",gun:"\u{1F52B}",haircut_woman:"\u{1F487}",haircut_man:"\u{1F487}&zwj;\u2642\uFE0F",hamburger:"\u{1F354}",hammer:"\u{1F528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1F6E0}",hamster:"\u{1F439}",hand:"\u270B",handbag:"\u{1F45C}",handshake:"\u{1F91D}",hankey:"\u{1F4A9}",hatched_chick:"\u{1F425}",hatching_chick:"\u{1F423}",headphones:"\u{1F3A7}",hear_no_evil:"\u{1F649}",heart:"\u2764\uFE0F",heart_decoration:"\u{1F49F}",heart_eyes:"\u{1F60D}",heart_eyes_cat:"\u{1F63B}",heartbeat:"\u{1F493}",heartpulse:"\u{1F497}",hearts:"\u2665\uFE0F",heavy_check_mark:"\u2714\uFE0F",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1F4B2}",heavy_heart_exclamation:"\u2763\uFE0F",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\uFE0F",heavy_plus_sign:"\u2795",helicopter:"\u{1F681}",herb:"\u{1F33F}",hibiscus:"\u{1F33A}",high_brightness:"\u{1F506}",high_heel:"\u{1F460}",hocho:"\u{1F52A}",hole:"\u{1F573}",honey_pot:"\u{1F36F}",horse:"\u{1F434}",horse_racing:"\u{1F3C7}",hospital:"\u{1F3E5}",hot_pepper:"\u{1F336}",hotdog:"\u{1F32D}",hotel:"\u{1F3E8}",hotsprings:"\u2668\uFE0F",hourglass:"\u231B\uFE0F",hourglass_flowing_sand:"\u23F3",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",houses:"\u{1F3D8}",hugs:"\u{1F917}",hushed:"\u{1F62F}",ice_cream:"\u{1F368}",ice_hockey:"\u{1F3D2}",ice_skate:"\u26F8",icecream:"\u{1F366}",id:"\u{1F194}",ideograph_advantage:"\u{1F250}",imp:"\u{1F47F}",inbox_tray:"\u{1F4E5}",incoming_envelope:"\u{1F4E8}",tipping_hand_woman:"\u{1F481}",information_source:"\u2139\uFE0F",innocent:"\u{1F607}",interrobang:"\u2049\uFE0F",iphone:"\u{1F4F1}",izakaya_lantern:"\u{1F3EE}",jack_o_lantern:"\u{1F383}",japan:"\u{1F5FE}",japanese_castle:"\u{1F3EF}",japanese_goblin:"\u{1F47A}",japanese_ogre:"\u{1F479}",jeans:"\u{1F456}",joy:"\u{1F602}",joy_cat:"\u{1F639}",joystick:"\u{1F579}",kaaba:"\u{1F54B}",key:"\u{1F511}",keyboard:"\u2328\uFE0F",keycap_ten:"\u{1F51F}",kick_scooter:"\u{1F6F4}",kimono:"\u{1F458}",kiss:"\u{1F48B}",kissing:"\u{1F617}",kissing_cat:"\u{1F63D}",kissing_closed_eyes:"\u{1F61A}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kiwi_fruit:"\u{1F95D}",koala:"\u{1F428}",koko:"\u{1F201}",label:"\u{1F3F7}",large_blue_circle:"\u{1F535}",large_blue_diamond:"\u{1F537}",large_orange_diamond:"\u{1F536}",last_quarter_moon:"\u{1F317}",last_quarter_moon_with_face:"\u{1F31C}",latin_cross:"\u271D\uFE0F",laughing:"\u{1F606}",leaves:"\u{1F343}",ledger:"\u{1F4D2}",left_luggage:"\u{1F6C5}",left_right_arrow:"\u2194\uFE0F",leftwards_arrow_with_hook:"\u21A9\uFE0F",lemon:"\u{1F34B}",leo:"\u264C\uFE0F",leopard:"\u{1F406}",level_slider:"\u{1F39A}",libra:"\u264E\uFE0F",light_rail:"\u{1F688}",link:"\u{1F517}",lion:"\u{1F981}",lips:"\u{1F444}",lipstick:"\u{1F484}",lizard:"\u{1F98E}",lock:"\u{1F512}",lock_with_ink_pen:"\u{1F50F}",lollipop:"\u{1F36D}",loop:"\u27BF",loud_sound:"\u{1F50A}",loudspeaker:"\u{1F4E2}",love_hotel:"\u{1F3E9}",love_letter:"\u{1F48C}",low_brightness:"\u{1F505}",lying_face:"\u{1F925}",m:"\u24C2\uFE0F",mag:"\u{1F50D}",mag_right:"\u{1F50E}",mahjong:"\u{1F004}\uFE0F",mailbox:"\u{1F4EB}",mailbox_closed:"\u{1F4EA}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",man:"\u{1F468}",man_artist:"\u{1F468}&zwj;\u{1F3A8}",man_astronaut:"\u{1F468}&zwj;\u{1F680}",man_cartwheeling:"\u{1F938}&zwj;\u2642\uFE0F",man_cook:"\u{1F468}&zwj;\u{1F373}",man_dancing:"\u{1F57A}",man_facepalming:"\u{1F926}&zwj;\u2642\uFE0F",man_factory_worker:"\u{1F468}&zwj;\u{1F3ED}",man_farmer:"\u{1F468}&zwj;\u{1F33E}",man_firefighter:"\u{1F468}&zwj;\u{1F692}",man_health_worker:"\u{1F468}&zwj;\u2695\uFE0F",man_in_tuxedo:"\u{1F935}",man_judge:"\u{1F468}&zwj;\u2696\uFE0F",man_juggling:"\u{1F939}&zwj;\u2642\uFE0F",man_mechanic:"\u{1F468}&zwj;\u{1F527}",man_office_worker:"\u{1F468}&zwj;\u{1F4BC}",man_pilot:"\u{1F468}&zwj;\u2708\uFE0F",man_playing_handball:"\u{1F93E}&zwj;\u2642\uFE0F",man_playing_water_polo:"\u{1F93D}&zwj;\u2642\uFE0F",man_scientist:"\u{1F468}&zwj;\u{1F52C}",man_shrugging:"\u{1F937}&zwj;\u2642\uFE0F",man_singer:"\u{1F468}&zwj;\u{1F3A4}",man_student:"\u{1F468}&zwj;\u{1F393}",man_teacher:"\u{1F468}&zwj;\u{1F3EB}",man_technologist:"\u{1F468}&zwj;\u{1F4BB}",man_with_gua_pi_mao:"\u{1F472}",man_with_turban:"\u{1F473}",tangerine:"\u{1F34A}",mans_shoe:"\u{1F45E}",mantelpiece_clock:"\u{1F570}",maple_leaf:"\u{1F341}",martial_arts_uniform:"\u{1F94B}",mask:"\u{1F637}",massage_woman:"\u{1F486}",massage_man:"\u{1F486}&zwj;\u2642\uFE0F",meat_on_bone:"\u{1F356}",medal_military:"\u{1F396}",medal_sports:"\u{1F3C5}",mega:"\u{1F4E3}",melon:"\u{1F348}",memo:"\u{1F4DD}",men_wrestling:"\u{1F93C}&zwj;\u2642\uFE0F",menorah:"\u{1F54E}",mens:"\u{1F6B9}",metal:"\u{1F918}",metro:"\u{1F687}",microphone:"\u{1F3A4}",microscope:"\u{1F52C}",milk_glass:"\u{1F95B}",milky_way:"\u{1F30C}",minibus:"\u{1F690}",minidisc:"\u{1F4BD}",mobile_phone_off:"\u{1F4F4}",money_mouth_face:"\u{1F911}",money_with_wings:"\u{1F4B8}",moneybag:"\u{1F4B0}",monkey:"\u{1F412}",monkey_face:"\u{1F435}",monorail:"\u{1F69D}",moon:"\u{1F314}",mortar_board:"\u{1F393}",mosque:"\u{1F54C}",motor_boat:"\u{1F6E5}",motor_scooter:"\u{1F6F5}",motorcycle:"\u{1F3CD}",motorway:"\u{1F6E3}",mount_fuji:"\u{1F5FB}",mountain:"\u26F0",mountain_biking_man:"\u{1F6B5}",mountain_biking_woman:"\u{1F6B5}&zwj;\u2640\uFE0F",mountain_cableway:"\u{1F6A0}",mountain_railway:"\u{1F69E}",mountain_snow:"\u{1F3D4}",mouse:"\u{1F42D}",mouse2:"\u{1F401}",movie_camera:"\u{1F3A5}",moyai:"\u{1F5FF}",mrs_claus:"\u{1F936}",muscle:"\u{1F4AA}",mushroom:"\u{1F344}",musical_keyboard:"\u{1F3B9}",musical_note:"\u{1F3B5}",musical_score:"\u{1F3BC}",mute:"\u{1F507}",nail_care:"\u{1F485}",name_badge:"\u{1F4DB}",national_park:"\u{1F3DE}",nauseated_face:"\u{1F922}",necktie:"\u{1F454}",negative_squared_cross_mark:"\u274E",nerd_face:"\u{1F913}",neutral_face:"\u{1F610}",new:"\u{1F195}",new_moon:"\u{1F311}",new_moon_with_face:"\u{1F31A}",newspaper:"\u{1F4F0}",newspaper_roll:"\u{1F5DE}",next_track_button:"\u23ED",ng:"\u{1F196}",no_good_man:"\u{1F645}&zwj;\u2642\uFE0F",no_good_woman:"\u{1F645}",night_with_stars:"\u{1F303}",no_bell:"\u{1F515}",no_bicycles:"\u{1F6B3}",no_entry:"\u26D4\uFE0F",no_entry_sign:"\u{1F6AB}",no_mobile_phones:"\u{1F4F5}",no_mouth:"\u{1F636}",no_pedestrians:"\u{1F6B7}",no_smoking:"\u{1F6AD}","non-potable_water":"\u{1F6B1}",nose:"\u{1F443}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",notes:"\u{1F3B6}",nut_and_bolt:"\u{1F529}",o:"\u2B55\uFE0F",o2:"\u{1F17E}\uFE0F",ocean:"\u{1F30A}",octopus:"\u{1F419}",oden:"\u{1F362}",office:"\u{1F3E2}",oil_drum:"\u{1F6E2}",ok:"\u{1F197}",ok_hand:"\u{1F44C}",ok_man:"\u{1F646}&zwj;\u2642\uFE0F",ok_woman:"\u{1F646}",old_key:"\u{1F5DD}",older_man:"\u{1F474}",older_woman:"\u{1F475}",om:"\u{1F549}",on:"\u{1F51B}",oncoming_automobile:"\u{1F698}",oncoming_bus:"\u{1F68D}",oncoming_police_car:"\u{1F694}",oncoming_taxi:"\u{1F696}",open_file_folder:"\u{1F4C2}",open_hands:"\u{1F450}",open_mouth:"\u{1F62E}",open_umbrella:"\u2602\uFE0F",ophiuchus:"\u26CE",orange_book:"\u{1F4D9}",orthodox_cross:"\u2626\uFE0F",outbox_tray:"\u{1F4E4}",owl:"\u{1F989}",ox:"\u{1F402}",package:"\u{1F4E6}",page_facing_up:"\u{1F4C4}",page_with_curl:"\u{1F4C3}",pager:"\u{1F4DF}",paintbrush:"\u{1F58C}",palm_tree:"\u{1F334}",pancakes:"\u{1F95E}",panda_face:"\u{1F43C}",paperclip:"\u{1F4CE}",paperclips:"\u{1F587}",parasol_on_ground:"\u26F1",parking:"\u{1F17F}\uFE0F",part_alternation_mark:"\u303D\uFE0F",partly_sunny:"\u26C5\uFE0F",passenger_ship:"\u{1F6F3}",passport_control:"\u{1F6C2}",pause_button:"\u23F8",peace_symbol:"\u262E\uFE0F",peach:"\u{1F351}",peanuts:"\u{1F95C}",pear:"\u{1F350}",pen:"\u{1F58A}",pencil2:"\u270F\uFE0F",penguin:"\u{1F427}",pensive:"\u{1F614}",performing_arts:"\u{1F3AD}",persevere:"\u{1F623}",person_fencing:"\u{1F93A}",pouting_woman:"\u{1F64E}",phone:"\u260E\uFE0F",pick:"\u26CF",pig:"\u{1F437}",pig2:"\u{1F416}",pig_nose:"\u{1F43D}",pill:"\u{1F48A}",pineapple:"\u{1F34D}",ping_pong:"\u{1F3D3}",pisces:"\u2653\uFE0F",pizza:"\u{1F355}",place_of_worship:"\u{1F6D0}",plate_with_cutlery:"\u{1F37D}",play_or_pause_button:"\u23EF",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",point_up:"\u261D\uFE0F",point_up_2:"\u{1F446}",police_car:"\u{1F693}",policewoman:"\u{1F46E}&zwj;\u2640\uFE0F",poodle:"\u{1F429}",popcorn:"\u{1F37F}",post_office:"\u{1F3E3}",postal_horn:"\u{1F4EF}",postbox:"\u{1F4EE}",potable_water:"\u{1F6B0}",potato:"\u{1F954}",pouch:"\u{1F45D}",poultry_leg:"\u{1F357}",pound:"\u{1F4B7}",rage:"\u{1F621}",pouting_cat:"\u{1F63E}",pouting_man:"\u{1F64E}&zwj;\u2642\uFE0F",pray:"\u{1F64F}",prayer_beads:"\u{1F4FF}",pregnant_woman:"\u{1F930}",previous_track_button:"\u23EE",prince:"\u{1F934}",princess:"\u{1F478}",printer:"\u{1F5A8}",purple_heart:"\u{1F49C}",purse:"\u{1F45B}",pushpin:"\u{1F4CC}",put_litter_in_its_place:"\u{1F6AE}",question:"\u2753",rabbit:"\u{1F430}",rabbit2:"\u{1F407}",racehorse:"\u{1F40E}",racing_car:"\u{1F3CE}",radio:"\u{1F4FB}",radio_button:"\u{1F518}",radioactive:"\u2622\uFE0F",railway_car:"\u{1F683}",railway_track:"\u{1F6E4}",rainbow:"\u{1F308}",rainbow_flag:"\u{1F3F3}\uFE0F&zwj;\u{1F308}",raised_back_of_hand:"\u{1F91A}",raised_hand_with_fingers_splayed:"\u{1F590}",raised_hands:"\u{1F64C}",raising_hand_woman:"\u{1F64B}",raising_hand_man:"\u{1F64B}&zwj;\u2642\uFE0F",ram:"\u{1F40F}",ramen:"\u{1F35C}",rat:"\u{1F400}",record_button:"\u23FA",recycle:"\u267B\uFE0F",red_circle:"\u{1F534}",registered:"\xAE\uFE0F",relaxed:"\u263A\uFE0F",relieved:"\u{1F60C}",reminder_ribbon:"\u{1F397}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",rescue_worker_helmet:"\u26D1",restroom:"\u{1F6BB}",revolving_hearts:"\u{1F49E}",rewind:"\u23EA",rhinoceros:"\u{1F98F}",ribbon:"\u{1F380}",rice:"\u{1F35A}",rice_ball:"\u{1F359}",rice_cracker:"\u{1F358}",rice_scene:"\u{1F391}",right_anger_bubble:"\u{1F5EF}",ring:"\u{1F48D}",robot:"\u{1F916}",rocket:"\u{1F680}",rofl:"\u{1F923}",roll_eyes:"\u{1F644}",roller_coaster:"\u{1F3A2}",rooster:"\u{1F413}",rose:"\u{1F339}",rosette:"\u{1F3F5}",rotating_light:"\u{1F6A8}",round_pushpin:"\u{1F4CD}",rowing_man:"\u{1F6A3}",rowing_woman:"\u{1F6A3}&zwj;\u2640\uFE0F",rugby_football:"\u{1F3C9}",running_man:"\u{1F3C3}",running_shirt_with_sash:"\u{1F3BD}",running_woman:"\u{1F3C3}&zwj;\u2640\uFE0F",sa:"\u{1F202}\uFE0F",sagittarius:"\u2650\uFE0F",sake:"\u{1F376}",sandal:"\u{1F461}",santa:"\u{1F385}",satellite:"\u{1F4E1}",saxophone:"\u{1F3B7}",school:"\u{1F3EB}",school_satchel:"\u{1F392}",scissors:"\u2702\uFE0F",scorpion:"\u{1F982}",scorpius:"\u264F\uFE0F",scream:"\u{1F631}",scream_cat:"\u{1F640}",scroll:"\u{1F4DC}",seat:"\u{1F4BA}",secret:"\u3299\uFE0F",see_no_evil:"\u{1F648}",seedling:"\u{1F331}",selfie:"\u{1F933}",shallow_pan_of_food:"\u{1F958}",shamrock:"\u2618\uFE0F",shark:"\u{1F988}",shaved_ice:"\u{1F367}",sheep:"\u{1F411}",shell:"\u{1F41A}",shield:"\u{1F6E1}",shinto_shrine:"\u26E9",ship:"\u{1F6A2}",shirt:"\u{1F455}",shopping:"\u{1F6CD}",shopping_cart:"\u{1F6D2}",shower:"\u{1F6BF}",shrimp:"\u{1F990}",signal_strength:"\u{1F4F6}",six_pointed_star:"\u{1F52F}",ski:"\u{1F3BF}",skier:"\u26F7",skull:"\u{1F480}",skull_and_crossbones:"\u2620\uFE0F",sleeping:"\u{1F634}",sleeping_bed:"\u{1F6CC}",sleepy:"\u{1F62A}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",slot_machine:"\u{1F3B0}",small_airplane:"\u{1F6E9}",small_blue_diamond:"\u{1F539}",small_orange_diamond:"\u{1F538}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",smile:"\u{1F604}",smile_cat:"\u{1F638}",smiley:"\u{1F603}",smiley_cat:"\u{1F63A}",smiling_imp:"\u{1F608}",smirk:"\u{1F60F}",smirk_cat:"\u{1F63C}",smoking:"\u{1F6AC}",snail:"\u{1F40C}",snake:"\u{1F40D}",sneezing_face:"\u{1F927}",snowboarder:"\u{1F3C2}",snowflake:"\u2744\uFE0F",snowman:"\u26C4\uFE0F",snowman_with_snow:"\u2603\uFE0F",sob:"\u{1F62D}",soccer:"\u26BD\uFE0F",soon:"\u{1F51C}",sos:"\u{1F198}",sound:"\u{1F509}",space_invader:"\u{1F47E}",spades:"\u2660\uFE0F",spaghetti:"\u{1F35D}",sparkle:"\u2747\uFE0F",sparkler:"\u{1F387}",sparkles:"\u2728",sparkling_heart:"\u{1F496}",speak_no_evil:"\u{1F64A}",speaker:"\u{1F508}",speaking_head:"\u{1F5E3}",speech_balloon:"\u{1F4AC}",speedboat:"\u{1F6A4}",spider:"\u{1F577}",spider_web:"\u{1F578}",spiral_calendar:"\u{1F5D3}",spiral_notepad:"\u{1F5D2}",spoon:"\u{1F944}",squid:"\u{1F991}",stadium:"\u{1F3DF}",star:"\u2B50\uFE0F",star2:"\u{1F31F}",star_and_crescent:"\u262A\uFE0F",star_of_david:"\u2721\uFE0F",stars:"\u{1F320}",station:"\u{1F689}",statue_of_liberty:"\u{1F5FD}",steam_locomotive:"\u{1F682}",stew:"\u{1F372}",stop_button:"\u23F9",stop_sign:"\u{1F6D1}",stopwatch:"\u23F1",straight_ruler:"\u{1F4CF}",strawberry:"\u{1F353}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_closed_eyes:"\u{1F61D}",stuck_out_tongue_winking_eye:"\u{1F61C}",studio_microphone:"\u{1F399}",stuffed_flatbread:"\u{1F959}",sun_behind_large_cloud:"\u{1F325}",sun_behind_rain_cloud:"\u{1F326}",sun_behind_small_cloud:"\u{1F324}",sun_with_face:"\u{1F31E}",sunflower:"\u{1F33B}",sunglasses:"\u{1F60E}",sunny:"\u2600\uFE0F",sunrise:"\u{1F305}",sunrise_over_mountains:"\u{1F304}",surfing_man:"\u{1F3C4}",surfing_woman:"\u{1F3C4}&zwj;\u2640\uFE0F",sushi:"\u{1F363}",suspension_railway:"\u{1F69F}",sweat:"\u{1F613}",sweat_drops:"\u{1F4A6}",sweat_smile:"\u{1F605}",sweet_potato:"\u{1F360}",swimming_man:"\u{1F3CA}",swimming_woman:"\u{1F3CA}&zwj;\u2640\uFE0F",symbols:"\u{1F523}",synagogue:"\u{1F54D}",syringe:"\u{1F489}",taco:"\u{1F32E}",tada:"\u{1F389}",tanabata_tree:"\u{1F38B}",taurus:"\u2649\uFE0F",taxi:"\u{1F695}",tea:"\u{1F375}",telephone_receiver:"\u{1F4DE}",telescope:"\u{1F52D}",tennis:"\u{1F3BE}",tent:"\u26FA\uFE0F",thermometer:"\u{1F321}",thinking:"\u{1F914}",thought_balloon:"\u{1F4AD}",ticket:"\u{1F3AB}",tickets:"\u{1F39F}",tiger:"\u{1F42F}",tiger2:"\u{1F405}",timer_clock:"\u23F2",tipping_hand_man:"\u{1F481}&zwj;\u2642\uFE0F",tired_face:"\u{1F62B}",tm:"\u2122\uFE0F",toilet:"\u{1F6BD}",tokyo_tower:"\u{1F5FC}",tomato:"\u{1F345}",tongue:"\u{1F445}",top:"\u{1F51D}",tophat:"\u{1F3A9}",tornado:"\u{1F32A}",trackball:"\u{1F5B2}",tractor:"\u{1F69C}",traffic_light:"\u{1F6A5}",train:"\u{1F68B}",train2:"\u{1F686}",tram:"\u{1F68A}",triangular_flag_on_post:"\u{1F6A9}",triangular_ruler:"\u{1F4D0}",trident:"\u{1F531}",triumph:"\u{1F624}",trolleybus:"\u{1F68E}",trophy:"\u{1F3C6}",tropical_drink:"\u{1F379}",tropical_fish:"\u{1F420}",truck:"\u{1F69A}",trumpet:"\u{1F3BA}",tulip:"\u{1F337}",tumbler_glass:"\u{1F943}",turkey:"\u{1F983}",turtle:"\u{1F422}",tv:"\u{1F4FA}",twisted_rightwards_arrows:"\u{1F500}",two_hearts:"\u{1F495}",two_men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",u5272:"\u{1F239}",u5408:"\u{1F234}",u55b6:"\u{1F23A}",u6307:"\u{1F22F}\uFE0F",u6708:"\u{1F237}\uFE0F",u6709:"\u{1F236}",u6e80:"\u{1F235}",u7121:"\u{1F21A}\uFE0F",u7533:"\u{1F238}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",umbrella:"\u2614\uFE0F",unamused:"\u{1F612}",underage:"\u{1F51E}",unicorn:"\u{1F984}",unlock:"\u{1F513}",up:"\u{1F199}",upside_down_face:"\u{1F643}",v:"\u270C\uFE0F",vertical_traffic_light:"\u{1F6A6}",vhs:"\u{1F4FC}",vibration_mode:"\u{1F4F3}",video_camera:"\u{1F4F9}",video_game:"\u{1F3AE}",violin:"\u{1F3BB}",virgo:"\u264D\uFE0F",volcano:"\u{1F30B}",volleyball:"\u{1F3D0}",vs:"\u{1F19A}",vulcan_salute:"\u{1F596}",walking_man:"\u{1F6B6}",walking_woman:"\u{1F6B6}&zwj;\u2640\uFE0F",waning_crescent_moon:"\u{1F318}",waning_gibbous_moon:"\u{1F316}",warning:"\u26A0\uFE0F",wastebasket:"\u{1F5D1}",watch:"\u231A\uFE0F",water_buffalo:"\u{1F403}",watermelon:"\u{1F349}",wave:"\u{1F44B}",wavy_dash:"\u3030\uFE0F",waxing_crescent_moon:"\u{1F312}",wc:"\u{1F6BE}",weary:"\u{1F629}",wedding:"\u{1F492}",weight_lifting_man:"\u{1F3CB}\uFE0F",weight_lifting_woman:"\u{1F3CB}\uFE0F&zwj;\u2640\uFE0F",whale:"\u{1F433}",whale2:"\u{1F40B}",wheel_of_dharma:"\u2638\uFE0F",wheelchair:"\u267F\uFE0F",white_check_mark:"\u2705",white_circle:"\u26AA\uFE0F",white_flag:"\u{1F3F3}\uFE0F",white_flower:"\u{1F4AE}",white_large_square:"\u2B1C\uFE0F",white_medium_small_square:"\u25FD\uFE0F",white_medium_square:"\u25FB\uFE0F",white_small_square:"\u25AB\uFE0F",white_square_button:"\u{1F533}",wilted_flower:"\u{1F940}",wind_chime:"\u{1F390}",wind_face:"\u{1F32C}",wine_glass:"\u{1F377}",wink:"\u{1F609}",wolf:"\u{1F43A}",woman:"\u{1F469}",woman_artist:"\u{1F469}&zwj;\u{1F3A8}",woman_astronaut:"\u{1F469}&zwj;\u{1F680}",woman_cartwheeling:"\u{1F938}&zwj;\u2640\uFE0F",woman_cook:"\u{1F469}&zwj;\u{1F373}",woman_facepalming:"\u{1F926}&zwj;\u2640\uFE0F",woman_factory_worker:"\u{1F469}&zwj;\u{1F3ED}",woman_farmer:"\u{1F469}&zwj;\u{1F33E}",woman_firefighter:"\u{1F469}&zwj;\u{1F692}",woman_health_worker:"\u{1F469}&zwj;\u2695\uFE0F",woman_judge:"\u{1F469}&zwj;\u2696\uFE0F",woman_juggling:"\u{1F939}&zwj;\u2640\uFE0F",woman_mechanic:"\u{1F469}&zwj;\u{1F527}",woman_office_worker:"\u{1F469}&zwj;\u{1F4BC}",woman_pilot:"\u{1F469}&zwj;\u2708\uFE0F",woman_playing_handball:"\u{1F93E}&zwj;\u2640\uFE0F",woman_playing_water_polo:"\u{1F93D}&zwj;\u2640\uFE0F",woman_scientist:"\u{1F469}&zwj;\u{1F52C}",woman_shrugging:"\u{1F937}&zwj;\u2640\uFE0F",woman_singer:"\u{1F469}&zwj;\u{1F3A4}",woman_student:"\u{1F469}&zwj;\u{1F393}",woman_teacher:"\u{1F469}&zwj;\u{1F3EB}",woman_technologist:"\u{1F469}&zwj;\u{1F4BB}",woman_with_turban:"\u{1F473}&zwj;\u2640\uFE0F",womans_clothes:"\u{1F45A}",womans_hat:"\u{1F452}",women_wrestling:"\u{1F93C}&zwj;\u2640\uFE0F",womens:"\u{1F6BA}",world_map:"\u{1F5FA}",worried:"\u{1F61F}",wrench:"\u{1F527}",writing_hand:"\u270D\uFE0F",x:"\u274C",yellow_heart:"\u{1F49B}",yen:"\u{1F4B4}",yin_yang:"\u262F\uFE0F",yum:"\u{1F60B}",zap:"\u26A1\uFE0F",zipper_mouth_face:"\u{1F910}",zzz:"\u{1F4A4}",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},n.Converter=function(o){var d={},f=[],x=[],j={},S=s,E={parsed:{},raw:"",format:""};k();function k(){o=o||{};for(var y in u)u.hasOwnProperty(y)&&(d[y]=u[y]);if(typeof o=="object")for(var D in o)o.hasOwnProperty(D)&&(d[D]=o[D]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof o+" was passed instead.");d.extensions&&n.helper.forEach(d.extensions,P)}function P(y,D){if(D=D||null,n.helper.isString(y))if(y=n.helper.stdExtName(y),D=y,n.extensions[y]){console.warn("DEPRECATION WARNING: "+y+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),R(n.extensions[y],y);return}else if(!n.helper.isUndefined(i[y]))y=i[y];else throw Error('Extension "'+y+'" could not be loaded. It was either not found or is not a valid extension.');typeof y=="function"&&(y=y()),n.helper.isArray(y)||(y=[y]);var O=m(y,D);if(!O.valid)throw Error(O.error);for(var L=0;L<y.length;++L){switch(y[L].type){case"lang":f.push(y[L]);break;case"output":x.push(y[L]);break}if(y[L].hasOwnProperty("listeners"))for(var z in y[L].listeners)y[L].listeners.hasOwnProperty(z)&&T(z,y[L].listeners[z])}}function R(y,D){typeof y=="function"&&(y=y(new n.Converter)),n.helper.isArray(y)||(y=[y]);var O=m(y,D);if(!O.valid)throw Error(O.error);for(var L=0;L<y.length;++L)switch(y[L].type){case"lang":f.push(y[L]);break;case"output":x.push(y[L]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function T(y,D){if(!n.helper.isString(y))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof y+" given");if(typeof D!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof D+" given");j.hasOwnProperty(y)||(j[y]=[]),j[y].push(D)}function M(y){var D=y.match(/^\s*/)[0].length,O=new RegExp("^\\s{0,"+D+"}","gm");return y.replace(O,"")}this._dispatch=function(y,D,O,L){if(j.hasOwnProperty(y))for(var z=0;z<j[y].length;++z){var F=j[y][z](y,D,this,O,L);F&&typeof F<"u"&&(D=F)}return D},this.listen=function(y,D){return T(y,D),this},this.makeHtml=function(y){if(!y)return y;var D={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:f,outputModifiers:x,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return y=y.replace(//g,"\xA8T"),y=y.replace(/\$/g,"\xA8D"),y=y.replace(/\r\n/g,`
`),y=y.replace(/\r/g,`
`),y=y.replace(/\u00A0/g,"&nbsp;"),d.smartIndentationFix&&(y=M(y)),y=`

`+y+`

`,y=n.subParser("detab")(y,d,D),y=y.replace(/^[ \t]+$/mg,""),n.helper.forEach(f,function(O){y=n.subParser("runExtension")(O,y,d,D)}),y=n.subParser("metadata")(y,d,D),y=n.subParser("hashPreCodeTags")(y,d,D),y=n.subParser("githubCodeBlocks")(y,d,D),y=n.subParser("hashHTMLBlocks")(y,d,D),y=n.subParser("hashCodeTags")(y,d,D),y=n.subParser("stripLinkDefinitions")(y,d,D),y=n.subParser("blockGamut")(y,d,D),y=n.subParser("unhashHTMLSpans")(y,d,D),y=n.subParser("unescapeSpecialChars")(y,d,D),y=y.replace(/D/g,"$$"),y=y.replace(/T/g,"\xA8"),y=n.subParser("completeHTMLDocument")(y,d,D),n.helper.forEach(x,function(O){y=n.subParser("runExtension")(O,y,d,D)}),E=D.metadata,y},this.makeMarkdown=this.makeMd=function(y,D){if(y=y.replace(/\r\n/g,`
`),y=y.replace(/\r/g,`
`),y=y.replace(/>[ \t]+</,">\xA8NBSP;<"),!D)if(window&&window.document)D=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var O=D.createElement("div");O.innerHTML=y;var L={preList:U(O)};X(O);for(var z=O.childNodes,F="",B=0;B<z.length;B++)F+=n.subParser("makeMarkdown.node")(z[B],L);function X($){for(var q=0;q<$.childNodes.length;++q){var Q=$.childNodes[q];Q.nodeType===3?!/\S/.test(Q.nodeValue)&&!/^[ ]+$/.test(Q.nodeValue)?($.removeChild(Q),--q):(Q.nodeValue=Q.nodeValue.split(`
`).join(" "),Q.nodeValue=Q.nodeValue.replace(/(\s)+/g,"$1")):Q.nodeType===1&&X(Q)}}function U($){for(var q=$.querySelectorAll("pre"),Q=[],J=0;J<q.length;++J)if(q[J].childElementCount===1&&q[J].firstChild.tagName.toLowerCase()==="code"){var ge=q[J].firstChild.innerHTML.trim(),Me=q[J].firstChild.getAttribute("data-language")||"";if(Me==="")for(var Fe=q[J].firstChild.className.split(" "),Ke=0;Ke<Fe.length;++Ke){var De=Fe[Ke].match(/^language-(.+)$/);if(De!==null){Me=De[1];break}}ge=n.helper.unescapeHTMLEntities(ge),Q.push(ge),q[J].outerHTML='<precode language="'+Me+'" precodenum="'+J.toString()+'"></precode>'}else Q.push(q[J].innerHTML),q[J].innerHTML="",q[J].setAttribute("prenum",J.toString());return Q}return F},this.setOption=function(y,D){d[y]=D},this.getOption=function(y){return d[y]},this.getOptions=function(){return d},this.addExtension=function(y,D){D=D||null,P(y,D)},this.useExtension=function(y){P(y)},this.setFlavor=function(y){if(!c.hasOwnProperty(y))throw Error(y+" flavor was not found");var D=c[y];S=y;for(var O in D)D.hasOwnProperty(O)&&(d[O]=D[O])},this.getFlavor=function(){return S},this.removeExtension=function(y){n.helper.isArray(y)||(y=[y]);for(var D=0;D<y.length;++D){for(var O=y[D],L=0;L<f.length;++L)f[L]===O&&f.splice(L,1);for(var z=0;z<x.length;++z)x[z]===O&&x.splice(z,1)}},this.getAllExtensions=function(){return{language:f,output:x}},this.getMetadata=function(y){return y?E.raw:E.parsed},this.getMetadataFormat=function(){return E.format},this._setMetadataPair=function(y,D){E.parsed[y]=D},this._setMetadataFormat=function(y){E.format=y},this._setMetadataRaw=function(y){E.raw=y}},n.subParser("anchors",function(o,d,f){o=f.converter._dispatch("anchors.before",o,d,f);var x=function(j,S,E,k,P,R,T){if(n.helper.isUndefined(T)&&(T=""),E=E.toLowerCase(),j.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)k="";else if(!k)if(E||(E=S.toLowerCase().replace(/ ?\n/g," ")),k="#"+E,!n.helper.isUndefined(f.gUrls[E]))k=f.gUrls[E],n.helper.isUndefined(f.gTitles[E])||(T=f.gTitles[E]);else return j;k=k.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback);var M='<a href="'+k+'"';return T!==""&&T!==null&&(T=T.replace(/"/g,"&quot;"),T=T.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback),M+=' title="'+T+'"'),d.openLinksInNewWindow&&!/^#/.test(k)&&(M+=' rel="noopener noreferrer" target="\xA8E95Eblank"'),M+=">"+S+"</a>",M};return o=o.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,x),o=o.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,x),o=o.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,x),o=o.replace(/\[([^\[\]]+)]()()()()()/g,x),d.ghMentions&&(o=o.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(j,S,E,k,P){if(E==="\\")return S+k;if(!n.helper.isString(d.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var R=d.ghMentionsLink.replace(/\{u}/g,P),T="";return d.openLinksInNewWindow&&(T=' rel="noopener noreferrer" target="\xA8E95Eblank"'),S+'<a href="'+R+'"'+T+">"+k+"</a>"})),o=f.converter._dispatch("anchors.after",o,d,f),o});var w=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,C=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,b=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,g=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,_=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,I=function(o){return function(d,f,x,j,S,E,k){x=x.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback);var P=x,R="",T="",M=f||"",y=k||"";return/^www\./i.test(x)&&(x=x.replace(/^www\./i,"http://www.")),o.excludeTrailingPunctuationFromURLs&&E&&(R=E),o.openLinksInNewWindow&&(T=' rel="noopener noreferrer" target="\xA8E95Eblank"'),M+'<a href="'+x+'"'+T+">"+P+"</a>"+R+y}},N=function(o,d){return function(f,x,j){var S="mailto:";return x=x||"",j=n.subParser("unescapeSpecialChars")(j,o,d),o.encodeEmails?(S=n.helper.encodeEmailAddress(S+j),j=n.helper.encodeEmailAddress(j)):S=S+j,x+'<a href="'+S+'">'+j+"</a>"}};n.subParser("autoLinks",function(o,d,f){return o=f.converter._dispatch("autoLinks.before",o,d,f),o=o.replace(b,I(d)),o=o.replace(_,N(d,f)),o=f.converter._dispatch("autoLinks.after",o,d,f),o}),n.subParser("simplifiedAutoLinks",function(o,d,f){return d.simplifiedAutoLink&&(o=f.converter._dispatch("simplifiedAutoLinks.before",o,d,f),d.excludeTrailingPunctuationFromURLs?o=o.replace(C,I(d)):o=o.replace(w,I(d)),o=o.replace(g,N(d,f)),o=f.converter._dispatch("simplifiedAutoLinks.after",o,d,f)),o}),n.subParser("blockGamut",function(o,d,f){return o=f.converter._dispatch("blockGamut.before",o,d,f),o=n.subParser("blockQuotes")(o,d,f),o=n.subParser("headers")(o,d,f),o=n.subParser("horizontalRule")(o,d,f),o=n.subParser("lists")(o,d,f),o=n.subParser("codeBlocks")(o,d,f),o=n.subParser("tables")(o,d,f),o=n.subParser("hashHTMLBlocks")(o,d,f),o=n.subParser("paragraphs")(o,d,f),o=f.converter._dispatch("blockGamut.after",o,d,f),o}),n.subParser("blockQuotes",function(o,d,f){o=f.converter._dispatch("blockQuotes.before",o,d,f),o=o+`

`;var x=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return d.splitAdjacentBlockquotes&&(x=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),o=o.replace(x,function(j){return j=j.replace(/^[ \t]*>[ \t]?/gm,""),j=j.replace(/0/g,""),j=j.replace(/^[ \t]+$/gm,""),j=n.subParser("githubCodeBlocks")(j,d,f),j=n.subParser("blockGamut")(j,d,f),j=j.replace(/(^|\n)/g,"$1  "),j=j.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(S,E){var k=E;return k=k.replace(/^  /mg,"\xA80"),k=k.replace(/0/g,""),k}),n.subParser("hashBlock")(`<blockquote>
`+j+`
</blockquote>`,d,f)}),o=f.converter._dispatch("blockQuotes.after",o,d,f),o}),n.subParser("codeBlocks",function(o,d,f){o=f.converter._dispatch("codeBlocks.before",o,d,f),o+="\xA80";var x=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return o=o.replace(x,function(j,S,E){var k=S,P=E,R=`
`;return k=n.subParser("outdent")(k,d,f),k=n.subParser("encodeCode")(k,d,f),k=n.subParser("detab")(k,d,f),k=k.replace(/^\n+/g,""),k=k.replace(/\n+$/g,""),d.omitExtraWLInCodeBlocks&&(R=""),k="<pre><code>"+k+R+"</code></pre>",n.subParser("hashBlock")(k,d,f)+P}),o=o.replace(/0/,""),o=f.converter._dispatch("codeBlocks.after",o,d,f),o}),n.subParser("codeSpans",function(o,d,f){return o=f.converter._dispatch("codeSpans.before",o,d,f),typeof o>"u"&&(o=""),o=o.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(x,j,S,E){var k=E;return k=k.replace(/^([ \t]*)/g,""),k=k.replace(/[ \t]*$/g,""),k=n.subParser("encodeCode")(k,d,f),k=j+"<code>"+k+"</code>",k=n.subParser("hashHTMLSpans")(k,d,f),k}),o=f.converter._dispatch("codeSpans.after",o,d,f),o}),n.subParser("completeHTMLDocument",function(o,d,f){if(!d.completeHTMLDocument)return o;o=f.converter._dispatch("completeHTMLDocument.before",o,d,f);var x="html",j=`<!DOCTYPE HTML>
`,S="",E=`<meta charset="utf-8">
`,k="",P="";typeof f.metadata.parsed.doctype<"u"&&(j="<!DOCTYPE "+f.metadata.parsed.doctype+`>
`,x=f.metadata.parsed.doctype.toString().toLowerCase(),(x==="html"||x==="html5")&&(E='<meta charset="utf-8">'));for(var R in f.metadata.parsed)if(f.metadata.parsed.hasOwnProperty(R))switch(R.toLowerCase()){case"doctype":break;case"title":S="<title>"+f.metadata.parsed.title+`</title>
`;break;case"charset":x==="html"||x==="html5"?E='<meta charset="'+f.metadata.parsed.charset+`">
`:E='<meta name="charset" content="'+f.metadata.parsed.charset+`">
`;break;case"language":case"lang":k=' lang="'+f.metadata.parsed[R]+'"',P+='<meta name="'+R+'" content="'+f.metadata.parsed[R]+`">
`;break;default:P+='<meta name="'+R+'" content="'+f.metadata.parsed[R]+`">
`}return o=j+"<html"+k+`>
<head>
`+S+E+P+`</head>
<body>
`+o.trim()+`
</body>
</html>`,o=f.converter._dispatch("completeHTMLDocument.after",o,d,f),o}),n.subParser("detab",function(o,d,f){return o=f.converter._dispatch("detab.before",o,d,f),o=o.replace(/\t(?=\t)/g,"    "),o=o.replace(/\t/g,"\xA8A\xA8B"),o=o.replace(/B(.+?)A/g,function(x,j){for(var S=j,E=4-S.length%4,k=0;k<E;k++)S+=" ";return S}),o=o.replace(/A/g,"    "),o=o.replace(/B/g,""),o=f.converter._dispatch("detab.after",o,d,f),o}),n.subParser("ellipsis",function(o,d,f){return d.ellipsis&&(o=f.converter._dispatch("ellipsis.before",o,d,f),o=o.replace(/\.\.\./g,"\u2026"),o=f.converter._dispatch("ellipsis.after",o,d,f)),o}),n.subParser("emoji",function(o,d,f){if(!d.emoji)return o;o=f.converter._dispatch("emoji.before",o,d,f);var x=/:([\S]+?):/g;return o=o.replace(x,function(j,S){return n.helper.emojis.hasOwnProperty(S)?n.helper.emojis[S]:j}),o=f.converter._dispatch("emoji.after",o,d,f),o}),n.subParser("encodeAmpsAndAngles",function(o,d,f){return o=f.converter._dispatch("encodeAmpsAndAngles.before",o,d,f),o=o.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),o=o.replace(/<(?![a-z\/?$!])/gi,"&lt;"),o=o.replace(/</g,"&lt;"),o=o.replace(/>/g,"&gt;"),o=f.converter._dispatch("encodeAmpsAndAngles.after",o,d,f),o}),n.subParser("encodeBackslashEscapes",function(o,d,f){return o=f.converter._dispatch("encodeBackslashEscapes.before",o,d,f),o=o.replace(/\\(\\)/g,n.helper.escapeCharactersCallback),o=o.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,n.helper.escapeCharactersCallback),o=f.converter._dispatch("encodeBackslashEscapes.after",o,d,f),o}),n.subParser("encodeCode",function(o,d,f){return o=f.converter._dispatch("encodeCode.before",o,d,f),o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,n.helper.escapeCharactersCallback),o=f.converter._dispatch("encodeCode.after",o,d,f),o}),n.subParser("escapeSpecialCharsWithinTagAttributes",function(o,d,f){o=f.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",o,d,f);var x=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,j=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return o=o.replace(x,function(S){return S.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,n.helper.escapeCharactersCallback)}),o=o.replace(j,function(S){return S.replace(/([\\`*_~=|])/g,n.helper.escapeCharactersCallback)}),o=f.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",o,d,f),o}),n.subParser("githubCodeBlocks",function(o,d,f){return d.ghCodeBlocks?(o=f.converter._dispatch("githubCodeBlocks.before",o,d,f),o+="\xA80",o=o.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(x,j,S,E){var k=d.omitExtraWLInCodeBlocks?"":`
`;return E=n.subParser("encodeCode")(E,d,f),E=n.subParser("detab")(E,d,f),E=E.replace(/^\n+/g,""),E=E.replace(/\n+$/g,""),E="<pre><code"+(S?' class="'+S+" language-"+S+'"':"")+">"+E+k+"</code></pre>",E=n.subParser("hashBlock")(E,d,f),`

\xA8G`+(f.ghCodeBlocks.push({text:x,codeblock:E})-1)+`G

`}),o=o.replace(/0/,""),f.converter._dispatch("githubCodeBlocks.after",o,d,f)):o}),n.subParser("hashBlock",function(o,d,f){return o=f.converter._dispatch("hashBlock.before",o,d,f),o=o.replace(/(^\n+|\n+$)/g,""),o=`

\xA8K`+(f.gHtmlBlocks.push(o)-1)+`K

`,o=f.converter._dispatch("hashBlock.after",o,d,f),o}),n.subParser("hashCodeTags",function(o,d,f){o=f.converter._dispatch("hashCodeTags.before",o,d,f);var x=function(j,S,E,k){var P=E+n.subParser("encodeCode")(S,d,f)+k;return"\xA8C"+(f.gHtmlSpans.push(P)-1)+"C"};return o=n.helper.replaceRecursiveRegExp(o,x,"<code\\b[^>]*>","</code>","gim"),o=f.converter._dispatch("hashCodeTags.after",o,d,f),o}),n.subParser("hashElement",function(o,d,f){return function(x,j){var S=j;return S=S.replace(/\n\n/g,`
`),S=S.replace(/^\n/,""),S=S.replace(/\n+$/g,""),S=`

\xA8K`+(f.gHtmlBlocks.push(S)-1)+`K

`,S}}),n.subParser("hashHTMLBlocks",function(o,d,f){o=f.converter._dispatch("hashHTMLBlocks.before",o,d,f);var x=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],j=function(y,D,O,L){var z=y;return O.search(/\bmarkdown\b/)!==-1&&(z=O+f.converter.makeHtml(D)+L),`

\xA8K`+(f.gHtmlBlocks.push(z)-1)+`K

`};d.backslashEscapesHTMLTags&&(o=o.replace(/\\<(\/?[^>]+?)>/g,function(y,D){return"&lt;"+D+"&gt;"}));for(var S=0;S<x.length;++S)for(var E,k=new RegExp("^ {0,3}(<"+x[S]+"\\b[^>]*>)","im"),P="<"+x[S]+"\\b[^>]*>",R="</"+x[S]+">";(E=n.helper.regexIndexOf(o,k))!==-1;){var T=n.helper.splitAtIndex(o,E),M=n.helper.replaceRecursiveRegExp(T[1],j,P,R,"im");if(M===T[1])break;o=T[0].concat(M)}return o=o.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,n.subParser("hashElement")(o,d,f)),o=n.helper.replaceRecursiveRegExp(o,function(y){return`

\xA8K`+(f.gHtmlBlocks.push(y)-1)+`K

`},"^ {0,3}<!--","-->","gm"),o=o.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,n.subParser("hashElement")(o,d,f)),o=f.converter._dispatch("hashHTMLBlocks.after",o,d,f),o}),n.subParser("hashHTMLSpans",function(o,d,f){o=f.converter._dispatch("hashHTMLSpans.before",o,d,f);function x(j){return"\xA8C"+(f.gHtmlSpans.push(j)-1)+"C"}return o=o.replace(/<[^>]+?\/>/gi,function(j){return x(j)}),o=o.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(j){return x(j)}),o=o.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(j){return x(j)}),o=o.replace(/<[^>]+?>/gi,function(j){return x(j)}),o=f.converter._dispatch("hashHTMLSpans.after",o,d,f),o}),n.subParser("unhashHTMLSpans",function(o,d,f){o=f.converter._dispatch("unhashHTMLSpans.before",o,d,f);for(var x=0;x<f.gHtmlSpans.length;++x){for(var j=f.gHtmlSpans[x],S=0;/C(\d+)C/.test(j);){var E=RegExp.$1;if(j=j.replace("\xA8C"+E+"C",f.gHtmlSpans[E]),S===10){console.error("maximum nesting of 10 spans reached!!!");break}++S}o=o.replace("\xA8C"+x+"C",j)}return o=f.converter._dispatch("unhashHTMLSpans.after",o,d,f),o}),n.subParser("hashPreCodeTags",function(o,d,f){o=f.converter._dispatch("hashPreCodeTags.before",o,d,f);var x=function(j,S,E,k){var P=E+n.subParser("encodeCode")(S,d,f)+k;return`

\xA8G`+(f.ghCodeBlocks.push({text:j,codeblock:P})-1)+`G

`};return o=n.helper.replaceRecursiveRegExp(o,x,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),o=f.converter._dispatch("hashPreCodeTags.after",o,d,f),o}),n.subParser("headers",function(o,d,f){o=f.converter._dispatch("headers.before",o,d,f);var x=isNaN(parseInt(d.headerLevelStart))?1:parseInt(d.headerLevelStart),j=d.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,S=d.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;o=o.replace(j,function(P,R){var T=n.subParser("spanGamut")(R,d,f),M=d.noHeaderId?"":' id="'+k(R)+'"',y=x,D="<h"+y+M+">"+T+"</h"+y+">";return n.subParser("hashBlock")(D,d,f)}),o=o.replace(S,function(P,R){var T=n.subParser("spanGamut")(R,d,f),M=d.noHeaderId?"":' id="'+k(R)+'"',y=x+1,D="<h"+y+M+">"+T+"</h"+y+">";return n.subParser("hashBlock")(D,d,f)});var E=d.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;o=o.replace(E,function(P,R,T){var M=T;d.customizedHeaderId&&(M=T.replace(/\s?\{([^{]+?)}\s*$/,""));var y=n.subParser("spanGamut")(M,d,f),D=d.noHeaderId?"":' id="'+k(T)+'"',O=x-1+R.length,L="<h"+O+D+">"+y+"</h"+O+">";return n.subParser("hashBlock")(L,d,f)});function k(P){var R,T;if(d.customizedHeaderId){var M=P.match(/\{([^{]+?)}\s*$/);M&&M[1]&&(P=M[1])}return R=P,n.helper.isString(d.prefixHeaderId)?T=d.prefixHeaderId:d.prefixHeaderId===!0?T="section-":T="",d.rawPrefixHeaderId||(R=T+R),d.ghCompatibleHeaderId?R=R.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():d.rawHeaderId?R=R.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"\xA8").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():R=R.replace(/[^\w]/g,"").toLowerCase(),d.rawPrefixHeaderId&&(R=T+R),f.hashLinkCounts[R]?R=R+"-"+f.hashLinkCounts[R]++:f.hashLinkCounts[R]=1,R}return o=f.converter._dispatch("headers.after",o,d,f),o}),n.subParser("horizontalRule",function(o,d,f){o=f.converter._dispatch("horizontalRule.before",o,d,f);var x=n.subParser("hashBlock")("<hr />",d,f);return o=o.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,x),o=o.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,x),o=o.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,x),o=f.converter._dispatch("horizontalRule.after",o,d,f),o}),n.subParser("images",function(o,d,f){o=f.converter._dispatch("images.before",o,d,f);var x=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,j=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,S=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,E=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,k=/!\[([^\[\]]+)]()()()()()/g;function P(T,M,y,D,O,L,z,F){return D=D.replace(/\s/g,""),R(T,M,y,D,O,L,z,F)}function R(T,M,y,D,O,L,z,F){var B=f.gUrls,X=f.gTitles,U=f.gDimensions;if(y=y.toLowerCase(),F||(F=""),T.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)D="";else if(D===""||D===null)if((y===""||y===null)&&(y=M.toLowerCase().replace(/ ?\n/g," ")),D="#"+y,!n.helper.isUndefined(B[y]))D=B[y],n.helper.isUndefined(X[y])||(F=X[y]),n.helper.isUndefined(U[y])||(O=U[y].width,L=U[y].height);else return T;M=M.replace(/"/g,"&quot;").replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback),D=D.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback);var $='<img src="'+D+'" alt="'+M+'"';return F&&n.helper.isString(F)&&(F=F.replace(/"/g,"&quot;").replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback),$+=' title="'+F+'"'),O&&L&&(O=O==="*"?"auto":O,L=L==="*"?"auto":L,$+=' width="'+O+'"',$+=' height="'+L+'"'),$+=" />",$}return o=o.replace(E,R),o=o.replace(S,P),o=o.replace(j,R),o=o.replace(x,R),o=o.replace(k,R),o=f.converter._dispatch("images.after",o,d,f),o}),n.subParser("italicsAndBold",function(o,d,f){o=f.converter._dispatch("italicsAndBold.before",o,d,f);function x(j,S,E){return S+j+E}return d.literalMidWordUnderscores?(o=o.replace(/\b___(\S[\s\S]*?)___\b/g,function(j,S){return x(S,"<strong><em>","</em></strong>")}),o=o.replace(/\b__(\S[\s\S]*?)__\b/g,function(j,S){return x(S,"<strong>","</strong>")}),o=o.replace(/\b_(\S[\s\S]*?)_\b/g,function(j,S){return x(S,"<em>","</em>")})):(o=o.replace(/___(\S[\s\S]*?)___/g,function(j,S){return/\S$/.test(S)?x(S,"<strong><em>","</em></strong>"):j}),o=o.replace(/__(\S[\s\S]*?)__/g,function(j,S){return/\S$/.test(S)?x(S,"<strong>","</strong>"):j}),o=o.replace(/_([^\s_][\s\S]*?)_/g,function(j,S){return/\S$/.test(S)?x(S,"<em>","</em>"):j})),d.literalMidWordAsterisks?(o=o.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(j,S,E){return x(E,S+"<strong><em>","</em></strong>")}),o=o.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(j,S,E){return x(E,S+"<strong>","</strong>")}),o=o.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(j,S,E){return x(E,S+"<em>","</em>")})):(o=o.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(j,S){return/\S$/.test(S)?x(S,"<strong><em>","</em></strong>"):j}),o=o.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(j,S){return/\S$/.test(S)?x(S,"<strong>","</strong>"):j}),o=o.replace(/\*([^\s*][\s\S]*?)\*/g,function(j,S){return/\S$/.test(S)?x(S,"<em>","</em>"):j})),o=f.converter._dispatch("italicsAndBold.after",o,d,f),o}),n.subParser("lists",function(o,d,f){function x(E,k){f.gListLevel++,E=E.replace(/\n{2,}$/,`
`),E+="\xA80";var P=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,R=/\n[ \t]*\n(?!0)/.test(E);return d.disableForced4SpacesIndentedSublists&&(P=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),E=E.replace(P,function(T,M,y,D,O,L,z){z=z&&z.trim()!=="";var F=n.subParser("outdent")(O,d,f),B="";return L&&d.tasklists&&(B=' class="task-list-item" style="list-style-type: none;"',F=F.replace(/^[ \t]*\[(x|X| )?]/m,function(){var X='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return z&&(X+=" checked"),X+=">",X})),F=F.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(X){return"\xA8A"+X}),M||F.search(/\n{2,}/)>-1?(F=n.subParser("githubCodeBlocks")(F,d,f),F=n.subParser("blockGamut")(F,d,f)):(F=n.subParser("lists")(F,d,f),F=F.replace(/\n$/,""),F=n.subParser("hashHTMLBlocks")(F,d,f),F=F.replace(/\n\n+/g,`

`),R?F=n.subParser("paragraphs")(F,d,f):F=n.subParser("spanGamut")(F,d,f)),F=F.replace("\xA8A",""),F="<li"+B+">"+F+`</li>
`,F}),E=E.replace(/0/g,""),f.gListLevel--,k&&(E=E.replace(/\s+$/,"")),E}function j(E,k){if(k==="ol"){var P=E.match(/^ *(\d+)\./);if(P&&P[1]!=="1")return' start="'+P[1]+'"'}return""}function S(E,k,P){var R=d.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,T=d.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,M=k==="ul"?R:T,y="";if(E.search(M)!==-1)(function O(L){var z=L.search(M),F=j(E,k);z!==-1?(y+=`

<`+k+F+`>
`+x(L.slice(0,z),!!P)+"</"+k+`>
`,k=k==="ul"?"ol":"ul",M=k==="ul"?R:T,O(L.slice(z))):y+=`

<`+k+F+`>
`+x(L,!!P)+"</"+k+`>
`})(E);else{var D=j(E,k);y=`

<`+k+D+`>
`+x(E,!!P)+"</"+k+`>
`}return y}return o=f.converter._dispatch("lists.before",o,d,f),o+="\xA80",f.gListLevel?o=o.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(E,k,P){var R=P.search(/[*+-]/g)>-1?"ul":"ol";return S(k,R,!0)}):o=o.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(E,k,P,R){var T=R.search(/[*+-]/g)>-1?"ul":"ol";return S(P,T,!1)}),o=o.replace(/0/,""),o=f.converter._dispatch("lists.after",o,d,f),o}),n.subParser("metadata",function(o,d,f){if(!d.metadata)return o;o=f.converter._dispatch("metadata.before",o,d,f);function x(j){f.metadata.raw=j,j=j.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),j=j.replace(/\n {4}/g," "),j.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(S,E,k){return f.metadata.parsed[E]=k,""})}return o=o.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(j,S,E){return x(E),"\xA8M"}),o=o.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(j,S,E){return S&&(f.metadata.format=S),x(E),"\xA8M"}),o=o.replace(/M/g,""),o=f.converter._dispatch("metadata.after",o,d,f),o}),n.subParser("outdent",function(o,d,f){return o=f.converter._dispatch("outdent.before",o,d,f),o=o.replace(/^(\t|[ ]{1,4})/gm,"\xA80"),o=o.replace(/0/g,""),o=f.converter._dispatch("outdent.after",o,d,f),o}),n.subParser("paragraphs",function(o,d,f){o=f.converter._dispatch("paragraphs.before",o,d,f),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,"");for(var x=o.split(/\n{2,}/g),j=[],S=x.length,E=0;E<S;E++){var k=x[E];k.search(/(K|G)(\d+)\1/g)>=0?j.push(k):k.search(/\S/)>=0&&(k=n.subParser("spanGamut")(k,d,f),k=k.replace(/^([ \t]*)/g,"<p>"),k+="</p>",j.push(k))}for(S=j.length,E=0;E<S;E++){for(var P="",R=j[E],T=!1;/(K|G)(\d+)\1/.test(R);){var M=RegExp.$1,y=RegExp.$2;M==="K"?P=f.gHtmlBlocks[y]:T?P=n.subParser("encodeCode")(f.ghCodeBlocks[y].text,d,f):P=f.ghCodeBlocks[y].codeblock,P=P.replace(/\$/g,"$$$$"),R=R.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,P),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(R)&&(T=!0)}j[E]=R}return o=j.join(`
`),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,""),f.converter._dispatch("paragraphs.after",o,d,f)}),n.subParser("runExtension",function(o,d,f,x){if(o.filter)d=o.filter(d,x.converter,f);else if(o.regex){var j=o.regex;j instanceof RegExp||(j=new RegExp(j,"g")),d=d.replace(j,o.replace)}return d}),n.subParser("spanGamut",function(o,d,f){return o=f.converter._dispatch("spanGamut.before",o,d,f),o=n.subParser("codeSpans")(o,d,f),o=n.subParser("escapeSpecialCharsWithinTagAttributes")(o,d,f),o=n.subParser("encodeBackslashEscapes")(o,d,f),o=n.subParser("images")(o,d,f),o=n.subParser("anchors")(o,d,f),o=n.subParser("autoLinks")(o,d,f),o=n.subParser("simplifiedAutoLinks")(o,d,f),o=n.subParser("emoji")(o,d,f),o=n.subParser("underline")(o,d,f),o=n.subParser("italicsAndBold")(o,d,f),o=n.subParser("strikethrough")(o,d,f),o=n.subParser("ellipsis")(o,d,f),o=n.subParser("hashHTMLSpans")(o,d,f),o=n.subParser("encodeAmpsAndAngles")(o,d,f),d.simpleLineBreaks?/\n\nK/.test(o)||(o=o.replace(/\n+/g,`<br />
`)):o=o.replace(/  +\n/g,`<br />
`),o=f.converter._dispatch("spanGamut.after",o,d,f),o}),n.subParser("strikethrough",function(o,d,f){function x(j){return d.simplifiedAutoLink&&(j=n.subParser("simplifiedAutoLinks")(j,d,f)),"<del>"+j+"</del>"}return d.strikethrough&&(o=f.converter._dispatch("strikethrough.before",o,d,f),o=o.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(j,S){return x(S)}),o=f.converter._dispatch("strikethrough.after",o,d,f)),o}),n.subParser("stripLinkDefinitions",function(o,d,f){var x=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,j=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;o+="\xA80";var S=function(E,k,P,R,T,M,y){return k=k.toLowerCase(),o.toLowerCase().split(k).length-1<2?E:(P.match(/^data:.+?\/.+?;base64,/)?f.gUrls[k]=P.replace(/\s/g,""):f.gUrls[k]=n.subParser("encodeAmpsAndAngles")(P,d,f),M?M+y:(y&&(f.gTitles[k]=y.replace(/"|'/g,"&quot;")),d.parseImgDimensions&&R&&T&&(f.gDimensions[k]={width:R,height:T}),""))};return o=o.replace(j,S),o=o.replace(x,S),o=o.replace(/0/,""),o}),n.subParser("tables",function(o,d,f){if(!d.tables)return o;var x=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,j=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function S(T){return/^:[ \t]*--*$/.test(T)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(T)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(T)?' style="text-align:center;"':""}function E(T,M){var y="";return T=T.trim(),(d.tablesHeaderId||d.tableHeaderId)&&(y=' id="'+T.replace(/ /g,"_").toLowerCase()+'"'),T=n.subParser("spanGamut")(T,d,f),"<th"+y+M+">"+T+`</th>
`}function k(T,M){var y=n.subParser("spanGamut")(T,d,f);return"<td"+M+">"+y+`</td>
`}function P(T,M){for(var y=`<table>
<thead>
<tr>
`,D=T.length,O=0;O<D;++O)y+=T[O];for(y+=`</tr>
</thead>
<tbody>
`,O=0;O<M.length;++O){y+=`<tr>
`;for(var L=0;L<D;++L)y+=M[O][L];y+=`</tr>
`}return y+=`</tbody>
</table>
`,y}function R(T){var M,y=T.split(`
`);for(M=0;M<y.length;++M)/^ {0,3}\|/.test(y[M])&&(y[M]=y[M].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(y[M])&&(y[M]=y[M].replace(/\|[ \t]*$/,"")),y[M]=n.subParser("codeSpans")(y[M],d,f);var D=y[0].split("|").map(function($){return $.trim()}),O=y[1].split("|").map(function($){return $.trim()}),L=[],z=[],F=[],B=[];for(y.shift(),y.shift(),M=0;M<y.length;++M)y[M].trim()!==""&&L.push(y[M].split("|").map(function($){return $.trim()}));if(D.length<O.length)return T;for(M=0;M<O.length;++M)F.push(S(O[M]));for(M=0;M<D.length;++M)n.helper.isUndefined(F[M])&&(F[M]=""),z.push(E(D[M],F[M]));for(M=0;M<L.length;++M){for(var X=[],U=0;U<z.length;++U)n.helper.isUndefined(L[M][U]),X.push(k(L[M][U],F[U]));B.push(X)}return P(z,B)}return o=f.converter._dispatch("tables.before",o,d,f),o=o.replace(/\\(\|)/g,n.helper.escapeCharactersCallback),o=o.replace(x,R),o=o.replace(j,R),o=f.converter._dispatch("tables.after",o,d,f),o}),n.subParser("underline",function(o,d,f){return d.underline&&(o=f.converter._dispatch("underline.before",o,d,f),d.literalMidWordUnderscores?(o=o.replace(/\b___(\S[\s\S]*?)___\b/g,function(x,j){return"<u>"+j+"</u>"}),o=o.replace(/\b__(\S[\s\S]*?)__\b/g,function(x,j){return"<u>"+j+"</u>"})):(o=o.replace(/___(\S[\s\S]*?)___/g,function(x,j){return/\S$/.test(j)?"<u>"+j+"</u>":x}),o=o.replace(/__(\S[\s\S]*?)__/g,function(x,j){return/\S$/.test(j)?"<u>"+j+"</u>":x})),o=o.replace(/(_)/g,n.helper.escapeCharactersCallback),o=f.converter._dispatch("underline.after",o,d,f)),o}),n.subParser("unescapeSpecialChars",function(o,d,f){return o=f.converter._dispatch("unescapeSpecialChars.before",o,d,f),o=o.replace(/E(\d+)E/g,function(x,j){var S=parseInt(j);return String.fromCharCode(S)}),o=f.converter._dispatch("unescapeSpecialChars.after",o,d,f),o}),n.subParser("makeMarkdown.blockquote",function(o,d){var f="";if(o.hasChildNodes())for(var x=o.childNodes,j=x.length,S=0;S<j;++S){var E=n.subParser("makeMarkdown.node")(x[S],d);E!==""&&(f+=E)}return f=f.trim(),f="> "+f.split(`
`).join(`
> `),f}),n.subParser("makeMarkdown.codeBlock",function(o,d){var f=o.getAttribute("language"),x=o.getAttribute("precodenum");return"```"+f+`
`+d.preList[x]+"\n```"}),n.subParser("makeMarkdown.codeSpan",function(o){return"`"+o.innerHTML+"`"}),n.subParser("makeMarkdown.emphasis",function(o,d){var f="";if(o.hasChildNodes()){f+="*";for(var x=o.childNodes,j=x.length,S=0;S<j;++S)f+=n.subParser("makeMarkdown.node")(x[S],d);f+="*"}return f}),n.subParser("makeMarkdown.header",function(o,d,f){var x=new Array(f+1).join("#"),j="";if(o.hasChildNodes()){j=x+" ";for(var S=o.childNodes,E=S.length,k=0;k<E;++k)j+=n.subParser("makeMarkdown.node")(S[k],d)}return j}),n.subParser("makeMarkdown.hr",function(){return"---"}),n.subParser("makeMarkdown.image",function(o){var d="";return o.hasAttribute("src")&&(d+="!["+o.getAttribute("alt")+"](",d+="<"+o.getAttribute("src")+">",o.hasAttribute("width")&&o.hasAttribute("height")&&(d+=" ="+o.getAttribute("width")+"x"+o.getAttribute("height")),o.hasAttribute("title")&&(d+=' "'+o.getAttribute("title")+'"'),d+=")"),d}),n.subParser("makeMarkdown.links",function(o,d){var f="";if(o.hasChildNodes()&&o.hasAttribute("href")){var x=o.childNodes,j=x.length;f="[";for(var S=0;S<j;++S)f+=n.subParser("makeMarkdown.node")(x[S],d);f+="](",f+="<"+o.getAttribute("href")+">",o.hasAttribute("title")&&(f+=' "'+o.getAttribute("title")+'"'),f+=")"}return f}),n.subParser("makeMarkdown.list",function(o,d,f){var x="";if(!o.hasChildNodes())return"";for(var j=o.childNodes,S=j.length,E=o.getAttribute("start")||1,k=0;k<S;++k)if(!(typeof j[k].tagName>"u"||j[k].tagName.toLowerCase()!=="li")){var P="";f==="ol"?P=E.toString()+". ":P="- ",x+=P+n.subParser("makeMarkdown.listItem")(j[k],d),++E}return x+=`
<!-- -->
`,x.trim()}),n.subParser("makeMarkdown.listItem",function(o,d){for(var f="",x=o.childNodes,j=x.length,S=0;S<j;++S)f+=n.subParser("makeMarkdown.node")(x[S],d);return/\n$/.test(f)?f=f.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):f+=`
`,f}),n.subParser("makeMarkdown.node",function(o,d,f){f=f||!1;var x="";if(o.nodeType===3)return n.subParser("makeMarkdown.txt")(o,d);if(o.nodeType===8)return"<!--"+o.data+`-->

`;if(o.nodeType!==1)return"";var j=o.tagName.toLowerCase();switch(j){case"h1":f||(x=n.subParser("makeMarkdown.header")(o,d,1)+`

`);break;case"h2":f||(x=n.subParser("makeMarkdown.header")(o,d,2)+`

`);break;case"h3":f||(x=n.subParser("makeMarkdown.header")(o,d,3)+`

`);break;case"h4":f||(x=n.subParser("makeMarkdown.header")(o,d,4)+`

`);break;case"h5":f||(x=n.subParser("makeMarkdown.header")(o,d,5)+`

`);break;case"h6":f||(x=n.subParser("makeMarkdown.header")(o,d,6)+`

`);break;case"p":f||(x=n.subParser("makeMarkdown.paragraph")(o,d)+`

`);break;case"blockquote":f||(x=n.subParser("makeMarkdown.blockquote")(o,d)+`

`);break;case"hr":f||(x=n.subParser("makeMarkdown.hr")(o,d)+`

`);break;case"ol":f||(x=n.subParser("makeMarkdown.list")(o,d,"ol")+`

`);break;case"ul":f||(x=n.subParser("makeMarkdown.list")(o,d,"ul")+`

`);break;case"precode":f||(x=n.subParser("makeMarkdown.codeBlock")(o,d)+`

`);break;case"pre":f||(x=n.subParser("makeMarkdown.pre")(o,d)+`

`);break;case"table":f||(x=n.subParser("makeMarkdown.table")(o,d)+`

`);break;case"code":x=n.subParser("makeMarkdown.codeSpan")(o,d);break;case"em":case"i":x=n.subParser("makeMarkdown.emphasis")(o,d);break;case"strong":case"b":x=n.subParser("makeMarkdown.strong")(o,d);break;case"del":x=n.subParser("makeMarkdown.strikethrough")(o,d);break;case"a":x=n.subParser("makeMarkdown.links")(o,d);break;case"img":x=n.subParser("makeMarkdown.image")(o,d);break;default:x=o.outerHTML+`

`}return x}),n.subParser("makeMarkdown.paragraph",function(o,d){var f="";if(o.hasChildNodes())for(var x=o.childNodes,j=x.length,S=0;S<j;++S)f+=n.subParser("makeMarkdown.node")(x[S],d);return f=f.trim(),f}),n.subParser("makeMarkdown.pre",function(o,d){var f=o.getAttribute("prenum");return"<pre>"+d.preList[f]+"</pre>"}),n.subParser("makeMarkdown.strikethrough",function(o,d){var f="";if(o.hasChildNodes()){f+="~~";for(var x=o.childNodes,j=x.length,S=0;S<j;++S)f+=n.subParser("makeMarkdown.node")(x[S],d);f+="~~"}return f}),n.subParser("makeMarkdown.strong",function(o,d){var f="";if(o.hasChildNodes()){f+="**";for(var x=o.childNodes,j=x.length,S=0;S<j;++S)f+=n.subParser("makeMarkdown.node")(x[S],d);f+="**"}return f}),n.subParser("makeMarkdown.table",function(o,d){var f="",x=[[],[]],j=o.querySelectorAll("thead>tr>th"),S=o.querySelectorAll("tbody>tr"),E,k;for(E=0;E<j.length;++E){var P=n.subParser("makeMarkdown.tableCell")(j[E],d),R="---";if(j[E].hasAttribute("style")){var T=j[E].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(T){case"text-align:left;":R=":---";break;case"text-align:right;":R="---:";break;case"text-align:center;":R=":---:";break}}x[0][E]=P.trim(),x[1][E]=R}for(E=0;E<S.length;++E){var M=x.push([])-1,y=S[E].getElementsByTagName("td");for(k=0;k<j.length;++k){var D=" ";typeof y[k]<"u"&&(D=n.subParser("makeMarkdown.tableCell")(y[k],d)),x[M].push(D)}}var O=3;for(E=0;E<x.length;++E)for(k=0;k<x[E].length;++k){var L=x[E][k].length;L>O&&(O=L)}for(E=0;E<x.length;++E){for(k=0;k<x[E].length;++k)E===1?x[E][k].slice(-1)===":"?x[E][k]=n.helper.padEnd(x[E][k].slice(-1),O-1,"-")+":":x[E][k]=n.helper.padEnd(x[E][k],O,"-"):x[E][k]=n.helper.padEnd(x[E][k],O);f+="| "+x[E].join(" | ")+` |
`}return f.trim()}),n.subParser("makeMarkdown.tableCell",function(o,d){var f="";if(!o.hasChildNodes())return"";for(var x=o.childNodes,j=x.length,S=0;S<j;++S)f+=n.subParser("makeMarkdown.node")(x[S],d,!0);return f.trim()}),n.subParser("makeMarkdown.txt",function(o){var d=o.nodeValue;return d=d.replace(/ +/g," "),d=d.replace(/NBSP;/g," "),d=n.helper.unescapeHTMLEntities(d),d=d.replace(/([*_~|`])/g,"\\$1"),d=d.replace(/^(\s*)>/g,"\\$1>"),d=d.replace(/^#/gm,"\\#"),d=d.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),d=d.replace(/^( {0,3}\d+)\./gm,"$1\\."),d=d.replace(/^( {0,3})([+-])/gm,"$1\\$2"),d=d.replace(/]([\s]*)\(/g,"\\]$1\\("),d=d.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),d});var A=this;e.exports?e.exports=n:A.showdown=n}).call(ie)})(Cs);var Vh=Cs.exports;const Gh=lr(Vh),qh=async e=>{if(!e)return;const t=e.join("");try{await navigator.clipboard.writeText(t)}catch(r){console.error("Failed to copy text: ",r)}},Wh=({sanitizedHTML:e,isLarge:t})=>{const r=p.useRef(null),n=()=>{const a=document.createElement("div");a.innerHTML=e;const i=a.querySelector("p");return i?i.outerHTML:""};return l.jsx("div",{ref:r,className:"guide-me-tooltip transition-all duration-200 ease-in-out overflow-hidden break-all",style:{maxHeight:"20px"},children:l.jsxs("div",{className:"guide-me-tooltip flex justify-center",children:[l.jsx("div",{className:"guide-me-tooltip",children:ko(n())}),t&&l.jsx("p",{className:"ml-1",children:"..."})]})})},Xh=({sanitizedHTML:e})=>{var r;const t=p.useRef(null);return l.jsx("div",{ref:t,className:"guide-me-tooltip transition-all duration-200 ease-in-out overflow-hidden",style:{maxHeight:`${(r=t==null?void 0:t.current)==null?void 0:r.scrollHeight}px`},children:ko(e)})},Yh=({sanitizedHTML:e,ghostRef:t})=>l.jsx("div",{ref:t,style:{position:"absolute",visibility:"hidden",height:"auto",overflow:"visible",maxHeight:"none"},children:ko(e)}),js=({keyboardSequenceAction:e,canEdit:t,showRecaptureButton:r,guideMePin:n})=>{const a=!e&&t&&r,i=!(n!=null&&n.recaptureEnabledForPublishing);return a?l.jsx("div",{className:"flex justify-center items-center gap-1",children:l.jsxs(ve,{children:[l.jsx(xe,{children:l.jsx(oe,{disabled:i,className:`
            guide-me-tooltip-button
          `,variant:"ghost",size:"small",theme:"dark",icon:kl,"aria-label":"Recapture step",onClick:()=>{chrome.runtime.sendMessage({messageType:"recapture"})}})}),l.jsx(ce,{side:"bottom",children:i?"Publish changes before recapturing.":"Recapture"})]})}):null},Kh=({guideMePin:e,onNextClick:t,handleAutoFillInput:r,isAiFallbackElement:n,canEdit:a,showRecaptureButton:i,...u})=>{var E;const[s,c]=p.useState(!1),[m,h]=p.useState(!1),v=p.useRef(null),w=p.useRef(null),[C,b]=p.useState(!1),[g,_]=p.useState(!1),I=new Gh.Converter,N=k=>k.replace(/\[\[(.*?)\]\]/g,"`$1`"),A=I.makeHtml(N(((E=e==null?void 0:e.document_metadata)==null?void 0:E.name)||""));let o=Ac.sanitize(A);o.includes("<code>enter</code>")&&(o=o.replace(/<code>enter<\/code>/g,"")),p.useEffect(()=>{b(!1)},[e.actionExternalId]),p.useLayoutEffect(()=>{const k=w.current;if(!k)return;const P=new ResizeObserver(R=>{const{height:T}=R[0].contentRect,M=T>60;_(y=>y!==M?M:y)});return P.observe(k),()=>{P.disconnect()}},[e.actionExternalId]),p.useLayoutEffect(()=>{const k=()=>{v.current&&requestAnimationFrame(()=>{if(!v.current)return;const P=v.current.getBoundingClientRect(),R=window.innerWidth<Math.ceil(P.right)+12,T=window.innerWidth-Math.ceil(P.x)-Math.ceil(P.width)*2-32-12>36,M=window.innerHeight<Math.ceil(P.bottom)+(g?12:0);!s&&R&&c(!0),s&&T&&c(!1),!m&&M&&h(!0),m&&!M&&h(!1)})};return k(),window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k)}},[s,e,e.document_metadata.id,g,m]);const d=p.useRef(null),f=()=>{const{activeElement:k}=document;k&&k.tagName==="INPUT"&&k.blur(),te("next_type_step_guide_me",{actionId:e.actionExternalId}),t==null||t()},x=(e==null?void 0:e.actionType)==="keyboard_sequence_action",j=x||g||n,S=()=>{var k;return m?C?`-${Number((k=w.current)==null?void 0:k.scrollHeight)-20}px`:"-30px":"0px"};return l.jsx(et,{children:l.jsx("div",{ref:v,style:{marginTop:S()},className:re("step-description container z-10 flex w-max max-w-[450px] items-center justify-center rounded-[11px] p-[1px] transition-opacity -mt-0.5 backdrop-blur-sm",{"mt-3":x,"relative right-full -mr-8":s&&x,"mx-3":(e==null?void 0:e.actionType)!=="keyboard_sequence_action","relative right-full":(e==null?void 0:e.actionType)!=="keyboard_sequence_action"&&s,"pointer-events-auto":!u.targetHovered||x,"opacity-0":u.targetHovered&&(e==null?void 0:e.actionType)!=="keyboard_sequence_action"}),children:l.jsx("div",{className:"flex h-full w-full items-start justify-center rounded-lg bg-slate-950/75 ring-1 ring-slate-950/75 border border-white/25 px-4 py-2 shadow-lg relative",children:l.jsxs("div",{className:re("guide-me-modal-html max-w-[330px] cursor-text text-sm font-medium leading-5 text-slate-100 group h-fit overflow-hidden",{"mt-1.5":x}),children:[l.jsx(Yh,{sanitizedHTML:o,ghostRef:w}),l.jsxs("div",{className:"flex flex-row gap-1 align-content-center items-center guide-me-tooltip",children:[!C&&l.jsx(Wh,{sanitizedHTML:o,isLarge:g}),C&&l.jsx(Xh,{sanitizedHTML:o}),!j&&l.jsx(js,{keyboardSequenceAction:x,canEdit:a,showRecaptureButton:i,guideMePin:e})]}),j&&l.jsxs("div",{className:"flex flex-row pt-1 gap-2 align-content-center items-center",children:[g&&l.jsxs(ve,{children:[l.jsx(xe,{children:l.jsx(oe,{className:"guide-me-tooltip-button",variant:"ghost",theme:"dark",icon:C?Tc:Ic,size:"small","aria-label":"Show more",onClick:()=>{b(k=>!k)}})}),l.jsx(ce,{side:"bottom",children:C?"Show less":"Show more"})]}),l.jsx(js,{keyboardSequenceAction:x,canEdit:a,showRecaptureButton:i,guideMePin:e}),n&&l.jsx(Ma,{}),x&&l.jsxs(l.Fragment,{children:[l.jsxs(ve,{children:[l.jsx(xe,{children:l.jsx(oe,{className:"guide-me-tooltip-button",ref:d,variant:"ghost",size:"small",theme:"dark",icon:yl,"aria-label":"Copy input text",onClick:()=>{var k;qh(e==null?void 0:e.keys),te("copy_type_step_guide_me",{actionId:e.actionExternalId}),(k=d.current)==null||k.blur()}})}),l.jsx(ce,{side:"bottom",children:l.jsx("div",{className:"flex items-center",children:l.jsx("span",{children:"Copy Text"})})})]}),l.jsx("div",{children:l.jsxs(ve,{children:[l.jsx(xe,{children:l.jsx(oe,{className:"guide-me-tooltip-button",ref:d,variant:"ghost",theme:"dark",size:"small",icon:wl,"aria-label":"Insert input text",onClick:()=>{r(),te("insert_type_step_guide_me",{actionId:e.actionExternalId})}})}),l.jsx(ce,{side:"bottom",children:l.jsx("div",{className:"flex items-center",children:l.jsx("span",{children:"Fill Input"})})})]})}),l.jsx("div",{children:l.jsxs(ve,{children:[l.jsx(xe,{children:l.jsx(oe,{className:"guide-me-tooltip-button",variant:"ghost",theme:"dark",size:"small",icon:_l,onMouseDown:f})}),l.jsx(ce,{side:"bottom",children:l.jsx("div",{className:"flex items-center",children:l.jsx("span",{children:"Next"})})})]})})]})]})]})})})})},Ss=(e,t)=>{var n,a,i,u;((n=t==null?void 0:t.keys)==null?void 0:n[t.keys.length-1])==="enter"&&t.keys.pop();const r=((a=t==null?void 0:t.keys)==null?void 0:a.join(""))||"";(u=(i=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"value"))==null?void 0:i.set)==null||u.call(e,r),e==null||e.dispatchEvent(new Event("input",{bubbles:!0})),e==null||e.dispatchEvent(new Event("change",{bubbles:!0}))},Qh=({guideMePin:e,aiFallbackElementId:t,description:r,onTargetClick:n,onOtherTargetClick:a,actionType:i,onSelectorNotFound:u,onSelectorFound:s,canEdit:c,liveActionNumber:m})=>{var T,M,y,D;const[h,v]=p.useState(!1),[w,C]=p.useState(0),{element:b,matchMethod:g,parentIframe:_,algorithm:I}=Qa({aiFallbackElementId:t,selector:e.selector,xpath:e.xpath,tag:e.tag,text:e.text,attributes:e.attributes,debounceMs:200,retryCount:w,timestamp:e==null?void 0:e.timestamp,actionType:e==null?void 0:e.actionType,actionId:(e==null?void 0:e.actionExternalId)??"",wasInIframe:e?e.was_in_iframe:null,iframeAttributes:(e==null?void 0:e.iframe_attributes)||null,parentAttributes:(e==null?void 0:e.target_parent_attributes)||null,parentTag:(e==null?void 0:e.target_parent_tag)||""}),N=(M=(T=de.getState())==null?void 0:T.extension)==null?void 0:M.status,A=(D=(y=de.getState())==null?void 0:y.guideMe)==null?void 0:D.autoPilotAction,{isVisible:o}=gr({element:b,subtreeEnabled:!0}),d=tc(b,_),f=p.useCallback(()=>{i!=="keyboard_sequence_action"&&(n==null||n(),b==null||b.removeEventListener("pointerdown",f))},[i,n,b]),x=nc({pin:e,pinTarget:b,parentIframe:_}),j=()=>v(!0),S=()=>v(!1);function E(O){O.isTrusted&&f()}p.useEffect(()=>(b==null||b.addEventListener("mouseenter",j),b==null||b.addEventListener("mouseleave",S),b==null||b.addEventListener("pointerdown",E),()=>{b==null||b.removeEventListener("mouseenter",j),b==null||b.removeEventListener("mouseleave",S),b==null||b.removeEventListener("pointerdown",E)}),[f,b]),p.useEffect(()=>{A&&A==="click"&&b&&(b.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,clientX:x.x,clientY:x.y})),f()),A&&A==="autofill"&&(((b==null?void 0:b.tagName)==="INPUT"||(b==null?void 0:b.tagName)==="TEXTAREA"||(b==null?void 0:b.getAttribute("contenteditable"))==="true")&&Ss(b,e),n==null||n()),de.dispatch(oo(null))},[A,f,n,e==null?void 0:e.keys,x.x,x.y]),p.useEffect(()=>{S(),C(0)},[e]);const k=(()=>b&&d.width&&d.height)();p.useEffect(()=>{let O;if(k){C(0),s==null||s({matchMethod:g,centerCoordinates:rc(d),algorithm:I}),pa({actionId:e.actionExternalId,matchMethod:g,url:e.original_url,algorithm:I});const L=b;L.style.transform="scale(1)",L.offsetHeight,L.style.transform=""}else w<10&&(O=setTimeout(()=>{k||C(L=>L+1)},1e3));return(w===1&&(!b||b&&!k)||t&&(!b||b&&!k))&&(u==null||u()),w===10&&pa({actionId:e.actionExternalId,matchMethod:g,url:e.original_url,algorithm:I}),()=>clearTimeout(O)},[b,w]);const P=()=>{const{top:O,left:L,height:z,width:F}=d,{innerHeight:B,innerWidth:X}=window;return O<0||L<0||O+z>B||L+F>X},R=()=>{k&&P()&&(b==null||b.scrollIntoView({behavior:"smooth",block:"center"}))};return p.useEffect(()=>{const O=L=>{var q;const z=L.target,F=b==null?void 0:b.contains(z),B=z==null?void 0:z.contains(b),X=Gc(z,{ignoreId:!0}),U=va(z),$={documentId:(q=e==null?void 0:e.document_metadata)==null?void 0:q.id,actionId:e==null?void 0:e.actionExternalId,actionSelector:e==null?void 0:e.selector,actionXpath:e==null?void 0:e.xpath,actionDescription:r,userScrollPosition:{x:window==null?void 0:window.scrollX,y:window==null?void 0:window.scrollY},userClickCoordinates:{x:L.clientX,y:L.clientY},viewport:{width:window.innerWidth,height:window.innerHeight},clickedText:el((z.innerText||z.textContent||"").substring(0,2048)),clickedXpath:X,clickedSelector:U};z!==b&&!F&&!B&&k&&(a(L.clientX,L.clientY),ar("click_other_element_guide_me",$)),b||ar("click_refer_to_screenshot_other_element_guide_me",$)};return document.addEventListener("pointerdown",O),()=>{document.removeEventListener("pointerdown",O)}},[b,n,k]),p.useEffect(()=>{R()},[b]),p.useEffect(()=>{const O=async L=>{L.messageType==="currentTabChanged"&&C(0)};return chrome.runtime.onMessage.addListener(O),()=>{chrome.runtime.onMessage.removeListener(O)}},[]),!k||N===pe.RECORDING?null:l.jsx("div",{className:"group pointer-events-none absolute z-[999999] cursor-pointer opacity-100 transition-opacity",style:{position:"absolute",top:x.y-16,left:x.x-16,zIndex:999999},children:o&&l.jsxs("div",{id:"click-target",className:re("relative flex items-start",{"flex-col":e.actionType==="keyboard_sequence_action"}),children:[l.jsx(Ra,{clickTargetColor:e.clickTargetColor}),l.jsx(Kh,{isAiFallbackElement:g==="ai_fallback",guideMePin:e,targetHovered:h,onNextClick:n,handleAutoFillInput:()=>Ss(b,e),canEdit:c,showRecaptureButton:!String(m).includes(".")})]})})},Jh=({liveAction:e})=>{var m,h;const[t,r]=p.useState(!1),[n,a]=p.useState({x:0,y:0}),i=(h=(m=de.getState())==null?void 0:m.extension)==null?void 0:h.status,u=p.useRef(null),s=`#${e==null?void 0:e.clickTargetColor}`||"#3C2EDD",c=({x:v,y:w})=>{const C=document.elementFromPoint(v,w);if(C&&u.current){const b=C.getBoundingClientRect();Object.assign(u.current.style,{display:"block",top:`${b.top}px`,left:`${b.left}px`,width:`${b.width}px`,height:`${b.height}px`})}};return p.useEffect(()=>{or().then(v=>{v&&i===pe.RECORDING?r(!0):r(!1)}).catch(()=>{r(!1)})},[i]),p.useEffect(()=>{if(!t)return;const v=g=>{a({x:g.clientX,y:g.clientY}),c({x:g.clientX,y:g.clientY})},w=g=>_=>{var o,d;let I=_.clientX,N=_.clientY,A=g;for(;A;){const f=A.getBoundingClientRect();I+=f.left,N+=f.top,A=(d=(o=A.ownerDocument)==null?void 0:o.defaultView)==null?void 0:d.frameElement}a({x:I,y:N})},C=[],b=g=>{g.querySelectorAll("iframe").forEach(_=>{try{const I=_.contentWindow;if(I&&I.document){const N=w(_);I.document.addEventListener("mousemove",N),C.push({iframeWindow:I,handler:N}),b(I.document)}}catch(I){console.warn("Cross-origin iframe, skipping mouse tracking:",I)}})};return window.addEventListener("mousemove",v),b(document),()=>{window.removeEventListener("mousemove",v),u.current&&(u.current.style.display="none"),C.forEach(({iframeWindow:g,handler:_})=>{try{g.document.removeEventListener("mousemove",_)}catch(I){console.warn("Error cleaning up iframe listener:",I)}})}},[t]),p.useEffect(()=>{const v=()=>{r(!1)},w=()=>{or().then(C=>{C&&i===pe.RECORDING&&r(!0)}).catch(()=>{r(!1)})};return window.addEventListener("scroll",v),window.addEventListener("scrollend",w),()=>{window.removeEventListener("scroll",v),window.removeEventListener("scrollend",w)}},[t]),t?l.jsxs("div",{id:"guide-click-target",children:[l.jsx("div",{className:"z-9999 absolute text-white p-2 rounded-md text-xs",style:{left:n.x+12,top:n.y+12,backgroundColor:`${s}`,width:"max-content"},children:"Click to capture"}),l.jsx("div",{className:"border-rounded-sm",ref:u,style:{position:"absolute",border:`solid 2px ${s}`,pointerEvents:"none"}})]}):null},Eo=["Scanning the page...","Peeking behind the DOM curtain.","Thinking...","Mapping out the elements.","Looking for just the right spot.","Discombobulating the DOM.","Thinking...","Cross-referencing the layout.","Untangling the HTML web.","Following the selectors.","Zooming in on potential targets.","Thinking...","Double-checking attributes.","Almost there \u2014 element in sight!"],Zh=()=>{const[e,t]=p.useState([]),r=p.useRef(0),n=p.useRef(0),[a,i]=p.useState(0),[u,s]=p.useState(2*22),[c,m]=p.useState(!0),h=p.useRef(null),v=p.useRef(null),w=p.useRef(),[C,b]=p.useState(null),[g,_]=p.useState(0),I=p.useMemo(()=>{try{return(window==null?void 0:window.matchMedia)&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}catch{return!1}},[]);return p.useEffect(()=>{if(v.current&&(window.clearInterval(v.current),v.current=null),I)return()=>{};const N=()=>{m(!1),t(A=>{const o=r.current%Eo.length,d=Eo[o];r.current=o+1;const f=n.current+1;n.current=f;const x=[{id:f,text:d},...A].slice(0,2+5);return b(f),_(0),x}),requestAnimationFrame(()=>{const A=h.current,o=(A?Array.from(A.children):[]).slice(0,2).map(x=>x.offsetHeight),d=o[0]??22,f=o.reduce((x,j)=>x+j,0)||2*22;if(s(f),i(-d),A){const x=A.offsetHeight;A.dataset.reflow=String(x),delete A.dataset.reflow}requestAnimationFrame(()=>{m(!0),i(0)})}),window.setTimeout(()=>{v.current&&(window.clearInterval(v.current),v.current=null),v.current=window.setInterval(()=>{_(A=>A+1)},35)},50)};return w.current=N,N(),()=>{v.current&&(window.clearInterval(v.current),v.current=null)}},[I,Eo,2,35]),p.useEffect(()=>{if(I||C===null)return;const N=e.find(o=>o.id===C),A=N?N.text.length:0;if(A>0&&g>=A){v.current&&(window.clearInterval(v.current),v.current=null);const o=w.current;o&&window.setTimeout(()=>{o()},800)}},[g,C,I,e,800]),p.useEffect(()=>{if(I)return;const N=h.current;if(!N)return;const A=Array.from(N.children).slice(0,2).map(o=>o.offsetHeight).reduce((o,d)=>o+d,0)||2*22;s(A)},[g,I,2]),l.jsx("div",{"aria-hidden":"true",role:"presentation",className:"overflow-hidden min-h-8",style:{height:`${u}px`,WebkitMaskImage:"linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,1) 18%, rgba(0,0,0,1) 82%, rgba(0,0,0,0))",maskImage:"linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,1) 18%, rgba(0,0,0,1) 82%, rgba(0,0,0,0))",width:"200px"},children:l.jsx("ul",{ref:h,className:"will-change-transform p-0 m-0 w-full list-none",style:{transform:`translateY(${a}px)`,transition:c?"transform 500ms ease-out":"none"},children:e.map(N=>{const A=N.id===C?N.text.slice(0,Math.min(g,N.text.length)):N.text;return l.jsx("li",{className:"leading-2 text-xs w-full text-slate-300",style:{overflowWrap:"anywhere",wordBreak:"break-word",whiteSpace:"normal"},children:A||"\xA0"},N.id)})})})},eg=({visible:e})=>l.jsxs(l.Fragment,{children:[e&&l.jsx(Na,{}),l.jsxs(Xc,{children:[l.jsx(Yc,{className:"fixed bottom-4 right-4 top-auto left-auto z-[9999999] w-auto p-4"}),l.jsx(Kc,{open:e,duration:864e5,variant:"info",icon:El,title:"Locating element\u2026",className:"w-[240px] max-w-[240px] [&_[toast-close]]:hidden",description:l.jsx(Zh,{})})]})]}),tg=e=>{const t=e.kind==="instruction"&&!e.instruction_type,r=e.kind==="mouse_click_action"||e.kind==="keyboard_action"||e.kind==="keyboard_combination_action"||e.kind==="keyboard_sequence_action";return t||r},ng=()=>{var e,t,r,n;try{return window&&window.self!==window.top?(t=(e=window.top)==null?void 0:e.location)==null?void 0:t.href:(r=window.location)==null?void 0:r.href}catch{return(n=window.location)==null?void 0:n.href}},rg=({liveAction:e})=>{var T,M,y,D,O,L,z;const[t,r]=p.useState(void 0),[n,a]=p.useState(!1),[i,u]=p.useState(!1),[s,c]=p.useState(!1),[m,h]=p.useState(void 0),[v,w]=p.useState(!1),{guideMeSaveIframeDoms:C,guideMeAiFallback:b,guideMeLoader:g}=Ze(de.getState()),_=(M=(T=de.getState())==null?void 0:T.extension)==null?void 0:M.status,I=(D=(y=de.getState())==null?void 0:y.auth)==null?void 0:D.userData,N=tl((O=I==null?void 0:I.active_organization)==null?void 0:O.super_organization),A=((z=(L=I==null?void 0:I.active_organization)==null?void 0:L.super_organization)==null?void 0:z.allow_openai)&&b&&N;p.useEffect(()=>{if(!e)return;const F=wa();h(F),chrome.runtime.sendMessage({messageType:"guideMeCaptureFreshPageScreenshot",data:{sessionId:t,requestId:F}})},[e==null?void 0:e.id]);const o=()=>{var X,U;const F=ro(e==null?void 0:e.url,ng()),B=(X=e==null?void 0:e.screenshot)!=null&&X.id?Ut.NotFoundScreenshot:Ut.NotFoundStep;if(!(e!=null&&e.aiFallbackElementId)&&window.self===window.top&&A)setTimeout(()=>{var q;Ia();const $=(q=document==null?void 0:document.body)==null?void 0:q.outerHTML;tt({showMessage:!0,message:B,url:window.location.href,dom:$,sessionId:t,requestId:m})},250);else{w(!1),tt({showMessage:!0,message:B,sessionId:t,requestId:m});const $=C?fa():(U=_a(document==null?void 0:document.body))==null?void 0:U.outerHTML;chrome.runtime.sendMessage({messageType:"trackGuideMeDom",documentId:e==null?void 0:e.document_id,actionId:e==null?void 0:e.id,type:F?"selector_not_found":"url_mismatch",domString:$})}},d=()=>{tt({showMessage:!1,message:void 0})},f=({matchMethod:F,centerCoordinates:B,algorithm:X})=>{var $;if(d(),w(!1),!e||!e.id||!e.document_id)return;const U=C?fa():($=_a(document==null?void 0:document.body))==null?void 0:$.outerHTML;chrome.runtime.sendMessage({messageType:"trackGuideMeDom",documentId:e.document_id,actionId:e.id,type:"selector_found",domString:U,trackingDetails:{matchMethod:F,algorithm:X,...F==="ai_fallback"&&{modelResponseClickCoordinates:B}}})},x=()=>{ar("click_element_guide_me",{documentId:e==null?void 0:e.document_id,actionId:e==null?void 0:e.id}),d(),chrome.runtime.sendMessage({messageType:"liveTargetClicked"})},j=(F,B)=>{chrome.runtime.sendMessage({messageType:"guideMeOtherElementClicked",data:{sessionId:t,requestId:m,coordinates:{x:F,y:B}}})},S=async()=>{const F=await Lc();c(F)};p.useEffect(()=>{da(()=>{a(!0)})},[]);const E=async()=>{S();const F=await Oc();F&&r(F)};p.useEffect(()=>{E()},[]);const k=()=>{switch(e==null?void 0:e.kind){case"mouse_click_action":de.dispatch(oo("click"));break;case"keyboard_sequence_action":de.dispatch(oo("autofill"));break;default:x()}};p.useEffect(()=>{const F=B=>{B.messageType==="guideMeStepForward"&&k(),B.messageType==="setIsAutopilot"&&u(B.isAutopilot),B.messageType==="userEditPermission"&&c(!!(B!=null&&B.canEdit)),B.messageType==="showGuideMeLoading"&&g&&w(!0),B.messageType==="hideGuideMeLoading"&&w(!1)};return chrome.runtime.onMessage.addListener(F),()=>{chrome.runtime.onMessage.removeListener(F)}},[e]),p.useEffect(()=>{const F=B=>{B.key==="Enter"&&k(),B.key==="ArrowLeft"&&chrome.runtime.sendMessage({messageType:"guideMePreviousStepToSidepanel"}),B.key==="ArrowRight"&&chrome.runtime.sendMessage({messageType:"liveTargetClicked"})};return i&&window.addEventListener("keydown",F),()=>{window.removeEventListener("keydown",F)}},[i,k]);const P=p.useMemo(()=>{var F,B,X;if(e)return{id:"live-target",selector:(F=e==null?void 0:e.domain)!=null&&F.includes("dynamics.com")?oc(e==null?void 0:e.target_selector):e==null?void 0:e.target_selector,xpath:(e==null?void 0:e.target_xpath)||"",tag:(e==null?void 0:e.target_tag)||"",text:(e==null?void 0:e.target_text)||"",attributes:(e==null?void 0:e.target_element_attributes)||null,domain:window.location.hostname,path:window.location.href,original_url:window.location.href,document_metadata:{id:(e==null?void 0:e.document_id)??"live-target-meta",name:(e==null?void 0:e.transcribed_description)||(e==null?void 0:e.description),type:"scribe",icon_color:"gray"},user_owner:{id:"live-owner",author_name:"live-author"},actionType:e==null?void 0:e.kind,keys:e==null?void 0:e.keys,timestamp:e==null?void 0:e.timestamp,actionExternalId:e==null?void 0:e.id,clickTargetColor:e==null?void 0:e.clickTargetColor,clickPosition:{x:((B=e==null?void 0:e.position_within_element)==null?void 0:B.x)||null,y:((X=e==null?void 0:e.position_within_element)==null?void 0:X.y)||null},recaptureEnabledForPublishing:e==null?void 0:e.recaptureEnabledForPublishing,was_in_iframe:e?e.was_in_iframe:null,iframe_attributes:(e==null?void 0:e.iframe_attributes)||null,target_parent_attributes:(e==null?void 0:e.target_parent_attributes)||null,target_parent_tag:(e==null?void 0:e.target_parent_tag)||""}},[e]);if(e&&!tg(e))return null;const R=P&&((P==null?void 0:P.selector)||(P==null?void 0:P.text)||(P==null?void 0:P.attributes)||(P==null?void 0:P.xpath))&&n&&_!==pe.RECORDING&&_!==pe.STARTING_RECORDING&&_!==pe.ENDING_RECORDING;return l.jsxs(l.Fragment,{children:[g&&l.jsx(eg,{visible:v}),R&&l.jsx(Qh,{guideMePin:P,aiFallbackElementId:e==null?void 0:e.aiFallbackElementId,onTargetClick:x,onOtherTargetClick:j,onSelectorNotFound:o,onSelectorFound:f,actionType:e==null?void 0:e.kind,description:e==null?void 0:e.description,liveActionNumber:e==null?void 0:e.ordinal,canEdit:s}),s&&l.jsx(Jh,{liveAction:e})]})},Ps=()=>{var e,t,r,n;try{return window&&window.self!==window.top?(t=(e=window.top)==null?void 0:e.location)==null?void 0:t.href:(r=window.location)==null?void 0:r.href}catch{return(n=window.location)==null?void 0:n.href}},og=()=>{const[e,t]=p.useState(!1),[r,n]=p.useState(void 0),[a,i]=p.useState(!1),u=p.useRef(void 0);p.useEffect(()=>{u.current=r},[r]);const s=c=>{var m,h,v;if(c!=null&&c.isGuiding){if(!c.isGuiding.newValue)return;const w=c.isGuiding.newValue==="true";t(w)}if(c!=null&&c.liveAction){if(!c.liveAction.newValue)return;const w=JSON.parse(c.liveAction.newValue)??void 0,C=((m=u.current)==null?void 0:m.id)===w.id&&((h=u.current)==null?void 0:h.timestamp)===w.timestamp&&((v=u.current)==null?void 0:v.aiFallbackElementId)===w.aiFallbackElementId;w&&!C&&n(w)}};return p.useEffect(()=>(chrome.storage.local.get("isGuiding",c=>{t(c.isGuiding==="true")}),chrome.storage.local.get("liveAction",c=>{n(c.liveAction?JSON.parse(c.liveAction):void 0)}),chrome.storage.local.onChanged.addListener(s),()=>{chrome.storage.local.onChanged.removeListener(s)}),[]),p.useEffect(()=>{r&&(ro(r==null?void 0:r.url,Ps())?(i(!1),tt({showMessage:!1,message:void 0})):(tt({showMessage:!0,message:Ut.UrlMismatch}),i(!0)))},[r]),p.useEffect(()=>{const c=async m=>{if(m.messageType==="currentTabChanged"){const h=await Fc();ro(h==null?void 0:h.url,Ps())?tt({showMessage:!1,message:void 0}):tt({showMessage:!0,message:Ut.UrlMismatch})}};return chrome.runtime.onMessage.addListener(c),()=>{chrome.runtime.onMessage.removeListener(c)}},[]),!e||!r||a?null:l.jsx(rg,{liveAction:r})},ag=()=>{const{sidepanelFob:e}=Ze(de.getState()),{showSidepanelFob:t}=W(gn),[r,n]=p.useState(!0),[a,i]=p.useState(!1);return p.useEffect(()=>{(async()=>{var u;(u=await chrome.storage.local.get("hasSeenExtensionFob"))!=null&&u.hasSeenExtensionFob&&i(!0),Ht.send("isExtensionPinned").then(s=>{n(s)})})()},[]),p.useEffect(()=>{t&&(a||!r&&e)&&nl("sidekick_button",e)},[t,a,r,e]),{isExtensionPinned:r,hasSeenExtensionFob:a}},ig=e=>p.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("g",{id:"Logo Mark"},p.createElement("g",{id:"Vector"},p.createElement("path",{d:"M8.00004 11.284C8.00004 11.1521 8.09191 11.0378 8.22129 11.0087L15.6534 9.33645C15.831 9.29649 16 9.43074 16 9.61179V12.2953C16 12.4272 15.9081 12.5416 15.7788 12.5707L8.3466 14.2429C8.16902 14.2829 8.00004 14.1486 8.00004 13.9676V11.284Z",fill:"white"}),p.createElement("path",{d:"M0 8.39425C0 8.26234 0.0918627 8.14801 0.221246 8.1189L15.6534 4.64663C15.8309 4.60668 15.9999 4.74093 15.9999 4.92198V7.6055C15.9999 7.73741 15.908 7.85174 15.7787 7.88085L0.34656 11.3531C0.168973 11.3931 0 11.2588 0 11.0778V8.39425Z",fill:"white"}),p.createElement("path",{d:"M0 3.70468C0 3.57277 0.0918627 3.45845 0.221246 3.42933L7.6534 1.75708C7.83098 1.71712 7.99996 1.85137 7.99996 2.03242V4.71595C7.99996 4.84786 7.90809 4.96218 7.77871 4.99129L0.34656 6.66355C0.168973 6.70351 0 6.56926 0 6.3882V3.70468Z",fill:"white"})))),sg=({browserContext:e})=>{const[t,r]=p.useState(window.innerWidth),[n,a]=p.useState(window.innerHeight*(43/100)),[i,u]=p.useState(50),[s,c]=p.useState(0),m=p.useRef(0),h=p.useRef(0),v=p.useRef(!1),[w,C]=p.useState(!1),[b,g]=p.useState(!1),[_,I]=p.useState(!1),[N,A]=p.useState(!1),{tab:o}=e,d=rl(o==null?void 0:o.url),f=()=>{I(!0),te("sidekick_opened",{location:"sidekick_button"}),chrome.runtime.sendMessage({messageType:"openSidePanel",route:bn.Home})},x=async(y="right_click")=>{A(!0),te("sidekick_button_hide_clicked",{domainName:d,location:y});const D=await ka()||[];Zc([...D,{domain:d,timeHidden:Date.now()}])},j=()=>{te("sidekick_button_hover"),g(!0)},S=()=>{w||g(!1)},E=y=>{y.button===0&&(g(!1),C(!1),f())},k=y=>{if(!(v!=null&&v.current))return;const D=y.clientY-m.current,O=h.current+D,L=Math.max(0,Math.min(O,window.innerHeight));a(L),u(L/window.innerHeight*100)},P=()=>{v.current=!1,C(!1),g(!1),document.body.style.cursor="",document.body.style.userSelect="",window.removeEventListener("pointermove",k),window.removeEventListener("pointerup",P)},R=y=>{te("sidekick_button_drag"),v.current=!0,C(!0),m.current=y.clientY,h.current=n,document.body.style.cursor="grabbing",document.body.style.userSelect="none",window.addEventListener("pointermove",k),window.addEventListener("pointerup",P)};if(p.useEffect(()=>{const y=()=>{r(window.innerWidth),a(window.innerHeight*(i/100)),c(eu())};return y(),window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y)}},[i]),p.useEffect(()=>{chrome.storage.local.set({hasSeenExtensionFob:!0}),chrome.storage.local.get("sidepanelActive",D=>{I(D.sidepanelActive)});const y=D=>{var O;if(D.messageType==="sidepanelOpened"&&I(!0),D.messageType==="sidepanelClosed"&&I(!1),D.messageType==="hiddenFobDomainsUpdated"){const L=((O=D.hiddenDomains)==null?void 0:O.some(({domain:z})=>z===d))||!1;A(L)}};return chrome.runtime.onMessage.addListener(y),()=>chrome.runtime.onMessage.removeListener(y)},[]),p.useEffect(()=>{(async()=>{const y=(await ka()||[]).some(D=>D.domain===d);A(y)})()},[d]),_||N||window!==window.top)return null;const T=b?22:0,M=18+s+T;return l.jsx(et,{children:l.jsx("div",{className:"group flex flex-col items-end pointer-events-none",style:{position:"absolute",top:n,left:t-M,zIndex:999999,transition:"left 0.3s cubic-bezier(0.4,0,0.2,1)"},id:"sidepanel-fob",children:l.jsxs("div",{className:"group flex flex-col items-center justify-center pointer-events-auto",onPointerEnter:j,onPointerLeave:S,children:[l.jsxs(ve,{children:[l.jsx(xe,{children:l.jsx(oe,{variant:"link",onClick:()=>x("x_button"),icon:Rc,iconProps:{className:"text-slate-400"},size:"small",className:re("text-slate-400 w-3.5 h-3.5 opacity-0 group-hover:opacity-100 mb-1",{"opacity-100":b}),"aria-label":"Hide for this site"})}),l.jsx(ce,{side:"left",sideOffset:8,className:"text-xs",variant:"compact",children:"Hide for this site"})]}),l.jsx("div",{className:"p-1 bg-slate-100/80 rounded-full shadow-[0px_0px_1px_0px_rgba(15,23,42,0.20),0px_5px_11px_0px_rgba(2,6,23,0.06),0px_2px_4px_0px_rgba(2,6,23,0.10)] outline outline-1 outline-offset-[-1px] outline-white/50 backdrop-blur-[3px] inline-flex flex-col justify-center items-center gap-1",style:{cursor:w?"grabbing":"pointer"},onPointerDown:E,children:l.jsxs("div",{className:"p-2 relative bg-gradient-to-tr from-[#3ac2ff] to-[#3c2edd] to-50% rounded-full shadow-[0px_0px_1.5px_0px_rgba(2,6,23,0.10)] outline outline-1 outline-offset-[-1px] outline-black/5 inline-flex justify-center items-center gap-2 overflow-hidden",children:[l.jsx("div",{className:" flex items-center z-10",children:l.jsx(ig,{})}),l.jsx("div",{className:"w-[32.56px] h-8 left-[28.02px] top-[20.65px] absolute origin-top-left rotate-[-125deg] bg-blend-overlay bg-gradient-to-br from-[#f45397] to-[#ffb425] to-60% blur-[5px] z-2"})]})}),l.jsx("div",{style:{cursor:w?"grabbing":"grab"},onPointerDown:R,className:"mt-[2px]",children:l.jsx(se,{icon:Cl,className:re("text-slate-400 w-3.5 h-3.5 opacity-0 group-hover:opacity-100",{"opacity-100":b})})})]})})})},lg="scribehow://scribehow.com/signin",cg=({onCancel:e,hasPaidSubscription:t,installedDesktopRecorder:r})=>{const[n,a]=p.useState(t);return p.useEffect(()=>{const i=l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-3",children:t?"No problem! Use the desktop app.":"No problem! To capture guides for other applications, use Scribe Pro's desktop app."}),l.jsx(tu,{theme:"dark",id:"dnsa",checked:n,onCheckedChange:s=>a(s===!0),label:"Don't remind me again"})]});let u;t&&r?u=l.jsx(xn,{altText:"Switch to Desktop",onClick:()=>{te("switch_to_desktop",{location:"web_only_notification"}),window.open(lg)},className:"!mt-2",children:"Switch to Desktop"}):t&&!r?u=l.jsx(xn,{altText:"Install Desktop App",onClick:()=>{te("get_scribe_desktop",{location:"web_only_notification"}),window.open("https://scribehow.com/get-desktop")},className:"!mt-2",children:"Install Desktop App"}):u=l.jsx(xn,{altText:"Get Scribe Pro",onClick:()=>{te("show_pro_features_workspace_page",{location:"web_only_notification"});const s=xa({location:"web_only_notification",frontendUrl:$o.FRONTEND_URL,variant:ya.FREE_TO_PRO});window.open(s)},className:"!mt-2",children:"Get Scribe Pro"}),Qc({title:"Capturing outside the browser?",description:i,onOpenChange:s=>{s||(e==null||e(n))},action:l.jsxs(Jc,{children:[u,l.jsx(xn,{altText:"Dismiss",variant:"secondary",onClick:()=>e==null?void 0:e(n),className:"!mt-2",children:"Dismiss"})]})})},[n,t,r,e]),null},Co="won-dnsa",ug=({isPlanFree:e})=>{const{userData:t}=W(zt),{installed_desktop_recorder:r}=t||{},[n,a]=p.useState(!1);return p.useEffect(()=>{const i=async(u,s,c)=>{u.messageType==="switchedAwayFromBrowser"&&(localStorage.getItem("userSwitchedAwayFromBrowser")===null&&localStorage.setItem("userSwitchedAwayFromBrowser","true"),chrome.storage.sync.get([Co],m=>{m[Co]!==!0?(te("switched_away_from_browser",{show_web_only_notification:!0,installed_desktop_recorder:r},Wo),a(!0)):te("switched_away_from_browser",{show_web_only_notification:!1,installed_desktop_recorder:r},Wo)}))};return chrome.runtime.onMessage.addListener(i),()=>chrome.runtime.onMessage.removeListener(i)},[]),n?l.jsx(cg,{hasPaidSubscription:!e,installedDesktopRecorder:!!r,onCancel:i=>{a(!1),te("dismiss_web_only_notification",{do_not_show_again:i,is_plan_free:e}),chrome.storage.sync.set({[Co]:i})}}):null},dg=()=>{const{workspaceScribes:e,galleryScribes:t,scribeCountOnDomain:r}=W(Ho),{userData:n,userGrowthState:a}=W(zt),{selectModalVisible:i,recordModalVisible:u}=W(qo),{dropdownOpen:s}=W(Vo),c=W(ol),{isMissingPermissions:m}=W(ac),h=W(Go),v=W(al),w=W(il),C=W(sl),b=p.useRef(null),g=()=>chrome.runtime.sendMessage({messageType:"closeDropdown"}),{copilot:_,scribeLivePhoenix2023q3:I,sidepanelFob:N,pinTreasures:A}=Ze(de.getState()),{showSidepanelFob:o}=W(gn),{hasSeenExtensionFob:d}=ag();bu(g,b),pc(),lc(),cc(),uc(),ic(A);const{pins:f}=W(ll);return p.useEffect(()=>{A&&chrome.runtime.sendMessage({messageType:"fetchViewedPins"})},[A]),c?l.jsxs(l.Fragment,{children:[o&&(d||N==="experiment")&&l.jsx(sg,{browserContext:w}),A&&C&&l.jsx(cd,{pins:f}),_&&v&&l.jsx(hu,{}),_&&v&&l.jsx(gu,{}),I&&l.jsx(du,{children:l.jsx(og,{})}),l.jsx(nu,{}),h&&l.jsx(Fm,{isPlanFree:vn(n)}),h&&!v&&l.jsx(ug,{isPlanFree:vn(n)}),l.jsx(uu,{in:s,nodeRef:b,timeout:300,classNames:"Widget",unmountOnExit:!0,children:l.jsx("div",{id:"ScribeApp",ref:b,children:l.jsx(sc,{scribeCountOnDomain:r,workspaceScribes:e,galleryScribes:t,user:n,onClose:g,missingPermissions:m,userGrowthState:a})})}),i&&l.jsx(Cu,{}),u&&l.jsx(vu,{})]}):(s&&document.hasFocus()&&chrome.runtime.sendMessage({messageType:"trackNewRelicLog",name:"extension_content_not_displayed",details:{...w,url:window.location.href}}),null)};var pg=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};pg.SENTRY_RELEASE={id:"1305c76edd7b4291b80d5f57cd104316065124a5"};let pn;function fg(){document.body.addEventListener("click",()=>{var e,t,r;(e=document.body.dataset)!=null&&e.openSidepanelDocsOnBodyClick&&(chrome.runtime.connect({name:"sidePanelPort"}).postMessage({messageType:"openSidePanel",route:bn.Assistant}),document.body.removeAttribute("data-open-sidepanel-docs-on-body-click")),(t=document.body.dataset)!=null&&t.openSidepanelHomeOnBodyClick&&(chrome.runtime.connect({name:"sidePanelPort"}).postMessage({messageType:"openSidePanel",route:bn.Home}),document.body.removeAttribute("data-open-sidepanel-home-on-body-click")),(r=document.body.dataset)!=null&&r.openSidepanelRecorderOnBodyClick&&(chrome.runtime.connect({name:"sidePanelPort"}).postMessage({messageType:"openSidePanel",route:bn.Recorder}),document.body.removeAttribute("data-open-sidepanel-recorder-on-body-click"))},!0)}cl&&fg();try{if((Ts=window.document.documentElement)!=null&&Ts.getAttribute("data-html2canvasroot"))throw new Error("injecting into html2canvas frame, skipping init");const e=document.getElementById(Vt);e&&e.remove();const t=document.createElement("scribe-shadow");t.id=Vt,t.style.cssText="position: fixed; width: 0; height: 0;  top: 0; left: 0; z-index: 2147483647; overflow: visible; visibility: visible;",t.setAttribute("data-crx",chrome.runtime.id),document.body.appendChild(t);const r=t.attachShadow({mode:"open"}),n=new FontFace("Public Sans",`url('${chrome.runtime.getURL(Is)}')`);document.fonts.add(n);const a=document.createElement("div");a.id="root-scribe-elem",a.style.cssText="position: fixed; width: 0; height: 0; top: 0; left: 0; overflow: visible; color: #15181E;",r.appendChild(a),pn=()=>{Lt.render(l.jsxs(G.StrictMode,{children:[void 0,l.jsx(Rs,{store:de,children:l.jsx(dg,{})})]}),a)},ru().then(i=>{i===Ft.Arc&&(dl("recordingControlsPreference","floating-button"),chrome.runtime.sendMessage({messageType:"optionsChanged"})),ul("detectedBrowser",i),chrome.storage.local.set({detectedBrowser:i})});{const i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href",chrome.runtime.getURL("/assets/style.css")),i.onload=pn,r.appendChild(i)}}catch{}const mg=()=>{pn==null||pn()};export{mg as onExecute};
