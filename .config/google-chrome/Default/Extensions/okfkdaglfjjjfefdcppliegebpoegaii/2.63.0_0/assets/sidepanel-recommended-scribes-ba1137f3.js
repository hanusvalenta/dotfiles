import"./modulepreload-polyfill-3cfb730f.js";import{j as t}from"./Icon-f3e43e02.js";import{r as i,R as qe}from"./index-8b3efc3f.js";import{c as Ye}from"./client-2e7161fd.js";import{u as W,P as Qe}from"./react-redux-52a3bd12.js";import{t as G}from"./useToast-35be614d.js";import{T as Xe}from"./Toaster-4f59bb56.js";import{x as me,s as ue,y as pe,z as j,A as he,v as Ze,w as et,B as tt,C as V,m as J}from"./store-f163b43d.js";import{p as at}from"./production-ca86ce5a.js";import{B as st,t as nt,g as rt}from"./Badge-4b362304.js";import{s as it,a as ot,u as ct,S as lt,A as dt}from"./useExtensionMessagesListener-367ac98c.js";import{b as mt,c as ut,d as pt,e as ht,g as gt,h as xt}from"./index-eeca2896.js";import{B as ft}from"./Banner-f157b97e.js";import{B as b}from"./Button-97d280d1.js";import{S as bt,a as yt,T as vt}from"./TextArea-cc3d5eef.js";import{D as wt,a as O}from"./dwEvents-216a2e01.js";import{u as kt}from"./useBackgroundReduxState-bd3d6a86.js";import{u as jt,a as _t}from"./useDomainAllowlistListener-7908de64.js";import{T as St}from"./Toolbar-58c4db6f.js";import{u as Nt}from"./useDWDiscardFeedback-50aef435.js";import{h as Ct}from"./dwResultsDB-a3d52d5f.js";import{i as Et,e as Tt,a as It,b as zt}from"./importDWResultsFromFile-215db9d8.js";import"./_commonjsHelpers-de833af9.js";import"./index-3744168d.js";import"./index-3e4171d5.js";import"./index-9279c646.js";import"./index-0b89f2da.js";import"./index-025f2019.js";import"./v4-c70744d4.js";import"./DocumentIcon-1c27b6c5.js";import"./index-e309a1d1.js";import"./Tooltip-cd1b4e9d.js";import"./index-6034fac0.js";import"./index-50993b56.js";import"./index-24f6db5b.js";import"./appTagUtils-f127d137.js";import"./browserContext-85999045.js";import"./dwActionLoggingDB-f05b22f9.js";import"./dwScreenshotsDB-956b9f9a.js";const Dt=[{value:"1",icon:mt,label:"Very dissatisfied"},{value:"2",icon:ut,label:"Dissatisfied"},{value:"3",icon:pt,label:"Neutral"},{value:"4",icon:ht,label:"Satisfied"},{value:"5",icon:gt,label:"Very satisfied"}],At=({open:d,onOpenChange:p,onSubmit:s,onSkip:n})=>{const[m,y]=i.useState(""),[_,g]=i.useState(""),x=()=>{s&&m&&(s(parseInt(m,10),_),y(""),g(""),p(!1),G({variant:"success",title:"Thank you for the feedback!"}))},S=()=>{n&&n(),y(""),g(""),p(!1)},v=()=>{y(""),g(""),p(!1)};return d?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-slate-500/80 backdrop-blur-sm z-[9998]",onClick:v}),t.jsx("div",{className:"fixed inset-0 flex items-end justify-center pb-4 px-5 z-[9999] pointer-events-none",children:t.jsxs("div",{className:"pointer-events-auto bg-white rounded-xl shadow-[0px_20px_25px_-5px_rgba(15,23,42,0.1),0px_8px_10px_-6px_rgba(15,23,42,0.1)] w-[340px] flex flex-col",children:[t.jsx("div",{className:"pt-6 px-6",children:t.jsx("h2",{className:"text-xl font-semibold leading-7 text-slate-900",children:"How do you feel about Discover Workflows?"})}),t.jsx("div",{className:"px-6",children:t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(bt,{orientation:"horizontal",align:"column",justify:"center",value:m,onValueChange:y,className:"[&>div]:flex [&>div]:flex-row [&>div]:gap-2 [&>div]:items-start [&>div]:justify-center",children:Dt.map(h=>t.jsx(yt,{value:h.value,icon:h.icon,label:"",className:"min-w-[50px] h-[42px] [&>span]:sr-only !border-2 !border-transparent !py-[7px] !px-3 data-[state=checked]:!border-brand-500 data-[state=checked]:!bg-brand-50 [&>div]:!size-6 [&>div]:!pt-[2px] [&_svg]:!text-slate-500 [&[data-state=checked]_svg]:!text-yellow-500"},h.value))}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-sm font-normal text-slate-700",children:"Anything we can do better?"}),t.jsx(vt,{placeholder:"Please tell us why you gave that rating and any additional feedback",value:_,onChange:h=>g(h.target.value),rows:4,resize:!1})]})]})}),t.jsxs("div",{className:"flex flex-col gap-3 p-6",children:[t.jsx(b,{variant:"primary",size:"default",onClick:x,disabled:!m,className:"w-full",children:"Submit feedback"}),t.jsx(b,{variant:"secondary",size:"default",onClick:S,className:"w-full",children:"Cancel"})]})]})})]}):null},Pt=({onFeedbackSubmit:d,onFeedbackSkip:p})=>{const[s,n]=i.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(ft,{variant:"info",icon:xt,title:"How could Discover Workflows be better?",description:"Your feedback shapes our next steps.",actions:[{children:"Give feedback",onClick:()=>n(!0)}]}),t.jsx(At,{open:s,onOpenChange:n,onSubmit:d,onSkip:p})]})},Ft=(d,p=1/0)=>{const[s,n]=i.useState(null),[m,y]=i.useState(!1),[_,g]=i.useState(null),[x,S]=i.useState(0),{lrr2025:v}=me(ue.getState());let h={};if(typeof v=="string")try{h=JSON.parse(v)}catch{h={}}else typeof v=="object"&&v!==null&&(h=v);const F=h!=null&&h.recommendation_refresh_hours_interval?h.recommendation_refresh_hours_interval*60*60*1e3:6e4,N=i.useCallback(async()=>{if(d){pe("feature","long-running-recorder"),pe("operation","fetch-task-status");try{y(!0);const o=await new Promise(C=>{chrome.runtime.sendMessage({messageType:"getSuggestedScribeTask",taskId:d},R=>{C(R)})});o.success&&o.task?(j("task_received_status",{status:o.task.status,task:o.task}),n(o.task),g(null)):(he(new Error(o.error||"Failed to fetch task status"),{extra:{context:"Error fetching task status"}}),g(o.error||"Failed to fetch task status"))}catch(o){he(o,{extra:{context:"Error in fetchTaskStatus"}}),g(o instanceof Error?o.message:"Unknown error occurred")}finally{y(!1)}}},[d]);i.useEffect(()=>{if(!d||(S(0),N(),(s==null?void 0:s.status)==="completed"||(s==null?void 0:s.status)==="failed"))return;const o=window.setInterval(()=>{if(x>=p){clearInterval(o);return}S(C=>C+1),N(),((s==null?void 0:s.status)==="completed"||(s==null?void 0:s.status)==="failed")&&clearInterval(o)},F);return()=>{clearInterval(o)}},[d,s==null?void 0:s.status,N,F,p,x]);const M=i.useCallback(()=>{N()},[N]),U=(s==null?void 0:s.status)==="completed",H=(s==null?void 0:s.status)==="failed"||(s==null?void 0:s.status)==="cancelled",$=(s==null?void 0:s.status)==="pending"||(s==null?void 0:s.status)==="running";return{task:s,loading:m,error:_,refresh:M,isCompleted:U,isFailed:H,isPending:$}},q=d=>{var s,n;if(d.domain)return d.domain;const p=(n=(s=d.actions)==null?void 0:s[0])==null?void 0:n.url;if(p)try{return new URL(p).hostname.replace(/^www\./,"")}catch{}return""},Mt=`
  .text-shadow-sm {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
  }
`;if(typeof document<"u"&&!document.getElementById("text-shadow-style")){const d=document.createElement("style");d.id="text-shadow-style",d.textContent=Mt,document.head.appendChild(d)}const $t=()=>{const{workspaceScribes:d,galleryScribes:p}=W(Ze),{taskId:s}=W(it),{userData:n}=W(et),m=W(me),[y,_]=i.useState(!1),[g,x]=i.useState(null),[S,v]=i.useState(!1),[h,F]=i.useState(!0),[N,M]=i.useState(!1),[U,H]=i.useState(0),[$,o]=i.useState(null),[C,R]=i.useState(!1),[Y,Q]=i.useState(!1),[X,Z]=i.useState(!1),[ee,te]=i.useState(!1),[xe,L]=i.useState(!1),{scribes:fe,loading:be,error:ae,refresh:ye}=ot(),c=fe,{task:ve,isPending:we,isCompleted:ke,isFailed:je}=Ft(s),{shouldShowFeedback:_e}=Nt(),Se=we||!ke&&!je&&s&&ve==null,se=be||Se;i.useEffect(()=>{chrome.storage.local.set({suggestedScribes:(c==null?void 0:c.length)||0})},[c]),i.useEffect(()=>{chrome.storage.local.get(["showFeedbackToast"]).then(e=>{e.showFeedbackToast&&(G({variant:"success",title:"Thank you for the feedback!"}),chrome.storage.local.remove(["showFeedbackToast"]))})},[]),ct(),kt(),jt(),_t();const Ne=async()=>{await V(J.Home)},Ce=(e,a)=>{j(O.DW_FEEDBACK_SUBMITTED,{location:"recommended_scribes",number_available_auto_capture_scribes:(c==null?void 0:c.length)||0,rating:e,feedback_length:(a==null?void 0:a.length)||0,has_feedback:!!a})},Ee=()=>{j(O.DW_FEEDBACK_SKIPPED,{location:"recommended_scribes",number_available_auto_capture_scribes:(c==null?void 0:c.length)||0})},Te=(e,a)=>{j(O.REJECTION_FEEDBACK_SUBMITTED,{location:"sidepanel_rejection_feedback",selected_reasons:e,reason_count:e.length,has_additional_feedback:!!a,additional_feedback_length:(a==null?void 0:a.length)||0}),G({variant:"success",title:"Thank you for the feedback!"}),L(!1)},Ie=()=>{j(O.REJECTION_FEEDBACK_SKIPPED,{location:"sidepanel_rejection_feedback"}),L(!1)},ze=async e=>{try{j("available_auto_capture_scribes_clicked",{location:"extension",number_available_auto_capture_scribes:c.length}),j("auto_captured_scribe_clicked",{location:"extension",document_id:e});const{totalSuggestedScribes:a}=await chrome.storage.local.get(["totalSuggestedScribes"]);a||await chrome.storage.local.set({totalSuggestedScribes:(c==null?void 0:c.length)||0}),await chrome.storage.local.set({previewScribeId:e}),await V(J.RecommendedScribesSuggestedPreview)}catch{}},De=async e=>{var a,r,l;try{j("suggested_scribe_dismissed",{location:"recommended_scribes_list",document_id:e,number_available_auto_capture_scribes:(c==null?void 0:c.length)||0});const u=(r=(a=n==null?void 0:n.active_organization)==null?void 0:a.super_organization)==null?void 0:r.id,k=(l=n==null?void 0:n.active_organization)==null?void 0:l.id,f=u&&k?`${u}|${k}`:null;if(f){await Ct(f,e);try{chrome.runtime.sendMessage({messageType:"dwHiddenUpdated"})}catch{}await ye()}await _e()&&L(!0)}catch{}},D=(m==null?void 0:m.cap1303ShouldDisplayAutocaptureImportForDev)??!1,ne=!!((m==null?void 0:m.lrr2025)??(m==null?void 0:m.lrr_2025)),re=!!((m==null?void 0:m.lrrManualRefreshEnabled)??(m==null?void 0:m.lrr_manual_refresh_enabled)),[ie,E]=i.useState("idle"),[oe,T]=i.useState(null),[K,A]=i.useState(!1),[ce,w]=i.useState(null),[Lt,I]=i.useState("idle"),[Bt,z]=i.useState(null);i.useEffect(()=>{const e=()=>{try{chrome.runtime.sendMessage({messageType:"getDWOptimizeState"},async r=>{chrome.runtime.lastError||r!=null&&r.isOptimizeConfigured&&await V(J.Home)})}catch{}};e();const a=r=>{(r==null?void 0:r.messageType)==="optionsChanged"&&e()};try{chrome.runtime.onMessage.addListener(a)}catch{}return()=>{try{chrome.runtime.onMessage.removeListener(a)}catch{}}},[]),i.useEffect(()=>{const e=a=>{if((a==null?void 0:a.messageType)==="dwManualRunStarted"&&(E("running"),T("Triggering analysis\u2026")),(a==null?void 0:a.messageType)==="dwManualRunCompleted"&&(a!=null&&a.ok?(E("success"),T("Run triggered.")):(a==null?void 0:a.error)==="timeout"?(E("timeout"),T("Timed out waiting for results.")):(E("error"),T("Failed to trigger analysis."))),(a==null?void 0:a.messageType)==="dwCleanupCompleted")if(a!=null&&a.ok){I("success");const r=typeof(a==null?void 0:a.totalDeleted)=="number"?a.totalDeleted:typeof(a==null?void 0:a.deletedCount)=="number"?a.deletedCount:void 0;z(r!=null?`Cleared ${r} objects from DW storage.`:"Cleanup succeeded.")}else(a==null?void 0:a.status)===403||(a==null?void 0:a.status)===404?(I("error"),z("Available only in local development environment")):(I("error"),z("Cleanup failed."));(a==null?void 0:a.messageType)==="dwAutopollStarted"&&(A(!0),w("Autopolling\u2026")),(a==null?void 0:a.messageType)==="dwAutopollStopped"&&(A(!1),w(null)),(a==null?void 0:a.messageType)==="dwAutopollFoundNewResults"&&(A(!1),w("New results detected."))};try{chrome.runtime.onMessage.addListener(e)}catch{}return()=>{try{chrome.runtime.onMessage.removeListener(e)}catch{}}},[]);const Ae=async()=>{E("running"),T("Triggering analysis\u2026");try{await new Promise(e=>{chrome.runtime.sendMessage({messageType:"dwManualRun"},()=>e())})}catch{E("error"),T("Failed to trigger analysis.")}},Pe=async()=>{try{w("Checking\u2026");const e=await new Promise(a=>{chrome.runtime.sendMessage({messageType:"dwPollOnce"},r=>a(r))});e!=null&&e.success&&(e!=null&&e.stored)?w("New results detected."):e!=null&&e.success?w("No change."):w("Poll failed.")}catch{w("Poll failed.")}},Fe=async e=>{var a,r;try{e?(w("Autopolling\u2026"),(a=await new Promise(l=>{chrome.runtime.sendMessage({messageType:"dwAutopollStart"},u=>l(u))}))!=null&&a.success&&A(!0)):(r=await new Promise(l=>{chrome.runtime.sendMessage({messageType:"dwAutopollStop"},u=>l(u))}))!=null&&r.success&&(A(!1),w(null))}catch{}},Me=async()=>{I("running"),z("Clearing local DW data\u2026");try{await new Promise(e=>{chrome.runtime.sendMessage({messageType:"dwClearLocal"},()=>e())}),I("success"),z("Cleared local DW databases.")}catch{I("error"),z("Local clear failed.")}},[le,$e]=i.useState(!1),[de,Re]=i.useState(!0),Le=()=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=async()=>{var r,l,u,k;const a=(r=e.files)==null?void 0:r[0];if(a)try{_(!0),x("Importing\u2026");const f=((u=(l=n==null?void 0:n.active_organization)==null?void 0:l.super_organization)==null?void 0:u.id)||"unknown",P=((k=n==null?void 0:n.active_organization)==null?void 0:k.id)||"unknown",{actionsImported:Ve,scribesImported:Je}=await Et(a,{superOrgId:f,orgId:P},{generateDummyScreenshots:le,importUnderCurrentUser:de,currentUserId:(n==null?void 0:n.user_id)||(n==null?void 0:n.id)||"unknown"});x(`Imported ${Je} scribes and ${Ve} actions`)}catch(f){const P=f instanceof Error?f.message:"Unknown error";x(`Import failed: ${P}`)}finally{_(!1)}},e.click()},Be=async()=>{var e,a,r;try{v(!0),x("Exporting\u2026");const l=((a=(e=n==null?void 0:n.active_organization)==null?void 0:e.super_organization)==null?void 0:a.id)||"unknown",u=((r=n==null?void 0:n.active_organization)==null?void 0:r.id)||"unknown",{fileName:k,screenshotCount:f}=await Tt({superOrgId:l,orgId:u},{slim:h});x(`Exported ${f} screenshots in ${k}`)}catch(l){const u=l instanceof Error?l.message:"Unknown error";x(`Export failed: ${u}`)}finally{v(!1)}},B=async()=>{try{const e=await new Promise(a=>{chrome.runtime.sendMessage({messageType:"dwActionLogGetCount"},r=>a(r))});e!=null&&e.success&&typeof e.count=="number"&&H(e.count)}catch{}},We=async()=>{try{const e=await new Promise(a=>{chrome.runtime.sendMessage({messageType:"dwActionLogGetEnabled"},r=>a(r))});e!=null&&e.success&&M(!!e.enabled)}catch{}};i.useEffect(()=>{D&&(We(),B())},[D]);const Oe=async e=>{try{M(e),await new Promise(a=>{chrome.runtime.sendMessage({messageType:"dwActionLogSetEnabled",enabled:e},r=>a(r))}),o(e?"Action logging enabled.":"Action logging disabled.")}catch{}},Ue=async()=>{try{Z(!0),o("Replaying\u2026");const e=await new Promise(a=>{chrome.runtime.sendMessage({messageType:"dwActionLogReplay"},r=>a(r))});e!=null&&e.success?o(`Replayed ${e.enqueued||0} actions.`):o("Replay failed."),B()}catch{o("Replay failed.")}finally{Z(!1)}},He=()=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=async()=>{var r;const a=(r=e.files)==null?void 0:r[0];if(a)try{R(!0),o("Importing\u2026");const{actionsImported:l,screenshotsImported:u}=await It(a);o(`Imported ${l} actions and ${u} screenshots`),B()}catch(l){const u=l instanceof Error?l.message:"Unknown error";o(`Import failed: ${u}`)}finally{R(!1)}},e.click()},Ke=async()=>{var e,a,r;try{Q(!0),o("Exporting\u2026");const l=((a=(e=n==null?void 0:n.active_organization)==null?void 0:e.super_organization)==null?void 0:a.id)||"unknown",u=((r=n==null?void 0:n.active_organization)==null?void 0:r.id)||"unknown",{fileName:k,actionCount:f,screenshotCount:P}=await zt({orgScope:`${l}|${u}`});o(`Exported ${f} actions, ${P} screenshots in ${k}`)}catch(l){const u=l instanceof Error?l.message:"Unknown error";o(`Export failed: ${u}`)}finally{Q(!1)}},Ge=async()=>{try{te(!0),o("Clearing\u2026");const e=await new Promise(a=>{chrome.runtime.sendMessage({messageType:"dwActionLogClear"},r=>a(r))});e!=null&&e.success?o(`Cleared ${e.deleted||0} logged actions.`):o("Clear failed."),B()}catch{o("Clear failed.")}finally{te(!1)}};return t.jsxs("div",{className:"flex flex-col h-screen bg-slate-50",children:[t.jsxs("div",{className:"flex-none p-4",children:[t.jsx(St,{user:n,onVisitWorkspaceDocuments:()=>{},onGoToOptionsPage:()=>{},onBack:Ne,showTeamSelector:!1,showHomeIcon:!1,showSettingsIcon:!1,centerContent:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"text-[16px] font-semibold m-0",children:"Discovered Workflows"}),(c==null?void 0:c.length)>0&&t.jsx(st,{children:c.length})]})}),(ne&&re||D)&&t.jsxs("div",{className:"mx-2 p-2 border-b border-slate-200 rounded-md",children:[ne&&re&&t.jsxs("div",{className:"mb-2 p-2 rounded-md bg-slate-100 border border-slate-200",children:[t.jsx("div",{className:"mb-1 text-xs text-slate-500",children:"Server (remote)"}),t.jsxs("div",{className:"flex items-center gap-2",children:[tt,t.jsx(b,{size:"small",variant:"primary",disabled:ie==="running",onClick:Ae,children:ie==="running"?"Refreshing\u2026":"New job"}),t.jsx(b,{size:"small",variant:"secondary",disabled:K,onClick:Pe,children:K?"Polling\u2026":"Poll"}),t.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-600",children:[t.jsx("input",{type:"checkbox",checked:K,onChange:e=>Fe(e.target.checked)}),"Autopoll"]}),oe&&t.jsx("span",{className:"text-xs text-slate-500",children:oe}),ce&&t.jsx("span",{className:"text-xs text-slate-500",children:ce})]})]}),D&&t.jsxs("div",{className:"mt-2 p-2 rounded-md bg-slate-50 border border-slate-200",children:[t.jsx("div",{className:"mb-1 text-xs text-slate-500",children:"Local (device)"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-600",children:[t.jsx("input",{type:"checkbox",checked:le,onChange:e=>$e(e.target.checked)}),"Backfill missing screenshots"]}),t.jsx(b,{size:"small",variant:"secondary",disabled:y,onClick:Le,children:y?"Importing\u2026":"\u{1F4C2}"}),t.jsx(b,{size:"small",variant:"secondary",disabled:S,onClick:Be,children:S?"Exporting\u2026":"\u{1F4BE}"}),t.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-600",children:[t.jsx("input",{type:"checkbox",checked:h,onChange:e=>F(e.target.checked)}),"Slim"]}),g&&t.jsx("span",{className:"text-xs text-slate-500",children:g})]}),t.jsx("div",{className:"mt-2",children:t.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-600",htmlFor:"dw-dev-import-under-current",children:[t.jsx("input",{id:"dw-dev-import-under-current",type:"checkbox",checked:de,onChange:e=>Re(e.target.checked)}),"Import under current user"]})}),t.jsx("div",{className:"mt-2",children:t.jsx(b,{size:"small",variant:"danger",className:"w-full",onClick:Me,children:"Clear local DW databases"})})]}),D&&t.jsxs("div",{className:"mt-2 p-2 rounded-md bg-slate-50 border border-slate-200",children:[t.jsx("div",{className:"mb-1 text-xs text-slate-500",children:"Action logging"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-600",children:[t.jsx("input",{type:"checkbox",checked:N,onChange:e=>Oe(e.target.checked)}),"Action logging"]}),t.jsxs("span",{className:"text-xs text-slate-500",children:["Logged: ",U]}),t.jsx(b,{size:"small",variant:"primary",disabled:X,onClick:Ue,children:X?"Replaying\u2026":"Replay"}),t.jsx(b,{size:"small",variant:"secondary",disabled:C,onClick:He,children:C?"Importing\u2026":"\u{1F4C2}"}),t.jsx(b,{size:"small",variant:"secondary",disabled:Y,onClick:Ke,children:Y?"Exporting\u2026":"\u{1F4BE}"}),$&&t.jsx("span",{className:"text-xs text-slate-500",children:$})]}),t.jsx("div",{className:"mt-2",children:t.jsx(b,{size:"small",variant:"danger",className:"w-full",disabled:ee,onClick:Ge,children:ee?"Clearing\u2026":"Clear action logging database"})})]})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:t.jsxs("div",{className:"space-y-6",children:[c&&c.length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"space-y-3",children:c.map(e=>{var a;return t.jsx(lt,{location:"sidepanel",type:"auto_captured_scribe",className:"px-5 py-4",leftIcon:t.jsx(dt,{appIconName:nt[q(e)]||q(e),iconUrl:rt(q(e),64,!0)}),title:e.title,capturedText:"",stepsText:`${(((a=e.actions)==null?void 0:a.length)||0).toString()} steps`,onCta:()=>ze(e.suggestion_id||e.id),onDelete:()=>De((e==null?void 0:e.suggestion_id)||(e==null?void 0:e.id))},e.suggestion_id||e.id)})}),t.jsx("div",{className:"mt-6",children:t.jsx(Pt,{onFeedbackSubmit:Ce,onFeedbackSkip:Ee})})]}),d&&d.length>0&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-md font-semibold mb-3",children:"Workspace Scribes"}),t.jsx("div",{className:"space-y-2",children:d.map(e=>t.jsxs("div",{className:"bg-white rounded-md p-3 border border-slate-200",children:[t.jsx("div",{className:"font-medium",children:e.name}),t.jsx("div",{className:"text-sm text-slate-500",children:e.description})]},e.id))})]}),p&&p.length>0&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-md font-semibold mb-3",children:"Gallery Scribes"}),t.jsx("div",{className:"space-y-2",children:p.map(e=>t.jsxs("div",{className:"bg-white rounded-md p-3 border border-slate-200",children:[t.jsx("div",{className:"font-medium",children:e.name}),t.jsx("div",{className:"text-sm text-slate-500",children:e.description})]},e.id))})]}),se&&t.jsx("div",{className:"mt-4 text-sm text-slate-500 text-center",children:"Loading suggested Scribes..."}),ae&&t.jsx("div",{className:"mt-4 text-sm text-red-500 text-center",children:ae}),(!c||c.length===0)&&(!d||d.length===0)&&(!p||p.length===0)&&!se&&t.jsx("div",{className:"flex flex-col items-center justify-center py-8",children:t.jsx("p",{className:"text-slate-500",children:"No discovered workflows available"})})]})}),t.jsx(wt,{open:xe,onOpenChange:L,title:"Why did you discard that Scribe?",subtitle:"Select all that are applicable.",reasons:["Topic already documented","Topic not worth saving","Steps or screenshots inaccurate","Too much effort to edit","Other"],onSubmit:Te,onSkip:Ie})]})},Rt=()=>t.jsxs(qe.StrictMode,{children:[t.jsx("style",{type:"text/css",children:at}),t.jsxs(Qe,{store:ue,children:[t.jsx($t,{}),t.jsx(Xe,{})]})]}),ge=document.getElementById("root");ge&&Ye(ge).render(t.jsx(Rt,{}));
