(()=>{"use strict";var e,t={30695:(e,t,o)=>{function n(){var e,t,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(o,n,i,a){var c=n&&n.prototype instanceof u?n:u,l=Object.create(c.prototype);return r(l,"_invoke",function(o,n,r){var i,a,c,u=0,l=r||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,o){return i=t,a=0,c=e,m.n=o,s}};function f(o,n){for(a=o,c=n,t=0;!d&&u&&!r&&t<l.length;t++){var r,i=l[t],f=m.p,p=i[2];o>3?(r=p===n)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=f&&((r=o<2&&f<i[1])?(a=0,m.v=n,m.n=i[1]):f<p&&(r=o<3||i[0]>n||n>p)&&(i[4]=o,i[5]=n,m.n=p,a=0))}if(r||o>1)return s;throw d=!0,n}return function(r,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,p),a=l,c=p;(t=a<2?e:c)||!d;){i||(a?a<3?(a>1&&(m.n=-1),f(a,c)):m.n=c:m.v=c);try{if(u=2,i){if(a||(r="next"),t=i[r]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),a=1);i=e}else if((t=(d=m.n<0)?c:o.call(n,m))!==s)break}catch(t){i=e,a=1,c=t}finally{u=1}}return{value:t,done:d}}}(o,i,a),!0),l}var s={};function u(){}function l(){}function d(){}t=Object.getPrototypeOf;var m=[][i]?t(t([][i]())):(r(t={},i,function(){return this}),t),f=d.prototype=u.prototype=Object.create(m);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=d,r(f,"constructor",d),r(d,"constructor",l),l.displayName="GeneratorFunction",r(d,a,"GeneratorFunction"),r(f),r(f,a,"Generator"),r(f,i,function(){return this}),r(f,"toString",function(){return"[object Generator]"}),(n=function(){return{w:c,m:p}})()}function r(e,t,o,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}r=function(e,t,o,n){function a(t,o){r(e,t,function(e){return this._invoke(t,o,e)})}t?i?i(e,t,{value:o,enumerable:!n,configurable:!n,writable:!n}):e[t]=o:(a("next",0),a("throw",1),a("return",2))},r(e,t,o,n)}function i(e,t,o,n,r,i,a){try{var c=e[i](a),s=c.value}catch(e){return void o(e)}c.done?t(s):Promise.resolve(s).then(n,r)}function a(e){return function(){var t=this,o=arguments;return new Promise(function(n,r){var a=e.apply(t,o);function c(e){i(a,n,r,c,s,"next",e)}function s(e){i(a,n,r,c,s,"throw",e)}c(void 0)})}}function c(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){return new Promise(function(o,n){var r=null;if("object"===s(e))r=e;else{if("string"!=typeof e)throw"TypeError: First argument should be a string or an object.";r=c({},e,t)}chrome.storage.local.set(r,function(){return chrome.runtime.lastError?n(chrome.runtime.lastError):o()})})}function l(e){return new Promise(function(t,o){"string"==typeof e?chrome.storage.local.get([e],function(o){t(o[e])}):Array.isArray(e)?chrome.storage.local.get(null,function(o){t(e.map(function(e){return o[e]}))}):e||chrome.storage.local.get(null,function(e){t(e)})})}function d(e){return m.apply(this,arguments)}function m(){return(m=a(n().m(function e(t){return n().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){chrome.storage.local.get("options",function(o){e(t?o.options[t]:o.options)})}))},e)}))).apply(this,arguments)}function f(e,t){if(!navigator.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(navigator.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=navigator.mediaDevices.enumerateDevices.bind(navigator)),navigator.enumerateDevices){var o=[],n=[],r=[],i=[],a=[],c=[];navigator.enumerateDevices(function(t){t.forEach(function(e){var t,s={};for(var u in e)s[u]=e[u];o.forEach(function(e){e.deviceId===s.deviceId&&(t=!0)}),t||("audio"===s.kind&&(s.kind="audioinput"),"video"===s.kind&&(s.kind="videoinput"),s.deviceId||(s.deviceId=s.id),s.id||(s.id=s.deviceId),"audioinput"!==s.kind&&"audio"!==s.kind||s.label&&!s.label.startsWith("AS")&&i.push(s),"audiooutput"===s.kind&&a.push(s),"videoinput"!==s.kind&&"video"!==s.kind||c.push(s),-1!==s.kind.indexOf("audio")&&s.label&&!s.label.startsWith("AS")&&n.push(s),-1!==s.kind.indexOf("video")&&r.push(s),o.push(s))}),e&&e({allMediaDevices:o,allVideoDevices:r,allAudioDevices:n,videoInputDevices:c,audioInputDevices:i,audioOutputDevices:a})})}else t(null,"Neither navigator.mediaDevices.enumerateDevices NOR MediaStreamTrack.getSources are available.")}navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)});var p={preview:{ws:"wss",domain:"preview.awesomescreenshot.com",cookie:"awesomescreenshot.com",schema:"https"},www:{ws:"wss",domain:"www.awesomescreenshot.com",cookie:"awesomescreenshot.com",schema:"https"},alpha:{ws:"wss",domain:"alpha.awesomescreenshot.com",cookie:"awesomescreenshot.com",schema:"https"},local:{ws:"wss",domain:"www.awesomescreenshot.cn",cookie:"awesomescreenshot.cn",schema:"https"}};for(var h in p){var v=p[h];v.baseUrl=v.schema+"://"+v.domain,v.wsUrl=v.ws+"://"+v.domain}const g=p.www;o(27484),o(9669),o(40705),o(28374);function b(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function y(e,t){try{chrome.runtime.sendMessage({action:"googleEvent",name:e,extra:t})}catch(e){}}var k=["cam-deviceId","mic-deviceId","save-capture-location","save-location","activeTab","record_mic","record_cam","record_tabsound","record_toolbar","record_type","video-format","max_resolution","auto-save-img","download_directory","save-as","date-format","time-format","add-url","ctl_bar","auto-hour","auto-min","auto-sec","alert-win","has_setup","record_countdown","auto-timer-stop"];function _(e,t){var o,n,r;e&&k.indexOf(e)<0&&chrome.runtime.sendMessage({action:"updateOptionSetting",data:(o={},n="chrome_ext_"+e,r=t,(n=b(n))in o?Object.defineProperty(o,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[n]=r,o)})}function C(){var e=navigator.userAgent,t=e.indexOf("Chrome/"),o=e.substring(t+7,e.length),n=o.indexOf("."),r=o.substring(0,n);return parseInt(r)<116}function S(e){!function(e,t){chrome.tabs.query(Object.assign({active:!0},e),function(e){t(e[0])})}({},function(t){var o={url:e};t&&t.incognito||!t?chrome.windows.getAll(function(e){e.forEach(function(e){e.incognito||"normal"!==e.type||(o.windowId=e.id)}),I(o)}):(o.index=(t?t.index:currentTabIndex||0)+1,o.windowId=t?t.windowId:currentWindowId,I(o))})}function I(e){e&&e.url&&(e.hasOwnProperty("index")&&!e.index&&delete e.index,chrome.tabs.create(e,function(e){chrome.windows.update(e.windowId,{focused:!0})}))}Math.pow(2,31);function x(){var e,t,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",r=o.toStringTag||"@@toStringTag";function i(o,n,r,i){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return T(u,"_invoke",function(o,n,r){var i,c,s,u=0,l=r||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,o){return i=t,c=0,s=e,m.n=o,a}};function f(o,n){for(c=o,s=n,t=0;!d&&u&&!r&&t<l.length;t++){var r,i=l[t],f=m.p,p=i[2];o>3?(r=p===n)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=f&&((r=o<2&&f<i[1])?(c=0,m.v=n,m.n=i[1]):f<p&&(r=o<3||i[0]>n||n>p)&&(i[4]=o,i[5]=n,m.n=p,c=0))}if(r||o>1)return a;throw d=!0,n}return function(r,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,p),c=l,s=p;(t=c<2?e:s)||!d;){i||(c?c<3?(c>1&&(m.n=-1),f(c,s)):m.n=s:m.v=s);try{if(u=2,i){if(c||(r="next"),t=i[r]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),c=1);i=e}else if((t=(d=m.n<0)?s:o.call(n,m))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:d}}}(o,r,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(T(t={},n,function(){return this}),t),d=u.prototype=c.prototype=Object.create(l);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,T(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=u,T(d,"constructor",u),T(u,"constructor",s),s.displayName="GeneratorFunction",T(u,r,"GeneratorFunction"),T(d),T(d,r,"Generator"),T(d,n,function(){return this}),T(d,"toString",function(){return"[object Generator]"}),(x=function(){return{w:i,m}})()}function T(e,t,o,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}T=function(e,t,o,n){function i(t,o){T(e,t,function(e){return this._invoke(t,o,e)})}t?r?r(e,t,{value:o,enumerable:!n,configurable:!n,writable:!n}):e[t]=o:(i("next",0),i("throw",1),i("return",2))},T(e,t,o,n)}function P(e,t,o,n,r,i,a){try{var c=e[i](a),s=c.value}catch(e){return void o(e)}c.done?t(s):Promise.resolve(s).then(n,r)}function O(e,t,o){return chrome.tabs.sendMessage(e,t,{frameId:0},o)}function M(e,t){return chrome.runtime.sendMessage(e,t)}function j(e){return new Promise(function(t,o){M(e,function(e){chrome.runtime.lastError?o(chrome.runtime.lastError):t(e)})})}function L(e,t){return A.apply(this,arguments)}function A(){var e;return e=x().m(function e(t,o){return x().w(function(e){for(;;)switch(e.n){case 0:if(t.target="offscreen",C()){e.n=1;break}return e.a(2,M(t,o));case 1:return e.n=2,l("recordTab");case 2:O(e.v,t,o).catch(function(){});case 3:return e.a(2)}},e)}),A=function(){var t=this,o=arguments;return new Promise(function(n,r){var i=e.apply(t,o);function a(e){P(i,n,r,a,c,"next",e)}function c(e){P(i,n,r,a,c,"throw",e)}a(void 0)})},A.apply(this,arguments)}function E(e){return new Promise(function(t,o){M({action:"record/getInfo",keys:e,target:"offscreen"}).then(t).catch(o)})}function D(){var e,t,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",r=o.toStringTag||"@@toStringTag";function i(o,n,r,i){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return N(u,"_invoke",function(o,n,r){var i,c,s,u=0,l=r||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,o){return i=t,c=0,s=e,m.n=o,a}};function f(o,n){for(c=o,s=n,t=0;!d&&u&&!r&&t<l.length;t++){var r,i=l[t],f=m.p,p=i[2];o>3?(r=p===n)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=f&&((r=o<2&&f<i[1])?(c=0,m.v=n,m.n=i[1]):f<p&&(r=o<3||i[0]>n||n>p)&&(i[4]=o,i[5]=n,m.n=p,c=0))}if(r||o>1)return a;throw d=!0,n}return function(r,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,p),c=l,s=p;(t=c<2?e:s)||!d;){i||(c?c<3?(c>1&&(m.n=-1),f(c,s)):m.n=s:m.v=s);try{if(u=2,i){if(c||(r="next"),t=i[r]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),c=1);i=e}else if((t=(d=m.n<0)?s:o.call(n,m))!==a)break}catch(t){i=e,c=1,s=t}finally{u=1}}return{value:t,done:d}}}(o,r,i),!0),u}var a={};function c(){}function s(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(N(t={},n,function(){return this}),t),d=u.prototype=c.prototype=Object.create(l);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,N(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=u,N(d,"constructor",u),N(u,"constructor",s),s.displayName="GeneratorFunction",N(u,r,"GeneratorFunction"),N(d),N(d,r,"Generator"),N(d,n,function(){return this}),N(d,"toString",function(){return"[object Generator]"}),(D=function(){return{w:i,m}})()}function N(e,t,o,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}N=function(e,t,o,n){function i(t,o){N(e,t,function(e){return this._invoke(t,o,e)})}t?r?r(e,t,{value:o,enumerable:!n,configurable:!n,writable:!n}):e[t]=o:(i("next",0),i("throw",1),i("return",2))},N(e,t,o,n)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,i,a,c=[],s=!0,u=!1;try{if(i=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;s=!1}else for(;!(s=(n=i.call(o)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,r=e}finally{try{if(!s&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(u)throw r}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function G(e,t,o,n,r,i,a){try{var c=e[i](a),s=c.value}catch(e){return void o(e)}c.done?t(s):Promise.resolve(s).then(n,r)}function W(e){return function(){var t=this,o=arguments;return new Promise(function(n,r){var i=e.apply(t,o);function a(e){G(i,n,r,a,c,"next",e)}function c(e){G(i,n,r,a,c,"throw",e)}a(void 0)})}}function F(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function B(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?F(Object(o),!0).forEach(function(t){q(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):F(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function q(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}var H,Y=g.baseUrl,Q=!1,z=null,Z=null,J=null,K=0,X=!1,ee=!1,te=!1,oe=100,ne=0,re=20,ie=0,ae=null,ce=!1,se=!0,ue="normalPage",le=!1,de=null,me=!1,fe=!1,pe=!1,he=!1,ve=[],ge=[],$e=!1,be=!1,we=!1,ye=!1,ke=!1,_e=!1,Ce=!1,Se={},Ie="",xe=!1;function Te(e){chrome.tabs.create({url:e})}function Pe(){if(localStorage.defaultSavePlace){var e=localStorage.defaultSavePlace;if("folder-.-0-.-My Items"!=e)return localStorage.removeItem("defaultSavePlace"),e}return""}function Oe(){return{height:window.screen.height,width:window.screen.width,left:window.screen.availLeft,top:window.screen.availTop}}function Me(e,t){if("channel"===(e?e.split("-.-")[0]:"")){var o=e.split("-.-")[2];e.split("-.-")[1];if(o)t?Ce=!0:_e=!0,fetch(Y+"/api/v1/workspace/info?".concat(new URLSearchParams({workspaceID:o}))).then(function(e){return e.json()}).then(function(e){if(e.data&&e.data.workspaces){var o=e.data.workspaces;o.channels;t?ye=!o.allowVideo:ke=!o.allowImage}}).catch(function(){})}else t?Ce=!1:_e=!1}function je(e,t){chrome.tabs.query(Object.assign({active:!0,currentWindow:!0},e),function(e){t(e[0])})}function Le(e,t){"object"===V(e)?Se=B(B({},Se),e):"string"==typeof e&&(Se=B(B({},Se),{},q({},e,t))),setTimeout(function(){d().then(function(o){"object"===V(e)?(o=B(B({},o),e),e.max_resolution&&(o["save-location"]=Se["save-location"])):"string"==typeof e&&(o=B(B({},o),{},q({},e,t))),u("options",o)})},100)}$("[data-i18n-id]").each(function(){var e=$(this).attr("data-i18n-id");$(this).html(chrome.i18n.getMessage(e))}),$("[data-i18n-text-id]").each(function(){var e=$(this).attr("data-i18n-text-id");$(this).attr("data-text",chrome.i18n.getMessage(e))}),$("[data-i18n-aria-label]").each(function(){var e=$(this).attr("data-i18n-aria-label");$(this).attr("aria-label",chrome.i18n.getMessage(e))}),M({action:"isCapturing"},function(e){e&&He("capturing-view")}),M({action:"synchOptions"});function Ae(){return Ae=W(D().m(function e(){var t,o,n,r,i,a,c;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,j({action:"checkOffScreen"});case 1:if(!e.v){e.n=3;break}return e.n=2,E("recordingStatus").catch(function(e){});case 2:Ie=e.v;case 3:if("recording"!==Ie){e.n=5;break}return He("recording-view"),yt(),lt(),setInterval(Tt,100),e.n=4,E(["isPaused","socketClient"]);case 4:t=e.v,o=U(t,1),bt(!!o[0]);case 5:return e.n=6,l();case 6:if(n=e.v,Se=n.options,(r=Pe())&&(Se.defaultSavePlace=r,_("defaultSavePlace",r)),"preparing"!==Ie){e.n=10;break}if(!C()){e.n=9;break}if(!(i=n.recordBgWin)||!i.winId){e.n=8;break}return e.n=7,chrome.windows.get(i.winId).catch(function(e){});case 7:(a=e.v)&&"popup"===a.type&&chrome.windows.update(i.winId,{focused:!0}).then(function(){window.close()});case 8:e.n=10;break;case 9:M({action:"reopenPrepare"},function(){window.close()});case 10:return n.recordingInfo,Se&&Se["dark-mode"]&&$("body").addClass("dark-mode"),"recording"!==Ie&&"preparing"!==Ie?chrome.cookies.getAll({url:Y},function(e){if(chrome.runtime.lastError,e||(e=[]),e){for(var t=0,o=e.length;t<o;t++)if("screenshot_personal_fullname"===e[t].name)var n=decodeURI(e[t].value);else if("screenshot_personal_type"===e[t].name)var r=e[t].value;else if("screenshot_personal_premium_level"===e[t].name)var i=e[t].value;else if("screenshot_personal_permission"===e[t].name)e[t].value.split(",");else if("screenshot_personal_uid"===e[t].name)var a=e[t].value;n?(Q=!0,$(".aws-info").find(".user-name").text(n).attr("title",n),$("#no-signin").hide(),$("#aws-account").show(),chrome.storage.local.get("userinfo",function(e){e.userinfo&&(K=parseInt(i),X=e.userinfo.newPremium,ee=e.userinfo.allowUploadImage,te=e.userinfo.allowVideoCreate,oe=e.userinfo.imageLimitation,ne=e.userinfo.imageTotalLimitation,re=e.userinfo.videoLimitation,ie=e.userinfo.videoTotalLimitation,Se.videoTotalLimitation=ie,$e=!0,chrome.storage.local.set({userinfo:{newPremium:e.userinfo.newPremium,uid:e.userinfo.uid,premiumLevel:parseInt(i),allowUploadImage:e.userinfo.allowUploadImage,allowVideoCreate:e.userinfo.allowVideoCreate,imageLimitation:e.userinfo.imageLimitation,imageTotalLimitation:e.userinfo.imageTotalLimitation,videoLimitation:e.userinfo.videoLimitation,videoTotalLimitation:e.userinfo.videoTotalLimitation}}),ot()),$("#loading").addClass("active"),$.ajax({method:"GET",url:Y+"/api/v1/user/einfo"}).done(function(e){K=parseInt(e.data.premiumLevel),X=e.data.newPremium,ee=e.data.permission.allowUploadImage,te=e.data.permission.allowVideoCreate,oe=e.data.counts.imageLimitation,ne=e.data.counts.imageTotalLimitation,re=e.data.counts.videoLimitation,ie=e.data.counts.videoTotalLimitation,Se.videoTotalLimitation=ie,$e=!0,chrome.storage.local.set({userinfo:{newPremium:X,uid:a,premiumLevel:K,allowUploadImage:ee,allowVideoCreate:te,imageLimitation:oe,imageTotalLimitation:ne,videoLimitation:re,videoTotalLimitation:ie}}),$("#loading").removeClass("active"),ot(),setTimeout(function(){$(document.body).removeClass("no-transition")},500)}).catch(function(e){$("#loading").addClass("hide"),setTimeout(function(){$(document.body).removeClass("no-transition")},500)})}),Me(Se.defaultSavePlace,!1),Me(Se.defaultSavePlace_record,!0)):($e=!0,chrome.storage.local.remove("userinfo"),"local"===Se["save-location"]&&Xe(),$("#loading").addClass("hide"),$("#no-signin").show(),$("#aws-account").hide(),ot()),"0"==r?$(".aws-user").removeClass("premium"):void 0===r?($(".aws-premium-icon").hide(),$(".aws-upgrade").hide()):$(".aws-user").addClass("premium"),Q||_t()}}):Ee(),e.n=11,E("isInCountdown").catch(function(){});case 11:c=e.v,"preparing"!==Ie&&"countdown"!==Ie||(He(c?"video-countdown-view":"video-prepare-view"),ae=setInterval(W(D().m(function e(){var t;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l("recordingStatus");case 1:if("recording"!==e.v){e.n=2;break}He("recording-view"),clearInterval(ae),Ee(),ae=null,setInterval(Tt,100),e.n=4;break;case 2:if(!c){e.n=4;break}return e.n=3,E("countdown");case 3:t=e.v,$("#countdown-num").text(t);case 4:return e.a(2)}},e)})),100)),De(),Ue(),Ne(),je({},function(e){O(e.id,{action:"check-videos"}).catch(function(e){})}),L({action:"checkUploadingRecord"}).then(function(){var e=W(D().m(function e(t){return D().w(function(e){for(;;)switch(e.n){case 0:t&&!t.isBeginRecorded&&t.unfinished&&t.tookLongtime&&$(".backupList").show();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),M({action:"updateDefaultIcon"});case 12:return e.a(2)}},e)})),Ae.apply(this,arguments)}function Ee(){var e;(e=Y,new Promise(function(t,o){chrome.cookies.get({url:e,name:"screenshot_personal_premium_level"},function(e){e&&parseInt(e.value)>1?t(!0):t(!1)})})).then(function(e){e||$("#toggle-timer").hide()})}function De(){$("#aws-info-upgrade").on("click",function(){y("upgrade from main menu","upgrade"),Te("https://www.awesomescreenshot.com/pricing?from=extMenu"),window.close()}),$("#aws-login").on("click",function(){Te(Y+"/signin?from=ext_pop_bottom"),window.close()}),$(".link-item").on("click",function(){Te($(this).attr("data-url")),window.close()}),$("#user").on("click",function(){Te("https://www.awesomescreenshot.com/settings"),window.close()}),$(".feedback").on("click",function(){Te("/feedback.html"),window.close()}),$(".backToMenu").on("click",function(){He("main-menu")}),$(".tab-header-item").on("click",function(){var e=$(this).attr("data-tab");($(".tab-header").removeClass("screenshot record").addClass(e),$(".tab-header-item").removeClass("active"),$(this).addClass("active"),$(".tab-item").removeClass("active"),$(".tab-item.tab-"+e).addClass("active"),e&&Le({activeTab:e}),"record"===e)?"none"===$("#audio").css("display")||It():"screenshot"===e&&St()}),"record"===Se.popupTab||"remember"===Se.popupTab&&"record"===Se.activeTab?$(".tab-header-item[data-tab='record']").trigger("click"):"screenshot"!==Se.activeTab&&Le({activeTab:"screenshot"}),$(".action-btn").on("click",function(){var e=$(this);e.hasClass("option")?Te("/option-react.html"):e.hasClass("feedback")?Te("/feedback.html"):e.hasClass("more")?(e.toggleClass("expand"),$(".more-links").toggle()):e.hasClass("recording")?Te("/video-list.html"):e.hasClass("sign-out")?Te(Y+"/web/user/logout"):e.hasClass("backupList")&&(M({action:"updateDefaultIcon"}),u("haveAlertBackupList",!0),Te("/backup-list.html"))}),$(".more-links-item").on("click",function(){var e=$(this);if(e.hasClass("mp"))var t=Y+"/all_images";else if(e.hasClass("mv"))t=Y+"/all_videos";else if(e.hasClass("logout"))t=Y+"/web/user/logout";Te(t)}),chrome.tabs.query({active:!0,currentWindow:!0},function(e){var t=e[0],o=(H=t.url).match(/(https?|file):\/\/*\/*/gi),n=/Edg/.test(window.navigator.userAgent),r=function(e){var t=/Edg/.test(window.navigator.userAgent),o=chrome.runtime.getURL("");t?e.startsWith(o)?ue="ourExtensionPage":e.match(/edge(.*):\/\//)||e.match(/about:blank/)?ue="chromePage":e.match(/https:\/\/microsoftedge.microsoft.com\/addons/i)||e.match(/https:\/\/copilot.microsoft.com\/chats/i)?ue="storePage":e.match(/extension:\/\//)&&(ue="OtherExtensionPage"):e.startsWith(o)?ue="ourExtensionPage":e.match(/chrome-extension:\/\//)?ue="OtherExtensionPage":e.match(/chrome(.*):\/\//)||e.match(/about:blank/)?ue="chromePage":(e.match(/https:\/\/chrome.google.com\/webstore/i)||e.match(/https:\/\/chromewebstore.google.com/i))&&(ue="storePage");return ue}(H);if(n?(null==o||H.match(/https:\/\/microsoftedge.microsoft.com\/addons/i)||Mt(H)||"ourExtensionPage"!=r&&"normalPage"!=r)&&(se=!1):null!=o&&!Mt(H)||"ourExtensionPage"==r||(se=!1),"complete"!=t.status&&($("#selected").attr({title:"Page still loading! Please wait."}).addClass("disabled"),!1),/http|https|file|ftp/.test(H.slice(0,5))||"ourExtensionPage"==ue||(se=!1,"normalPage"==ue&&(ue="storePage")),ce=!!/file:/.test(H.slice(0,5)),se)$("#record-type-custom");else{var i=document.getElementsByClassName("content-affect");Array.prototype.forEach.call(i,function(e){e.classList.add("disable")}),$("#record-type-custom").attr({disabled:!0})}}),$("#open-setting").on("click",function(){var e="chrome://extensions/?id="+chrome.runtime.id;chrome.tabs.create({url:e})}),chrome.extension.isAllowedFileSchemeAccess(function(e){le=e}),chrome.runtime.onMessage.addListener(function(e,t,o){switch(e.action){case"enable_selected":$("#selected").attr({title:""}).css({color:"#000"});break;case"shownew":case"closeWin":window.close();break;case"entireCaptureProgress":$("#entire-progress-percentage").text(e.percentage),$("#entire-progress").css("width",e.percentage),e.scrollNum&&e.scrollNum>=1&&$("#stop-msg").show();break;case"updateRecordUI":yt();break;case"page-video-status":be||(e.status?(be=!0,We()):Fe())}}),$(".custom-select").find(".select-option-item").on("mousedown",function(e,t){var o=$(this),n=$(this).attr("data-value"),r=$(this).attr("data-text"),i=$(this).parents(".custom-select").attr("data-option");function a(e){o.parents(".custom-select").attr("data-value",n).find(".display-item").text(r),o.siblings().removeClass("selected").end().addClass("selected"),e||Le(q({},i,n))}if("max_resolution"===i){var c="local"===Se["save-location"];"720"===n?(a(c),Je(n)):"1080"!==n&&"4k"!==n||(Q?c?K>1?(a(!!t),Je(n)):Ve("signin-local-upgrade","Record_resolution"):K>1?(a(!!t),Je(n)):Ve("signin-limit-upgrade","Record_resolution"):Ve("no-signin-local-upgrade","Record_resolution"))}else"save-location"===i?(Q?"local"===n?parseInt(K)<2&&0!==X||0===parseInt(K)?Xe():(parseInt(K),tt()):parseInt(K)<2&&ie<re&&ie>=.75*re?(et(),$(".record-tip.try.video").css("display","flex"),$(".record-tip.video").find(".count").text(ie+"/"+re)):tt():"local"===n?Xe():et(),"local"===n?$("#record-bubble").removeClass("hidde-bubble"):($("#record-bubble").addClass("hidde-bubble"),t||Q||Ve("sign-in","record")),a(!!t),function(e){"local"===e?($("#cloud_icon").hide(),$("#local_icon").show()):($("#cloud_icon").show(),$("#local_icon").hide())}(n),$e&&function(){var e=Se.max_resolution,t=(Se.record_toolbar,Se.ctl_bar);"local"===Se["save-location"]?Q&&K>1||(e=720,!1):Q?K<=1&&(e=720,!1):(e=720,!1);$(".custom-select[data-option=max_resolution]").find(".select-option-item[data-value="+e+"]").trigger("mousedown",["autofill"]),Ot(t)}()):"video-format"==i?(a(!!t),"mp4"===n?($("#webm_icon").hide(),$("#mp4_icon").show()):($("#webm_icon").show(),$("#mp4_icon").hide())):"record_countdown"===i?a(!!t):"save-capture-location"===i&&("local"===n?$("#capture-bubble").removeClass("hidde-bubble"):($("#capture-bubble").addClass("hidde-bubble"),t||Q||Ve("sign-in","capture")),a(!!t),function(e){"local"===e?($("#cloud_icon_capture").hide(),$("#local_icon_capture").show()):($("#cloud_icon_capture").show(),$("#local_icon_capture").hide())}(n),Q&&"local"!==n&&parseInt(K)<1&&ne>=.75*oe&&ne<oe?($(".record-tip.try.img").css("display","flex"),$(".record-tip.img").find(".count_image").text(ne+"/"+oe)):Ke())}),chrome.windows.getCurrent(function(e){je({windowId:e.id},function(t){chrome.action.getBadgeText({tabId:t.id},function(t){"New"==t&&(chrome.action.setBadgeText({text:""}),M({action:"updateNewClickVersion"}),setTimeout(function(){chrome.tabs.create({url:"https://blog.awesomescreenshot.com/2025/06/05/new-and-more-screenshot-screen-recording-keyboard-shortcuts-now-available/"}),e.close()},100))})})})}function Ne(){!function(){function e(e,t){for(var o=0;o<t.length;o++)if(e===t[o].deviceId)return!0;return!1}function t(t,o){if(o.length){var n=$("#"+t+"-source");o.forEach(function(e){$("<option value='"+e.deviceId+"'>"+e.label+"</option>").appendTo(n)}),Se[t+"-deviceId"]&&e(Se[t+"-deviceId"],o)&&n.val(Se[t+"-deviceId"])}}function o(t,o){if(o.length){var n=$("#"+t+"-source-recording");o.forEach(function(e){$("<option value='"+e.deviceId+"'>"+e.label+"</option>").appendTo(n)}),Se[t+"-deviceId"]&&e(Se[t+"-deviceId"],o)&&n.val(Se[t+"-deviceId"])}}Promise.all([Ye(),Qe(),ze()]).then(function(){pe&&Se.record_mic&&ve.length>0?($("#record-mic").prop("checked",!0),$("#record-mic").parents(".record-option-item").find(".source-part").show(),$("volume-canvas").show(),$("#mute").hide(),$("#audio").show(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("off_mic_btn"))):!pe||ve.length<1?($("#mute").show(),$("#mute").find(".svg-icon").addClass("red"),$("#audio").hide(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("on_mic_btn"))):!0!==Se.record_mic&&($("#mute").show(),$("#mute").find(".svg-icon").removeClass("red"),$("#audio").hide(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("on_mic_btn"))),he&&Se.record_cam&&ge.length>0?($("#record-cam").prop("checked",!0),$("#record-cam").parents(".record-option-item").find(".source-part").show(),$("#nocam").hide(),$("#cam").show(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("off_cam_btn"))):!he||ge.length<1?($("#nocam").show(),$("#nocam").find(".svg-icon").addClass("red"),$("#cam").hide(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("on_cam_btn"))):Se.record_cam||($("#nocam").show(),$("#nocam").find(".svg-icon").removeClass("red"),$("#cam").hide(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("on_cam_btn"))),$(".option-source").find("select").on("change",function(){var e=$(this).attr("data-source"),t=$(this).val();Se[e+"-deviceId"]=t,$(".tab-record").hasClass("active")&&"mic"===e?(!1===Se.record_mic&&Le({record_mic:!0}),Le(q({},e+"-deviceId",t)),Be(!0)):$(".tab-record").hasClass("active")&&"cam"===e&&(Le(q({record_cam:!0},e+"-deviceId",t)),qe(!0))}),$(".device-recording-select").find("select").on("change",function(e){var t=$(this).attr("data-source"),o=$(this).val();Le(q({},t+"-deviceId",o)),"mic"===t?L({action:"record/changeMic",deviceId:o}):"cam"===t&&L({action:"record/changeCamera",deviceId:o})}),$("input[name=record-type]").on("change",function(e,t){we=!(!t&&!be),be||t?be=!1:("custom"!==this.value&&Le({record_type:this.value}),Fe()),we||Be(!0===Se.record_mic),qe(!0===Se.record_cam),nt(this.value),$("#record-menu").attr("class",this.value)}),$(".setup-btn").on("click",function(){Te("/getAccess.html")}),be?We():($("#record-type-"+Se.record_type).trigger("click",["autofill"]),Fe()),$("#more-action").on("click",function(){$(".video-setting-wrapper").addClass("show"),$(".menu-content").addClass("show")}),$(".video-setting-wrapper").on("click",function(){$(".menu-content").removeClass("show"),$(".video-setting-wrapper").removeClass("show"),ut()}),$("#back-menu").on("click",function(){$(".menu-content").removeClass("show"),$(".video-setting-wrapper").removeClass("show"),ut()}),$(".menu-content").on("click",function(e){e.stopPropagation()}),$("#auto-stop-action").on("click",function(){$(".video-setting-wrapper").show(),$(".menu-content").addClass("show"),function(){pt.apply(this,arguments)}()}),me?ve.length?(t("mic",ve),o("mic",ve)):($(".setup-mic-btn").show(),$(".record-option-microphone").find(".action").hide()):$(".record-option-microphone").find(".record-option-title").text("No Microphone detected").addClass("no").end().find(".action").hide(),fe?ge.length?(t("cam",ge),t("cam-only",ge),o("cam",ge),$("#cam-only-source-part").show()):($(".setup-cam-btn").show(),$(".record-option-camera").find(".action").hide()):($(".record-option-camera").find(".record-option-title").addClass("no").text("No Camera detected").end().find(".action").hide(),$(".record-option-camera-only").find(".record-option-title").addClass("no").text("No Camera detected"))}).catch(function(e){}),nt(Se.record_type),$("#mic-reminder").prop("checked",Se["allow-remind-mic"]),st(),$(".custom-select[data-option=save-location]").find(".select-option-item[data-value="+Se["save-location"]+"]").trigger("mousedown",["autofill"]),$(".custom-select[data-option=save-capture-location]").find(".select-option-item[data-value="+Se["save-capture-location"]+"]").trigger("mousedown",["autofill"]);var n=Se["video-format"];n||(n="mp4");function r(){Se.record_tabsound?($("#tabsound").show(),$("#tabsoundoff").hide(),$("#record-tabsound").prop("checked",!0)):($("#tabsound").hide(),$("#tabsoundoff").show(),$("#record-tabsound").prop("checked",!1))}function i(e){var t="none"!==$("#audio").css("display"),o=$("#ctl-bar").prop("checked"),n=$("input[name=record-type]:checked").val(),r=Se.record_countdown,i=$(".custom-select[data-option=max_resolution]").attr("data-value")||720,a=$(".custom-select[data-option=save-location").attr("data-value"),c=$(".custom-select[data-option=video-format").attr("data-value")||"mp4",s="none"!==$("#cam").css("display"),u=$("#cam-source").val();$("#cam-source").val()&&Se["cam-deviceId"]||ge.length>0&&Le({"cam-deviceId":u=ge[0].deviceId});var l=$("#mic-source").val();$("#mic-source").val()&&Se["mic-deviceId"]||ve.length>0&&Le({"mic-deviceId":l=ve[0].deviceId});var d=$("#record-tabsound").prop("checked");if(!t&&ve.length>0&&!e&&Se["allow-remind-mic"])Ve("open-mic");else{var m=parseInt($("#sec-field")[0].value),f=parseInt($("#min-field")[0].value),p=parseInt($("#hour-field")[0].value),h={isRecordMic:t,recordType:n,countdown:r,saveLocation:a,videoFormat:c,resolution:i,isRecordCam:s,isShowToolbar:o,camDeviceId:u,micDeviceId:l,isRecordTabSound:d,isAutoStop:$("#auto-stop").prop("checked"),autoStopHour:p,autoStopMin:f,autoStopSec:m},v=window.screen.width,g=window.screen.height,b={"4k":{width:3084,height:2160},1080:{width:1920,height:1080},720:{width:1280,height:720}};if("desktop"===n&&(v<b[i].width?(h.width=v,h.height=g):(h.width=b[i].width,h.height=b[i].height)),h.screenWidth=v*window.devicePixelRatio,h.screenHeight=g*window.devicePixelRatio,"cloud"===Se["save-location"]){if(Q){if(me&&0===ve.length)w="/setup-react.html?from=record&isSignIn=true"}else if(me){if(0!==ve.length)return void Ve("sign-in","record");var w="/setup-react.html?from=record"}else var w="/setup-react.html?from=record&isGranted=true";if(w&&(!Se.has_setup||!Q))return chrome.tabs.create({url:w}),void Le({has_setup:!0})}je({},function(){var e=W(D().m(function e(t){var o,n,r,i;return D().w(function(e){for(;;)switch(e.n){case 0:h.recordingTabId=t.id,h.mainWinId=t.windowId,h.recordingTabTitle=t.title,h.recordingTabUrl=t.url,o=h.recordType,n=h.camDeviceId,r=h.isRecordCam,i=Oe(),"camera"===o?(h.recordingTabTitle="camera",M({action:"openCameraPage",screen:i,recordOptions:h},function(){window.close()})):("desktop"===o&&r&&chrome.runtime.onConnect.addListener(function(e){"record"===e.name&&(e.postMessage({action:"startCamera",camDeviceId:n}),window.close())}),M({action:"startRecord",recordOptions:h,screen:i},function(){"desktop"===o&&r?r&&setTimeout(function(){window.close()},600):window.close()}));case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}())}}function a(){return c.apply(this,arguments)}function c(){return(c=W(D().m(function e(){var t,o,n;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,navigator.storage.estimate();case 1:return t=e.v,o=t.usage,n=t.quota,e.a(2,n-o)}},e)}))).apply(this,arguments)}$(".custom-select[data-option=video-format]").find(".select-option-item[data-value="+n+"]").trigger("mousedown",["autofill"]),rt("countdown",Se.record_countdown,!1),$("#auto-stop").prop("checked",Se["auto-timer-stop"]),rt("hour",Se["auto-hour"],!1),rt("min",Se["auto-min"],!1),rt("sec",Se["auto-sec"],!1),ut(),st(),$("#countdown-input").on("change",function(){Se.record_countdown=$(this).val()}),$("#record-tabsound").prop("checked",Se.record_tabsound),r(),$("#record-tabsound").on("change",function(){Le({record_tabsound:$(this).prop("checked")}),r()}),$("#ctl-bar").on("change",function(){Le({ctl_bar:$(this).prop("checked")}),Ot($(this).prop("checked"))}),$("#mic-reminder").on("change",function(){Le({"allow-remind-mic":$(this).prop("checked")})}),$("#auto-stop").on("change",function(){$("#auto-stop").prop("checked")&&K<2?(Ve("auto-stop-upgrade","Auto-stop-limit"),$("#auto-stop").prop("checked",!1)):(st(),Le("auto-timer-stop",$("#auto-stop").prop("checked")))}),$("#local-recording").on("click",function(){Te("/video-list.html")}),$(".record-option-source").find(".field-head").on("click",function(){"ctl-bar"===$(this).attr("data-type")&&(Le({ctl_bar:!Se.ctl_bar}),Ot(Se.ctl_bar))}),$(".record-option-source").find(".device-item").on("click",function(){var e=$(this).attr("data-type");if("mic"===e){var t=!1,o="none"===$("#audio").css("display");pe?Se.record_mic&&!o?Le({record_mic:!1}):(Le({record_mic:!0}),t=!0):Te("/getAccess.html"),Be(t)}else if("cam"===e){var n=!1;he?"camera"!==$("input[name=record-type]:checked").val()&&(Se.record_cam?Le({record_cam:!1}):(Le({record_cam:!0}),n=!0),qe(n)):Te("/getAccess.html")}else"tabsound"===e&&(Le({record_tabsound:!Se.record_tabsound}),r())}),$(".record-option-checkbox").on("change",function(){var e=$(this).attr("data-type");if($(this).prop("checked")){if("mic"===e)var t=pe;else if("cam"===e)t=he;Se["record_"+e]="true",!0===t?($("#"+e+"-source-part").show(),"cam"===e&&!Se.record_mic&&pe&&ve&&(Le({record_mic:!0}),$("#record-mic").prop("checked",!0),$("#mic-source-part").show()),"mic"===e&&It()):Te("/getAccess.html")}else Le(q({},"record_"+e,!1)),$("#"+e+"-source-part").hide(),"mic"===e&&St()}),$(".popup").find(".close").on("click",function(){$(this).parents(".popup").hide(),this.classList.contains("cancel")&&_t()}),$(".bubble-bottom").find(".close").on("click",function(){$(this).parents(".bubble-bottom").hide(),M({action:"updateDefaultIcon"}),u("haveAlertBackupList",!0)}),$(".popup").find(".sub-item").on("click",function(){var e=$(this).attr("data-type");"image"===e?(Le({"save-capture-location":"local"}),ot()):"video"===e?(Le({"save-location":"local"}),ot()):"invite"===e?Te(Y+"/invite"):"option"===e&&Te("/option-react.html?focusSave=true"),$(this).parents(".popup").hide()}),$("#cancel-off").on("click",function(){$(this).parents(".popup").hide()}),$("#comfig-off").on("click",function(){L({action:"autoStop/toggle",isOn:!1}),lt(),$(this).parents(".popup").hide()}),$("#cancel-edit").on("click",function(){$(this).parents(".popup").hide()}),$("#comfig-edit").on("click",W(D().m(function e(){var t,o,n,r,i,a;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E(["recordTimeLength"]);case 1:if(t=e.v,o=U(t,1),o[0],n=0,r=parseInt($("#e-min-field")[0].value),i=parseInt($("#e-hour-field")[0].value),!(n+r+i>0)){e.n=3;break}return e.n=2,it();case 2:a=e.v,xe&&a&&L({action:"autoStop/updateTimer",data:{hour:i,min:r,sec:n}}),a&&(setTimeout(function(){lt()},100),$(this).parents(".popup").hide());case 3:return e.a(2)}},e,this)}))),$("#edit-action").on("click",function(){ht(),Ve("timer-edit")}),$("#cancel-action").on("click",function(){Ve("timer-off")}),$(".input-field").on("focus",function(e){$(this).attr("data-type");$(this).find("input")[0].focus()}),$(".input-field").find(".option-item").on("click",function(){rt($(this).attr("data-type"),$(this).attr("data-value"),!0)}),$(".input-field").find("input").on("focus",function(e){var t=parseInt(e.target.value);isNaN(t)||0!=t||($(this)[0].value=""),$(this).parents(".input-field.time").addClass("focus")}),$(".input-field").find("input").on("blur",function(e){$(this).parents(".input-field.time").removeClass("focus");var t=parseInt(e.target.value);isNaN(t)&&(e.target.value=0)}),$(".input-field").find("input").on("input",function(e){rt($(this).attr("data-type"),parseInt(e.target.value),!1)}),$(".input-field.reset").on("click",function(){rt("hour",0,!0),rt("min",0,!0),rt("sec",0,!0)}),$("#reset-Timer").on("click",function(){L({action:"autoStop/resetTimer"})}),$(".popup").find(".change-local").on("click",function(){$(this).parents(".popup").hide(),_t()}),$("#request-notification").on("click",function(){chrome.permissions.request({permissions:["notifications"]},function(e){$("#grant-notification").hide(),i()})}),$("#mic-select-recording").on("click",function(){ve.length<=0&&Te("/getAccess.html")}),$("#cam-select-recording").on("click",function(){ge.length<=0&&Te("/getAccess.html")}),$("#back-to-main").on("click",function(){He("main-menu")}),$("#record-stop").on("click",function(){L({action:"record/stop",from:"popup click"},function(){window.close()})}),$("#record-pause").on("click",function(){bt(!0),L({action:"record/pause"})}),$("#record-resume").on("click",function(){bt(!1),L({action:"record/resume"})}),$("#record-discard").on("click",function(){$("#discard-popup").show()}),$("#discard-cancel").on("click",function(){$("#discard-popup").hide()}),$("#discard-confirm").on("click",function(){L({action:"record/stop",isDiscard:!0}),setTimeout(function(){window.close()},100)}),$("#open-mic-cancel").on("click",function(){i(!0)}),$("#open-mic-confirm").on("click",function(){$(".device-item.mic").trigger("click"),i()}),$("#storage-cancel").on("click",function(){$(this).parents(".popup").hide(),localStorage.alertStorage="1",i(we)}),$("#record-start").on("click",W(D().m(function e(){var t,o;return D().w(function(e){for(;;)switch(e.n){case 0:if(t=!1,!navigator.brave){e.n=2;break}return e.n=1,navigator.brave.isBrave();case 1:t=e.v;case 2:return e.n=3,a();case 3:if(o=e.v,"cloud"!==Se["save-location"]||Q){e.n=4;break}Ve("sign-in","record"),e.n=7;break;case 4:if(!("cloud"===Se["save-location"]&&Q&&Ce&&ye)){e.n=5;break}return Ve("upgrade-alert-workspace"),e.a(2);case 5:if(!("cloud"===Se["save-location"]&&Q&&parseInt(K)<2&&ie>=re)||Ce){e.n=6;break}return Ve("upgrade-alert-video"),e.a(2);case 6:"alerted"!==Se["alert-win"]&&navigator.platform.indexOf("Win")>=0&&"desktop"===$("input[name=record-type]:checked").val()?(Ve("win-compter-audio"),Le({"alert-win":"alerted"})):o<1073741824&&!t?($("#storage-cancel").hide(),Ve("storage-issue")):o<2147483648&&!t?($("#storage-cancel").show(),Ve("storage-issue")):(localStorage.alertStorage="0",i(we));case 7:return e.a(2)}},e)}))),$("#popup-audio-in-btn").on("click",W(D().m(function e(){var t,o;return D().w(function(e){for(;;)switch(e.n){case 0:return $(this).parents(".popup").hide(),Le({"alert-win":"alerted"}),e.n=1,a();case 1:if(t=e.v,o=!1,!navigator.brave){e.n=3;break}return e.n=2,navigator.brave.isBrave();case 2:o=e.v;case 3:t<1073741824&&!o?($("#storage-cancel").hide(),Ve("storage-issue")):t<2147483648&&!o?($("#storage-cancel").show(),Ve("storage-issue")):(localStorage.alertStorage="0",i());case 4:return e.a(2)}},e,this)}))),$("#popup-sign-in-btn").on("click",function(){var e=$(this).attr("data-reason");Te("https://www.awesomescreenshot.com/signin?from="+("capture"===e?"ext_pop_capture":"record"===e?"ext_pop_record":"ext_pop_bottom"))}),$("#capture-guide").on("click",function(){Te("https://support.awesomescreenshot.com/hc/en-us/articles/4403241044249-How-to-take-a-screenshot-of-desktop-entire-screen-or-an-application-window")}),$(".upgrade-btn").on("click",function(){var e=$(this).attr("data-reason");y("upgrade from recording menu ("+e+")","upgrade"),function(e,t){chrome.cookies.get({url:t,name:"screenshot_personal_type"},function(o){S(o?t+"/pricing?from="+e:t+"/user/login?redirect="+t+"/pricing?from="+e)})}(e,Y)}),$("#toggle-camera").on("click",W(D().m(function e(){var t,o,n,r;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E(["cameraStream","devicesInfo"]);case 1:t=e.v,o=U(t,2),n=o[0],r=o[1],ge.length<1&&r.videoDevices<1?Te("/getAccess.html"):L({action:"init-camera"}),n||$("#toggle-camera").find(".camera-action-icon").addClass("loading");case 2:return e.a(2)}},e)}))),$("#toggle-mic").on("click",W(D().m(function e(){var t,o,n;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E(["audioStream","devicesInfo"]);case 1:t=e.v,o=U(t,2),o[0],n=o[1],ve.length<1&&n.audioDevices<1?Te("/getAccess.html"):L({action:"record/toggleMic"});case 2:return e.a(2)}},e)}))),$("#toggle-ann-menu").on("click",function(){L({action:"record/toggleToolbar"})}),$("#toggle-timer").on("click",W(D().m(function e(){var t,o,n,r,i,a,c;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E(["autoTimerInfo","isAutoTimerStop"]);case 1:t=e.v,o=U(t,2),n=o[0],r=o[1],i=n.timerHour,a=n.timerMin,c=n.timerSec,i+a+c>0&&r?Ve("timer-off"):(ht(),Ve("timer-edit"));case 2:return e.a(2)}},e)})))}()}function Ue(){$(".capture-menu").find(".action-item").on("click",function(){var e=this.id;if("visible"===e||"selected"===e||"entire"===e||"delay"===e||"sidebar"===e)if(ce&&!le)Ve("file-access");else if(se||ce||"visible"===e||"delay"===e){if("cloud"===Se["save-capture-location"]){if(!Q)return void Ve("sign-in","capture");if(ke&&_e)return void Ve("upgrade-alert-workspace");if(parseInt(K)<1&&ne>=oe&&!_e)return void Ve("upgrade-alert-img")}"sidebar"===e&&(e="ocr",y("Sider_ocr_home_click","pop")),M({action:e,actionFrom:"pop"}),y("capture "+e,"capture"),"entire"===e?He("capturing-view"):setTimeout(function(){window.close()},100)}else Ve("reject-access"),function(e){var t=/Edg/.test(window.navigator.userAgent),o="";o="selected"==e?"This feature isn't available on this page. Please use <span> Visible Part</span> or <span>Entire Screen & App Window</span> instead. You can crop the image afterward using the annotation tools.":"Due to Browser's restrictions, this feature is not available on this page. Please use <span> Visible Part</span> or <span>Entire Screen & App Window</span> instead.";$("#reject-tips").html(o);var n="";"chromePage"==ue?n=(t?"Edge":"Chrome")+" prevents extensions from accessing any URLs that begin with "+(t?'"edge://"':'"chrome://"')+" for security reasons. ":"OtherExtensionPage"==ue?n=(t?"Edge":"Chrome")+" does not permit extensions to access other extensions for security protection.":se||(n="Your browser has limited access to certain URLs for security reasons, including web store pages, other extension pages, pages starting with "+(t?"edge://":"chrome://")+", and other restricted pages. The URL is on this restricted list.");n&&$("#invalid-desc").html(n);"selected"==e?$("#invalid-extra").html("You can also use the <a href='https://apps.microsoft.com/detail/awesome-screenshot-%26recorder/9PBC89BQ10ZQ?hl=en-US&gl=US' target='_blank'> AwesomeScreenshot Desktop App for Windows</a> or <a href=' https://apps.apple.com/us/app/awesome-screenshot-recorder/id1531282066?mt=12' target='_blank'> Mac</a> to capture without browser limitations."):$("#invalid-extra").html("");$("#invalid-msg").css("display","block"),$("#invalid-desc").css("display","none"),$("#invalid-extra").css("display","none")}(e);else if("desktop"===e){if("cloud"===Se["save-capture-location"]){if(!Q)return void Ve("sign-in","capture");if(parseInt(K)<1&&ne>=oe)return void Ve("upgrade-alert-img")}M({action:e,actionFrom:"pop"}),setTimeout(function(){window.close()},100),y("capture desktop","capture")}else if("annotate"===e){var t=chrome.runtime.getURL("")+"upload.html";chrome.tabs.create({url:t}),y("capture local","capture"),window.close()}else"sidebar"===e&&(M({action:"ocr",actionFrom:"pop"}),y("Click sidebar OCR","sidebar"),localStorage.promotion_new=!0,window.close())}),Se.delay_sec&&$("#delay").find(".countdown").text(Se.delay_sec+"s"),""!==Se.desktop_delay_sec&parseInt(Se.desktop_delay_sec)>0&&$("#desktop").find(".countdown").text(Se.desktop_delay_sec+"s"),function(){function e(e){return e||""}chrome.commands.getAll().then(function(t){var o="",n="",r="",i="",a="",c="",s="",u="",l="";t.length>0&&t.forEach(function(e){"0-capture-visible-area"===e.name&&e.shortcut?o=e.shortcut:"2-capture-selected-area"===e.name&&e.shortcut?n=e.shortcut:"1-capture-full-page"===e.name&&e.shortcut?r=e.shortcut:"annotate-local-page"===e.name&&e.shortcut?i=e.shortcut:"3-record-desktop"===e.name&&e.shortcut?a=e.shortcut:"4-record-tab"===e.name&&e.shortcut?c=e.shortcut:"5-record-camera"===e.name&&e.shortcut?s=e.shortcut:"6-record-custom"===e.name&&e.shortcut?u=e.shortcut:"8-stop-record"===e.name&&e.shortcut&&(l=e.shortcut)}),o&&($("#visible").addClass("tooltip delay").attr("aria-label",e(o)),"Set shortcuts from Options"===o&&$("#visible").addClass("left")),n&&($("#selected").addClass("tooltip delay").attr("aria-label",e(n)),"Set shortcuts from Options"===n&&$("#selected").addClass("right")),r&&$("#entire").addClass("tooltip delay").attr("aria-label",e(r)),i&&$("#annotate").addClass("tooltip delay").attr("aria-label",e(i)),a&&$("#type-desktop").addClass("tooltip delay").attr("aria-label",e(a)),c&&$("#type-tab").addClass("tooltip delay").attr("aria-label",e(c)),s&&$("#type-camera").addClass("tooltip delay").attr("aria-label",e(s)),u&&$("#type-custom").addClass("tooltip delay").attr("aria-label",e(u)),l&&$("#record-stop").addClass("no-text").attr("aria-label",e(l))})}(),$("#stop-entire-capture").on("click",function(){M({action:"stop-entire-capture"})}),$("#invalid-msg").on("click",function(){$("#invalid-msg").css("display","none"),$("#invalid-desc").css("display","block"),$("#invalid-extra").html()&&$("#invalid-extra").css("display","block")})}function Re(){return Ge.apply(this,arguments)}function Ge(){return(Ge=W(D().m(function e(){var t,o;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,chrome.commands.getAll();case 1:return t=e.v,o=t.find(function(e){return"7-pause-resume"===e.name}),e.a(2,o?" "+o.shortcut:"")}},e)}))).apply(this,arguments)}function We(){$("#record-type-tab").trigger("click").trigger("change",!0),$("#record-mic").prop("checked",!1),$("#tabsound").show(),$("#tabsoundoff").hide(),$("#record-tabsound").prop("checked",!0),$(".record-tip.auto-tab-record").css("display","flex"),Be(!1)}function Fe(){$(".record-tip.auto-tab-record").css("display","none")}function Be(e){pe&&e&&ve.length>0?($("volume-canvas").show(),"record"===$(".tab-header-item.active").attr("data-tab")&&It(),$("#mute").hide(),$("#audio").show(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("off_mic_btn"))):!pe||ve.length<1?($("#mute").show(),$("#mute").addClass("red"),$("#audio").hide(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("on_mic_btn")),St()):e||($("#mute").show(),$("#mute").removeClass("red"),$("#audio").hide(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("on_mic_btn")),St())}function qe(e){he&&e&&ge.length>0?($("#nocam").hide(),$("#cam").show(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("off_cam_btn"))):!he||ge.length<1?($("#nocam").show(),$("#nocam").addClass("red"),$("#cam").hide(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("on_cam_btn"))):e||($("#nocam").show(),$("#nocam").removeClass("red"),$("#cam").hide(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("on_cam_btn")))}function Ve(e,t){var o=$(".popup[data-name="+e+"]");o.show(),t&&o.find(".popup-btn").attr("data-reason",t),"sign-in"===e&&($(".tab-header").hasClass("record")?($("#sign-in-reason").text("videos"),$(".popup").find(".change-local").hide()):($("#sign-in-reason").text("screenshots"),$(".popup").find(".change-local").show()))}function He(e){"main-menu"!==e&&St(),$(".layout-view").hide(),$("#"+e).show()}function Ye(){return new Promise(function(e,t){f(function(t){me=(de=t).audioInputDevices.length>0,fe=de.videoInputDevices.length>0,ve=Ze(de.audioInputDevices),ge=Ze(de.videoInputDevices),e()})})}function Qe(){return navigator.permissions.query({name:"microphone"}).then(function(e){return"granted"===e.state&&(pe=!0),e.state})}function ze(){return navigator.permissions.query({name:"camera"}).then(function(e){return"granted"===e.state&&(he=!0),e.state})}function Ze(e){return e.filter(function(e,t,o){return""!==e.label&&o.findIndex(function(t){return t.deviceId===e.deviceId})===t})}function Je(e){switch(e){case"720":$("#hd_icon").show(),$("#fhd_icon").hide(),$("#4k_icon").hide();break;case"1080":$("#hd_icon").hide(),$("#fhd_icon").show(),$("#4k_icon").hide();break;case"4k":$("#hd_icon").hide(),$("#fhd_icon").hide(),$("#4k_icon").show()}}function Ke(){$(".record-tip.try.img").hide()}function Xe(){$(".start-container").hasClass("limit")||$(".start-container").addClass("limit"),$(".record-tip.limit").show(),$(".record-tip.try").hide()}function et(){$(".start-container").removeClass("limit"),$(".record-tip.limit").hide()}function tt(){$(".record-tip.try.video").hide(),et()}function ot(){$(".custom-select[data-option=save-location]").find(".select-option-item[data-value="+Se["save-location"]+"]").trigger("mousedown",["autofill"]),$(".custom-select[data-option=save-capture-location]").find(".select-option-item[data-value="+Se["save-capture-location"]+"]").trigger("mousedown",["autofill"])}function nt(e){$(".record-type-item").removeClass("selected"),$("#record-type-"+e).parents(".record-type-item").addClass("selected"),"tab"!==e&&"custom"!==e?($("#tab-sound").hide(),$(".option-source.ann").removeClass("fullWidth"),$(".option-source.ann").addClass("halfWidth"),$("#controlBar").html(chrome.i18n.getMessage("ctl_bar_title"))):($("#tab-sound").show(),$(".option-source.ann").addClass("fullWidth"),$(".option-source.ann").removeClass("halfWidth"),$("#controlBar").html(chrome.i18n.getMessage("ctl_bar_title_more"))),"camera"===e?($(".record-option-camera").hide(),$(".record-option-camera-only").show(),$(".option-source.ann").hide(),qe(!0)):($(".record-option-camera").show(),$(".record-option-camera-only").hide(),$(".option-source.ann").show()),"camera"===e?ge.length?($("#record-start").removeClass("disabled"),$("#premission-tip").removeClass("show")):($("#record-start").addClass("disabled"),$("#premission-tip").addClass("show")):($("#record-start").removeClass("disabled"),$("#premission-tip").removeClass("show"))}function rt(e,t,o){switch(e){case"countdown":t<0&&(t=0),isNaN(t)?(u("record_countdown",0),$("#countdown-label").html("0")):($("#countdown-field")[0].value=t,$("#countdown-label").html(t),Le("record_countdown",t),_("record_countdown",t)),o&&$("#countdown-field").blur();break;case"hour":t>6?t=6:(t<0||isNaN(t)&&o)&&(t=0),"recording"===Ie?(xe=!0,isNaN(t)?$("#e-hour-label").html("0"):($("#e-hour-field")[0].value=t,$("#e-hour-label").html(t)),o&&$("#e-hour-field").blur()):(isNaN(t)?($("#hour-label").html("0"),Le("auto-hour",0)):($("#hour-field")[0].value=t,$("#hour-label").html(t),Le("auto-hour",t),6==t&&(rt("min",0,!1),rt("sec",0,!1))),o&&$("#hour-field").blur());break;case"min":if(t>59?t=59:(t<0||isNaN(t)&&o)&&(t=0),"recording"===Ie)xe=!0,isNaN(t)?$("#e-min-label").html("0"):($("#e-min-field")[0].value=t,$("#e-min-label").html(t)),o&&$("#e-min-field").blur();else{if(isNaN(t))$("#min-label").html("0"),Le("auto-min",0);else(n=Se["auto-hour"])&&!isNaN(n)&&n>=6&&(t=0),$("#min-field")[0].value=t,$("#min-label").html(t),Le("auto-min",t);o&&$("#min-field").blur()}break;case"sec":if(t>59?t=59:(t<0||isNaN(t)&&o)&&(t=0),"recording"===Ie)xe=!0,isNaN(t)?$("#e-sec-label").html("0"):($("#e-sec-field")[0].value=t,$("#e-sec-label").html(t)),o&&$("#e-sec-field").blur();else{var n;if(isNaN(t))$("#sec-label").html("0"),Le("auto-sec",0);else(n=Se["auto-hour"])&&!isNaN(n)&&n>=6&&(t=0),$("#sec-field")[0].value=t,$("#sec-label").html(t),Le("auto-sec",t);o&&$("#sec-field").blur()}}it()}function it(){return at.apply(this,arguments)}function at(){return(at=W(D().m(function e(){var t,o,n,r,i,a;return D().w(function(e){for(;;)switch(e.n){case 0:if("recording"!==Ie){e.n=3;break}return e.n=1,E(["recordTimeLength"]);case 1:if(t=e.v,o=U(t,1),n=o[0],r=parseInt($("#e-min-field")[0].value),i=parseInt($("#e-hour-field")[0].value),!(r+i>0)){e.n=2;break}if(!(216e5<n+1e3*(60*i*60+60*r))){e.n=2;break}return a=216e5-n,a=Math.floor(a/1e3),i=Math.floor(a/3600),r=Math.floor((a-3600*i)/60),$(".timer-tip").html(chrome.i18n.getMessage("auto_stop_warning_tip",[i,r])),$(".timer-tip").show(),$("#comfig-edit").addClass("disable"),e.a(2,!1);case 2:$("#comfig-edit").removeClass("disable"),$(".timer-tip").hide();case 3:return e.a(2,!0)}},e)}))).apply(this,arguments)}function ct(){if("recording"===Ie){var e=$("#e-min-field")[0].value;$("#e-hour-field")[0].value+e>0?$("#comfig-edit").removeClass("disable"):$("#comfig-edit").addClass("disable")}}function st(){$("#auto-stop").prop("checked")?$(".menu-cell.autoStop").removeClass("hidden"):$(".menu-cell.autoStop").addClass("hidden")}function ut(){var e=parseInt($("#sec-field")[0].value),t=parseInt($("#min-field")[0].value),o=parseInt($("#hour-field")[0].value);if(!$("#auto-stop").prop("checked")||0==e&&0==t&&0==o)$(".auto-stop-tip").hide();else{var n="";o>0?(n+=o+"h",n+=t+"m",n+=e+"s"):t>0?(n+=t+"m",n+=e+"s"):n+=e+"s",$(".auto-stop-tip").html(chrome.i18n.getMessage("auto_stop_tip",n)),$(".auto-stop-tip").css("display","flex")}}function lt(){return dt.apply(this,arguments)}function dt(){return(dt=W(D().m(function e(){var t,o,n,r,i,a,c,s;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E(["autoTimerInfo","isAutoTimerStop"]);case 1:t=e.v,o=U(t,2),n=o[0],r=o[1],i=n.timerHour,a=n.timerMin,c=n.timerSec,s=$("#toggle-timer").find(".timer-action-icon"),!r||0===i&&0===a&&0===c?(s.hasClass("off")||s.addClass("off"),$(".auto-stop-field").hide()):(s.hasClass("off")&&s.removeClass("off"),mt());case 2:return e.a(2)}},e)}))).apply(this,arguments)}function mt(){return ft.apply(this,arguments)}function ft(){return(ft=W(D().m(function e(){var t,o,n,r,i,a,c;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E(["autoTimerInfo","isAutoTimerStop"]);case 1:t=e.v,o=U(t,2),n=o[0],r=o[1],i=n.timerHour,a=n.timerMin,c=n.timerSec,"recording"===Ie&&r&&i+a+c>0&&($(".auto-stop-field").css("display","flex"),gt());case 2:return e.a(2)}},e)}))).apply(this,arguments)}function pt(){return(pt=W(D().m(function e(){var t,o,n,r,i,a,c,s,u,l,d,m,f,p;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E(["autoTimerInfo","isAutoTimerStop","recordTimeLength","startAutoStop"]);case 1:t=e.v,o=U(t,4),n=o[0],r=o[1],i=o[2],a=o[3],c=n.timerHour,s=n.timerMin,u=n.timerSec,"recording"===Ie&&(xe=!1,l=0,d=0,r&&(p=0,(m=1e3*(u+60*s+60*c*60))>=(f=i-a)&&(p=m-f),p=Math.floor(p/1e3),l=Math.floor(p/3600),d=Math.floor((p-3600*l)/60)),$("#e-min-field")[0].value=d,$("#e-min-label").html(d),$("#e-hour-field")[0].value=l,$("#e-hour-label").html(l),mt(),ct());case 2:return e.a(2)}},e)}))).apply(this,arguments)}function ht(){return vt.apply(this,arguments)}function vt(){return(vt=W(D().m(function e(){var t,o,n,r,i,a,c,s,u,l,d,m,f;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E(["autoTimerInfo","isAutoTimerStop","recordTimeLength","startAutoStop"]);case 1:t=e.v,o=U(t,4),n=o[0],r=o[1],i=o[2],o[3],a=n.timerHour,c=n.timerMin,s=n.timerSec,"recording"===Ie&&(xe=!1,u=0,l=0,r&&(f=0,(d=1e3*(s+60*c+60*a*60))>=(m=i)&&(f=d-m+200),f=Math.floor(f/1e3),u=Math.floor(f/3600),l=Math.floor((f-3600*u)/60)),$("#e-min-field")[0].value=l,$("#e-min-label").html(l),$("#e-hour-field")[0].value=u,$("#e-hour-label").html(u),mt(),it());case 2:return e.a(2)}},e)}))).apply(this,arguments)}function gt(){return $t.apply(this,arguments)}function $t(){return($t=W(D().m(function e(){var t,o,n,r,i,a,c,s;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E(["autoTimerInfo","isAutoTimerStop","autoStopTime"]);case 1:t=e.v,o=U(t,3),n=o[0],r=o[1],i=o[2],a=n.timerHour,c=n.timerMin,s=n.timerSec,r&&1e3*(s+60*c+60*a*60)>0&&$(".auto-stop-field").find(".tips").html(chrome.i18n.getMessage("auto_timer_tip",i));case 2:return e.a(2)}},e)}))).apply(this,arguments)}function bt(e){return wt.apply(this,arguments)}function wt(){return(wt=W(D().m(function e(t){var o,n;return D().w(function(e){for(;;)switch(e.n){case 0:return o=$("#recording_title"),e.n=1,Re();case 1:n=e.v,t?($("#recording-view").find(".recording-action").addClass("paused"),$("#recording-view").find(".time-field").addClass("paused"),o.html(chrome.i18n.getMessage("pause_title")),$("#record-resume").attr("aria-label",chrome.i18n.getMessage("resume_btn")+n)):($("#recording-view").find(".recording-action"),$("#recording-view").find(".recording-action").removeClass("paused"),$("#recording-view").find(".time-field").removeClass("paused"),o.html(chrome.i18n.getMessage("recording_title")),$("#record-pause").attr("aria-label",chrome.i18n.getMessage("pause_btn")+n));case 2:return e.a(2)}},e)}))).apply(this,arguments)}function yt(){return kt.apply(this,arguments)}function kt(){return(kt=W(D().m(function e(){var t,o,n,r,i,a,c,s,u,l,d,m;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E(["cameraStream","audioStream","isShowToolbar","devicesInfo"]);case 1:t=e.v,o=U(t,4),n=o[0],r=o[1],i=o[2],a=o[3],c=$("#toggle-camera").find(".camera-action-icon"),s=$("#toggle-mic").find(".mic-action-icon"),u=$("#toggle-ann-menu").find(".toolbar-action-icon"),l=$("#toggle-camera"),d=$("#toggle-mic"),m=$("#toggle-ann-menu"),n?(c.hasClass("nocam")&&c.removeClass("nocam"),l.attr("aria-label",chrome.i18n.getMessage("off_cam_btn"))):(c.hasClass("nocam")||c.addClass("nocam"),ge.length<1&&a.videoDevices<1?c.hasClass("red")||c.addClass("red"):c.removeClass("red"),l.attr("aria-label",chrome.i18n.getMessage("on_cam_btn"))),$("#toggle-mic").find(".mic-action-icon").removeClass("loading"),$("#toggle-camera").find(".camera-action-icon").removeClass("loading"),r?(s.hasClass("mute")&&s.removeClass("mute"),d.attr("aria-label",chrome.i18n.getMessage("off_mic_btn"))):(s.hasClass("mute")||s.addClass("mute"),ve.length<1&&a.audioDevices<1?s.hasClass("red")||s.addClass("red"):s.removeClass("red"),d.attr("aria-label",chrome.i18n.getMessage("on_mic_btn"))),i?(u.removeClass("notoolbar"),m.attr("aria-label",chrome.i18n.getMessage("hide_ctl_bar"))):(u.addClass("notoolbar"),m.attr("aria-label",chrome.i18n.getMessage("show_ctl_bar")),$(".select-option-item.ann-tool-bar").addClass("disable"));case 2:return e.a(2)}},e)}))).apply(this,arguments)}function _t(){Le({"save-capture-location":"local"}),ot()}function Ct(e){for(var t,o=e.inputBuffer.getChannelData(0),n=o.length,r=0,i=0;i<n;i++)t=o[i],Math.abs(t)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),r+=t*t;var a=Math.sqrt(r/n);this.volume=Math.max(a,this.volume*this.averaging)}function St(){$("#volume-canvas").hide(),Z&&window.cancelAnimationFrame(Z),z=null,J&&(J.getTracks().forEach(function(e){e.stop()}),J=null)}function It(){if(Se.record_mic&&pe&&!1!==$("#main-menu").is(":visible")){St(),$("#volume-canvas").show();var e=new AudioContext,t={};Se["mic-deviceId"]&&(t.deviceId=Se["mic-deviceId"]);try{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia({audio:t},function(t){J=t;var o=e.createMediaStreamSource(t);z=function(e,t,o,n){var r=e.createScriptProcessor(512);return r.onaudioprocess=Ct,r.clipping=!1,r.lastClip=0,r.volume=0,r.clipLevel=t||.98,r.averaging=o||.95,r.clipLag=n||750,r.connect(e.destination),r.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},r.shutdown=function(){this.disconnect(),this.onaudioprocess=null},r}(e),o.connect(z),xt()},function(e){})}catch(e){}}}function xt(e){var t=document.getElementById("volume-canvas").getContext("2d");t.clearRect(0,0,5,18),z&&(z.checkClipping()?t.fillStyle="red":t.fillStyle="#47d892",t.fillRect(0,0,5,18*z.volume*5)),Z=window.requestAnimationFrame(xt)}function Tt(){return Pt.apply(this,arguments)}function Pt(){return(Pt=W(D().m(function e(){var t;return D().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E("time");case 1:t=e.v,$("#recording-view").find(".time").text(t),gt();case 2:return e.a(2)}},e)}))).apply(this,arguments)}function Ot(e){e?($("#ctl-bar-icon").show(),$("#ctl-bar-off-icon").hide(),$(".ann-bar-field.ann-tool").removeClass("disable")):($("#ctl-bar-icon").hide(),$("#ctl-bar-off-icon").show(),$(".ann-bar-field.ann-tool").addClass("disable")),$("#ctl-bar").prop("checked",e)}function Mt(e){var t=chrome.runtime.getURL(""),o=!e.startsWith(t)&&e.match(/chrome-extension:\/\//),n=[/chrome(.*):\/\//,/edge(.*):\/\//,/https:\/\/chrome.google.com\/webstore/i,/https:\/\/chromewebstore.google.com/i,/https:\/\/ntp.msn.cn\/edge\/ntp/i].some(function(t){return t.test(e)});return o||n}$("#sidebar").css("display","block"),"true"!==localStorage.promotion_new&&$("#sidebar").find(".new-badge").show(),function(){Ae.apply(this,arguments)}()}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={exports:{}};return t[e].call(i.exports,i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,o,r,i)=>{if(!o){var a=1/0;for(l=0;l<e.length;l++){for(var[o,r,i]=e[l],c=!0,s=0;s<o.length;s++)(!1&i||a>=i)&&Object.keys(n.O).every(e=>n.O[e](o[s]))?o.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[o,r,i]},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={42:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,i,[a,c,s]=o,u=0;if(a.some(t=>0!==e[t])){for(r in c)n.o(c,r)&&(n.m[r]=c[r]);if(s)var l=s(n)}for(t&&t(o);u<a.length;u++)i=a[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},o=self.webpackChunkawesomescreenshot_extension=self.webpackChunkawesomescreenshot_extension||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),n.O(void 0,[982,510],()=>n(32082));var r=n.O(void 0,[982,510],()=>n(30695));r=n.O(r)})();