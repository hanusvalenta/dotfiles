const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["chunks/popup-CibPukXQ.js","chunks/chunk-QIZ4XBKF-Cg-wv63Z.js","chunks/content-script-CRWGzKwD.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();try{}catch(r){console.error("[wxt] Failed to initialize plugins",r)}const mX=!1,yX=(r,e)=>r===e,Ea=Symbol("solid-proxy"),hU=typeof Proxy=="function",Wy=Symbol("solid-track"),Gy={equals:yX};let S0=null,dU=yU;const pc=1,Yy=2,pU={owned:null,cleanups:null,context:null,owner:null},Gw={};var kr=null;let Yw=null,vX=null,rn=null,os=null,wa=null,fb=0;function el(r,e){const t=rn,n=kr,i=r.length===0,s=e===void 0?n:e,o=i?pU:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=i?r:()=>r(()=>br(()=>K0(o)));kr=o,rn=null;try{return uc(a,!0)}finally{rn=t,kr=n}}function $e(r,e){e=e?Object.assign({},Gy,e):Gy;const t={value:r,observers:null,observerSlots:null,comparator:e.equals||void 0},n=i=>(typeof i=="function"&&(i=i(t.value)),mU(t,i));return[gU.bind(t),n]}function E0(r,e,t){const n=kg(r,e,!0,pc);zd(n)}function ht(r,e,t){const n=kg(r,e,!1,pc);zd(n)}function it(r,e,t){dU=AX;const n=kg(r,e,!1,pc);(!t||!t.render)&&(n.user=!0),wa?wa.push(n):zd(n)}function ke(r,e,t){t=t?Object.assign({},Gy,t):Gy;const n=kg(r,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,zd(n),gU.bind(n)}function bX(r){return r&&typeof r=="object"&&"then"in r}function ET(r,e,t){let n,i,s;typeof e=="function"?(n=r,i=e,s={}):(n=!0,i=r,s=e||{});let o=null,a=Gw,c=!1,l="initialValue"in s,u=typeof n=="function"&&ke(n);const f=new Set,[h,d]=(s.storage||$e)(s.initialValue),[g,p]=$e(void 0),[m,y]=$e(void 0,{equals:!1}),[v,b]=$e(l?"ready":"unresolved");function _(k,$,J,j){return o===k&&(o=null,j!==void 0&&(l=!0),(k===a||$===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(j,{value:$})),a=Gw,x($,J)),$}function x(k,$){uc(()=>{$===void 0&&d(()=>k),b($!==void 0?"errored":l?"ready":"unresolved"),p($);for(const J of f.keys())J.decrement();f.clear()},!1)}function E(){const k=_X,$=h(),J=g();if(J!==void 0&&!o)throw J;return rn&&rn.user,$}function S(k=!0){if(k!==!1&&c)return;c=!1;const $=u?u():n;if($==null||$===!1){_(o,br(h));return}let J;const j=a!==Gw?a:br(()=>{try{return i($,{value:h(),refetching:k})}catch(L){J=L}});if(J!==void 0){_(o,void 0,yy(J),$);return}else if(!bX(j))return _(o,j,void 0,$),j;return o=j,"v"in j?(j.s===1?_(o,j.v,void 0,$):_(o,void 0,yy(j.v),$),j):(c=!0,queueMicrotask(()=>c=!1),uc(()=>{b(l?"refreshing":"pending"),y()},!1),j.then(L=>_(j,L,void 0,$),L=>_(j,void 0,yy(L),$)))}Object.defineProperties(E,{state:{get:()=>v()},error:{get:()=>g()},loading:{get(){const k=v();return k==="pending"||k==="refreshing"}},latest:{get(){if(!l)return E();const k=g();if(k&&!o)throw k;return h()}}});let C=kr;return u?E0(()=>(C=kr,S(!1))):S(!1),[E,{refetch:k=>Rg(C,()=>S(k)),mutate:d}]}function ai(r){return uc(r,!1)}function br(r){if(rn===null)return r();const e=rn;rn=null;try{return r()}finally{rn=e}}function kn(r,e,t){const n=Array.isArray(r);let i,s=t&&t.defer;return o=>{let a;if(n){a=Array(r.length);for(let l=0;l<r.length;l++)a[l]=r[l]()}else a=r();if(s)return s=!1,o;const c=br(()=>e(a,i,o));return i=a,c}}function Dr(r){it(()=>br(r))}function yt(r){return kr===null||(kr.cleanups===null?kr.cleanups=[r]:kr.cleanups.push(r)),r}function wX(r,e){S0||(S0=Symbol("error")),kr=kg(void 0,void 0,!0),kr.context={...kr.context,[S0]:[e]};try{return r()}catch(t){Pg(t)}finally{kr=kr.owner}}function Xy(){return rn}function Nf(){return kr}function Rg(r,e){const t=kr,n=rn;kr=r,rn=null;try{return uc(e,!0)}catch(i){Pg(i)}finally{kr=t,rn=n}}function xX(r){const e=rn,t=kr;return Promise.resolve().then(()=>{rn=e,kr=t;let n;return uc(r,!1),rn=kr=null,n?n.done:void 0})}const[HNe,WNe]=$e(!1);function nn(r,e){const t=Symbol("context");return{id:t,Provider:IX(t),defaultValue:r}}function Qr(r){let e;return kr&&kr.context&&(e=kr.context[r.id])!==void 0?e:r.defaultValue}function Ud(r){const e=ke(r),t=ke(()=>Q2(e()));return t.toArray=()=>{const n=t();return Array.isArray(n)?n:n!=null?[n]:[]},t}let _X;function gU(){if(this.sources&&this.state)if(this.state===pc)zd(this);else{const r=os;os=null,uc(()=>Qy(this),!1),os=r}if(rn){const r=this.observers?this.observers.length:0;rn.sources?(rn.sources.push(this),rn.sourceSlots.push(r)):(rn.sources=[this],rn.sourceSlots=[r]),this.observers?(this.observers.push(rn),this.observerSlots.push(rn.sources.length-1)):(this.observers=[rn],this.observerSlots=[rn.sources.length-1])}return this.value}function mU(r,e,t){let n=r.value;return(!r.comparator||!r.comparator(n,e))&&(r.value=e,r.observers&&r.observers.length&&uc(()=>{for(let i=0;i<r.observers.length;i+=1){const s=r.observers[i],o=Yw&&Yw.running;o&&Yw.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?os.push(s):wa.push(s),s.observers&&vU(s)),o||(s.state=pc)}if(os.length>1e6)throw os=[],new Error},!1)),e}function zd(r){if(!r.fn)return;K0(r);const e=fb;SX(r,r.value,e)}function SX(r,e,t){let n;const i=kr,s=rn;rn=kr=r;try{n=r.fn(e)}catch(o){return r.pure&&(r.state=pc,r.owned&&r.owned.forEach(K0),r.owned=null),r.updatedAt=t+1,Pg(o)}finally{rn=s,kr=i}(!r.updatedAt||r.updatedAt<=t)&&(r.updatedAt!=null&&"observers"in r?mU(r,n):r.value=n,r.updatedAt=t)}function kg(r,e,t,n=pc,i){const s={fn:r,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:kr,context:kr?kr.context:null,pure:t};return kr===null||kr!==pU&&(kr.owned?kr.owned.push(s):kr.owned=[s]),s}function Jy(r){if(r.state===0)return;if(r.state===Yy)return Qy(r);if(r.suspense&&br(r.suspense.inFallback))return r.suspense.effects.push(r);const e=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<fb);)r.state&&e.push(r);for(let t=e.length-1;t>=0;t--)if(r=e[t],r.state===pc)zd(r);else if(r.state===Yy){const n=os;os=null,uc(()=>Qy(r,e[0]),!1),os=n}}function uc(r,e){if(os)return r();let t=!1;e||(os=[]),wa?t=!0:wa=[],fb++;try{const n=r();return EX(t),n}catch(n){t||(wa=null),os=null,Pg(n)}}function EX(r){if(os&&(yU(os),os=null),r)return;const e=wa;wa=null,e.length&&uc(()=>dU(e),!1)}function yU(r){for(let e=0;e<r.length;e++)Jy(r[e])}function AX(r){let e,t=0;for(e=0;e<r.length;e++){const n=r[e];n.user?r[t++]=n:Jy(n)}for(e=0;e<t;e++)Jy(r[e])}function Qy(r,e){r.state=0;for(let t=0;t<r.sources.length;t+=1){const n=r.sources[t];if(n.sources){const i=n.state;i===pc?n!==e&&(!n.updatedAt||n.updatedAt<fb)&&Jy(n):i===Yy&&Qy(n,e)}}}function vU(r){for(let e=0;e<r.observers.length;e+=1){const t=r.observers[e];t.state||(t.state=Yy,t.pure?os.push(t):wa.push(t),t.observers&&vU(t))}}function K0(r){let e;if(r.sources)for(;r.sources.length;){const t=r.sources.pop(),n=r.sourceSlots.pop(),i=t.observers;if(i&&i.length){const s=i.pop(),o=t.observerSlots.pop();n<i.length&&(s.sourceSlots[o]=n,i[n]=s,t.observerSlots[n]=o)}}if(r.tOwned){for(e=r.tOwned.length-1;e>=0;e--)K0(r.tOwned[e]);delete r.tOwned}if(r.owned){for(e=r.owned.length-1;e>=0;e--)K0(r.owned[e]);r.owned=null}if(r.cleanups){for(e=r.cleanups.length-1;e>=0;e--)r.cleanups[e]();r.cleanups=null}r.state=0}function yy(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function o6(r,e,t){try{for(const n of e)n(r)}catch(n){Pg(n,t&&t.owner||null)}}function Pg(r,e=kr){const t=S0&&e&&e.context&&e.context[S0],n=yy(r);if(!t)throw n;wa?wa.push({fn(){o6(n,t,e)},state:pc}):o6(n,t,e)}function Q2(r){if(typeof r=="function"&&!r.length)return Q2(r());if(Array.isArray(r)){const e=[];for(let t=0;t<r.length;t++){const n=Q2(r[t]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return r}function IX(r,e){return function(n){let i;return ht(()=>i=br(()=>(kr.context={...kr.context,[r]:n.value},Ud(()=>n.children))),void 0),i}}const CX=Symbol("fallback");function a6(r){for(let e=0;e<r.length;e++)r[e]()}function TX(r,e,t={}){let n=[],i=[],s=[],o=0,a=e.length>1?[]:null;return yt(()=>a6(s)),()=>{let c=r()||[],l=c.length,u,f;return c[Wy],br(()=>{let d,g,p,m,y,v,b,_,x;if(l===0)o!==0&&(a6(s),s=[],n=[],i=[],o=0,a&&(a=[])),t.fallback&&(n=[CX],i[0]=el(E=>(s[0]=E,t.fallback())),o=1);else if(o===0){for(i=new Array(l),f=0;f<l;f++)n[f]=c[f],i[f]=el(h);o=l}else{for(p=new Array(l),m=new Array(l),a&&(y=new Array(l)),v=0,b=Math.min(o,l);v<b&&n[v]===c[v];v++);for(b=o-1,_=l-1;b>=v&&_>=v&&n[b]===c[_];b--,_--)p[_]=i[b],m[_]=s[b],a&&(y[_]=a[b]);for(d=new Map,g=new Array(_+1),f=_;f>=v;f--)x=c[f],u=d.get(x),g[f]=u===void 0?-1:u,d.set(x,f);for(u=v;u<=b;u++)x=n[u],f=d.get(x),f!==void 0&&f!==-1?(p[f]=i[u],m[f]=s[u],a&&(y[f]=a[u]),f=g[f],d.set(x,f)):s[u]();for(f=v;f<l;f++)f in p?(i[f]=p[f],s[f]=m[f],a&&(a[f]=y[f],a[f](f))):i[f]=el(h);i=i.slice(0,o=l),n=c.slice(0)}return i});function h(d){if(s[f]=d,a){const[g,p]=$e(f);return a[f]=p,e(c[f],g)}return e(c[f])}}}function D(r,e){return br(()=>r(e||{}))}function gm(){return!0}const Z2={get(r,e,t){return e===Ea?t:r.get(e)},has(r,e){return e===Ea?!0:r.has(e)},set:gm,deleteProperty:gm,getOwnPropertyDescriptor(r,e){return{configurable:!0,enumerable:!0,get(){return r.get(e)},set:gm,deleteProperty:gm}},ownKeys(r){return r.keys()}};function Xw(r){return(r=typeof r=="function"?r():r)?r:{}}function RX(){for(let r=0,e=this.length;r<e;++r){const t=this[r]();if(t!==void 0)return t}}function st(...r){let e=!1;for(let o=0;o<r.length;o++){const a=r[o];e=e||!!a&&Ea in a,r[o]=typeof a=="function"?(e=!0,ke(a)):a}if(hU&&e)return new Proxy({get(o){for(let a=r.length-1;a>=0;a--){const c=Xw(r[a])[o];if(c!==void 0)return c}},has(o){for(let a=r.length-1;a>=0;a--)if(o in Xw(r[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<r.length;a++)o.push(...Object.keys(Xw(r[a])));return[...new Set(o)]}},Z2);const t={},n=Object.create(null);for(let o=r.length-1;o>=0;o--){const a=r[o];if(!a)continue;const c=Object.getOwnPropertyNames(a);for(let l=c.length-1;l>=0;l--){const u=c[l];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(a,u);if(!n[u])n[u]=f.get?{enumerable:!0,configurable:!0,get:RX.bind(t[u]=[f.get.bind(a)])}:f.value!==void 0?f:void 0;else{const h=t[u];h&&(f.get?h.push(f.get.bind(a)):f.value!==void 0&&h.push(()=>f.value))}}}const i={},s=Object.keys(n);for(let o=s.length-1;o>=0;o--){const a=s[o],c=n[a];c&&c.get?Object.defineProperty(i,a,c):i[a]=c?c.value:void 0}return i}function Mt(r,...e){if(hU&&Ea in r){const i=new Set(e.length>1?e.flat():e[0]),s=e.map(o=>new Proxy({get(a){return o.includes(a)?r[a]:void 0},has(a){return o.includes(a)&&a in r},keys(){return o.filter(a=>a in r)}},Z2));return s.push(new Proxy({get(o){return i.has(o)?void 0:r[o]},has(o){return i.has(o)?!1:o in r},keys(){return Object.keys(r).filter(o=>!i.has(o))}},Z2)),s}const t={},n=e.map(()=>({}));for(const i of Object.getOwnPropertyNames(r)){const s=Object.getOwnPropertyDescriptor(r,i),o=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let a=!1,c=0;for(const l of e)l.includes(i)&&(a=!0,o?n[c][i]=s.value:Object.defineProperty(n[c],i,s)),++c;a||(o?t[i]=s.value:Object.defineProperty(t,i,s))}return[...n,t]}let kX=0;function mi(){return`cl-${kX++}`}const bU=r=>`Stale read from <${r}>.`;function Lt(r){const e="fallback"in r&&{fallback:()=>r.fallback};return ke(TX(()=>r.each,r.children,e||void 0))}function We(r){const e=r.keyed,t=ke(()=>r.when,void 0,void 0),n=e?t:ke(t,void 0,{equals:(i,s)=>!i==!s});return ke(()=>{const i=n();if(i){const s=r.children;return typeof s=="function"&&s.length>0?br(()=>s(e?i:()=>{if(!br(n))throw bU("Show");return t()})):s}return r.fallback},void 0,void 0)}function yr(r){const e=Ud(()=>r.children),t=ke(()=>{const n=e(),i=Array.isArray(n)?n:[n];let s=()=>{};for(let o=0;o<i.length;o++){const a=o,c=i[o],l=s,u=ke(()=>l()?void 0:c.when,void 0,void 0),f=c.keyed?u:ke(u,void 0,{equals:(h,d)=>!h==!d});s=()=>l()||(f()?[a,u,c]:void 0)}return s});return ke(()=>{const n=t()();if(!n)return r.fallback;const[i,s,o]=n,a=o.children;return typeof a=="function"&&a.length>0?br(()=>a(o.keyed?s():()=>{if(br(t)()?.[0]!==i)throw bU("Match");return s()})):a},void 0,void 0)}function Ne(r){return r}let Uh;function PX(){Uh&&[...Uh].forEach(r=>r())}function wU(r){let e;const[t,n]=$e(e,void 0);return Uh||(Uh=new Set),Uh.add(n),yt(()=>Uh.delete(n)),ke(()=>{let i;if(i=t()){const s=r.fallback;return typeof s=="function"&&s.length?br(()=>s(i,()=>n())):s}return wX(()=>r.children,n)},void 0,void 0)}const OX=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],DX=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...OX]),$X=new Set(["innerHTML","textContent","innerText","children"]),MX=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),BX=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function NX(r,e){const t=BX[r];return typeof t=="object"?t[e]?t.$:void 0:t}const LX=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),FX=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),UX={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Or=r=>ke(()=>r());function zX(r,e,t){let n=t.length,i=e.length,s=n,o=0,a=0,c=e[i-1].nextSibling,l=null;for(;o<i||a<s;){if(e[o]===t[a]){o++,a++;continue}for(;e[i-1]===t[s-1];)i--,s--;if(i===o){const u=s<n?a?t[a-1].nextSibling:t[s-a]:c;for(;a<s;)r.insertBefore(t[a++],u)}else if(s===a)for(;o<i;)(!l||!l.has(e[o]))&&e[o].remove(),o++;else if(e[o]===t[s-1]&&t[a]===e[i-1]){const u=e[--i].nextSibling;r.insertBefore(t[a++],e[o++].nextSibling),r.insertBefore(t[--s],u),e[i]=t[s]}else{if(!l){l=new Map;let f=a;for(;f<s;)l.set(t[f],f++)}const u=l.get(e[o]);if(u!=null)if(a<u&&u<s){let f=o,h=1,d;for(;++f<i&&f<s&&!((d=l.get(e[f]))==null||d!==u+h);)h++;if(h>u-a){const g=e[o];for(;a<u;)r.insertBefore(t[a++],g)}else r.replaceChild(t[a++],e[o++])}else o++;else e[o++].remove()}}}const c6="_$DX_DELEGATE";function qX(r,e,t,n={}){let i;return el(s=>{i=s,e===document?r():ce(e,r(),e.firstChild?null:void 0,t)},n.owner),()=>{i(),e.textContent=""}}function ye(r,e,t,n){let i;const s=()=>{const a=n?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=r,t?a.content.firstChild.firstChild:n?a.firstChild:a.content.firstChild},o=e?()=>br(()=>document.importNode(i||(i=s()),!0)):()=>(i||(i=s())).cloneNode(!0);return o.cloneNode=o,o}function Yt(r,e=window.document){const t=e[c6]||(e[c6]=new Set);for(let n=0,i=r.length;n<i;n++){const s=r[n];t.has(s)||(t.add(s),e.addEventListener(s,WX))}}function Mr(r,e,t){t==null?r.removeAttribute(e):r.setAttribute(e,t)}function jX(r,e,t,n){n==null?r.removeAttributeNS(e,t):r.setAttributeNS(e,t,n)}function VX(r,e,t){t?r.setAttribute(e,""):r.removeAttribute(e)}function ui(r,e){e==null?r.removeAttribute("class"):r.className=e}function zs(r,e,t,n){if(n)Array.isArray(t)?(r[`$$${e}`]=t[0],r[`$$${e}Data`]=t[1]):r[`$$${e}`]=t;else if(Array.isArray(t)){const i=t[0];r.addEventListener(e,t[0]=s=>i.call(r,t[1],s))}else r.addEventListener(e,t,typeof t!="function"&&t)}function Gr(r,e,t={}){const n=Object.keys(e||{}),i=Object.keys(t);let s,o;for(s=0,o=i.length;s<o;s++){const a=i[s];!a||a==="undefined"||e[a]||(l6(r,a,!1),delete t[a])}for(s=0,o=n.length;s<o;s++){const a=n[s],c=!!e[a];!a||a==="undefined"||t[a]===c||!c||(l6(r,a,!0),t[a]=c)}return t}function AT(r,e,t){if(!e)return t?Mr(r,"style"):e;const n=r.style;if(typeof e=="string")return n.cssText=e;typeof t=="string"&&(n.cssText=t=void 0),t||(t={}),e||(e={});let i,s;for(s in t)e[s]==null&&n.removeProperty(s),delete t[s];for(s in e)i=e[s],i!==t[s]&&(n.setProperty(s,i),t[s]=i);return t}function bn(r,e={},t,n){const i={};return n||ht(()=>i.children=H0(r,e.children,i.children)),ht(()=>typeof e.ref=="function"&&qd(e.ref,r)),ht(()=>KX(r,e,t,!0,i,!0)),i}function qd(r,e,t){return br(()=>r(e,t))}function ce(r,e,t,n){if(t!==void 0&&!n&&(n=[]),typeof e!="function")return H0(r,e,n,t);ht(i=>H0(r,e(),i,t),n)}function KX(r,e,t,n,i={},s=!1){e||(e={});for(const o in i)if(!(o in e)){if(o==="children")continue;i[o]=u6(r,o,null,i[o],t,s,e)}for(const o in e){if(o==="children")continue;const a=e[o];i[o]=u6(r,o,a,i[o],t,s,e)}}function HX(r){return r.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function l6(r,e,t){const n=e.trim().split(/\s+/);for(let i=0,s=n.length;i<s;i++)r.classList.toggle(n[i],t)}function u6(r,e,t,n,i,s,o){let a,c,l,u,f;if(e==="style")return AT(r,t,n);if(e==="classList")return Gr(r,t,n);if(t===n)return n;if(e==="ref")s||t(r);else if(e.slice(0,3)==="on:"){const h=e.slice(3);n&&r.removeEventListener(h,n,typeof n!="function"&&n),t&&r.addEventListener(h,t,typeof t!="function"&&t)}else if(e.slice(0,10)==="oncapture:"){const h=e.slice(10);n&&r.removeEventListener(h,n,!0),t&&r.addEventListener(h,t,!0)}else if(e.slice(0,2)==="on"){const h=e.slice(2).toLowerCase(),d=LX.has(h);if(!d&&n){const g=Array.isArray(n)?n[0]:n;r.removeEventListener(h,g)}(d||t)&&(zs(r,h,t,d),d&&Yt([h]))}else if(e.slice(0,5)==="attr:")Mr(r,e.slice(5),t);else if(e.slice(0,5)==="bool:")VX(r,e.slice(5),t);else if((f=e.slice(0,5)==="prop:")||(l=$X.has(e))||!i&&((u=NX(e,r.tagName))||(c=DX.has(e)))||(a=r.nodeName.includes("-")||"is"in o))f&&(e=e.slice(5),c=!0),e==="class"||e==="className"?ui(r,t):a&&!c&&!l?r[HX(e)]=t:r[u||e]=t;else{const h=i&&e.indexOf(":")>-1&&UX[e.split(":")[0]];h?jX(r,h,e,t):Mr(r,MX[e]||e,t)}return t}function WX(r){let e=r.target;const t=`$$${r.type}`,n=r.target,i=r.currentTarget,s=c=>Object.defineProperty(r,"target",{configurable:!0,value:c}),o=()=>{const c=e[t];if(c&&!e.disabled){const l=e[`${t}Data`];if(l!==void 0?c.call(e,l,r):c.call(e,r),r.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(r.target)&&s(e.host),!0},a=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return e||document}}),r.composedPath){const c=r.composedPath();s(c[0]);for(let l=0;l<c.length-2&&(e=c[l],!!o());l++){if(e._$host){e=e._$host,a();break}if(e.parentNode===i)break}}else a();s(n)}function H0(r,e,t,n,i){for(;typeof t=="function";)t=t();if(e===t)return t;const s=typeof e,o=n!==void 0;if(r=o&&t[0]&&t[0].parentNode||r,s==="string"||s==="number"){if(s==="number"&&(e=e.toString(),e===t))return t;if(o){let a=t[0];a&&a.nodeType===3?a.data!==e&&(a.data=e):a=document.createTextNode(e),t=sh(r,t,n,a)}else t!==""&&typeof t=="string"?t=r.firstChild.data=e:t=r.textContent=e}else if(e==null||s==="boolean")t=sh(r,t,n);else{if(s==="function")return ht(()=>{let a=e();for(;typeof a=="function";)a=a();t=H0(r,a,t,n)}),()=>t;if(Array.isArray(e)){const a=[],c=t&&Array.isArray(t);if(eA(a,e,t,i))return ht(()=>t=H0(r,a,t,n,!0)),()=>t;if(a.length===0){if(t=sh(r,t,n),o)return t}else c?t.length===0?f6(r,a,n):zX(r,t,a):(t&&sh(r),f6(r,a));t=a}else if(e.nodeType){if(Array.isArray(t)){if(o)return t=sh(r,t,n,e);sh(r,t,null,e)}else t==null||t===""||!r.firstChild?r.appendChild(e):r.replaceChild(e,r.firstChild);t=e}}return t}function eA(r,e,t,n){let i=!1;for(let s=0,o=e.length;s<o;s++){let a=e[s],c=t&&t[r.length],l;if(!(a==null||a===!0||a===!1))if((l=typeof a)=="object"&&a.nodeType)r.push(a);else if(Array.isArray(a))i=eA(r,a,c)||i;else if(l==="function")if(n){for(;typeof a=="function";)a=a();i=eA(r,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||i}else r.push(a),i=!0;else{const u=String(a);c&&c.nodeType===3&&c.data===u?r.push(c):r.push(document.createTextNode(u))}}return i}function f6(r,e,t=null){for(let n=0,i=e.length;n<i;n++)r.insertBefore(e[n],t)}function sh(r,e,t,n){if(t===void 0)return r.textContent="";const i=n||document.createTextNode("");if(e.length){let s=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(i!==a){const c=a.parentNode===r;!s&&!o?c?r.replaceChild(i,a):r.insertBefore(i,t):c&&a.remove()}else s=!0}}else r.insertBefore(i,t);return[i]}const GX=!1,YX="http://www.w3.org/2000/svg";function xU(r,e=!1){return e?document.createElementNS(YX,r):document.createElement(r)}function hb(r){const{useShadow:e}=r,t=document.createTextNode(""),n=()=>r.mount||document.body,i=Nf();let s;return it(()=>{s||(s=Rg(i,()=>ke(()=>r.children)));const o=n();if(o instanceof HTMLHeadElement){const[a,c]=$e(!1),l=()=>c(!0);el(u=>ce(o,()=>a()?u():s(),null)),yt(l)}else{const a=xU(r.isSVG?"g":"div",r.isSVG),c=e&&a.attachShadow?a.attachShadow({mode:"open"}):a;Object.defineProperty(a,"_$host",{get(){return t.parentNode},configurable:!0}),ce(c,s),o.appendChild(a),r.ref&&r.ref(a),yt(()=>o.removeChild(a))}},void 0,{render:!0}),t}function XX(r,e){const t=ke(r);return ke(()=>{const n=t();switch(typeof n){case"function":return br(()=>n(e));case"string":const i=FX.has(n),s=xU(n,i);return bn(s,e,i),s}})}function JX(r){const[,e]=Mt(r,["component"]);return XX(()=>r.component,e)}/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const Xi=2n**255n-19n,A0=2n**252n+27742317777372353535851937790883648493n,h6=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,d6=0x6666666666666666666666666666666666666666666666666666666666666658n,QX=37095705934669439343138083508754565189542113879843219016388785533085940283555n,mm={a:-1n,d:QX,h:8},ki=(r="")=>{throw new Error(r)},_U=r=>typeof r=="string",ZX=r=>r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array",pd=(r,e)=>!ZX(r)||typeof e=="number"&&e>0&&r.length!==e?ki("Uint8Array of valid length expected"):r,gd=r=>new Uint8Array(r),cf=(r,e)=>pd(_U(r)?CT(r):gd(pd(r)),e),Vt=(r,e=Xi)=>{let t=r%e;return t>=0n?t:e+t},p6=r=>r instanceof au?r:ki("Point expected");let au=class Oh{constructor(e,t,n,i){this.ex=e,this.ey=t,this.ez=n,this.et=i}static fromAffine(e){return new Oh(e.x,e.y,1n,Vt(e.x*e.y))}static fromHex(e,t=!1){const{d:n}=mm;e=cf(e,32);const i=e.slice(),s=e[31];i[31]=s&-129;const o=TT(i);t&&!(0n<=o&&o<2n**256n)&&ki("bad y coord 1"),!t&&!(0n<=o&&o<Xi)&&ki("bad y coord 2");const a=Vt(o*o),c=Vt(a-1n),l=Vt(n*a+1n);let{isValid:u,value:f}=tJ(c,l);u||ki("bad y coordinate 3");const h=(f&1n)===1n,d=(s&128)!==0;return!t&&f===0n&&d&&ki("bad y coord 3"),d!==h&&(f=Vt(-f)),new Oh(f,o,1n,Vt(f*o))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){const{ex:t,ey:n,ez:i}=this,{ex:s,ey:o,ez:a}=p6(e),c=Vt(t*a),l=Vt(s*i),u=Vt(n*a),f=Vt(o*i);return c===l&&u===f}is0(){return this.equals(s0)}negate(){return new Oh(Vt(-this.ex),this.ey,this.ez,Vt(-this.et))}double(){const{ex:e,ey:t,ez:n}=this,{a:i}=mm,s=Vt(e*e),o=Vt(t*t),a=Vt(2n*Vt(n*n)),c=Vt(i*s),l=e+t,u=Vt(Vt(l*l)-s-o),f=c+o,h=f-a,d=c-o,g=Vt(u*h),p=Vt(f*d),m=Vt(u*d),y=Vt(h*f);return new Oh(g,p,y,m)}add(e){const{ex:t,ey:n,ez:i,et:s}=this,{ex:o,ey:a,ez:c,et:l}=p6(e),{a:u,d:f}=mm,h=Vt(t*o),d=Vt(n*a),g=Vt(s*f*l),p=Vt(i*c),m=Vt((t+n)*(o+a)-h-d),y=Vt(p-g),v=Vt(p+g),b=Vt(d-u*h),_=Vt(m*y),x=Vt(v*b),E=Vt(m*b),S=Vt(y*v);return new Oh(_,x,S,E)}mul(e,t=!0){if(e===0n)return t===!0?ki("cannot multiply by 0"):s0;if(typeof e=="bigint"&&0n<e&&e<A0||ki("invalid scalar, must be < L"),!t&&this.is0()||e===1n)return this;if(this.equals(cu))return fJ(e).p;let n=s0,i=cu;for(let s=this;e>0n;s=s.double(),e>>=1n)e&1n?n=n.add(s):t&&(i=i.add(s));return n}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(mm.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(A0/2n,!1).double();return A0%2n&&(e=e.add(this)),e.is0()}toAffine(){const{ex:e,ey:t,ez:n}=this;if(this.equals(s0))return{x:0n,y:1n};const i=AU(n,Xi);return Vt(n*i)!==1n&&ki("invalid inverse"),{x:Vt(e*i),y:Vt(t*i)}}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=EU(t);return n[31]|=e&1n?128:0,n}toHex(){return IT(this.toRawBytes())}};au.BASE=new au(h6,d6,1n,Vt(h6*d6));au.ZERO=new au(0n,1n,1n,0n);const{BASE:cu,ZERO:s0}=au,SU=(r,e)=>r.toString(16).padStart(e,"0"),IT=r=>Array.from(pd(r)).map(e=>SU(e,2)).join(""),Cc={_0:48,_9:57,A:65,F:70,a:97,f:102},g6=r=>{if(r>=Cc._0&&r<=Cc._9)return r-Cc._0;if(r>=Cc.A&&r<=Cc.F)return r-(Cc.A-10);if(r>=Cc.a&&r<=Cc.f)return r-(Cc.a-10)},CT=r=>{const e="hex invalid";if(!_U(r))return ki(e);const t=r.length,n=t/2;if(t%2)return ki(e);const i=gd(n);for(let s=0,o=0;s<n;s++,o+=2){const a=g6(r.charCodeAt(o)),c=g6(r.charCodeAt(o+1));if(a===void 0||c===void 0)return ki(e);i[s]=a*16+c}return i},EU=r=>CT(SU(r,32*2)).reverse(),TT=r=>BigInt("0x"+IT(gd(pd(r)).reverse())),W0=(...r)=>{const e=gd(r.reduce((n,i)=>n+pd(i).length,0));let t=0;return r.forEach(n=>{e.set(n,t),t+=n.length}),e},AU=(r,e)=>{(r===0n||e<=0n)&&ki("no inverse n="+r+" mod="+e);let t=Vt(r,e),n=e,i=0n,s=1n;for(;t!==0n;){const o=n/t,a=n%t,c=i-s*o;n=t,t=a,i=s,s=c}return n===1n?Vt(i,e):ki("no inverse")},Ua=(r,e)=>{let t=r;for(;e-- >0n;)t*=t,t%=Xi;return t},eJ=r=>{const t=r*r%Xi*r%Xi,n=Ua(t,2n)*t%Xi,i=Ua(n,1n)*r%Xi,s=Ua(i,5n)*i%Xi,o=Ua(s,10n)*s%Xi,a=Ua(o,20n)*o%Xi,c=Ua(a,40n)*a%Xi,l=Ua(c,80n)*c%Xi,u=Ua(l,80n)*c%Xi,f=Ua(u,10n)*s%Xi;return{pow_p_5_8:Ua(f,2n)*r%Xi,b2:t}},m6=19681161376707505956807079304988542015446066515923890162744021073123829784752n,tJ=(r,e)=>{const t=Vt(e*e*e),n=Vt(t*t*e),i=eJ(r*n).pow_p_5_8;let s=Vt(r*t*i);const o=Vt(e*s*s),a=s,c=Vt(s*m6),l=o===r,u=o===Vt(-r),f=o===Vt(-r*m6);return l&&(s=a),(u||f)&&(s=c),(Vt(s)&1n)===1n&&(s=Vt(-s)),{isValid:l||u,value:s}},Zy=r=>Vt(TT(r),A0);let I0;const RT=(...r)=>PT.sha512Async(...r),rJ=(...r)=>typeof I0=="function"?I0(...r):ki("etc.sha512Sync not set"),IU=r=>{const e=r.slice(0,32);e[0]&=248,e[31]&=127,e[31]|=64;const t=r.slice(32,64),n=Zy(e),i=cu.mul(n),s=i.toRawBytes();return{head:e,prefix:t,scalar:n,point:i,pointBytes:s}},kT=r=>RT(cf(r,32)).then(IU),nJ=r=>IU(rJ(cf(r,32))),iJ=r=>kT(r).then(e=>e.pointBytes);function CU(r,e){return RT(e.hashable).then(e.finish)}const sJ=(r,e,t)=>{const{pointBytes:n,scalar:i}=r,s=Zy(e),o=cu.mul(s).toRawBytes();return{hashable:W0(o,n,t),finish:l=>{const u=Vt(s+Zy(l)*i,A0);return pd(W0(o,EU(u)),64)}}},oJ=async(r,e)=>{const t=cf(r),n=await kT(e),i=await RT(n.prefix,t);return CU(!0,sJ(n,i,t))},TU={zip215:!0},aJ=(r,e,t,n=TU)=>{r=cf(r,64),e=cf(e),t=cf(t,32);const{zip215:i}=n;let s,o,a,c,l=new Uint8Array;try{s=au.fromHex(t,i),o=au.fromHex(r.slice(0,32),i),a=TT(r.slice(32,64)),c=cu.mul(a,!1),l=W0(o.toRawBytes(),s.toRawBytes(),e)}catch{}return{hashable:l,finish:f=>{if(c==null||!i&&s.isSmallOrder())return!1;const h=Zy(f);return o.add(s.mul(h,!1)).add(c.negate()).clearCofactor().is0()}}},cJ=async(r,e,t,n=TU)=>CU(!0,aJ(r,e,t,n)),y6=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,PT={bytesToHex:IT,hexToBytes:CT,concatBytes:W0,mod:Vt,invert:AU,randomBytes:(r=32)=>{const e=y6();return(!e||!e.getRandomValues)&&ki("crypto.getRandomValues must be defined"),e.getRandomValues(gd(r))},sha512Async:async(...r)=>{const e=y6(),t=e&&e.subtle;t||ki("etc.sha512Async or crypto.subtle must be defined");const n=W0(...r);return gd(await t.digest("SHA-512",n.buffer))},sha512Sync:void 0};Object.defineProperties(PT,{sha512Sync:{configurable:!1,get(){return I0},set(r){I0||(I0=r)}}});const lJ={getExtendedPublicKeyAsync:kT,getExtendedPublicKey:nJ,randomPrivateKey:()=>PT.randomBytes(32),precompute:(r=8,e=cu)=>(e.multiply(3n),e)},Wu=8,uJ=()=>{const r=[],e=256/Wu+1;let t=cu,n=t;for(let i=0;i<e;i++){n=t,r.push(n);for(let s=1;s<2**(Wu-1);s++)n=n.add(t),r.push(n);t=n.double()}return r};let v6;const fJ=r=>{const e=v6||(v6=uJ()),t=(u,f)=>{let h=f.negate();return u?h:f};let n=s0,i=cu;const s=1+256/Wu,o=2**(Wu-1),a=BigInt(2**Wu-1),c=2**Wu,l=BigInt(Wu);for(let u=0;u<s;u++){const f=u*o;let h=Number(r&a);r>>=l,h>o&&(h-=c,r+=1n);const d=f,g=f+Math.abs(h)-1,p=u%2!==0,m=h<0;h===0?i=i.add(t(p,e[d])):n=n.add(t(m,e[g]))}return{p:n,f:i}};var RU=new Set(["decrypt","deriveBits","deriveKey","encrypt","unwrapKey","wrapKey"]),kU=[48,46,2,1,0,48,5,6,3,43,101,112,4,34,4,32];function G0(r){return r instanceof Uint8Array?r:new Uint8Array(ArrayBuffer.isView(r)?r.buffer:r)}var Y0,ev;function hJ(r,e,t){const n=dJ(e,t),i=Y0||=new WeakMap;return i.set(n.privateKey,r),i.set(n.publicKey,r),n}function dJ(r,e){if(e.length===0)throw new DOMException("Usages cannot be empty when creating a key.","SyntaxError");if(e.some(s=>RU.has(s)))throw new DOMException("Unsupported key usage for an Ed25519 key.","SyntaxError");const t={[Symbol.toStringTag]:"CryptoKey",algorithm:Object.freeze({name:"Ed25519"})},n={...t,extractable:r,type:"private",usages:Object.freeze(e.filter(s=>s==="sign"))},i={...t,extractable:!0,type:"public",usages:Object.freeze(e.filter(s=>s==="verify"))};return Object.freeze({privateKey:Object.freeze(n),publicKey:Object.freeze(i)})}function tv(r){const e=Y0?.get(r);if(e===void 0)throw new Error("Could not find secret key material associated with this `CryptoKey`");return e}async function tA(r){const e=ev||=new WeakMap,t=e.get(r);if(t)return t;const n=await iJ(tv(r));return e.set(r,n),n}function b6(r){return btoa(Array.from(r,e=>String.fromCharCode(e)).join("")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function w6(r){const e=r.length%4,t=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(e===0?0:4-e),"=");return Uint8Array.from(atob(t),n=>n.charCodeAt(0))}async function pJ(r,e){if(e.extractable===!1)throw new DOMException("key is not extractable","InvalidAccessException");switch(r){case"raw":{if(e.type!=="public")throw new DOMException(`Unable to export a raw Ed25519 ${e.type} key`,"InvalidAccessError");return await tA(e)}case"pkcs8":{if(e.type!=="private")throw new DOMException(`Unable to export a pkcs8 Ed25519 ${e.type} key`,"InvalidAccessError");const t=tv(e);return new Uint8Array([...kU,...t])}case"jwk":{const t=await tA(e),n={crv:"Ed25519",ext:e.extractable,key_ops:e.usages,kty:"OKP",x:b6(t)};if(e.type==="private"){const i=tv(e);return Object.freeze({...n,d:b6(i)})}return Object.freeze({...n})}default:throw new Error(`Exporting polyfilled Ed25519 keys in the "${r}" format is unimplemented`)}}function gJ(r,e){const t=lJ.randomPrivateKey();return hJ(t,r,e)}function Jw(r){return!!Y0?.has(r)||!!ev?.has(r)}async function mJ(r,e){if(r.type!=="private"||!r.usages.includes("sign"))throw new DOMException("Unable to use this key to sign","InvalidAccessError");const t=tv(r),n=G0(e);return await oJ(n,t)}async function yJ(r,e,t){if(r.type!=="public"||!r.usages.includes("verify"))throw new DOMException("Unable to use this key to verify","InvalidAccessError");const n=await tA(r);try{return await cJ(G0(e),G0(t),n)}catch{return!1}}function Qw(r,e){const t=new Set([...e==="private"?["verify"]:["sign"],...RU]);if(r.some(n=>t.has(n)))throw new DOMException("Unsupported key usage for a Ed25519 key","SyntaxError")}function vJ(r,e,t,n){if(r==="raw"){const i=G0(e);if(Qw(n,"public"),i.length!==32)throw new DOMException("Ed25519 raw keys must be exactly 32-bytes","DataError");const s={[Symbol.toStringTag]:"CryptoKey",algorithm:Object.freeze({name:"Ed25519"}),extractable:t,type:"public",usages:Object.freeze(n.filter(a=>a==="verify"))};return(ev||=new WeakMap).set(s,i),s}if(r==="pkcs8"){const i=G0(e);if(Qw(n,"private"),i.length!==48)throw new DOMException("Invalid keyData","DataError");if(!i.slice(0,16).every((l,u)=>l===kU[u]))throw new DOMException("Invalid keyData","DataError");const o=i.slice(16),a={[Symbol.toStringTag]:"CryptoKey",algorithm:Object.freeze({name:"Ed25519"}),extractable:t,type:"private",usages:Object.freeze(n.filter(l=>l==="sign"))};return(Y0||=new WeakMap).set(a,o),a}if(r==="jwk"){const i=e,s="d"in i?"private":"public";Qw(n,s);const o=new Set(i.key_ops??[]),a=n.length===o.size&&[...n].every(u=>o.has(u));if(i.kty!=="OKP"||i.crv!=="Ed25519"||i.ext!==t||!a)throw new DOMException("Invalid Ed25519 JWK","DataError");if(s==="public"&&!i.x)throw new DOMException("Ed25519 JWK is missing public key coordinates","DataError");if(s==="private"&&!i.d)throw new DOMException("Ed25519 JWK is missing private key coordinates","DataError");const c=s==="public"?"verify":"sign",l=Object.freeze({[Symbol.toStringTag]:"CryptoKey",algorithm:Object.freeze({name:"Ed25519"}),extractable:t,type:s,usages:Object.freeze(n.filter(u=>u===c))});return s==="public"?(ev||=new WeakMap).set(l,w6(i.x)):(Y0||=new WeakMap).set(l,w6(i.d)),l}throw new Error(`Importing Ed25519 keys in the "${r}" format is unimplemented`)}function x6(r){return(typeof r=="string"?r:r.name).localeCompare("Ed25519","en-US",{sensitivity:"base"})===0}function bJ(){if(globalThis.isSecureContext){const r=globalThis.crypto||={},e=r.subtle||={},t=e.exportKey;e.exportKey=async(...l)=>{const[u,f]=l;if(Jw(f))return await pJ(...l);if(t)return await t.apply(e,l);throw new TypeError("No native `exportKey` function exists to handle this call")};const n=e.generateKey;let i;e.generateKey=async(...l)=>{const[u]=l;if(!x6(u)){if(n)return await n.apply(e,l);throw new TypeError("No native `generateKey` function exists to handle this call")}let f;if(i===void 0&&(i=new Promise(h=>{if(!n){h(i=!1);return}n.apply(e,l).then(d=>{e.generateKey!==n&&(e.generateKey=n),f=d,h(i=!0)}).catch(()=>{h(i=!1)})})),typeof i=="boolean"?i:await i){if(f)return f;if(n)return await n.apply(e,l);throw new TypeError("No native `generateKey` function exists to handle this call")}else{const[h,d,g]=l;return gJ(d,g)}};const s=e.sign;e.sign=async(...l)=>{const[u,f]=l;if(Jw(f)){const[h,...d]=l;return await mJ(...d)}else{if(s)return await s.apply(e,l);throw new TypeError("No native `sign` function exists to handle this call")}};const o=e.verify;e.verify=async(...l)=>{const[u,f]=l;if(Jw(f)){const[h,...d]=l;return await yJ(...d)}else{if(o)return await o.apply(e,l);throw new TypeError("No native `verify` function exists to handle this call")}};const a=e.importKey;let c;e.importKey=async(...l)=>{const[u,f,h]=l;if(!x6(h)){if(a)return await a.apply(e,l);throw new TypeError("No native `importKey` function exists to handle this call")}let d;if(c===void 0&&(c=new Promise(g=>{if(!a){g(c=!1);return}a.apply(e,l).then(p=>{e.importKey!==a&&(e.importKey=a),d=p,g(c=!0)}).catch(()=>{g(c=!1)})})),typeof a=="boolean"?c:await c){if(d)return d;if(a)return await a.apply(e,l);throw new TypeError("No native `importKey` function exists to handle this call")}else{const[g,p,m,y,v]=l;return vJ(u,f,y,v)}}}}function Lf(r,e){const t=nn(e);return[n=>D(t.Provider,{value:r(n),get children(){return n.children}}),()=>Qr(t)]}function wJ(r){const{values:e}=r,t=n=>{let i=e[n];if(!i)return r.children;const s={get children(){return t(n+1)}};return Array.isArray(i)&&(s.value=i[1],i=i[0],typeof i!="function"&&(i=i.Provider)),D(i,s)};return t(0)}function PU(){let r=new Set;function e(i){return r.add(i),()=>r.delete(i)}let t=!1;function n(i,s){if(t)return!(t=!1);const o={to:i,options:s,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of r)a.listener({...o,from:a.location,retry:c=>{c&&(t=!0),a.navigate(i,{...s,resolve:!1})}});return!o.defaultPrevented}return{subscribe:e,confirm:n}}let rA;function OT(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),rA=window.history.state._depth}OT();function xJ(r){return{...r,_depth:window.history.state&&window.history.state._depth}}function _J(r,e){let t=!1;return()=>{const n=rA;OT();const i=n==null?null:rA-n;if(t){t=!1;return}i&&e(i)?(t=!0,window.history.go(-i)):r()}}const SJ=/^(?:[a-z0-9]+:)?\/\//i,EJ=/^\/+|(\/)\/+$/g,OU="http://sr";function lf(r,e=!1){const t=r.replace(EJ,"$1");return t?e||/^[?#]/.test(t)?t:"/"+t:""}function vy(r,e,t){if(SJ.test(e))return;const n=lf(r),i=t&&lf(t);let s="";return!i||e.startsWith("/")?s=n:i.toLowerCase().indexOf(n.toLowerCase())!==0?s=n+i:s=i,(s||"/")+lf(e,!s)}function AJ(r,e){if(r==null)throw new Error(e);return r}function IJ(r,e){return lf(r).replace(/\/*(\*.*)?$/g,"")+lf(e)}function DU(r){const e={};return r.searchParams.forEach((t,n)=>{n in e?Array.isArray(e[n])?e[n].push(t):e[n]=[e[n],t]:e[n]=t}),e}function CJ(r,e,t){const[n,i]=r.split("/*",2),s=n.split("/").filter(Boolean),o=s.length;return a=>{const c=a.split("/").filter(Boolean),l=c.length-o;if(l<0||l>0&&i===void 0&&!e)return null;const u={path:o?"":"/",params:{}},f=h=>t===void 0?void 0:t[h];for(let h=0;h<o;h++){const d=s[h],g=d[0]===":",p=g?c[h]:c[h].toLowerCase(),m=g?d.slice(1):d.toLowerCase();if(g&&Zw(p,f(m)))u.params[m]=p;else if(g||!Zw(p,m))return null;u.path+=`/${p}`}if(i){const h=l?c.slice(-l).join("/"):"";if(Zw(h,f(i)))u.params[i]=h;else return null}return u}}function Zw(r,e){const t=n=>n===r;return e===void 0?!0:typeof e=="string"?t(e):typeof e=="function"?e(r):Array.isArray(e)?e.some(t):e instanceof RegExp?e.test(r):!1}function TJ(r){const[e,t]=r.pattern.split("/*",2),n=e.split("/").filter(Boolean);return n.reduce((i,s)=>i+(s.startsWith(":")?2:3),n.length-(t===void 0?0:1))}function $U(r){const e=new Map,t=Nf();return new Proxy({},{get(n,i){return e.has(i)||Rg(t,()=>e.set(i,ke(()=>r()[i]))),e.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(r())}})}function RJ(r,e){const t=new URLSearchParams(r);Object.entries(e).forEach(([i,s])=>{s==null||s===""||s instanceof Array&&!s.length?t.delete(i):s instanceof Array?(t.delete(i),s.forEach(o=>{t.append(i,String(o))})):t.set(i,String(s))});const n=t.toString();return n?`?${n}`:""}function MU(r){let e=/(\/?\:[^\/]+)\?/.exec(r);if(!e)return[r];let t=r.slice(0,e.index),n=r.slice(e.index+e[0].length);const i=[t,t+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(n);)i.push(t+=e[1]),n=n.slice(e[0].length);return MU(n).reduce((s,o)=>[...s,...i.map(a=>a+o)],[])}const kJ=100,BU=nn(),DT=nn(),Og=()=>AJ(Qr(BU),"<A> and 'use' router primitives can be only used inside a Route."),PJ=()=>Qr(DT)||Og().base,OJ=r=>{const e=PJ();return ke(()=>e.resolvePath(r()))},DJ=r=>{const e=Og();return ke(()=>{const t=r();return t!==void 0?e.renderPath(t):t})},Co=()=>Og().navigatorFactory(),Ff=()=>Og().location,db=()=>Og().params,Uf=()=>{const r=Ff(),e=Co(),t=(n,i)=>{const s=br(()=>RJ(r.search,n)+r.hash);e(s,{scroll:!1,resolve:!1,...i})};return[r.query,t]};function $J(r,e=""){const{component:t,preload:n,load:i,children:s,info:o}=r,a=!s||Array.isArray(s)&&!s.length,c={key:r,component:t,preload:n||i,info:o};return NU(r.path).reduce((l,u)=>{for(const f of MU(u)){const h=IJ(e,f);let d=a?h:h.split("/*",1)[0];d=d.split("/").map(g=>g.startsWith(":")||g.startsWith("*")?g:encodeURIComponent(g)).join("/"),l.push({...c,originalPath:u,pattern:d,matcher:CJ(d,!a,r.matchFilters)})}return l},[])}function MJ(r,e=0){return{routes:r,score:TJ(r[r.length-1])*1e4-e,matcher(t){const n=[];for(let i=r.length-1;i>=0;i--){const s=r[i],o=s.matcher(t);if(!o)return null;n.unshift({...o,route:s})}return n}}}function NU(r){return Array.isArray(r)?r:[r]}function LU(r,e="",t=[],n=[]){const i=NU(r);for(let s=0,o=i.length;s<o;s++){const a=i[s];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const c=$J(a,e);for(const l of c){t.push(l);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)LU(a.children,l.pattern,t,n);else{const f=MJ([...t],n.length);n.push(f)}t.pop()}}}return t.length?n:n.sort((s,o)=>o.score-s.score)}function e1(r,e){for(let t=0,n=r.length;t<n;t++){const i=r[t].matcher(e);if(i)return i}return[]}function BJ(r,e,t){const n=new URL(OU),i=ke(u=>{const f=r();try{return new URL(f,n)}catch{return console.error(`Invalid path ${f}`),u}},n,{equals:(u,f)=>u.href===f.href}),s=ke(()=>i().pathname),o=ke(()=>i().search,!0),a=ke(()=>i().hash),c=()=>"",l=kn(o,()=>DU(i()));return{get pathname(){return s()},get search(){return o()},get hash(){return a()},get state(){return e()},get key(){return c()},query:t?t(l):$U(l)}}let Gu;function NJ(){return Gu}function LJ(r,e,t,n={}){const{signal:[i,s],utils:o={}}=r,a=o.parsePath||(w=>w),c=o.renderPath||(w=>w),l=o.beforeLeave||PU(),u=vy("",n.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!i().value&&s({value:u,replace:!0,scroll:!1});const[f,h]=$e(!1);let d;const g=(w,R)=>{R.value===p()&&R.state===y()||(d===void 0&&h(!0),Gu=w,d=R,xX(()=>{d===R&&(m(d.value),v(d.state),PX(),x[1](N=>N.filter(Y=>Y.pending)))}).finally(()=>{d===R&&ai(()=>{Gu=void 0,w==="navigate"&&j(d),h(!1),d=void 0})}))},[p,m]=$e(i().value),[y,v]=$e(i().state),b=BJ(p,y,o.queryWrapper),_=[],x=$e([]),E=ke(()=>typeof n.transformUrl=="function"?e1(e(),n.transformUrl(b.pathname)):e1(e(),b.pathname)),S=()=>{const w=E(),R={};for(let N=0;N<w.length;N++)Object.assign(R,w[N].params);return R},C=o.paramsWrapper?o.paramsWrapper(S,e):$U(S),k={pattern:u,path:()=>u,outlet:()=>null,resolvePath(w){return vy(u,w)}};return ht(kn(i,w=>g("native",w),{defer:!0})),{base:k,location:b,params:C,isRouting:f,renderPath:c,parsePath:a,navigatorFactory:J,matches:E,beforeLeave:l,preloadRoute:L,singleFlight:n.singleFlight===void 0?!0:n.singleFlight,submissions:x};function $(w,R,N){br(()=>{if(typeof R=="number"){R&&(o.go?o.go(R):console.warn("Router integration does not support relative routing"));return}const Y=!R||R[0]==="?",{replace:z,resolve:G,scroll:te,state:X}={replace:!1,resolve:!Y,scroll:!0,...N},T=G?w.resolvePath(R):vy(Y&&b.pathname||"",R);if(T===void 0)throw new Error(`Path '${R}' is not a routable path`);if(_.length>=kJ)throw new Error("Too many redirects");const A=p();(T!==A||X!==y())&&(GX||l.confirm(T,N)&&(_.push({value:A,replace:z,scroll:te,state:y()}),g("navigate",{value:T,state:X})))})}function J(w){return w=w||Qr(DT)||k,(R,N)=>$(w,R,N)}function j(w){const R=_[0];R&&(s({...w,replace:R.replace,scroll:R.scroll}),_.length=0)}function L(w,R){const N=e1(e(),w.pathname),Y=Gu;Gu="preload";for(let z in N){const{route:G,params:te}=N[z];G.component&&G.component.preload&&G.component.preload();const{preload:X}=G;R&&X&&Rg(t(),()=>X({params:te,location:{pathname:w.pathname,search:w.search,hash:w.hash,query:DU(w),state:null,key:""},intent:"preload"}))}Gu=Y}}function FJ(r,e,t,n){const{base:i,location:s,params:o}=r,{pattern:a,component:c,preload:l}=n().route,u=ke(()=>n().path);c&&c.preload&&c.preload();const f=l?l({params:o,location:s,intent:Gu||"initial"}):void 0;return{parent:e,pattern:a,path:u,outlet:()=>c?D(c,{params:o,location:s,data:f,get children(){return t()}}):t(),resolvePath(d){return vy(i.path(),d,u())}}}const UJ=r=>e=>{const{base:t}=e,n=Ud(()=>e.children),i=ke(()=>LU(n(),e.base||""));let s;const o=LJ(r,i,()=>s,{base:t,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return r.create&&r.create(o),D(BU.Provider,{value:o,get children(){return D(zJ,{routerState:o,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[Or(()=>(s=Nf())&&null),D(qJ,{routerState:o,get branches(){return i()}})]}})}})};function zJ(r){const e=r.routerState.location,t=r.routerState.params,n=ke(()=>r.preload&&br(()=>{r.preload({params:t,location:e,intent:NJ()||"initial"})}));return D(We,{get when(){return r.root},keyed:!0,get fallback(){return r.children},children:i=>D(i,{params:t,location:e,get data(){return n()},get children(){return r.children}})})}function qJ(r){const e=[];let t;const n=ke(kn(r.routerState.matches,(i,s,o)=>{let a=s&&i.length===s.length;const c=[];for(let l=0,u=i.length;l<u;l++){const f=s&&s[l],h=i[l];o&&f&&h.route.key===f.route.key?c[l]=o[l]:(a=!1,e[l]&&e[l](),el(d=>{e[l]=d,c[l]=FJ(r.routerState,c[l-1]||r.routerState.base,_6(()=>n()[l+1]),()=>r.routerState.matches()[l])}))}return e.splice(i.length).forEach(l=>l()),o&&a?o:(t=c[0],c)}));return _6(()=>n()&&t)()}const _6=r=>()=>D(We,{get when(){return r()},keyed:!0,children:e=>D(DT.Provider,{value:e,get children(){return e.outlet()}})}),Zn=r=>{const e=Ud(()=>r.children);return st(r,{get children(){return e()}})};function jJ([r,e],t,n){return[r,n?i=>e(n(i)):e]}function FU(r){let e=!1;const t=i=>typeof i=="string"?{value:i}:i,n=jJ($e(t(r.get()),{equals:(i,s)=>i.value===s.value&&i.state===s.state}),void 0,i=>(!e&&r.set(i),i));return r.init&&yt(r.init((i=r.get())=>{e=!0,n[1](t(i)),e=!1})),UJ({signal:n,create:r.create,utils:r.utils})}function VJ(r,e,t){return r.addEventListener(e,t),()=>r.removeEventListener(e,t)}function UU(r,e){const t=r&&document.getElementById(r);t?t.scrollIntoView():e&&window.scrollTo(0,0)}const KJ=new Map;function zU(r=!0,e=!1,t="/_server",n){return i=>{const s=i.base.path(),o=i.navigatorFactory(i.base);let a,c;function l(p){return p.namespaceURI==="http://www.w3.org/2000/svg"}function u(p){if(p.defaultPrevented||p.button!==0||p.metaKey||p.altKey||p.ctrlKey||p.shiftKey)return;const m=p.composedPath().find(E=>E instanceof Node&&E.nodeName.toUpperCase()==="A");if(!m||e&&!m.hasAttribute("link"))return;const y=l(m),v=y?m.href.baseVal:m.href;if((y?m.target.baseVal:m.target)||!v&&!m.hasAttribute("state"))return;const _=(m.getAttribute("rel")||"").split(/\s+/);if(m.hasAttribute("download")||_&&_.includes("external"))return;const x=y?new URL(v,document.baseURI):new URL(v);if(!(x.origin!==window.location.origin||s&&x.pathname&&!x.pathname.toLowerCase().startsWith(s.toLowerCase())))return[m,x]}function f(p){const m=u(p);if(!m)return;const[y,v]=m,b=i.parsePath(v.pathname+v.search+v.hash),_=y.getAttribute("state");p.preventDefault(),o(b,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:_?JSON.parse(_):void 0})}function h(p){const m=u(p);if(!m)return;const[y,v]=m;i.preloadRoute(v,y.getAttribute("preload")!=="false")}function d(p){clearTimeout(a);const m=u(p);if(!m)return c=null;const[y,v]=m;c!==y&&(a=setTimeout(()=>{i.preloadRoute(v,y.getAttribute("preload")!=="false"),c=y},20))}function g(p){if(p.defaultPrevented)return;let m=p.submitter&&p.submitter.hasAttribute("formaction")?p.submitter.getAttribute("formaction"):p.target.getAttribute("action");if(!m)return;if(!m.startsWith("https://action/")){const v=new URL(m,OU);if(m=i.parsePath(v.pathname+v.search),!m.startsWith(t))return}if(p.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=KJ.get(m);if(y){p.preventDefault();const v=new FormData(p.target,p.submitter);y.call({r:i,f:p.target},p.target.enctype==="multipart/form-data"?v:new URLSearchParams(v))}}Yt(["click","submit"]),document.addEventListener("click",f),r&&(document.addEventListener("mousemove",d,{passive:!0}),document.addEventListener("focusin",h,{passive:!0}),document.addEventListener("touchstart",h,{passive:!0})),document.addEventListener("submit",g),yt(()=>{document.removeEventListener("click",f),r&&(document.removeEventListener("mousemove",d),document.removeEventListener("focusin",h),document.removeEventListener("touchstart",h)),document.removeEventListener("submit",g)})}}function HJ(r){const e=r.replace(/^.*?#/,"");if(!e.startsWith("/")){const[,t="/"]=window.location.hash.split("#",2);return`${t}#${e}`}return e}function WJ(r){const e=()=>window.location.hash.slice(1),t=PU();return FU({get:e,set({value:n,replace:i,scroll:s,state:o}){i?window.history.replaceState(xJ(o),"","#"+n):window.history.pushState(o,"","#"+n);const a=n.indexOf("#"),c=a>=0?n.slice(a+1):"";UU(c,s),OT()},init:n=>VJ(window,"hashchange",_J(n,i=>!t.confirm(i&&i<0?i:e()))),create:zU(r.preload,r.explicitLinks,r.actionBase),utils:{go:n=>window.history.go(n),renderPath:n=>`#${n}`,parsePath:HJ,beforeLeave:t}})(r)}function GJ(){const r=["/"];let e=0;const t=[],n=i=>{e=Math.max(0,Math.min(e+i,r.length-1));const s=r[e];t.forEach(o=>o(s))};return{get:()=>r[e],set:({value:i,scroll:s,replace:o})=>{o?r[e]=i:(r.splice(e+1,r.length-e,i),e++),t.forEach(a=>a(i)),setTimeout(()=>{s&&UU(i.split("#")[1]||"",!0)},0)},back:()=>{n(-1)},forward:()=>{n(1)},go:n,listen:i=>(t.push(i),()=>{const s=t.indexOf(i);t.splice(s,1)})}}function YJ(r){const e=r.history||GJ();return FU({get:e.get,set:e.set,init:e.listen,create:zU(r.preload,r.explicitLinks,r.actionBase),utils:{go:e.go}})(r)}var XJ=ye("<a>");function JJ(r){r=st({inactiveClass:"inactive",activeClass:"active"},r);const[,e]=Mt(r,["href","state","class","activeClass","inactiveClass","end"]),t=OJ(()=>r.href),n=DJ(t),i=Ff(),s=ke(()=>{const o=t();if(o===void 0)return[!1,!1];const a=lf(o.split(/[?#]/,1)[0]).toLowerCase(),c=decodeURI(lf(i.pathname).toLowerCase());return[r.end?a===c:c.startsWith(a+"/")||c===a,a===c]});return(()=>{var o=XJ();return bn(o,st(e,{get href(){return n()||r.href},get state(){return JSON.stringify(r.state)},get classList(){return{...r.class&&{[r.class]:!0},[r.inactiveClass]:!s()[0],[r.activeClass]:s()[0],...e.classList}},link:"",get"aria-current"(){return s()[1]?"page":void 0}}),!1,!1),o})()}const nA=Symbol("store-raw"),Yh=Symbol("store-node"),Uc=Symbol("store-has"),qU=Symbol("store-self");function jU(r){let e=r[Ea];if(!e&&(Object.defineProperty(r,Ea,{value:e=new Proxy(r,eQ)}),!Array.isArray(r))){const t=Object.keys(r),n=Object.getOwnPropertyDescriptors(r);for(let i=0,s=t.length;i<s;i++){const o=t[i];n[o].get&&Object.defineProperty(r,o,{enumerable:n[o].enumerable,get:n[o].get.bind(e)})}}return e}function lu(r){let e;return r!=null&&typeof r=="object"&&(r[Ea]||!(e=Object.getPrototypeOf(r))||e===Object.prototype||Array.isArray(r))}function wf(r,e=new Set){let t,n,i,s;if(t=r!=null&&r[nA])return t;if(!lu(r)||e.has(r))return r;if(Array.isArray(r)){Object.isFrozen(r)?r=r.slice(0):e.add(r);for(let o=0,a=r.length;o<a;o++)i=r[o],(n=wf(i,e))!==i&&(r[o]=n)}else{Object.isFrozen(r)?r=Object.assign({},r):e.add(r);const o=Object.keys(r),a=Object.getOwnPropertyDescriptors(r);for(let c=0,l=o.length;c<l;c++)s=o[c],!a[s].get&&(i=r[s],(n=wf(i,e))!==i&&(r[s]=n))}return r}function rv(r,e){let t=r[e];return t||Object.defineProperty(r,e,{value:t=Object.create(null)}),t}function X0(r,e,t){if(r[e])return r[e];const[n,i]=$e(t,{equals:!1,internal:!0});return n.$=i,r[e]=n}function QJ(r,e){const t=Reflect.getOwnPropertyDescriptor(r,e);return!t||t.get||!t.configurable||e===Ea||e===Yh||(delete t.value,delete t.writable,t.get=()=>r[Ea][e]),t}function VU(r){Xy()&&X0(rv(r,Yh),qU)()}function ZJ(r){return VU(r),Reflect.ownKeys(r)}const eQ={get(r,e,t){if(e===nA)return r;if(e===Ea)return t;if(e===Wy)return VU(r),t;const n=rv(r,Yh),i=n[e];let s=i?i():r[e];if(e===Yh||e===Uc||e==="__proto__")return s;if(!i){const o=Object.getOwnPropertyDescriptor(r,e);Xy()&&(typeof s!="function"||r.hasOwnProperty(e))&&!(o&&o.get)&&(s=X0(n,e,s)())}return lu(s)?jU(s):s},has(r,e){return e===nA||e===Ea||e===Wy||e===Yh||e===Uc||e==="__proto__"?!0:(Xy()&&X0(rv(r,Uc),e)(),e in r)},set(){return!0},deleteProperty(){return!0},ownKeys:ZJ,getOwnPropertyDescriptor:QJ};function Ho(r,e,t,n=!1){if(!n&&r[e]===t)return;const i=r[e],s=r.length;t===void 0?(delete r[e],r[Uc]&&r[Uc][e]&&i!==void 0&&r[Uc][e].$()):(r[e]=t,r[Uc]&&r[Uc][e]&&i===void 0&&r[Uc][e].$());let o=rv(r,Yh),a;if((a=X0(o,e,i))&&a.$(()=>t),Array.isArray(r)&&r.length!==s){for(let c=r.length;c<s;c++)(a=o[c])&&a.$();(a=X0(o,"length",s))&&a.$(r.length)}(a=o[qU])&&a.$()}function KU(r,e){const t=Object.keys(e);for(let n=0;n<t.length;n+=1){const i=t[n];Ho(r,i,e[i])}}function tQ(r,e){if(typeof e=="function"&&(e=e(r)),e=wf(e),Array.isArray(e)){if(r===e)return;let t=0,n=e.length;for(;t<n;t++){const i=e[t];r[t]!==i&&Ho(r,t,i)}Ho(r,"length",n)}else KU(r,e)}function o0(r,e,t=[]){let n,i=r;if(e.length>1){n=e.shift();const o=typeof n,a=Array.isArray(r);if(Array.isArray(n)){for(let c=0;c<n.length;c++)o0(r,[n[c]].concat(e),t);return}else if(a&&o==="function"){for(let c=0;c<r.length;c++)n(r[c],c)&&o0(r,[c].concat(e),t);return}else if(a&&o==="object"){const{from:c=0,to:l=r.length-1,by:u=1}=n;for(let f=c;f<=l;f+=u)o0(r,[f].concat(e),t);return}else if(e.length>1){o0(r[n],e,[n].concat(t));return}i=r[n],t=[n].concat(t)}let s=e[0];typeof s=="function"&&(s=s(i,t),s===i)||n===void 0&&s==null||(s=wf(s),n===void 0||lu(i)&&lu(s)&&!Array.isArray(s)?KU(i,s):Ho(r,n,s))}function zf(...[r,e]){const t=wf(r||{}),n=Array.isArray(t),i=jU(t);function s(...o){ai(()=>{n&&o.length===1?tQ(t,o[0]):o0(t,o)})}return[i,s]}const iA=Symbol("store-root");function Dh(r,e,t,n,i){const s=e[t];if(r===s)return;const o=Array.isArray(r);if(t!==iA&&(!lu(r)||!lu(s)||o!==Array.isArray(s)||i&&r[i]!==s[i])){Ho(e,t,r);return}if(o){if(r.length&&s.length&&(!n||i&&r[0]&&r[0][i]!=null)){let l,u,f,h,d,g,p,m;for(f=0,h=Math.min(s.length,r.length);f<h&&(s[f]===r[f]||i&&s[f]&&r[f]&&s[f][i]===r[f][i]);f++)Dh(r[f],s,f,n,i);const y=new Array(r.length),v=new Map;for(h=s.length-1,d=r.length-1;h>=f&&d>=f&&(s[h]===r[d]||i&&s[h]&&r[d]&&s[h][i]===r[d][i]);h--,d--)y[d]=s[h];if(f>d||f>h){for(u=f;u<=d;u++)Ho(s,u,r[u]);for(;u<r.length;u++)Ho(s,u,y[u]),Dh(r[u],s,u,n,i);s.length>r.length&&Ho(s,"length",r.length);return}for(p=new Array(d+1),u=d;u>=f;u--)g=r[u],m=i&&g?g[i]:g,l=v.get(m),p[u]=l===void 0?-1:l,v.set(m,u);for(l=f;l<=h;l++)g=s[l],m=i&&g?g[i]:g,u=v.get(m),u!==void 0&&u!==-1&&(y[u]=s[l],u=p[u],v.set(m,u));for(u=f;u<r.length;u++)u in y?(Ho(s,u,y[u]),Dh(r[u],s,u,n,i)):Ho(s,u,r[u])}else for(let l=0,u=r.length;l<u;l++)Dh(r[l],s,l,n,i);s.length>r.length&&Ho(s,"length",r.length);return}const a=Object.keys(r);for(let l=0,u=a.length;l<u;l++)Dh(r[a[l]],s,a[l],n,i);const c=Object.keys(s);for(let l=0,u=c.length;l<u;l++)r[c[l]]===void 0&&Ho(s,c[l],void 0)}function HU(r,e={}){const{merge:t,key:n="id"}=e,i=wf(r);return s=>{if(!lu(s)||!lu(i))return i;const o=Dh(i,{[iA]:s},iA,t,n);return o===void 0?s:o}}var Dg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},md=typeof window>"u"||"Deno"in globalThis;function Os(){}function rQ(r,e){return typeof r=="function"?r(e):r}function sA(r){return typeof r=="number"&&r>=0&&r!==1/0}function WU(r,e){return Math.max(r+(e||0)-Date.now(),0)}function tu(r,e){return typeof r=="function"?r(e):r}function ua(r,e){return typeof r=="function"?r(e):r}function S6(r,e){const{type:t="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=r;if(o){if(n){if(e.queryHash!==$T(o,e.options))return!1}else if(!Q0(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function E6(r,e){const{exact:t,status:n,predicate:i,mutationKey:s}=r;if(s){if(!e.options.mutationKey)return!1;if(t){if(J0(e.options.mutationKey)!==J0(s))return!1}else if(!Q0(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function $T(r,e){return(e?.queryKeyHashFn||J0)(r)}function J0(r){return JSON.stringify(r,(e,t)=>aA(t)?Object.keys(t).sort().reduce((n,i)=>(n[i]=t[i],n),{}):t)}function Q0(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>Q0(r[t],e[t])):!1}function GU(r,e){if(r===e)return r;const t=A6(r)&&A6(e);if(t||aA(r)&&aA(e)){const n=t?r:Object.keys(r),i=n.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{},c=new Set(n);let l=0;for(let u=0;u<o;u++){const f=t?u:s[u];(!t&&c.has(f)||t)&&r[f]===void 0&&e[f]===void 0?(a[f]=void 0,l++):(a[f]=GU(r[f],e[f]),a[f]===r[f]&&r[f]!==void 0&&l++)}return i===o&&l===i?r:a}return e}function oA(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function A6(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function aA(r){if(!I6(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!I6(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function I6(r){return Object.prototype.toString.call(r)==="[object Object]"}function nQ(r){return new Promise(e=>{setTimeout(e,r)})}function cA(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?GU(r,e):e}function iQ(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function sQ(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var MT=Symbol();function YU(r,e){return!r.queryFn&&e?.initialPromise?()=>e.initialPromise:!r.queryFn||r.queryFn===MT?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function oQ(r,e){return typeof r=="function"?r(...e):!!r}var aQ=class extends Dg{#e;#t;#r;constructor(){super(),this.#r=r=>{if(!md&&window.addEventListener){const e=()=>r();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(r){this.#e!==r&&(this.#e=r,this.onFocus())}onFocus(){const r=this.isFocused();this.listeners.forEach(e=>{e(r)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},BT=new aQ,cQ=class extends Dg{#e=!0;#t;#r;constructor(){super(),this.#r=r=>{if(!md&&window.addEventListener){const e=()=>r(!0),t=()=>r(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(this.setOnline.bind(this))}setOnline(r){this.#e!==r&&(this.#e=r,this.listeners.forEach(t=>{t(r)}))}isOnline(){return this.#e}},nv=new cQ;function lA(){let r,e;const t=new Promise((i,s)=>{r=i,e=s});t.status="pending",t.catch(()=>{});function n(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{n({status:"fulfilled",value:i}),r(i)},t.reject=i=>{n({status:"rejected",reason:i}),e(i)},t}function lQ(r){let e;if(r.then(t=>(e=t,t),Os)?.catch(Os),e!==void 0)return{data:e}}function uQ(r){return Math.min(1e3*2**r,3e4)}function XU(r){return(r??"online")==="online"?nv.isOnline():!0}var JU=class extends Error{constructor(r){super("CancelledError"),this.revert=r?.revert,this.silent=r?.silent}};function t1(r){return r instanceof JU}function QU(r){let e=!1,t=0,n=!1,i;const s=lA(),o=p=>{n||(h(new JU(p)),r.abort?.())},a=()=>{e=!0},c=()=>{e=!1},l=()=>BT.isFocused()&&(r.networkMode==="always"||nv.isOnline())&&r.canRun(),u=()=>XU(r.networkMode)&&r.canRun(),f=p=>{n||(n=!0,r.onSuccess?.(p),i?.(),s.resolve(p))},h=p=>{n||(n=!0,r.onError?.(p),i?.(),s.reject(p))},d=()=>new Promise(p=>{i=m=>{(n||l())&&p(m)},r.onPause?.()}).then(()=>{i=void 0,n||r.onContinue?.()}),g=()=>{if(n)return;let p;const m=t===0?r.initialPromise:void 0;try{p=m??r.fn()}catch(y){p=Promise.reject(y)}Promise.resolve(p).then(f).catch(y=>{if(n)return;const v=r.retry??(md?0:3),b=r.retryDelay??uQ,_=typeof b=="function"?b(t,y):b,x=v===!0||typeof v=="number"&&t<v||typeof v=="function"&&v(t,y);if(e||!x){h(y);return}t++,r.onFail?.(t,y),nQ(_).then(()=>l()?void 0:d()).then(()=>{e?h(y):g()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?g():d().then(g),s)}}var fQ=r=>setTimeout(r,0);function hQ(){let r=[],e=0,t=a=>{a()},n=a=>{a()},i=fQ;const s=a=>{e?r.push(a):i(()=>{t(a)})},o=()=>{const a=r;r=[],a.length&&i(()=>{n(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var Qi=hQ(),ZU=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sA(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(md?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},dQ=class extends ZU{#e;#t;#r;#n;#i;#o;#a;constructor(r){super(),this.#a=!1,this.#o=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.#n=r.client,this.#r=this.#n.getQueryCache(),this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.#e=pQ(this.options),this.state=r.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(r){this.options={...this.#o,...r},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(r,e){const t=cA(this.state.data,r,this.options);return this.#s({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(r,e){this.#s({type:"setState",state:r,setStateOptions:e})}cancel(r){const e=this.#i?.promise;return this.#i?.cancel(r),e?e.then(Os).catch(Os):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(r=>ua(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===MT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>tu(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!WU(this.state.dataUpdatedAt,r)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(e=>e!==r),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(r,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(r&&this.setOptions(r),!this.options.queryFn){const c=this.observers.find(l=>l.options.queryFn);c&&this.setOptions(c.options)}const t=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#a=!0,t.signal)})},i=()=>{const c=YU(this.options,e),u=(()=>{const f={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(f),f})();return this.#a=!1,this.options.persister?this.options.persister(c,u,this):c(u)},o=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:i};return n(c),c})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta});const a=c=>{t1(c)&&c.silent||this.#s({type:"error",error:c}),t1(c)||(this.#r.config.onError?.(c,this),this.#r.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#i=QU({initialPromise:e?.initialPromise,fn:o.fetchFn,abort:t.abort.bind(t),onSuccess:c=>{if(c===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(l){a(l);return}this.#r.config.onSuccess?.(c,this),this.#r.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:a,onFail:(c,l)=>{this.#s({type:"failed",failureCount:c,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}),this.#i.start()}#s(r){const e=t=>{switch(r.type){case"failed":return{...t,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...e7(t.data,this.options),fetchMeta:r.meta??null};case"success":return this.#t=void 0,{...t,data:r.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=r.error;return t1(n)&&n.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...r.state}}};this.state=e(this.state),Qi.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:r})})}};function e7(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:XU(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function pQ(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var gQ=class extends Dg{constructor(r={}){super(),this.config=r,this.#e=new Map}#e;build(r,e,t){const n=e.queryKey,i=e.queryHash??$T(n,e);let s=this.get(i);return s||(s=new dQ({client:r,queryKey:n,queryHash:i,options:r.defaultQueryOptions(e),state:t,defaultOptions:r.getQueryDefaults(n)}),this.add(s)),s}add(r){this.#e.has(r.queryHash)||(this.#e.set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){const e=this.#e.get(r.queryHash);e&&(r.destroy(),e===r&&this.#e.delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){Qi.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return this.#e.get(r)}getAll(){return[...this.#e.values()]}find(r){const e={exact:!0,...r};return this.getAll().find(t=>S6(e,t))}findAll(r={}){const e=this.getAll();return Object.keys(r).length>0?e.filter(t=>S6(r,t)):e}notify(r){Qi.batch(()=>{this.listeners.forEach(e=>{e(r)})})}onFocus(){Qi.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){Qi.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}},mQ=class extends ZU{#e;#t;#r;constructor(r){super(),this.mutationId=r.mutationId,this.#t=r.mutationCache,this.#e=[],this.state=r.state||yQ(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){this.#e.includes(r)||(this.#e.push(r),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){this.#e=this.#e.filter(e=>e!==r),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(r){const e=()=>{this.#n({type:"continue"})};this.#r=QU({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(i,s)=>{this.#n({type:"failed",failureCount:i,error:s})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",n=!this.#r.canStart();try{if(t)e();else{this.#n({type:"pending",variables:r,isPaused:n}),await this.#t.config.onMutate?.(r,this);const s=await this.options.onMutate?.(r);s!==this.state.context&&this.#n({type:"pending",context:s,variables:r,isPaused:n})}const i=await this.#r.start();return await this.#t.config.onSuccess?.(i,r,this.state.context,this),await this.options.onSuccess?.(i,r,this.state.context),await this.#t.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,r,this.state.context),this.#n({type:"success",data:i}),i}catch(i){try{throw await this.#t.config.onError?.(i,r,this.state.context,this),await this.options.onError?.(i,r,this.state.context),await this.#t.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,r,this.state.context),i}finally{this.#n({type:"error",error:i})}}finally{this.#t.runNext(this)}}#n(r){const e=t=>{switch(r.type){case"failed":return{...t,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...t,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:r.error,failureCount:t.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Qi.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(r)}),this.#t.notify({mutation:this,type:"updated",action:r})})}};function yQ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vQ=class extends Dg{constructor(r={}){super(),this.config=r,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(r,e,t){const n=new mQ({mutationCache:this,mutationId:++this.#r,options:r.defaultMutationOptions(e),state:t});return this.add(n),n}add(r){this.#e.add(r);const e=ym(r);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(r):this.#t.set(e,[r])}this.notify({type:"added",mutation:r})}remove(r){if(this.#e.delete(r)){const e=ym(r);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const n=t.indexOf(r);n!==-1&&t.splice(n,1)}else t[0]===r&&this.#t.delete(e)}}this.notify({type:"removed",mutation:r})}canRun(r){const e=ym(r);if(typeof e=="string"){const n=this.#t.get(e)?.find(i=>i.state.status==="pending");return!n||n===r}else return!0}runNext(r){const e=ym(r);return typeof e=="string"?this.#t.get(e)?.find(n=>n!==r&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Qi.batch(()=>{this.#e.forEach(r=>{this.notify({type:"removed",mutation:r})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(r){const e={exact:!0,...r};return this.getAll().find(t=>E6(e,t))}findAll(r={}){return this.getAll().filter(e=>E6(r,e))}notify(r){Qi.batch(()=>{this.listeners.forEach(e=>{e(r)})})}resumePausedMutations(){const r=this.getAll().filter(e=>e.state.isPaused);return Qi.batch(()=>Promise.all(r.map(e=>e.continue().catch(Os))))}};function ym(r){return r.options.scope?.id}function iv(r){return{onFetch:(e,t)=>{const n=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let u=!1;const f=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},h=YU(e.options,e.fetchOptions),d=async(g,p,m)=>{if(u)return Promise.reject();if(p==null&&g.pages.length)return Promise.resolve(g);const v=(()=>{const E={client:e.client,queryKey:e.queryKey,pageParam:p,direction:m?"backward":"forward",meta:e.options.meta};return f(E),E})(),b=await h(v),{maxPages:_}=e.options,x=m?sQ:iQ;return{pages:x(g.pages,b,_),pageParams:x(g.pageParams,p,_)}};if(i&&s.length){const g=i==="backward",p=g?t7:uA,m={pages:s,pageParams:o},y=p(n,m);a=await d(m,y,g)}else{const g=r??s.length;do{const p=c===0?o[0]??n.initialPageParam:uA(n,a);if(c>0&&p==null)break;a=await d(a,p),c++}while(c<g)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=l}}}function uA(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function t7(r,{pages:e,pageParams:t}){return e.length>0?r.getPreviousPageParam?.(e[0],e,t[0],t):void 0}function bQ(r,e){return e?uA(r,e)!=null:!1}function wQ(r,e){return!e||!r.getPreviousPageParam?!1:t7(r,e)!=null}var xQ=class{#e;#t;#r;#n;#i;#o;#a;#s;constructor(e={}){this.#e=e.queryCache||new gQ,this.#t=e.mutationCache||new vQ,this.#r=e.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=BT.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=nv.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),i=n.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(tu(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const i=n.data;return[t,i]})}setQueryData(e,t,n){const i=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(i.queryHash)?.state.data,a=rQ(t,o);if(a!==void 0)return this.#e.build(this,i).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return Qi.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Qi.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return Qi.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},i=Qi.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(i).then(Os).catch(Os)}invalidateQueries(e,t={}){return Qi.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},i=Qi.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(Os)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(i).then(Os)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(tu(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Os).catch(Os)}fetchInfiniteQuery(e){return e.behavior=iv(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Os).catch(Os)}ensureInfiniteQueryData(e){return e.behavior=iv(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return nv.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(J0(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],n={};return t.forEach(i=>{Q0(e,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(e,t){this.#i.set(J0(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()],n={};return t.forEach(i=>{Q0(e,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=$T(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===MT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},r7=class extends Dg{constructor(r,e){super(),this.options=e,this.#e=r,this.#s=null,this.#a=lA(),this.options.experimental_prefetchInRender||this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#r=void 0;#n=void 0;#i;#o;#a;#s;#u;#c;#f;#p;#g;#h;#y=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),C6(this.#t,this.options)?this.#l():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return fA(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return fA(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#x(),this.#t.removeObserver(this)}setOptions(r){const e=this.options,t=this.#t;if(this.options=this.#e.defaultQueryOptions(r),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ua(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),e._defaulted&&!oA(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&T6(this.#t,t,this.options,e)&&this.#l(),this.updateResult(),n&&(this.#t!==t||ua(this.options.enabled,this.#t)!==ua(e.enabled,this.#t)||tu(this.options.staleTime,this.#t)!==tu(e.staleTime,this.#t))&&this.#v();const i=this.#d();n&&(this.#t!==t||ua(this.options.enabled,this.#t)!==ua(e.enabled,this.#t)||i!==this.#h)&&this.#_(i)}getOptimisticResult(r){const e=this.#e.getQueryCache().build(this.#e,r),t=this.createResult(e,r);return SQ(this,t)&&(this.#n=t,this.#o=this.options,this.#i=this.#t.state),t}getCurrentResult(){return this.#n}trackResult(r,e){return new Proxy(r,{get:(t,n)=>(this.trackProp(n),e?.(n),Reflect.get(t,n))})}trackProp(r){this.#y.add(r)}getCurrentQuery(){return this.#t}refetch({...r}={}){return this.fetch({...r})}fetchOptimistic(r){const e=this.#e.defaultQueryOptions(r),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(r){return this.#l({...r,cancelRefetch:r.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#l(r){this.#S();let e=this.#t.fetch(this.options,r);return r?.throwOnError||(e=e.catch(Os)),e}#v(){this.#w();const r=tu(this.options.staleTime,this.#t);if(md||this.#n.isStale||!sA(r))return;const t=WU(this.#n.dataUpdatedAt,r)+1;this.#p=setTimeout(()=>{this.#n.isStale||this.updateResult()},t)}#d(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#_(r){this.#x(),this.#h=r,!(md||ua(this.options.enabled,this.#t)===!1||!sA(this.#h)||this.#h===0)&&(this.#g=setInterval(()=>{(this.options.refetchIntervalInBackground||BT.isFocused())&&this.#l()},this.#h))}#b(){this.#v(),this.#_(this.#d())}#w(){this.#p&&(clearTimeout(this.#p),this.#p=void 0)}#x(){this.#g&&(clearInterval(this.#g),this.#g=void 0)}createResult(r,e){const t=this.#t,n=this.options,i=this.#n,s=this.#i,o=this.#o,c=r!==t?r.state:this.#r,{state:l}=r;let u={...l},f=!1,h;if(e._optimisticResults){const C=this.hasListeners(),k=!C&&C6(r,e),$=C&&T6(r,t,e,n);(k||$)&&(u={...u,...e7(l.data,r.options)}),e._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:d,errorUpdatedAt:g,status:p}=u;h=u.data;let m=!1;if(e.placeholderData!==void 0&&h===void 0&&p==="pending"){let C;i?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(C=i.data,m=!0):C=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,C!==void 0&&(p="success",h=cA(i?.data,C,e),f=!0)}if(e.select&&h!==void 0&&!m)if(i&&h===s?.data&&e.select===this.#u)h=this.#c;else try{this.#u=e.select,h=e.select(h),h=cA(i?.data,h,e),this.#c=h,this.#s=null}catch(C){this.#s=C}this.#s&&(d=this.#s,h=this.#c,g=Date.now(),p="error");const y=u.fetchStatus==="fetching",v=p==="pending",b=p==="error",_=v&&y,x=h!==void 0,S={status:p,fetchStatus:u.fetchStatus,isPending:v,isSuccess:p==="success",isError:b,isInitialLoading:_,isLoading:_,data:h,dataUpdatedAt:u.dataUpdatedAt,error:d,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:b&&!x,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:b&&x,isStale:NT(r,e),refetch:this.refetch,promise:this.#a};if(this.options.experimental_prefetchInRender){const C=J=>{S.status==="error"?J.reject(S.error):S.data!==void 0&&J.resolve(S.data)},k=()=>{const J=this.#a=S.promise=lA();C(J)},$=this.#a;switch($.status){case"pending":r.queryHash===t.queryHash&&C($);break;case"fulfilled":(S.status==="error"||S.data!==$.value)&&k();break;case"rejected":(S.status!=="error"||S.error!==$.reason)&&k();break}}return S}updateResult(){const r=this.#n,e=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#o=this.options,this.#i.data!==void 0&&(this.#f=this.#t),oA(e,r))return;this.#n=e;const t=()=>{if(!r)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!this.#y.size)return!0;const s=new Set(i??this.#y);return this.options.throwOnError&&s.add("error"),Object.keys(this.#n).some(o=>{const a=o;return this.#n[a]!==r[a]&&s.has(a)})};this.#m({listeners:t()})}#S(){const r=this.#e.getQueryCache().build(this.#e,this.options);if(r===this.#t)return;const e=this.#t;this.#t=r,this.#r=r.state,this.hasListeners()&&(e?.removeObserver(this),r.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#m(r){Qi.batch(()=>{r.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function _Q(r,e){return ua(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function C6(r,e){return _Q(r,e)||r.state.data!==void 0&&fA(r,e,e.refetchOnMount)}function fA(r,e,t){if(ua(e.enabled,r)!==!1&&tu(e.staleTime,r)!=="static"){const n=typeof t=="function"?t(r):t;return n==="always"||n!==!1&&NT(r,e)}return!1}function T6(r,e,t,n){return(r!==e||ua(n.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&NT(r,t)}function NT(r,e){return ua(e.enabled,r)!==!1&&r.isStaleByTime(tu(e.staleTime,r))}function SQ(r,e){return!oA(r.getCurrentResult(),e)}var EQ=class extends r7{constructor(r,e){super(r,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(r){super.setOptions({...r,behavior:iv()})}getOptimisticResult(r){return r.behavior=iv(),super.getOptimisticResult(r)}fetchNextPage(r){return this.fetch({...r,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(r){return this.fetch({...r,meta:{fetchMore:{direction:"backward"}}})}createResult(r,e){const{state:t}=r,n=super.createResult(r,e),{isFetching:i,isRefetching:s,isError:o,isRefetchError:a}=n,c=t.fetchMeta?.fetchMore?.direction,l=o&&c==="forward",u=i&&c==="forward",f=o&&c==="backward",h=i&&c==="backward";return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:bQ(e,t.data),hasPreviousPage:wQ(e,t.data),isFetchNextPageError:l,isFetchingNextPage:u,isFetchPreviousPageError:f,isFetchingPreviousPage:h,isRefetchError:a&&!l&&!f,isRefetching:s&&!u&&!h}}};function AQ(r){return r}function IQ(r,e,t){if(typeof e!="object"||e===null)return;const n=r.getMutationCache(),i=r.getQueryCache(),s=r.getDefaultOptions().hydrate?.deserializeData??AQ,o=e.mutations||[],a=e.queries||[];o.forEach(({state:c,...l})=>{n.build(r,{...r.getDefaultOptions().hydrate?.mutations,...t?.defaultOptions?.mutations,...l},c)}),a.forEach(({queryKey:c,state:l,queryHash:u,meta:f,promise:h,dehydratedAt:d})=>{const g=h?lQ(h):void 0,p=l.data===void 0?g?.data:l.data,m=p===void 0?p:s(p);let y=i.get(u);const v=y?.state.status==="pending",b=y?.state.fetchStatus==="fetching";if(y){const _=g&&d!==void 0&&d>y.state.dataUpdatedAt;if(l.dataUpdatedAt>y.state.dataUpdatedAt||_){const{fetchStatus:x,...E}=l;y.setState({...E,data:m})}}else y=i.build(r,{...r.getDefaultOptions().hydrate?.queries,...t?.defaultOptions?.queries,queryKey:c,queryHash:u,meta:f},{...l,data:m,fetchStatus:"idle",status:m!==void 0?"success":l.status});h&&!v&&!b&&(d===void 0||d>y.state.dataUpdatedAt)&&y.fetch(void 0,{initialPromise:Promise.resolve(h).then(s)})})}var n7=nn(void 0),CQ=r=>{if(r)return r;const e=Qr(n7);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e()},TQ=r=>(ht(e=>(e?.(),r.client.mount(),r.client.unmount.bind(r.client))),yt(()=>r.client.unmount()),D(n7.Provider,{value:()=>r.client,get children(){return r.children}})),i7=nn(()=>!1),RQ=()=>Qr(i7);i7.Provider;function kQ(r,e,t,n){if(t===!1)return e;if(typeof t=="function"){const o=t(r.data,e.data);return{...e,data:o}}let i=e.data;if(r.data===void 0)try{i=structuredClone(i)}catch{}const s=HU(i,{key:t})(r.data);return{...e,data:s}}var PQ=(r,e)=>e;function s7(r,e,t){const n=ke(()=>CQ(t?.())),i=RQ(),s=ke(()=>{const _=n().defaultQueryOptions(r());return _._optimisticResults=i()?"isRestoring":"optimistic",_.structuralSharing=!1,_}),o=s(),[a,c]=$e(new e(n(),s()));let l=a().getOptimisticResult(s());const[u,f]=zf(l),h=()=>a().subscribe(x=>{l=x,queueMicrotask(()=>{p&&v()})});function d(_){const x=a().options,E=x.reconcile;f(S=>kQ(S,_,E===void 0?!1:E,x.queryHash))}function g(){return[()=>u,_=>{const x=wf(u);if(typeof _=="function"&&(_=_(x)),_?.hydrationData){const{hydrationData:E,...S}=_;_=S}d(_)}]}let p=null,m=null;const[y,{refetch:v}]=ET(()=>{const _=a();return new Promise((x,E)=>{if(m=x,!p&&!i()&&(p=h()),_.updateResult(),l.isError&&!l.isFetching&&!i()&&oQ(_.options.throwOnError,[l.error,_.getCurrentQuery()]))return d(l),E(l.error);if(!l.isLoading)return m=null,x(PQ(_.getCurrentQuery(),l));d(l)})},{storage:g,get deferStream(){return r().deferStream},onHydrated(_,x){if(x.value&&"hydrationData"in x.value&&IQ(n(),{queries:[{...x.value.hydrationData}]}),p)return;const E={...o};(o.staleTime||!o.initialData)&&x.value&&(E.refetchOnMount=!1),a().setOptions(E),d(a().getOptimisticResult(E)),p=h()}});E0(kn(n,_=>{p&&p();const x=new e(_,s());p=h(),c(x)},{defer:!0})),E0(kn(i,_=>{_||v()},{defer:!0})),yt(()=>{p&&(p(),p=null),m&&(m(l),m=null)}),E0(kn([a,s],([_,x])=>{_.setOptions(x),d(_.getOptimisticResult(x)),v()},{defer:!0}));const b={get(_,x){return x==="data"?u.data!==void 0?y.latest?.data:y()?.data:Reflect.get(_,x)}};return new Proxy(u,b)}function qs(r,e){return s7(ke(()=>r()),r7,e)}function o7(r,e){return s7(ke(()=>r()),EQ,e)}var OQ=class extends xQ{constructor(r={}){super(r)}};const DQ="modulepreload",$Q=function(r){return"/"+r},R6={},k6=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let o=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=o(t.map(l=>{if(l=$Q(l),l in R6)return;R6[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":DQ,u||(h.as="script"),h.crossOrigin="",h.href=l,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((d,g)=>{h.addEventListener("load",d),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},MQ=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,bo=MQ,oc={POPUP:"popup",SIDE_PANEL:"sidepanel",WINDOW:"window"},xf=bo.extension.getViews({type:"popup"}).some(r=>r===window)?oc.POPUP:document.getElementById("__SIDE_PANEL_CONTEXT__DO_NOT_REMOVE__")!==null?oc.SIDE_PANEL:oc.WINDOW;class _r{static sendMessage;static async init(){xf===oc.POPUP||xf===oc.SIDE_PANEL?this.sendMessage=(await k6(async()=>{const{sendMessage:e}=await import("./popup-CibPukXQ.js");return{sendMessage:e}},__vite__mapDeps([0,1]))).sendMessage:this.sendMessage=(await k6(async()=>{const{sendMessage:e}=await import("./content-script-CRWGzKwD.js");return{sendMessage:e}},__vite__mapDeps([2,1]))).sendMessage}static getWalletState(e={}){return this.sendMessage("getWalletState",e,"background")}static import(e){return this.sendMessage("import",e,"background")}static export(e){return this.sendMessage("export",e,"background")}static lock(e={}){return this.sendMessage("lock",e,"background")}static unlock(e){return this.sendMessage("unlock",e,"background")}static connect(e){return this.sendMessage("connect",e,"background")}static disconnect(e){return this.sendMessage("disconnect",e,"background")}static signTransaction(e){return this.sendMessage("signTransaction",e,"background")}static signMessage(e){return this.sendMessage("signMessage",e,"background")}static getAccounts(e={}){return this.sendMessage("getAccounts",e,"background")}static approve(e){return this.sendMessage("approve",e,"background")}static getPendingTransaction(e){return this.sendMessage("getPendingTransaction",e,"background")}static getPendingMessage(e){return this.sendMessage("getPendingMessage",e,"background")}static updateUserSettings(e){return this.sendMessage("updateUserSettings",e,"background")}static getUserSettings(e={}){return this.sendMessage("getUserSettings",e,"background")}static getPopupCache(e){return this.sendMessage("getPopupCache",e,"background")}static setPopupCache(e){return this.sendMessage("setPopupCache",e,"background")}static getConnectedApps(e){return this.sendMessage("getConnectedApps",e,"background")}static removeConnectedApps(e){return this.sendMessage("removeConnectedApps",e,"background")}static recordMetric(e){return this.sendMessage("recordMetric",e,"background")}static trezorGetAddresses(e){return this.sendMessage("trezor:getAddresses",e,"background")}static trezorSignTransaction(e){return this.sendMessage("trezor:signTransaction",e,"background")}static resetLockAlarm(e){return this.sendMessage("resetLockAlarm",e,"background")}static updatePassword(e){return this.sendMessage("updatePassword",e,"background")}static factoryReset(e){return this.sendMessage("factoryReset",e,"background")}}const[BQ,NQ]=Lf(()=>{const r=Ff(),e=i=>{_r.recordMetric({type:"error",payload:{error:i instanceof Error?i.stack:typeof i=="string"?i:"Unknown error"}})},t=()=>{_r.recordMetric({type:"popup_opened",payload:{}})};Dr(()=>t());const n=i=>{_r.recordMetric({type:"page_view",payload:{path:i}})};return it(()=>n(r.pathname)),{recordError:e}}),LQ=()=>{const r=NQ();if(!r)throw new Error("useMetrics must be used within a MetricsProvider");return r};var FQ=ye('<div class="flex flex-col items-center justify-center h-full text-center gap-4"><div class=text-5xl></div><div class=text-lg>Something went wrong!</div><div class="font-mono bg-zinc-900 rounded w-full p-3 text-left text-red-300"></div><button class="py-2 px-6 bg-zinc-800 rounded-full cursor-pointer active:bg-zinc-800/75 transition-100 font-semibold">Refresh');const UQ=r=>{const{recordError:e}=LQ();return Dr(()=>{e(r.error),console.error(r.error)}),(()=>{var t=FQ(),n=t.firstChild,i=n.nextSibling,s=i.nextSibling,o=s.nextSibling;return ce(s,()=>typeof r.error=="object"&&r.error&&"message"in r.error&&typeof r.error.message=="string"?r.error.message:"Unknown error"),zs(o,"click",r.reset,!0),t})()};Yt(["click"]);const vt={ROOT:"/",ONBOARD:"/onboard",HOME:"/home",SETTINGS:"/settings",SETTINGS_AUTO_APPROVE:"/settings/auto-approve",SETTINGS_CONNECTED_APPS:"/settings/connected-apps",SETTINGS_AUTO_LOCK:"/settings/auto-lock",SETTINGS_CHANGE_PASSWORD:"/settings/change-password",UNLOCK:"/unlock",APPROVE_CONNECT:"/approve/connect",APPROVE_TRANSACTION:"/approve/transaction",APPROVE_MESSAGE:"/approve/message",APPROVE_SEND:"/approve/send",RECEIVE:"/receive",SEND:"/send",SWAP:"/swap",ACCOUNTS:"/accounts",ACCOUNTS_RENAME:(r=":address")=>`/accounts/${r}/rename`,ACCOUNTS_KEY:(r=":address")=>`/accounts/${r}/key`,ASSETS:(r=":address")=>`/assets/${r}`,PNL:"/pnl"},hA={equals:!1},Z0=r=>typeof r=="function"&&!r.length?r():r,dA=r=>Array.isArray(r)?r:r?[r]:[];function zQ(r,...e){return typeof r=="function"?r(...e):r}const qQ=yt;function pb(r,e,t,n){return r.addEventListener(e,t,n),qQ(r.removeEventListener.bind(r,e,t,n))}function a7(r,e,t,n){const i=()=>{dA(Z0(r)).forEach(s=>{s&&dA(Z0(e)).forEach(o=>pb(s,o,t,n))})};typeof r=="function"?it(i):ht(i)}const[jQ,YNe]=Lf(()=>{function r(){_r.resetLockAlarm({})}return Dr(()=>r()),pb(window,"click",()=>r()),{}}),r1=Symbol("fallback");function P6(r){for(const e of r)e.dispose()}function VQ(r,e,t,n={}){const i=new Map;return yt(()=>P6(i.values())),()=>{const o=r()||[];return o[Wy],br(()=>{if(!o.length)return P6(i.values()),i.clear(),n.fallback?[el(f=>(i.set(r1,{dispose:f}),n.fallback()))]:[];const a=new Array(o.length),c=i.get(r1);if(!i.size||c){c?.dispose(),i.delete(r1);for(let u=0;u<o.length;u++){const f=o[u],h=e(f,u);s(a,f,u,h)}return a}const l=new Set(i.keys());for(let u=0;u<o.length;u++){const f=o[u],h=e(f,u);l.delete(h);const d=i.get(h);d?(a[u]=d.mapped,d.setIndex?.(u),d.setItem(()=>f)):s(a,f,u,h)}for(const u of l)i.get(u)?.dispose(),i.delete(u);return a})};function s(o,a,c,l){el(u=>{const[f,h]=$e(a),d={setItem:h,dispose:u};if(t.length>1){const[g,p]=$e(c);d.setIndex=p,d.mapped=t(f,g)}else d.mapped=t(f);i.set(l,d),o[c]=d.mapped})}}function KQ(r){const{by:e}=r;return ke(VQ(()=>r.each,typeof e=="function"?e:t=>t[e],r.children,"fallback"in r?{fallback:()=>r.fallback}:void 0))}function HQ(r){return(...e)=>{for(const t of r)t&&t(...e)}}const He=r=>typeof r=="function"&&!r.length?r():r;function WQ(r,...e){return typeof r=="function"?r(...e):r}const GQ=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function O6(r){const e={};let t;for(;t=GQ.exec(r);)e[t[1]]=t[2];return e}function gc(r,e){if(typeof r=="string"){if(typeof e=="string")return`${r};${e}`;r=O6(r)}else typeof e=="string"&&(e=O6(e));return{...r,...e}}function dn(...r){return HQ(r)}function YQ(r,e,t=-1){return t in r?[...r.slice(0,t),e,...r.slice(t)]:[...r,e]}function pA(r,e){const t=[...r],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function XQ(r){return typeof r=="number"}function $h(r){return Object.prototype.toString.call(r)==="[object String]"}function gb(r){return typeof r=="function"}function To(r){return e=>`${r()}-${e}`}function is(r,e){return r?r===e||r.contains(e):!1}function a0(r,e=!1){const{activeElement:t}=Eo(r);if(!t?.nodeName)return null;if(l7(t)&&t.contentDocument)return a0(t.contentDocument.body,e);if(e){const n=t.getAttribute("aria-activedescendant");if(n){const i=Eo(t).getElementById(n);if(i)return i}}return t}function c7(r){return Eo(r).defaultView||window}function Eo(r){return r?r.ownerDocument||r:document}function l7(r){return r.tagName==="IFRAME"}var LT=(r=>(r.Escape="Escape",r.Enter="Enter",r.Tab="Tab",r.Space=" ",r.ArrowDown="ArrowDown",r.ArrowLeft="ArrowLeft",r.ArrowRight="ArrowRight",r.ArrowUp="ArrowUp",r.End="End",r.Home="Home",r.PageDown="PageDown",r.PageUp="PageUp",r))(LT||{});function u7(r){return typeof window>"u"||window.navigator==null?!1:window.navigator.userAgentData?.brands.some(e=>r.test(e.brand))||r.test(window.navigator.userAgent)}function FT(r){return typeof window<"u"&&window.navigator!=null?r.test(window.navigator.userAgentData?.platform||window.navigator.platform):!1}function $g(){return FT(/^Mac/i)}function JQ(){return FT(/^iPhone/i)}function QQ(){return FT(/^iPad/i)||$g()&&navigator.maxTouchPoints>1}function ZQ(){return JQ()||QQ()}function eZ(){return $g()||ZQ()}function tZ(){return u7(/AppleWebKit/i)&&!rZ()}function rZ(){return u7(/Chrome/i)}function fr(r,e){return e&&(gb(e)?e(r):e[0](e[1],r)),r?.defaultPrevented}function on(r){return e=>{for(const t of r)fr(e,t)}}function nZ(r){return $g()?r.metaKey&&!r.ctrlKey:r.ctrlKey&&!r.metaKey}function Kn(r){if(r)if(iZ())r.focus({preventScroll:!0});else{const e=sZ(r);r.focus(),oZ(e)}}var vm=null;function iZ(){if(vm==null){vm=!1;try{document.createElement("div").focus({get preventScroll(){return vm=!0,!0}})}catch{}}return vm}function sZ(r){let e=r.parentNode;const t=[],n=document.scrollingElement||document.documentElement;for(;e instanceof HTMLElement&&e!==n;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&t.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return n instanceof HTMLElement&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),t}function oZ(r){for(const{element:e,scrollTop:t,scrollLeft:n}of r)e.scrollTop=t,e.scrollLeft=n}var f7=["input:not([type='hidden']):not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","[tabindex]","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]:not([contenteditable='false'])"],aZ=[...f7,'[tabindex]:not([tabindex="-1"]):not([disabled])'],UT=`${f7.join(":not([hidden]),")},[tabindex]:not([disabled]):not([hidden])`,cZ=aZ.join(':not([hidden]):not([tabindex="-1"]),');function h7(r,e){const n=Array.from(r.querySelectorAll(UT)).filter(D6);return e&&D6(r)&&n.unshift(r),n.forEach((i,s)=>{if(l7(i)&&i.contentDocument){const o=i.contentDocument.body,a=h7(o,!1);n.splice(s,1,...a)}}),n}function D6(r){return d7(r)&&!lZ(r)}function d7(r){return r.matches(UT)&&zT(r)}function lZ(r){return Number.parseInt(r.getAttribute("tabindex")||"0",10)<0}function zT(r,e){return r.nodeName!=="#comment"&&uZ(r)&&fZ(r,e)&&(!r.parentElement||zT(r.parentElement,r))}function uZ(r){if(!(r instanceof HTMLElement)&&!(r instanceof SVGElement))return!1;const{display:e,visibility:t}=r.style;let n=e!=="none"&&t!=="hidden"&&t!=="collapse";if(n){if(!r.ownerDocument.defaultView)return n;const{getComputedStyle:i}=r.ownerDocument.defaultView,{display:s,visibility:o}=i(r);n=s!=="none"&&o!=="hidden"&&o!=="collapse"}return n}function fZ(r,e){return!r.hasAttribute("hidden")&&(r.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?r.hasAttribute("open"):!0)}function hZ(r,e,t){const n=e?.tabbable?cZ:UT,i=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode(s){return e?.from?.contains(s)?NodeFilter.FILTER_REJECT:s.matches(n)&&zT(s)&&(!e?.accept||e.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e?.from&&(i.currentNode=e.from),i}function $6(r){let e=r;for(;e&&!dZ(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}function dZ(r){const e=window.getComputedStyle(r);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function pZ(){}function p7(r,e=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY){return Math.min(Math.max(r,e),t)}function gZ(r){return[r.clientX,r.clientY]}function g7(r,e){const[t,n]=r;let i=!1;const s=e.length;for(let o=s,a=0,c=o-1;a<o;c=a++){const[l,u]=e[a],[f,h]=e[c],[,d]=e[c===0?o-1:c-1]||[0,0],g=(u-h)*(t-l)-(l-f)*(n-u);if(h<u){if(n>=h&&n<u){if(g===0)return!0;g>0&&(n===h?n>d&&(i=!i):i=!i)}}else if(u<h){if(n>u&&n<=h){if(g===0)return!0;g<0&&(n===h?n<d&&(i=!i):i=!i)}}else if(n===u&&(t>=f&&t<=l||t>=l&&t<=f))return!0}return i}function Ht(r,e){return st(r,e)}var gp=new Map,M6=new Set;function B6(){if(typeof window>"u")return;const r=t=>{if(!t.target)return;let n=gp.get(t.target);n||(n=new Set,gp.set(t.target,n),t.target.addEventListener("transitioncancel",e)),n.add(t.propertyName)},e=t=>{if(!t.target)return;const n=gp.get(t.target);if(n&&(n.delete(t.propertyName),n.size===0&&(t.target.removeEventListener("transitioncancel",e),gp.delete(t.target)),gp.size===0)){for(const i of M6)i();M6.clear()}};document.body.addEventListener("transitionrun",r),document.body.addEventListener("transitionend",e)}typeof document<"u"&&(document.readyState!=="loading"?B6():document.addEventListener("DOMContentLoaded",B6));function gA(r,e){const t=N6(r,e,"left"),n=N6(r,e,"top"),i=e.offsetWidth,s=e.offsetHeight;let o=r.scrollLeft,a=r.scrollTop;const c=o+r.offsetWidth,l=a+r.offsetHeight;t<=o?o=t:t+i>c&&(o+=t+i-c),n<=a?a=n:n+s>l&&(a+=n+s-l),r.scrollLeft=o,r.scrollTop=a}function N6(r,e,t){const n=t==="left"?"offsetLeft":"offsetTop";let i=0;for(;e.offsetParent&&(i+=e[n],e.offsetParent!==r);){if(e.offsetParent.contains(r)){i-=r[n];break}e=e.offsetParent}return i}function mZ(r,e){if(document.contains(r)){const t=document.scrollingElement||document.documentElement;if(window.getComputedStyle(t).overflow==="hidden"){let i=$6(r);for(;r&&i&&r!==t&&i!==t;)gA(i,r),r=i,i=$6(r)}else{const{left:i,top:s}=r.getBoundingClientRect();r?.scrollIntoView?.({block:"nearest"});const{left:o,top:a}=r.getBoundingClientRect();(Math.abs(i-o)>1||Math.abs(s-a)>1)&&r.scrollIntoView?.({block:"nearest"})}}}var qT={border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:"0",position:"absolute",width:"1px","white-space":"nowrap"},sv="data-kb-top-layer",m7,mA=!1,ol=[];function eg(r){return ol.findIndex(e=>e.node===r)}function yZ(r){return ol[eg(r)]}function vZ(r){return ol[ol.length-1].node===r}function y7(){return ol.filter(r=>r.isPointerBlocking)}function bZ(){return[...y7()].slice(-1)[0]}function jT(){return y7().length>0}function v7(r){const e=eg(bZ()?.node);return eg(r)<e}function wZ(r){ol.push(r)}function xZ(r){const e=eg(r);e<0||ol.splice(e,1)}function _Z(){for(const{node:r}of ol)r.style.pointerEvents=v7(r)?"none":"auto"}function SZ(r){if(jT()&&!mA){const e=Eo(r);m7=document.body.style.pointerEvents,e.body.style.pointerEvents="none",mA=!0}}function EZ(r){if(jT())return;const e=Eo(r);e.body.style.pointerEvents=m7,e.body.style.length===0&&e.body.removeAttribute("style"),mA=!1}var Js={layers:ol,isTopMostLayer:vZ,hasPointerBlockingLayer:jT,isBelowPointerBlockingLayer:v7,addLayer:wZ,removeLayer:xZ,indexOf:eg,find:yZ,assignPointerEventToLayers:_Z,disableBodyPointerEvents:SZ,restoreBodyPointerEvents:EZ},n1="focusScope.autoFocusOnMount",i1="focusScope.autoFocusOnUnmount",L6={bubbles:!1,cancelable:!0},F6={stack:[],active(){return this.stack[0]},add(r){r!==this.active()&&this.active()?.pause(),this.stack=pA(this.stack,r),this.stack.unshift(r)},remove(r){this.stack=pA(this.stack,r),this.active()?.resume()}};function VT(r,e){const[t,n]=$e(!1),i={pause(){n(!0)},resume(){n(!1)}};let s=null;const o=g=>r.onMountAutoFocus?.(g),a=g=>r.onUnmountAutoFocus?.(g),c=()=>Eo(e()),l=()=>{const g=c().createElement("span");return g.setAttribute("data-focus-trap",""),g.tabIndex=0,Object.assign(g.style,qT),g},u=()=>{const g=e();return g?h7(g,!0).filter(p=>!p.hasAttribute("data-focus-trap")):[]},f=()=>{const g=u();return g.length>0?g[0]:null},h=()=>{const g=u();return g.length>0?g[g.length-1]:null},d=()=>{const g=e();if(!g)return!1;const p=a0(g);return!p||is(g,p)?!1:d7(p)};it(()=>{const g=e();if(!g)return;F6.add(i);const p=a0(g);if(!is(g,p)){const y=new CustomEvent(n1,L6);g.addEventListener(n1,o),g.dispatchEvent(y),y.defaultPrevented||setTimeout(()=>{Kn(f()),a0(g)===p&&Kn(g)},0)}yt(()=>{g.removeEventListener(n1,o),setTimeout(()=>{const y=new CustomEvent(i1,L6);d()&&y.preventDefault(),g.addEventListener(i1,a),g.dispatchEvent(y),y.defaultPrevented||Kn(p??c().body),g.removeEventListener(i1,a),F6.remove(i)},0)})}),it(()=>{const g=e();if(!g||!He(r.trapFocus)||t())return;const p=y=>{const v=y.target;v?.closest(`[${sv}]`)||(is(g,v)?s=v:Kn(s))},m=y=>{const b=y.relatedTarget??a0(g);b?.closest(`[${sv}]`)||is(g,b)||Kn(s)};c().addEventListener("focusin",p),c().addEventListener("focusout",m),yt(()=>{c().removeEventListener("focusin",p),c().removeEventListener("focusout",m)})}),it(()=>{const g=e();if(!g||!He(r.trapFocus)||t())return;const p=l();g.insertAdjacentElement("afterbegin",p);const m=l();g.insertAdjacentElement("beforeend",m);function y(b){const _=f(),x=h();b.relatedTarget===_?Kn(x):Kn(_)}p.addEventListener("focusin",y),m.addEventListener("focusin",y);const v=new MutationObserver(b=>{for(const _ of b)_.previousSibling===m&&(m.remove(),g.insertAdjacentElement("beforeend",m)),_.nextSibling===p&&(p.remove(),g.insertAdjacentElement("afterbegin",p))});v.observe(g,{childList:!0,subtree:!1}),yt(()=>{p.removeEventListener("focusin",y),m.removeEventListener("focusin",y),p.remove(),m.remove(),v.disconnect()})})}var AZ="data-live-announcer";function KT(r){it(()=>{He(r.isDisabled)||yt(IZ(He(r.targets),He(r.root)))})}var mp=new WeakMap,Mo=[];function IZ(r,e=document.body){const t=new Set(r),n=new Set,i=c=>{for(const h of c.querySelectorAll(`[${AZ}], [${sv}]`))t.add(h);const l=h=>{if(t.has(h)||h.parentElement&&n.has(h.parentElement)&&h.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(const d of t)if(h.contains(d))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},u=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,{acceptNode:l}),f=l(c);if(f===NodeFilter.FILTER_ACCEPT&&s(c),f!==NodeFilter.FILTER_REJECT){let h=u.nextNode();for(;h!=null;)s(h),h=u.nextNode()}},s=c=>{const l=mp.get(c)??0;c.getAttribute("aria-hidden")==="true"&&l===0||(l===0&&c.setAttribute("aria-hidden","true"),n.add(c),mp.set(c,l+1))};Mo.length&&Mo[Mo.length-1].disconnect(),i(e);const o=new MutationObserver(c=>{for(const l of c)if(!(l.type!=="childList"||l.addedNodes.length===0)&&![...t,...n].some(u=>u.contains(l.target))){for(const u of l.removedNodes)u instanceof Element&&(t.delete(u),n.delete(u));for(const u of l.addedNodes)(u instanceof HTMLElement||u instanceof SVGElement)&&(u.dataset.liveAnnouncer==="true"||u.dataset.reactAriaTopLayer==="true")?t.add(u):u instanceof Element&&i(u)}});o.observe(e,{childList:!0,subtree:!0});const a={observe(){o.observe(e,{childList:!0,subtree:!0})},disconnect(){o.disconnect()}};return Mo.push(a),()=>{o.disconnect();for(const c of n){const l=mp.get(c);if(l==null)return;l===1?(c.removeAttribute("aria-hidden"),mp.delete(c)):mp.set(c,l-1)}a===Mo[Mo.length-1]?(Mo.pop(),Mo.length&&Mo[Mo.length-1].observe()):Mo.splice(Mo.indexOf(a),1)}}var U6="interactOutside.pointerDownOutside",z6="interactOutside.focusOutside";function CZ(r,e){let t,n=pZ;const i=()=>Eo(e()),s=f=>r.onPointerDownOutside?.(f),o=f=>r.onFocusOutside?.(f),a=f=>r.onInteractOutside?.(f),c=f=>{const h=f.target;return!(h instanceof HTMLElement)||h.closest(`[${sv}]`)||!is(i(),h)||is(e(),h)?!1:!r.shouldExcludeElement?.(h)},l=f=>{function h(){const d=e(),g=f.target;if(!d||!g||!c(f))return;const p=on([s,a]);g.addEventListener(U6,p,{once:!0});const m=new CustomEvent(U6,{bubbles:!1,cancelable:!0,detail:{originalEvent:f,isContextMenu:f.button===2||nZ(f)&&f.button===0}});g.dispatchEvent(m)}f.pointerType==="touch"?(i().removeEventListener("click",h),n=h,i().addEventListener("click",h,{once:!0})):h()},u=f=>{const h=e(),d=f.target;if(!h||!d||!c(f))return;const g=on([o,a]);d.addEventListener(z6,g,{once:!0});const p=new CustomEvent(z6,{bubbles:!1,cancelable:!0,detail:{originalEvent:f,isContextMenu:!1}});d.dispatchEvent(p)};it(()=>{He(r.isDisabled)||(t=window.setTimeout(()=>{i().addEventListener("pointerdown",l,!0)},0),i().addEventListener("focusin",u,!0),yt(()=>{window.clearTimeout(t),i().removeEventListener("click",n),i().removeEventListener("pointerdown",l,!0),i().removeEventListener("focusin",u,!0)}))})}function TZ(r){const e=t=>{t.key===LT.Escape&&r.onEscapeKeyDown?.(t)};it(()=>{if(He(r.isDisabled))return;const t=r.ownerDocument?.()??Eo();t.addEventListener("keydown",e),yt(()=>{t.removeEventListener("keydown",e)})})}function Sr(r){const[e,t]=Mt(r,["as"]);if(!e.as)throw new Error("[kobalte]: Polymorphic is missing the required `as` prop.");return D(JX,st(t,{get component(){return e.as}}))}var b7=nn();function RZ(){return Qr(b7)}function mb(r){let e;const t=RZ(),[n,i]=Mt(r,["ref","disableOutsidePointerEvents","excludedElements","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","bypassTopMostLayerCheck"]),s=new Set([]),o=f=>{s.add(f);const h=t?.registerNestedLayer(f);return()=>{s.delete(f),h?.()}};CZ({shouldExcludeElement:f=>e?n.excludedElements?.some(h=>is(h(),f))||[...s].some(h=>is(h,f)):!1,onPointerDownOutside:f=>{!e||Js.isBelowPointerBlockingLayer(e)||!n.bypassTopMostLayerCheck&&!Js.isTopMostLayer(e)||(n.onPointerDownOutside?.(f),n.onInteractOutside?.(f),f.defaultPrevented||n.onDismiss?.())},onFocusOutside:f=>{n.onFocusOutside?.(f),n.onInteractOutside?.(f),f.defaultPrevented||n.onDismiss?.()}},()=>e),TZ({ownerDocument:()=>Eo(e),onEscapeKeyDown:f=>{!e||!Js.isTopMostLayer(e)||(n.onEscapeKeyDown?.(f),!f.defaultPrevented&&n.onDismiss&&(f.preventDefault(),n.onDismiss()))}}),Dr(()=>{if(!e)return;Js.addLayer({node:e,isPointerBlocking:n.disableOutsidePointerEvents,dismiss:n.onDismiss});const f=t?.registerNestedLayer(e);Js.assignPointerEventToLayers(),Js.disableBodyPointerEvents(e),yt(()=>{e&&(Js.removeLayer(e),f?.(),Js.assignPointerEventToLayers(),Js.restoreBodyPointerEvents(e))})}),it(kn([()=>e,()=>n.disableOutsidePointerEvents],([f,h])=>{if(!f)return;const d=Js.find(f);d&&d.isPointerBlocking!==h&&(d.isPointerBlocking=h,Js.assignPointerEventToLayers()),h&&Js.disableBodyPointerEvents(f),yt(()=>{Js.restoreBodyPointerEvents(f)})},{defer:!0}));const u={registerNestedLayer:o};return D(b7.Provider,{value:u,get children(){return D(Sr,st({as:"div",ref(f){var h=dn(d=>e=d,n.ref);typeof h=="function"&&h(f)}},i))}})}function yb(r){const[e,t]=$e(r.defaultValue?.()),n=ke(()=>r.value?.()!==void 0),i=ke(()=>n()?r.value?.():e());return[i,o=>{br(()=>{const a=WQ(o,i());return Object.is(a,i())||(n()||t(a),r.onChange?.(a)),a})}]}function w7(r){const[e,t]=yb(r);return[()=>e()??!1,t]}function kZ(r){const[e,t]=yb(r);return[()=>e()??[],t]}function jd(r={}){const[e,t]=w7({value:()=>He(r.open),defaultValue:()=>!!He(r.defaultOpen),onChange:o=>r.onOpenChange?.(o)}),n=()=>{t(!0)},i=()=>{t(!1)};return{isOpen:e,setIsOpen:t,open:n,close:i,toggle:()=>{e()?i():n()}}}function vb(r,e){const[t,n]=$e(q6(e?.()));return it(()=>{n(r()?.tagName.toLowerCase()||q6(e?.()))}),t}function q6(r){return $h(r)?r:void 0}var PZ=Object.defineProperty,mc=(r,e)=>{for(var t in e)PZ(r,t,{get:e[t],enumerable:!0})},OZ={};mc(OZ,{Button:()=>MZ,Root:()=>qf});var DZ=["button","color","file","image","reset","submit"];function $Z(r){const e=r.tagName.toLowerCase();return e==="button"?!0:e==="input"&&r.type?DZ.indexOf(r.type)!==-1:!1}function qf(r){let e;const t=Ht({type:"button"},r),[n,i]=Mt(t,["ref","type","disabled"]),s=vb(()=>e,()=>"button"),o=ke(()=>{const l=s();return l==null?!1:$Z({tagName:l,type:n.type})}),a=ke(()=>s()==="input"),c=ke(()=>s()==="a"&&e?.getAttribute("href")!=null);return D(Sr,st({as:"button",ref(l){var u=dn(f=>e=f,n.ref);typeof u=="function"&&u(l)},get type(){return o()||a()?n.type:void 0},get role(){return!o()&&!c()?"button":void 0},get tabIndex(){return!o()&&!c()&&!n.disabled?0:void 0},get disabled(){return o()||a()?n.disabled:void 0},get"aria-disabled"(){return!o()&&!a()&&n.disabled?!0:void 0},get"data-disabled"(){return n.disabled?"":void 0}},i))}var MZ=qf;function Gn(r){return e=>(r(e),()=>r(void 0))}var Ji=r=>typeof r=="function"?r():r,yA=(r,e)=>{if(r.contains(e))return!0;let t=e;for(;t;){if(t===r)return!0;t=t._$host??t.parentElement}return!1},bm=new Map,BZ=r=>{it(()=>{const e=Ji(r.style)??{},t=Ji(r.properties)??[],n={};for(const s in e)n[s]=r.element.style[s];const i=bm.get(r.key);i?i.activeCount++:bm.set(r.key,{activeCount:1,originalStyles:n,properties:t.map(s=>s.key)}),Object.assign(r.element.style,r.style);for(const s of t)r.element.style.setProperty(s.key,s.value);yt(()=>{const s=bm.get(r.key);if(s){if(s.activeCount!==1){s.activeCount--;return}bm.delete(r.key);for(const[o,a]of Object.entries(s.originalStyles))r.element.style[o]=a;for(const o of s.properties)r.element.style.removeProperty(o);r.element.style.length===0&&r.element.removeAttribute("style"),r.cleanup?.()}})})},j6=BZ,NZ=(r,e)=>{switch(e){case"x":return[r.clientWidth,r.scrollLeft,r.scrollWidth];case"y":return[r.clientHeight,r.scrollTop,r.scrollHeight]}},LZ=(r,e)=>{const t=getComputedStyle(r),n=e==="x"?t.overflowX:t.overflowY;return n==="auto"||n==="scroll"||r.tagName==="HTML"&&n==="visible"},FZ=(r,e,t)=>{const n=e==="x"&&window.getComputedStyle(r).direction==="rtl"?-1:1;let i=r,s=0,o=0,a=!1;do{const[c,l,u]=NZ(i,e),f=u-c-n*l;(l!==0||f!==0)&&LZ(i,e)&&(s+=f,o+=l),i===(t??document.documentElement)?a=!0:i=i._$host??i.parentElement}while(i&&!a);return[s,o]},[V6,K6]=$e([]),UZ=r=>V6().indexOf(r)===V6().length-1,zZ=r=>{const e=st({element:null,enabled:!0,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",restoreScrollPosition:!0,allowPinchZoom:!1},r),t=mi();let n=[0,0],i=null,s=null;it(()=>{Ji(e.enabled)&&(K6(l=>[...l,t]),yt(()=>{K6(l=>l.filter(u=>u!==t))}))}),it(()=>{if(!Ji(e.enabled)||!Ji(e.hideScrollbar))return;const{body:l}=document,u=window.innerWidth-l.offsetWidth;if(Ji(e.preventScrollbarShift)){const f={overflow:"hidden"},h=[];u>0&&(Ji(e.preventScrollbarShiftMode)==="padding"?f.paddingRight=`calc(${window.getComputedStyle(l).paddingRight} + ${u}px)`:f.marginRight=`calc(${window.getComputedStyle(l).marginRight} + ${u}px)`,h.push({key:"--scrollbar-width",value:`${u}px`}));const d=window.scrollY,g=window.scrollX;j6({key:"prevent-scroll",element:l,style:f,properties:h,cleanup:()=>{Ji(e.restoreScrollPosition)&&u>0&&window.scrollTo(g,d)}})}else j6({key:"prevent-scroll",element:l,style:{overflow:"hidden"}})}),it(()=>{!UZ(t)||!Ji(e.enabled)||(document.addEventListener("wheel",a,{passive:!1}),document.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("touchmove",c,{passive:!1}),yt(()=>{document.removeEventListener("wheel",a),document.removeEventListener("touchstart",o),document.removeEventListener("touchmove",c)}))});const o=l=>{n=H6(l),i=null,s=null},a=l=>{const u=l.target,f=Ji(e.element),h=qZ(l),d=Math.abs(h[0])>Math.abs(h[1])?"x":"y",g=d==="x"?h[0]:h[1],p=W6(u,d,g,f);let m;f&&yA(f,u)?m=!p:m=!0,m&&l.cancelable&&l.preventDefault()},c=l=>{const u=Ji(e.element),f=l.target;let h;if(l.touches.length===2)h=!Ji(e.allowPinchZoom);else{if(i==null||s===null){const d=H6(l).map((p,m)=>n[m]-p),g=Math.abs(d[0])>Math.abs(d[1])?"x":"y";i=g,s=g==="x"?d[0]:d[1]}if(f.type==="range")h=!1;else{const d=W6(f,i,s,u);u&&yA(u,f)?h=!d:h=!0}}h&&l.cancelable&&l.preventDefault()}},qZ=r=>[r.deltaX,r.deltaY],H6=r=>r.changedTouches[0]?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0],W6=(r,e,t,n)=>{const i=n!==null&&yA(n,r),[s,o]=FZ(r,e,i?n:void 0);return!(t>0&&Math.abs(s)<=1||t<0&&Math.abs(o)<1)},jZ=zZ,HT=jZ,VZ=r=>{const e=ke(()=>{const o=Ji(r.element);if(o)return getComputedStyle(o)}),t=()=>e()?.animationName??"none",[n,i]=$e(Ji(r.show)?"present":"hidden");let s="none";return it(o=>{const a=Ji(r.show);return br(()=>{if(o===a)return a;const c=s,l=t();a?i("present"):l==="none"||e()?.display==="none"?i("hidden"):i(o===!0&&c!==l?"hiding":"hidden")}),a}),it(()=>{const o=Ji(r.element);if(!o)return;const a=l=>{l.target===o&&(s=t())},c=l=>{const f=t().includes(l.animationName);l.target===o&&f&&n()==="hiding"&&i("hidden")};o.addEventListener("animationstart",a),o.addEventListener("animationcancel",c),o.addEventListener("animationend",c),yt(()=>{o.removeEventListener("animationstart",a),o.removeEventListener("animationcancel",c),o.removeEventListener("animationend",c)})}),{present:()=>n()==="present"||n()==="hiding",state:n,setState:i}},KZ=VZ,yd=KZ,HZ={};mc(HZ,{CloseButton:()=>_7,Content:()=>S7,Description:()=>E7,Dialog:()=>Hn,Overlay:()=>A7,Portal:()=>I7,Root:()=>C7,Title:()=>T7,Trigger:()=>R7,useDialogContext:()=>Eu});var x7=nn();function Eu(){const r=Qr(x7);if(r===void 0)throw new Error("[kobalte]: `useDialogContext` must be used within a `Dialog` component");return r}function _7(r){const e=Eu(),[t,n]=Mt(r,["aria-label","onClick"]);return D(qf,st({get"aria-label"(){return t["aria-label"]||e.translations().dismiss},onClick:s=>{fr(s,t.onClick),e.close()}},n))}function S7(r){let e;const t=Eu(),n=Ht({id:t.generateId("content")},r),[i,s]=Mt(n,["ref","onOpenAutoFocus","onCloseAutoFocus","onPointerDownOutside","onFocusOutside","onInteractOutside"]);let o=!1,a=!1;const c=h=>{i.onPointerDownOutside?.(h),t.modal()&&h.detail.isContextMenu&&h.preventDefault()},l=h=>{i.onFocusOutside?.(h),t.modal()&&h.preventDefault()},u=h=>{i.onInteractOutside?.(h),!t.modal()&&(h.defaultPrevented||(o=!0,h.detail.originalEvent.type==="pointerdown"&&(a=!0)),is(t.triggerRef(),h.target)&&h.preventDefault(),h.detail.originalEvent.type==="focusin"&&a&&h.preventDefault())},f=h=>{i.onCloseAutoFocus?.(h),t.modal()?(h.preventDefault(),Kn(t.triggerRef())):(h.defaultPrevented||(o||Kn(t.triggerRef()),h.preventDefault()),o=!1,a=!1)};return KT({isDisabled:()=>!(t.isOpen()&&t.modal()),targets:()=>e?[e]:[]}),HT({element:()=>e??null,enabled:()=>t.contentPresent()&&t.preventScroll()}),VT({trapFocus:()=>t.isOpen()&&t.modal(),onMountAutoFocus:i.onOpenAutoFocus,onUnmountAutoFocus:f},()=>e),it(()=>yt(t.registerContentId(s.id))),D(We,{get when(){return t.contentPresent()},get children(){return D(mb,st({ref(h){var d=dn(g=>{t.setContentRef(g),e=g},i.ref);typeof d=="function"&&d(h)},role:"dialog",tabIndex:-1,get disableOutsidePointerEvents(){return Or(()=>!!t.modal())()&&t.isOpen()},get excludedElements(){return[t.triggerRef]},get"aria-labelledby"(){return t.titleId()},get"aria-describedby"(){return t.descriptionId()},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,get onDismiss(){return t.close}},s))}})}function E7(r){const e=Eu(),t=Ht({id:e.generateId("description")},r),[n,i]=Mt(t,["id"]);return it(()=>yt(e.registerDescriptionId(n.id))),D(Sr,st({as:"p",get id(){return n.id}},i))}function A7(r){const e=Eu(),[t,n]=Mt(r,["ref","style","onPointerDown"]),i=s=>{fr(s,t.onPointerDown),s.target===s.currentTarget&&s.preventDefault()};return D(We,{get when(){return e.overlayPresent()},get children(){return D(Sr,st({as:"div",ref(s){var o=dn(e.setOverlayRef,t.ref);typeof o=="function"&&o(s)},get style(){return gc({"pointer-events":"auto"},t.style)},get"data-expanded"(){return e.isOpen()?"":void 0},get"data-closed"(){return e.isOpen()?void 0:""},onPointerDown:i},n))}})}function I7(r){const e=Eu();return D(We,{get when(){return e.contentPresent()||e.overlayPresent()},get children(){return D(hb,r)}})}var G6={dismiss:"Dismiss"};function C7(r){const e=`dialog-${mi()}`,t=Ht({id:e,modal:!0,translations:G6},r),[n,i]=$e(),[s,o]=$e(),[a,c]=$e(),[l,u]=$e(),[f,h]=$e(),[d,g]=$e(),p=jd({open:()=>t.open,defaultOpen:()=>t.defaultOpen,onOpenChange:_=>t.onOpenChange?.(_)}),m=()=>t.forceMount||p.isOpen(),{present:y}=yd({show:m,element:()=>l()??null}),{present:v}=yd({show:m,element:()=>f()??null}),b={translations:()=>t.translations??G6,isOpen:p.isOpen,modal:()=>t.modal??!0,preventScroll:()=>t.preventScroll??b.modal(),contentId:n,titleId:s,descriptionId:a,triggerRef:d,overlayRef:l,setOverlayRef:u,contentRef:f,setContentRef:h,overlayPresent:y,contentPresent:v,close:p.close,toggle:p.toggle,setTriggerRef:g,generateId:To(()=>t.id),registerContentId:Gn(i),registerTitleId:Gn(o),registerDescriptionId:Gn(c)};return D(x7.Provider,{value:b,get children(){return t.children}})}function T7(r){const e=Eu(),t=Ht({id:e.generateId("title")},r),[n,i]=Mt(t,["id"]);return it(()=>yt(e.registerTitleId(n.id))),D(Sr,st({as:"h2",get id(){return n.id}},i))}function R7(r){const e=Eu(),[t,n]=Mt(r,["ref","onClick"]);return D(qf,st({ref(s){var o=dn(e.setTriggerRef,t.ref);typeof o=="function"&&o(s)},"aria-haspopup":"dialog",get"aria-expanded"(){return e.isOpen()},get"aria-controls"(){return Or(()=>!!e.isOpen())()?e.contentId():void 0},get"data-expanded"(){return e.isOpen()?"":void 0},get"data-closed"(){return e.isOpen()?void 0:""},onClick:s=>{fr(s,t.onClick),e.toggle()}},n))}var Hn=Object.assign(C7,{CloseButton:_7,Content:S7,Description:E7,Overlay:A7,Portal:I7,Title:T7,Trigger:R7});function k7(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=k7(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function WZ(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=k7(r))&&(n&&(n+=" "),n+=e);return n}const WT="-",GZ=r=>{const e=XZ(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:o=>{const a=o.split(WT);return a[0]===""&&a.length!==1&&a.shift(),P7(a,e)||YZ(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&n[o]?[...c,...n[o]]:c}}},P7=(r,e)=>{if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),i=n?P7(r.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=r.join(WT);return e.validators.find(({validator:o})=>o(s))?.classGroupId},Y6=/^\[(.+)\]$/,YZ=r=>{if(Y6.test(r)){const e=Y6.exec(r)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},XZ=r=>{const{theme:e,classGroups:t}=r,n={nextPart:new Map,validators:[]};for(const i in t)vA(t[i],n,i,e);return n},vA=(r,e,t,n)=>{r.forEach(i=>{if(typeof i=="string"){const s=i===""?e:X6(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(JZ(i)){vA(i(n),e,t,n);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{vA(o,X6(e,s),t,n)})})},X6=(r,e)=>{let t=r;return e.split(WT).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},JZ=r=>r.isThemeGetter,QZ=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const i=(s,o)=>{t.set(s,o),e++,e>r&&(e=0,n=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},bA="!",wA=":",ZZ=wA.length,eee=r=>{const{prefix:e,experimentalParseClassName:t}=r;let n=i=>{const s=[];let o=0,a=0,c=0,l;for(let g=0;g<i.length;g++){let p=i[g];if(o===0&&a===0){if(p===wA){s.push(i.slice(c,g)),c=g+ZZ;continue}if(p==="/"){l=g;continue}}p==="["?o++:p==="]"?o--:p==="("?a++:p===")"&&a--}const u=s.length===0?i:i.substring(c),f=tee(u),h=f!==u,d=l&&l>c?l-c:void 0;return{modifiers:s,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:d}};if(e){const i=e+wA,s=n;n=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const i=n;n=s=>t({className:s,parseClassName:i})}return n},tee=r=>r.endsWith(bA)?r.substring(0,r.length-1):r.startsWith(bA)?r.substring(1):r,ree=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const i=[];let s=[];return n.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},nee=r=>({cache:QZ(r.cacheSize),parseClassName:eee(r),sortModifiers:ree(r),...GZ(r)}),iee=/\s+/,see=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=r.trim().split(iee);let c="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{isExternal:f,modifiers:h,hasImportantModifier:d,baseClassName:g,maybePostfixModifierPosition:p}=t(u);if(f){c=u+(c.length>0?" "+c:c);continue}let m=!!p,y=n(m?g.substring(0,p):g);if(!y){if(!m){c=u+(c.length>0?" "+c:c);continue}if(y=n(g),!y){c=u+(c.length>0?" "+c:c);continue}m=!1}const v=s(h).join(":"),b=d?v+bA:v,_=b+y;if(o.includes(_))continue;o.push(_);const x=i(y,m);for(let E=0;E<x.length;++E){const S=x[E];o.push(b+S)}c=u+(c.length>0?" "+c:c)}return c};function oee(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=O7(e))&&(n&&(n+=" "),n+=t);return n}const O7=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=O7(r[n]))&&(t&&(t+=" "),t+=e);return t};function aee(r,...e){let t,n,i,s=o;function o(c){const l=e.reduce((u,f)=>f(u),r());return t=nee(l),n=t.cache.get,i=t.cache.set,s=a,a(c)}function a(c){const l=n(c);if(l)return l;const u=see(c,t);return i(c,u),u}return function(){return s(oee.apply(null,arguments))}}const si=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},D7=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,$7=/^\((?:(\w[\w-]*):)?(.+)\)$/i,cee=/^\d+\/\d+$/,lee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fee=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,hee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dee=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oh=r=>cee.test(r),Tr=r=>!!r&&!Number.isNaN(Number(r)),Il=r=>!!r&&Number.isInteger(Number(r)),s1=r=>r.endsWith("%")&&Tr(r.slice(0,-1)),Tc=r=>lee.test(r),pee=()=>!0,gee=r=>uee.test(r)&&!fee.test(r),M7=()=>!1,mee=r=>hee.test(r),yee=r=>dee.test(r),vee=r=>!Pt(r)&&!Ot(r),bee=r=>Vd(r,L7,M7),Pt=r=>D7.test(r),Ru=r=>Vd(r,F7,gee),o1=r=>Vd(r,Eee,Tr),J6=r=>Vd(r,B7,M7),wee=r=>Vd(r,N7,yee),wm=r=>Vd(r,U7,mee),Ot=r=>$7.test(r),yp=r=>Kd(r,F7),xee=r=>Kd(r,Aee),Q6=r=>Kd(r,B7),_ee=r=>Kd(r,L7),See=r=>Kd(r,N7),xm=r=>Kd(r,U7,!0),Vd=(r,e,t)=>{const n=D7.exec(r);return n?n[1]?e(n[1]):t(n[2]):!1},Kd=(r,e,t=!1)=>{const n=$7.exec(r);return n?n[1]?e(n[1]):t:!1},B7=r=>r==="position"||r==="percentage",N7=r=>r==="image"||r==="url",L7=r=>r==="length"||r==="size"||r==="bg-size",F7=r=>r==="length",Eee=r=>r==="number",Aee=r=>r==="family-name",U7=r=>r==="shadow",Iee=()=>{const r=si("color"),e=si("font"),t=si("text"),n=si("font-weight"),i=si("tracking"),s=si("leading"),o=si("breakpoint"),a=si("container"),c=si("spacing"),l=si("radius"),u=si("shadow"),f=si("inset-shadow"),h=si("text-shadow"),d=si("drop-shadow"),g=si("blur"),p=si("perspective"),m=si("aspect"),y=si("ease"),v=si("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],x=()=>[..._(),Ot,Pt],E=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],C=()=>[Ot,Pt,c],k=()=>[oh,"full","auto",...C()],$=()=>[Il,"none","subgrid",Ot,Pt],J=()=>["auto",{span:["full",Il,Ot,Pt]},Il,Ot,Pt],j=()=>[Il,"auto",Ot,Pt],L=()=>["auto","min","max","fr",Ot,Pt],w=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],R=()=>["start","end","center","stretch","center-safe","end-safe"],N=()=>["auto",...C()],Y=()=>[oh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],z=()=>[r,Ot,Pt],G=()=>[..._(),Q6,J6,{position:[Ot,Pt]}],te=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",_ee,bee,{size:[Ot,Pt]}],T=()=>[s1,yp,Ru],A=()=>["","none","full",l,Ot,Pt],O=()=>["",Tr,yp,Ru],I=()=>["solid","dashed","dotted","double"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>[Tr,s1,Q6,J6],oe=()=>["","none",g,Ot,Pt],he=()=>["none",Tr,Ot,Pt],re=()=>["none",Tr,Ot,Pt],F=()=>[Tr,Ot,Pt],H=()=>[oh,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Tc],breakpoint:[Tc],color:[pee],container:[Tc],"drop-shadow":[Tc],ease:["in","out","in-out"],font:[vee],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Tc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Tc],shadow:[Tc],spacing:["px",Tr],text:[Tc],"text-shadow":[Tc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",oh,Pt,Ot,m]}],container:["container"],columns:[{columns:[Tr,Pt,Ot,a]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:x()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[Il,"auto",Ot,Pt]}],basis:[{basis:[oh,"full","auto",a,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Tr,oh,"auto","initial","none",Pt]}],grow:[{grow:["",Tr,Ot,Pt]}],shrink:[{shrink:["",Tr,Ot,Pt]}],order:[{order:[Il,"first","last","none",Ot,Pt]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:J()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:J()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...w(),"normal"]}],"justify-items":[{"justify-items":[...R(),"normal"]}],"justify-self":[{"justify-self":["auto",...R()]}],"align-content":[{content:["normal",...w()]}],"align-items":[{items:[...R(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...R(),{baseline:["","last"]}]}],"place-content":[{"place-content":w()}],"place-items":[{"place-items":[...R(),"baseline"]}],"place-self":[{"place-self":["auto",...R()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:N()}],mx:[{mx:N()}],my:[{my:N()}],ms:[{ms:N()}],me:[{me:N()}],mt:[{mt:N()}],mr:[{mr:N()}],mb:[{mb:N()}],ml:[{ml:N()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:Y()}],w:[{w:[a,"screen",...Y()]}],"min-w":[{"min-w":[a,"screen","none",...Y()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...Y()]}],h:[{h:["screen","lh",...Y()]}],"min-h":[{"min-h":["screen","lh","none",...Y()]}],"max-h":[{"max-h":["screen","lh",...Y()]}],"font-size":[{text:["base",t,yp,Ru]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Ot,o1]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",s1,Pt]}],"font-family":[{font:[xee,Pt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ot,Pt]}],"line-clamp":[{"line-clamp":[Tr,"none",Ot,o1]}],leading:[{leading:[s,...C()]}],"list-image":[{"list-image":["none",Ot,Pt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ot,Pt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:[Tr,"from-font","auto",Ot,Ru]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[Tr,"auto",Ot,Pt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ot,Pt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ot,Pt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:G()}],"bg-repeat":[{bg:te()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Il,Ot,Pt],radial:["",Ot,Pt],conic:[Il,Ot,Pt]},See,wee]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:T()}],"gradient-via-pos":[{via:T()}],"gradient-to-pos":[{to:T()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:A()}],"rounded-s":[{"rounded-s":A()}],"rounded-e":[{"rounded-e":A()}],"rounded-t":[{"rounded-t":A()}],"rounded-r":[{"rounded-r":A()}],"rounded-b":[{"rounded-b":A()}],"rounded-l":[{"rounded-l":A()}],"rounded-ss":[{"rounded-ss":A()}],"rounded-se":[{"rounded-se":A()}],"rounded-ee":[{"rounded-ee":A()}],"rounded-es":[{"rounded-es":A()}],"rounded-tl":[{"rounded-tl":A()}],"rounded-tr":[{"rounded-tr":A()}],"rounded-br":[{"rounded-br":A()}],"rounded-bl":[{"rounded-bl":A()}],"border-w":[{border:O()}],"border-w-x":[{"border-x":O()}],"border-w-y":[{"border-y":O()}],"border-w-s":[{"border-s":O()}],"border-w-e":[{"border-e":O()}],"border-w-t":[{"border-t":O()}],"border-w-r":[{"border-r":O()}],"border-w-b":[{"border-b":O()}],"border-w-l":[{"border-l":O()}],"divide-x":[{"divide-x":O()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":O()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...I(),"hidden","none"]}],"divide-style":[{divide:[...I(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...I(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Tr,Ot,Pt]}],"outline-w":[{outline:["",Tr,yp,Ru]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",u,xm,wm]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",f,xm,wm]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[Tr,Ru]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":O()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",h,xm,wm]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[Tr,Ot,Pt]}],"mix-blend":[{"mix-blend":[...U(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":U()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Tr]}],"mask-image-linear-from-pos":[{"mask-linear-from":Z()}],"mask-image-linear-to-pos":[{"mask-linear-to":Z()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":Z()}],"mask-image-t-to-pos":[{"mask-t-to":Z()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":Z()}],"mask-image-r-to-pos":[{"mask-r-to":Z()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":Z()}],"mask-image-b-to-pos":[{"mask-b-to":Z()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":Z()}],"mask-image-l-to-pos":[{"mask-l-to":Z()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":Z()}],"mask-image-x-to-pos":[{"mask-x-to":Z()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":Z()}],"mask-image-y-to-pos":[{"mask-y-to":Z()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[Ot,Pt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Z()}],"mask-image-radial-to-pos":[{"mask-radial-to":Z()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[Tr]}],"mask-image-conic-from-pos":[{"mask-conic-from":Z()}],"mask-image-conic-to-pos":[{"mask-conic-to":Z()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:G()}],"mask-repeat":[{mask:te()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ot,Pt]}],filter:[{filter:["","none",Ot,Pt]}],blur:[{blur:oe()}],brightness:[{brightness:[Tr,Ot,Pt]}],contrast:[{contrast:[Tr,Ot,Pt]}],"drop-shadow":[{"drop-shadow":["","none",d,xm,wm]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",Tr,Ot,Pt]}],"hue-rotate":[{"hue-rotate":[Tr,Ot,Pt]}],invert:[{invert:["",Tr,Ot,Pt]}],saturate:[{saturate:[Tr,Ot,Pt]}],sepia:[{sepia:["",Tr,Ot,Pt]}],"backdrop-filter":[{"backdrop-filter":["","none",Ot,Pt]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[Tr,Ot,Pt]}],"backdrop-contrast":[{"backdrop-contrast":[Tr,Ot,Pt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Tr,Ot,Pt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Tr,Ot,Pt]}],"backdrop-invert":[{"backdrop-invert":["",Tr,Ot,Pt]}],"backdrop-opacity":[{"backdrop-opacity":[Tr,Ot,Pt]}],"backdrop-saturate":[{"backdrop-saturate":[Tr,Ot,Pt]}],"backdrop-sepia":[{"backdrop-sepia":["",Tr,Ot,Pt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ot,Pt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Tr,"initial",Ot,Pt]}],ease:[{ease:["linear","initial",y,Ot,Pt]}],delay:[{delay:[Tr,Ot,Pt]}],animate:[{animate:["none",v,Ot,Pt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,Ot,Pt]}],"perspective-origin":[{"perspective-origin":x()}],rotate:[{rotate:he()}],"rotate-x":[{"rotate-x":he()}],"rotate-y":[{"rotate-y":he()}],"rotate-z":[{"rotate-z":he()}],scale:[{scale:re()}],"scale-x":[{"scale-x":re()}],"scale-y":[{"scale-y":re()}],"scale-z":[{"scale-z":re()}],"scale-3d":["scale-3d"],skew:[{skew:F()}],"skew-x":[{"skew-x":F()}],"skew-y":[{"skew-y":F()}],transform:[{transform:[Ot,Pt,"","none","gpu","cpu"]}],"transform-origin":[{origin:x()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:H()}],"translate-x":[{"translate-x":H()}],"translate-y":[{"translate-y":H()}],"translate-z":[{"translate-z":H()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ot,Pt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ot,Pt]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[Tr,yp,Ru,o1]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Cee=aee(Iee),Xr=(...r)=>Cee(WZ(r));var Tee=ye('<div><div class="i-tabler:chevron-up size-6 text-zinc-400">'),Ree=ye('<div><div class="i-tabler:chevron-down size-6 text-zinc-400">'),kee=ye("<div class=relative><div>");const Hd=r=>{const[e,t]=$e(!1),[n,i]=$e(!1);let s;function o(){t(s.scrollTop>5),i(s.scrollTop<s.scrollHeight-s.clientHeight-5)}return Dr(()=>{const a=new ResizeObserver(()=>o());a.observe(s),yt(()=>a.disconnect())}),(()=>{var a=kee(),c=a.firstChild;return ce(a,D(We,{get when(){return e()},get children(){var l=Tee();return ht(()=>ui(l,Xr("z-1 absolute top-0 left-0 w-full h-12 bg-linear-to-t from-zinc-900/0 to-zinc-900 pointer-events-none flex justify-center items-start",r.gradientClass))),l}}),c),c.addEventListener("scroll",()=>o()),qd(l=>s=l,c),ce(c,()=>r.children),ce(a,D(We,{get when(){return n()},get children(){var l=Ree();return ht(()=>ui(l,Xr("z-1 absolute bottom-0 left-0 w-full h-12 bg-linear-to-b from-zinc-900/0 to-zinc-900 pointer-events-none flex justify-center items-end",r.gradientClass))),l}}),null),ht(()=>ui(c,Xr("overflow-y-scroll",r.class))),a})()};var Z6=ye('<button class="py-2 px-4 text-center cursor-pointer bg-zinc-800 active:bg-zinc-800/75 font-semibold rounded-md text-zinc-300 transition-100">'),Pee=ye('<button class="py-2 px-4 text-center cursor-pointer font-semibold rounded-md transition-100">'),Oee=ye('<div class="i-tabler:x size-5">'),Dee=ye('<div class="flex items-center justify-between border-b border-zinc-700 p-4">'),$ee=ye("<div>"),Mee=ye('<div class="fixed inset-0 flex items-center justify-center z-101">'),Bee=ye('<div class="flex items-center justify-end gap-2">');const z7=nn(),Nee=r=>{const[e,t]=$e(null);function n(s){if("onConfirm"in s){t({...s,actions:s.actions??[(()=>{var o=Z6();return o.$$click=()=>i(!1),ce(o,D(We,{get when(){return s.cancelText},fallback:"Cancel",get children(){return s.cancelText}})),o})(),(()=>{var o=Pee();return o.$$click=()=>{s.onConfirm(),i(!1)},ce(o,D(We,{get when(){return s.confirmText},fallback:"Confirm",get children(){return s.confirmText}})),ht(a=>Gr(o,{"bg-primary-200 active:bg-primary-200/80 text-zinc-950":!s.confirmStyle||s.confirmStyle==="primary","bg-red-500 active:bg-red-700":s.confirmStyle==="danger"},a)),o})()]});return}if("okText"in s){t({...s,actions:s.actions??[(()=>{var o=Z6();return o.$$click=()=>i(!1),ce(o,()=>s.okText),o})()]});return}t({...s,actions:s.actions})}function i(s){s||(e()?.onClose?.(),t(null))}return D(z7.Provider,{value:{open:n,confirm:n,alert:s=>n({...s,okText:"OK"})},get children(){return[Or(()=>r.children),D(Hn,{get open(){return!!e()},onOpenChange:i,get children(){return D(Hn.Portal,{get children(){return[D(Hn.Overlay,{class:"fixed inset-0 backdrop-blur z-100"}),(()=>{var s=Mee();return ce(s,D(Hn.Content,{class:"bg-zinc-900 rounded-md max-w-95vw w-md ring-1 ring-zinc-700",get children(){return[(()=>{var o=Dee();return ce(o,D(Hn.Title,{class:"font-semibold",get children(){return e()?.title}}),null),ce(o,D(Hn.CloseButton,{class:"cursor-pointer bg-zinc-900 hover:bg-zinc-800 p-2 rounded-md -m-2 transition-100 text-zinc-500 hover:text-zinc-200",get children(){return Oee()}}),null),o})(),D(Hd,{class:"max-h-70vh",gradientClass:"rounded-md",get children(){return D(Hn.Description,{class:"p-4 space-y-4",get children(){return[(()=>{var o=$ee();return ce(o,()=>e()?.content),o})(),D(We,{get when(){return e()?.actions},children:o=>(()=>{var a=Bee();return ce(a,D(Lt,{get each(){return o()},children:c=>c})),a})()})]}})}})]}})),s})()]}})}})]}})},Ws=()=>{const r=Qr(z7);if(!r)throw new Error("useModal must be used within a ModalProvider");return r};Yt(["click"]);const eP={uiMode:"popup",selectedAccountIdx:0,showBalances:!0,jupiterAutoApprove:!0,jupiterAutoApproveNotifications:!0,lockDelayMinutes:-1},[Lee,Fee]=Lf(()=>{const[r,e]=zf(eP);async function t(i){const s=await _r.getUserSettings();for(const o in eP)if(o in s){if(o==="selectedAccountIdx"&&i)continue;e(o,s[o])}}pb(window,"focus",()=>t(!0));async function n(i){await _r.updateUserSettings(i),await t()}return{settings:r,updateUserSettings:n,refresh:t}}),Pa=()=>{const r=Fee();if(!r)throw new Error("useSettings must be used within a SettingsProvider");return r},tl=(r,e,t)=>{const n=t(r,e);return yt(()=>clearInterval(n))},Uee=(r,e,t)=>{if(typeof e=="number"){tl(r,e,t);return}let n=!1,i=performance.now(),s=0,o=!1;const a=()=>{br(r),i=performance.now(),n=t===setTimeout};it(c=>{if(n)return;const l=e();if(l===!1)return c&&(s+=(performance.now()-i)/c),l;if(c===!1&&(i=performance.now()),o){if(c&&(s+=(performance.now()-i)/c),i=performance.now(),s>=1)s=0,a();else if(s>0){const[u,f]=$e(void 0,{equals:!1});return u(),tl(()=>{s=0,o=!1,f(),a()},(1-s)*l,setTimeout),l}}return o=!0,tl(a,l,t),l})},_m={CLEAN:"CLEAN",LOCKED:"LOCKED",UNLOCKED:"UNLOCKED"},a1=vt.HOME,[zee,qee]=Lf(()=>{const r=Ff(),e=Co(),{settings:t,updateUserSettings:n,refresh:i}=Pa(),[s,o]=$e(!1),[a,c]=$e([]),l=ke(()=>a().at(t.selectedAccountIdx));let u=null;async function f(){const[{accounts:m},{state:y}]=await Promise.all([_r.getAccounts(),_r.getWalletState()]);ai(()=>{c(m),y===_m.LOCKED&&e(vt.UNLOCK)})}pb(window,"focus",()=>f()),tl(()=>f(),6e4,setInterval);async function h(m){await _r.unlock(m),await Promise.all([i(),f()]),e(u||a1,{replace:!0}),u=null}async function d(){await _r.lock(),await f(),e(vt.UNLOCK)}async function g(m){await _r.import(m),await f()}async function p(m){await n({type:"setAccountsOrder",addresses:m}),await f()}return Dr(async()=>{const{state:m}=await _r.getWalletState();switch(m){case _m.CLEAN:r.pathname!==vt.ONBOARD&&(await bo.tabs.create({url:"popup.html#"+vt.ONBOARD}),window.close());break;case _m.LOCKED:r.pathname!==vt.UNLOCK&&(u=r.pathname===vt.ROOT?a1:r.pathname+r.search,e(vt.UNLOCK));break;case _m.UNLOCKED:await Promise.all([i(),f()]),!r.pathname.startsWith("/approve/")&&!r.pathname.startsWith("/assets/")&&!r.pathname.startsWith(vt.SETTINGS)&&r.pathname!==vt.SEND&&r.pathname!==vt.SWAP&&r.pathname!==vt.RECEIVE&&r.pathname!==vt.ONBOARD&&r.pathname!==vt.PNL&&e(a1,{replace:!0});break}requestAnimationFrame(()=>{o(!0)})}),{isReady:s,refresh:f,importWallet:g,unlock:h,lock:d,accounts:a,updateAccountsOrder:p,selectedAccount:l}}),Jr=()=>{const r=qee();if(!r)throw new Error("useWallet must be used within a WalletProvider");return r};var jee=ye('<div class="fixed inset-0 w-full h-full bg-zinc-950 z-100">');const q7=r=>D(We,{get when(){return r.isVisible},get children(){return jee()}});function j7(r={}){const[e,t]=w7({value:()=>He(r.isSelected),defaultValue:()=>!!He(r.defaultIsSelected),onChange:s=>r.onSelectedChange?.(s)});return{isSelected:e,setIsSelected:s=>{!He(r.isReadOnly)&&!He(r.isDisabled)&&t(s)},toggle:()=>{!He(r.isReadOnly)&&!He(r.isDisabled)&&t(!e())}}}function V7(r){let e=r.startIndex??0;const t=r.startLevel??0,n=[],i=c=>{if(c==null)return"";const l=r.getKey??"key",u=$h(l)?c[l]:l(c);return u!=null?String(u):""},s=c=>{if(c==null)return"";const l=r.getTextValue??"textValue",u=$h(l)?c[l]:l(c);return u!=null?String(u):""},o=c=>{if(c==null)return!1;const l=r.getDisabled??"disabled";return($h(l)?c[l]:l(c))??!1},a=c=>{if(c!=null)return $h(r.getSectionChildren)?c[r.getSectionChildren]:r.getSectionChildren?.(c)};for(const c of r.dataSource){if($h(c)||XQ(c)){n.push({type:"item",rawValue:c,key:String(c),textValue:String(c),disabled:o(c),level:t,index:e}),e++;continue}if(a(c)!=null){n.push({type:"section",rawValue:c,key:"",textValue:"",disabled:!1,level:t,index:e}),e++;const l=a(c)??[];if(l.length>0){const u=V7({dataSource:l,getKey:r.getKey,getTextValue:r.getTextValue,getDisabled:r.getDisabled,getSectionChildren:r.getSectionChildren,startIndex:e,startLevel:t+1});n.push(...u),e+=u.length}}else n.push({type:"item",rawValue:c,key:i(c),textValue:s(c),disabled:o(c),level:t,index:e}),e++}return n}function Vee(r,e=[]){return ke(()=>{const t=V7({dataSource:He(r.dataSource),getKey:He(r.getKey),getTextValue:He(r.getTextValue),getDisabled:He(r.getDisabled),getSectionChildren:He(r.getSectionChildren)});for(let n=0;n<e.length;n++)e[n]();return r.factory(t)})}let c1=new Map,xA=!1;try{xA=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let ov=!1;try{ov=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const K7={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class Kee{format(e){let t="";if(!xA&&this.options.signDisplay!=null?t=Wee(this.numberFormatter,this.options.signDisplay,e):t=this.numberFormatter.format(e),this.options.style==="unit"&&!ov){var n;let{unit:i,unitDisplay:s="short",locale:o}=this.resolvedOptions();if(!i)return t;let a=(n=K7[i])===null||n===void 0?void 0:n[s];t+=a[o]||a.default}return t}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,t){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,t);if(t<e)throw new RangeError("End date must be >= start date");return`${this.format(e)}  ${this.format(t)}`}formatRangeToParts(e,t){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,t);if(t<e)throw new RangeError("End date must be >= start date");let n=this.numberFormatter.formatToParts(e),i=this.numberFormatter.formatToParts(t);return[...n.map(s=>({...s,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...i.map(s=>({...s,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!xA&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!ov&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,t={}){this.numberFormatter=Hee(e,t),this.options=t}}function Hee(r,e={}){let{numberingSystem:t}=e;if(t&&r.includes("-nu-")&&(r.includes("-u-")||(r+="-u-"),r+=`-nu-${t}`),e.style==="unit"&&!ov){var n;let{unit:o,unitDisplay:a="short"}=e;if(!o)throw new Error('unit option must be provided with style: "unit"');if(!(!((n=K7[o])===null||n===void 0)&&n[a]))throw new Error(`Unsupported unit ${o} with unitDisplay = ${a}`);e={...e,style:"decimal"}}let i=r+(e?Object.entries(e).sort((o,a)=>o[0]<a[0]?-1:1).join():"");if(c1.has(i))return c1.get(i);let s=new Intl.NumberFormat(r,e);return c1.set(i,s),s}function Wee(r,e,t){if(e==="auto")return r.format(t);if(e==="never")return r.format(Math.abs(t));{let n=!1;if(e==="always"?n=t>0||Object.is(t,0):e==="exceptZero"&&(Object.is(t,-0)||Object.is(t,0)?t=Math.abs(t):n=t>0),n){let i=r.format(-t),s=r.format(t),o=i.replace(s,"").replace(/\u200e|\u061C/,"");return[...o].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(s,"!!!").replace(o,"+").replace("!!!",s)}else return r.format(t)}}var Gee=new Set(["Avst","Arab","Armi","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),Yee=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function Xee(r){if(Intl.Locale){const t=new Intl.Locale(r).maximize().script??"";return Gee.has(t)}const e=r.split("-")[0];return Yee.has(e)}function Jee(r){return Xee(r)?"rtl":"ltr"}function H7(){let r=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([r])}catch{r="en-US"}return{locale:r,direction:Jee(r)}}var _A=H7(),c0=new Set;function tP(){_A=H7();for(const r of c0)r(_A)}function Qee(){const[r,e]=$e(_A),t=ke(()=>r());return Dr(()=>{c0.size===0&&window.addEventListener("languagechange",tP),c0.add(e),yt(()=>{c0.delete(e),c0.size===0&&window.removeEventListener("languagechange",tP)})}),{locale:()=>t().locale,direction:()=>t().direction}}var Zee=nn();function pl(){const r=Qee();return Qr(Zee)||r}var l1=new Map;function W7(r){const{locale:e}=pl(),t=ke(()=>e()+(r?Object.entries(r).sort((n,i)=>n[0]<i[0]?-1:1).join():""));return ke(()=>{const n=t();let i;return l1.has(n)&&(i=l1.get(n)),i||(i=new Intl.Collator(e(),r),l1.set(n,i)),i})}function G7(r){const{locale:e}=pl();return ke(()=>new Kee(e(),He(r)))}var tc=class Y7 extends Set{anchorKey;currentKey;constructor(e,t,n){super(e),e instanceof Y7?(this.anchorKey=t||e.anchorKey,this.currentKey=n||e.currentKey):(this.anchorKey=t,this.currentKey=n)}};function ete(r){const[e,t]=yb(r);return[()=>e()??new tc,t]}function X7(r){return eZ()?r.altKey:r.ctrlKey}function Mh(r){return $g()?r.metaKey:r.ctrlKey}function rP(r){return new tc(r)}function J7(r,e){if(r.size!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;return!0}function tte(r){const e=Ht({selectionMode:"none",selectionBehavior:"toggle"},r),[t,n]=$e(!1),[i,s]=$e(),o=ke(()=>{const p=He(e.selectedKeys);return p!=null?rP(p):p}),a=ke(()=>{const p=He(e.defaultSelectedKeys);return p!=null?rP(p):new tc}),[c,l]=ete({value:o,defaultValue:a,onChange:p=>e.onSelectionChange?.(p)}),[u,f]=$e(He(e.selectionBehavior)),h=()=>He(e.selectionMode),d=()=>He(e.disallowEmptySelection)??!1,g=p=>{(He(e.allowDuplicateSelectionEvents)||!J7(p,c()))&&l(p)};return it(()=>{const p=c();He(e.selectionBehavior)==="replace"&&u()==="toggle"&&typeof p=="object"&&p.size===0&&f("replace")}),it(()=>{f(He(e.selectionBehavior)??"toggle")}),{selectionMode:h,disallowEmptySelection:d,selectionBehavior:u,setSelectionBehavior:f,isFocused:t,setFocused:n,focusedKey:i,setFocusedKey:s,selectedKeys:c,setSelectedKeys:g}}function Q7(r){const[e,t]=$e(""),[n,i]=$e(-1);return{typeSelectHandlers:{onKeyDown:o=>{if(He(r.isDisabled))return;const a=He(r.keyboardDelegate),c=He(r.selectionManager);if(!a.getKeyForSearch)return;const l=rte(o.key);if(!l||o.ctrlKey||o.metaKey)return;l===" "&&e().trim().length>0&&(o.preventDefault(),o.stopPropagation());let u=t(h=>h+l),f=a.getKeyForSearch(u,c.focusedKey())??a.getKeyForSearch(u);f==null&&nte(u)&&(u=u[0],f=a.getKeyForSearch(u,c.focusedKey())??a.getKeyForSearch(u)),f!=null&&(c.setFocusedKey(f),r.onTypeSelect?.(f)),clearTimeout(n()),i(window.setTimeout(()=>t(""),500))}}}}function rte(r){return r.length===1||!/^[A-Z]/i.test(r)?r:""}function nte(r){return r.split("").every(e=>e===r[0])}function ite(r,e,t){const i=st({selectOnFocus:()=>He(r.selectionManager).selectionBehavior()==="replace"},r),s=()=>t?.()??e(),{direction:o}=pl();let a={top:0,left:0};a7(()=>He(i.isVirtualized)?void 0:s(),"scroll",()=>{const m=s();m&&(a={top:m.scrollTop,left:m.scrollLeft})});const{typeSelectHandlers:c}=Q7({isDisabled:()=>He(i.disallowTypeAhead),keyboardDelegate:()=>He(i.keyboardDelegate),selectionManager:()=>He(i.selectionManager)}),l=()=>He(i.orientation)??"vertical",u=m=>{fr(m,c.onKeyDown),m.altKey&&m.key==="Tab"&&m.preventDefault();const y=e();if(!y?.contains(m.target))return;const v=He(i.selectionManager),b=He(i.selectOnFocus),_=C=>{C!=null&&(v.setFocusedKey(C),m.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(C):b&&!X7(m)&&v.replaceSelection(C))},x=He(i.keyboardDelegate),E=He(i.shouldFocusWrap),S=v.focusedKey();switch(m.key){case(l()==="vertical"?"ArrowDown":"ArrowRight"):{if(x.getKeyBelow){m.preventDefault();let C;S!=null?C=x.getKeyBelow(S):C=x.getFirstKey?.(),C==null&&E&&(C=x.getFirstKey?.(S)),_(C)}break}case(l()==="vertical"?"ArrowUp":"ArrowLeft"):{if(x.getKeyAbove){m.preventDefault();let C;S!=null?C=x.getKeyAbove(S):C=x.getLastKey?.(),C==null&&E&&(C=x.getLastKey?.(S)),_(C)}break}case(l()==="vertical"?"ArrowLeft":"ArrowUp"):{if(x.getKeyLeftOf){m.preventDefault();const C=o()==="rtl";let k;S!=null?k=x.getKeyLeftOf(S):k=C?x.getFirstKey?.():x.getLastKey?.(),_(k)}break}case(l()==="vertical"?"ArrowRight":"ArrowDown"):{if(x.getKeyRightOf){m.preventDefault();const C=o()==="rtl";let k;S!=null?k=x.getKeyRightOf(S):k=C?x.getLastKey?.():x.getFirstKey?.(),_(k)}break}case"Home":if(x.getFirstKey){m.preventDefault();const C=x.getFirstKey(S,Mh(m));C!=null&&(v.setFocusedKey(C),Mh(m)&&m.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(C):b&&v.replaceSelection(C))}break;case"End":if(x.getLastKey){m.preventDefault();const C=x.getLastKey(S,Mh(m));C!=null&&(v.setFocusedKey(C),Mh(m)&&m.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(C):b&&v.replaceSelection(C))}break;case"PageDown":if(x.getKeyPageBelow&&S!=null){m.preventDefault();const C=x.getKeyPageBelow(S);_(C)}break;case"PageUp":if(x.getKeyPageAbove&&S!=null){m.preventDefault();const C=x.getKeyPageAbove(S);_(C)}break;case"a":Mh(m)&&v.selectionMode()==="multiple"&&He(i.disallowSelectAll)!==!0&&(m.preventDefault(),v.selectAll());break;case"Escape":m.defaultPrevented||(m.preventDefault(),He(i.disallowEmptySelection)||v.clearSelection());break;case"Tab":if(!He(i.allowsTabNavigation)){if(m.shiftKey)y.focus();else{const C=hZ(y,{tabbable:!0});let k,$;do $=C.lastChild(),$&&(k=$);while($);k&&!k.contains(document.activeElement)&&Kn(k)}break}}},f=m=>{const y=He(i.selectionManager),v=He(i.keyboardDelegate),b=He(i.selectOnFocus);if(y.isFocused()){m.currentTarget.contains(m.target)||y.setFocused(!1);return}if(m.currentTarget.contains(m.target)){if(y.setFocused(!0),y.focusedKey()==null){const _=E=>{E!=null&&(y.setFocusedKey(E),b&&y.replaceSelection(E))},x=m.relatedTarget;x&&m.currentTarget.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_FOLLOWING?_(y.lastSelectedKey()??v.getLastKey?.()):_(y.firstSelectedKey()??v.getFirstKey?.())}else if(!He(i.isVirtualized)){const _=s();if(_){_.scrollTop=a.top,_.scrollLeft=a.left;const x=_.querySelector(`[data-key="${y.focusedKey()}"]`);x&&(Kn(x),gA(_,x))}}}},h=m=>{const y=He(i.selectionManager);m.currentTarget.contains(m.relatedTarget)||y.setFocused(!1)},d=m=>{s()===m.target&&m.preventDefault()},g=()=>{const m=He(i.autoFocus);if(!m)return;const y=He(i.selectionManager),v=He(i.keyboardDelegate);let b;m==="first"&&(b=v.getFirstKey?.()),m==="last"&&(b=v.getLastKey?.());const _=y.selectedKeys();_.size&&(b=_.values().next().value),y.setFocused(!0),y.setFocusedKey(b);const x=e();x&&b==null&&!He(i.shouldUseVirtualFocus)&&Kn(x)};return Dr(()=>{i.deferAutoFocus?setTimeout(g,0):g()}),it(kn([s,()=>He(i.isVirtualized),()=>He(i.selectionManager).focusedKey()],m=>{const[y,v,b]=m;if(v)b&&i.scrollToKey?.(b);else if(b&&y){const _=y.querySelector(`[data-key="${b}"]`);_&&gA(y,_)}})),{tabIndex:ke(()=>{if(!He(i.shouldUseVirtualFocus))return He(i.selectionManager).focusedKey()==null?0:-1}),onKeyDown:u,onMouseDown:d,onFocusIn:f,onFocusOut:h}}function GT(r,e){const t=()=>He(r.selectionManager),n=()=>He(r.key),i=()=>He(r.shouldUseVirtualFocus),s=v=>{t().selectionMode()!=="none"&&(t().selectionMode()==="single"?t().isSelected(n())&&!t().disallowEmptySelection()?t().toggleSelection(n()):t().replaceSelection(n()):v?.shiftKey?t().extendSelection(n()):t().selectionBehavior()==="toggle"||Mh(v)||"pointerType"in v&&v.pointerType==="touch"?t().toggleSelection(n()):t().replaceSelection(n()))},o=()=>t().isSelected(n()),a=()=>He(r.disabled)||t().isDisabled(n()),c=()=>!a()&&t().canSelectItem(n());let l=null;const u=v=>{c()&&(l=v.pointerType,v.pointerType==="mouse"&&v.button===0&&!He(r.shouldSelectOnPressUp)&&s(v))},f=v=>{c()&&v.pointerType==="mouse"&&v.button===0&&He(r.shouldSelectOnPressUp)&&He(r.allowsDifferentPressOrigin)&&s(v)},h=v=>{c()&&(He(r.shouldSelectOnPressUp)&&!He(r.allowsDifferentPressOrigin)||l!=="mouse")&&s(v)},d=v=>{!c()||!["Enter"," "].includes(v.key)||(X7(v)?t().toggleSelection(n()):s(v))},g=v=>{a()&&v.preventDefault()},p=v=>{const b=e();i()||a()||!b||v.target===b&&t().setFocusedKey(n())},m=ke(()=>{if(!(i()||a()))return n()===t().focusedKey()?0:-1}),y=ke(()=>He(r.virtualized)?void 0:n());return it(kn([e,n,i,()=>t().focusedKey(),()=>t().isFocused()],([v,b,_,x,E])=>{v&&b===x&&E&&!_&&document.activeElement!==v&&(r.focus?r.focus():Kn(v))})),{isSelected:o,isDisabled:a,allowsSelection:c,tabIndex:m,dataKey:y,onPointerDown:u,onPointerUp:f,onClick:h,onKeyDown:d,onMouseDown:g,onFocus:p}}var ste=class{collection;state;constructor(r,e){this.collection=r,this.state=e}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(r){this.state.setSelectionBehavior(r)}isFocused(){return this.state.isFocused()}setFocused(r){this.state.setFocused(r)}focusedKey(){return this.state.focusedKey()}setFocusedKey(r){(r==null||this.collection().getItem(r))&&this.state.setFocusedKey(r)}selectedKeys(){return this.state.selectedKeys()}isSelected(r){if(this.state.selectionMode()==="none")return!1;const e=this.getKey(r);return e==null?!1:this.state.selectedKeys().has(e)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const r=this.state.selectedKeys();return this.getAllSelectableKeys().every(e=>r.has(e))}firstSelectedKey(){let r;for(const e of this.state.selectedKeys()){const t=this.collection().getItem(e),n=t?.index!=null&&r?.index!=null&&t.index<r.index;(!r||n)&&(r=t)}return r?.key}lastSelectedKey(){let r;for(const e of this.state.selectedKeys()){const t=this.collection().getItem(e),n=t?.index!=null&&r?.index!=null&&t.index>r.index;(!r||n)&&(r=t)}return r?.key}extendSelection(r){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(r);return}const e=this.getKey(r);if(e==null)return;const t=this.state.selectedKeys(),n=t.anchorKey||e,i=new tc(t,n,e);for(const s of this.getKeyRange(n,t.currentKey||e))i.delete(s);for(const s of this.getKeyRange(e,n))this.canSelectItem(s)&&i.add(s);this.state.setSelectedKeys(i)}getKeyRange(r,e){const t=this.collection().getItem(r),n=this.collection().getItem(e);return t&&n?t.index!=null&&n.index!=null&&t.index<=n.index?this.getKeyRangeInternal(r,e):this.getKeyRangeInternal(e,r):[]}getKeyRangeInternal(r,e){const t=[];let n=r;for(;n!=null;){const i=this.collection().getItem(n);if(i&&i.type==="item"&&t.push(n),n===e)return t;n=this.collection().getKeyAfter(n)}return[]}getKey(r){const e=this.collection().getItem(r);return e?!e||e.type!=="item"?null:e.key:r}toggleSelection(r){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(r)){this.replaceSelection(r);return}const e=this.getKey(r);if(e==null)return;const t=new tc(this.state.selectedKeys());t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection()&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(r){if(this.selectionMode()==="none")return;const e=this.getKey(r);if(e==null)return;const t=this.canSelectItem(e)?new tc([e],e,e):new tc;this.state.setSelectedKeys(t)}setSelectedKeys(r){if(this.selectionMode()==="none")return;const e=new tc;for(const t of r){const n=this.getKey(t);if(n!=null&&(e.add(n),this.selectionMode()==="single"))break}this.state.setSelectedKeys(e)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const r=this.state.selectedKeys();!this.disallowEmptySelection()&&r.size>0&&this.state.setSelectedKeys(new tc)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(r,e){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(r)&&!this.disallowEmptySelection()?this.toggleSelection(r):this.replaceSelection(r):this.selectionBehavior()==="toggle"||e&&e.pointerType==="touch"?this.toggleSelection(r):this.replaceSelection(r))}isSelectionEqual(r){if(r===this.state.selectedKeys())return!0;const e=this.selectedKeys();if(r.size!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;for(const t of e)if(!r.has(t))return!1;return!0}canSelectItem(r){if(this.state.selectionMode()==="none")return!1;const e=this.collection().getItem(r);return e!=null&&!e.disabled}isDisabled(r){const e=this.collection().getItem(r);return!e||e.disabled}getAllSelectableKeys(){const r=[];return(t=>{for(;t!=null;){if(this.canSelectItem(t)){const n=this.collection().getItem(t);if(!n)continue;n.type==="item"&&r.push(t)}t=this.collection().getKeyAfter(t)}})(this.collection().getFirstKey()),r}},nP=class{keyMap=new Map;iterable;firstKey;lastKey;constructor(r){this.iterable=r;for(const n of r)this.keyMap.set(n.key,n);if(this.keyMap.size===0)return;let e,t=0;for(const[n,i]of this.keyMap)e?(e.nextKey=n,i.prevKey=e.key):(this.firstKey=n,i.prevKey=void 0),i.type==="item"&&(i.index=t++),e=i,e.nextKey=void 0;this.lastKey=e.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(r){return this.keyMap.get(r)?.prevKey}getKeyAfter(r){return this.keyMap.get(r)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(r){return this.keyMap.get(r)}at(r){const e=[...this.getKeys()];return this.getItem(e[r])}};function YT(r){const e=tte(r),n=Vee({dataSource:()=>He(r.dataSource),getKey:()=>He(r.getKey),getTextValue:()=>He(r.getTextValue),getDisabled:()=>He(r.getDisabled),getSectionChildren:()=>He(r.getSectionChildren),factory:s=>r.filter?new nP(r.filter(s)):new nP(s)},[()=>r.filter]),i=new ste(n,e);return E0(()=>{const s=e.focusedKey();s!=null&&!n().getItem(s)&&e.setFocusedKey(void 0)}),{collection:n,selectionManager:()=>i}}var Z7=nn();function e9(){return Qr(Z7)}function ote(){const r=e9();if(r===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return r}function t9(r,e){return!!(e.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_PRECEDING)}function ate(r,e){const t=e.ref();if(!t)return-1;let n=r.length;if(!n)return-1;for(;n--;){const i=r[n]?.ref();if(i&&t9(i,t))return n+1}return 0}function cte(r){const e=r.map((n,i)=>[i,n]);let t=!1;return e.sort(([n,i],[s,o])=>{const a=i.ref(),c=o.ref();return a===c||!a||!c?0:t9(a,c)?(n>s&&(t=!0),-1):(n<s&&(t=!0),1)}),t?e.map(([n,i])=>i):r}function r9(r,e){const t=cte(r);r!==t&&e(t)}function lte(r){const e=r[0],t=r[r.length-1]?.ref();let n=e?.ref()?.parentElement;for(;n;){if(t&&n.contains(t))return n;n=n.parentElement}return Eo(n).body}function ute(r,e){it(()=>{const t=setTimeout(()=>{r9(r(),e)});yt(()=>clearTimeout(t))})}function fte(r,e){if(typeof IntersectionObserver!="function"){ute(r,e);return}let t=[];it(()=>{const n=()=>{const o=!!t.length;t=r(),o&&r9(r(),e)},i=lte(r()),s=new IntersectionObserver(n,{root:i});for(const o of r()){const a=o.ref();a&&s.observe(a)}yt(()=>s.disconnect())})}function hte(r={}){const[e,t]=kZ({value:()=>He(r.items),onChange:s=>r.onItemsChange?.(s)});fte(e,t);const n=s=>(t(o=>{const a=ate(o,s);return YQ(o,s,a)}),()=>{t(o=>{const a=o.filter(c=>c.ref()!==s.ref());return o.length===a.length?o:a})});return{DomCollectionProvider:s=>D(Z7.Provider,{value:{registerItem:n},get children(){return s.children}})}}function dte(r){const e=ote(),t=Ht({shouldRegisterItem:!0},r);it(()=>{if(!t.shouldRegisterItem)return;const n=e.registerItem(t.getItem());yt(n)})}const pte=["top","right","bottom","left"],uu=Math.min,mo=Math.max,av=Math.round,Sm=Math.floor,ac=r=>({x:r,y:r}),gte={left:"right",right:"left",bottom:"top",top:"bottom"},mte={start:"end",end:"start"};function SA(r,e,t){return mo(r,uu(e,t))}function jf(r,e){return typeof r=="function"?r(e):r}function fu(r){return r.split("-")[0]}function Wd(r){return r.split("-")[1]}function n9(r){return r==="x"?"y":"x"}function XT(r){return r==="y"?"height":"width"}function Hc(r){return["top","bottom"].includes(fu(r))?"y":"x"}function JT(r){return n9(Hc(r))}function yte(r,e,t){t===void 0&&(t=!1);const n=Wd(r),i=JT(r),s=XT(i);let o=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=cv(o)),[o,cv(o)]}function vte(r){const e=cv(r);return[EA(r),e,EA(e)]}function EA(r){return r.replace(/start|end/g,e=>mte[e])}function bte(r,e,t){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(r){case"top":case"bottom":return t?e?i:n:e?n:i;case"left":case"right":return e?s:o;default:return[]}}function wte(r,e,t,n){const i=Wd(r);let s=bte(fu(r),t==="start",n);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(EA)))),s}function cv(r){return r.replace(/left|right|bottom|top/g,e=>gte[e])}function xte(r){return{top:0,right:0,bottom:0,left:0,...r}}function i9(r){return typeof r!="number"?xte(r):{top:r,right:r,bottom:r,left:r}}function lv(r){const{x:e,y:t,width:n,height:i}=r;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function iP(r,e,t){let{reference:n,floating:i}=r;const s=Hc(e),o=JT(e),a=XT(o),c=fu(e),l=s==="y",u=n.x+n.width/2-i.width/2,f=n.y+n.height/2-i.height/2,h=n[a]/2-i[a]/2;let d;switch(c){case"top":d={x:u,y:n.y-i.height};break;case"bottom":d={x:u,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:f};break;case"left":d={x:n.x-i.width,y:f};break;default:d={x:n.x,y:n.y}}switch(Wd(e)){case"start":d[o]-=h*(t&&l?-1:1);break;case"end":d[o]+=h*(t&&l?-1:1);break}return d}const _te=async(r,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:r,floating:e,strategy:i}),{x:u,y:f}=iP(l,n,c),h=n,d={},g=0;for(let p=0;p<a.length;p++){const{name:m,fn:y}=a[p],{x:v,y:b,data:_,reset:x}=await y({x:u,y:f,initialPlacement:n,placement:h,strategy:i,middlewareData:d,rects:l,platform:o,elements:{reference:r,floating:e}});u=v??u,f=b??f,d={...d,[m]:{...d[m],..._}},x&&g<=50&&(g++,typeof x=="object"&&(x.placement&&(h=x.placement),x.rects&&(l=x.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:i}):x.rects),{x:u,y:f}=iP(l,h,c)),p=-1)}return{x:u,y:f,placement:h,strategy:i,middlewareData:d}};async function tg(r,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:c}=r,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=jf(e,r),g=i9(d),m=a[h?f==="floating"?"reference":"floating":f],y=lv(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(m)))==null||t?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v=f==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},x=lv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:c}):v);return{top:(y.top-x.top+g.top)/_.y,bottom:(x.bottom-y.bottom+g.bottom)/_.y,left:(y.left-x.left+g.left)/_.x,right:(x.right-y.right+g.right)/_.x}}const Ste=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=jf(r,e)||{};if(l==null)return{};const f=i9(u),h={x:t,y:n},d=JT(i),g=XT(d),p=await o.getDimensions(l),m=d==="y",y=m?"top":"left",v=m?"bottom":"right",b=m?"clientHeight":"clientWidth",_=s.reference[g]+s.reference[d]-h[d]-s.floating[g],x=h[d]-s.reference[d],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=E?E[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(E)))&&(S=a.floating[b]||s.floating[g]);const C=_/2-x/2,k=S/2-p[g]/2-1,$=uu(f[y],k),J=uu(f[v],k),j=$,L=S-p[g]-J,w=S/2-p[g]/2+C,R=SA(j,w,L),N=!c.arrow&&Wd(i)!=null&&w!==R&&s.reference[g]/2-(w<j?$:J)-p[g]/2<0,Y=N?w<j?w-j:w-L:0;return{[d]:h[d]+Y,data:{[d]:R,centerOffset:w-R-Y,...N&&{alignmentOffset:Y}},reset:N}}}),Ete=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...m}=jf(r,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const y=fu(i),v=Hc(a),b=fu(a)===a,_=await(c.isRTL==null?void 0:c.isRTL(l.floating)),x=h||(b||!p?[cv(a)]:vte(a)),E=g!=="none";!h&&E&&x.push(...wte(a,p,g,_));const S=[a,...x],C=await tg(e,m),k=[];let $=((n=s.flip)==null?void 0:n.overflows)||[];if(u&&k.push(C[y]),f){const w=yte(i,o,_);k.push(C[w[0]],C[w[1]])}if($=[...$,{placement:i,overflows:k}],!k.every(w=>w<=0)){var J,j;const w=(((J=s.flip)==null?void 0:J.index)||0)+1,R=S[w];if(R&&(!(f==="alignment"?v!==Hc(R):!1)||$.every(z=>z.overflows[0]>0&&Hc(z.placement)===v)))return{data:{index:w,overflows:$},reset:{placement:R}};let N=(j=$.filter(Y=>Y.overflows[0]<=0).sort((Y,z)=>Y.overflows[1]-z.overflows[1])[0])==null?void 0:j.placement;if(!N)switch(d){case"bestFit":{var L;const Y=(L=$.filter(z=>{if(E){const G=Hc(z.placement);return G===v||G==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(G=>G>0).reduce((G,te)=>G+te,0)]).sort((z,G)=>z[1]-G[1])[0])==null?void 0:L[0];Y&&(N=Y);break}case"initialPlacement":N=a;break}if(i!==N)return{reset:{placement:N}}}return{}}}};function sP(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function oP(r){return pte.some(e=>r[e]>=0)}const Ate=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...i}=jf(r,e);switch(n){case"referenceHidden":{const s=await tg(e,{...i,elementContext:"reference"}),o=sP(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:oP(o)}}}case"escaped":{const s=await tg(e,{...i,altBoundary:!0}),o=sP(s,t.floating);return{data:{escapedOffsets:o,escaped:oP(o)}}}default:return{}}}}};async function Ite(r,e){const{placement:t,platform:n,elements:i}=r,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=fu(t),a=Wd(t),c=Hc(t)==="y",l=["left","top"].includes(o)?-1:1,u=s&&c?-1:1,f=jf(e,r);let{mainAxis:h,crossAxis:d,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(d=a==="end"?g*-1:g),c?{x:d*u,y:h*l}:{x:h*l,y:d*u}}const Cte=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await Ite(e,r);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},Tte=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:y,y:v}=m;return{x:y,y:v}}},...c}=jf(r,e),l={x:t,y:n},u=await tg(e,c),f=Hc(fu(i)),h=n9(f);let d=l[h],g=l[f];if(s){const m=h==="y"?"top":"left",y=h==="y"?"bottom":"right",v=d+u[m],b=d-u[y];d=SA(v,d,b)}if(o){const m=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=g+u[m],b=g-u[y];g=SA(v,g,b)}const p=a.fn({...e,[h]:d,[f]:g});return{...p,data:{x:p.x-t,y:p.y-n,enabled:{[h]:s,[f]:o}}}}}},Rte=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,n;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...l}=jf(r,e),u=await tg(e,l),f=fu(i),h=Wd(i),d=Hc(i)==="y",{width:g,height:p}=s.floating;let m,y;f==="top"||f==="bottom"?(m=f,y=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=f,m=h==="end"?"top":"bottom");const v=p-u.top-u.bottom,b=g-u.left-u.right,_=uu(p-u[m],v),x=uu(g-u[y],b),E=!e.middlewareData.shift;let S=_,C=x;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(C=b),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(S=v),E&&!h){const $=mo(u.left,0),J=mo(u.right,0),j=mo(u.top,0),L=mo(u.bottom,0);d?C=g-2*($!==0||J!==0?$+J:mo(u.left,u.right)):S=p-2*(j!==0||L!==0?j+L:mo(u.top,u.bottom))}await c({...e,availableWidth:C,availableHeight:S});const k=await o.getDimensions(a.floating);return g!==k.width||p!==k.height?{reset:{rects:!0}}:{}}}};function bb(){return typeof window<"u"}function Gd(r){return s9(r)?(r.nodeName||"").toLowerCase():"#document"}function wo(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function yc(r){var e;return(e=(s9(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function s9(r){return bb()?r instanceof Node||r instanceof wo(r).Node:!1}function Aa(r){return bb()?r instanceof Element||r instanceof wo(r).Element:!1}function fc(r){return bb()?r instanceof HTMLElement||r instanceof wo(r).HTMLElement:!1}function aP(r){return!bb()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof wo(r).ShadowRoot}function Mg(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=Ia(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(i)}function kte(r){return["table","td","th"].includes(Gd(r))}function wb(r){return[":popover-open",":modal"].some(e=>{try{return r.matches(e)}catch{return!1}})}function QT(r){const e=ZT(),t=Aa(r)?Ia(r):r;return["transform","translate","scale","rotate","perspective"].some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function Pte(r){let e=hu(r);for(;fc(e)&&!vd(e);){if(QT(e))return e;if(wb(e))return null;e=hu(e)}return null}function ZT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vd(r){return["html","body","#document"].includes(Gd(r))}function Ia(r){return wo(r).getComputedStyle(r)}function xb(r){return Aa(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function hu(r){if(Gd(r)==="html")return r;const e=r.assignedSlot||r.parentNode||aP(r)&&r.host||yc(r);return aP(e)?e.host:e}function o9(r){const e=hu(r);return vd(e)?r.ownerDocument?r.ownerDocument.body:r.body:fc(e)&&Mg(e)?e:o9(e)}function rg(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=o9(r),s=i===((n=r.ownerDocument)==null?void 0:n.body),o=wo(i);if(s){const a=AA(o);return e.concat(o,o.visualViewport||[],Mg(i)?i:[],a&&t?rg(a):[])}return e.concat(i,rg(i,[],t))}function AA(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function a9(r){const e=Ia(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=fc(r),s=i?r.offsetWidth:t,o=i?r.offsetHeight:n,a=av(t)!==s||av(n)!==o;return a&&(t=s,n=o),{width:t,height:n,$:a}}function eR(r){return Aa(r)?r:r.contextElement}function Xh(r){const e=eR(r);if(!fc(e))return ac(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:s}=a9(e);let o=(s?av(t.width):t.width)/n,a=(s?av(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Ote=ac(0);function c9(r){const e=wo(r);return!ZT()||!e.visualViewport?Ote:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Dte(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==wo(r)?!1:e}function _f(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),s=eR(r);let o=ac(1);e&&(n?Aa(n)&&(o=Xh(n)):o=Xh(r));const a=Dte(s,t,n)?c9(s):ac(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const h=wo(s),d=n&&Aa(n)?wo(n):n;let g=h,p=AA(g);for(;p&&n&&d!==g;){const m=Xh(p),y=p.getBoundingClientRect(),v=Ia(p),b=y.left+(p.clientLeft+parseFloat(v.paddingLeft))*m.x,_=y.top+(p.clientTop+parseFloat(v.paddingTop))*m.y;c*=m.x,l*=m.y,u*=m.x,f*=m.y,c+=b,l+=_,g=wo(p),p=AA(g)}}return lv({width:u,height:f,x:c,y:l})}function tR(r,e){const t=xb(r).scrollLeft;return e?e.left+t:_f(yc(r)).left+t}function l9(r,e,t){t===void 0&&(t=!1);const n=r.getBoundingClientRect(),i=n.left+e.scrollLeft-(t?0:tR(r,n)),s=n.top+e.scrollTop;return{x:i,y:s}}function $te(r){let{elements:e,rect:t,offsetParent:n,strategy:i}=r;const s=i==="fixed",o=yc(n),a=e?wb(e.floating):!1;if(n===o||a&&s)return t;let c={scrollLeft:0,scrollTop:0},l=ac(1);const u=ac(0),f=fc(n);if((f||!f&&!s)&&((Gd(n)!=="body"||Mg(o))&&(c=xb(n)),fc(n))){const d=_f(n);l=Xh(n),u.x=d.x+n.clientLeft,u.y=d.y+n.clientTop}const h=o&&!f&&!s?l9(o,c,!0):ac(0);return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-c.scrollLeft*l.x+u.x+h.x,y:t.y*l.y-c.scrollTop*l.y+u.y+h.y}}function Mte(r){return Array.from(r.getClientRects())}function Bte(r){const e=yc(r),t=xb(r),n=r.ownerDocument.body,i=mo(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=mo(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+tR(r);const a=-t.scrollTop;return Ia(n).direction==="rtl"&&(o+=mo(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Nte(r,e){const t=wo(r),n=yc(r),i=t.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const l=ZT();(!l||l&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}function Lte(r,e){const t=_f(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,s=fc(r)?Xh(r):ac(1),o=r.clientWidth*s.x,a=r.clientHeight*s.y,c=i*s.x,l=n*s.y;return{width:o,height:a,x:c,y:l}}function cP(r,e,t){let n;if(e==="viewport")n=Nte(r,t);else if(e==="document")n=Bte(yc(r));else if(Aa(e))n=Lte(e,t);else{const i=c9(r);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return lv(n)}function u9(r,e){const t=hu(r);return t===e||!Aa(t)||vd(t)?!1:Ia(t).position==="fixed"||u9(t,e)}function Fte(r,e){const t=e.get(r);if(t)return t;let n=rg(r,[],!1).filter(a=>Aa(a)&&Gd(a)!=="body"),i=null;const s=Ia(r).position==="fixed";let o=s?hu(r):r;for(;Aa(o)&&!vd(o);){const a=Ia(o),c=QT(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Mg(o)&&!c&&u9(r,o))?n=n.filter(u=>u!==o):i=a,o=hu(o)}return e.set(r,n),n}function Ute(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const o=[...t==="clippingAncestors"?wb(e)?[]:Fte(e,this._c):[].concat(t),n],a=o[0],c=o.reduce((l,u)=>{const f=cP(e,u,i);return l.top=mo(f.top,l.top),l.right=uu(f.right,l.right),l.bottom=uu(f.bottom,l.bottom),l.left=mo(f.left,l.left),l},cP(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function zte(r){const{width:e,height:t}=a9(r);return{width:e,height:t}}function qte(r,e,t){const n=fc(e),i=yc(e),s=t==="fixed",o=_f(r,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=ac(0);function l(){c.x=tR(i)}if(n||!n&&!s)if((Gd(e)!=="body"||Mg(i))&&(a=xb(e)),n){const d=_f(e,!0,s,e);c.x=d.x+e.clientLeft,c.y=d.y+e.clientTop}else i&&l();s&&!n&&i&&l();const u=i&&!n&&!s?l9(i,a):ac(0),f=o.left+a.scrollLeft-c.x-u.x,h=o.top+a.scrollTop-c.y-u.y;return{x:f,y:h,width:o.width,height:o.height}}function u1(r){return Ia(r).position==="static"}function lP(r,e){if(!fc(r)||Ia(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return yc(r)===t&&(t=t.ownerDocument.body),t}function f9(r,e){const t=wo(r);if(wb(r))return t;if(!fc(r)){let i=hu(r);for(;i&&!vd(i);){if(Aa(i)&&!u1(i))return i;i=hu(i)}return t}let n=lP(r,e);for(;n&&kte(n)&&u1(n);)n=lP(n,e);return n&&vd(n)&&u1(n)&&!QT(n)?t:n||Pte(r)||t}const jte=async function(r){const e=this.getOffsetParent||f9,t=this.getDimensions,n=await t(r.floating);return{reference:qte(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Vte(r){return Ia(r).direction==="rtl"}const h9={convertOffsetParentRelativeRectToViewportRelativeRect:$te,getDocumentElement:yc,getClippingRect:Ute,getOffsetParent:f9,getElementRects:jte,getClientRects:Mte,getDimensions:zte,getScale:Xh,isElement:Aa,isRTL:Vte};function d9(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function Kte(r,e){let t=null,n;const i=yc(r);function s(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const l=r.getBoundingClientRect(),{left:u,top:f,width:h,height:d}=l;if(a||e(),!h||!d)return;const g=Sm(f),p=Sm(i.clientWidth-(u+h)),m=Sm(i.clientHeight-(f+d)),y=Sm(u),b={rootMargin:-g+"px "+-p+"px "+-m+"px "+-y+"px",threshold:mo(0,uu(1,c))||1};let _=!0;function x(E){const S=E[0].intersectionRatio;if(S!==c){if(!_)return o();S?o(!1,S):n=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!d9(l,r.getBoundingClientRect())&&o(),_=!1}try{t=new IntersectionObserver(x,{...b,root:i.ownerDocument})}catch{t=new IntersectionObserver(x,b)}t.observe(r)}return o(!0),s}function Hte(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,l=eR(r),u=i||s?[...l?rg(l):[],...rg(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",t,{passive:!0}),s&&y.addEventListener("resize",t)});const f=l&&a?Kte(l,t):null;let h=-1,d=null;o&&(d=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&d&&(d.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=d)==null||b.observe(e)})),t()}),l&&!c&&d.observe(l),d.observe(e));let g,p=c?_f(r):null;c&&m();function m(){const y=_f(r);p&&!d9(p,y)&&t(),p=y,g=requestAnimationFrame(m)}return t(),()=>{var y;u.forEach(v=>{i&&v.removeEventListener("scroll",t),s&&v.removeEventListener("resize",t)}),f?.(),(y=d)==null||y.disconnect(),d=null,c&&cancelAnimationFrame(g)}}const Wte=Cte,Gte=Tte,Yte=Ete,Xte=Rte,Jte=Ate,Qte=Ste,Zte=(r,e,t)=>{const n=new Map,i={platform:h9,...t},s={...i.platform,_c:n};return _te(r,e,{...i,platform:s})};var ere=ye('<svg display=block viewBox="0 0 30 30"style=transform:scale(1.02)><g><path fill=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z></path><path stroke=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z>'),rR=nn();function nR(){const r=Qr(rR);if(r===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return r}var IA=30,uP=IA/2,tre={top:180,right:-90,bottom:0,left:90};function Vf(r){const e=nR(),t=Ht({size:IA},r),[n,i]=Mt(t,["ref","style","size"]),s=()=>e.currentPlacement().split("-")[0],o=rre(e.contentRef),a=()=>o()?.getPropertyValue("background-color")||"none",c=()=>o()?.getPropertyValue(`border-${s()}-color`)||"none",l=()=>o()?.getPropertyValue(`border-${s()}-width`)||"0px",u=()=>Number.parseInt(l())*2*(IA/n.size),f=()=>`rotate(${tre[s()]} ${uP} ${uP}) translate(0 2)`;return D(Sr,st({as:"div",ref(h){var d=dn(e.setArrowRef,n.ref);typeof d=="function"&&d(h)},"aria-hidden":"true",get style(){return gc({position:"absolute","font-size":`${n.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:a(),stroke:c(),"stroke-width":u()},n.style)}},i,{get children(){var h=ere(),d=h.firstChild,g=d.firstChild;return g.nextSibling,ht(()=>Mr(d,"transform",f())),h}}))}function rre(r){const[e,t]=$e();return it(()=>{const n=r();n&&t(c7(n).getComputedStyle(n))}),e}function nre(r){const e=nR(),[t,n]=Mt(r,["ref","style"]);return D(Sr,st({as:"div",ref(i){var s=dn(e.setPositionerRef,t.ref);typeof s=="function"&&s(i)},"data-popper-positioner":"",get style(){return gc({position:"absolute",top:0,left:0,"min-width":"max-content"},t.style)}},n))}function fP(r){const{x:e=0,y:t=0,width:n=0,height:i=0}=r??{};if(typeof DOMRect=="function")return new DOMRect(e,t,n,i);const s={x:e,y:t,width:n,height:i,top:t,right:e+n,bottom:t+i,left:e};return{...s,toJSON:()=>s}}function ire(r,e){return{contextElement:r,getBoundingClientRect:()=>{const n=e(r);return n?fP(n):r?r.getBoundingClientRect():fP()}}}function sre(r){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(r)}var ore={top:"bottom",right:"left",bottom:"top",left:"right"};function are(r,e){const[t,n]=r.split("-"),i=ore[t];return n?t==="left"||t==="right"?`${i} ${n==="start"?"top":"bottom"}`:n==="start"?`${i} ${e==="rtl"?"right":"left"}`:`${i} ${e==="rtl"?"left":"right"}`:`${i} center`}function cre(r){const e=Ht({getAnchorRect:h=>h?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},r),[t,n]=$e(),[i,s]=$e(),[o,a]=$e(e.placement),c=()=>ire(e.anchorRef?.(),e.getAnchorRect),{direction:l}=pl();async function u(){const h=c(),d=t(),g=i();if(!h||!d)return;const p=(g?.clientHeight||0)/2,m=typeof e.gutter=="number"?e.gutter+p:e.gutter??p;d.style.setProperty("--kb-popper-content-overflow-padding",`${e.overflowPadding}px`),h.getBoundingClientRect();const y=[Wte(({placement:E})=>{const S=!!E.split("-")[1];return{mainAxis:m,crossAxis:S?void 0:e.shift,alignmentAxis:e.shift}})];if(e.flip!==!1){const E=typeof e.flip=="string"?e.flip.split(" "):void 0;if(E!==void 0&&!E.every(sre))throw new Error("`flip` expects a spaced-delimited list of placements");y.push(Yte({padding:e.overflowPadding,fallbackPlacements:E}))}(e.slide||e.overlap)&&y.push(Gte({mainAxis:e.slide,crossAxis:e.overlap,padding:e.overflowPadding})),y.push(Xte({padding:e.overflowPadding,apply({availableWidth:E,availableHeight:S,rects:C}){const k=Math.round(C.reference.width);E=Math.floor(E),S=Math.floor(S),d.style.setProperty("--kb-popper-anchor-width",`${k}px`),d.style.setProperty("--kb-popper-content-available-width",`${E}px`),d.style.setProperty("--kb-popper-content-available-height",`${S}px`),e.sameWidth&&(d.style.width=`${k}px`),e.fitViewport&&(d.style.maxWidth=`${E}px`,d.style.maxHeight=`${S}px`)}})),e.hideWhenDetached&&y.push(Jte({padding:e.detachedPadding})),g&&y.push(Qte({element:g,padding:e.arrowPadding}));const v=await Zte(h,d,{placement:e.placement,strategy:"absolute",middleware:y,platform:{...h9,isRTL:()=>l()==="rtl"}});if(a(v.placement),e.onCurrentPlacementChange?.(v.placement),!d)return;d.style.setProperty("--kb-popper-content-transform-origin",are(v.placement,l()));const b=Math.round(v.x),_=Math.round(v.y);let x;if(e.hideWhenDetached&&(x=v.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(d.style,{top:"0",left:"0",transform:`translate3d(${b}px, ${_}px, 0)`,visibility:x}),g&&v.middlewareData.arrow){const{x:E,y:S}=v.middlewareData.arrow,C=v.placement.split("-")[0];Object.assign(g.style,{left:E!=null?`${E}px`:"",top:S!=null?`${S}px`:"",[C]:"100%"})}}it(()=>{const h=c(),d=t();if(!h||!d)return;const g=Hte(h,d,u,{elementResize:typeof ResizeObserver=="function"});yt(g)}),it(()=>{const h=t(),d=e.contentRef?.();!h||!d||queueMicrotask(()=>{h.style.zIndex=getComputedStyle(d).zIndex})});const f={currentPlacement:o,contentRef:()=>e.contentRef?.(),setPositionerRef:n,setArrowRef:s};return D(rR.Provider,{value:f,get children(){return e.children}})}var Yd=Object.assign(cre,{Arrow:Vf,Context:rR,usePopperContext:nR,Positioner:nre}),lre={};mc(lre,{Arrow:()=>Vf,Content:()=>g9,Portal:()=>m9,Root:()=>y9,Tooltip:()=>Wc,Trigger:()=>v9,useTooltipContext:()=>_b});var p9=nn();function _b(){const r=Qr(p9);if(r===void 0)throw new Error("[kobalte]: `useTooltipContext` must be used within a `Tooltip` component");return r}function g9(r){const e=_b(),t=Ht({id:e.generateId("content")},r),[n,i]=Mt(t,["ref","style"]);return it(()=>yt(e.registerContentId(i.id))),D(We,{get when(){return e.contentPresent()},get children(){return D(Yd.Positioner,{get children(){return D(mb,st({ref(s){var o=dn(a=>{e.setContentRef(a)},n.ref);typeof o=="function"&&o(s)},role:"tooltip",disableOutsidePointerEvents:!1,get style(){return gc({"--kb-tooltip-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},n.style)},onFocusOutside:s=>s.preventDefault(),onDismiss:()=>e.hideTooltip(!0)},()=>e.dataset(),i))}})}})}function m9(r){const e=_b();return D(We,{get when(){return e.contentPresent()},get children(){return D(hb,r)}})}function ure(r,e,t){const n=r.split("-")[0],i=e.getBoundingClientRect(),s=t.getBoundingClientRect(),o=[],a=i.left+i.width/2,c=i.top+i.height/2;switch(n){case"top":o.push([i.left,c]),o.push([s.left,s.bottom]),o.push([s.left,s.top]),o.push([s.right,s.top]),o.push([s.right,s.bottom]),o.push([i.right,c]);break;case"right":o.push([a,i.top]),o.push([s.left,s.top]),o.push([s.right,s.top]),o.push([s.right,s.bottom]),o.push([s.left,s.bottom]),o.push([a,i.bottom]);break;case"bottom":o.push([i.left,c]),o.push([s.left,s.top]),o.push([s.left,s.bottom]),o.push([s.right,s.bottom]),o.push([s.right,s.top]),o.push([i.right,c]);break;case"left":o.push([a,i.top]),o.push([s.right,s.top]),o.push([s.left,s.top]),o.push([s.left,s.bottom]),o.push([s.right,s.bottom]),o.push([a,i.bottom]);break}return o}var ku={},fre=0,ah=!1,Rc,vp,ch;function y9(r){const e=`tooltip-${mi()}`,t=`${++fre}`,n=Ht({id:e,openDelay:700,closeDelay:300,skipDelayDuration:300},r),[i,s]=Mt(n,["id","open","defaultOpen","onOpenChange","disabled","triggerOnFocusOnly","openDelay","closeDelay","skipDelayDuration","ignoreSafeArea","forceMount"]);let o;const[a,c]=$e(),[l,u]=$e(),[f,h]=$e(),[d,g]=$e(s.placement),p=jd({open:()=>i.open,defaultOpen:()=>i.defaultOpen,onOpenChange:w=>i.onOpenChange?.(w)}),{present:m}=yd({show:()=>i.forceMount||p.isOpen(),element:()=>f()??null}),y=()=>{ku[t]=b},v=()=>{for(const w in ku)w!==t&&(ku[w](!0),delete ku[w])},b=(w=!1)=>{w||i.closeDelay&&i.closeDelay<=0?(window.clearTimeout(o),o=void 0,p.close()):o||(o=window.setTimeout(()=>{o=void 0,p.close()},i.closeDelay)),window.clearTimeout(Rc),Rc=void 0,i.skipDelayDuration&&i.skipDelayDuration>=0&&(ch=window.setTimeout(()=>{window.clearTimeout(ch),ch=void 0},i.skipDelayDuration)),ah&&(window.clearTimeout(vp),vp=window.setTimeout(()=>{delete ku[t],vp=void 0,ah=!1},i.closeDelay))},_=()=>{clearTimeout(o),o=void 0,v(),y(),ah=!0,p.open(),window.clearTimeout(Rc),Rc=void 0,window.clearTimeout(vp),vp=void 0,window.clearTimeout(ch),ch=void 0},x=()=>{v(),y(),!p.isOpen()&&!Rc&&!ah?Rc=window.setTimeout(()=>{Rc=void 0,ah=!0,_()},i.openDelay):p.isOpen()||_()},E=(w=!1)=>{!w&&i.openDelay&&i.openDelay>0&&!o&&!ch?x():_()},S=()=>{window.clearTimeout(Rc),Rc=void 0,ah=!1},C=()=>{window.clearTimeout(o),o=void 0},k=w=>is(l(),w)||is(f(),w),$=w=>{const R=l(),N=f();if(!(!R||!N))return ure(w,R,N)},J=w=>{const R=w.target;if(k(R)){C();return}if(!i.ignoreSafeArea){const N=$(d());if(N&&g7(gZ(w),N)){C();return}}o||b()};it(()=>{if(!p.isOpen())return;const w=Eo();w.addEventListener("pointermove",J,!0),yt(()=>{w.removeEventListener("pointermove",J,!0)})}),it(()=>{const w=l();if(!w||!p.isOpen())return;const R=Y=>{const z=Y.target;is(z,w)&&b(!0)},N=c7();N.addEventListener("scroll",R,{capture:!0}),yt(()=>{N.removeEventListener("scroll",R,{capture:!0})})}),yt(()=>{clearTimeout(o),ku[t]&&delete ku[t]});const L={dataset:ke(()=>({"data-expanded":p.isOpen()?"":void 0,"data-closed":p.isOpen()?void 0:""})),isOpen:p.isOpen,isDisabled:()=>i.disabled??!1,triggerOnFocusOnly:()=>i.triggerOnFocusOnly??!1,contentId:a,contentPresent:m,openTooltip:E,hideTooltip:b,cancelOpening:S,generateId:To(()=>n.id),registerContentId:Gn(c),isTargetOnTooltip:k,setTriggerRef:u,setContentRef:h};return D(p9.Provider,{value:L,get children(){return D(Yd,st({anchorRef:l,contentRef:f,onCurrentPlacementChange:g},s))}})}function v9(r){let e;const t=_b(),[n,i]=Mt(r,["ref","onPointerEnter","onPointerLeave","onPointerDown","onClick","onFocus","onBlur"]);let s=!1,o=!1,a=!1;const c=()=>{s=!1},l=()=>{!t.isOpen()&&(o||a)&&t.openTooltip(a)},u=y=>{t.isOpen()&&!o&&!a&&t.hideTooltip(y)},f=y=>{fr(y,n.onPointerEnter),!(y.pointerType==="touch"||t.triggerOnFocusOnly()||t.isDisabled()||y.defaultPrevented)&&(o=!0,l())},h=y=>{fr(y,n.onPointerLeave),y.pointerType!=="touch"&&(o=!1,a=!1,t.isOpen()?u():t.cancelOpening())},d=y=>{fr(y,n.onPointerDown),s=!0,Eo(e).addEventListener("pointerup",c,{once:!0})},g=y=>{fr(y,n.onClick),o=!1,a=!1,u(!0)},p=y=>{fr(y,n.onFocus),!(t.isDisabled()||y.defaultPrevented||s)&&(a=!0,l())},m=y=>{fr(y,n.onBlur);const v=y.relatedTarget;t.isTargetOnTooltip(v)||(o=!1,a=!1,u(!0))};return yt(()=>{Eo(e).removeEventListener("pointerup",c)}),D(Sr,st({as:"button",ref(y){var v=dn(b=>{t.setTriggerRef(b),e=b},n.ref);typeof v=="function"&&v(y)},get"aria-describedby"(){return Or(()=>!!t.isOpen())()?t.contentId():void 0},onPointerEnter:f,onPointerLeave:h,onPointerDown:d,onClick:g,onFocus:p,onBlur:m},()=>t.dataset(),i))}var Wc=Object.assign(y9,{Arrow:Vf,Content:g9,Portal:m9,Trigger:v9}),b9=["id","name","validationState","required","disabled","readOnly"];function w9(r){const e=`form-control-${mi()}`,t=Ht({id:e},r),[n,i]=$e(),[s,o]=$e(),[a,c]=$e(),[l,u]=$e(),f=(p,m,y)=>{const v=y!=null||n()!=null;return[y,n(),v&&m!=null?p:void 0].filter(Boolean).join(" ")||void 0},h=p=>[a(),l(),p].filter(Boolean).join(" ")||void 0,d=ke(()=>({"data-valid":He(t.validationState)==="valid"?"":void 0,"data-invalid":He(t.validationState)==="invalid"?"":void 0,"data-required":He(t.required)?"":void 0,"data-disabled":He(t.disabled)?"":void 0,"data-readonly":He(t.readOnly)?"":void 0}));return{formControlContext:{name:()=>He(t.name)??He(t.id),dataset:d,validationState:()=>He(t.validationState),isRequired:()=>He(t.required),isDisabled:()=>He(t.disabled),isReadOnly:()=>He(t.readOnly),labelId:n,fieldId:s,descriptionId:a,errorMessageId:l,getAriaLabelledBy:f,getAriaDescribedBy:h,generateId:To(()=>He(t.id)),registerLabel:Gn(i),registerField:Gn(o),registerDescription:Gn(c),registerErrorMessage:Gn(u)}}}var iR=nn();function vc(){const r=Qr(iR);if(r===void 0)throw new Error("[kobalte]: `useFormControlContext` must be used within a `FormControlContext.Provider` component");return r}function sR(r){const e=vc(),t=Ht({id:e.generateId("description")},r);return it(()=>yt(e.registerDescription(t.id))),D(Sr,st({as:"div"},()=>e.dataset(),t))}var x9=["id","aria-label","aria-labelledby","aria-describedby"];function _9(r){const e=vc(),t=Ht({id:e.generateId("field")},r);return it(()=>yt(e.registerField(He(t.id)))),{fieldProps:{id:()=>He(t.id),ariaLabel:()=>He(t["aria-label"]),ariaLabelledBy:()=>e.getAriaLabelledBy(He(t.id),He(t["aria-label"]),He(t["aria-labelledby"])),ariaDescribedBy:()=>e.getAriaDescribedBy(He(t["aria-describedby"]))}}}function S9(r){let e;const t=vc(),n=Ht({id:t.generateId("label")},r),[i,s]=Mt(n,["ref"]),o=vb(()=>e,()=>"label");return it(()=>yt(t.registerLabel(s.id))),D(Sr,st({as:"label",ref(a){var c=dn(l=>e=l,i.ref);typeof c=="function"&&c(a)},get for(){return Or(()=>o()==="label")()?t.fieldId():void 0}},()=>t.dataset(),s))}function E9(r,e){it(kn(r,t=>{if(t==null)return;const n=hre(t);n!=null&&(n.addEventListener("reset",e,{passive:!0}),yt(()=>{n.removeEventListener("reset",e)}))}))}function hre(r){return dre(r)?r.form:r.closest("form")}function dre(r){return r.matches("textarea, input, select, button")}function oR(r){const e=vc(),t=Ht({id:e.generateId("error-message")},r),[n,i]=Mt(t,["forceMount"]),s=()=>e.validationState()==="invalid";return it(()=>{s()&&yt(e.registerErrorMessage(i.id))}),D(We,{get when(){return n.forceMount||s()},get children(){return D(Sr,st({as:"div"},()=>e.dataset(),i))}})}var pre={};mc(pre,{Control:()=>I9,Description:()=>C9,ErrorMessage:()=>T9,Input:()=>R9,Label:()=>k9,Root:()=>P9,Switch:()=>du,Thumb:()=>O9,useSwitchContext:()=>Kf});var A9=nn();function Kf(){const r=Qr(A9);if(r===void 0)throw new Error("[kobalte]: `useSwitchContext` must be used within a `Switch` component");return r}function I9(r){const e=vc(),t=Kf(),n=Ht({id:t.generateId("control")},r),[i,s]=Mt(n,["onClick","onKeyDown"]);return D(Sr,st({as:"div",onClick:c=>{fr(c,i.onClick),t.toggle(),t.inputRef()?.focus()},onKeyDown:c=>{fr(c,i.onKeyDown),c.key===LT.Space&&(t.toggle(),t.inputRef()?.focus())}},()=>e.dataset(),()=>t.dataset(),s))}function C9(r){const e=Kf();return D(sR,st(()=>e.dataset(),r))}function T9(r){const e=Kf();return D(oR,st(()=>e.dataset(),r))}function R9(r){const e=vc(),t=Kf(),n=Ht({id:t.generateId("input")},r),[i,s,o]=Mt(n,["ref","style","onChange","onFocus","onBlur"],x9),{fieldProps:a}=_9(s);return D(Sr,st({as:"input",ref(f){var h=dn(t.setInputRef,i.ref);typeof h=="function"&&h(f)},type:"checkbox",role:"switch",get id(){return a.id()},get name(){return e.name()},get value(){return t.value()},get checked(){return t.checked()},get required(){return e.isRequired()},get disabled(){return e.isDisabled()},get readonly(){return e.isReadOnly()},get style(){return gc({...qT},i.style)},get"aria-checked"(){return t.checked()},get"aria-label"(){return a.ariaLabel()},get"aria-labelledby"(){return a.ariaLabelledBy()},get"aria-describedby"(){return a.ariaDescribedBy()},get"aria-invalid"(){return e.validationState()==="invalid"||void 0},get"aria-required"(){return e.isRequired()||void 0},get"aria-disabled"(){return e.isDisabled()||void 0},get"aria-readonly"(){return e.isReadOnly()||void 0},onChange:f=>{fr(f,i.onChange),f.stopPropagation();const h=f.target;t.setIsChecked(h.checked),h.checked=t.checked()},onFocus:f=>{fr(f,i.onFocus),t.setIsFocused(!0)},onBlur:f=>{fr(f,i.onBlur),t.setIsFocused(!1)}},()=>e.dataset(),()=>t.dataset(),o))}function k9(r){const e=Kf();return D(S9,st(()=>e.dataset(),r))}function P9(r){let e;const t=`switch-${mi()}`,n=Ht({value:"on",id:t},r),[i,s,o]=Mt(n,["ref","children","value","checked","defaultChecked","onChange","onPointerDown"],b9),[a,c]=$e(),[l,u]=$e(!1),{formControlContext:f}=w9(s),h=j7({isSelected:()=>i.checked,defaultIsSelected:()=>i.defaultChecked,onSelectedChange:m=>i.onChange?.(m),isDisabled:()=>f.isDisabled(),isReadOnly:()=>f.isReadOnly()});E9(()=>e,()=>h.setIsSelected(i.defaultChecked??!1));const d=m=>{fr(m,i.onPointerDown),l()&&m.preventDefault()},g=ke(()=>({"data-checked":h.isSelected()?"":void 0})),p={value:()=>i.value,dataset:g,checked:()=>h.isSelected(),inputRef:a,generateId:To(()=>He(s.id)),toggle:()=>h.toggle(),setIsChecked:m=>h.setIsSelected(m),setIsFocused:u,setInputRef:c};return D(iR.Provider,{value:f,get children(){return D(A9.Provider,{value:p,get children(){return D(Sr,st({as:"div",ref(m){var y=dn(v=>e=v,i.ref);typeof y=="function"&&y(m)},role:"group",get id(){return He(s.id)},onPointerDown:d},()=>f.dataset(),g,o,{get children(){return D(gre,{state:p,get children(){return i.children}})}}))}})}})}function gre(r){const e=Ud(()=>{const t=r.children;return gb(t)?t(r.state):t});return Or(e)}function O9(r){const e=vc(),t=Kf(),n=Ht({id:t.generateId("thumb")},r);return D(Sr,st({as:"div"},()=>e.dataset(),()=>t.dataset(),n))}var du=Object.assign(P9,{Control:I9,Description:C9,ErrorMessage:T9,Input:R9,Label:k9,Thumb:O9}),D9=nn();function Sb(){const r=Qr(D9);if(r===void 0)throw new Error("[kobalte]: `useMeterContext` must be used within a `Meter.Root` component");return r}function mre(r){const e=Sb(),[t,n]=Mt(r,["style"]);return D(Sr,st({as:"div",get style(){return gc({"--kb-meter-fill-width":e.meterFillWidth()},t.style)}},()=>e.dataset(),n))}function yre(r){const e=Sb(),t=Ht({id:e.generateId("label")},r),[n,i]=Mt(t,["id"]);return it(()=>yt(e.registerLabelId(n.id))),D(Sr,st({as:"span",get id(){return n.id}},()=>e.dataset(),i))}function vre(r){const e=`meter-${mi()}`,t=Ht({id:e,value:0,minValue:0,maxValue:100,role:"meter",indeterminate:!1},r),[n,i]=Mt(t,["value","minValue","maxValue","getValueLabel","role","aria-valuetext","aria-labelledby","aria-valuemax","aria-valuemin","aria-valuenow","indeterminate"]),[s,o]=$e(),a=G7(()=>({style:"percent"})),c=()=>p7(n.value,n.minValue,n.maxValue),l=()=>(c()-n.minValue)/(n.maxValue-n.minValue),u=()=>{if(!n.indeterminate)return n.getValueLabel?n.getValueLabel({value:c(),min:n.minValue,max:n.maxValue}):a().format(l())},f=()=>`${Math.round(l()*100)}%`,h=ke(()=>({})),d={dataset:h,value:c,valuePercent:l,valueLabel:u,labelId:s,meterFillWidth:f,generateId:To(()=>i.id),registerLabelId:Gn(o)};return D(D9.Provider,{value:d,get children(){return D(Sr,st({as:"div",get role(){return n.role||"meter"},get"aria-valuenow"(){return Or(()=>!!n.indeterminate)()?void 0:c()},get"aria-valuemin"(){return n.minValue},get"aria-valuemax"(){return n.maxValue},get"aria-valuetext"(){return u()},get"aria-labelledby"(){return s()}},h,i))}})}function bre(r){const e=Sb();return D(Sr,st({as:"div"},()=>e.dataset(),r))}function wre(r){const e=Sb();return D(Sr,st({as:"div"},()=>e.dataset(),r,{get children(){return e.valueLabel()}}))}var Bg=Object.assign(vre,{Fill:mre,Label:yre,Track:bre,ValueLabel:wre}),xre={};mc(xre,{Fill:()=>M9,Label:()=>B9,Progress:()=>Jh,Root:()=>N9,Track:()=>L9,ValueLabel:()=>F9,useProgressContext:()=>Ng});var $9=nn();function Ng(){const r=Qr($9);if(r===void 0)throw new Error("[kobalte]: `useProgressContext` must be used within a `Progress.Root` component");return r}function M9(r){const e=Ng(),[t,n]=Mt(r,["style"]);return D(Bg.Fill,st({get style(){return gc({"--kb-progress-fill-width":e.progressFillWidth()},t.style)}},()=>e.dataset(),n))}function B9(r){const e=Ng(),t=Ht({id:e.generateId("label")},r),[n,i]=Mt(t,["id"]);return it(()=>yt(e.registerLabelId(n.id))),D(Bg.Label,st({get id(){return n.id}},()=>e.dataset(),i))}function N9(r){const e=`progress-${mi()}`,t=Ht({id:e,value:0,minValue:0,maxValue:100},r),[n,i]=Mt(t,["value","minValue","maxValue","indeterminate","getValueLabel"]),[s,o]=$e(),a=G7(()=>({style:"percent"})),c=()=>p7(n.value,n.minValue,n.maxValue),l=()=>(c()-n.minValue)/(n.maxValue-n.minValue),u=()=>{if(!n.indeterminate)return n.getValueLabel?n.getValueLabel({value:c(),min:n.minValue,max:n.maxValue}):a().format(l())},f=()=>n.indeterminate?void 0:`${Math.round(l()*100)}%`,h=ke(()=>{let g;return n.indeterminate||(g=l()===1?"complete":"loading"),{"data-progress":g,"data-indeterminate":n.indeterminate?"":void 0}}),d={dataset:h,value:c,valuePercent:l,valueLabel:u,labelId:s,progressFillWidth:f,generateId:To(()=>i.id),registerLabelId:Gn(o)};return D($9.Provider,{value:d,get children(){return D(Bg,st({role:"progressbar",get indeterminate(){return n.indeterminate||!1}},h,t))}})}function L9(r){const e=Ng();return D(Bg.Track,st(()=>e.dataset(),r))}function F9(r){const e=Ng();return D(Bg.ValueLabel,st(()=>e.dataset(),r))}var Jh=Object.assign(N9,{Fill:M9,Label:B9,Track:L9,ValueLabel:F9}),_re=ye("<option>"),Sre=ye("<div aria-hidden=true><input type=text><select tabindex=-1><option>");function Ere(r){let e;const[t,n]=Mt(r,["ref","onChange","collection","selectionManager","isOpen","isMultiple","isVirtualized","focusTrigger"]),i=vc(),[s,o]=$e(!1),a=c=>{const l=t.collection.getItem(c);return D(We,{get when(){return l?.type==="item"},get children(){var u=_re();return u.value=c,ce(u,()=>l?.textValue),ht(()=>u.selected=t.selectionManager.isSelected(c)),u}})};return it(kn(()=>t.selectionManager.selectedKeys(),(c,l)=>{l&&J7(c,l)||(o(!0),e?.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),e?.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0})))},{defer:!0})),(()=>{var c=Sre(),l=c.firstChild,u=l.nextSibling;u.firstChild,l.addEventListener("focus",()=>t.focusTrigger()),l.style.setProperty("font-size","16px"),u.addEventListener("change",h=>{fr(h,t.onChange),s()||t.selectionManager.setSelectedKeys(new Set([h.target.value])),o(!1)});var f=dn(h=>e=h,t.ref);return typeof f=="function"&&qd(f,u),bn(u,st({get multiple(){return t.isMultiple},get name(){return i.name()},get required(){return i.isRequired()},get disabled(){return i.isDisabled()},get size(){return t.collection.getSize()},get value(){return t.selectionManager.firstSelectedKey()??""}},n),!1,!0),ce(u,D(We,{get when(){return t.isVirtualized},get fallback(){return D(Lt,{get each(){return[...t.collection.getKeys()]},children:a})},get children(){return D(Lt,{get each(){return[...t.selectionManager.selectedKeys()]},children:a})}}),null),ht(h=>{var d=qT,g=t.selectionManager.isFocused()||t.isOpen?-1:0,p=i.isRequired(),m=i.isDisabled(),y=i.isReadOnly();return h.e=AT(c,d,h.e),g!==h.t&&Mr(l,"tabindex",h.t=g),p!==h.a&&(l.required=h.a=p),m!==h.o&&(l.disabled=h.o=m),y!==h.i&&(l.readOnly=h.i=y),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),c})()}var hP=new WeakMap;function Are(r){let e=hP.get(r);if(e!=null)return e;e=0;for(const t of r)t.type==="item"&&e++;return hP.set(r,e),e}var U9=class{collection;ref;collator;constructor(r,e,t){this.collection=r,this.ref=e,this.collator=t}getKeyBelow(r){let e=this.collection().getKeyAfter(r);for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyAfter(e)}}getKeyAbove(r){let e=this.collection().getKeyBefore(r);for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyBefore(e)}}getFirstKey(){let r=this.collection().getFirstKey();for(;r!=null;){const e=this.collection().getItem(r);if(e&&e.type==="item"&&!e.disabled)return r;r=this.collection().getKeyAfter(r)}}getLastKey(){let r=this.collection().getLastKey();for(;r!=null;){const e=this.collection().getItem(r);if(e&&e.type==="item"&&!e.disabled)return r;r=this.collection().getKeyBefore(r)}}getItem(r){return this.ref?.()?.querySelector(`[data-key="${r}"]`)??null}getKeyPageAbove(r){const e=this.ref?.();let t=this.getItem(r);if(!e||!t)return;const n=Math.max(0,t.offsetTop+t.offsetHeight-e.offsetHeight);let i=r;for(;i&&t&&t.offsetTop>n;)i=this.getKeyAbove(i),t=i!=null?this.getItem(i):null;return i}getKeyPageBelow(r){const e=this.ref?.();let t=this.getItem(r);if(!e||!t)return;const n=Math.min(e.scrollHeight,t.offsetTop-t.offsetHeight+e.offsetHeight);let i=r;for(;i&&t&&t.offsetTop<n;)i=this.getKeyBelow(i),t=i!=null?this.getItem(i):null;return i}getKeyForSearch(r,e){const t=this.collator?.();if(!t)return;let n=e!=null?this.getKeyBelow(e):this.getFirstKey();for(;n!=null;){const i=this.collection().getItem(n);if(i){const s=i.textValue.slice(0,r.length);if(i.textValue&&t.compare(s,r)===0)return n}n=this.getKeyBelow(n)}}};function z9(r,e,t){const n=W7({usage:"search",sensitivity:"base"}),i=ke(()=>{const s=He(r.keyboardDelegate);return s||new U9(r.collection,e,n)});return ite({selectionManager:()=>He(r.selectionManager),keyboardDelegate:i,autoFocus:()=>He(r.autoFocus),deferAutoFocus:()=>He(r.deferAutoFocus),shouldFocusWrap:()=>He(r.shouldFocusWrap),disallowEmptySelection:()=>He(r.disallowEmptySelection),selectOnFocus:()=>He(r.selectOnFocus),disallowTypeAhead:()=>He(r.disallowTypeAhead),shouldUseVirtualFocus:()=>He(r.shouldUseVirtualFocus),allowsTabNavigation:()=>He(r.allowsTabNavigation),isVirtualized:()=>He(r.isVirtualized),scrollToKey:s=>He(r.scrollToKey)?.(s),orientation:()=>He(r.orientation)},e,t)}var Ire={};mc(Ire,{Item:()=>Eb,ItemDescription:()=>Ab,ItemIndicator:()=>Ib,ItemLabel:()=>Cb,Listbox:()=>Cre,Root:()=>cR,Section:()=>Tb,useListboxContext:()=>j9});var q9=nn();function j9(){const r=Qr(q9);if(r===void 0)throw new Error("[kobalte]: `useListboxContext` must be used within a `Listbox` component");return r}var V9=nn();function aR(){const r=Qr(V9);if(r===void 0)throw new Error("[kobalte]: `useListboxItemContext` must be used within a `Listbox.Item` component");return r}function Eb(r){let e;const t=j9(),n=`${t.generateId("item")}-${mi()}`,i=Ht({id:n},r),[s,o]=Mt(i,["ref","item","aria-label","aria-labelledby","aria-describedby","onPointerMove","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[a,c]=$e(),[l,u]=$e(),f=()=>t.listState().selectionManager(),h=()=>f().focusedKey()===s.item.key,d=GT({key:()=>s.item.key,selectionManager:f,shouldSelectOnPressUp:t.shouldSelectOnPressUp,allowsDifferentPressOrigin:()=>t.shouldSelectOnPressUp()&&t.shouldFocusOnHover(),shouldUseVirtualFocus:t.shouldUseVirtualFocus,disabled:()=>s.item.disabled},()=>e),g=()=>{if(f().selectionMode()!=="none")return d.isSelected()},p=ke(()=>!($g()&&tZ())),m=()=>p()?s["aria-label"]:void 0,y=()=>p()?a():void 0,v=()=>p()?l():void 0,b=()=>{if(!t.isVirtualized())return;const C=t.listState().collection().getItem(s.item.key)?.index;return C!=null?C+1:void 0},_=()=>{if(t.isVirtualized())return Are(t.listState().collection())},x=C=>{fr(C,s.onPointerMove),C.pointerType==="mouse"&&!d.isDisabled()&&t.shouldFocusOnHover()&&(Kn(C.currentTarget),f().setFocused(!0),f().setFocusedKey(s.item.key))},E=ke(()=>({"data-disabled":d.isDisabled()?"":void 0,"data-selected":d.isSelected()?"":void 0,"data-highlighted":h()?"":void 0})),S={isSelected:d.isSelected,dataset:E,generateId:To(()=>o.id),registerLabelId:Gn(c),registerDescriptionId:Gn(u)};return D(V9.Provider,{value:S,get children(){return D(Sr,st({as:"li",ref(C){var k=dn($=>e=$,s.ref);typeof k=="function"&&k(C)},role:"option",get tabIndex(){return d.tabIndex()},get"aria-disabled"(){return d.isDisabled()},get"aria-selected"(){return g()},get"aria-label"(){return m()},get"aria-labelledby"(){return y()},get"aria-describedby"(){return v()},get"aria-posinset"(){return b()},get"aria-setsize"(){return _()},get"data-key"(){return d.dataKey()},get onPointerDown(){return on([s.onPointerDown,d.onPointerDown])},get onPointerUp(){return on([s.onPointerUp,d.onPointerUp])},get onClick(){return on([s.onClick,d.onClick])},get onKeyDown(){return on([s.onKeyDown,d.onKeyDown])},get onMouseDown(){return on([s.onMouseDown,d.onMouseDown])},get onFocus(){return on([s.onFocus,d.onFocus])},onPointerMove:x},E,o))}})}function Ab(r){const e=aR(),t=Ht({id:e.generateId("description")},r);return it(()=>yt(e.registerDescriptionId(t.id))),D(Sr,st({as:"div"},()=>e.dataset(),t))}function Ib(r){const e=aR(),t=Ht({id:e.generateId("indicator")},r),[n,i]=Mt(t,["forceMount"]);return D(We,{get when(){return n.forceMount||e.isSelected()},get children(){return D(Sr,st({as:"div","aria-hidden":"true"},()=>e.dataset(),i))}})}function Cb(r){const e=aR(),t=Ht({id:e.generateId("label")},r);return it(()=>yt(e.registerLabelId(t.id))),D(Sr,st({as:"div"},()=>e.dataset(),t))}function cR(r){let e;const t=`listbox-${mi()}`,n=Ht({id:t,selectionMode:"single",virtualized:!1},r),[i,s]=Mt(n,["ref","children","renderItem","renderSection","value","defaultValue","onChange","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","state","keyboardDelegate","autoFocus","selectionMode","shouldFocusWrap","shouldUseVirtualFocus","shouldSelectOnPressUp","shouldFocusOnHover","allowDuplicateSelectionEvents","disallowEmptySelection","selectionBehavior","selectOnFocus","disallowTypeAhead","allowsTabNavigation","virtualized","scrollToItem","scrollRef","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),o=ke(()=>i.state?i.state:YT({selectedKeys:()=>i.value,defaultSelectedKeys:()=>i.defaultValue,onSelectionChange:i.onChange,allowDuplicateSelectionEvents:()=>He(i.allowDuplicateSelectionEvents),disallowEmptySelection:()=>He(i.disallowEmptySelection),selectionBehavior:()=>He(i.selectionBehavior),selectionMode:()=>He(i.selectionMode),dataSource:()=>i.options??[],getKey:()=>i.optionValue,getTextValue:()=>i.optionTextValue,getDisabled:()=>i.optionDisabled,getSectionChildren:()=>i.optionGroupChildren})),a=z9({selectionManager:()=>o().selectionManager(),collection:()=>o().collection(),autoFocus:()=>He(i.autoFocus),shouldFocusWrap:()=>He(i.shouldFocusWrap),keyboardDelegate:()=>i.keyboardDelegate,disallowEmptySelection:()=>He(i.disallowEmptySelection),selectOnFocus:()=>He(i.selectOnFocus),disallowTypeAhead:()=>He(i.disallowTypeAhead),shouldUseVirtualFocus:()=>He(i.shouldUseVirtualFocus),allowsTabNavigation:()=>He(i.allowsTabNavigation),isVirtualized:()=>i.virtualized,scrollToKey:()=>i.scrollToItem},()=>e,()=>i.scrollRef?.()),c={listState:o,generateId:To(()=>s.id),shouldUseVirtualFocus:()=>n.shouldUseVirtualFocus,shouldSelectOnPressUp:()=>n.shouldSelectOnPressUp,shouldFocusOnHover:()=>n.shouldFocusOnHover,isVirtualized:()=>i.virtualized};return D(q9.Provider,{value:c,get children(){return D(Sr,st({as:"ul",ref(l){var u=dn(f=>e=f,i.ref);typeof u=="function"&&u(l)},role:"listbox",get tabIndex(){return a.tabIndex()},get"aria-multiselectable"(){return o().selectionManager().selectionMode()==="multiple"?!0:void 0},get onKeyDown(){return on([i.onKeyDown,a.onKeyDown])},get onMouseDown(){return on([i.onMouseDown,a.onMouseDown])},get onFocusIn(){return on([i.onFocusIn,a.onFocusIn])},get onFocusOut(){return on([i.onFocusOut,a.onFocusOut])}},s,{get children(){return D(We,{get when(){return!i.virtualized},get fallback(){return i.children?.(o().collection)},get children(){return D(KQ,{get each(){return[...o().collection()]},by:"key",children:l=>D(yr,{get children(){return[D(Ne,{get when(){return l().type==="section"},get children(){return i.renderSection?.(l())}}),D(Ne,{get when(){return l().type==="item"},get children(){return i.renderItem?.(l())}})]}})})}})}}))}})}function Tb(r){return D(Sr,st({as:"li",role:"presentation"},r))}var Cre=Object.assign(cR,{Item:Eb,ItemDescription:Ab,ItemIndicator:Ib,ItemLabel:Cb,Section:Tb}),Tre={};mc(Tre,{Arrow:()=>Vf,Content:()=>H9,Description:()=>sR,ErrorMessage:()=>oR,HiddenSelect:()=>W9,Icon:()=>G9,Item:()=>Eb,ItemDescription:()=>Ab,ItemIndicator:()=>Ib,ItemLabel:()=>Cb,Label:()=>Y9,Listbox:()=>X9,Portal:()=>J9,Root:()=>Q9,Section:()=>Tb,Select:()=>Ga,Trigger:()=>Z9,Value:()=>ez,useSelectContext:()=>gl});var K9=nn();function gl(){const r=Qr(K9);if(r===void 0)throw new Error("[kobalte]: `useSelectContext` must be used within a `Select` component");return r}function H9(r){let e;const t=gl(),[n,i]=Mt(r,["ref","style","onCloseAutoFocus","onFocusOutside"]),s=a=>{t.close()},o=a=>{n.onFocusOutside?.(a),t.isOpen()&&t.isModal()&&a.preventDefault()};return KT({isDisabled:()=>!(t.isOpen()&&t.isModal()),targets:()=>e?[e]:[]}),HT({element:()=>e??null,enabled:()=>t.contentPresent()&&t.preventScroll()}),VT({trapFocus:()=>t.isOpen()&&t.isModal(),onMountAutoFocus:a=>{a.preventDefault()},onUnmountAutoFocus:a=>{n.onCloseAutoFocus?.(a),a.defaultPrevented||(Kn(t.triggerRef()),a.preventDefault())}},()=>e),D(We,{get when(){return t.contentPresent()},get children(){return D(Yd.Positioner,{get children(){return D(mb,st({ref(a){var c=dn(l=>{t.setContentRef(l),e=l},n.ref);typeof c=="function"&&c(a)},get disableOutsidePointerEvents(){return Or(()=>!!t.isModal())()&&t.isOpen()},get excludedElements(){return[t.triggerRef]},get style(){return gc({"--kb-select-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},n.style)},onEscapeKeyDown:s,onFocusOutside:o,get onDismiss(){return t.close}},()=>t.dataset(),i))}})}})}function W9(r){const e=gl();return D(Ere,st({get collection(){return e.listState().collection()},get selectionManager(){return e.listState().selectionManager()},get isOpen(){return e.isOpen()},get isMultiple(){return e.isMultiple()},get isVirtualized(){return e.isVirtualized()},focusTrigger:()=>e.triggerRef()?.focus()},r))}function G9(r){const e=gl(),t=Ht({children:""},r);return D(Sr,st({as:"span","aria-hidden":"true"},()=>e.dataset(),t))}function Y9(r){const e=gl(),[t,n]=Mt(r,["onClick"]);return D(S9,st({as:"span",onClick:s=>{fr(s,t.onClick),e.isDisabled()||e.triggerRef()?.focus()}},n))}function X9(r){const e=gl(),t=Ht({id:e.generateId("listbox")},r),[n,i]=Mt(t,["ref","id","onKeyDown"]);return it(()=>yt(e.registerListboxId(n.id))),D(cR,st({ref(o){var a=dn(e.setListboxRef,n.ref);typeof a=="function"&&a(o)},get id(){return n.id},get state(){return e.listState()},get virtualized(){return e.isVirtualized()},get autoFocus(){return e.autoFocus()},shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,get shouldFocusWrap(){return e.shouldFocusWrap()},get disallowTypeAhead(){return e.disallowTypeAhead()},get"aria-labelledby"(){return e.listboxAriaLabelledBy()},get renderItem(){return e.renderItem},get renderSection(){return e.renderSection},onKeyDown:o=>{fr(o,n.onKeyDown),o.key==="Escape"&&o.preventDefault()}},i))}function J9(r){const e=gl();return D(We,{get when(){return e.contentPresent()},get children(){return D(hb,r)}})}function Rre(r){const e=`select-${mi()}`,t=Ht({id:e,selectionMode:"single",disallowEmptySelection:!1,closeOnSelection:r.selectionMode==="single",allowDuplicateSelectionEvents:!0,gutter:8,sameWidth:!0,modal:!1},r),[n,i,s,o]=Mt(t,["itemComponent","sectionComponent","open","defaultOpen","onOpenChange","value","defaultValue","onChange","placeholder","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","keyboardDelegate","allowDuplicateSelectionEvents","disallowEmptySelection","closeOnSelection","disallowTypeAhead","shouldFocusWrap","selectionBehavior","selectionMode","virtualized","modal","preventScroll","forceMount"],["getAnchorRect","placement","gutter","shift","flip","slide","overlap","sameWidth","fitViewport","hideWhenDetached","detachedPadding","arrowPadding","overflowPadding"],b9),[a,c]=$e(),[l,u]=$e(),[f,h]=$e(),[d,g]=$e(),[p,m]=$e(),[y,v]=$e(),[b,_]=$e(),[x,E]=$e(!0),S=Z=>{const oe=n.optionValue;return oe==null?String(Z):String(gb(oe)?oe(Z):Z[oe])},C=ke(()=>{const Z=n.optionGroupChildren;return Z==null?n.options:n.options.flatMap(oe=>oe[Z]??oe)}),k=ke(()=>C().map(Z=>S(Z))),$=Z=>[...Z].map(oe=>C().find(he=>S(he)===oe)).filter(oe=>oe!=null),J=jd({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:Z=>n.onOpenChange?.(Z)}),j=YT({selectedKeys:()=>n.value!=null?n.value.map(S):n.value,defaultSelectedKeys:()=>n.defaultValue!=null?n.defaultValue.map(S):n.defaultValue,onSelectionChange:Z=>{n.onChange?.($(Z)),n.closeOnSelection&&z()},allowDuplicateSelectionEvents:()=>He(n.allowDuplicateSelectionEvents),disallowEmptySelection:()=>He(n.disallowEmptySelection),selectionBehavior:()=>He(n.selectionBehavior),selectionMode:()=>n.selectionMode,dataSource:()=>n.options??[],getKey:()=>n.optionValue,getTextValue:()=>n.optionTextValue,getDisabled:()=>n.optionDisabled,getSectionChildren:()=>n.optionGroupChildren}),L=ke(()=>$(j.selectionManager().selectedKeys())),w=Z=>{j.selectionManager().toggleSelection(S(Z))},{present:R}=yd({show:()=>n.forceMount||J.isOpen(),element:()=>p()??null}),N=()=>{const Z=y();Z&&Kn(Z)},Y=Z=>{if(n.options.length<=0)return;E(Z),J.open();let oe=j.selectionManager().firstSelectedKey();oe==null&&(Z==="first"?oe=j.collection().getFirstKey():Z==="last"&&(oe=j.collection().getLastKey())),N(),j.selectionManager().setFocused(!0),j.selectionManager().setFocusedKey(oe)},z=()=>{J.close(),j.selectionManager().setFocused(!1),j.selectionManager().setFocusedKey(void 0)},G=Z=>{J.isOpen()?z():Y(Z)},{formControlContext:te}=w9(s);E9(d,()=>{const Z=n.defaultValue?[...n.defaultValue].map(S):new tc;j.selectionManager().setSelectedKeys(Z)});const X=W7({usage:"search",sensitivity:"base"}),T=ke(()=>{const Z=He(n.keyboardDelegate);return Z||new U9(j.collection,void 0,X)}),A=Z=>n.itemComponent?.({item:Z}),O=Z=>n.sectionComponent?.({section:Z});it(kn([k],([Z])=>{const he=[...j.selectionManager().selectedKeys()].filter(re=>Z.includes(re));j.selectionManager().setSelectedKeys(he)},{defer:!0}));const I=ke(()=>({"data-expanded":J.isOpen()?"":void 0,"data-closed":J.isOpen()?void 0:""})),U={dataset:I,isOpen:J.isOpen,isDisabled:()=>te.isDisabled()??!1,isMultiple:()=>He(n.selectionMode)==="multiple",isVirtualized:()=>n.virtualized??!1,isModal:()=>n.modal??!1,preventScroll:()=>n.preventScroll??U.isModal(),disallowTypeAhead:()=>n.disallowTypeAhead??!1,shouldFocusWrap:()=>n.shouldFocusWrap??!1,selectedOptions:L,contentPresent:R,autoFocus:x,triggerRef:d,listState:()=>j,keyboardDelegate:T,triggerId:a,valueId:l,listboxId:f,listboxAriaLabelledBy:b,setListboxAriaLabelledBy:_,setTriggerRef:g,setContentRef:m,setListboxRef:v,open:Y,close:z,toggle:G,placeholder:()=>n.placeholder,renderItem:A,renderSection:O,removeOptionFromSelection:w,generateId:To(()=>He(s.id)),registerTriggerId:Gn(c),registerValueId:Gn(u),registerListboxId:Gn(h)};return D(iR.Provider,{value:te,get children(){return D(K9.Provider,{value:U,get children(){return D(Yd,st({anchorRef:d,contentRef:p},i,{get children(){return D(Sr,st({as:"div",role:"group",get id(){return He(s.id)}},()=>te.dataset(),I,o))}}))}})}})}function Q9(r){const[e,t]=Mt(r,["value","defaultValue","onChange","multiple"]),n=ke(()=>e.value!=null?e.multiple?e.value:[e.value]:e.value),i=ke(()=>e.defaultValue!=null?e.multiple?e.defaultValue:[e.defaultValue]:e.defaultValue);return D(Rre,st({get value(){return n()},get defaultValue(){return i()},onChange:o=>{e.multiple?e.onChange?.(o??[]):e.onChange?.(o[0]??null)},get selectionMode(){return e.multiple?"multiple":"single"}},t))}function Z9(r){const e=vc(),t=gl(),n=Ht({id:t.generateId("trigger")},r),[i,s,o]=Mt(n,["ref","disabled","onPointerDown","onClick","onKeyDown","onFocus","onBlur"],x9),a=()=>t.listState().selectionManager(),c=()=>t.keyboardDelegate(),l=()=>i.disabled||t.isDisabled(),{fieldProps:u}=_9(s),{typeSelectHandlers:f}=Q7({keyboardDelegate:c,selectionManager:a,onTypeSelect:v=>a().select(v)}),h=()=>[t.listboxAriaLabelledBy(),t.valueId()].filter(Boolean).join(" ")||void 0,d=v=>{fr(v,i.onPointerDown),v.currentTarget.dataset.pointerType=v.pointerType,!l()&&v.pointerType!=="touch"&&v.button===0&&(v.preventDefault(),t.toggle(!0))},g=v=>{fr(v,i.onClick),!l()&&v.currentTarget.dataset.pointerType==="touch"&&t.toggle(!0)},p=v=>{if(fr(v,i.onKeyDown),!l())switch(fr(v,f.onKeyDown),v.key){case"Enter":case" ":case"ArrowDown":v.stopPropagation(),v.preventDefault(),t.toggle("first");break;case"ArrowUp":v.stopPropagation(),v.preventDefault(),t.toggle("last");break;case"ArrowLeft":{if(v.preventDefault(),t.isMultiple())return;const b=a().firstSelectedKey(),_=b!=null?c().getKeyAbove?.(b):c().getFirstKey?.();_!=null&&a().select(_);break}case"ArrowRight":{if(v.preventDefault(),t.isMultiple())return;const b=a().firstSelectedKey(),_=b!=null?c().getKeyBelow?.(b):c().getFirstKey?.();_!=null&&a().select(_);break}}},m=v=>{fr(v,i.onFocus),!a().isFocused()&&a().setFocused(!0)},y=v=>{fr(v,i.onBlur),!t.isOpen()&&a().setFocused(!1)};return it(()=>yt(t.registerTriggerId(u.id()))),it(()=>{t.setListboxAriaLabelledBy([u.ariaLabelledBy(),u.ariaLabel()&&!u.ariaLabelledBy()?u.id():null].filter(Boolean).join(" ")||void 0)}),D(qf,st({ref(v){var b=dn(t.setTriggerRef,i.ref);typeof b=="function"&&b(v)},get id(){return u.id()},get disabled(){return l()},"aria-haspopup":"listbox",get"aria-expanded"(){return t.isOpen()},get"aria-controls"(){return Or(()=>!!t.isOpen())()?t.listboxId():void 0},get"aria-label"(){return u.ariaLabel()},get"aria-labelledby"(){return h()},get"aria-describedby"(){return u.ariaDescribedBy()},onPointerDown:d,onClick:g,onKeyDown:p,onFocus:m,onBlur:y},()=>t.dataset(),()=>e.dataset(),o))}function ez(r){const e=vc(),t=gl(),n=Ht({id:t.generateId("value")},r),[i,s]=Mt(n,["id","children"]),o=()=>t.listState().selectionManager(),a=()=>{const c=o().selectedKeys();return c.size===1&&c.has("")?!0:o().isEmpty()};return it(()=>yt(t.registerValueId(i.id))),D(Sr,st({as:"span",get id(){return i.id},get"data-placeholder-shown"(){return a()?"":void 0}},()=>e.dataset(),s,{get children(){return D(We,{get when(){return!a()},get fallback(){return t.placeholder()},get children(){return D(kre,{state:{selectedOption:()=>t.selectedOptions()[0],selectedOptions:()=>t.selectedOptions(),remove:c=>t.removeOptionFromSelection(c),clear:()=>o().clearSelection()},get children(){return i.children}})}})}}))}function kre(r){const e=Ud(()=>{const t=r.children;return gb(t)?t(r.state):t});return Or(e)}var Ga=Object.assign(Q9,{Arrow:Vf,Content:H9,Description:sR,ErrorMessage:oR,HiddenSelect:W9,Icon:G9,Item:Eb,ItemDescription:Ab,ItemIndicator:Ib,ItemLabel:Cb,Label:Y9,Listbox:X9,Portal:J9,Section:Tb,Trigger:Z9,Value:ez}),Pre=nn();function Rb(){return Qr(Pre)}var Ore=nn();function tz(){return Qr(Ore)}var rz=nn();function nz(){return Qr(rz)}function ml(){const r=nz();if(r===void 0)throw new Error("[kobalte]: `useMenuContext` must be used within a `Menu` component");return r}var iz=nn();function lR(){const r=Qr(iz);if(r===void 0)throw new Error("[kobalte]: `useMenuItemContext` must be used within a `Menu.Item` component");return r}var sz=nn();function bc(){const r=Qr(sz);if(r===void 0)throw new Error("[kobalte]: `useMenuRootContext` must be used within a `MenuRoot` component");return r}function uR(r){let e;const t=bc(),n=ml(),i=Ht({id:t.generateId(`item-${mi()}`)},r),[s,o]=Mt(i,["ref","textValue","disabled","closeOnSelect","checked","indeterminate","onSelect","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[a,c]=$e(),[l,u]=$e(),[f,h]=$e(),d=()=>n.listState().selectionManager(),g=()=>o.id,p=()=>d().focusedKey()===g(),m=()=>{s.onSelect?.(),s.closeOnSelect&&setTimeout(()=>{n.close(!0)})};dte({getItem:()=>({ref:()=>e,type:"item",key:g(),textValue:s.textValue??f()?.textContent??e?.textContent??"",disabled:s.disabled??!1})});const y=GT({key:g,selectionManager:d,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>e),v=k=>{fr(k,s.onPointerMove),k.pointerType==="mouse"&&(s.disabled?n.onItemLeave(k):(n.onItemEnter(k),k.defaultPrevented||(Kn(k.currentTarget),n.listState().selectionManager().setFocused(!0),n.listState().selectionManager().setFocusedKey(g()))))},b=k=>{fr(k,s.onPointerLeave),k.pointerType==="mouse"&&n.onItemLeave(k)},_=k=>{fr(k,s.onPointerUp),!s.disabled&&k.button===0&&m()},x=k=>{if(fr(k,s.onKeyDown),!k.repeat&&!s.disabled)switch(k.key){case"Enter":case" ":m();break}},E=ke(()=>{if(s.indeterminate)return"mixed";if(s.checked!=null)return s.checked}),S=ke(()=>({"data-indeterminate":s.indeterminate?"":void 0,"data-checked":s.checked&&!s.indeterminate?"":void 0,"data-disabled":s.disabled?"":void 0,"data-highlighted":p()?"":void 0})),C={isChecked:()=>s.checked,dataset:S,setLabelRef:h,generateId:To(()=>o.id),registerLabel:Gn(c),registerDescription:Gn(u)};return D(iz.Provider,{value:C,get children(){return D(Sr,st({as:"div",ref(k){var $=dn(J=>e=J,s.ref);typeof $=="function"&&$(k)},get tabIndex(){return y.tabIndex()},get"aria-checked"(){return E()},get"aria-disabled"(){return s.disabled},get"aria-labelledby"(){return a()},get"aria-describedby"(){return l()},get"data-key"(){return y.dataKey()},get onPointerDown(){return on([s.onPointerDown,y.onPointerDown])},get onPointerUp(){return on([_,y.onPointerUp])},get onClick(){return on([s.onClick,y.onClick])},get onKeyDown(){return on([x,y.onKeyDown])},get onMouseDown(){return on([s.onMouseDown,y.onMouseDown])},get onFocus(){return on([s.onFocus,y.onFocus])},onPointerMove:v,onPointerLeave:b},S,o))}})}function oz(r){const e=Ht({closeOnSelect:!1},r),[t,n]=Mt(e,["checked","defaultChecked","onChange","onSelect"]),i=j7({isSelected:()=>t.checked,defaultIsSelected:()=>t.defaultChecked,onSelectedChange:o=>t.onChange?.(o),isDisabled:()=>n.disabled});return D(uR,st({role:"menuitemcheckbox",get checked(){return i.isSelected()},onSelect:()=>{t.onSelect?.(),i.toggle()}},n))}var ng={next:(r,e)=>r==="ltr"?e==="horizontal"?"ArrowRight":"ArrowDown":e==="horizontal"?"ArrowLeft":"ArrowUp",previous:(r,e)=>ng.next(r==="ltr"?"rtl":"ltr",e)},dP={first:r=>r==="horizontal"?"ArrowDown":"ArrowRight",last:r=>r==="horizontal"?"ArrowUp":"ArrowLeft"};function az(r){const e=bc(),t=ml(),n=Rb(),{direction:i}=pl(),s=Ht({id:e.generateId("trigger")},r),[o,a]=Mt(s,["ref","id","disabled","onPointerDown","onClick","onKeyDown","onMouseOver","onFocus"]);let c=()=>e.value();n!==void 0&&(c=()=>e.value()??o.id,n.lastValue()===void 0&&n.setLastValue(c));const l=vb(()=>t.triggerRef(),()=>"button"),u=ke(()=>l()==="a"&&t.triggerRef()?.getAttribute("href")!=null);it(kn(()=>n?.value(),y=>{u()&&y===c()&&t.triggerRef()?.focus()}));const f=()=>{n!==void 0?t.isOpen()?n.value()===c()&&n.closeMenu():(n.autoFocusMenu()||n.setAutoFocusMenu(!0),t.open(!1)):t.toggle(!0)},h=y=>{fr(y,o.onPointerDown),y.currentTarget.dataset.pointerType=y.pointerType,!o.disabled&&y.pointerType!=="touch"&&y.button===0&&f()},d=y=>{fr(y,o.onClick),o.disabled||y.currentTarget.dataset.pointerType==="touch"&&f()},g=y=>{if(fr(y,o.onKeyDown),!o.disabled){if(u())switch(y.key){case"Enter":case" ":return}switch(y.key){case"Enter":case" ":case dP.first(e.orientation()):y.stopPropagation(),y.preventDefault(),mZ(y.currentTarget),t.open("first"),n?.setAutoFocusMenu(!0),n?.setValue(c);break;case dP.last(e.orientation()):y.stopPropagation(),y.preventDefault(),t.open("last");break;case ng.next(i(),e.orientation()):if(n===void 0)break;y.stopPropagation(),y.preventDefault(),n.nextMenu();break;case ng.previous(i(),e.orientation()):if(n===void 0)break;y.stopPropagation(),y.preventDefault(),n.previousMenu();break}}},p=y=>{fr(y,o.onMouseOver),t.triggerRef()?.dataset.pointerType!=="touch"&&!o.disabled&&n!==void 0&&n.value()!==void 0&&n.setValue(c)},m=y=>{fr(y,o.onFocus),n!==void 0&&y.currentTarget.dataset.pointerType!=="touch"&&n.setValue(c)};return it(()=>yt(t.registerTriggerId(o.id))),D(qf,st({ref(y){var v=dn(t.setTriggerRef,o.ref);typeof v=="function"&&v(y)},get"data-kb-menu-value-trigger"(){return e.value()},get id(){return o.id},get disabled(){return o.disabled},"aria-haspopup":"true",get"aria-expanded"(){return t.isOpen()},get"aria-controls"(){return Or(()=>!!t.isOpen())()?t.contentId():void 0},get"data-highlighted"(){return c()!==void 0&&n?.value()===c()?!0:void 0},get tabIndex(){return n!==void 0?n.value()===c()||n.lastValue()===c()?0:-1:void 0},onPointerDown:h,onMouseOver:p,onClick:d,onKeyDown:g,onFocus:m,role:n!==void 0?"menuitem":void 0},()=>t.dataset(),a))}function cz(r){let e;const t=bc(),n=ml(),i=Rb(),s=tz(),{direction:o}=pl(),a=Ht({id:t.generateId(`content-${mi()}`)},r),[c,l]=Mt(a,["ref","id","style","onOpenAutoFocus","onCloseAutoFocus","onEscapeKeyDown","onFocusOutside","onPointerEnter","onPointerMove","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]);let u=0;const f=()=>n.parentMenuContext()==null&&i===void 0&&t.isModal(),h=z9({selectionManager:n.listState().selectionManager,collection:n.listState().collection,autoFocus:n.autoFocus,deferAutoFocus:!0,shouldFocusWrap:!0,disallowTypeAhead:()=>!n.listState().selectionManager().isFocused(),orientation:()=>t.orientation()==="horizontal"?"vertical":"horizontal"},()=>e);VT({trapFocus:()=>f()&&n.isOpen(),onMountAutoFocus:b=>{i===void 0&&c.onOpenAutoFocus?.(b)},onUnmountAutoFocus:c.onCloseAutoFocus},()=>e);const d=b=>{if(is(b.currentTarget,b.target)&&(b.key==="Tab"&&n.isOpen()&&b.preventDefault(),i!==void 0&&b.currentTarget.getAttribute("aria-haspopup")!=="true"))switch(b.key){case ng.next(o(),t.orientation()):b.stopPropagation(),b.preventDefault(),n.close(!0),i.setAutoFocusMenu(!0),i.nextMenu();break;case ng.previous(o(),t.orientation()):if(b.currentTarget.hasAttribute("data-closed"))break;b.stopPropagation(),b.preventDefault(),n.close(!0),i.setAutoFocusMenu(!0),i.previousMenu();break}},g=b=>{c.onEscapeKeyDown?.(b),i?.setAutoFocusMenu(!1),n.close(!0)},p=b=>{c.onFocusOutside?.(b),t.isModal()&&b.preventDefault()},m=b=>{fr(b,c.onPointerEnter),n.isOpen()&&(n.parentMenuContext()?.listState().selectionManager().setFocused(!1),n.parentMenuContext()?.listState().selectionManager().setFocusedKey(void 0))},y=b=>{if(fr(b,c.onPointerMove),b.pointerType!=="mouse")return;const _=b.target,x=u!==b.clientX;is(b.currentTarget,_)&&x&&(n.setPointerDir(b.clientX>u?"right":"left"),u=b.clientX)};it(()=>yt(n.registerContentId(c.id))),yt(()=>n.setContentRef(void 0));const v={ref:dn(b=>{n.setContentRef(b),e=b},c.ref),role:"menu",get id(){return c.id},get tabIndex(){return h.tabIndex()},get"aria-labelledby"(){return n.triggerId()},onKeyDown:on([c.onKeyDown,h.onKeyDown,d]),onMouseDown:on([c.onMouseDown,h.onMouseDown]),onFocusIn:on([c.onFocusIn,h.onFocusIn]),onFocusOut:on([c.onFocusOut,h.onFocusOut]),onPointerEnter:m,onPointerMove:y,get"data-orientation"(){return t.orientation()}};return D(We,{get when(){return n.contentPresent()},get children(){return D(We,{get when(){return s===void 0||n.parentMenuContext()!=null},get fallback(){return D(Sr,st({as:"div"},()=>n.dataset(),v,l))},get children(){return D(Yd.Positioner,{get children(){return D(mb,st({get disableOutsidePointerEvents(){return Or(()=>!!f())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},bypassTopMostLayerCheck:!0,get style(){return gc({"--kb-menu-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},c.style)},onEscapeKeyDown:g,onFocusOutside:p,get onDismiss(){return n.close}},()=>n.dataset(),v,l))}})}})}})}function Dre(r){let e;const t=bc(),n=ml(),[i,s]=Mt(r,["ref"]);return HT({element:()=>e??null,enabled:()=>n.contentPresent()&&t.preventScroll()}),D(cz,st({ref(o){var a=dn(c=>{e=c},i.ref);typeof a=="function"&&a(o)}},s))}var lz=nn();function $re(){const r=Qr(lz);if(r===void 0)throw new Error("[kobalte]: `useMenuGroupContext` must be used within a `Menu.Group` component");return r}function fR(r){const e=bc(),t=Ht({id:e.generateId(`group-${mi()}`)},r),[n,i]=$e(),s={generateId:To(()=>t.id),registerLabelId:Gn(i)};return D(lz.Provider,{value:s,get children(){return D(Sr,st({as:"div",role:"group",get"aria-labelledby"(){return n()}},t))}})}function uz(r){const e=$re(),t=Ht({id:e.generateId("label")},r),[n,i]=Mt(t,["id"]);return it(()=>yt(e.registerLabelId(n.id))),D(Sr,st({as:"span",get id(){return n.id},"aria-hidden":"true"},i))}function fz(r){const e=ml(),t=Ht({children:""},r);return D(Sr,st({as:"span","aria-hidden":"true"},()=>e.dataset(),t))}function hz(r){return D(uR,st({role:"menuitem",closeOnSelect:!0},r))}function dz(r){const e=lR(),t=Ht({id:e.generateId("description")},r),[n,i]=Mt(t,["id"]);return it(()=>yt(e.registerDescription(n.id))),D(Sr,st({as:"div",get id(){return n.id}},()=>e.dataset(),i))}function pz(r){const e=lR(),t=Ht({id:e.generateId("indicator")},r),[n,i]=Mt(t,["forceMount"]);return D(We,{get when(){return n.forceMount||e.isChecked()},get children(){return D(Sr,st({as:"div"},()=>e.dataset(),i))}})}function gz(r){const e=lR(),t=Ht({id:e.generateId("label")},r),[n,i]=Mt(t,["ref","id"]);return it(()=>yt(e.registerLabel(n.id))),D(Sr,st({as:"div",ref(s){var o=dn(e.setLabelRef,n.ref);typeof o=="function"&&o(s)},get id(){return n.id}},()=>e.dataset(),i))}function mz(r){const e=ml();return D(We,{get when(){return e.contentPresent()},get children(){return D(hb,r)}})}var yz=nn();function Mre(){const r=Qr(yz);if(r===void 0)throw new Error("[kobalte]: `useMenuRadioGroupContext` must be used within a `Menu.RadioGroup` component");return r}function vz(r){const t=bc().generateId(`radiogroup-${mi()}`),n=Ht({id:t},r),[i,s]=Mt(n,["value","defaultValue","onChange","disabled"]),[o,a]=yb({value:()=>i.value,defaultValue:()=>i.defaultValue,onChange:l=>i.onChange?.(l)}),c={isDisabled:()=>i.disabled,isSelectedValue:l=>l===o(),setSelectedValue:l=>a(l)};return D(yz.Provider,{value:c,get children(){return D(fR,s)}})}function bz(r){const e=Mre(),t=Ht({closeOnSelect:!1},r),[n,i]=Mt(t,["value","onSelect"]);return D(uR,st({role:"menuitemradio",get checked(){return e.isSelectedValue(n.value)},onSelect:()=>{n.onSelect?.(),e.setSelectedValue(n.value)}},i))}function Bre(r,e,t){const n=r.split("-")[0],i=t.getBoundingClientRect(),s=[],o=e.clientX,a=e.clientY;switch(n){case"top":s.push([o,a+5]),s.push([i.left,i.bottom]),s.push([i.left,i.top]),s.push([i.right,i.top]),s.push([i.right,i.bottom]);break;case"right":s.push([o-5,a]),s.push([i.left,i.top]),s.push([i.right,i.top]),s.push([i.right,i.bottom]),s.push([i.left,i.bottom]);break;case"bottom":s.push([o,a-5]),s.push([i.right,i.top]),s.push([i.right,i.bottom]),s.push([i.left,i.bottom]),s.push([i.left,i.top]);break;case"left":s.push([o+5,a]),s.push([i.right,i.bottom]),s.push([i.left,i.bottom]),s.push([i.left,i.top]),s.push([i.right,i.top]);break}return s}function Nre(r,e){return e?g7([r.clientX,r.clientY],e):!1}function wz(r){const e=bc(),t=e9(),n=nz(),i=Rb(),s=tz(),o=Ht({placement:e.orientation()==="horizontal"?"bottom-start":"right-start"},r),[a,c]=Mt(o,["open","defaultOpen","onOpenChange"]);let l=0,u=null,f="right";const[h,d]=$e(),[g,p]=$e(),[m,y]=$e(),[v,b]=$e(),[_,x]=$e(!0),[E,S]=$e(c.placement),[C,k]=$e([]),[$,J]=$e([]),{DomCollectionProvider:j}=hte({items:$,onItemsChange:J}),L=jd({open:()=>a.open,defaultOpen:()=>a.defaultOpen,onOpenChange:oe=>a.onOpenChange?.(oe)}),{present:w}=yd({show:()=>e.forceMount()||L.isOpen(),element:()=>v()??null}),R=YT({selectionMode:"none",dataSource:$}),N=oe=>{x(oe),L.open()},Y=(oe=!1)=>{L.close(),oe&&n&&n.close(!0)},z=oe=>{x(oe),L.toggle()},G=()=>{const oe=v();oe&&(Kn(oe),R.selectionManager().setFocused(!0),R.selectionManager().setFocusedKey(void 0))},te=()=>{s!=null?setTimeout(()=>G()):G()},X=oe=>{k(re=>[...re,oe]);const he=n?.registerNestedMenu(oe);return()=>{k(re=>pA(re,oe)),he?.()}},T=oe=>f===u?.side&&Nre(oe,u?.area),A=oe=>{T(oe)&&oe.preventDefault()},O=oe=>{T(oe)||te()},I=oe=>{T(oe)&&oe.preventDefault()};KT({isDisabled:()=>!(n==null&&L.isOpen()&&e.isModal()),targets:()=>[v(),...C()].filter(Boolean)}),it(()=>{const oe=v();if(!oe||!n)return;const he=n.registerNestedMenu(oe);yt(()=>{he()})}),it(()=>{n===void 0&&i?.registerMenu(e.value(),[v(),...C()])}),it(()=>{n!==void 0||i===void 0||(i.value()===e.value()?(m()?.focus(),i.autoFocusMenu()&&N(!0)):Y())}),it(()=>{n!==void 0||i===void 0||L.isOpen()&&i.setValue(e.value())}),yt(()=>{n===void 0&&i?.unregisterMenu(e.value())});const Z={dataset:ke(()=>({"data-expanded":L.isOpen()?"":void 0,"data-closed":L.isOpen()?void 0:""})),isOpen:L.isOpen,contentPresent:w,nestedMenus:C,currentPlacement:E,pointerGraceTimeoutId:()=>l,autoFocus:_,listState:()=>R,parentMenuContext:()=>n,triggerRef:m,contentRef:v,triggerId:h,contentId:g,setTriggerRef:y,setContentRef:b,open:N,close:Y,toggle:z,focusContent:te,onItemEnter:A,onItemLeave:O,onTriggerLeave:I,setPointerDir:oe=>f=oe,setPointerGraceTimeoutId:oe=>l=oe,setPointerGraceIntent:oe=>u=oe,registerNestedMenu:X,registerItemToParentDomCollection:t?.registerItem,registerTriggerId:Gn(d),registerContentId:Gn(p)};return D(j,{get children(){return D(rz.Provider,{value:Z,get children(){return D(We,{when:s===void 0,get fallback(){return c.children},get children(){return D(Yd,st({anchorRef:m,contentRef:v,onCurrentPlacementChange:S},c))}})}})}})}function xz(r){const{direction:e}=pl();return D(wz,st({get placement(){return e()==="rtl"?"left-start":"right-start"},flip:!0},r))}var Lre={close:(r,e)=>r==="ltr"?[e==="horizontal"?"ArrowLeft":"ArrowUp"]:[e==="horizontal"?"ArrowRight":"ArrowDown"]};function _z(r){const e=ml(),t=bc(),[n,i]=Mt(r,["onFocusOutside","onKeyDown"]),{direction:s}=pl();return D(cz,st({onOpenAutoFocus:u=>{u.preventDefault()},onCloseAutoFocus:u=>{u.preventDefault()},onFocusOutside:u=>{n.onFocusOutside?.(u);const f=u.target;is(e.triggerRef(),f)||e.close()},onKeyDown:u=>{fr(u,n.onKeyDown);const f=is(u.currentTarget,u.target),h=Lre.close(s(),t.orientation()).includes(u.key),d=e.parentMenuContext()!=null;f&&h&&d&&(e.close(),Kn(e.triggerRef()))}},i))}var pP=["Enter"," "],Fre={open:(r,e)=>r==="ltr"?[...pP,e==="horizontal"?"ArrowRight":"ArrowDown"]:[...pP,e==="horizontal"?"ArrowLeft":"ArrowUp"]};function Sz(r){let e;const t=bc(),n=ml(),i=Ht({id:t.generateId(`sub-trigger-${mi()}`)},r),[s,o]=Mt(i,["ref","id","textValue","disabled","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]);let a=null;const c=()=>{a&&window.clearTimeout(a),a=null},{direction:l}=pl(),u=()=>s.id,f=()=>{const b=n.parentMenuContext();if(b==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");return b.listState().selectionManager()},h=()=>n.listState().collection(),d=()=>f().focusedKey()===u(),g=GT({key:u,selectionManager:f,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>e),p=b=>{fr(b,s.onClick),!n.isOpen()&&!s.disabled&&n.open(!0)},m=b=>{if(fr(b,s.onPointerMove),b.pointerType!=="mouse")return;const _=n.parentMenuContext();if(_?.onItemEnter(b),!b.defaultPrevented){if(s.disabled){_?.onItemLeave(b);return}!n.isOpen()&&!a&&(n.parentMenuContext()?.setPointerGraceIntent(null),a=window.setTimeout(()=>{n.open(!1),c()},100)),_?.onItemEnter(b),b.defaultPrevented||(n.listState().selectionManager().isFocused()&&(n.listState().selectionManager().setFocused(!1),n.listState().selectionManager().setFocusedKey(void 0)),Kn(b.currentTarget),_?.listState().selectionManager().setFocused(!0),_?.listState().selectionManager().setFocusedKey(u()))}},y=b=>{if(fr(b,s.onPointerLeave),b.pointerType!=="mouse")return;c();const _=n.parentMenuContext(),x=n.contentRef();if(x){_?.setPointerGraceIntent({area:Bre(n.currentPlacement(),b,x),side:n.currentPlacement().split("-")[0]}),window.clearTimeout(_?.pointerGraceTimeoutId());const E=window.setTimeout(()=>{_?.setPointerGraceIntent(null)},300);_?.setPointerGraceTimeoutId(E)}else{if(_?.onTriggerLeave(b),b.defaultPrevented)return;_?.setPointerGraceIntent(null)}_?.onItemLeave(b)},v=b=>{fr(b,s.onKeyDown),!b.repeat&&(s.disabled||Fre.open(l(),t.orientation()).includes(b.key)&&(b.stopPropagation(),b.preventDefault(),f().setFocused(!1),f().setFocusedKey(void 0),n.isOpen()||n.open("first"),n.focusContent(),n.listState().selectionManager().setFocused(!0),n.listState().selectionManager().setFocusedKey(h().getFirstKey())))};return it(()=>{if(n.registerItemToParentDomCollection==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");const b=n.registerItemToParentDomCollection({ref:()=>e,type:"item",key:u(),textValue:s.textValue??e?.textContent??"",disabled:s.disabled??!1});yt(b)}),it(kn(()=>n.parentMenuContext()?.pointerGraceTimeoutId(),b=>{yt(()=>{window.clearTimeout(b),n.parentMenuContext()?.setPointerGraceIntent(null)})})),it(()=>yt(n.registerTriggerId(s.id))),yt(()=>{c()}),D(Sr,st({as:"div",ref(b){var _=dn(x=>{n.setTriggerRef(x),e=x},s.ref);typeof _=="function"&&_(b)},get id(){return s.id},role:"menuitem",get tabIndex(){return g.tabIndex()},"aria-haspopup":"true",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return Or(()=>!!n.isOpen())()?n.contentId():void 0},get"aria-disabled"(){return s.disabled},get"data-key"(){return g.dataKey()},get"data-highlighted"(){return d()?"":void 0},get"data-disabled"(){return s.disabled?"":void 0},get onPointerDown(){return on([s.onPointerDown,g.onPointerDown])},get onPointerUp(){return on([s.onPointerUp,g.onPointerUp])},get onClick(){return on([p,g.onClick])},get onKeyDown(){return on([v,g.onKeyDown])},get onMouseDown(){return on([s.onMouseDown,g.onMouseDown])},get onFocus(){return on([s.onFocus,g.onFocus])},onPointerMove:m,onPointerLeave:y},()=>n.dataset(),o))}function Ure(r){const e=Rb(),t=`menu-${mi()}`,n=Ht({id:t,modal:!0},r),[i,s]=Mt(n,["id","modal","preventScroll","forceMount","open","defaultOpen","onOpenChange","value","orientation"]),o=jd({open:()=>i.open,defaultOpen:()=>i.defaultOpen,onOpenChange:c=>i.onOpenChange?.(c)}),a={isModal:()=>i.modal??!0,preventScroll:()=>i.preventScroll??a.isModal(),forceMount:()=>i.forceMount??!1,generateId:To(()=>i.id),value:()=>i.value,orientation:()=>i.orientation??e?.orientation()??"horizontal"};return D(sz.Provider,{value:a,get children(){return D(wz,st({get open(){return o.isOpen()},get onOpenChange(){return o.setIsOpen}},s))}})}var zre={};mc(zre,{Root:()=>kb,Separator:()=>qre});function kb(r){let e;const t=Ht({orientation:"horizontal"},r),[n,i]=Mt(t,["ref","orientation"]),s=vb(()=>e,()=>"hr");return D(Sr,st({as:"hr",ref(o){var a=dn(c=>e=c,n.ref);typeof a=="function"&&a(o)},get role(){return s()!=="hr"?"separator":void 0},get"aria-orientation"(){return n.orientation==="vertical"?"vertical":void 0},get"data-orientation"(){return n.orientation}},i))}var qre=kb,ts={};mc(ts,{Arrow:()=>Vf,CheckboxItem:()=>oz,Content:()=>Ez,DropdownMenu:()=>jre,Group:()=>fR,GroupLabel:()=>uz,Icon:()=>fz,Item:()=>hz,ItemDescription:()=>dz,ItemIndicator:()=>pz,ItemLabel:()=>gz,Portal:()=>mz,RadioGroup:()=>vz,RadioItem:()=>bz,Root:()=>Az,Separator:()=>kb,Sub:()=>xz,SubContent:()=>_z,SubTrigger:()=>Sz,Trigger:()=>az});function Ez(r){const e=bc(),t=ml(),[n,i]=Mt(r,["onCloseAutoFocus","onInteractOutside"]);let s=!1;return D(Dre,st({onCloseAutoFocus:c=>{n.onCloseAutoFocus?.(c),s||Kn(t.triggerRef()),s=!1,c.preventDefault()},onInteractOutside:c=>{n.onInteractOutside?.(c),(!e.isModal()||c.detail.isContextMenu)&&(s=!0)}},i))}function Az(r){const e=`dropdownmenu-${mi()}`,t=Ht({id:e},r);return D(Ure,t)}var jre=Object.assign(Az,{Arrow:Vf,CheckboxItem:oz,Content:Ez,Group:fR,GroupLabel:uz,Icon:fz,Item:hz,ItemDescription:dz,ItemIndicator:pz,ItemLabel:gz,Portal:mz,RadioGroup:vz,RadioItem:bz,Separator:kb,Sub:xz,SubContent:_z,SubTrigger:Sz,Trigger:az}),Vre={};mc(Vre,{Collapsible:()=>by,Content:()=>Cz,Root:()=>Tz,Trigger:()=>Rz,useCollapsibleContext:()=>hR});var Iz=nn();function hR(){const r=Qr(Iz);if(r===void 0)throw new Error("[kobalte]: `useCollapsibleContext` must be used within a `Collapsible.Root` component");return r}function Cz(r){const[e,t]=$e(),n=hR(),i=Ht({id:n.generateId("content")},r),[s,o]=Mt(i,["ref","id","style"]),{present:a}=yd({show:n.shouldMount,element:()=>e()??null}),[c,l]=$e(0),[u,f]=$e(0);let d=n.isOpen()||a();return Dr(()=>{const g=requestAnimationFrame(()=>{d=!1});yt(()=>{cancelAnimationFrame(g)})}),it(kn(a,()=>{if(!e())return;e().style.transitionDuration="0s",e().style.animationName="none";const g=e().getBoundingClientRect();l(g.height),f(g.width),d||(e().style.transitionDuration="",e().style.animationName="")})),it(kn(n.isOpen,g=>{!g&&e()&&(e().style.transitionDuration="",e().style.animationName="")},{defer:!0})),it(()=>yt(n.registerContentId(s.id))),D(We,{get when(){return a()},get children(){return D(Sr,st({as:"div",ref(g){var p=dn(t,s.ref);typeof p=="function"&&p(g)},get id(){return s.id},get style(){return gc({"--kb-collapsible-content-height":c()?`${c()}px`:void 0,"--kb-collapsible-content-width":u()?`${u()}px`:void 0},s.style)}},()=>n.dataset(),o))}})}function Tz(r){const e=`collapsible-${mi()}`,t=Ht({id:e},r),[n,i]=Mt(t,["open","defaultOpen","onOpenChange","disabled","forceMount"]),[s,o]=$e(),a=jd({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:u=>n.onOpenChange?.(u)}),c=ke(()=>({"data-expanded":a.isOpen()?"":void 0,"data-closed":a.isOpen()?void 0:"","data-disabled":n.disabled?"":void 0})),l={dataset:c,isOpen:a.isOpen,disabled:()=>n.disabled??!1,shouldMount:()=>n.forceMount||a.isOpen(),contentId:s,toggle:a.toggle,generateId:To(()=>i.id),registerContentId:Gn(o)};return D(Iz.Provider,{value:l,get children(){return D(Sr,st({as:"div"},c,i))}})}function Rz(r){const e=hR(),[t,n]=Mt(r,["onClick"]);return D(qf,st({get"aria-expanded"(){return e.isOpen()},get"aria-controls"(){return Or(()=>!!e.isOpen())()?e.contentId():void 0},get disabled(){return e.disabled()},onClick:s=>{fr(s,t.onClick),e.toggle()}},()=>e.dataset(),n))}var by=Object.assign(Tz,{Content:Cz,Trigger:Rz}),Kre=ye("<span>"),Hre=ye('<nav class="fixed bottom-0 left-0 border-t border-r rounded-tr border-red-600 z-100 bg-red-950 flex items-center text-sm">');const Wre=()=>{const r=Ff();return(()=>{var e=Hre();return ce(e,D(ts.Root,{get children(){return[D(ts.Trigger,{class:"cursor-pointer min-w-12 text-center px-1 hover:bg-red-900",get children(){var t=Kre();return ce(t,()=>r.pathname),t}}),D(ts.Portal,{get children(){return D(ts.Content,{class:"z-100 text-sm bg-red-950 border border-red-600 rounded",get children(){return D(Lt,{get each(){return Object.values(vt).filter(t=>typeof t=="string")},children:t=>D(ts.Item,{class:"flex hover:bg-red-900 rounded",get children(){return D(JJ,{href:t,class:"flex-1 p-1",children:t})}})})}})}})]}})),e})()};var Gre=ye('<svg viewBox="0 0 256 256"fill=none xmlns=http://www.w3.org/2000/svg><path d="M26.1464 199.614C36.7084 214.305 50.2565 226.598 65.9023 235.686C81.5482 244.774 98.9383 250.452 116.932 252.348C107.675 238.417 94.218 225.6 77.4183 215.842C60.6186 206.084 42.8275 200.754 26.1464 199.614Z"fill=url(#paint0_linear_13278_146915)></path><path d="M99.9925 176.988C67.6261 158.185 32.5947 153.393 7.52861 161.858C9.94843 169.856 13.1398 177.599 17.0576 184.979C38.8358 184.475 62.6138 190.39 84.7394 203.241C106.865 216.092 123.787 233.828 134.143 253C142.499 252.743 150.811 251.679 158.963 249.822C153.896 223.858 132.35 195.796 99.9925 176.988Z"fill=url(#paint1_linear_13278_146915)></path><path d="M254.229 100.663C250.113 83.925 242.668 68.1877 232.336 54.3909C222.004 40.5942 208.997 29.0209 194.093 20.3621C179.189 11.7034 162.693 6.13675 145.59 3.99461C128.487 1.85247 111.128 3.17875 94.5489 7.89426C122.246 11.2839 152.99 21.6814 183.14 39.1972C213.291 56.7129 237.573 78.2665 254.229 100.663Z"fill=url(#paint2_linear_13278_146915)></path><path d="M213.93 162.049C199.753 138.505 175.467 115.959 145.55 98.5793C115.632 81.1992 84.0242 71.2719 56.5727 70.6152C32.4219 70.0432 14.296 77.0639 6.85584 89.8723C6.81347 89.9486 6.75415 90.0206 6.70754 90.0969C6.0381 92.4992 5.46187 94.9058 4.93648 97.3209C15.3256 93.2195 27.3629 90.9358 40.7476 90.6816C70.5124 90.1223 103.824 99.6428 134.563 117.502C165.302 135.361 190.093 159.592 204.346 185.717C210.736 197.488 214.723 209.076 216.303 220.147C218.142 218.503 219.947 216.804 221.697 215.037C221.743 214.957 221.773 214.872 221.82 214.787C229.26 201.966 226.383 182.747 213.93 162.049Z"fill=url(#paint3_linear_13278_146915)></path><path d="M122.788 137.754C76.9736 111.137 26.3458 106.968 2 125.543C2.04782 131.357 2.49231 137.161 3.3304 142.915C10.4921 140.744 17.8732 139.377 25.3373 138.839C52.5431 136.792 82.5368 144.372 109.755 160.193C136.974 176.014 158.43 198.326 170.132 222.956C173.367 229.703 175.834 236.792 177.488 244.09C182.902 241.967 188.167 239.48 193.245 236.646C197.321 206.292 168.616 164.375 122.788 137.754Z"fill=url(#paint4_linear_13278_146915)></path><path d="M237.496 122.641C223.158 99.1218 198.659 76.5132 168.53 59.0187C138.401 41.5241 106.67 31.4401 79.1295 30.6308C58.1352 30.0249 41.8736 35.1135 33.4419 44.7273C68.4522 38.7955 114.631 48.7651 159.391 74.7676C204.15 100.77 235.699 135.954 247.876 169.303C252.05 157.224 248.419 140.577 237.496 122.641Z"fill=url(#paint5_linear_13278_146915)></path><defs><linearGradient id=paint0_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7></stop></linearGradient><linearGradient id=paint1_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7></stop></linearGradient><linearGradient id=paint2_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7></stop></linearGradient><linearGradient id=paint3_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7></stop></linearGradient><linearGradient id=paint4_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7></stop></linearGradient><linearGradient id=paint5_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7>');const Lg=r=>(()=>{var e=Gre();return bn(e,r,!0,!0),e})();var Yre=ye('<svg viewBox="0 0 32 32"fill=none xmlns=http://www.w3.org/2000/svg><path d="M6.27794 5.30859H17.9446L10.1668 21.8364H4.3335L6.27794 5.30859Z"></path><path d="M25.7223 26.7007H14.0557L21.8335 10.1729H27.6668L25.7223 26.7007Z">');const dR=r=>(()=>{var e=Yre();return bn(e,r,!0,!0),e})();var Xre=ye(`<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 768.91 669.35"><path d="M0,479.29v190.06h289.22V627.2H42.14V479.29H0z M726.77,479.29V627.2H479.69v42.14h289.22V479.29H726.77z M289.64,190.06
	v289.22h190.05v-38.01H331.78V190.06H289.64z M0,0v190.06h42.14V42.14h247.08V0H0z M479.69,0v42.14h247.08v147.92h42.14V0H479.69z">`);const pR=r=>(()=>{var e=Xre();return bn(e,r,!0,!0),e})(),Jre={path:"/api/v1/analytics_events",method:"POST"},Qre={path:"/api/v1/apps/:app_id",method:"GET"},Zre={path:"/api/v1/funding/coinbase_on_ramp/init",method:"POST"},ene={path:"/api/v1/funding/coinbase_on_ramp/status",method:"GET"},tne={path:"/api/v1/apps/:app_id/cross-app/connections",method:"GET"},rne={path:"/api/v1/custom_jwt_account/authenticate",method:"POST"},nne={path:"/api/v1/farcaster/init",method:"POST"},ine={path:"/api/v1/farcaster/authenticate",method:"POST"},sne={path:"/api/v1/farcaster/link",method:"POST"},one={path:"/api/v1/farcaster/unlink",method:"POST"},ane={path:"/api/v1/farcaster/status",method:"GET"},cne={path:"/api/v2/farcaster/init",method:"POST"},lne={path:"/api/v2/farcaster/authenticate",method:"POST"},une={path:"/api/v1/guest/authenticate",method:"POST"},fne={path:"/api/v1/mfa/passkeys/init",method:"POST"},hne={path:"/api/v1/mfa/passwordless_sms/init",method:"POST"},dne={path:"/api/v1/oauth/authenticate",method:"POST"},pne={path:"/api/v1/oauth/init",method:"POST"},gne={path:"/api/v1/oauth/link",method:"POST"},mne={path:"/api/v1/oauth/unlink",method:"POST"},yne={path:"/api/v1/passkeys/link",method:"POST"},vne={path:"/api/v1/passkeys/authenticate",method:"POST"},bne={path:"/api/v1/passkeys/register",method:"POST"},wne={path:"/api/v1/passkeys/authenticate/init",method:"POST"},xne={path:"/api/v1/passkeys/register/init",method:"POST"},_ne={path:"/api/v1/passkeys/link/init",method:"POST"},Sne={path:"/api/v1/passwordless/authenticate",method:"POST"},Ene={path:"/api/v1/passwordless/init",method:"POST"},Ane={path:"/api/v1/passwordless/link",method:"POST"},Ine={path:"/api/v1/passwordless/unlink",method:"POST"},Cne={path:"/api/v1/passwordless/update",method:"POST"},Tne={path:"/api/v1/passwordless_sms/authenticate",method:"POST"},Rne={path:"/api/v1/passwordless_sms/init",method:"POST"},kne={path:"/api/v1/passwordless_sms/link",method:"POST"},Pne={path:"/api/v1/passwordless_sms/unlink",method:"POST"},One={path:"/api/v1/passwordless_sms/update",method:"POST"},Dne={path:"/api/v1/embedded_wallets/:address/recovery/key_material",method:"POST"},$ne={path:"/api/v1/recovery/oauth/init",method:"POST"},Mne={path:"/api/v1/recovery/oauth/authenticate",method:"POST"},Bne={path:"/api/v1/recovery/oauth/init_icloud",method:"POST"},Nne={path:"/api/v1/recovery/configuration_icloud",method:"POST"},Lne=(r,e)=>e?Object.entries(e).reduce((t,[n,i])=>t.replace(`:${n}`,`${i}`),r):r,gP={path:"/api/v1/sessions",method:"POST"},Fne={path:"/api/v1/sessions/logout",method:"POST"},Une={path:"/api/v1/apps/:app_id/smart_wallets",method:"GET"},kz={path:"/api/v1/siwe/init",method:"POST"},zne={path:"/api/v1/siwe/authenticate",method:"POST"},qne={path:"/api/v1/siwe/link",method:"POST"},jne={path:"/api/v1/siwe/link_smart_wallet",method:"POST"},Vne={path:"/api/v1/siwe/unlink",method:"POST"},Kne={path:"/api/v1/siws/init",method:"POST"},Hne={path:"/api/v1/siws/authenticate",method:"POST"},Wne={path:"/api/v1/siws/link",method:"POST"},Gne={path:"/api/v1/siws/unlink",method:"POST"},Yne={path:"/api/v1/users/me/accept_terms",method:"POST"},Xne={path:"/api/v1/plugins/moonpay_on_ramp/sign",method:"POST"},Jne={path:"/api/v1/wallets",method:"POST"},f1={path:"/api/v1/wallets/:wallet_id/rpc",method:"POST"},Qne={path:"/api/v1/wallets/revoke",method:"POST"};var Xt,mP=((Xt={}).OAUTH_ACCOUNT_SUSPENDED="oauth_account_suspended",Xt.MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",Xt.MISSING_OR_INVALID_PRIVY_CLIENT_ID="missing_or_invalid_privy_client_id",Xt.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",Xt.MISSING_OR_INVALID_TOKEN="missing_or_invalid_token",Xt.MISSING_OR_INVALID_MFA="missing_or_invalid_mfa",Xt.EXPIRED_OR_INVALID_MFA_TOKEN="expired_or_invalid_mfa_token",Xt.INVALID_DATA="invalid_data",Xt.INVALID_CREDENTIALS="invalid_credentials",Xt.INVALID_CAPTCHA="invalid_captcha",Xt.LINKED_TO_ANOTHER_USER="linked_to_another_user",Xt.ALLOWLIST_REJECTED="allowlist_rejected",Xt.CANNOT_UNLINK_EMBEDDED_WALLET="cannot_unlink_embedded_wallet",Xt.CANNOT_UNLINK_SOLE_ACCOUNT="cannot_unlink_sole_account",Xt.CANNOT_LINK_MORE_OF_TYPE="cannot_link_more_of_type",Xt.LINKED_ACCOUNT_NOT_FOUND="linked_account_not_found",Xt.TOO_MANY_REQUESTS="too_many_requests",Xt.INVALID_ORIGIN="invalid_origin",Xt.MISSING_ORIGIN="missing_origin",Xt.INVALID_NATIVE_APP_ID="invalid_native_app_id",Xt.TOKEN_ALREADY_USED="token_already_used",Xt.ALREADY_LOGGED_OUT="already_logged_out",Xt.NOT_SUPPORTED="not_supported",Xt.USER_UNSUBSCRIBED="user_unsubscribed",Xt.MAX_APPS_REACHED="max_apps_reached",Xt.USER_LIMIT_REACHED="max_accounts_reached",Xt.DEVICE_REVOKED="device_revoked",Xt.WALLET_PASSWORD_EXISTS="wallet_password_exists",Xt.OAUTH_STATE_MISMATCH="oauth_state_mismatch",Xt.MAX_DENYLIST_ENTRIES_REACHED="max_denylist_entries_reached",Xt.MAX_TEST_ACCOUNTS_REACHED="max_test_accounts_reached",Xt.DISALLOWED_LOGIN_METHOD="disallowed_login_method",Xt.DISALLOWED_PLUS_EMAIL="disallowed_plus_email",Xt.DISALLOWED_RECOVERY_METHOD="disallowed_recovery_method",Xt.LEGACY_DASHBOARD_LOGIN_CONFIGURATION="legacy_dashboard_login_configuration",Xt.CANNOT_SET_PASSWORD="cannot_set_password",Xt.INVALID_PKCE_PARAMETERS="invalid_pkce_parameters",Xt.INVALID_APP_URL_SCHEME_CONFIGURATION="invalid_app_url_scheme_configuration",Xt.CROSS_APP_CONNECTION_NOT_ALLOWED="cross_app_connection_not_allowed",Xt.USER_DOES_NOT_EXIST="user_does_not_exist",Xt.ALREADY_EXISTS="resource_already_exists",Xt.ACCOUNT_TRANSFER_REQUIRED="account_transfer_required",Xt.USER_HAS_NOT_DELEGATED_WALLET="user_has_not_delegated_wallet",Xt.FEATURE_NOT_ENABLED="feature_not_enabled",Xt.INSUFFICIENT_FUNDS="insufficient_funds",Xt.TRANSACTION_BROADCAST_FAILURE="transaction_broadcast_failure",Xt.INVALID_POLICY_FORMAT="invalid_policy_format",Xt.POLICY_VIOLATION="policy_violation",Xt.AUTHORIZATION_KEY_HAS_ASSOCIATED_WALLETS="authorization_key_has_associated_wallets",Xt.INVALID_REQUEST="invalid_request",Xt),gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Xd(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}const Em=BigInt(2**32-1),yP=BigInt(32);function Zne(r,e=!1){return e?{h:Number(r&Em),l:Number(r>>yP&Em)}:{h:Number(r>>yP&Em)|0,l:Number(r&Em)|0}}function eie(r,e=!1){const t=r.length;let n=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:a}=Zne(r[s],e);[n[s],i[s]]=[o,a]}return[n,i]}const vP=(r,e,t)=>r>>>t,bP=(r,e,t)=>r<<32-t|e>>>t,lh=(r,e,t)=>r>>>t|e<<32-t,uh=(r,e,t)=>r<<32-t|e>>>t,Am=(r,e,t)=>r<<64-t|e>>>t-32,Im=(r,e,t)=>r>>>t-32|e<<64-t;function kc(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const tie=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),rie=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,nie=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),iie=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,sie=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),oie=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,fh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gR(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ru(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Ao(r,...e){if(!gR(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Pz(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ru(r.outputLen),ru(r.blockLen)}function uv(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function aie(r,e){Ao(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function al(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function Qh(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function za(r,e){return r<<32-e|r>>>e}function Cm(r,e){return r<<e|r>>>32-e>>>0}const Oz=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",cie=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function pu(r){if(Ao(r),Oz)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=cie[r[t]];return e}const Pc={_0:48,_9:57,A:65,F:70,a:97,f:102};function wP(r){if(r>=Pc._0&&r<=Pc._9)return r-Pc._0;if(r>=Pc.A&&r<=Pc.F)return r-(Pc.A-10);if(r>=Pc.a&&r<=Pc.f)return r-(Pc.a-10)}function Pb(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Oz)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=wP(r.charCodeAt(s)),a=wP(r.charCodeAt(s+1));if(o===void 0||a===void 0){const c=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function mR(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function yR(r){return typeof r=="string"&&(r=mR(r)),Ao(r),r}function xP(r){return typeof r=="string"&&(r=mR(r)),Ao(r),r}function da(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];Ao(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}function lie(r,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(r,e)}let Dz=class{};function vR(r){const e=n=>r().update(yR(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Ob(r=32){if(fh&&typeof fh.getRandomValues=="function")return fh.getRandomValues(new Uint8Array(r));if(fh&&typeof fh.randomBytes=="function")return Uint8Array.from(fh.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function uie(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}function fie(r,e,t){return r&e^~r&t}function hie(r,e,t){return r&e^r&t^e&t}class bR extends Dz{constructor(e,t,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Qh(this.buffer)}update(e){uv(this),e=yR(e),Ao(e);const{view:t,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Qh(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){uv(this),aie(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,al(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let f=o;f<i;f++)t[f]=0;uie(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Qh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Cl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ki=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),die=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tl=new Uint32Array(64);class pie extends bR{constructor(e=32){super(64,e,8,!1),this.A=Cl[0]|0,this.B=Cl[1]|0,this.C=Cl[2]|0,this.D=Cl[3]|0,this.E=Cl[4]|0,this.F=Cl[5]|0,this.G=Cl[6]|0,this.H=Cl[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,t,n,i,s,o,a,c]}set(e,t,n,i,s,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let f=0;f<16;f++,t+=4)Tl[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const h=Tl[f-15],d=Tl[f-2],g=za(h,7)^za(h,18)^h>>>3,p=za(d,17)^za(d,19)^d>>>10;Tl[f]=p+Tl[f-7]+g+Tl[f-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const h=za(a,6)^za(a,11)^za(a,25),d=u+h+fie(a,c,l)+die[f]+Tl[f]|0,p=(za(n,2)^za(n,13)^za(n,22))+hie(n,i,s)|0;u=l,l=c,c=a,a=o+d|0,o=s,s=i,i=n,n=d+p|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){al(Tl)}destroy(){this.set(0,0,0,0,0,0,0,0),al(this.buffer)}}const $z=eie(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),gie=$z[0],mie=$z[1],Rl=new Uint32Array(80),kl=new Uint32Array(80);class yie extends bR{constructor(e=64){super(128,e,16,!1),this.Ah=Ki[0]|0,this.Al=Ki[1]|0,this.Bh=Ki[2]|0,this.Bl=Ki[3]|0,this.Ch=Ki[4]|0,this.Cl=Ki[5]|0,this.Dh=Ki[6]|0,this.Dl=Ki[7]|0,this.Eh=Ki[8]|0,this.El=Ki[9]|0,this.Fh=Ki[10]|0,this.Fl=Ki[11]|0,this.Gh=Ki[12]|0,this.Gl=Ki[13]|0,this.Hh=Ki[14]|0,this.Hl=Ki[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:h,Gh:d,Gl:g,Hh:p,Hl:m}=this;return[e,t,n,i,s,o,a,c,l,u,f,h,d,g,p,m]}set(e,t,n,i,s,o,a,c,l,u,f,h,d,g,p,m){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=h|0,this.Gh=d|0,this.Gl=g|0,this.Hh=p|0,this.Hl=m|0}process(e,t){for(let b=0;b<16;b++,t+=4)Rl[b]=e.getUint32(t),kl[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const _=Rl[b-15]|0,x=kl[b-15]|0,E=lh(_,x,1)^lh(_,x,8)^vP(_,x,7),S=uh(_,x,1)^uh(_,x,8)^bP(_,x,7),C=Rl[b-2]|0,k=kl[b-2]|0,$=lh(C,k,19)^Am(C,k,61)^vP(C,k,6),J=uh(C,k,19)^Im(C,k,61)^bP(C,k,6),j=nie(S,J,kl[b-7],kl[b-16]),L=iie(j,E,$,Rl[b-7],Rl[b-16]);Rl[b]=L|0,kl[b]=j|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:h,Fh:d,Fl:g,Gh:p,Gl:m,Hh:y,Hl:v}=this;for(let b=0;b<80;b++){const _=lh(f,h,14)^lh(f,h,18)^Am(f,h,41),x=uh(f,h,14)^uh(f,h,18)^Im(f,h,41),E=f&d^~f&p,S=h&g^~h&m,C=sie(v,x,S,mie[b],kl[b]),k=oie(C,y,_,E,gie[b],Rl[b]),$=C|0,J=lh(n,i,28)^Am(n,i,34)^Am(n,i,39),j=uh(n,i,28)^Im(n,i,34)^Im(n,i,39),L=n&s^n&a^s&a,w=i&o^i&c^o&c;y=p|0,v=m|0,p=d|0,m=g|0,d=f|0,g=h|0,{h:f,l:h}=kc(l|0,u|0,k|0,$|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const R=tie($,j,w);n=rie(R,k,J,L),i=R|0}({h:n,l:i}=kc(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=kc(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=kc(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=kc(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:h}=kc(this.Eh|0,this.El|0,f|0,h|0),{h:d,l:g}=kc(this.Fh|0,this.Fl|0,d|0,g|0),{h:p,l:m}=kc(this.Gh|0,this.Gl|0,p|0,m|0),{h:y,l:v}=kc(this.Hh|0,this.Hl|0,y|0,v|0),this.set(n,i,s,o,a,c,l,u,f,h,d,g,p,m,y,v)}roundClean(){al(Rl,kl)}destroy(){al(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Db=vR(()=>new pie),ig=vR(()=>new yie),_P=Db;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wR=BigInt(0),CA=BigInt(1);function Sf(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}function Tm(r){const e=r.toString(16);return e.length&1?"0"+e:e}function Mz(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?wR:BigInt("0x"+r)}function $b(r){return Mz(pu(r))}function sg(r){return Ao(r),Mz(pu(Uint8Array.from(r).reverse()))}function xR(r,e){return Pb(r.toString(16).padStart(e*2,"0"))}function Mb(r,e){return xR(r,e).reverse()}function jn(r,e,t){let n;if(typeof e=="string")try{n=Pb(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(gR(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}const h1=r=>typeof r=="bigint"&&wR<=r;function vie(r,e,t){return h1(r)&&h1(e)&&h1(t)&&e<=r&&r<t}function zh(r,e,t,n){if(!vie(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function bie(r){let e;for(e=0;r>wR;r>>=CA,e+=1);return e}const Bb=r=>(CA<<BigInt(r))-CA;function wie(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=d=>new Uint8Array(d),i=d=>Uint8Array.of(d);let s=n(r),o=n(r),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...d)=>t(o,s,...d),u=(d=n(0))=>{o=l(i(0),d),s=l(),d.length!==0&&(o=l(i(1),d),s=l())},f=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const g=[];for(;d<e;){s=l();const p=s.slice();g.push(p),d+=s.length}return da(...g)};return(d,g)=>{c(),u(d);let p;for(;!(p=g(f()));)u();return c(),p}}function Fg(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(i,s,o){const a=r[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(t).forEach(([i,s])=>n(i,s,!0))}function fv(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const s=r(t,...n);return e.set(t,s),s}}const xie=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Bz=Uint8Array.from(new Array(16).fill(0).map((r,e)=>e)),_ie=Bz.map(r=>(9*r+5)%16),Nz=(()=>{const t=[[Bz],[_ie]];for(let n=0;n<4;n++)for(let i of t)i.push(i[n].map(s=>xie[s]));return t})(),Lz=Nz[0],Fz=Nz[1],Uz=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(r=>Uint8Array.from(r)),Sie=Lz.map((r,e)=>r.map(t=>Uz[e][t])),Eie=Fz.map((r,e)=>r.map(t=>Uz[e][t])),Aie=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),Iie=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function SP(r,e,t,n){return r===0?e^t^n:r===1?e&t|~e&n:r===2?(e|~t)^n:r===3?e&n|t&~n:e^(t|~n)}const Rm=new Uint32Array(16);class Cie extends bR{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:i,h4:s}=this;return[e,t,n,i,s]}set(e,t,n,i,s){this.h0=e|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(e,t){for(let d=0;d<16;d++,t+=4)Rm[d]=e.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,c=a,l=this.h3|0,u=l,f=this.h4|0,h=f;for(let d=0;d<5;d++){const g=4-d,p=Aie[d],m=Iie[d],y=Lz[d],v=Fz[d],b=Sie[d],_=Eie[d];for(let x=0;x<16;x++){const E=Cm(n+SP(d,s,a,l)+Rm[y[x]]+p,b[x])+f|0;n=f,f=l,l=Cm(a,10)|0,a=s,s=E}for(let x=0;x<16;x++){const E=Cm(i+SP(g,o,c,u)+Rm[v[x]]+m,_[x])+h|0;i=h,h=u,u=Cm(c,10)|0,c=o,o=E}}this.set(this.h1+a+u|0,this.h2+l+h|0,this.h3+f+i|0,this.h4+n+o|0,this.h0+s+c|0)}roundClean(){al(Rm)}destroy(){this.destroyed=!0,al(this.buffer),this.set(0,0,0,0,0)}}const Tie=vR(()=>new Cie),Rie=Tie;class zz extends Dz{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Pz(e);const n=yR(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),al(s)}update(e){return uv(this),this.iHash.update(e),this}digestInto(e){uv(this),Ao(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const og=(r,e,t)=>new zz(r,e).update(t).digest();og.create=(r,e)=>new zz(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ms=BigInt(0),Ni=BigInt(1),ef=BigInt(2),kie=BigInt(3),qz=BigInt(4),jz=BigInt(5),Vz=BigInt(8);function Vn(r,e){const t=r%e;return t>=Ms?t:e+t}function Nn(r,e,t){let n=r;for(;e-- >Ms;)n*=n,n%=t;return n}function EP(r,e){if(r===Ms)throw new Error("invert: expected non-zero number");if(e<=Ms)throw new Error("invert: expected positive modulus, got "+e);let t=Vn(r,e),n=e,i=Ms,s=Ni;for(;t!==Ms;){const a=n/t,c=n%t,l=i-s*a;n=t,t=c,i=s,s=l}if(n!==Ni)throw new Error("invert: does not exist");return Vn(i,e)}function Kz(r,e){const t=(r.ORDER+Ni)/qz,n=r.pow(e,t);if(!r.eql(r.sqr(n),e))throw new Error("Cannot find square root");return n}function Pie(r,e){const t=(r.ORDER-jz)/Vz,n=r.mul(e,ef),i=r.pow(n,t),s=r.mul(e,i),o=r.mul(r.mul(s,ef),i),a=r.mul(s,r.sub(o,r.ONE));if(!r.eql(r.sqr(a),e))throw new Error("Cannot find square root");return a}function Oie(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let e=r-Ni,t=0;for(;e%ef===Ms;)e/=ef,t++;let n=ef;const i=Jd(r);for(;AP(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return Kz;let s=i.pow(n,e);const o=(e+Ni)/ef;return function(c,l){if(c.is0(l))return l;if(AP(c,l)!==1)throw new Error("Cannot find square root");let u=t,f=c.mul(c.ONE,s),h=c.pow(l,e),d=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let g=1,p=c.sqr(h);for(;!c.eql(p,c.ONE);)if(g++,p=c.sqr(p),g===u)throw new Error("Cannot find square root");const m=Ni<<BigInt(u-g-1),y=c.pow(f,m);u=g,f=c.sqr(y),h=c.mul(h,f),d=c.mul(d,y)}return d}}function Die(r){return r%qz===kie?Kz:r%Vz===jz?Pie:Oie(r)}const $ie=(r,e)=>(Vn(r,e)&Ni)===Ni,Mie=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Bie(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=Mie.reduce((n,i)=>(n[i]="function",n),e);return Fg(r,t),r}function Nie(r,e,t){if(t<Ms)throw new Error("invalid exponent, negatives unsupported");if(t===Ms)return r.ONE;if(t===Ni)return e;let n=r.ONE,i=e;for(;t>Ms;)t&Ni&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Ni;return n}function Hz(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),i=e.reduce((o,a,c)=>r.is0(a)?o:(n[c]=o,r.mul(o,a)),r.ONE),s=r.inv(i);return e.reduceRight((o,a,c)=>r.is0(a)?o:(n[c]=r.mul(o,n[c]),r.mul(o,a)),s),n}function AP(r,e){const t=(r.ORDER-Ni)/ef,n=r.pow(e,t),i=r.eql(n,r.ONE),s=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Lie(r,e){e!==void 0&&ru(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Jd(r,e,t=!1,n={}){if(r<=Ms)throw new Error("invalid field: expected ORDER > 0, got "+r);let i,s;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(i=u.BITS),u.sqrt&&(s=u.sqrt),typeof u.isLE=="boolean"&&(t=u.isLE)}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:o,nByteLength:a}=Lie(r,i);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:r,isLE:t,BITS:o,BYTES:a,MASK:Bb(o),ZERO:Ms,ONE:Ni,create:u=>Vn(u,r),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Ms<=u&&u<r},is0:u=>u===Ms,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Ni)===Ni,neg:u=>Vn(-u,r),eql:(u,f)=>u===f,sqr:u=>Vn(u*u,r),add:(u,f)=>Vn(u+f,r),sub:(u,f)=>Vn(u-f,r),mul:(u,f)=>Vn(u*f,r),pow:(u,f)=>Nie(l,u,f),div:(u,f)=>Vn(u*EP(f,r),r),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>EP(u,r),sqrt:s||(u=>(c||(c=Die(r)),c(l,u))),toBytes:u=>t?Mb(u,a):xR(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return t?sg(u):$b(u)},invertBatch:u=>Hz(l,u),cmov:(u,f,h)=>h?f:u});return Object.freeze(l)}function Wz(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function Gz(r){const e=Wz(r);return e+Math.ceil(e/2)}function Fie(r,e,t=!1){const n=r.length,i=Wz(e),s=Gz(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=t?sg(r):$b(r),a=Vn(o,e-Ni)+Ni;return t?Mb(a,i):xR(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bd=BigInt(0),tf=BigInt(1);function C0(r,e){const t=e.negate();return r?t:e}function Yz(r,e,t){const n=e==="pz"?o=>o.pz:o=>o.ez,i=Hz(r.Fp,t.map(n));return t.map((o,a)=>o.toAffine(i[a])).map(r.fromAffine)}function Xz(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function d1(r,e){Xz(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,s=Bb(r),o=BigInt(r);return{windows:t,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function IP(r,e,t){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=t;let a=Number(r&i),c=r>>o;a>n&&(a-=s,c+=tf);const l=e*n,u=l+Math.abs(a)-1,f=a===0,h=a<0,d=e%2!==0;return{nextN:c,offset:u,isZero:f,isNeg:h,isNegF:d,offsetF:l}}function Uie(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function zie(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const p1=new WeakMap,Jz=new WeakMap;function g1(r){return Jz.get(r)||1}function CP(r){if(r!==bd)throw new Error("invalid wNAF")}function Qz(r,e){return{constTimeNegate:C0,hasPrecomputes(t){return g1(t)!==1},unsafeLadder(t,n,i=r.ZERO){let s=t;for(;n>bd;)n&tf&&(i=i.add(s)),s=s.double(),n>>=tf;return i},precomputeWindow(t,n){const{windows:i,windowSize:s}=d1(n,e),o=[];let a=t,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,n,i){let s=r.ZERO,o=r.BASE;const a=d1(t,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:f,isNeg:h,isNegF:d,offsetF:g}=IP(i,c,a);i=l,f?o=o.add(C0(d,n[g])):s=s.add(C0(h,n[u]))}return CP(i),{p:s,f:o}},wNAFUnsafe(t,n,i,s=r.ZERO){const o=d1(t,e);for(let a=0;a<o.windows&&i!==bd;a++){const{nextN:c,offset:l,isZero:u,isNeg:f}=IP(i,a,o);if(i=c,!u){const h=n[l];s=s.add(f?h.negate():h)}}return CP(i),s},getPrecomputes(t,n,i){let s=p1.get(n);return s||(s=this.precomputeWindow(n,t),t!==1&&(typeof i=="function"&&(s=i(s)),p1.set(n,s))),s},wNAFCached(t,n,i){const s=g1(t);return this.wNAF(s,this.getPrecomputes(s,t,i),n)},wNAFCachedUnsafe(t,n,i,s){const o=g1(t);return o===1?this.unsafeLadder(t,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),n,s)},setWindowSize(t,n){Xz(n,e),Jz.set(t,n),p1.delete(t)}}}function qie(r,e,t,n){let i=e,s=r.ZERO,o=r.ZERO;for(;t>bd||n>bd;)t&tf&&(s=s.add(i)),n&tf&&(o=o.add(i)),i=i.double(),t>>=tf,n>>=tf;return{p1:s,p2:o}}function Zz(r,e,t,n){Uie(t,r),zie(n,e);const i=t.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,a=bie(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Bb(c),u=new Array(Number(l)+1).fill(o),f=Math.floor((e.BITS-1)/c)*c;let h=o;for(let d=f;d>=0;d-=c){u.fill(o);for(let p=0;p<s;p++){const m=n[p],y=Number(m>>BigInt(d)&l);u[y]=u[y].add(t[p])}let g=o;for(let p=u.length-1,m=o;p>0;p--)m=m.add(u[p]),g=g.add(m);if(h=h.add(g),d!==0)for(let p=0;p<c;p++)h=h.double()}return h}function TP(r,e){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Bie(e),e}else return Jd(r)}function eq(r,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>bd))throw new Error(`CURVE.${a} must be positive bigint`)}const n=TP(e.p,t.Fp),i=TP(e.n,t.Fn),o=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const a of o)if(!n.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function RP(r){r.lowS!==void 0&&Sf("lowS",r.lowS),r.prehash!==void 0&&Sf("prehash",r.prehash)}class jie extends Error{constructor(e=""){super(e)}}const zc={Err:jie,_tlv:{encode:(r,e)=>{const{Err:t}=zc;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,i=Tm(n);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=n>127?Tm(i.length/2|128):"";return Tm(r)+s+i+e},decode(r,e){const{Err:t}=zc;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new t("tlv.decode: length bytes not complete");if(l[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=zc;if(r<T0)throw new e("integer: negative integers are not allowed");let t=Tm(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=zc;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return $b(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=zc,i=jn("signature",r),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(l)}},hexFromSig(r){const{_tlv:e,_int:t}=zc,n=e.encode(2,t.encode(r.r)),i=e.encode(2,t.encode(r.s)),s=n+i;return e.encode(48,s)}},T0=BigInt(0),R0=BigInt(1),Vie=BigInt(2),km=BigInt(3),Kie=BigInt(4);function Hie(r,e,t){function n(i){const s=r.sqr(i),o=r.mul(s,i);return r.add(r.add(o,r.mul(i,e)),t)}return n}function tq(r,e,t){const{BYTES:n}=r;function i(s){let o;if(typeof s=="bigint")o=s;else{let a=jn("private key",s);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(n);c.set(a,c.length-a.length),a=c}try{o=r.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof s}`)}}if(t&&(o=r.create(o)),!r.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return i}function Wie(r,e={}){const{Fp:t,Fn:n}=eq("weierstrass",r,e),{h:i,n:s}=r;Fg(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!t.is0(r.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(C,k,$){const{x:J,y:j}=k.toAffine(),L=t.toBytes(J);if(Sf("isCompressed",$),$){a();const w=!t.isOdd(j);return da(rq(w),L)}else return da(Uint8Array.of(4),L,t.toBytes(j))}function l(C){Ao(C);const k=t.BYTES,$=k+1,J=2*k+1,j=C.length,L=C[0],w=C.subarray(1);if(j===$&&(L===2||L===3)){const R=t.fromBytes(w);if(!t.isValid(R))throw new Error("bad point: is not on curve, wrong x");const N=h(R);let Y;try{Y=t.sqrt(N)}catch(te){const X=te instanceof Error?": "+te.message:"";throw new Error("bad point: is not on curve, sqrt error"+X)}a();const z=t.isOdd(Y);return(L&1)===1!==z&&(Y=t.neg(Y)),{x:R,y:Y}}else if(j===J&&L===4){const R=t.fromBytes(w.subarray(k*0,k*1)),N=t.fromBytes(w.subarray(k*1,k*2));if(!d(R,N))throw new Error("bad point: is not on curve");return{x:R,y:N}}else throw new Error(`bad point: got length ${j}, expected compressed=${$} or uncompressed=${J}`)}const u=e.toBytes||c,f=e.fromBytes||l,h=Hie(t,r.a,r.b);function d(C,k){const $=t.sqr(k),J=h(C);return t.eql($,J)}if(!d(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const g=t.mul(t.pow(r.a,km),Kie),p=t.mul(t.sqr(r.b),BigInt(27));if(t.is0(t.add(g,p)))throw new Error("bad curve params: a or b");function m(C,k,$=!1){if(!t.isValid(k)||$&&t.is0(k))throw new Error(`bad point coordinate ${C}`);return k}function y(C){if(!(C instanceof x))throw new Error("ProjectivePoint expected")}const v=fv((C,k)=>{const{px:$,py:J,pz:j}=C;if(t.eql(j,t.ONE))return{x:$,y:J};const L=C.is0();k==null&&(k=L?t.ONE:t.inv(j));const w=t.mul($,k),R=t.mul(J,k),N=t.mul(j,k);if(L)return{x:t.ZERO,y:t.ZERO};if(!t.eql(N,t.ONE))throw new Error("invZ was invalid");return{x:w,y:R}}),b=fv(C=>{if(C.is0()){if(e.allowInfinityPoint&&!t.is0(C.py))return;throw new Error("bad point: ZERO")}const{x:k,y:$}=C.toAffine();if(!t.isValid(k)||!t.isValid($))throw new Error("bad point: x or y not field elements");if(!d(k,$))throw new Error("bad point: equation left != right");if(!C.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(C,k,$,J,j){return $=new x(t.mul($.px,C),$.py,$.pz),k=C0(J,k),$=C0(j,$),k.add($)}class x{constructor(k,$,J){this.px=m("x",k),this.py=m("y",$,!0),this.pz=m("z",J),Object.freeze(this)}static fromAffine(k){const{x:$,y:J}=k||{};if(!k||!t.isValid($)||!t.isValid(J))throw new Error("invalid affine point");if(k instanceof x)throw new Error("projective point not allowed");return t.is0($)&&t.is0(J)?x.ZERO:new x($,J,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(k){return Yz(x,"pz",k)}static fromBytes(k){return Ao(k),x.fromHex(k)}static fromHex(k){const $=x.fromAffine(f(jn("pointHex",k)));return $.assertValidity(),$}static fromPrivateKey(k){const $=tq(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return x.BASE.multiply($(k))}static msm(k,$){return Zz(x,n,k,$)}precompute(k=8,$=!0){return S.setWindowSize(this,k),$||this.multiply(km),this}_setWindowSize(k){this.precompute(k)}assertValidity(){b(this)}hasEvenY(){const{y:k}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(k)}equals(k){y(k);const{px:$,py:J,pz:j}=this,{px:L,py:w,pz:R}=k,N=t.eql(t.mul($,R),t.mul(L,j)),Y=t.eql(t.mul(J,R),t.mul(w,j));return N&&Y}negate(){return new x(this.px,t.neg(this.py),this.pz)}double(){const{a:k,b:$}=r,J=t.mul($,km),{px:j,py:L,pz:w}=this;let R=t.ZERO,N=t.ZERO,Y=t.ZERO,z=t.mul(j,j),G=t.mul(L,L),te=t.mul(w,w),X=t.mul(j,L);return X=t.add(X,X),Y=t.mul(j,w),Y=t.add(Y,Y),R=t.mul(k,Y),N=t.mul(J,te),N=t.add(R,N),R=t.sub(G,N),N=t.add(G,N),N=t.mul(R,N),R=t.mul(X,R),Y=t.mul(J,Y),te=t.mul(k,te),X=t.sub(z,te),X=t.mul(k,X),X=t.add(X,Y),Y=t.add(z,z),z=t.add(Y,z),z=t.add(z,te),z=t.mul(z,X),N=t.add(N,z),te=t.mul(L,w),te=t.add(te,te),z=t.mul(te,X),R=t.sub(R,z),Y=t.mul(te,G),Y=t.add(Y,Y),Y=t.add(Y,Y),new x(R,N,Y)}add(k){y(k);const{px:$,py:J,pz:j}=this,{px:L,py:w,pz:R}=k;let N=t.ZERO,Y=t.ZERO,z=t.ZERO;const G=r.a,te=t.mul(r.b,km);let X=t.mul($,L),T=t.mul(J,w),A=t.mul(j,R),O=t.add($,J),I=t.add(L,w);O=t.mul(O,I),I=t.add(X,T),O=t.sub(O,I),I=t.add($,j);let U=t.add(L,R);return I=t.mul(I,U),U=t.add(X,A),I=t.sub(I,U),U=t.add(J,j),N=t.add(w,R),U=t.mul(U,N),N=t.add(T,A),U=t.sub(U,N),z=t.mul(G,I),N=t.mul(te,A),z=t.add(N,z),N=t.sub(T,z),z=t.add(T,z),Y=t.mul(N,z),T=t.add(X,X),T=t.add(T,X),A=t.mul(G,A),I=t.mul(te,I),T=t.add(T,A),A=t.sub(X,A),A=t.mul(G,A),I=t.add(I,A),X=t.mul(T,I),Y=t.add(Y,X),X=t.mul(U,I),N=t.mul(O,N),N=t.sub(N,X),X=t.mul(O,T),z=t.mul(U,z),z=t.add(z,X),new x(N,Y,z)}subtract(k){return this.add(k.negate())}is0(){return this.equals(x.ZERO)}multiply(k){const{endo:$}=e;if(!n.isValidNot0(k))throw new Error("invalid scalar: out of range");let J,j;const L=w=>S.wNAFCached(this,w,x.normalizeZ);if($){const{k1neg:w,k1:R,k2neg:N,k2:Y}=$.splitScalar(k),{p:z,f:G}=L(R),{p:te,f:X}=L(Y);j=G.add(X),J=_($.beta,z,te,w,N)}else{const{p:w,f:R}=L(k);J=w,j=R}return x.normalizeZ([J,j])[0]}multiplyUnsafe(k){const{endo:$}=e,J=this;if(!n.isValid(k))throw new Error("invalid scalar: out of range");if(k===T0||J.is0())return x.ZERO;if(k===R0)return J;if(S.hasPrecomputes(this))return this.multiply(k);if($){const{k1neg:j,k1:L,k2neg:w,k2:R}=$.splitScalar(k),{p1:N,p2:Y}=qie(x,J,L,R);return _($.beta,N,Y,j,w)}else return S.wNAFCachedUnsafe(J,k)}multiplyAndAddUnsafe(k,$,J){const j=this.multiplyUnsafe($).add(k.multiplyUnsafe(J));return j.is0()?void 0:j}toAffine(k){return v(this,k)}isTorsionFree(){const{isTorsionFree:k}=e;return i===R0?!0:k?k(x,this):S.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:k}=e;return i===R0?this:k?k(x,this):this.multiplyUnsafe(i)}toBytes(k=!0){return Sf("isCompressed",k),this.assertValidity(),u(x,this,k)}toRawBytes(k=!0){return this.toBytes(k)}toHex(k=!0){return pu(this.toBytes(k))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}x.BASE=new x(r.Gx,r.Gy,t.ONE),x.ZERO=new x(t.ZERO,t.ONE,t.ZERO),x.Fp=t,x.Fn=n;const E=n.BITS,S=Qz(x,e.endo?Math.ceil(E/2):E);return x}function rq(r){return Uint8Array.of(r?2:3)}function Gie(r,e,t={}){Fg(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||Ob,i=e.hmac||((J,...j)=>og(e.hash,J,da(...j))),{Fp:s,Fn:o}=r,{ORDER:a,BITS:c}=o;function l(J){const j=a>>R0;return J>j}function u(J){return l(J)?o.neg(J):J}function f(J,j){if(!o.isValidNot0(j))throw new Error(`invalid signature ${J}: out of range 1..CURVE.n`)}class h{constructor(j,L,w){f("r",j),f("s",L),this.r=j,this.s=L,w!=null&&(this.recovery=w),Object.freeze(this)}static fromCompact(j){const L=o.BYTES,w=jn("compactSignature",j,L*2);return new h(o.fromBytes(w.subarray(0,L)),o.fromBytes(w.subarray(L,L*2)))}static fromDER(j){const{r:L,s:w}=zc.toSig(jn("DER",j));return new h(L,w)}assertValidity(){}addRecoveryBit(j){return new h(this.r,this.s,j)}recoverPublicKey(j){const L=s.ORDER,{r:w,s:R,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*Vie<L&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const z=N===2||N===3?w+a:w;if(!s.isValid(z))throw new Error("recovery id 2 or 3 invalid");const G=s.toBytes(z),te=r.fromHex(da(rq((N&1)===0),G)),X=o.inv(z),T=b(jn("msgHash",j)),A=o.create(-T*X),O=o.create(R*X),I=r.BASE.multiplyUnsafe(A).add(te.multiplyUnsafe(O));if(I.is0())throw new Error("point at infinify");return I.assertValidity(),I}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(j){if(j==="compact")return da(o.toBytes(this.r),o.toBytes(this.s));if(j==="der")return Pb(zc.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return pu(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return pu(this.toBytes("compact"))}}const d=tq(o,t.allowedPrivateKeyLengths,t.wrapPrivateKey),g={isValidPrivateKey(J){try{return d(J),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const J=a;return Fie(n(Gz(J)),J)},precompute(J=8,j=r.BASE){return j.precompute(J,!1)}};function p(J,j=!0){return r.fromPrivateKey(J).toBytes(j)}function m(J){if(typeof J=="bigint")return!1;if(J instanceof r)return!0;const L=jn("key",J).length,w=s.BYTES,R=w+1,N=2*w+1;if(!(t.allowedPrivateKeyLengths||o.BYTES===R))return L===R||L===N}function y(J,j,L=!0){if(m(J)===!0)throw new Error("first arg must be private key");if(m(j)===!1)throw new Error("second arg must be public key");return r.fromHex(j).multiply(d(J)).toBytes(L)}const v=e.bits2int||function(J){if(J.length>8192)throw new Error("input is too large");const j=$b(J),L=J.length*8-c;return L>0?j>>BigInt(L):j},b=e.bits2int_modN||function(J){return o.create(v(J))},_=Bb(c);function x(J){return zh("num < 2^"+c,J,T0,_),o.toBytes(J)}function E(J,j,L=S){if(["recovered","canonical"].some(O=>O in L))throw new Error("sign() legacy options not supported");const{hash:w}=e;let{lowS:R,prehash:N,extraEntropy:Y}=L;R==null&&(R=!0),J=jn("msgHash",J),RP(L),N&&(J=jn("prehashed msgHash",w(J)));const z=b(J),G=d(j),te=[x(G),x(z)];if(Y!=null&&Y!==!1){const O=Y===!0?n(s.BYTES):Y;te.push(jn("extraEntropy",O))}const X=da(...te),T=z;function A(O){const I=v(O);if(!o.isValidNot0(I))return;const U=o.inv(I),Z=r.BASE.multiply(I).toAffine(),oe=o.create(Z.x);if(oe===T0)return;const he=o.create(U*o.create(T+oe*G));if(he===T0)return;let re=(Z.x===oe?0:2)|Number(Z.y&R0),F=he;return R&&l(he)&&(F=u(he),re^=1),new h(oe,F,re)}return{seed:X,k2sig:A}}const S={lowS:e.lowS,prehash:!1},C={lowS:e.lowS,prehash:!1};function k(J,j,L=S){const{seed:w,k2sig:R}=E(J,j,L);return wie(e.hash.outputLen,o.BYTES,i)(w,R)}r.BASE.precompute(8);function $(J,j,L,w=C){const R=J;j=jn("msgHash",j),L=jn("publicKey",L),RP(w);const{lowS:N,prehash:Y,format:z}=w;if("strict"in w)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&!["compact","der","js"].includes(z))throw new Error('format must be "compact", "der" or "js"');const G=typeof R=="string"||gR(R),te=!G&&!z&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!G&&!te)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let X,T;try{if(te)if(z===void 0||z==="js")X=new h(R.r,R.s);else throw new Error("invalid format");if(G){try{z!=="compact"&&(X=h.fromDER(R))}catch(F){if(!(F instanceof zc.Err))throw F}!X&&z!=="der"&&(X=h.fromCompact(R))}T=r.fromHex(L)}catch{return!1}if(!X||N&&X.hasHighS())return!1;Y&&(j=e.hash(j));const{r:A,s:O}=X,I=b(j),U=o.inv(O),Z=o.create(I*U),oe=o.create(A*U),he=r.BASE.multiplyUnsafe(Z).add(T.multiplyUnsafe(oe));return he.is0()?!1:o.create(he.x)===A}return Object.freeze({getPublicKey:p,getSharedSecret:y,sign:k,verify:$,utils:g,Point:r,Signature:h})}function Yie(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Jd(e.n,r.nBitLength),i={Fp:t,Fn:n,allowedPrivateKeyLengths:r.allowedPrivateKeyLengths,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,wrapPrivateKey:r.wrapPrivateKey,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:i}}function Xie(r){const{CURVE:e,curveOpts:t}=Yie(r),n={hash:r.hash,hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:n}}function Jie(r,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:r})}function Qie(r){const{CURVE:e,curveOpts:t,ecdsaOpts:n}=Xie(r),i=Wie(e,t),s=Gie(i,n,t);return Jie(r,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zie(r,e){const t=n=>Qie({...r,hash:n});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hv={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const ese=BigInt(1),TA=BigInt(2),kP=(r,e)=>(r+e/TA)/e;function tse(r){const e=hv.p,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=r*r*r%e,u=l*l*r%e,f=Nn(u,t,e)*u%e,h=Nn(f,t,e)*u%e,d=Nn(h,TA,e)*l%e,g=Nn(d,i,e)*d%e,p=Nn(g,s,e)*g%e,m=Nn(p,a,e)*p%e,y=Nn(m,c,e)*m%e,v=Nn(y,a,e)*p%e,b=Nn(v,t,e)*u%e,_=Nn(b,o,e)*g%e,x=Nn(_,n,e)*l%e,E=Nn(x,TA,e);if(!RA.eql(RA.sqr(E),r))throw new Error("Cannot find square root");return E}const RA=Jd(hv.p,void 0,void 0,{sqrt:tse}),rse=Zie({...hv,Fp:RA,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=hv.n,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ese*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=kP(s*r,e),c=kP(-n*r,e);let l=Vn(r-a*t-c*i,e),u=Vn(-a*n-c*s,e);const f=l>o,h=u>o;if(f&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:f,k1:l,k2neg:h,k2:u}}}},Db);let nse=class{getConfig(){return this._privyInternal.config}async getSmartWalletConfig(){return this._smartWalletConfig||(this._smartWalletConfig=await this._privyInternal.fetch(Une,{params:{app_id:this.appId}})),this._smartWalletConfig}get appId(){return this._privyInternal.appId}constructor(e){this._privyInternal=e}};const ise=new TextEncoder,nq=new TextDecoder,sse=r=>{let e=r;typeof e=="string"&&(e=ise.encode(e));const t=32768,n=[];for(let i=0;i<e.length;i+=t)n.push(String.fromCharCode.apply(null,e.subarray(i,i+t)));return btoa(n.join(""))},ose=r=>sse(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),ase=r=>{const e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},cse=r=>{let e=r;e instanceof Uint8Array&&(e=nq.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return ase(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class lse extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,this.constructor)}}class Pu extends lse{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}function use(r){return typeof r=="object"&&r!==null}function fse(r){if(!use(r)||Object.prototype.toString.call(r)!=="[object Object]")return!1;if(Object.getPrototypeOf(r)===null)return!0;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}const _R=ose,hse=cse;function dse(r){if(typeof r!="string")throw new Pu("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:t}=r.split(".");if(t===5)throw new Pu("Only JWTs using Compact JWS serialization can be decoded");if(t!==3)throw new Pu("Invalid JWT");if(!e)throw new Pu("JWTs must contain a payload");let n;try{n=hse(e)}catch{throw new Pu("Failed to base64url decode the payload")}let i;try{i=JSON.parse(nq.decode(n))}catch{throw new Pu("Failed to parse the decoded payload as JSON")}if(!fse(i))throw new Pu("Invalid JWT Claims Set");return i}let l0=class iq{static parse(e){try{return new iq(e)}catch{return null}}get subject(){return this._decoded.sub}get expiration(){return this._decoded.exp}get issuer(){return this._decoded.iss}get audience(){return this._decoded.aud}isExpired(e=0){return Date.now()>=1e3*(this.expiration-e)}constructor(e){this.value=e,this._decoded=dse(e)}},sq=class kA{async updateOnCrossAppAuthentication(e,t){let n=t.access_token,i=kA.providerAccessTokenStorageKey(e);await this._storage.put(i,n)}async getProviderAccessToken(e){let t=kA.providerAccessTokenStorageKey(e),n=await this._storage.get(t);if(typeof n!="string")return null;try{if(new l0(n).isExpired())throw Error("JWT is expired");return n}catch{return await this._storage.del(t),null}}async getCrossAppConnections(){return await this._privyInternal.fetch(tne,{params:{app_id:this._privyInternal.appId}})}constructor(e,t){this._privyInternal=e,this._storage=t}};sq.providerAccessTokenStorageKey=r=>`privy:cross-app:${r}`;let pse=class{async revoke(){await this._privyInternal.fetch(Qne,{})}constructor(e){this._privyInternal=e}};function gse(r,e){return{...r,rpcUrls:{...r.rpcUrls,privy:{http:[e]}}}}const Nb={id:42161,name:"Arbitrum One",network:"arbitrum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://arbitrum-mainnet.rpc.privy.systems"]},alchemy:{http:["https://arb-mainnet.g.alchemy.com/v2"],webSocket:["wss://arb-mainnet.g.alchemy.com/v2"]},infura:{http:["https://arbitrum-mainnet.infura.io/v3"],webSocket:["wss://arbitrum-mainnet.infura.io/ws/v3"]},default:{http:["https://arb1.arbitrum.io/rpc"]},public:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{etherscan:{name:"Arbiscan",url:"https://arbiscan.io"},default:{name:"Arbiscan",url:"https://arbiscan.io"}}},oq={id:421614,name:"Arbitrum Sepolia",network:"arbitrum-sepolia",nativeCurrency:{name:"Arbitrum Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://arbitrum-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia-rollup.arbitrum.io/rpc"]},public:{http:["https://sepolia-rollup.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Blockscout",url:"https://sepolia-explorer.arbitrum.io"}},testnet:!0},aq={id:43114,name:"Avalanche",network:"avalanche",nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]},public:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://snowtrace.io"},default:{name:"SnowTrace",url:"https://snowtrace.io"}}},mse={id:43113,name:"Avalanche Fuji",network:"avalanche-fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]},public:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://testnet.snowtrace.io"},default:{name:"SnowTrace",url:"https://testnet.snowtrace.io"}},testnet:!0},Lb={id:8453,network:"base",name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://base-mainnet.rpc.privy.systems"]},blast:{http:["https://base-mainnet.blastapi.io"],webSocket:["wss://base-mainnet.blastapi.io"]},default:{http:["https://mainnet.base.org"]},public:{http:["https://mainnet.base.org"]}},blockExplorers:{etherscan:{name:"Basescan",url:"https://basescan.org"},default:{name:"Basescan",url:"https://basescan.org"}}},cq={id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://base-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia.base.org"]},public:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Blockscout",url:"https://base-sepolia.blockscout.com"}},testnet:!0},yse={id:80085,network:"berachain-artio",name:"Berachain Artio",nativeCurrency:{name:"BERA",symbol:"BERA",decimals:18},rpcUrls:{default:{http:["https://berachain-artio.rpc.privy.systems"]},public:{http:["https://berachain-artio.rpc.privy.systems"]}},blockExplorers:{default:{name:"Beratrail",url:"https://artio.beratrail.io"}},testnet:!0},lq={id:42220,name:"Celo Mainnet",network:"celo",nativeCurrency:{decimals:18,name:"CELO",symbol:"CELO"},rpcUrls:{default:{http:["https://forno.celo.org"]},infura:{http:["https://celo-mainnet.infura.io/v3"]},public:{http:["https://forno.celo.org"]}},blockExplorers:{default:{name:"Celo Explorer",url:"https://explorer.celo.org/mainnet"},etherscan:{name:"CeloScan",url:"https://celoscan.io"}},testnet:!1},vse={id:44787,name:"Celo Alfajores Testnet",network:"celo-alfajores",nativeCurrency:{decimals:18,name:"CELO",symbol:"CELO"},rpcUrls:{default:{http:["https://alfajores-forno.celo-testnet.org"]},infura:{http:["https://celo-alfajores.infura.io/v3"]},public:{http:["https://alfajores-forno.celo-testnet.org"]}},blockExplorers:{default:{name:"Celo Explorer",url:"https://explorer.celo.org/alfajores"},etherscan:{name:"CeloScan",url:"https://alfajores.celoscan.io/"}},testnet:!0},bse={id:314,name:"Filecoin - Mainnet",network:"filecoin-mainnet",nativeCurrency:{decimals:18,name:"filecoin",symbol:"FIL"},rpcUrls:{default:{http:["https://api.node.glif.io/rpc/v1"]},public:{http:["https://api.node.glif.io/rpc/v1"]}},blockExplorers:{default:{name:"Filfox",url:"https://filfox.info/en"},filscan:{name:"Filscan",url:"https://filscan.io"},filscout:{name:"Filscout",url:"https://filscout.io/en"},glif:{name:"Glif",url:"https://explorer.glif.io"}}},wse={id:314159,name:"Filecoin - Calibration testnet",network:"filecoin-calibration",nativeCurrency:{decimals:18,name:"testnet filecoin",symbol:"tFIL"},rpcUrls:{default:{http:["https://api.calibration.node.glif.io/rpc/v1"]},public:{http:["https://api.calibration.node.glif.io/rpc/v1"]}},blockExplorers:{default:{name:"Filscan",url:"https://calibration.filscan.io"}}},xse={id:17069,name:"Garnet Holesky",network:"garnet-holesky",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.garnetchain.com"]},public:{http:["https://rpc.garnetchain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.garnetchain.com"}}},_se={id:17e3,name:"Holesky",network:"holesky",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://ethereum-holesky.publicnode.com"]},public:{http:["https://ethereum-holesky.publicnode.com"]}},blockExplorers:{etherscan:{name:"EtherScan",url:"https://holesky.etherscan.io"},default:{name:"EtherScan",url:"https://holesky.etherscan.io"}}},Sse={id:59144,network:"linea-mainnet",name:"Linea Mainnet",nativeCurrency:{name:"Linea Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.linea.build"],webSocket:["wss://rpc.linea.build"]},public:{http:["https://rpc.linea.build"],webSocket:["wss://rpc.linea.build"]}},blockExplorers:{default:{name:"Etherscan",url:"https://lineascan.build"},etherscan:{name:"Etherscan",url:"https://lineascan.build"}},testnet:!1},Ese={id:59140,network:"linea-testnet",name:"Linea Goerli Testnet",nativeCurrency:{name:"Linea Ether",symbol:"ETH",decimals:18},rpcUrls:{infura:{http:["https://linea-goerli.infura.io/v3"],webSocket:["wss://linea-goerli.infura.io/ws/v3"]},default:{http:["https://rpc.goerli.linea.build"],webSocket:["wss://rpc.goerli.linea.build"]},public:{http:["https://rpc.goerli.linea.build"],webSocket:["wss://rpc.goerli.linea.build"]}},blockExplorers:{default:{name:"Etherscan",url:"https://goerli.lineascan.build"},etherscan:{name:"Etherscan",url:"https://goerli.lineascan.build"}},testnet:!0},Ase={id:42,network:"lukso",name:"LUKSO",nativeCurrency:{name:"LUKSO",symbol:"LYX",decimals:18},rpcUrls:{default:{http:["https://rpc.mainnet.lukso.network"],webSocket:["wss://ws-rpc.mainnet.lukso.network"]}},blockExplorers:{default:{name:"LUKSO Mainnet Explorer",url:"https://explorer.execution.mainnet.lukso.network"}}},SR={id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://mainnet.rpc.privy.systems"]},alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}}},ER={id:10,name:"OP Mainnet",network:"optimism",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://optimism-mainnet.rpc.privy.systems"]},alchemy:{http:["https://opt-mainnet.g.alchemy.com/v2"],webSocket:["wss://opt-mainnet.g.alchemy.com/v2"]},infura:{http:["https://optimism-mainnet.infura.io/v3"],webSocket:["wss://optimism-mainnet.infura.io/ws/v3"]},default:{http:["https://mainnet.optimism.io"]},public:{http:["https://mainnet.optimism.io"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://optimistic.etherscan.io"},default:{name:"Optimism Explorer",url:"https://explorer.optimism.io"}}},uq={id:11155420,name:"Optimism Sepolia",network:"optimism-sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://optimism-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia.optimism.io"]},public:{http:["https://sepolia.optimism.io"]},infura:{http:["https://optimism-sepolia.infura.io/v3"]}},blockExplorers:{default:{name:"Blockscout",url:"https://optimism-sepolia.blockscout.com"}},testnet:!0},Ug={id:137,name:"Polygon Mainnet",network:"polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{privy:{http:["https://polygon-mainnet.rpc.privy.systems"]},alchemy:{http:["https://polygon-mainnet.g.alchemy.com/v2"],webSocket:["wss://polygon-mainnet.g.alchemy.com/v2"]},infura:{http:["https://polygon-mainnet.infura.io/v3"],webSocket:["wss://polygon-mainnet.infura.io/ws/v3"]},default:{http:["https://polygon-rpc.com"]},public:{http:["https://polygon-rpc.com"]}},blockExplorers:{etherscan:{name:"PolygonScan",url:"https://polygonscan.com"},default:{name:"PolygonScan",url:"https://polygonscan.com"}}},AR={id:80002,name:"Polygon Amoy",network:"polygon-amoy",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{privy:{http:["https://polygon-amoy.rpc.privy.systems"]},infura:{http:["https://polygon-amoy.infura.io/v3"],webSocket:["wss://polygon-amoy.infura.io/ws/v3"]},default:{http:["https://rpc-amoy.polygon.technology"]}},blockExplorers:{default:{name:"OK LINK",url:"https://www.oklink.com/amoy"}},testnet:!0},Ise={id:690,name:"Redstone",network:"redstone",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.redstonechain.com"]},public:{http:["https://rpc.redstonechain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.redstone.xyz/"}}},Cse={id:11155111,network:"sepolia",name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"SEP",decimals:18},rpcUrls:{privy:{http:["https://sepolia.rpc.privy.systems"]},alchemy:{http:["https://eth-sepolia.g.alchemy.com/v2"],webSocket:["wss://eth-sepolia.g.alchemy.com/v2"]},infura:{http:["https://sepolia.infura.io/v3"],webSocket:["wss://sepolia.infura.io/ws/v3"]},default:{http:["https://rpc.sepolia.org"]},public:{http:["https://rpc.sepolia.org"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://sepolia.etherscan.io"},default:{name:"Etherscan",url:"https://sepolia.etherscan.io"}},testnet:!0},fq={id:7777777,name:"Zora",network:"zora",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.zora.energy"],webSocket:["wss://rpc.zora.energy"]},public:{http:["https://rpc.zora.energy"],webSocket:["wss://rpc.zora.energy"]}},blockExplorers:{default:{name:"Explorer",url:"https://explorer.zora.energy"}}},hq={id:999999999,name:"Zora Sepolia",network:"zora-sepolia",nativeCurrency:{decimals:18,name:"Zora Sepolia",symbol:"ETH"},rpcUrls:{default:{http:["https://sepolia.rpc.zora.energy"],webSocket:["wss://sepolia.rpc.zora.energy"]},public:{http:["https://sepolia.rpc.zora.energy"],webSocket:["wss://sepolia.rpc.zora.energy"]}},blockExplorers:{default:{name:"Zora Sepolia Explorer",url:"https://sepolia.explorer.zora.energy/"}},testnet:!0},dq={id:999,name:"Zora Goerli Testnet",network:"zora-testnet",nativeCurrency:{decimals:18,name:"Zora Goerli",symbol:"ETH"},rpcUrls:{default:{http:["https://testnet.rpc.zora.energy"],webSocket:["wss://testnet.rpc.zora.energy"]},public:{http:["https://testnet.rpc.zora.energy"],webSocket:["wss://testnet.rpc.zora.energy"]}},blockExplorers:{default:{name:"Explorer",url:"https://testnet.explorer.zora.energy"}},testnet:!0},IR=[SR,Cse,_se,Nb,oq,ER,uq,Ug,AR,lq,vse,bse,wse,Lb,cq,yse,Ase,Sse,Ese,aq,mse,fq,dq,hq,Ise,xse];new Set(IR.map(r=>r.id));const Tse=r=>r.map(e=>{if(e.rpcUrls.privyWalletOverride)return e;let t=IR.find(i=>i.id===e.id),n=t?.rpcUrls.privy?.http[0];return n?gse(e,n):e});let m1=class extends Error{constructor({error:e,code:t}){super(e),this.error=e,this.code=t}},Wr=class extends Error{constructor({error:e,code:t}){super(e),this.code=t,this.error=e}},Rse=class extends Error{constructor({error:e,code:t,response:n}){super(e),this.code=t,this.error=e,this.response=n}};const jl=r=>!!r.id&&r.recovery_method==="privy-v2";let kse=class{async sign({message:e}){return await this.request({method:"sign",params:{message:new TextDecoder("utf8").decode(e)}})}async signTransaction({psbt:e}){return await this.request({method:"signTransaction",params:{psbt:e}})}async request(e){if(jl(this._account))throw new Wr({code:"unsupported_wallet_type",error:"Bitcoin wallet providers are only supported for on-device execution and this app uses TEE execution. Use the useSignRawHash hook from @privy-io/expo/extended-chains to sign over a hash with this wallet. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide"});if(!await this._privyInternal.getAccessToken())throw new Wr({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return this.handleIFrameRpc(e)}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessToken();if(!t)throw Error("Missing access token. User must be authenticated.");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),(await this._proxy.rpcWallet({accessToken:t,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:this._account.chain_type})).response.data}catch(t){console.error(t);let n=t instanceof Error?t.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:n}),new Wr({code:"embedded_wallet_request_error",error:n})}}toJSON(){return`PrivyEmbeddedBitcoinProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:t,account:n,entropyId:i,entropyIdVerifier:s}){this._proxy=e,this._privyInternal=t,this._account=n,this._entropyId=i,this._entropyIdVerifier=s}};const Pse=["error","invalid_request_arguments","wallet_not_on_device","invalid_recovery_pin","insufficient_funds","mfa_timeout","missing_or_invalid_mfa","mfa_verification_max_attempts_reached"];var Ts;(Ts={}).MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",Ts.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",Ts.INVALID_DATA="invalid_data",Ts.LINKED_TO_ANOTHER_USER="linked_to_another_user",Ts.ALLOWLIST_REJECTED="allowlist_rejected",Ts.OAUTH_USER_DENIED="oauth_user_denied",Ts.UNKNOWN_AUTH_ERROR="unknown_auth_error",Ts.USER_EXITED_AUTH_FLOW="exited_auth_flow",Ts.MUST_BE_AUTHENTICATED="must_be_authenticated",Ts.UNKNOWN_CONNECT_WALLET_ERROR="unknown_connect_wallet_error",Ts.GENERIC_CONNECT_WALLET_ERROR="generic_connect_wallet_error",Ts.CLIENT_REQUEST_TIMEOUT="client_request_timeout",Ts.INVALID_CREDENTIALS="invalid_credentials";let Ose=class extends Error{toString(){return`${this.type}${this.privyErrorCode?`-${this.privyErrorCode}`:""}: ${this.message}${this.cause?` [cause: ${this.cause}]`:""}`}constructor(e,t,n){super(e),t instanceof Error&&(this.cause=t),this.privyErrorCode=n}},wy=class extends Error{constructor(e,t){super(t),this.type=e}},Dse=class extends Ose{constructor(e,t,n){super(e,t,n),this.type="connector_error"}},PP=class extends Error{constructor(e,t,n){super(e),this.code=t,this.data=n}};function $se(r){let e=r.type;return typeof e=="string"&&Pse.includes(e)}function CR(r){return $se(r)&&r.type==="wallet_not_on_device"}async function Mse(r,{request:e}){return await r.fetchPrivyRoute(Jne,{body:e})}async function y1({context:r,chainType:e}){return{wallet:await Mse(r,{request:{chain_type:e,owner_id:void 0}})}}const Bse="logger/5.8.0";let OP=!1,DP=!1;const xy={debug:1,default:2,info:2,warning:3,error:4,off:5};let $P=xy.default,v1=null;function Nse(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(r){return r.message}return null}const MP=Nse();var PA;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(PA||(PA={}));var ca;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(ca||(ca={}));const BP="0123456789abcdef";class Ve{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const n=e.toLowerCase();xy[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!($P>xy[n])&&console.log.apply(console,t)}debug(...e){this._log(Ve.levels.DEBUG,e)}info(...e){this._log(Ve.levels.INFO,e)}warn(...e){this._log(Ve.levels.WARNING,e)}makeError(e,t,n){if(DP)return this.makeError("censored error",t,{});t||(t=Ve.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(c=>{const l=n[c];try{if(l instanceof Uint8Array){let u="";for(let f=0;f<l.length;f++)u+=BP[l[f]>>4],u+=BP[l[f]&15];i.push(c+"=Uint8Array(0x"+u+")")}else i.push(c+"="+JSON.stringify(l))}catch{i.push(c+"="+JSON.stringify(n[c].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case ca.NUMERIC_FAULT:{o="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":o+="-"+c;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case ca.CALL_EXCEPTION:case ca.INSUFFICIENT_FUNDS:case ca.MISSING_NEW:case ca.NONCE_EXPIRED:case ca.REPLACEMENT_UNDERPRICED:case ca.TRANSACTION_REPLACED:case ca.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(n).forEach(function(c){a[c]=n[c]}),a}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,Ve.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,i){e||this.throwError(t,n,i)}assertArgument(e,t,n,i){e||this.throwArgumentError(t,n,i)}checkNormalize(e){MP&&this.throwError("platform missing String.prototype.normalize",Ve.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:MP})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Ve.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Ve.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n?n=": "+n:n="",e<t&&this.throwError("missing argument"+n,Ve.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,Ve.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",Ve.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Ve.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Ve.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return v1||(v1=new Ve(Bse)),v1}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Ve.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),OP){if(!e)return;this.globalLogger().throwError("error censorship permanent",Ve.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}DP=!!e,OP=!!t}static setLogLevel(e){const t=xy[e.toLowerCase()];if(t==null){Ve.globalLogger().warn("invalid log level - "+e);return}$P=t}static from(e){return new Ve(e)}}Ve.errors=ca;Ve.levels=PA;const Lse="properties/5.8.0";var Fse=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const dv=new Ve(Lse);function Nr(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}function u0(r,e){for(let t=0;t<32;t++){if(r[e])return r[e];if(!r.prototype||typeof r.prototype!="object")break;r=Object.getPrototypeOf(r.prototype).constructor}return null}function Ri(r){return Fse(this,void 0,void 0,function*(){const e=Object.keys(r).map(n=>{const i=r[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function Use(r,e){(!r||typeof r!="object")&&dv.throwArgumentError("invalid object","object",r),Object.keys(r).forEach(t=>{e[t]||dv.throwArgumentError("invalid object key - "+t,"transaction:"+t,r)})}function Bs(r){const e={};for(const t in r)e[t]=r[t];return e}const zse={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function pq(r){if(r==null||zse[typeof r])return!0;if(Array.isArray(r)||typeof r=="object"){if(!Object.isFrozen(r))return!1;const e=Object.keys(r);for(let t=0;t<e.length;t++){let n=null;try{n=r[e[t]]}catch{continue}if(!pq(n))return!1}return!0}return dv.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function qse(r){if(pq(r))return r;if(Array.isArray(r))return Object.freeze(r.map(e=>ag(e)));if(typeof r=="object"){const e={};for(const t in r){const n=r[t];n!==void 0&&Nr(e,t,ag(n))}return e}return dv.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function ag(r){return qse(r)}class jse{constructor(e){for(const t in e)this[t]=ag(e[t])}}const Vse="abstract-signer/5.8.0";var na=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const jo=new Ve(Vse),Kse=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Hse=[Ve.errors.INSUFFICIENT_FUNDS,Ve.errors.NONCE_EXPIRED,Ve.errors.REPLACEMENT_UNDERPRICED];class Fb{constructor(){jo.checkAbstract(new.target,Fb),Nr(this,"_isSigner",!0)}getBalance(e){return na(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return na(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return na(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Ri(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return na(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield Ri(this.checkTransaction(e));return yield this.provider.call(n,t)})}sendTransaction(e){return na(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),n=yield this.signTransaction(t);return yield this.provider.sendTransaction(n)})}getChainId(){return na(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return na(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return na(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return na(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)Kse.indexOf(n)===-1&&jo.throwArgumentError("invalid transaction key: "+n,"transaction",e);const t=Bs(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&jo.throwArgumentError("from address mismatch","transaction",e),n[0])),t}populateTransaction(e){return na(this,void 0,void 0,function*(){const t=yield Ri(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>na(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&jo.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const n=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||n)?jo.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&n&&jo.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&jo.throwError("network does not support EIP-1559",Ve.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):jo.throwError("failed to get consistent fee data",Ve.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(Hse.indexOf(i.code)>=0)throw i;return jo.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ve.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&jo.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield Ri(t)})}_checkProvider(e){this.provider||jo.throwError("missing provider",Ve.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class TR extends Fb{constructor(e,t){super(),Nr(this,"address",e),Nr(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{jo.throwError(e,Ve.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new TR(this.address,e)}}var _y={exports:{}};const Wse={},Gse=Object.freeze(Object.defineProperty({__proto__:null,default:Wse},Symbol.toStringTag,{value:"Module"})),Hf=Xd(Gse);var Yse=_y.exports,NP;function gq(){return NP||(NP=1,function(r){(function(e,t){function n(L,w){if(!L)throw new Error(w||"Assertion failed")}function i(L,w){L.super_=w;var R=function(){};R.prototype=w.prototype,L.prototype=new R,L.prototype.constructor=L}function s(L,w,R){if(s.isBN(L))return L;this.negative=0,this.words=null,this.length=0,this.red=null,L!==null&&((w==="le"||w==="be")&&(R=w,w=10),this._init(L||0,w||10,R||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Hf.Buffer}catch{}s.isBN=function(w){return w instanceof s?!0:w!==null&&typeof w=="object"&&w.constructor.wordSize===s.wordSize&&Array.isArray(w.words)},s.max=function(w,R){return w.cmp(R)>0?w:R},s.min=function(w,R){return w.cmp(R)<0?w:R},s.prototype._init=function(w,R,N){if(typeof w=="number")return this._initNumber(w,R,N);if(typeof w=="object")return this._initArray(w,R,N);R==="hex"&&(R=16),n(R===(R|0)&&R>=2&&R<=36),w=w.toString().replace(/\s+/g,"");var Y=0;w[0]==="-"&&(Y++,this.negative=1),Y<w.length&&(R===16?this._parseHex(w,Y,N):(this._parseBase(w,R,Y),N==="le"&&this._initArray(this.toArray(),R,N)))},s.prototype._initNumber=function(w,R,N){w<0&&(this.negative=1,w=-w),w<67108864?(this.words=[w&67108863],this.length=1):w<4503599627370496?(this.words=[w&67108863,w/67108864&67108863],this.length=2):(n(w<9007199254740992),this.words=[w&67108863,w/67108864&67108863,1],this.length=3),N==="le"&&this._initArray(this.toArray(),R,N)},s.prototype._initArray=function(w,R,N){if(n(typeof w.length=="number"),w.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(w.length/3),this.words=new Array(this.length);for(var Y=0;Y<this.length;Y++)this.words[Y]=0;var z,G,te=0;if(N==="be")for(Y=w.length-1,z=0;Y>=0;Y-=3)G=w[Y]|w[Y-1]<<8|w[Y-2]<<16,this.words[z]|=G<<te&67108863,this.words[z+1]=G>>>26-te&67108863,te+=24,te>=26&&(te-=26,z++);else if(N==="le")for(Y=0,z=0;Y<w.length;Y+=3)G=w[Y]|w[Y+1]<<8|w[Y+2]<<16,this.words[z]|=G<<te&67108863,this.words[z+1]=G>>>26-te&67108863,te+=24,te>=26&&(te-=26,z++);return this._strip()};function a(L,w){var R=L.charCodeAt(w);if(R>=48&&R<=57)return R-48;if(R>=65&&R<=70)return R-55;if(R>=97&&R<=102)return R-87;n(!1,"Invalid character in "+L)}function c(L,w,R){var N=a(L,R);return R-1>=w&&(N|=a(L,R-1)<<4),N}s.prototype._parseHex=function(w,R,N){this.length=Math.ceil((w.length-R)/6),this.words=new Array(this.length);for(var Y=0;Y<this.length;Y++)this.words[Y]=0;var z=0,G=0,te;if(N==="be")for(Y=w.length-1;Y>=R;Y-=2)te=c(w,R,Y)<<z,this.words[G]|=te&67108863,z>=18?(z-=18,G+=1,this.words[G]|=te>>>26):z+=8;else{var X=w.length-R;for(Y=X%2===0?R+1:R;Y<w.length;Y+=2)te=c(w,R,Y)<<z,this.words[G]|=te&67108863,z>=18?(z-=18,G+=1,this.words[G]|=te>>>26):z+=8}this._strip()};function l(L,w,R,N){for(var Y=0,z=0,G=Math.min(L.length,R),te=w;te<G;te++){var X=L.charCodeAt(te)-48;Y*=N,X>=49?z=X-49+10:X>=17?z=X-17+10:z=X,n(X>=0&&z<N,"Invalid character"),Y+=z}return Y}s.prototype._parseBase=function(w,R,N){this.words=[0],this.length=1;for(var Y=0,z=1;z<=67108863;z*=R)Y++;Y--,z=z/R|0;for(var G=w.length-N,te=G%Y,X=Math.min(G,G-te)+N,T=0,A=N;A<X;A+=Y)T=l(w,A,A+Y,R),this.imuln(z),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T);if(te!==0){var O=1;for(T=l(w,A,w.length,R),A=0;A<te;A++)O*=R;this.imuln(O),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T)}this._strip()},s.prototype.copy=function(w){w.words=new Array(this.length);for(var R=0;R<this.length;R++)w.words[R]=this.words[R];w.length=this.length,w.negative=this.negative,w.red=this.red};function u(L,w){L.words=w.words,L.length=w.length,L.negative=w.negative,L.red=w.red}if(s.prototype._move=function(w){u(w,this)},s.prototype.clone=function(){var w=new s(null);return this.copy(w),w},s.prototype._expand=function(w){for(;this.length<w;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(w,R){w=w||10,R=R|0||1;var N;if(w===16||w==="hex"){N="";for(var Y=0,z=0,G=0;G<this.length;G++){var te=this.words[G],X=((te<<Y|z)&16777215).toString(16);z=te>>>24-Y&16777215,Y+=2,Y>=26&&(Y-=26,G--),z!==0||G!==this.length-1?N=h[6-X.length]+X+N:N=X+N}for(z!==0&&(N=z.toString(16)+N);N.length%R!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}if(w===(w|0)&&w>=2&&w<=36){var T=d[w],A=g[w];N="";var O=this.clone();for(O.negative=0;!O.isZero();){var I=O.modrn(A).toString(w);O=O.idivn(A),O.isZero()?N=I+N:N=h[T-I.length]+I+N}for(this.isZero()&&(N="0"+N);N.length%R!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var w=this.words[0];return this.length===2?w+=this.words[1]*67108864:this.length===3&&this.words[2]===1?w+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-w:w},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(w,R){return this.toArrayLike(o,w,R)}),s.prototype.toArray=function(w,R){return this.toArrayLike(Array,w,R)};var p=function(w,R){return w.allocUnsafe?w.allocUnsafe(R):new w(R)};s.prototype.toArrayLike=function(w,R,N){this._strip();var Y=this.byteLength(),z=N||Math.max(1,Y);n(Y<=z,"byte array longer than desired length"),n(z>0,"Requested array length <= 0");var G=p(w,z),te=R==="le"?"LE":"BE";return this["_toArrayLike"+te](G,Y),G},s.prototype._toArrayLikeLE=function(w,R){for(var N=0,Y=0,z=0,G=0;z<this.length;z++){var te=this.words[z]<<G|Y;w[N++]=te&255,N<w.length&&(w[N++]=te>>8&255),N<w.length&&(w[N++]=te>>16&255),G===6?(N<w.length&&(w[N++]=te>>24&255),Y=0,G=0):(Y=te>>>24,G+=2)}if(N<w.length)for(w[N++]=Y;N<w.length;)w[N++]=0},s.prototype._toArrayLikeBE=function(w,R){for(var N=w.length-1,Y=0,z=0,G=0;z<this.length;z++){var te=this.words[z]<<G|Y;w[N--]=te&255,N>=0&&(w[N--]=te>>8&255),N>=0&&(w[N--]=te>>16&255),G===6?(N>=0&&(w[N--]=te>>24&255),Y=0,G=0):(Y=te>>>24,G+=2)}if(N>=0)for(w[N--]=Y;N>=0;)w[N--]=0},Math.clz32?s.prototype._countBits=function(w){return 32-Math.clz32(w)}:s.prototype._countBits=function(w){var R=w,N=0;return R>=4096&&(N+=13,R>>>=13),R>=64&&(N+=7,R>>>=7),R>=8&&(N+=4,R>>>=4),R>=2&&(N+=2,R>>>=2),N+R},s.prototype._zeroBits=function(w){if(w===0)return 26;var R=w,N=0;return(R&8191)===0&&(N+=13,R>>>=13),(R&127)===0&&(N+=7,R>>>=7),(R&15)===0&&(N+=4,R>>>=4),(R&3)===0&&(N+=2,R>>>=2),(R&1)===0&&N++,N},s.prototype.bitLength=function(){var w=this.words[this.length-1],R=this._countBits(w);return(this.length-1)*26+R};function m(L){for(var w=new Array(L.bitLength()),R=0;R<w.length;R++){var N=R/26|0,Y=R%26;w[R]=L.words[N]>>>Y&1}return w}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var w=0,R=0;R<this.length;R++){var N=this._zeroBits(this.words[R]);if(w+=N,N!==26)break}return w},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(w){return this.negative!==0?this.abs().inotn(w).iaddn(1):this.clone()},s.prototype.fromTwos=function(w){return this.testn(w-1)?this.notn(w).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(w){for(;this.length<w.length;)this.words[this.length++]=0;for(var R=0;R<w.length;R++)this.words[R]=this.words[R]|w.words[R];return this._strip()},s.prototype.ior=function(w){return n((this.negative|w.negative)===0),this.iuor(w)},s.prototype.or=function(w){return this.length>w.length?this.clone().ior(w):w.clone().ior(this)},s.prototype.uor=function(w){return this.length>w.length?this.clone().iuor(w):w.clone().iuor(this)},s.prototype.iuand=function(w){var R;this.length>w.length?R=w:R=this;for(var N=0;N<R.length;N++)this.words[N]=this.words[N]&w.words[N];return this.length=R.length,this._strip()},s.prototype.iand=function(w){return n((this.negative|w.negative)===0),this.iuand(w)},s.prototype.and=function(w){return this.length>w.length?this.clone().iand(w):w.clone().iand(this)},s.prototype.uand=function(w){return this.length>w.length?this.clone().iuand(w):w.clone().iuand(this)},s.prototype.iuxor=function(w){var R,N;this.length>w.length?(R=this,N=w):(R=w,N=this);for(var Y=0;Y<N.length;Y++)this.words[Y]=R.words[Y]^N.words[Y];if(this!==R)for(;Y<R.length;Y++)this.words[Y]=R.words[Y];return this.length=R.length,this._strip()},s.prototype.ixor=function(w){return n((this.negative|w.negative)===0),this.iuxor(w)},s.prototype.xor=function(w){return this.length>w.length?this.clone().ixor(w):w.clone().ixor(this)},s.prototype.uxor=function(w){return this.length>w.length?this.clone().iuxor(w):w.clone().iuxor(this)},s.prototype.inotn=function(w){n(typeof w=="number"&&w>=0);var R=Math.ceil(w/26)|0,N=w%26;this._expand(R),N>0&&R--;for(var Y=0;Y<R;Y++)this.words[Y]=~this.words[Y]&67108863;return N>0&&(this.words[Y]=~this.words[Y]&67108863>>26-N),this._strip()},s.prototype.notn=function(w){return this.clone().inotn(w)},s.prototype.setn=function(w,R){n(typeof w=="number"&&w>=0);var N=w/26|0,Y=w%26;return this._expand(N+1),R?this.words[N]=this.words[N]|1<<Y:this.words[N]=this.words[N]&~(1<<Y),this._strip()},s.prototype.iadd=function(w){var R;if(this.negative!==0&&w.negative===0)return this.negative=0,R=this.isub(w),this.negative^=1,this._normSign();if(this.negative===0&&w.negative!==0)return w.negative=0,R=this.isub(w),w.negative=1,R._normSign();var N,Y;this.length>w.length?(N=this,Y=w):(N=w,Y=this);for(var z=0,G=0;G<Y.length;G++)R=(N.words[G]|0)+(Y.words[G]|0)+z,this.words[G]=R&67108863,z=R>>>26;for(;z!==0&&G<N.length;G++)R=(N.words[G]|0)+z,this.words[G]=R&67108863,z=R>>>26;if(this.length=N.length,z!==0)this.words[this.length]=z,this.length++;else if(N!==this)for(;G<N.length;G++)this.words[G]=N.words[G];return this},s.prototype.add=function(w){var R;return w.negative!==0&&this.negative===0?(w.negative=0,R=this.sub(w),w.negative^=1,R):w.negative===0&&this.negative!==0?(this.negative=0,R=w.sub(this),this.negative=1,R):this.length>w.length?this.clone().iadd(w):w.clone().iadd(this)},s.prototype.isub=function(w){if(w.negative!==0){w.negative=0;var R=this.iadd(w);return w.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(w),this.negative=1,this._normSign();var N=this.cmp(w);if(N===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Y,z;N>0?(Y=this,z=w):(Y=w,z=this);for(var G=0,te=0;te<z.length;te++)R=(Y.words[te]|0)-(z.words[te]|0)+G,G=R>>26,this.words[te]=R&67108863;for(;G!==0&&te<Y.length;te++)R=(Y.words[te]|0)+G,G=R>>26,this.words[te]=R&67108863;if(G===0&&te<Y.length&&Y!==this)for(;te<Y.length;te++)this.words[te]=Y.words[te];return this.length=Math.max(this.length,te),Y!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(w){return this.clone().isub(w)};function y(L,w,R){R.negative=w.negative^L.negative;var N=L.length+w.length|0;R.length=N,N=N-1|0;var Y=L.words[0]|0,z=w.words[0]|0,G=Y*z,te=G&67108863,X=G/67108864|0;R.words[0]=te;for(var T=1;T<N;T++){for(var A=X>>>26,O=X&67108863,I=Math.min(T,w.length-1),U=Math.max(0,T-L.length+1);U<=I;U++){var Z=T-U|0;Y=L.words[Z]|0,z=w.words[U]|0,G=Y*z+O,A+=G/67108864|0,O=G&67108863}R.words[T]=O|0,X=A|0}return X!==0?R.words[T]=X|0:R.length--,R._strip()}var v=function(w,R,N){var Y=w.words,z=R.words,G=N.words,te=0,X,T,A,O=Y[0]|0,I=O&8191,U=O>>>13,Z=Y[1]|0,oe=Z&8191,he=Z>>>13,re=Y[2]|0,F=re&8191,H=re>>>13,ue=Y[3]|0,le=ue&8191,we=ue>>>13,ie=Y[4]|0,B=ie&8191,q=ie>>>13,ne=Y[5]|0,de=ne&8191,_e=ne>>>13,Ce=Y[6]|0,Me=Ce&8191,xe=Ce>>>13,Ae=Y[7]|0,Oe=Ae&8191,se=Ae>>>13,V=Y[8]|0,Q=V&8191,K=V>>>13,M=Y[9]|0,P=M&8191,ee=M>>>13,pe=z[0]|0,be=pe&8191,fe=pe>>>13,Ee=z[1]|0,Le=Ee&8191,Ke=Ee>>>13,je=z[2]|0,Pe=je&8191,tt=je>>>13,gt=z[3]|0,lt=gt&8191,Et=gt>>>13,Er=z[4]|0,nr=Er&8191,ar=Er>>>13,hs=z[5]|0,Kr=hs&8191,hr=hs>>>13,zi=z[6]|0,ae=zi&8191,ge=zi>>>13,me=z[7]|0,W=me&8191,ve=me>>>13,Re=z[8]|0,Te=Re&8191,ze=Re>>>13,Qe=z[9]|0,at=Qe&8191,rt=Qe>>>13;N.negative=w.negative^R.negative,N.length=19,X=Math.imul(I,be),T=Math.imul(I,fe),T=T+Math.imul(U,be)|0,A=Math.imul(U,fe);var sr=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(sr>>>26)|0,sr&=67108863,X=Math.imul(oe,be),T=Math.imul(oe,fe),T=T+Math.imul(he,be)|0,A=Math.imul(he,fe),X=X+Math.imul(I,Le)|0,T=T+Math.imul(I,Ke)|0,T=T+Math.imul(U,Le)|0,A=A+Math.imul(U,Ke)|0;var dt=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(dt>>>26)|0,dt&=67108863,X=Math.imul(F,be),T=Math.imul(F,fe),T=T+Math.imul(H,be)|0,A=Math.imul(H,fe),X=X+Math.imul(oe,Le)|0,T=T+Math.imul(oe,Ke)|0,T=T+Math.imul(he,Le)|0,A=A+Math.imul(he,Ke)|0,X=X+Math.imul(I,Pe)|0,T=T+Math.imul(I,tt)|0,T=T+Math.imul(U,Pe)|0,A=A+Math.imul(U,tt)|0;var Bt=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,X=Math.imul(le,be),T=Math.imul(le,fe),T=T+Math.imul(we,be)|0,A=Math.imul(we,fe),X=X+Math.imul(F,Le)|0,T=T+Math.imul(F,Ke)|0,T=T+Math.imul(H,Le)|0,A=A+Math.imul(H,Ke)|0,X=X+Math.imul(oe,Pe)|0,T=T+Math.imul(oe,tt)|0,T=T+Math.imul(he,Pe)|0,A=A+Math.imul(he,tt)|0,X=X+Math.imul(I,lt)|0,T=T+Math.imul(I,Et)|0,T=T+Math.imul(U,lt)|0,A=A+Math.imul(U,Et)|0;var zt=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(zt>>>26)|0,zt&=67108863,X=Math.imul(B,be),T=Math.imul(B,fe),T=T+Math.imul(q,be)|0,A=Math.imul(q,fe),X=X+Math.imul(le,Le)|0,T=T+Math.imul(le,Ke)|0,T=T+Math.imul(we,Le)|0,A=A+Math.imul(we,Ke)|0,X=X+Math.imul(F,Pe)|0,T=T+Math.imul(F,tt)|0,T=T+Math.imul(H,Pe)|0,A=A+Math.imul(H,tt)|0,X=X+Math.imul(oe,lt)|0,T=T+Math.imul(oe,Et)|0,T=T+Math.imul(he,lt)|0,A=A+Math.imul(he,Et)|0,X=X+Math.imul(I,nr)|0,T=T+Math.imul(I,ar)|0,T=T+Math.imul(U,nr)|0,A=A+Math.imul(U,ar)|0;var jt=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(jt>>>26)|0,jt&=67108863,X=Math.imul(de,be),T=Math.imul(de,fe),T=T+Math.imul(_e,be)|0,A=Math.imul(_e,fe),X=X+Math.imul(B,Le)|0,T=T+Math.imul(B,Ke)|0,T=T+Math.imul(q,Le)|0,A=A+Math.imul(q,Ke)|0,X=X+Math.imul(le,Pe)|0,T=T+Math.imul(le,tt)|0,T=T+Math.imul(we,Pe)|0,A=A+Math.imul(we,tt)|0,X=X+Math.imul(F,lt)|0,T=T+Math.imul(F,Et)|0,T=T+Math.imul(H,lt)|0,A=A+Math.imul(H,Et)|0,X=X+Math.imul(oe,nr)|0,T=T+Math.imul(oe,ar)|0,T=T+Math.imul(he,nr)|0,A=A+Math.imul(he,ar)|0,X=X+Math.imul(I,Kr)|0,T=T+Math.imul(I,hr)|0,T=T+Math.imul(U,Kr)|0,A=A+Math.imul(U,hr)|0;var ir=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(ir>>>26)|0,ir&=67108863,X=Math.imul(Me,be),T=Math.imul(Me,fe),T=T+Math.imul(xe,be)|0,A=Math.imul(xe,fe),X=X+Math.imul(de,Le)|0,T=T+Math.imul(de,Ke)|0,T=T+Math.imul(_e,Le)|0,A=A+Math.imul(_e,Ke)|0,X=X+Math.imul(B,Pe)|0,T=T+Math.imul(B,tt)|0,T=T+Math.imul(q,Pe)|0,A=A+Math.imul(q,tt)|0,X=X+Math.imul(le,lt)|0,T=T+Math.imul(le,Et)|0,T=T+Math.imul(we,lt)|0,A=A+Math.imul(we,Et)|0,X=X+Math.imul(F,nr)|0,T=T+Math.imul(F,ar)|0,T=T+Math.imul(H,nr)|0,A=A+Math.imul(H,ar)|0,X=X+Math.imul(oe,Kr)|0,T=T+Math.imul(oe,hr)|0,T=T+Math.imul(he,Kr)|0,A=A+Math.imul(he,hr)|0,X=X+Math.imul(I,ae)|0,T=T+Math.imul(I,ge)|0,T=T+Math.imul(U,ae)|0,A=A+Math.imul(U,ge)|0;var Qt=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,X=Math.imul(Oe,be),T=Math.imul(Oe,fe),T=T+Math.imul(se,be)|0,A=Math.imul(se,fe),X=X+Math.imul(Me,Le)|0,T=T+Math.imul(Me,Ke)|0,T=T+Math.imul(xe,Le)|0,A=A+Math.imul(xe,Ke)|0,X=X+Math.imul(de,Pe)|0,T=T+Math.imul(de,tt)|0,T=T+Math.imul(_e,Pe)|0,A=A+Math.imul(_e,tt)|0,X=X+Math.imul(B,lt)|0,T=T+Math.imul(B,Et)|0,T=T+Math.imul(q,lt)|0,A=A+Math.imul(q,Et)|0,X=X+Math.imul(le,nr)|0,T=T+Math.imul(le,ar)|0,T=T+Math.imul(we,nr)|0,A=A+Math.imul(we,ar)|0,X=X+Math.imul(F,Kr)|0,T=T+Math.imul(F,hr)|0,T=T+Math.imul(H,Kr)|0,A=A+Math.imul(H,hr)|0,X=X+Math.imul(oe,ae)|0,T=T+Math.imul(oe,ge)|0,T=T+Math.imul(he,ae)|0,A=A+Math.imul(he,ge)|0,X=X+Math.imul(I,W)|0,T=T+Math.imul(I,ve)|0,T=T+Math.imul(U,W)|0,A=A+Math.imul(U,ve)|0;var tr=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(tr>>>26)|0,tr&=67108863,X=Math.imul(Q,be),T=Math.imul(Q,fe),T=T+Math.imul(K,be)|0,A=Math.imul(K,fe),X=X+Math.imul(Oe,Le)|0,T=T+Math.imul(Oe,Ke)|0,T=T+Math.imul(se,Le)|0,A=A+Math.imul(se,Ke)|0,X=X+Math.imul(Me,Pe)|0,T=T+Math.imul(Me,tt)|0,T=T+Math.imul(xe,Pe)|0,A=A+Math.imul(xe,tt)|0,X=X+Math.imul(de,lt)|0,T=T+Math.imul(de,Et)|0,T=T+Math.imul(_e,lt)|0,A=A+Math.imul(_e,Et)|0,X=X+Math.imul(B,nr)|0,T=T+Math.imul(B,ar)|0,T=T+Math.imul(q,nr)|0,A=A+Math.imul(q,ar)|0,X=X+Math.imul(le,Kr)|0,T=T+Math.imul(le,hr)|0,T=T+Math.imul(we,Kr)|0,A=A+Math.imul(we,hr)|0,X=X+Math.imul(F,ae)|0,T=T+Math.imul(F,ge)|0,T=T+Math.imul(H,ae)|0,A=A+Math.imul(H,ge)|0,X=X+Math.imul(oe,W)|0,T=T+Math.imul(oe,ve)|0,T=T+Math.imul(he,W)|0,A=A+Math.imul(he,ve)|0,X=X+Math.imul(I,Te)|0,T=T+Math.imul(I,ze)|0,T=T+Math.imul(U,Te)|0,A=A+Math.imul(U,ze)|0;var Zt=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,X=Math.imul(P,be),T=Math.imul(P,fe),T=T+Math.imul(ee,be)|0,A=Math.imul(ee,fe),X=X+Math.imul(Q,Le)|0,T=T+Math.imul(Q,Ke)|0,T=T+Math.imul(K,Le)|0,A=A+Math.imul(K,Ke)|0,X=X+Math.imul(Oe,Pe)|0,T=T+Math.imul(Oe,tt)|0,T=T+Math.imul(se,Pe)|0,A=A+Math.imul(se,tt)|0,X=X+Math.imul(Me,lt)|0,T=T+Math.imul(Me,Et)|0,T=T+Math.imul(xe,lt)|0,A=A+Math.imul(xe,Et)|0,X=X+Math.imul(de,nr)|0,T=T+Math.imul(de,ar)|0,T=T+Math.imul(_e,nr)|0,A=A+Math.imul(_e,ar)|0,X=X+Math.imul(B,Kr)|0,T=T+Math.imul(B,hr)|0,T=T+Math.imul(q,Kr)|0,A=A+Math.imul(q,hr)|0,X=X+Math.imul(le,ae)|0,T=T+Math.imul(le,ge)|0,T=T+Math.imul(we,ae)|0,A=A+Math.imul(we,ge)|0,X=X+Math.imul(F,W)|0,T=T+Math.imul(F,ve)|0,T=T+Math.imul(H,W)|0,A=A+Math.imul(H,ve)|0,X=X+Math.imul(oe,Te)|0,T=T+Math.imul(oe,ze)|0,T=T+Math.imul(he,Te)|0,A=A+Math.imul(he,ze)|0,X=X+Math.imul(I,at)|0,T=T+Math.imul(I,rt)|0,T=T+Math.imul(U,at)|0,A=A+Math.imul(U,rt)|0;var St=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(St>>>26)|0,St&=67108863,X=Math.imul(P,Le),T=Math.imul(P,Ke),T=T+Math.imul(ee,Le)|0,A=Math.imul(ee,Ke),X=X+Math.imul(Q,Pe)|0,T=T+Math.imul(Q,tt)|0,T=T+Math.imul(K,Pe)|0,A=A+Math.imul(K,tt)|0,X=X+Math.imul(Oe,lt)|0,T=T+Math.imul(Oe,Et)|0,T=T+Math.imul(se,lt)|0,A=A+Math.imul(se,Et)|0,X=X+Math.imul(Me,nr)|0,T=T+Math.imul(Me,ar)|0,T=T+Math.imul(xe,nr)|0,A=A+Math.imul(xe,ar)|0,X=X+Math.imul(de,Kr)|0,T=T+Math.imul(de,hr)|0,T=T+Math.imul(_e,Kr)|0,A=A+Math.imul(_e,hr)|0,X=X+Math.imul(B,ae)|0,T=T+Math.imul(B,ge)|0,T=T+Math.imul(q,ae)|0,A=A+Math.imul(q,ge)|0,X=X+Math.imul(le,W)|0,T=T+Math.imul(le,ve)|0,T=T+Math.imul(we,W)|0,A=A+Math.imul(we,ve)|0,X=X+Math.imul(F,Te)|0,T=T+Math.imul(F,ze)|0,T=T+Math.imul(H,Te)|0,A=A+Math.imul(H,ze)|0,X=X+Math.imul(oe,at)|0,T=T+Math.imul(oe,rt)|0,T=T+Math.imul(he,at)|0,A=A+Math.imul(he,rt)|0;var Nt=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,X=Math.imul(P,Pe),T=Math.imul(P,tt),T=T+Math.imul(ee,Pe)|0,A=Math.imul(ee,tt),X=X+Math.imul(Q,lt)|0,T=T+Math.imul(Q,Et)|0,T=T+Math.imul(K,lt)|0,A=A+Math.imul(K,Et)|0,X=X+Math.imul(Oe,nr)|0,T=T+Math.imul(Oe,ar)|0,T=T+Math.imul(se,nr)|0,A=A+Math.imul(se,ar)|0,X=X+Math.imul(Me,Kr)|0,T=T+Math.imul(Me,hr)|0,T=T+Math.imul(xe,Kr)|0,A=A+Math.imul(xe,hr)|0,X=X+Math.imul(de,ae)|0,T=T+Math.imul(de,ge)|0,T=T+Math.imul(_e,ae)|0,A=A+Math.imul(_e,ge)|0,X=X+Math.imul(B,W)|0,T=T+Math.imul(B,ve)|0,T=T+Math.imul(q,W)|0,A=A+Math.imul(q,ve)|0,X=X+Math.imul(le,Te)|0,T=T+Math.imul(le,ze)|0,T=T+Math.imul(we,Te)|0,A=A+Math.imul(we,ze)|0,X=X+Math.imul(F,at)|0,T=T+Math.imul(F,rt)|0,T=T+Math.imul(H,at)|0,A=A+Math.imul(H,rt)|0;var wt=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(wt>>>26)|0,wt&=67108863,X=Math.imul(P,lt),T=Math.imul(P,Et),T=T+Math.imul(ee,lt)|0,A=Math.imul(ee,Et),X=X+Math.imul(Q,nr)|0,T=T+Math.imul(Q,ar)|0,T=T+Math.imul(K,nr)|0,A=A+Math.imul(K,ar)|0,X=X+Math.imul(Oe,Kr)|0,T=T+Math.imul(Oe,hr)|0,T=T+Math.imul(se,Kr)|0,A=A+Math.imul(se,hr)|0,X=X+Math.imul(Me,ae)|0,T=T+Math.imul(Me,ge)|0,T=T+Math.imul(xe,ae)|0,A=A+Math.imul(xe,ge)|0,X=X+Math.imul(de,W)|0,T=T+Math.imul(de,ve)|0,T=T+Math.imul(_e,W)|0,A=A+Math.imul(_e,ve)|0,X=X+Math.imul(B,Te)|0,T=T+Math.imul(B,ze)|0,T=T+Math.imul(q,Te)|0,A=A+Math.imul(q,ze)|0,X=X+Math.imul(le,at)|0,T=T+Math.imul(le,rt)|0,T=T+Math.imul(we,at)|0,A=A+Math.imul(we,rt)|0;var At=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(At>>>26)|0,At&=67108863,X=Math.imul(P,nr),T=Math.imul(P,ar),T=T+Math.imul(ee,nr)|0,A=Math.imul(ee,ar),X=X+Math.imul(Q,Kr)|0,T=T+Math.imul(Q,hr)|0,T=T+Math.imul(K,Kr)|0,A=A+Math.imul(K,hr)|0,X=X+Math.imul(Oe,ae)|0,T=T+Math.imul(Oe,ge)|0,T=T+Math.imul(se,ae)|0,A=A+Math.imul(se,ge)|0,X=X+Math.imul(Me,W)|0,T=T+Math.imul(Me,ve)|0,T=T+Math.imul(xe,W)|0,A=A+Math.imul(xe,ve)|0,X=X+Math.imul(de,Te)|0,T=T+Math.imul(de,ze)|0,T=T+Math.imul(_e,Te)|0,A=A+Math.imul(_e,ze)|0,X=X+Math.imul(B,at)|0,T=T+Math.imul(B,rt)|0,T=T+Math.imul(q,at)|0,A=A+Math.imul(q,rt)|0;var Tt=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,X=Math.imul(P,Kr),T=Math.imul(P,hr),T=T+Math.imul(ee,Kr)|0,A=Math.imul(ee,hr),X=X+Math.imul(Q,ae)|0,T=T+Math.imul(Q,ge)|0,T=T+Math.imul(K,ae)|0,A=A+Math.imul(K,ge)|0,X=X+Math.imul(Oe,W)|0,T=T+Math.imul(Oe,ve)|0,T=T+Math.imul(se,W)|0,A=A+Math.imul(se,ve)|0,X=X+Math.imul(Me,Te)|0,T=T+Math.imul(Me,ze)|0,T=T+Math.imul(xe,Te)|0,A=A+Math.imul(xe,ze)|0,X=X+Math.imul(de,at)|0,T=T+Math.imul(de,rt)|0,T=T+Math.imul(_e,at)|0,A=A+Math.imul(_e,rt)|0;var mt=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(mt>>>26)|0,mt&=67108863,X=Math.imul(P,ae),T=Math.imul(P,ge),T=T+Math.imul(ee,ae)|0,A=Math.imul(ee,ge),X=X+Math.imul(Q,W)|0,T=T+Math.imul(Q,ve)|0,T=T+Math.imul(K,W)|0,A=A+Math.imul(K,ve)|0,X=X+Math.imul(Oe,Te)|0,T=T+Math.imul(Oe,ze)|0,T=T+Math.imul(se,Te)|0,A=A+Math.imul(se,ze)|0,X=X+Math.imul(Me,at)|0,T=T+Math.imul(Me,rt)|0,T=T+Math.imul(xe,at)|0,A=A+Math.imul(xe,rt)|0;var Fe=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,X=Math.imul(P,W),T=Math.imul(P,ve),T=T+Math.imul(ee,W)|0,A=Math.imul(ee,ve),X=X+Math.imul(Q,Te)|0,T=T+Math.imul(Q,ze)|0,T=T+Math.imul(K,Te)|0,A=A+Math.imul(K,ze)|0,X=X+Math.imul(Oe,at)|0,T=T+Math.imul(Oe,rt)|0,T=T+Math.imul(se,at)|0,A=A+Math.imul(se,rt)|0;var Ue=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,X=Math.imul(P,Te),T=Math.imul(P,ze),T=T+Math.imul(ee,Te)|0,A=Math.imul(ee,ze),X=X+Math.imul(Q,at)|0,T=T+Math.imul(Q,rt)|0,T=T+Math.imul(K,at)|0,A=A+Math.imul(K,rt)|0;var Je=(te+X|0)+((T&8191)<<13)|0;te=(A+(T>>>13)|0)+(Je>>>26)|0,Je&=67108863,X=Math.imul(P,at),T=Math.imul(P,rt),T=T+Math.imul(ee,at)|0,A=Math.imul(ee,rt);var Ge=(te+X|0)+((T&8191)<<13)|0;return te=(A+(T>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,G[0]=sr,G[1]=dt,G[2]=Bt,G[3]=zt,G[4]=jt,G[5]=ir,G[6]=Qt,G[7]=tr,G[8]=Zt,G[9]=St,G[10]=Nt,G[11]=wt,G[12]=At,G[13]=Tt,G[14]=mt,G[15]=Fe,G[16]=Ue,G[17]=Je,G[18]=Ge,te!==0&&(G[19]=te,N.length++),N};Math.imul||(v=y);function b(L,w,R){R.negative=w.negative^L.negative,R.length=L.length+w.length;for(var N=0,Y=0,z=0;z<R.length-1;z++){var G=Y;Y=0;for(var te=N&67108863,X=Math.min(z,w.length-1),T=Math.max(0,z-L.length+1);T<=X;T++){var A=z-T,O=L.words[A]|0,I=w.words[T]|0,U=O*I,Z=U&67108863;G=G+(U/67108864|0)|0,Z=Z+te|0,te=Z&67108863,G=G+(Z>>>26)|0,Y+=G>>>26,G&=67108863}R.words[z]=te,N=G,G=Y}return N!==0?R.words[z]=N:R.length--,R._strip()}function _(L,w,R){return b(L,w,R)}s.prototype.mulTo=function(w,R){var N,Y=this.length+w.length;return this.length===10&&w.length===10?N=v(this,w,R):Y<63?N=y(this,w,R):Y<1024?N=b(this,w,R):N=_(this,w,R),N},s.prototype.mul=function(w){var R=new s(null);return R.words=new Array(this.length+w.length),this.mulTo(w,R)},s.prototype.mulf=function(w){var R=new s(null);return R.words=new Array(this.length+w.length),_(this,w,R)},s.prototype.imul=function(w){return this.clone().mulTo(w,this)},s.prototype.imuln=function(w){var R=w<0;R&&(w=-w),n(typeof w=="number"),n(w<67108864);for(var N=0,Y=0;Y<this.length;Y++){var z=(this.words[Y]|0)*w,G=(z&67108863)+(N&67108863);N>>=26,N+=z/67108864|0,N+=G>>>26,this.words[Y]=G&67108863}return N!==0&&(this.words[Y]=N,this.length++),this.length=w===0?1:this.length,R?this.ineg():this},s.prototype.muln=function(w){return this.clone().imuln(w)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(w){var R=m(w);if(R.length===0)return new s(1);for(var N=this,Y=0;Y<R.length&&R[Y]===0;Y++,N=N.sqr());if(++Y<R.length)for(var z=N.sqr();Y<R.length;Y++,z=z.sqr())R[Y]!==0&&(N=N.mul(z));return N},s.prototype.iushln=function(w){n(typeof w=="number"&&w>=0);var R=w%26,N=(w-R)/26,Y=67108863>>>26-R<<26-R,z;if(R!==0){var G=0;for(z=0;z<this.length;z++){var te=this.words[z]&Y,X=(this.words[z]|0)-te<<R;this.words[z]=X|G,G=te>>>26-R}G&&(this.words[z]=G,this.length++)}if(N!==0){for(z=this.length-1;z>=0;z--)this.words[z+N]=this.words[z];for(z=0;z<N;z++)this.words[z]=0;this.length+=N}return this._strip()},s.prototype.ishln=function(w){return n(this.negative===0),this.iushln(w)},s.prototype.iushrn=function(w,R,N){n(typeof w=="number"&&w>=0);var Y;R?Y=(R-R%26)/26:Y=0;var z=w%26,G=Math.min((w-z)/26,this.length),te=67108863^67108863>>>z<<z,X=N;if(Y-=G,Y=Math.max(0,Y),X){for(var T=0;T<G;T++)X.words[T]=this.words[T];X.length=G}if(G!==0)if(this.length>G)for(this.length-=G,T=0;T<this.length;T++)this.words[T]=this.words[T+G];else this.words[0]=0,this.length=1;var A=0;for(T=this.length-1;T>=0&&(A!==0||T>=Y);T--){var O=this.words[T]|0;this.words[T]=A<<26-z|O>>>z,A=O&te}return X&&A!==0&&(X.words[X.length++]=A),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(w,R,N){return n(this.negative===0),this.iushrn(w,R,N)},s.prototype.shln=function(w){return this.clone().ishln(w)},s.prototype.ushln=function(w){return this.clone().iushln(w)},s.prototype.shrn=function(w){return this.clone().ishrn(w)},s.prototype.ushrn=function(w){return this.clone().iushrn(w)},s.prototype.testn=function(w){n(typeof w=="number"&&w>=0);var R=w%26,N=(w-R)/26,Y=1<<R;if(this.length<=N)return!1;var z=this.words[N];return!!(z&Y)},s.prototype.imaskn=function(w){n(typeof w=="number"&&w>=0);var R=w%26,N=(w-R)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=N)return this;if(R!==0&&N++,this.length=Math.min(N,this.length),R!==0){var Y=67108863^67108863>>>R<<R;this.words[this.length-1]&=Y}return this._strip()},s.prototype.maskn=function(w){return this.clone().imaskn(w)},s.prototype.iaddn=function(w){return n(typeof w=="number"),n(w<67108864),w<0?this.isubn(-w):this.negative!==0?this.length===1&&(this.words[0]|0)<=w?(this.words[0]=w-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(w),this.negative=1,this):this._iaddn(w)},s.prototype._iaddn=function(w){this.words[0]+=w;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},s.prototype.isubn=function(w){if(n(typeof w=="number"),n(w<67108864),w<0)return this.iaddn(-w);if(this.negative!==0)return this.negative=0,this.iaddn(w),this.negative=1,this;if(this.words[0]-=w,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this._strip()},s.prototype.addn=function(w){return this.clone().iaddn(w)},s.prototype.subn=function(w){return this.clone().isubn(w)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(w,R,N){var Y=w.length+N,z;this._expand(Y);var G,te=0;for(z=0;z<w.length;z++){G=(this.words[z+N]|0)+te;var X=(w.words[z]|0)*R;G-=X&67108863,te=(G>>26)-(X/67108864|0),this.words[z+N]=G&67108863}for(;z<this.length-N;z++)G=(this.words[z+N]|0)+te,te=G>>26,this.words[z+N]=G&67108863;if(te===0)return this._strip();for(n(te===-1),te=0,z=0;z<this.length;z++)G=-(this.words[z]|0)+te,te=G>>26,this.words[z]=G&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(w,R){var N=this.length-w.length,Y=this.clone(),z=w,G=z.words[z.length-1]|0,te=this._countBits(G);N=26-te,N!==0&&(z=z.ushln(N),Y.iushln(N),G=z.words[z.length-1]|0);var X=Y.length-z.length,T;if(R!=="mod"){T=new s(null),T.length=X+1,T.words=new Array(T.length);for(var A=0;A<T.length;A++)T.words[A]=0}var O=Y.clone()._ishlnsubmul(z,1,X);O.negative===0&&(Y=O,T&&(T.words[X]=1));for(var I=X-1;I>=0;I--){var U=(Y.words[z.length+I]|0)*67108864+(Y.words[z.length+I-1]|0);for(U=Math.min(U/G|0,67108863),Y._ishlnsubmul(z,U,I);Y.negative!==0;)U--,Y.negative=0,Y._ishlnsubmul(z,1,I),Y.isZero()||(Y.negative^=1);T&&(T.words[I]=U)}return T&&T._strip(),Y._strip(),R!=="div"&&N!==0&&Y.iushrn(N),{div:T||null,mod:Y}},s.prototype.divmod=function(w,R,N){if(n(!w.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var Y,z,G;return this.negative!==0&&w.negative===0?(G=this.neg().divmod(w,R),R!=="mod"&&(Y=G.div.neg()),R!=="div"&&(z=G.mod.neg(),N&&z.negative!==0&&z.iadd(w)),{div:Y,mod:z}):this.negative===0&&w.negative!==0?(G=this.divmod(w.neg(),R),R!=="mod"&&(Y=G.div.neg()),{div:Y,mod:G.mod}):(this.negative&w.negative)!==0?(G=this.neg().divmod(w.neg(),R),R!=="div"&&(z=G.mod.neg(),N&&z.negative!==0&&z.isub(w)),{div:G.div,mod:z}):w.length>this.length||this.cmp(w)<0?{div:new s(0),mod:this}:w.length===1?R==="div"?{div:this.divn(w.words[0]),mod:null}:R==="mod"?{div:null,mod:new s(this.modrn(w.words[0]))}:{div:this.divn(w.words[0]),mod:new s(this.modrn(w.words[0]))}:this._wordDiv(w,R)},s.prototype.div=function(w){return this.divmod(w,"div",!1).div},s.prototype.mod=function(w){return this.divmod(w,"mod",!1).mod},s.prototype.umod=function(w){return this.divmod(w,"mod",!0).mod},s.prototype.divRound=function(w){var R=this.divmod(w);if(R.mod.isZero())return R.div;var N=R.div.negative!==0?R.mod.isub(w):R.mod,Y=w.ushrn(1),z=w.andln(1),G=N.cmp(Y);return G<0||z===1&&G===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},s.prototype.modrn=function(w){var R=w<0;R&&(w=-w),n(w<=67108863);for(var N=(1<<26)%w,Y=0,z=this.length-1;z>=0;z--)Y=(N*Y+(this.words[z]|0))%w;return R?-Y:Y},s.prototype.modn=function(w){return this.modrn(w)},s.prototype.idivn=function(w){var R=w<0;R&&(w=-w),n(w<=67108863);for(var N=0,Y=this.length-1;Y>=0;Y--){var z=(this.words[Y]|0)+N*67108864;this.words[Y]=z/w|0,N=z%w}return this._strip(),R?this.ineg():this},s.prototype.divn=function(w){return this.clone().idivn(w)},s.prototype.egcd=function(w){n(w.negative===0),n(!w.isZero());var R=this,N=w.clone();R.negative!==0?R=R.umod(w):R=R.clone();for(var Y=new s(1),z=new s(0),G=new s(0),te=new s(1),X=0;R.isEven()&&N.isEven();)R.iushrn(1),N.iushrn(1),++X;for(var T=N.clone(),A=R.clone();!R.isZero();){for(var O=0,I=1;(R.words[0]&I)===0&&O<26;++O,I<<=1);if(O>0)for(R.iushrn(O);O-- >0;)(Y.isOdd()||z.isOdd())&&(Y.iadd(T),z.isub(A)),Y.iushrn(1),z.iushrn(1);for(var U=0,Z=1;(N.words[0]&Z)===0&&U<26;++U,Z<<=1);if(U>0)for(N.iushrn(U);U-- >0;)(G.isOdd()||te.isOdd())&&(G.iadd(T),te.isub(A)),G.iushrn(1),te.iushrn(1);R.cmp(N)>=0?(R.isub(N),Y.isub(G),z.isub(te)):(N.isub(R),G.isub(Y),te.isub(z))}return{a:G,b:te,gcd:N.iushln(X)}},s.prototype._invmp=function(w){n(w.negative===0),n(!w.isZero());var R=this,N=w.clone();R.negative!==0?R=R.umod(w):R=R.clone();for(var Y=new s(1),z=new s(0),G=N.clone();R.cmpn(1)>0&&N.cmpn(1)>0;){for(var te=0,X=1;(R.words[0]&X)===0&&te<26;++te,X<<=1);if(te>0)for(R.iushrn(te);te-- >0;)Y.isOdd()&&Y.iadd(G),Y.iushrn(1);for(var T=0,A=1;(N.words[0]&A)===0&&T<26;++T,A<<=1);if(T>0)for(N.iushrn(T);T-- >0;)z.isOdd()&&z.iadd(G),z.iushrn(1);R.cmp(N)>=0?(R.isub(N),Y.isub(z)):(N.isub(R),z.isub(Y))}var O;return R.cmpn(1)===0?O=Y:O=z,O.cmpn(0)<0&&O.iadd(w),O},s.prototype.gcd=function(w){if(this.isZero())return w.abs();if(w.isZero())return this.abs();var R=this.clone(),N=w.clone();R.negative=0,N.negative=0;for(var Y=0;R.isEven()&&N.isEven();Y++)R.iushrn(1),N.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;N.isEven();)N.iushrn(1);var z=R.cmp(N);if(z<0){var G=R;R=N,N=G}else if(z===0||N.cmpn(1)===0)break;R.isub(N)}while(!0);return N.iushln(Y)},s.prototype.invm=function(w){return this.egcd(w).a.umod(w)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(w){return this.words[0]&w},s.prototype.bincn=function(w){n(typeof w=="number");var R=w%26,N=(w-R)/26,Y=1<<R;if(this.length<=N)return this._expand(N+1),this.words[N]|=Y,this;for(var z=Y,G=N;z!==0&&G<this.length;G++){var te=this.words[G]|0;te+=z,z=te>>>26,te&=67108863,this.words[G]=te}return z!==0&&(this.words[G]=z,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(w){var R=w<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this._strip();var N;if(this.length>1)N=1;else{R&&(w=-w),n(w<=67108863,"Number is too big");var Y=this.words[0]|0;N=Y===w?0:Y<w?-1:1}return this.negative!==0?-N|0:N},s.prototype.cmp=function(w){if(this.negative!==0&&w.negative===0)return-1;if(this.negative===0&&w.negative!==0)return 1;var R=this.ucmp(w);return this.negative!==0?-R|0:R},s.prototype.ucmp=function(w){if(this.length>w.length)return 1;if(this.length<w.length)return-1;for(var R=0,N=this.length-1;N>=0;N--){var Y=this.words[N]|0,z=w.words[N]|0;if(Y!==z){Y<z?R=-1:Y>z&&(R=1);break}}return R},s.prototype.gtn=function(w){return this.cmpn(w)===1},s.prototype.gt=function(w){return this.cmp(w)===1},s.prototype.gten=function(w){return this.cmpn(w)>=0},s.prototype.gte=function(w){return this.cmp(w)>=0},s.prototype.ltn=function(w){return this.cmpn(w)===-1},s.prototype.lt=function(w){return this.cmp(w)===-1},s.prototype.lten=function(w){return this.cmpn(w)<=0},s.prototype.lte=function(w){return this.cmp(w)<=0},s.prototype.eqn=function(w){return this.cmpn(w)===0},s.prototype.eq=function(w){return this.cmp(w)===0},s.red=function(w){return new J(w)},s.prototype.toRed=function(w){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),w.convertTo(this)._forceRed(w)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(w){return this.red=w,this},s.prototype.forceRed=function(w){return n(!this.red,"Already a number in reduction context"),this._forceRed(w)},s.prototype.redAdd=function(w){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,w)},s.prototype.redIAdd=function(w){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,w)},s.prototype.redSub=function(w){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,w)},s.prototype.redISub=function(w){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,w)},s.prototype.redShl=function(w){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,w)},s.prototype.redMul=function(w){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.mul(this,w)},s.prototype.redIMul=function(w){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.imul(this,w)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(w){return n(this.red&&!w.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,w)};var x={k256:null,p224:null,p192:null,p25519:null};function E(L,w){this.name=L,this.p=new s(w,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}E.prototype._tmp=function(){var w=new s(null);return w.words=new Array(Math.ceil(this.n/13)),w},E.prototype.ireduce=function(w){var R=w,N;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),N=R.bitLength();while(N>this.n);var Y=N<this.n?-1:R.ucmp(this.p);return Y===0?(R.words[0]=0,R.length=1):Y>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},E.prototype.split=function(w,R){w.iushrn(this.n,0,R)},E.prototype.imulK=function(w){return w.imul(this.k)};function S(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(S,E),S.prototype.split=function(w,R){for(var N=4194303,Y=Math.min(w.length,9),z=0;z<Y;z++)R.words[z]=w.words[z];if(R.length=Y,w.length<=9){w.words[0]=0,w.length=1;return}var G=w.words[9];for(R.words[R.length++]=G&N,z=10;z<w.length;z++){var te=w.words[z]|0;w.words[z-10]=(te&N)<<4|G>>>22,G=te}G>>>=22,w.words[z-10]=G,G===0&&w.length>10?w.length-=10:w.length-=9},S.prototype.imulK=function(w){w.words[w.length]=0,w.words[w.length+1]=0,w.length+=2;for(var R=0,N=0;N<w.length;N++){var Y=w.words[N]|0;R+=Y*977,w.words[N]=R&67108863,R=Y*64+(R/67108864|0)}return w.words[w.length-1]===0&&(w.length--,w.words[w.length-1]===0&&w.length--),w};function C(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(C,E);function k(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(k,E);function $(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i($,E),$.prototype.imulK=function(w){for(var R=0,N=0;N<w.length;N++){var Y=(w.words[N]|0)*19+R,z=Y&67108863;Y>>>=26,w.words[N]=z,R=Y}return R!==0&&(w.words[w.length++]=R),w},s._prime=function(w){if(x[w])return x[w];var R;if(w==="k256")R=new S;else if(w==="p224")R=new C;else if(w==="p192")R=new k;else if(w==="p25519")R=new $;else throw new Error("Unknown prime "+w);return x[w]=R,R};function J(L){if(typeof L=="string"){var w=s._prime(L);this.m=w.p,this.prime=w}else n(L.gtn(1),"modulus must be greater than 1"),this.m=L,this.prime=null}J.prototype._verify1=function(w){n(w.negative===0,"red works only with positives"),n(w.red,"red works only with red numbers")},J.prototype._verify2=function(w,R){n((w.negative|R.negative)===0,"red works only with positives"),n(w.red&&w.red===R.red,"red works only with red numbers")},J.prototype.imod=function(w){return this.prime?this.prime.ireduce(w)._forceRed(this):(u(w,w.umod(this.m)._forceRed(this)),w)},J.prototype.neg=function(w){return w.isZero()?w.clone():this.m.sub(w)._forceRed(this)},J.prototype.add=function(w,R){this._verify2(w,R);var N=w.add(R);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},J.prototype.iadd=function(w,R){this._verify2(w,R);var N=w.iadd(R);return N.cmp(this.m)>=0&&N.isub(this.m),N},J.prototype.sub=function(w,R){this._verify2(w,R);var N=w.sub(R);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},J.prototype.isub=function(w,R){this._verify2(w,R);var N=w.isub(R);return N.cmpn(0)<0&&N.iadd(this.m),N},J.prototype.shl=function(w,R){return this._verify1(w),this.imod(w.ushln(R))},J.prototype.imul=function(w,R){return this._verify2(w,R),this.imod(w.imul(R))},J.prototype.mul=function(w,R){return this._verify2(w,R),this.imod(w.mul(R))},J.prototype.isqr=function(w){return this.imul(w,w.clone())},J.prototype.sqr=function(w){return this.mul(w,w)},J.prototype.sqrt=function(w){if(w.isZero())return w.clone();var R=this.m.andln(3);if(n(R%2===1),R===3){var N=this.m.add(new s(1)).iushrn(2);return this.pow(w,N)}for(var Y=this.m.subn(1),z=0;!Y.isZero()&&Y.andln(1)===0;)z++,Y.iushrn(1);n(!Y.isZero());var G=new s(1).toRed(this),te=G.redNeg(),X=this.m.subn(1).iushrn(1),T=this.m.bitLength();for(T=new s(2*T*T).toRed(this);this.pow(T,X).cmp(te)!==0;)T.redIAdd(te);for(var A=this.pow(T,Y),O=this.pow(w,Y.addn(1).iushrn(1)),I=this.pow(w,Y),U=z;I.cmp(G)!==0;){for(var Z=I,oe=0;Z.cmp(G)!==0;oe++)Z=Z.redSqr();n(oe<U);var he=this.pow(A,new s(1).iushln(U-oe-1));O=O.redMul(he),A=he.redSqr(),I=I.redMul(A),U=oe}return O},J.prototype.invm=function(w){var R=w._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},J.prototype.pow=function(w,R){if(R.isZero())return new s(1).toRed(this);if(R.cmpn(1)===0)return w.clone();var N=4,Y=new Array(1<<N);Y[0]=new s(1).toRed(this),Y[1]=w;for(var z=2;z<Y.length;z++)Y[z]=this.mul(Y[z-1],w);var G=Y[0],te=0,X=0,T=R.bitLength()%26;for(T===0&&(T=26),z=R.length-1;z>=0;z--){for(var A=R.words[z],O=T-1;O>=0;O--){var I=A>>O&1;if(G!==Y[0]&&(G=this.sqr(G)),I===0&&te===0){X=0;continue}te<<=1,te|=I,X++,!(X!==N&&(z!==0||O!==0))&&(G=this.mul(G,Y[te]),X=0,te=0)}T=26}return G},J.prototype.convertTo=function(w){var R=w.umod(this.m);return R===w?R.clone():R},J.prototype.convertFrom=function(w){var R=w.clone();return R.red=null,R},s.mont=function(w){return new j(w)};function j(L){J.call(this,L),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(j,J),j.prototype.convertTo=function(w){return this.imod(w.ushln(this.shift))},j.prototype.convertFrom=function(w){var R=this.imod(w.mul(this.rinv));return R.red=null,R},j.prototype.imul=function(w,R){if(w.isZero()||R.isZero())return w.words[0]=0,w.length=1,w;var N=w.imul(R),Y=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=N.isub(Y).iushrn(this.shift),G=z;return z.cmp(this.m)>=0?G=z.isub(this.m):z.cmpn(0)<0&&(G=z.iadd(this.m)),G._forceRed(this)},j.prototype.mul=function(w,R){if(w.isZero()||R.isZero())return new s(0)._forceRed(this);var N=w.mul(R),Y=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=N.isub(Y).iushrn(this.shift),G=z;return z.cmp(this.m)>=0?G=z.isub(this.m):z.cmpn(0)<0&&(G=z.iadd(this.m)),G._forceRed(this)},j.prototype.invm=function(w){var R=this.imod(w._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(r,Yse)}(_y)),_y.exports}var Xse=gq();const rr=Gs(Xse),Jse="bytes/5.8.0",Ln=new Ve(Jse);function mq(r){return!!r.toHexString}function Zh(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return Zh(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function RR(r){return ln(r)&&!(r.length%2)||Qd(r)}function LP(r){return typeof r=="number"&&r==r&&r%1===0}function Qd(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!LP(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!LP(t)||t<0||t>=256)return!1}return!0}function xr(r,e){if(e||(e={}),typeof r=="number"){Ln.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),Zh(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),mq(r)&&(r=r.toHexString()),ln(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Ln.throwArgumentError("hex data is odd-length","value",r));const n=[];for(let i=0;i<t.length;i+=2)n.push(parseInt(t.substring(i,i+2),16));return Zh(new Uint8Array(n))}return Qd(r)?Zh(new Uint8Array(r)):Ln.throwArgumentError("invalid arrayify value","value",r)}function rf(r){const e=r.map(i=>xr(i)),t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),Zh(n)}function wd(r){let e=xr(r);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function Qse(r,e){r=xr(r),r.length>e&&Ln.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(r,e-r.length),Zh(t)}function ln(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const b1="0123456789abcdef";function wr(r,e){if(e||(e={}),typeof r=="number"){Ln.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=b1[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),mq(r))return r.toHexString();if(ln(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":Ln.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(Qd(r)){let t="0x";for(let n=0;n<r.length;n++){let i=r[n];t+=b1[(i&240)>>4]+b1[i&15]}return t}return Ln.throwArgumentError("invalid hexlify value","value",r)}function Ef(r){if(typeof r!="string")r=wr(r);else if(!ln(r)||r.length%2)return null;return(r.length-2)/2}function ms(r,e,t){return typeof r!="string"?r=wr(r):(!ln(r)||r.length%2)&&Ln.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function yo(r){let e="0x";return r.forEach(t=>{e+=wr(t).substring(2)}),e}function kR(r){const e=Zse(wr(r,{hexPad:"left"}));return e==="0x"?"0x0":e}function Zse(r){typeof r!="string"&&(r=wr(r)),ln(r)||Ln.throwArgumentError("invalid hex string","value",r),r=r.substring(2);let e=0;for(;e<r.length&&r[e]==="0";)e++;return"0x"+r.substring(e)}function Fn(r,e){for(typeof r!="string"?r=wr(r):ln(r)||Ln.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&Ln.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function Ub(r){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(RR(r)){let t=xr(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=wr(t.slice(0,32)),e.s=wr(t.slice(32,64))):t.length===65?(e.r=wr(t.slice(0,32)),e.s=wr(t.slice(32,64)),e.v=t[64]):Ln.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:Ln.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=wr(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){const i=Qse(xr(e._vs),32);e._vs=wr(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Ln.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),i[0]&=127;const o=wr(i);e.s==null?e.s=o:e.s!==o&&Ln.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?Ln.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Ln.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!ln(e.r)?Ln.throwArgumentError("signature missing or invalid r","signature",r):e.r=Fn(e.r,32),e.s==null||!ln(e.s)?Ln.throwArgumentError("signature missing or invalid s","signature",r):e.s=Fn(e.s,32);const t=xr(e.s);t[0]>=128&&Ln.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);const n=wr(t);e._vs&&(ln(e._vs)||Ln.throwArgumentError("signature invalid _vs","signature",r),e._vs=Fn(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Ln.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const yq="bignumber/5.8.0";var pv=rr.BN;const Nc=new Ve(yq),w1={},eoe=9007199254740991;function toe(r){return r!=null&&(xt.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||ln(r)||typeof r=="bigint"||Qd(r))}let FP=!1;class xt{constructor(e,t){e!==w1&&Nc.throwError("cannot call constructor directly; use BigNumber.from",Ve.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Rs($r(this).fromTwos(e))}toTwos(e){return Rs($r(this).toTwos(e))}abs(){return this._hex[0]==="-"?xt.from(this._hex.substring(1)):this}add(e){return Rs($r(this).add($r(e)))}sub(e){return Rs($r(this).sub($r(e)))}div(e){return xt.from(e).isZero()&&Bo("division-by-zero","div"),Rs($r(this).div($r(e)))}mul(e){return Rs($r(this).mul($r(e)))}mod(e){const t=$r(e);return t.isNeg()&&Bo("division-by-zero","mod"),Rs($r(this).umod(t))}pow(e){const t=$r(e);return t.isNeg()&&Bo("negative-power","pow"),Rs($r(this).pow(t))}and(e){const t=$r(e);return(this.isNegative()||t.isNeg())&&Bo("unbound-bitwise-result","and"),Rs($r(this).and(t))}or(e){const t=$r(e);return(this.isNegative()||t.isNeg())&&Bo("unbound-bitwise-result","or"),Rs($r(this).or(t))}xor(e){const t=$r(e);return(this.isNegative()||t.isNeg())&&Bo("unbound-bitwise-result","xor"),Rs($r(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Bo("negative-width","mask"),Rs($r(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Bo("negative-width","shl"),Rs($r(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Bo("negative-width","shr"),Rs($r(this).shrn(e))}eq(e){return $r(this).eq($r(e))}lt(e){return $r(this).lt($r(e))}lte(e){return $r(this).lte($r(e))}gt(e){return $r(this).gt($r(e))}gte(e){return $r(this).gte($r(e))}isNegative(){return this._hex[0]==="-"}isZero(){return $r(this).isZero()}toNumber(){try{return $r(this).toNumber()}catch{Bo("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Nc.throwError("this platform does not support BigInt",Ve.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?FP||(FP=!0,Nc.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Nc.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Ve.errors.UNEXPECTED_ARGUMENT,{}):Nc.throwError("BigNumber.toString does not accept parameters",Ve.errors.UNEXPECTED_ARGUMENT,{})),$r(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof xt)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new xt(w1,cg(e)):e.match(/^-?[0-9]+$/)?new xt(w1,cg(new pv(e))):Nc.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Bo("underflow","BigNumber.from",e),(e>=eoe||e<=-9007199254740991)&&Bo("overflow","BigNumber.from",e),xt.from(String(e));const t=e;if(typeof t=="bigint")return xt.from(t.toString());if(Qd(t))return xt.from(wr(t));if(t)if(t.toHexString){const n=t.toHexString();if(typeof n=="string")return xt.from(n)}else{let n=t._hex;if(n==null&&t.type==="BigNumber"&&(n=t.hex),typeof n=="string"&&(ln(n)||n[0]==="-"&&ln(n.substring(1))))return xt.from(n)}return Nc.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function cg(r){if(typeof r!="string")return cg(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&Nc.throwArgumentError("invalid hex","value",r),r=cg(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function Rs(r){return xt.from(cg(r))}function $r(r){const e=xt.from(r).toHexString();return e[0]==="-"?new pv("-"+e.substring(3),16):new pv(e.substring(2),16)}function Bo(r,e,t){const n={fault:r,operation:e};return t!=null&&(n.value=t),Nc.throwError(r,Ve.errors.NUMERIC_FAULT,n)}function roe(r){return new pv(r,36).toString(16)}const ys=new Ve(yq),k0={},vq=xt.from(0),bq=xt.from(-1);function wq(r,e,t,n){const i={fault:e,operation:t};return n!==void 0&&(i.value=n),ys.throwError(r,Ve.errors.NUMERIC_FAULT,i)}let P0="0";for(;P0.length<256;)P0+=P0;function PR(r){if(typeof r!="number")try{r=xt.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+P0.substring(0,r):ys.throwArgumentError("invalid decimal size","decimals",r)}function x1(r,e){e==null&&(e=0);const t=PR(e);r=xt.from(r);const n=r.lt(vq);n&&(r=r.mul(bq));let i=r.mod(t).toString();for(;i.length<t.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=r.div(t).toString();return t.length===1?r=s:r=s+"."+i,n&&(r="-"+r),r}function Ya(r,e){e==null&&(e=0);const t=PR(e);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&ys.throwArgumentError("invalid decimal value","value",r);const n=r.substring(0,1)==="-";n&&(r=r.substring(1)),r==="."&&ys.throwArgumentError("missing value","value",r);const i=r.split(".");i.length>2&&ys.throwArgumentError("too many decimal points","value",r);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>t.length-1&&wq("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<t.length-1;)o+="0";const a=xt.from(s),c=xt.from(o);let l=a.mul(t).add(c);return n&&(l=l.mul(bq)),l}class ed{constructor(e,t,n,i){e!==k0&&ys.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Ve.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=n,this.decimals=i,this.name=(t?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=PR(i),Object.freeze(this)}static from(e){if(e instanceof ed)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||ys.throwArgumentError("invalid fixed format","format",e),t=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,c)=>e[o]==null?c:(typeof e[o]!==a&&ys.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);t=s("signed","boolean",t),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&ys.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&ys.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new ed(k0,t,n,i)}}class Ai{constructor(e,t,n,i){e!==k0&&ys.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Ve.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=t,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&ys.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=Ya(this._value,this.format.decimals),n=Ya(e._value,e.format.decimals);return Ai.fromValue(t.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=Ya(this._value,this.format.decimals),n=Ya(e._value,e.format.decimals);return Ai.fromValue(t.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=Ya(this._value,this.format.decimals),n=Ya(e._value,e.format.decimals);return Ai.fromValue(t.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=Ya(this._value,this.format.decimals),n=Ya(e._value,e.format.decimals);return Ai.fromValue(t.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Ai.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(t=t.subUnsafe(UP.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Ai.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(t=t.addUnsafe(UP.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&ys.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const n=Ai.from("1"+P0.substring(0,e),this.format),i=noe.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&ys.throwArgumentError("invalid byte width","width",e);const t=xt.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Fn(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ai.fromString(this._value,e)}static fromValue(e,t,n){return n==null&&t!=null&&!toe(t)&&(n=t,t=null),t==null&&(t=0),n==null&&(n="fixed"),Ai.fromString(x1(e,t),ed.from(n))}static fromString(e,t){t==null&&(t="fixed");const n=ed.from(t),i=Ya(e,n.decimals);!n.signed&&i.lt(vq)&&wq("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=Fn(s,n.width/8));const o=x1(i,n.decimals);return new Ai(k0,s,o,n)}static fromBytes(e,t){t==null&&(t="fixed");const n=ed.from(t);if(xr(e).length>n.width/8)throw new Error("overflow");let i=xt.from(e);n.signed&&(i=i.fromTwos(n.width));const s=i.toTwos((n.signed?0:1)+n.width).toHexString(),o=x1(i,n.decimals);return new Ai(k0,s,o,n)}static from(e,t){if(typeof e=="string")return Ai.fromString(e,t);if(Qd(e))return Ai.fromBytes(e,t);try{return Ai.fromValue(e,0,t)}catch(n){if(n.code!==Ve.errors.INVALID_ARGUMENT)throw n}return ys.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const UP=Ai.from(1),noe=Ai.from("0.5"),ioe="abstract-provider/5.8.0";var soe=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const ooe=new Ve(ioe);class aoe extends jse{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class OR{constructor(){ooe.checkAbstract(new.target,OR),Nr(this,"_isProvider",!0)}getFeeData(){return soe(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Ri({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=xt.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const coe="networks/5.8.0",zP=new Ve(coe);function loe(r){return r&&typeof r.renetwork=="function"}function la(r){const e=function(t,n){n==null&&(n={});const i=[];if(t.InfuraProvider&&n.infura!=="-")try{i.push(new t.InfuraProvider(r,n.infura))}catch{}if(t.EtherscanProvider&&n.etherscan!=="-")try{i.push(new t.EtherscanProvider(r,n.etherscan))}catch{}if(t.AlchemyProvider&&n.alchemy!=="-")try{i.push(new t.AlchemyProvider(r,n.alchemy))}catch{}if(t.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(r,n.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new t.CloudflareProvider(r))}catch{}if(t.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(r,n.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(t.QuickNodeProvider&&n.quicknode!=="-")try{i.push(new t.QuickNodeProvider(r,n.quicknode))}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:r==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return la(t)},e}function gv(r,e){const t=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(r,e):null};return t.renetwork=function(n){return gv(r,n)},t}const qP={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:la("homestead")},jP={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:la("ropsten")},VP={chainId:63,name:"classicMordor",_defaultProvider:gv("https://www.ethercluster.com/mordor","classicMordor")},Pm={unspecified:{chainId:0,name:"unspecified"},homestead:qP,mainnet:qP,morden:{chainId:2,name:"morden"},ropsten:jP,testnet:jP,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:la("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:la("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:la("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:la("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:la("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:gv("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:VP,classicTestnet:VP,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:gv("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:la("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:la("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:la("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function uoe(r){if(r==null)return null;if(typeof r=="number"){for(const n in Pm){const i=Pm[n];if(i.chainId===r)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:r,name:"unknown"}}if(typeof r=="string"){const n=Pm[r];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=Pm[r.name];if(!e)return typeof r.chainId!="number"&&zP.throwArgumentError("invalid network chainId","network",r),r;r.chainId!==0&&r.chainId!==e.chainId&&zP.throwArgumentError("network chainId mismatch","network",r);let t=r._defaultProvider||null;return t==null&&e._defaultProvider&&(loe(e._defaultProvider)?t=e._defaultProvider.renetwork(r):t=e._defaultProvider),{name:r.name,chainId:e.chainId,ensAddress:r.ensAddress||e.ensAddress||null,_defaultProvider:t}}function xq(r){r=atob(r);const e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return xr(e)}function _q(r){r=xr(r);let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return btoa(e)}class Sq{constructor(e){Nr(this,"alphabet",e),Nr(this,"base",e.length),Nr(this,"_alphabetMap",{}),Nr(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=xr(e);if(t.length===0)return"";let n=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)t.push(0);return xr(new Uint8Array(t.reverse()))}}new Sq("abcdefghijklmnopqrstuvwxyz234567");const OA=new Sq("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),foe="0x0000000000000000000000000000000000000000",hoe=xt.from(0),doe="0x0000000000000000000000000000000000000000000000000000000000000000";function poe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Eq={exports:{}},Qn=Eq.exports={},Qa,Za;function DA(){throw new Error("setTimeout has not been defined")}function $A(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Qa=setTimeout:Qa=DA}catch{Qa=DA}try{typeof clearTimeout=="function"?Za=clearTimeout:Za=$A}catch{Za=$A}})();function Aq(r){if(Qa===setTimeout)return setTimeout(r,0);if((Qa===DA||!Qa)&&setTimeout)return Qa=setTimeout,setTimeout(r,0);try{return Qa(r,0)}catch{try{return Qa.call(null,r,0)}catch{return Qa.call(this,r,0)}}}function goe(r){if(Za===clearTimeout)return clearTimeout(r);if((Za===$A||!Za)&&clearTimeout)return Za=clearTimeout,clearTimeout(r);try{return Za(r)}catch{try{return Za.call(null,r)}catch{return Za.call(this,r)}}}var Gc=[],td=!1,nf,Sy=-1;function moe(){!td||!nf||(td=!1,nf.length?Gc=nf.concat(Gc):Sy=-1,Gc.length&&Iq())}function Iq(){if(!td){var r=Aq(moe);td=!0;for(var e=Gc.length;e;){for(nf=Gc,Gc=[];++Sy<e;)nf&&nf[Sy].run();Sy=-1,e=Gc.length}nf=null,td=!1,goe(r)}}Qn.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Gc.push(new Cq(r,e)),Gc.length===1&&!td&&Aq(Iq)};function Cq(r,e){this.fun=r,this.array=e}Cq.prototype.run=function(){this.fun.apply(null,this.array)};Qn.title="browser";Qn.browser=!0;Qn.env={};Qn.argv=[];Qn.version="";Qn.versions={};function yl(){}Qn.on=yl;Qn.addListener=yl;Qn.once=yl;Qn.off=yl;Qn.removeListener=yl;Qn.removeAllListeners=yl;Qn.emit=yl;Qn.prependListener=yl;Qn.prependOnceListener=yl;Qn.listeners=function(r){return[]};Qn.binding=function(r){throw new Error("process.binding is not supported")};Qn.cwd=function(){return"/"};Qn.chdir=function(r){throw new Error("process.chdir is not supported")};Qn.umask=function(){return 0};var yoe=Eq.exports;const Kt=poe(yoe);var _1={exports:{}},KP;function voe(){return KP||(KP=1,function(r){(function(){var e="input is invalid type",t="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof Kt=="object"&&Kt.versions&&Kt.versions.node;o?i=gi:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,c=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],f=[4,1024,262144,67108864],h=[1,256,65536,16777216],d=[6,1536,393216,100663296],g=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],m=[224,256,384,512],y=[128,256],v=["hex","buffer","arrayBuffer","array","digest"],b={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(I){return Object.prototype.toString.call(I)==="[object Array]"}),c&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(I){return typeof I=="object"&&I.buffer&&I.buffer.constructor===ArrayBuffer});for(var _=function(I,U,Z){return function(oe){return new T(I,U,I).update(oe)[Z]()}},x=function(I,U,Z){return function(oe,he){return new T(I,U,he).update(oe)[Z]()}},E=function(I,U,Z){return function(oe,he,re,F){return w["cshake"+I].update(oe,he,re,F)[Z]()}},S=function(I,U,Z){return function(oe,he,re,F){return w["kmac"+I].update(oe,he,re,F)[Z]()}},C=function(I,U,Z,oe){for(var he=0;he<v.length;++he){var re=v[he];I[re]=U(Z,oe,re)}return I},k=function(I,U){var Z=_(I,U,"hex");return Z.create=function(){return new T(I,U,I)},Z.update=function(oe){return Z.create().update(oe)},C(Z,_,I,U)},$=function(I,U){var Z=x(I,U,"hex");return Z.create=function(oe){return new T(I,U,oe)},Z.update=function(oe,he){return Z.create(he).update(oe)},C(Z,x,I,U)},J=function(I,U){var Z=b[I],oe=E(I,U,"hex");return oe.create=function(he,re,F){return!re&&!F?w["shake"+I].create(he):new T(I,U,he).bytepad([re,F],Z)},oe.update=function(he,re,F,H){return oe.create(re,F,H).update(he)},C(oe,E,I,U)},j=function(I,U){var Z=b[I],oe=S(I,U,"hex");return oe.create=function(he,re,F){return new A(I,U,re).bytepad(["KMAC",F],Z).bytepad([he],Z)},oe.update=function(he,re,F,H){return oe.create(he,F,H).update(re)},C(oe,S,I,U)},L=[{name:"keccak",padding:h,bits:m,createMethod:k},{name:"sha3",padding:d,bits:m,createMethod:k},{name:"shake",padding:u,bits:y,createMethod:$},{name:"cshake",padding:f,bits:y,createMethod:J},{name:"kmac",padding:f,bits:y,createMethod:j}],w={},R=[],N=0;N<L.length;++N)for(var Y=L[N],z=Y.bits,G=0;G<z.length;++G){var te=Y.name+"_"+z[G];if(R.push(te),w[te]=Y.createMethod(z[G],Y.padding),Y.name!=="sha3"){var X=Y.name+z[G];R.push(X),w[X]=w[te]}}function T(I,U,Z){this.blocks=[],this.s=[],this.padding=U,this.outputBits=Z,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(I<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Z>>5,this.extraBytes=(Z&31)>>3;for(var oe=0;oe<50;++oe)this.s[oe]=0}T.prototype.update=function(I){if(this.finalized)throw new Error(t);var U,Z=typeof I;if(Z!=="string"){if(Z==="object"){if(I===null)throw new Error(e);if(c&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!c||!ArrayBuffer.isView(I)))throw new Error(e)}else throw new Error(e);U=!0}for(var oe=this.blocks,he=this.byteCount,re=I.length,F=this.blockCount,H=0,ue=this.s,le,we;H<re;){if(this.reset)for(this.reset=!1,oe[0]=this.block,le=1;le<F+1;++le)oe[le]=0;if(U)for(le=this.start;H<re&&le<he;++H)oe[le>>2]|=I[H]<<g[le++&3];else for(le=this.start;H<re&&le<he;++H)we=I.charCodeAt(H),we<128?oe[le>>2]|=we<<g[le++&3]:we<2048?(oe[le>>2]|=(192|we>>6)<<g[le++&3],oe[le>>2]|=(128|we&63)<<g[le++&3]):we<55296||we>=57344?(oe[le>>2]|=(224|we>>12)<<g[le++&3],oe[le>>2]|=(128|we>>6&63)<<g[le++&3],oe[le>>2]|=(128|we&63)<<g[le++&3]):(we=65536+((we&1023)<<10|I.charCodeAt(++H)&1023),oe[le>>2]|=(240|we>>18)<<g[le++&3],oe[le>>2]|=(128|we>>12&63)<<g[le++&3],oe[le>>2]|=(128|we>>6&63)<<g[le++&3],oe[le>>2]|=(128|we&63)<<g[le++&3]);if(this.lastByteIndex=le,le>=he){for(this.start=le-he,this.block=oe[F],le=0;le<F;++le)ue[le]^=oe[le];O(ue),this.reset=!0}else this.start=le}return this},T.prototype.encode=function(I,U){var Z=I&255,oe=1,he=[Z];for(I=I>>8,Z=I&255;Z>0;)he.unshift(Z),I=I>>8,Z=I&255,++oe;return U?he.push(oe):he.unshift(oe),this.update(he),he.length},T.prototype.encodeString=function(I){var U,Z=typeof I;if(Z!=="string"){if(Z==="object"){if(I===null)throw new Error(e);if(c&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!c||!ArrayBuffer.isView(I)))throw new Error(e)}else throw new Error(e);U=!0}var oe=0,he=I.length;if(U)oe=he;else for(var re=0;re<I.length;++re){var F=I.charCodeAt(re);F<128?oe+=1:F<2048?oe+=2:F<55296||F>=57344?oe+=3:(F=65536+((F&1023)<<10|I.charCodeAt(++re)&1023),oe+=4)}return oe+=this.encode(oe*8),this.update(I),oe},T.prototype.bytepad=function(I,U){for(var Z=this.encode(U),oe=0;oe<I.length;++oe)Z+=this.encodeString(I[oe]);var he=U-Z%U,re=[];return re.length=he,this.update(re),this},T.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var I=this.blocks,U=this.lastByteIndex,Z=this.blockCount,oe=this.s;if(I[U>>2]|=this.padding[U&3],this.lastByteIndex===this.byteCount)for(I[0]=I[Z],U=1;U<Z+1;++U)I[U]=0;for(I[Z-1]|=2147483648,U=0;U<Z;++U)oe[U]^=I[U];O(oe)}},T.prototype.toString=T.prototype.hex=function(){this.finalize();for(var I=this.blockCount,U=this.s,Z=this.outputBlocks,oe=this.extraBytes,he=0,re=0,F="",H;re<Z;){for(he=0;he<I&&re<Z;++he,++re)H=U[he],F+=l[H>>4&15]+l[H&15]+l[H>>12&15]+l[H>>8&15]+l[H>>20&15]+l[H>>16&15]+l[H>>28&15]+l[H>>24&15];re%I===0&&(O(U),he=0)}return oe&&(H=U[he],F+=l[H>>4&15]+l[H&15],oe>1&&(F+=l[H>>12&15]+l[H>>8&15]),oe>2&&(F+=l[H>>20&15]+l[H>>16&15])),F},T.prototype.arrayBuffer=function(){this.finalize();var I=this.blockCount,U=this.s,Z=this.outputBlocks,oe=this.extraBytes,he=0,re=0,F=this.outputBits>>3,H;oe?H=new ArrayBuffer(Z+1<<2):H=new ArrayBuffer(F);for(var ue=new Uint32Array(H);re<Z;){for(he=0;he<I&&re<Z;++he,++re)ue[re]=U[he];re%I===0&&O(U)}return oe&&(ue[he]=U[he],H=H.slice(0,F)),H},T.prototype.buffer=T.prototype.arrayBuffer,T.prototype.digest=T.prototype.array=function(){this.finalize();for(var I=this.blockCount,U=this.s,Z=this.outputBlocks,oe=this.extraBytes,he=0,re=0,F=[],H,ue;re<Z;){for(he=0;he<I&&re<Z;++he,++re)H=re<<2,ue=U[he],F[H]=ue&255,F[H+1]=ue>>8&255,F[H+2]=ue>>16&255,F[H+3]=ue>>24&255;re%I===0&&O(U)}return oe&&(H=re<<2,ue=U[he],F[H]=ue&255,oe>1&&(F[H+1]=ue>>8&255),oe>2&&(F[H+2]=ue>>16&255)),F};function A(I,U,Z){T.call(this,I,U,Z)}A.prototype=new T,A.prototype.finalize=function(){return this.encode(this.outputBits,!0),T.prototype.finalize.call(this)};var O=function(I){var U,Z,oe,he,re,F,H,ue,le,we,ie,B,q,ne,de,_e,Ce,Me,xe,Ae,Oe,se,V,Q,K,M,P,ee,pe,be,fe,Ee,Le,Ke,je,Pe,tt,gt,lt,Et,Er,nr,ar,hs,Kr,hr,zi,ae,ge,me,W,ve,Re,Te,ze,Qe,at,rt,sr,dt,Bt,zt,jt;for(oe=0;oe<48;oe+=2)he=I[0]^I[10]^I[20]^I[30]^I[40],re=I[1]^I[11]^I[21]^I[31]^I[41],F=I[2]^I[12]^I[22]^I[32]^I[42],H=I[3]^I[13]^I[23]^I[33]^I[43],ue=I[4]^I[14]^I[24]^I[34]^I[44],le=I[5]^I[15]^I[25]^I[35]^I[45],we=I[6]^I[16]^I[26]^I[36]^I[46],ie=I[7]^I[17]^I[27]^I[37]^I[47],B=I[8]^I[18]^I[28]^I[38]^I[48],q=I[9]^I[19]^I[29]^I[39]^I[49],U=B^(F<<1|H>>>31),Z=q^(H<<1|F>>>31),I[0]^=U,I[1]^=Z,I[10]^=U,I[11]^=Z,I[20]^=U,I[21]^=Z,I[30]^=U,I[31]^=Z,I[40]^=U,I[41]^=Z,U=he^(ue<<1|le>>>31),Z=re^(le<<1|ue>>>31),I[2]^=U,I[3]^=Z,I[12]^=U,I[13]^=Z,I[22]^=U,I[23]^=Z,I[32]^=U,I[33]^=Z,I[42]^=U,I[43]^=Z,U=F^(we<<1|ie>>>31),Z=H^(ie<<1|we>>>31),I[4]^=U,I[5]^=Z,I[14]^=U,I[15]^=Z,I[24]^=U,I[25]^=Z,I[34]^=U,I[35]^=Z,I[44]^=U,I[45]^=Z,U=ue^(B<<1|q>>>31),Z=le^(q<<1|B>>>31),I[6]^=U,I[7]^=Z,I[16]^=U,I[17]^=Z,I[26]^=U,I[27]^=Z,I[36]^=U,I[37]^=Z,I[46]^=U,I[47]^=Z,U=we^(he<<1|re>>>31),Z=ie^(re<<1|he>>>31),I[8]^=U,I[9]^=Z,I[18]^=U,I[19]^=Z,I[28]^=U,I[29]^=Z,I[38]^=U,I[39]^=Z,I[48]^=U,I[49]^=Z,ne=I[0],de=I[1],hr=I[11]<<4|I[10]>>>28,zi=I[10]<<4|I[11]>>>28,ee=I[20]<<3|I[21]>>>29,pe=I[21]<<3|I[20]>>>29,dt=I[31]<<9|I[30]>>>23,Bt=I[30]<<9|I[31]>>>23,nr=I[40]<<18|I[41]>>>14,ar=I[41]<<18|I[40]>>>14,Ke=I[2]<<1|I[3]>>>31,je=I[3]<<1|I[2]>>>31,_e=I[13]<<12|I[12]>>>20,Ce=I[12]<<12|I[13]>>>20,ae=I[22]<<10|I[23]>>>22,ge=I[23]<<10|I[22]>>>22,be=I[33]<<13|I[32]>>>19,fe=I[32]<<13|I[33]>>>19,zt=I[42]<<2|I[43]>>>30,jt=I[43]<<2|I[42]>>>30,Te=I[5]<<30|I[4]>>>2,ze=I[4]<<30|I[5]>>>2,Pe=I[14]<<6|I[15]>>>26,tt=I[15]<<6|I[14]>>>26,Me=I[25]<<11|I[24]>>>21,xe=I[24]<<11|I[25]>>>21,me=I[34]<<15|I[35]>>>17,W=I[35]<<15|I[34]>>>17,Ee=I[45]<<29|I[44]>>>3,Le=I[44]<<29|I[45]>>>3,Q=I[6]<<28|I[7]>>>4,K=I[7]<<28|I[6]>>>4,Qe=I[17]<<23|I[16]>>>9,at=I[16]<<23|I[17]>>>9,gt=I[26]<<25|I[27]>>>7,lt=I[27]<<25|I[26]>>>7,Ae=I[36]<<21|I[37]>>>11,Oe=I[37]<<21|I[36]>>>11,ve=I[47]<<24|I[46]>>>8,Re=I[46]<<24|I[47]>>>8,hs=I[8]<<27|I[9]>>>5,Kr=I[9]<<27|I[8]>>>5,M=I[18]<<20|I[19]>>>12,P=I[19]<<20|I[18]>>>12,rt=I[29]<<7|I[28]>>>25,sr=I[28]<<7|I[29]>>>25,Et=I[38]<<8|I[39]>>>24,Er=I[39]<<8|I[38]>>>24,se=I[48]<<14|I[49]>>>18,V=I[49]<<14|I[48]>>>18,I[0]=ne^~_e&Me,I[1]=de^~Ce&xe,I[10]=Q^~M&ee,I[11]=K^~P&pe,I[20]=Ke^~Pe&gt,I[21]=je^~tt&lt,I[30]=hs^~hr&ae,I[31]=Kr^~zi&ge,I[40]=Te^~Qe&rt,I[41]=ze^~at&sr,I[2]=_e^~Me&Ae,I[3]=Ce^~xe&Oe,I[12]=M^~ee&be,I[13]=P^~pe&fe,I[22]=Pe^~gt&Et,I[23]=tt^~lt&Er,I[32]=hr^~ae&me,I[33]=zi^~ge&W,I[42]=Qe^~rt&dt,I[43]=at^~sr&Bt,I[4]=Me^~Ae&se,I[5]=xe^~Oe&V,I[14]=ee^~be&Ee,I[15]=pe^~fe&Le,I[24]=gt^~Et&nr,I[25]=lt^~Er&ar,I[34]=ae^~me&ve,I[35]=ge^~W&Re,I[44]=rt^~dt&zt,I[45]=sr^~Bt&jt,I[6]=Ae^~se&ne,I[7]=Oe^~V&de,I[16]=be^~Ee&Q,I[17]=fe^~Le&K,I[26]=Et^~nr&Ke,I[27]=Er^~ar&je,I[36]=me^~ve&hs,I[37]=W^~Re&Kr,I[46]=dt^~zt&Te,I[47]=Bt^~jt&ze,I[8]=se^~ne&_e,I[9]=V^~de&Ce,I[18]=Ee^~Q&M,I[19]=Le^~K&P,I[28]=nr^~Ke&Pe,I[29]=ar^~je&tt,I[38]=ve^~hs&hr,I[39]=Re^~Kr&zi,I[48]=zt^~Te&Qe,I[49]=jt^~ze&at,I[0]^=p[oe],I[1]^=p[oe+1]};if(a)r.exports=w;else for(N=0;N<R.length;++N)i[R[N]]=w[R[N]]})()}(_1)),_1.exports}var boe=voe();const woe=Gs(boe);function Bi(r){return"0x"+woe.keccak_256(xr(r))}const xoe="strings/5.8.0",Tq=new Ve(xoe);var lg;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(lg||(lg={}));var co;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(co||(co={}));function _oe(r,e,t,n,i){return Tq.throwArgumentError(`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function Rq(r,e,t,n,i){if(r===co.BAD_PREFIX||r===co.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return r===co.OVERRUN?t.length-e-1:0}function Soe(r,e,t,n,i){return r===co.OVERLONG?(n.push(i),0):(n.push(65533),Rq(r,e,t))}const Eoe=Object.freeze({error:_oe,ignore:Rq,replace:Soe});function kq(r,e){e==null&&(e=Eoe.error),r=xr(r);const t=[];let n=0;for(;n<r.length;){const i=r[n++];if(i>>7===0){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?n+=e(co.UNEXPECTED_CONTINUE,n-1,r,t):n+=e(co.BAD_PREFIX,n-1,r,t);continue}if(n-1+s>=r.length){n+=e(co.OVERRUN,n-1,r,t);continue}let a=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let l=r[n];if((l&192)!=128){n+=e(co.MISSING_CONTINUE,n,r,t),a=null;break}a=a<<6|l&63,n++}if(a!==null){if(a>1114111){n+=e(co.OUT_OF_RANGE,n-1-s,r,t,a);continue}if(a>=55296&&a<=57343){n+=e(co.UTF16_SURROGATE,n-1-s,r,t,a);continue}if(a<=o){n+=e(co.OVERLONG,n-1-s,r,t,a);continue}t.push(a)}}return t}function cl(r,e=lg.current){e!=lg.current&&(Tq.checkNormalize(),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);if(n>=r.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return xr(t)}function Aoe(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function zb(r,e){return Aoe(kq(r,e))}function Ioe(r,e=lg.current){return kq(cl(r,e))}function Pq(r){return Bi(cl(r))}const Oq="hash/5.8.0";function Dq(r,e){e==null&&(e=1);const t=[],n=t.forEach,i=function(s,o){n.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(r,e),t}function Coe(r){const e={};for(let t=0;t<r.length;t++){const n=r[t];e[n[0]]=n[1]}return e}function Toe(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),i=1,s=[0,1];for(let x=1;x<n;x++)s.push(i+=t());let o=t(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|r[e++],c=8),l>>--c&1}const f=31,h=Math.pow(2,f),d=h>>>1,g=d>>1,p=h-1;let m=0;for(let x=0;x<f;x++)m=m<<1|u();let y=[],v=0,b=h;for(;;){let x=Math.floor(((m-v+1)*i-1)/b),E=0,S=n;for(;S-E>1;){let $=E+S>>>1;x<s[$]?S=$:E=$}if(E==0)break;y.push(E);let C=v+Math.floor(b*s[E]/i),k=v+Math.floor(b*s[E+1]/i)-1;for(;((C^k)&d)==0;)m=m<<1&p|u(),C=C<<1&p,k=k<<1&p|1;for(;C&~k&g;)m=m&d|m<<1&p>>>1|u(),C=C<<1^d,k=(k^d)<<1|d|1;v=C,b=1+k-C}let _=n-4;return y.map(x=>{switch(x-_){case 3:return _+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return _+256+(r[a++]<<8|r[a++]);case 1:return _+r[a++];default:return x-1}})}function Roe(r){let e=0;return()=>r[e++]}function koe(r){return Roe(Toe(r))}function Poe(r){return r&1?~r>>1:r>>1}function Ooe(r,e){let t=Array(r);for(let n=0;n<r;n++)t[n]=1+e();return t}function HP(r,e){let t=Array(r);for(let n=0,i=-1;n<r;n++)t[n]=i+=1+e();return t}function Doe(r,e){let t=Array(r);for(let n=0,i=0;n<r;n++)t[n]=i+=Poe(e());return t}function mv(r,e){let t=HP(r(),r),n=r(),i=HP(n,r),s=Ooe(n,r);for(let o=0;o<n;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function $oe(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(Boe(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(Noe(t,r))}return Coe(Dq(e))}function Moe(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function $q(r,e,t){let n=Array(r).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)Doe(r,t).forEach((s,o)=>n[o].push(s));return n}function Boe(r,e){let t=1+e(),n=e(),i=Moe(e),s=$q(i.length,1+r,e);return Dq(s.map((o,a)=>{const c=o[0],l=o.slice(1);return Array(i[a]).fill(void 0).map((u,f)=>{let h=f*n;return[c+f*t,l.map(d=>d+h)]})}))}function Noe(r,e){let t=1+e();return $q(t,1+r,e).map(i=>[i[0],i.slice(1)])}function Loe(r){let e=mv(r).sort((n,i)=>n-i);return t();function t(){let n=[];for(;;){let l=mv(r,e);if(l.length==0)break;n.push({set:new Set(l),node:t()})}n.sort((l,u)=>u.set.size-l.set.size);let i=r(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,c=i==2;return{branches:n,valid:s,fe0f:o,save:a,check:c}}}function Foe(){return koe(xq("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const qb=Foe(),Uoe=new Set(mv(qb)),zoe=new Set(mv(qb)),qoe=$oe(qb),joe=Loe(qb),WP=45,GP=95;function Mq(r){return Ioe(r)}function Voe(r){return r.filter(e=>e!=65039)}function Bq(r){for(let e of r.split(".")){let t=Mq(e);try{for(let n=t.lastIndexOf(GP)-1;n>=0;n--)if(t[n]!==GP)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(n=>n<128)&&t[2]===WP&&t[3]===WP)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return r}function Koe(r){return Bq(Hoe(r,Voe))}function Hoe(r,e){let t=Mq(r).reverse(),n=[];for(;t.length;){let i=Goe(t);if(i){n.push(...e(i));continue}let s=t.pop();if(Uoe.has(s)){n.push(s);continue}if(zoe.has(s))continue;let o=qoe[s];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return Bq(Woe(String.fromCodePoint(...n)))}function Woe(r){return r.normalize("NFC")}function Goe(r,e){var t;let n=joe,i,s,o=[],a=r.length;for(;a;){let c=r[--a];if(n=(t=n.branches.find(l=>l.set.has(c)))===null||t===void 0?void 0:t.node,!n)break;if(n.save)s=c;else if(n.check&&c===s)break;o.push(c),n.fe0f&&(o.push(65039),a>0&&r[a-1]==65039&&a--),n.valid&&(i=o.slice(),n.valid==2&&i.splice(1,1),r.length=a)}return i}const Yoe=new Ve(Oq),Nq=new Uint8Array(32);Nq.fill(0);function YP(r){if(r.length===0)throw new Error("invalid ENS name; empty component");return r}function Lq(r){const e=cl(Koe(r)),t=[];if(r.length===0)return t;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(YP(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return t.push(YP(e.slice(n))),t}function Ey(r){typeof r!="string"&&Yoe.throwArgumentError("invalid ENS name; not a string","name",r);let e=Nq;const t=Lq(r);for(;t.length;)e=Bi(rf([e,Bi(t.pop())]));return wr(e)}function Xoe(r){return wr(rf(Lq(r).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}const Joe="rlp/5.8.0",ec=new Ve(Joe);function XP(r){const e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function JP(r,e,t){let n=0;for(let i=0;i<t;i++)n=n*256+r[e+i];return n}function Fq(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(s){n=n.concat(Fq(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=XP(n.length);return i.unshift(247+i.length),i.concat(n)}RR(r)||ec.throwArgumentError("RLP object must be BytesLike","object",r);const e=Array.prototype.slice.call(xr(r));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=XP(e.length);return t.unshift(183+t.length),t.concat(e)}function jb(r){return wr(Fq(r))}function QP(r,e,t,n){const i=[];for(;t<e+1+n;){const s=Uq(r,t);i.push(s.result),t+=s.consumed,t>e+1+n&&ec.throwError("child data too short",Ve.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Uq(r,e){if(r.length===0&&ec.throwError("data too short",Ve.errors.BUFFER_OVERRUN,{}),r[e]>=248){const t=r[e]-247;e+1+t>r.length&&ec.throwError("data short segment too short",Ve.errors.BUFFER_OVERRUN,{});const n=JP(r,e+1,t);return e+1+t+n>r.length&&ec.throwError("data long segment too short",Ve.errors.BUFFER_OVERRUN,{}),QP(r,e,e+1+t,t+n)}else if(r[e]>=192){const t=r[e]-192;return e+1+t>r.length&&ec.throwError("data array too short",Ve.errors.BUFFER_OVERRUN,{}),QP(r,e,e+1,t)}else if(r[e]>=184){const t=r[e]-183;e+1+t>r.length&&ec.throwError("data array too short",Ve.errors.BUFFER_OVERRUN,{});const n=JP(r,e+1,t);e+1+t+n>r.length&&ec.throwError("data array too short",Ve.errors.BUFFER_OVERRUN,{});const i=wr(r.slice(e+1+t,e+1+t+n));return{consumed:1+t+n,result:i}}else if(r[e]>=128){const t=r[e]-128;e+1+t>r.length&&ec.throwError("data too short",Ve.errors.BUFFER_OVERRUN,{});const n=wr(r.slice(e+1,e+1+t));return{consumed:1+t,result:n}}return{consumed:1,result:wr(r[e])}}function DR(r){const e=xr(r),t=Uq(e,0);return t.consumed!==e.length&&ec.throwArgumentError("invalid rlp data","data",r),t.result}const Qoe="address/5.8.0",qh=new Ve(Qoe);function ZP(r){ln(r,20)||qh.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=xr(Bi(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Zoe=9007199254740991;function eae(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const $R={};for(let r=0;r<10;r++)$R[String(r)]=String(r);for(let r=0;r<26;r++)$R[String.fromCharCode(65+r)]=String(10+r);const eO=Math.floor(eae(Zoe));function tae(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>$R[n]).join("");for(;e.length>=eO;){let n=e.substring(0,eO);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function Ca(r){let e=null;if(typeof r!="string"&&qh.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=ZP(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&qh.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==tae(r)&&qh.throwArgumentError("bad icap checksum","address",r),e=roe(r.substring(4));e.length<40;)e="0"+e;e=ZP("0x"+e)}else qh.throwArgumentError("invalid address","address",r);return e}function rae(r){let e=null;try{e=Ca(r.from)}catch{qh.throwArgumentError("missing from address","transaction",r)}const t=wd(xr(xt.from(r.nonce).toHexString()));return Ca(ms(Bi(jb([e,t])),12))}var nae=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const An=new Ve(Oq),zq=new Uint8Array(32);zq.fill(0);const iae=xt.from(-1),qq=xt.from(0),jq=xt.from(1),sae=xt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function oae(r){const e=xr(r),t=e.length%32;return t?yo([e,zq.slice(t)]):wr(e)}const aae=Fn(jq.toHexString(),32),cae=Fn(qq.toHexString(),32),tO={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},S1=["name","version","chainId","verifyingContract","salt"];function rO(r){return function(e){return typeof e!="string"&&An.throwArgumentError(`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const lae={name:rO("name"),version:rO("version"),chainId:function(r){try{return xt.from(r).toString()}catch{}return An.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",r)},verifyingContract:function(r){try{return Ca(r).toLowerCase()}catch{}return An.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){try{const e=xr(r);if(e.length!==32)throw new Error("bad length");return wr(e)}catch{}return An.throwArgumentError('invalid domain value "salt"',"domain.salt",r)}};function E1(r){{const e=r.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&An.throwArgumentError("invalid numeric width","type",r);const i=sae.mask(t?n-1:n),s=t?i.add(jq).mul(iae):qq;return function(o){const a=xt.from(o);return(a.lt(s)||a.gt(i))&&An.throwArgumentError(`value out-of-bounds for ${r}`,"value",o),Fn(a.toTwos(256).toHexString(),32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&An.throwArgumentError("invalid bytes width","type",r),function(n){return xr(n).length!==t&&An.throwArgumentError(`invalid length for ${r}`,"value",n),oae(n)}}}switch(r){case"address":return function(e){return Fn(Ca(e),32)};case"bool":return function(e){return e?aae:cae};case"bytes":return function(e){return Bi(e)};case"string":return function(e){return Pq(e)}}return null}function nO(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}class so{constructor(e){Nr(this,"types",Object.freeze(ag(e))),Nr(this,"_encoderCache",{}),Nr(this,"_types",{});const t={},n={},i={};Object.keys(e).forEach(a=>{t[a]={},n[a]=[],i[a]={}});for(const a in e){const c={};e[a].forEach(l=>{c[l.name]&&An.throwArgumentError(`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(a)}`,"types",e),c[l.name]=!0;const u=l.type.match(/^([^\x5b]*)(\x5b|$)/)[1];u===a&&An.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),!E1(u)&&(n[u]||An.throwArgumentError(`unknown type ${JSON.stringify(u)}`,"types",e),n[u].push(a),t[a][u]=!0)})}const s=Object.keys(n).filter(a=>n[a].length===0);s.length===0?An.throwArgumentError("missing primary type","types",e):s.length>1&&An.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),Nr(this,"primaryType",s[0]);function o(a,c){c[a]&&An.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),c[a]=!0,Object.keys(t[a]).forEach(l=>{n[l]&&(o(l,c),Object.keys(c).forEach(u=>{i[u][l]=!0}))}),delete c[a]}o(this.primaryType,{});for(const a in i){const c=Object.keys(i[a]);c.sort(),this._types[a]=nO(a,e[a])+c.map(l=>nO(l,e[l])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=E1(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&An.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let c=a.map(s);return this._types[i]&&(c=c.map(Bi)),Bi(yo(c))}}const n=this.types[e];if(n){const i=Pq(this._types[e]);return s=>{const o=n.map(({name:a,type:c})=>{const l=this.getEncoder(c)(s[a]);return this._types[c]?Bi(l):l});return o.unshift(i),yo(o)}}return An.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||An.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Bi(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(E1(e))return n(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&An.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(c=>this._visit(o,c,n))}const s=this.types[e];return s?s.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,t[a],n),o),{}):An.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new so(e)}static getPrimaryType(e){return so.from(e).primaryType}static hashStruct(e,t,n){return so.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){const i=tO[n];i||An.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:i})}return t.sort((n,i)=>S1.indexOf(n.name)-S1.indexOf(i.name)),so.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return yo(["0x1901",so.hashDomain(e),so.from(t).hash(n)])}static hash(e,t,n){return Bi(so.encode(e,t,n))}static resolveNames(e,t,n,i){return nae(this,void 0,void 0,function*(){e=Bs(e);const s={};e.verifyingContract&&!ln(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=so.from(t);o.visit(n,(a,c)=>(a==="address"&&!ln(c,20)&&(s[c]="0x"),c));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&s[c]?s[c]:c),{domain:e,value:n}})}static getPayload(e,t,n){so.hashDomain(e);const i={},s=[];S1.forEach(c=>{const l=e[c];l!=null&&(i[c]=lae[c](l),s.push({name:c,type:tO[c]}))});const o=so.from(t),a=Bs(t);return a.EIP712Domain?An.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(c,l)=>{if(c.match(/^bytes(\d*)/))return wr(xr(l));if(c.match(/^u?int/))return xt.from(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return typeof l!="string"&&An.throwArgumentError("invalid string","value",l),l}return An.throwArgumentError("unsupported type","type",c)})}}}var A1={},sn={},I1,iO;function zg(){if(iO)return I1;iO=1,I1=r;function r(e,t){if(!e)throw new Error(t||"Assertion failed")}return r.equal=function(t,n,i){if(t!=n)throw new Error(i||"Assertion failed: "+t+" != "+n)},I1}var Om={exports:{}},sO;function yi(){return sO||(sO=1,typeof Object.create=="function"?Om.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Om.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Om.exports}var oO;function wc(){if(oO)return sn;oO=1;var r=zg(),e=yi();sn.inherits=e;function t(j,L){return(j.charCodeAt(L)&64512)!==55296||L<0||L+1>=j.length?!1:(j.charCodeAt(L+1)&64512)===56320}function n(j,L){if(Array.isArray(j))return j.slice();if(!j)return[];var w=[];if(typeof j=="string")if(L){if(L==="hex")for(j=j.replace(/[^a-z0-9]+/ig,""),j.length%2!==0&&(j="0"+j),N=0;N<j.length;N+=2)w.push(parseInt(j[N]+j[N+1],16))}else for(var R=0,N=0;N<j.length;N++){var Y=j.charCodeAt(N);Y<128?w[R++]=Y:Y<2048?(w[R++]=Y>>6|192,w[R++]=Y&63|128):t(j,N)?(Y=65536+((Y&1023)<<10)+(j.charCodeAt(++N)&1023),w[R++]=Y>>18|240,w[R++]=Y>>12&63|128,w[R++]=Y>>6&63|128,w[R++]=Y&63|128):(w[R++]=Y>>12|224,w[R++]=Y>>6&63|128,w[R++]=Y&63|128)}else for(N=0;N<j.length;N++)w[N]=j[N]|0;return w}sn.toArray=n;function i(j){for(var L="",w=0;w<j.length;w++)L+=a(j[w].toString(16));return L}sn.toHex=i;function s(j){var L=j>>>24|j>>>8&65280|j<<8&16711680|(j&255)<<24;return L>>>0}sn.htonl=s;function o(j,L){for(var w="",R=0;R<j.length;R++){var N=j[R];L==="little"&&(N=s(N)),w+=c(N.toString(16))}return w}sn.toHex32=o;function a(j){return j.length===1?"0"+j:j}sn.zero2=a;function c(j){return j.length===7?"0"+j:j.length===6?"00"+j:j.length===5?"000"+j:j.length===4?"0000"+j:j.length===3?"00000"+j:j.length===2?"000000"+j:j.length===1?"0000000"+j:j}sn.zero8=c;function l(j,L,w,R){var N=w-L;r(N%4===0);for(var Y=new Array(N/4),z=0,G=L;z<Y.length;z++,G+=4){var te;R==="big"?te=j[G]<<24|j[G+1]<<16|j[G+2]<<8|j[G+3]:te=j[G+3]<<24|j[G+2]<<16|j[G+1]<<8|j[G],Y[z]=te>>>0}return Y}sn.join32=l;function u(j,L){for(var w=new Array(j.length*4),R=0,N=0;R<j.length;R++,N+=4){var Y=j[R];L==="big"?(w[N]=Y>>>24,w[N+1]=Y>>>16&255,w[N+2]=Y>>>8&255,w[N+3]=Y&255):(w[N+3]=Y>>>24,w[N+2]=Y>>>16&255,w[N+1]=Y>>>8&255,w[N]=Y&255)}return w}sn.split32=u;function f(j,L){return j>>>L|j<<32-L}sn.rotr32=f;function h(j,L){return j<<L|j>>>32-L}sn.rotl32=h;function d(j,L){return j+L>>>0}sn.sum32=d;function g(j,L,w){return j+L+w>>>0}sn.sum32_3=g;function p(j,L,w,R){return j+L+w+R>>>0}sn.sum32_4=p;function m(j,L,w,R,N){return j+L+w+R+N>>>0}sn.sum32_5=m;function y(j,L,w,R){var N=j[L],Y=j[L+1],z=R+Y>>>0,G=(z<R?1:0)+w+N;j[L]=G>>>0,j[L+1]=z}sn.sum64=y;function v(j,L,w,R){var N=L+R>>>0,Y=(N<L?1:0)+j+w;return Y>>>0}sn.sum64_hi=v;function b(j,L,w,R){var N=L+R;return N>>>0}sn.sum64_lo=b;function _(j,L,w,R,N,Y,z,G){var te=0,X=L;X=X+R>>>0,te+=X<L?1:0,X=X+Y>>>0,te+=X<Y?1:0,X=X+G>>>0,te+=X<G?1:0;var T=j+w+N+z+te;return T>>>0}sn.sum64_4_hi=_;function x(j,L,w,R,N,Y,z,G){var te=L+R+Y+G;return te>>>0}sn.sum64_4_lo=x;function E(j,L,w,R,N,Y,z,G,te,X){var T=0,A=L;A=A+R>>>0,T+=A<L?1:0,A=A+Y>>>0,T+=A<Y?1:0,A=A+G>>>0,T+=A<G?1:0,A=A+X>>>0,T+=A<X?1:0;var O=j+w+N+z+te+T;return O>>>0}sn.sum64_5_hi=E;function S(j,L,w,R,N,Y,z,G,te,X){var T=L+R+Y+G+X;return T>>>0}sn.sum64_5_lo=S;function C(j,L,w){var R=L<<32-w|j>>>w;return R>>>0}sn.rotr64_hi=C;function k(j,L,w){var R=j<<32-w|L>>>w;return R>>>0}sn.rotr64_lo=k;function $(j,L,w){return j>>>w}sn.shr64_hi=$;function J(j,L,w){var R=j<<32-w|L>>>w;return R>>>0}return sn.shr64_lo=J,sn}var C1={},aO;function qg(){if(aO)return C1;aO=1;var r=wc(),e=zg();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return C1.BlockHash=t,t.prototype.update=function(i,s){if(i=r.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var o=i.length%this._delta8;this.pending=i.slice(i.length-o,i.length),this.pending.length===0&&(this.pending=null),i=r.join32(i,0,i.length-o,this.endian);for(var a=0;a<i.length;a+=this._delta32)this._update(i,a,a+this._delta32)}return this},t.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},t.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,o=s-(i+this.padLength)%s,a=new Array(o+this.padLength);a[0]=128;for(var c=1;c<o;c++)a[c]=0;if(i<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)a[c++]=0;a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=i>>>24&255,a[c++]=i>>>16&255,a[c++]=i>>>8&255,a[c++]=i&255}else for(a[c++]=i&255,a[c++]=i>>>8&255,a[c++]=i>>>16&255,a[c++]=i>>>24&255,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,l=8;l<this.padLength;l++)a[c++]=0;return a},C1}var Ou={},qa={},cO;function Vq(){if(cO)return qa;cO=1;var r=wc(),e=r.rotr32;function t(u,f,h,d){if(u===0)return n(f,h,d);if(u===1||u===3)return s(f,h,d);if(u===2)return i(f,h,d)}qa.ft_1=t;function n(u,f,h){return u&f^~u&h}qa.ch32=n;function i(u,f,h){return u&f^u&h^f&h}qa.maj32=i;function s(u,f,h){return u^f^h}qa.p32=s;function o(u){return e(u,2)^e(u,13)^e(u,22)}qa.s0_256=o;function a(u){return e(u,6)^e(u,11)^e(u,25)}qa.s1_256=a;function c(u){return e(u,7)^e(u,18)^u>>>3}qa.g0_256=c;function l(u){return e(u,17)^e(u,19)^u>>>10}return qa.g1_256=l,qa}var T1,lO;function uae(){if(lO)return T1;lO=1;var r=wc(),e=qg(),t=Vq(),n=r.rotl32,i=r.sum32,s=r.sum32_5,o=t.ft_1,a=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(l,a),T1=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(f,h){for(var d=this.W,g=0;g<16;g++)d[g]=f[h+g];for(;g<d.length;g++)d[g]=n(d[g-3]^d[g-8]^d[g-14]^d[g-16],1);var p=this.h[0],m=this.h[1],y=this.h[2],v=this.h[3],b=this.h[4];for(g=0;g<d.length;g++){var _=~~(g/20),x=s(n(p,5),o(_,m,y,v),b,d[g],c[_]);b=v,v=y,y=n(m,30),m=p,p=x}this.h[0]=i(this.h[0],p),this.h[1]=i(this.h[1],m),this.h[2]=i(this.h[2],y),this.h[3]=i(this.h[3],v),this.h[4]=i(this.h[4],b)},l.prototype._digest=function(f){return f==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},T1}var R1,uO;function Kq(){if(uO)return R1;uO=1;var r=wc(),e=qg(),t=Vq(),n=zg(),i=r.sum32,s=r.sum32_4,o=r.sum32_5,a=t.ch32,c=t.maj32,l=t.s0_256,u=t.s1_256,f=t.g0_256,h=t.g1_256,d=e.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function p(){if(!(this instanceof p))return new p;d.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}return r.inherits(p,d),R1=p,p.blockSize=512,p.outSize=256,p.hmacStrength=192,p.padLength=64,p.prototype._update=function(y,v){for(var b=this.W,_=0;_<16;_++)b[_]=y[v+_];for(;_<b.length;_++)b[_]=s(h(b[_-2]),b[_-7],f(b[_-15]),b[_-16]);var x=this.h[0],E=this.h[1],S=this.h[2],C=this.h[3],k=this.h[4],$=this.h[5],J=this.h[6],j=this.h[7];for(n(this.k.length===b.length),_=0;_<b.length;_++){var L=o(j,u(k),a(k,$,J),this.k[_],b[_]),w=i(l(x),c(x,E,S));j=J,J=$,$=k,k=i(C,L),C=S,S=E,E=x,x=i(L,w)}this.h[0]=i(this.h[0],x),this.h[1]=i(this.h[1],E),this.h[2]=i(this.h[2],S),this.h[3]=i(this.h[3],C),this.h[4]=i(this.h[4],k),this.h[5]=i(this.h[5],$),this.h[6]=i(this.h[6],J),this.h[7]=i(this.h[7],j)},p.prototype._digest=function(y){return y==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},R1}var k1,fO;function fae(){if(fO)return k1;fO=1;var r=wc(),e=Kq();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(t,e),k1=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},k1}var P1,hO;function Hq(){if(hO)return P1;hO=1;var r=wc(),e=qg(),t=zg(),n=r.rotr64_hi,i=r.rotr64_lo,s=r.shr64_hi,o=r.shr64_lo,a=r.sum64,c=r.sum64_hi,l=r.sum64_lo,u=r.sum64_4_hi,f=r.sum64_4_lo,h=r.sum64_5_hi,d=r.sum64_5_lo,g=e.BlockHash,p=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function m(){if(!(this instanceof m))return new m;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=p,this.W=new Array(160)}r.inherits(m,g),P1=m,m.blockSize=1024,m.outSize=512,m.hmacStrength=192,m.padLength=128,m.prototype._prepareBlock=function(w,R){for(var N=this.W,Y=0;Y<32;Y++)N[Y]=w[R+Y];for(;Y<N.length;Y+=2){var z=J(N[Y-4],N[Y-3]),G=j(N[Y-4],N[Y-3]),te=N[Y-14],X=N[Y-13],T=k(N[Y-30],N[Y-29]),A=$(N[Y-30],N[Y-29]),O=N[Y-32],I=N[Y-31];N[Y]=u(z,G,te,X,T,A,O,I),N[Y+1]=f(z,G,te,X,T,A,O,I)}},m.prototype._update=function(w,R){this._prepareBlock(w,R);var N=this.W,Y=this.h[0],z=this.h[1],G=this.h[2],te=this.h[3],X=this.h[4],T=this.h[5],A=this.h[6],O=this.h[7],I=this.h[8],U=this.h[9],Z=this.h[10],oe=this.h[11],he=this.h[12],re=this.h[13],F=this.h[14],H=this.h[15];t(this.k.length===N.length);for(var ue=0;ue<N.length;ue+=2){var le=F,we=H,ie=S(I,U),B=C(I,U),q=y(I,U,Z,oe,he),ne=v(I,U,Z,oe,he,re),de=this.k[ue],_e=this.k[ue+1],Ce=N[ue],Me=N[ue+1],xe=h(le,we,ie,B,q,ne,de,_e,Ce,Me),Ae=d(le,we,ie,B,q,ne,de,_e,Ce,Me);le=x(Y,z),we=E(Y,z),ie=b(Y,z,G,te,X),B=_(Y,z,G,te,X,T);var Oe=c(le,we,ie,B),se=l(le,we,ie,B);F=he,H=re,he=Z,re=oe,Z=I,oe=U,I=c(A,O,xe,Ae),U=l(O,O,xe,Ae),A=X,O=T,X=G,T=te,G=Y,te=z,Y=c(xe,Ae,Oe,se),z=l(xe,Ae,Oe,se)}a(this.h,0,Y,z),a(this.h,2,G,te),a(this.h,4,X,T),a(this.h,6,A,O),a(this.h,8,I,U),a(this.h,10,Z,oe),a(this.h,12,he,re),a(this.h,14,F,H)},m.prototype._digest=function(w){return w==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function y(L,w,R,N,Y){var z=L&R^~L&Y;return z<0&&(z+=4294967296),z}function v(L,w,R,N,Y,z){var G=w&N^~w&z;return G<0&&(G+=4294967296),G}function b(L,w,R,N,Y){var z=L&R^L&Y^R&Y;return z<0&&(z+=4294967296),z}function _(L,w,R,N,Y,z){var G=w&N^w&z^N&z;return G<0&&(G+=4294967296),G}function x(L,w){var R=n(L,w,28),N=n(w,L,2),Y=n(w,L,7),z=R^N^Y;return z<0&&(z+=4294967296),z}function E(L,w){var R=i(L,w,28),N=i(w,L,2),Y=i(w,L,7),z=R^N^Y;return z<0&&(z+=4294967296),z}function S(L,w){var R=n(L,w,14),N=n(L,w,18),Y=n(w,L,9),z=R^N^Y;return z<0&&(z+=4294967296),z}function C(L,w){var R=i(L,w,14),N=i(L,w,18),Y=i(w,L,9),z=R^N^Y;return z<0&&(z+=4294967296),z}function k(L,w){var R=n(L,w,1),N=n(L,w,8),Y=s(L,w,7),z=R^N^Y;return z<0&&(z+=4294967296),z}function $(L,w){var R=i(L,w,1),N=i(L,w,8),Y=o(L,w,7),z=R^N^Y;return z<0&&(z+=4294967296),z}function J(L,w){var R=n(L,w,19),N=n(w,L,29),Y=s(L,w,6),z=R^N^Y;return z<0&&(z+=4294967296),z}function j(L,w){var R=i(L,w,19),N=i(w,L,29),Y=o(L,w,6),z=R^N^Y;return z<0&&(z+=4294967296),z}return P1}var O1,dO;function hae(){if(dO)return O1;dO=1;var r=wc(),e=Hq();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(t,e),O1=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},O1}var pO;function dae(){return pO||(pO=1,Ou.sha1=uae(),Ou.sha224=fae(),Ou.sha256=Kq(),Ou.sha384=hae(),Ou.sha512=Hq()),Ou}var D1={},gO;function pae(){if(gO)return D1;gO=1;var r=wc(),e=qg(),t=r.rotl32,n=r.sum32,i=r.sum32_3,s=r.sum32_4,o=e.BlockHash;function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(a,o),D1.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(m,y){for(var v=this.h[0],b=this.h[1],_=this.h[2],x=this.h[3],E=this.h[4],S=v,C=b,k=_,$=x,J=E,j=0;j<80;j++){var L=n(t(s(v,c(j,b,_,x),m[f[j]+y],l(j)),d[j]),E);v=E,E=x,x=t(_,10),_=b,b=L,L=n(t(s(S,c(79-j,C,k,$),m[h[j]+y],u(j)),g[j]),J),S=J,J=$,$=t(k,10),k=C,C=L}L=i(this.h[1],_,$),this.h[1]=i(this.h[2],x,J),this.h[2]=i(this.h[3],E,S),this.h[3]=i(this.h[4],v,C),this.h[4]=i(this.h[0],b,k),this.h[0]=L},a.prototype._digest=function(m){return m==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function c(p,m,y,v){return p<=15?m^y^v:p<=31?m&y|~m&v:p<=47?(m|~y)^v:p<=63?m&v|y&~v:m^(y|~v)}function l(p){return p<=15?0:p<=31?1518500249:p<=47?1859775393:p<=63?2400959708:2840853838}function u(p){return p<=15?1352829926:p<=31?1548603684:p<=47?1836072691:p<=63?2053994217:0}var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],d=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return D1}var $1,mO;function gae(){if(mO)return $1;mO=1;var r=wc(),e=zg();function t(n,i,s){if(!(this instanceof t))return new t(n,i,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(i,s))}return $1=t,t.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},t.prototype.update=function(i,s){return this.inner.update(i,s),this},t.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},$1}var yO;function mae(){return yO||(yO=1,function(r){var e=r;e.utils=wc(),e.common=qg(),e.sha=dae(),e.ripemd=pae(),e.hmac=gae(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(A1)),A1}var yae=mae();const Ja=Gs(yae);function vO(r){return"0x"+Ja.sha256().update(xr(r)).digest("hex")}const vae="web/5.8.0";var bae=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};function wae(r,e){return bae(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const n=yield fetch(r,t),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):n.headers.keys().forEach(o=>{s[o.toLowerCase()]=n.headers.get(o)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:xr(new Uint8Array(i))}})}var xae=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const oa=new Ve(vae);function bO(r){return new Promise(e=>{setTimeout(e,r)})}function Pl(r,e){if(r==null)return null;if(typeof r=="string")return r;if(RR(r)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return zb(r)}catch{}return wr(r)}return r}function _ae(r){return cl(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function Sae(r,e,t){const n=typeof r=="object"&&r.throttleLimit!=null?r.throttleLimit:12;oa.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof r=="object"?r.throttleCallback:null,s=typeof r=="object"&&typeof r.throttleSlotInterval=="number"?r.throttleSlotInterval:100;oa.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof r=="object"?!!r.errorPassThrough:!1,a={};let c=null;const l={method:"GET"};let u=!1,f=2*60*1e3;if(typeof r=="string")c=r;else if(typeof r=="object"){if((r==null||r.url==null)&&oa.throwArgumentError("missing URL","connection.url",r),c=r.url,typeof r.timeout=="number"&&r.timeout>0&&(f=r.timeout),r.headers)for(const y in r.headers)a[y.toLowerCase()]={key:y,value:String(r.headers[y])},["if-none-match","if-modified-since"].indexOf(y.toLowerCase())>=0&&(u=!0);if(l.allowGzip=!!r.allowGzip,r.user!=null&&r.password!=null){c.substring(0,6)!=="https:"&&r.allowInsecureAuthentication!==!0&&oa.throwError("basic authentication requires a secure https url",Ve.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:r.user,password:"[REDACTED]"});const y=r.user+":"+r.password;a.authorization={key:"Authorization",value:"Basic "+_q(cl(y))}}r.skipFetchSetup!=null&&(l.skipFetchSetup=!!r.skipFetchSetup),r.fetchOptions!=null&&(l.fetchOptions=Bs(r.fetchOptions))}const h=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),d=c?c.match(h):null;if(d)try{const y={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]||"text/plain"},body:d[2]?xq(d[3]):_ae(d[3])};let v=y.body;return t&&(v=t(y.body,y)),Promise.resolve(v)}catch(y){oa.throwError("processing response error",Ve.errors.SERVER_ERROR,{body:Pl(d[1],d[2]),error:y,requestBody:null,requestMethod:"GET",url:c})}e&&(l.method="POST",l.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const g={};Object.keys(a).forEach(y=>{const v=a[y];g[v.key]=v.value}),l.headers=g;const p=function(){let y=null;return{promise:new Promise(function(_,x){f&&(y=setTimeout(()=>{y!=null&&(y=null,x(oa.makeError("timeout",Ve.errors.TIMEOUT,{requestBody:Pl(l.body,g["content-type"]),requestMethod:l.method,timeout:f,url:c})))},f))}),cancel:function(){y!=null&&(clearTimeout(y),y=null)}}}(),m=function(){return xae(this,void 0,void 0,function*(){for(let y=0;y<n;y++){let v=null;try{if(v=yield wae(c,l),y<n){if(v.statusCode===301||v.statusCode===302){const _=v.headers.location||"";if(l.method==="GET"&&_.match(/^https:/)){c=v.headers.location;continue}}else if(v.statusCode===429){let _=!0;if(i&&(_=yield i(y,c)),_){let x=0;const E=v.headers["retry-after"];typeof E=="string"&&E.match(/^[1-9][0-9]*$/)?x=parseInt(E)*1e3:x=s*parseInt(String(Math.random()*Math.pow(2,y))),yield bO(x);continue}}}}catch(_){v=_.response,v==null&&(p.cancel(),oa.throwError("missing response",Ve.errors.SERVER_ERROR,{requestBody:Pl(l.body,g["content-type"]),requestMethod:l.method,serverError:_,url:c}))}let b=v.body;if(u&&v.statusCode===304?b=null:!o&&(v.statusCode<200||v.statusCode>=300)&&(p.cancel(),oa.throwError("bad response",Ve.errors.SERVER_ERROR,{status:v.statusCode,headers:v.headers,body:Pl(b,v.headers?v.headers["content-type"]:null),requestBody:Pl(l.body,g["content-type"]),requestMethod:l.method,url:c})),t)try{const _=yield t(b,v);return p.cancel(),_}catch(_){if(_.throttleRetry&&y<n){let x=!0;if(i&&(x=yield i(y,c)),x){const E=s*parseInt(String(Math.random()*Math.pow(2,y)));yield bO(E);continue}}p.cancel(),oa.throwError("processing response error",Ve.errors.SERVER_ERROR,{body:Pl(b,v.headers?v.headers["content-type"]:null),error:_,requestBody:Pl(l.body,g["content-type"]),requestMethod:l.method,url:c})}return p.cancel(),b}return oa.throwError("failed response",Ve.errors.SERVER_ERROR,{requestBody:Pl(l.body,g["content-type"]),requestMethod:l.method,url:c})})}();return Promise.race([p.promise,m])}function MR(r,e,t){let n=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(zb(s))}catch(c){oa.throwError("invalid JSON",Ve.errors.SERVER_ERROR,{body:s,error:c})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=cl(e);const s=typeof r=="string"?{url:r}:Bs(r);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=Bs(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},r=s}return Sae(r,i,n)}function f0(r,e){return e||(e={}),e=Bs(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,n){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let c=0;function l(){return r().then(function(u){if(u!==void 0)o()&&t(u);else if(e.oncePoll)e.oncePoll.once("poll",l);else if(e.onceBlock)e.onceBlock.once("block",l);else if(!s){if(c++,c>a){o()&&n(new Error("retry limit reached"));return}let f=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));f<e.floor&&(f=e.floor),f>e.ceiling&&(f=e.ceiling),setTimeout(l,f)}return null},function(u){o()&&n(u)})}l()})}var M1,wO;function Eae(){if(wO)return M1;wO=1;for(var r="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={},t=0;t<r.length;t++){var n=r.charAt(t);if(e[n]!==void 0)throw new TypeError(n+" is ambiguous");e[n]=t}function i(p){var m=p>>25;return(p&33554431)<<5^-(m>>0&1)&996825010^-(m>>1&1)&642813549^-(m>>2&1)&513874426^-(m>>3&1)&1027748829^-(m>>4&1)&705979059}function s(p){for(var m=1,y=0;y<p.length;++y){var v=p.charCodeAt(y);if(v<33||v>126)return"Invalid prefix ("+p+")";m=i(m)^v>>5}for(m=i(m),y=0;y<p.length;++y){var b=p.charCodeAt(y);m=i(m)^b&31}return m}function o(p,m,y){if(y=y||90,p.length+7+m.length>y)throw new TypeError("Exceeds length limit");p=p.toLowerCase();var v=s(p);if(typeof v=="string")throw new Error(v);for(var b=p+"1",_=0;_<m.length;++_){var x=m[_];if(x>>5!==0)throw new Error("Non 5-bit word");v=i(v)^x,b+=r.charAt(x)}for(_=0;_<6;++_)v=i(v);for(v^=1,_=0;_<6;++_){var E=v>>(5-_)*5&31;b+=r.charAt(E)}return b}function a(p,m){if(m=m||90,p.length<8)return p+" too short";if(p.length>m)return"Exceeds length limit";var y=p.toLowerCase(),v=p.toUpperCase();if(p!==y&&p!==v)return"Mixed-case string "+p;p=y;var b=p.lastIndexOf("1");if(b===-1)return"No separator character for "+p;if(b===0)return"Missing prefix for "+p;var _=p.slice(0,b),x=p.slice(b+1);if(x.length<6)return"Data too short";var E=s(_);if(typeof E=="string")return E;for(var S=[],C=0;C<x.length;++C){var k=x.charAt(C),$=e[k];if($===void 0)return"Unknown character "+k;E=i(E)^$,!(C+6>=x.length)&&S.push($)}return E!==1?"Invalid checksum for "+p:{prefix:_,words:S}}function c(){var p=a.apply(null,arguments);if(typeof p=="object")return p}function l(p){var m=a.apply(null,arguments);if(typeof m=="object")return m;throw new Error(m)}function u(p,m,y,v){for(var b=0,_=0,x=(1<<y)-1,E=[],S=0;S<p.length;++S)for(b=b<<m|p[S],_+=m;_>=y;)_-=y,E.push(b>>_&x);if(v)_>0&&E.push(b<<y-_&x);else{if(_>=m)return"Excess padding";if(b<<y-_&x)return"Non-zero padding"}return E}function f(p){var m=u(p,8,5,!0);if(Array.isArray(m))return m}function h(p){var m=u(p,8,5,!0);if(Array.isArray(m))return m;throw new Error(m)}function d(p){var m=u(p,5,8,!1);if(Array.isArray(m))return m}function g(p){var m=u(p,5,8,!1);if(Array.isArray(m))return m;throw new Error(m)}return M1={decodeUnsafe:c,decode:l,encode:o,toWordsUnsafe:f,toWords:h,fromWordsUnsafe:d,fromWords:g},M1}var Aae=Eae();const xO=Gs(Aae),Vb="providers/5.8.0",pa=globalThis||void 0||self;function Zd(r,e,t){return t={path:e,exports:{},require:function(n,i){return Iae(n,i??t.path)}},r(t,t.exports),t.exports}function Iae(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var BR=Wq;function Wq(r,e){if(!r)throw new Error(e||"Assertion failed")}Wq.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var ga=Zd(function(r,e){var t=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var l=0;l<o.length;l++)c[l]=o[l]|0;return c}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var l=0;l<o.length;l+=2)c.push(parseInt(o[l]+o[l+1],16))}else for(var l=0;l<o.length;l++){var u=o.charCodeAt(l),f=u>>8,h=u&255;f?c.push(f,h):c.push(h)}return c}t.toArray=n;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",c=0;c<o.length;c++)a+=i(o[c].toString(16));return a}t.toHex=s,t.encode=function(a,c){return c==="hex"?s(a):a}}),Ro=Zd(function(r,e){var t=e;t.assert=BR,t.toArray=ga.toArray,t.zero2=ga.zero2,t.toHex=ga.toHex,t.encode=ga.encode;function n(c,l,u){var f=new Array(Math.max(c.bitLength(),u)+1),h;for(h=0;h<f.length;h+=1)f[h]=0;var d=1<<l+1,g=c.clone();for(h=0;h<f.length;h++){var p,m=g.andln(d-1);g.isOdd()?(m>(d>>1)-1?p=(d>>1)-m:p=m,g.isubn(p)):p=0,f[h]=p,g.iushrn(1)}return f}t.getNAF=n;function i(c,l){var u=[[],[]];c=c.clone(),l=l.clone();for(var f=0,h=0,d;c.cmpn(-f)>0||l.cmpn(-h)>0;){var g=c.andln(3)+f&3,p=l.andln(3)+h&3;g===3&&(g=-1),p===3&&(p=-1);var m;(g&1)===0?m=0:(d=c.andln(7)+f&7,(d===3||d===5)&&p===2?m=-g:m=g),u[0].push(m);var y;(p&1)===0?y=0:(d=l.andln(7)+h&7,(d===3||d===5)&&g===2?y=-p:y=p),u[1].push(y),2*f===m+1&&(f=1-f),2*h===y+1&&(h=1-h),c.iushrn(1),l.iushrn(1)}return u}t.getJSF=i;function s(c,l,u){var f="_"+l;c.prototype[l]=function(){return this[f]!==void 0?this[f]:this[f]=u.call(this)}}t.cachedProperty=s;function o(c){return typeof c=="string"?t.toArray(c,"hex"):c}t.parseBytes=o;function a(c){return new rr(c,"hex","le")}t.intFromLE=a}),yv=Ro.getNAF,Cae=Ro.getJSF,vv=Ro.assert;function Au(r,e){this.type=r,this.p=new rr(e.p,16),this.red=e.prime?rr.red(e.prime):rr.mont(this.p),this.zero=new rr(0).toRed(this.red),this.one=new rr(1).toRed(this.red),this.two=new rr(2).toRed(this.red),this.n=e.n&&new rr(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Wf=Au;Au.prototype.point=function(){throw new Error("Not implemented")};Au.prototype.validate=function(){throw new Error("Not implemented")};Au.prototype._fixedNafMul=function(e,t){vv(e.precomputed);var n=e._getDoubles(),i=yv(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var u=this.jpoint(null,null,null),f=this.jpoint(null,null,null),h=s;h>0;h--){for(a=0;a<o.length;a++)c=o[a],c===h?f=f.mixedAdd(n.points[a]):c===-h&&(f=f.mixedAdd(n.points[a].neg()));u=u.add(f)}return u.toP()};Au.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=yv(t,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var u=o[c];vv(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a};Au.prototype._wnafMulAdd=function(e,t,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,u,f,h;for(u=0;u<i;u++){h=t[u];var d=h._getNAFPoints(e);o[u]=d.wnd,a[u]=d.points}for(u=i-1;u>=1;u-=2){var g=u-1,p=u;if(o[g]!==1||o[p]!==1){c[g]=yv(n[g],o[g],this._bitLength),c[p]=yv(n[p],o[p],this._bitLength),l=Math.max(c[g].length,l),l=Math.max(c[p].length,l);continue}var m=[t[g],null,null,t[p]];t[g].y.cmp(t[p].y)===0?(m[1]=t[g].add(t[p]),m[2]=t[g].toJ().mixedAdd(t[p].neg())):t[g].y.cmp(t[p].y.redNeg())===0?(m[1]=t[g].toJ().mixedAdd(t[p]),m[2]=t[g].add(t[p].neg())):(m[1]=t[g].toJ().mixedAdd(t[p]),m[2]=t[g].toJ().mixedAdd(t[p].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],v=Cae(n[g],n[p]);for(l=Math.max(v[0].length,l),c[g]=new Array(l),c[p]=new Array(l),f=0;f<l;f++){var b=v[0][f]|0,_=v[1][f]|0;c[g][f]=y[(b+1)*3+(_+1)],c[p][f]=0,a[g]=m}}var x=this.jpoint(null,null,null),E=this._wnafT4;for(u=l;u>=0;u--){for(var S=0;u>=0;){var C=!0;for(f=0;f<i;f++)E[f]=c[f][u]|0,E[f]!==0&&(C=!1);if(!C)break;S++,u--}if(u>=0&&S++,x=x.dblp(S),u<0)break;for(f=0;f<i;f++){var k=E[f];k!==0&&(k>0?h=a[f][k-1>>1]:k<0&&(h=a[f][-k-1>>1].neg()),h.type==="affine"?x=x.mixedAdd(h):x=x.add(h))}}for(u=0;u<i;u++)a[u]=null;return s?x:x.toP()};function Zo(r,e){this.curve=r,this.type=e,this.precomputed=null}Au.BasePoint=Zo;Zo.prototype.eq=function(){throw new Error("Not implemented")};Zo.prototype.validate=function(){return this.curve.validate(this)};Au.prototype.decodePoint=function(e,t){e=Ro.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?vv(e[e.length-1]%2===0):e[0]===7&&vv(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Zo.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Zo.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};Zo.prototype.encode=function(e,t){return Ro.encode(this._encode(t),e)};Zo.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Zo.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Zo.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};Zo.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};Zo.prototype._getBeta=function(){return null};Zo.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var NR=Zd(function(r){typeof Object.create=="function"?r.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}}),Tae=Ro.assert;function ea(r){Wf.call(this,"short",r),this.a=new rr(r.a,16).toRed(this.red),this.b=new rr(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}NR(ea,Wf);var Rae=ea;ea.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new rr(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new rr(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?n=s[0]:(n=s[1],Tae(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new rr(a.a,16),b:new rr(a.b,16)}}):o=this._getEndoBasis(n),{beta:t,lambda:n,basis:o}}};ea.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:rr.mont(e),n=new rr(2).toRed(t).redInvm(),i=n.redNeg(),s=new rr(3).toRed(t).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};ea.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new rr(1),o=new rr(0),a=new rr(0),c=new rr(1),l,u,f,h,d,g,p,m=0,y,v;n.cmpn(0)!==0;){var b=i.div(n);y=i.sub(b.mul(n)),v=a.sub(b.mul(s));var _=c.sub(b.mul(o));if(!f&&y.cmp(t)<0)l=p.neg(),u=s,f=y.neg(),h=v;else if(f&&++m===2)break;p=y,i=n,n=y,a=s,s=v,c=o,o=_}d=y.neg(),g=v;var x=f.sqr().add(h.sqr()),E=d.sqr().add(g.sqr());return E.cmp(x)>=0&&(d=l,g=u),f.negative&&(f=f.neg(),h=h.neg()),d.negative&&(d=d.neg(),g=g.neg()),[{a:f,b:h},{a:d,b:g}]};ea.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),l=s.mul(n.b),u=o.mul(i.b),f=e.sub(a).sub(c),h=l.add(u).neg();return{k1:f,k2:h}};ea.prototype.pointFromX=function(e,t){e=new rr(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};ea.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};ea.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,i,s,o*2,n),f=0;f<o*2;f++)i[f]=null,s[f]=null;return u};function bi(r,e,t,n){Wf.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new rr(e,16),this.y=new rr(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}NR(bi,Wf.BasePoint);ea.prototype.point=function(e,t,n){return new bi(this,e,t,n)};ea.prototype.pointFromJSON=function(e,t){return bi.fromJSON(this,e,t)};bi.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};bi.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};bi.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};bi.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};bi.prototype.isInfinity=function(){return this.inf};bi.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};bi.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};bi.prototype.getX=function(){return this.x.fromRed()};bi.prototype.getY=function(){return this.y.fromRed()};bi.prototype.mul=function(e){return e=new rr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};bi.prototype.mulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};bi.prototype.jmulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};bi.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};bi.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};bi.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ui(r,e,t,n){Wf.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new rr(0)):(this.x=new rr(e,16),this.y=new rr(t,16),this.z=new rr(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}NR(Ui,Wf.BasePoint);ea.prototype.jpoint=function(e,t,n){return new Ui(this,e,t,n)};Ui.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};Ui.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ui.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),f=u.redMul(c),h=i.redMul(u),d=l.redSqr().redIAdd(f).redISub(h).redISub(h),g=l.redMul(h.redISub(d)).redISub(o.redMul(f)),p=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(d,g,p)};Ui.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),f=n.redMul(l),h=c.redSqr().redIAdd(u).redISub(f).redISub(f),d=c.redMul(f.redISub(h)).redISub(s.redMul(u)),g=this.z.redMul(a);return this.curve.jpoint(h,d,g)};Ui.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),u=a.redAdd(a);for(t=0;t<e;t++){var f=o.redSqr(),h=u.redSqr(),d=h.redSqr(),g=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(l)),p=o.redMul(h),m=g.redSqr().redISub(p.redAdd(p)),y=p.redISub(m),v=g.redMul(y);v=v.redIAdd(v).redISub(d);var b=u.redMul(c);t+1<e&&(l=l.redMul(d)),o=m,c=b,u=v}return this.curve.jpoint(o,u.redMul(s),c)};Ui.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ui.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=l,t=c.redMul(a.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),g=this.x.redAdd(h).redSqr().redISub(f).redISub(d);g=g.redIAdd(g);var p=f.redAdd(f).redIAdd(f),m=p.redSqr(),y=d.redIAdd(d);y=y.redIAdd(y),y=y.redIAdd(y),e=m.redISub(g).redISub(g),t=p.redMul(g.redISub(e)).redISub(y),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};Ui.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),t=c.redMul(a.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),g=this.x.redSub(f).redMul(this.x.redAdd(f));g=g.redAdd(g).redIAdd(g);var p=d.redIAdd(d);p=p.redIAdd(p);var m=p.redAdd(p);e=g.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(f);var y=h.redSqr();y=y.redIAdd(y),y=y.redIAdd(y),y=y.redIAdd(y),t=g.redMul(p.redISub(e)).redISub(y)}return this.curve.jpoint(e,t,n)};Ui.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=t.redAdd(t);l=l.redIAdd(l);var u=l.redMul(a),f=c.redSqr().redISub(u.redAdd(u)),h=u.redISub(f),d=a.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var g=c.redMul(h).redISub(d),p=n.redAdd(n).redMul(i);return this.curve.jpoint(f,g,p)};Ui.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var u=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),f=t.redMul(u);f=f.redIAdd(f),f=f.redIAdd(f);var h=this.x.redMul(c).redISub(f);h=h.redIAdd(h),h=h.redIAdd(h);var d=this.y.redMul(u.redMul(l.redISub(u)).redISub(a.redMul(c)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var g=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(h,d,g)};Ui.prototype.mul=function(e,t){return e=new rr(e,t),this.curve._wnafMul(this,e)};Ui.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Ui.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Ui.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ui.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ay=Zd(function(r,e){var t=e;t.base=Wf,t.short=Rae,t.mont=null,t.edwards=null}),Iy=Zd(function(r,e){var t=e,n=Ro.assert;function i(a){a.type==="short"?this.curve=new Ay.short(a):a.type==="edwards"?this.curve=new Ay.edwards(a):this.curve=new Ay.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,c){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var l=new i(c);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:l}),l}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ja.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ja.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ja.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ja.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ja.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ja.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ja.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ja.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function gu(r){if(!(this instanceof gu))return new gu(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=ga.toArray(r.entropy,r.entropyEnc||"hex"),t=ga.toArray(r.nonce,r.nonceEnc||"hex"),n=ga.toArray(r.pers,r.persEnc||"hex");BR(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}var Gq=gu;gu.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};gu.prototype._hmac=function(){return new Ja.hmac(this.hash,this.K)};gu.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};gu.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=ga.toArray(e,t),n=ga.toArray(n,i),BR(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};gu.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=ga.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,ga.encode(o,t)};var MA=Ro.assert;function as(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var LR=as;as.fromPublic=function(e,t,n){return t instanceof as?t:new as(e,{pub:t,pubEnc:n})};as.fromPrivate=function(e,t,n){return t instanceof as?t:new as(e,{priv:t,privEnc:n})};as.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};as.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};as.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};as.prototype._importPrivate=function(e,t){this.priv=new rr(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};as.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?MA(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&MA(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};as.prototype.derive=function(e){return e.validate()||MA(e.validate(),"public point not validated"),e.mul(this.priv).getX()};as.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};as.prototype.verify=function(e,t,n){return this.ec.verify(e,t,this,void 0,n)};as.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var kae=Ro.assert;function Kb(r,e){if(r instanceof Kb)return r;this._importDER(r,e)||(kae(r.r&&r.s,"Signature without r or s"),this.r=new rr(r.r,16),this.s=new rr(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var Hb=Kb;function Pae(){this.place=0}function B1(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4||r[e.place]===0)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=r[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function _O(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Kb.prototype._importDER=function(e,t){e=Ro.toArray(e,t);var n=new Pae;if(e[n.place++]!==48)return!1;var i=B1(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=B1(e,n);if(s===!1||(e[n.place]&128)!==0)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=B1(e,n);if(a===!1||e.length!==a+n.place||(e[n.place]&128)!==0)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new rr(o),this.s=new rr(c),this.recoveryParam=null,!0};function N1(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Kb.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=_O(t),n=_O(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];N1(i,t.length),i=i.concat(t),i.push(2),N1(i,n.length);var s=i.concat(n),o=[48];return N1(o,s.length),o=o.concat(s),Ro.encode(o,e)};var Oae=function(){throw new Error("unsupported")},Yu=Ro.assert;function Jo(r){if(!(this instanceof Jo))return new Jo(r);typeof r=="string"&&(Yu(Object.prototype.hasOwnProperty.call(Iy,r),"Unknown curve "+r),r=Iy[r]),r instanceof Iy.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var Dae=Jo;Jo.prototype.keyPair=function(e){return new LR(this,e)};Jo.prototype.keyFromPrivate=function(e,t){return LR.fromPrivate(this,e,t)};Jo.prototype.keyFromPublic=function(e,t){return LR.fromPublic(this,e,t)};Jo.prototype.genKeyPair=function(e){e||(e={});for(var t=new Gq({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Oae(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new rr(2));;){var s=new rr(t.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Jo.prototype._truncateToN=function(e,t,n){var i;if(rr.isBN(e)||typeof e=="number")e=new rr(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new rr(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new rr(s,16)}typeof n!="number"&&(n=i*8);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Jo.prototype.sign=function(e,t,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!rr.isBN(e)){Yu(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Yu(e.length>>>0===e.length);for(var s=0;s<e.length;s++)Yu((e[s]&255)===e[s])}t=this.keyFromPrivate(t,n),e=this._truncateToN(e,!1,i.msgBitLength),Yu(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=t.getPrivate().toArray("be",o),c=e.toArray("be",o);Yu(new rr(c).eq(e),"Can not sign message");for(var l=new Gq({hash:this.hash,entropy:a,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new rr(1)),f=0;;f++){var h=i.k?i.k(f):new rr(l.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(u)>=0)){var d=this.g.mul(h);if(!d.isInfinity()){var g=d.getX(),p=g.umod(this.n);if(p.cmpn(0)!==0){var m=h.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(m=m.umod(this.n),m.cmpn(0)!==0){var y=(d.getY().isOdd()?1:0)|(g.cmp(p)!==0?2:0);return i.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),y^=1),new Hb({r:p,s:m,recoveryParam:y})}}}}}};Jo.prototype.verify=function(e,t,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),t=new Hb(t,"hex");var o=t.r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),l=c.mul(e).umod(this.n),u=c.mul(o).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(l,n.getPublic(),u),f.isInfinity()?!1:f.eqXToP(o)):(f=this.g.mulAdd(l,n.getPublic(),u),f.isInfinity()?!1:f.getX().umod(this.n).cmp(o)===0)};Jo.prototype.recoverPubKey=function(r,e,t,n){Yu((3&t)===t,"The recovery param is more than two bits"),e=new Hb(e,n);var i=this.n,s=new rr(r),o=e.r,a=e.s,c=t&1,l=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var u=e.r.invm(i),f=i.sub(s).mul(u).umod(i),h=a.mul(u).umod(i);return this.g.mulAdd(f,o,h)};Jo.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new Hb(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(r,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var $ae=Zd(function(r,e){var t=e;t.version="6.6.1",t.utils=Ro,t.rand=function(){throw new Error("unsupported")},t.curve=Ay,t.curves=Iy,t.ec=Dae,t.eddsa=null}),Mae=$ae.ec;const Bae="signing-key/5.8.0",BA=new Ve(Bae);let L1=null;function Fl(){return L1||(L1=new Mae("secp256k1")),L1}class Nae{constructor(e){Nr(this,"curve","secp256k1"),Nr(this,"privateKey",wr(e)),Ef(this.privateKey)!==32&&BA.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=Fl().keyFromPrivate(xr(this.privateKey));Nr(this,"publicKey","0x"+t.getPublic(!1,"hex")),Nr(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Nr(this,"_isSigningKey",!0)}_addPoint(e){const t=Fl().keyFromPublic(xr(this.publicKey)),n=Fl().keyFromPublic(xr(e));return"0x"+t.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const t=Fl().keyFromPrivate(xr(this.privateKey)),n=xr(e);n.length!==32&&BA.throwArgumentError("bad digest length","digest",e);const i=t.sign(n,{canonical:!0});return Ub({recoveryParam:i.recoveryParam,r:Fn("0x"+i.r.toString(16),32),s:Fn("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=Fl().keyFromPrivate(xr(this.privateKey)),n=Fl().keyFromPublic(xr(Yq(e)));return Fn("0x"+t.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function Lae(r,e){const t=Ub(e),n={r:xr(t.r),s:xr(t.s)};return"0x"+Fl().recoverPubKey(xr(r),n,t.recoveryParam).encode("hex",!1)}function Yq(r,e){const t=xr(r);return t.length===32?new Nae(t).publicKey:t.length===33?"0x"+Fl().keyFromPublic(t).getPublic(!1,"hex"):t.length===65?wr(t):BA.throwArgumentError("invalid public or private key","key","[REDACTED]")}const Fae="transactions/5.8.0",vl=new Ve(Fae);var SO;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(SO||(SO={}));function FR(r){return r==="0x"?null:Ca(r)}function Zi(r){return r==="0x"?hoe:xt.from(r)}function Uae(r){const e=Yq(r);return Ca(ms(Bi(ms(e,1)),12))}function Xq(r,e){return Uae(Lae(xr(r),e))}function lo(r,e){const t=wd(xt.from(r).toHexString());return t.length>32&&vl.throwArgumentError("invalid length for "+e,"transaction:"+e,r),t}function F1(r,e){return{address:Ca(r),storageKeys:(e||[]).map((t,n)=>(Ef(t)!==32&&vl.throwArgumentError("invalid access list storageKey",`accessList[${r}:${n}]`,t),t.toLowerCase()))}}function jg(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(t.length>2&&vl.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,t),F1(t[0],t[1])):F1(t.address,t.storageKeys));const e=Object.keys(r).map(t=>{const n=r[t].reduce((i,s)=>(i[s]=!0,i),{});return F1(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function Jq(r){return jg(r).map(e=>[e.address,e.storageKeys])}function zae(r,e){if(r.gasPrice!=null){const n=xt.from(r.gasPrice),i=xt.from(r.maxFeePerGas||0);n.eq(i)||vl.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const t=[lo(r.chainId||0,"chainId"),lo(r.nonce||0,"nonce"),lo(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),lo(r.maxFeePerGas||0,"maxFeePerGas"),lo(r.gasLimit||0,"gasLimit"),r.to!=null?Ca(r.to):"0x",lo(r.value||0,"value"),r.data||"0x",Jq(r.accessList||[])];if(e){const n=Ub(e);t.push(lo(n.recoveryParam,"recoveryParam")),t.push(wd(n.r)),t.push(wd(n.s))}return yo(["0x02",jb(t)])}function qae(r,e){const t=[lo(r.chainId||0,"chainId"),lo(r.nonce||0,"nonce"),lo(r.gasPrice||0,"gasPrice"),lo(r.gasLimit||0,"gasLimit"),r.to!=null?Ca(r.to):"0x",lo(r.value||0,"value"),r.data||"0x",Jq(r.accessList||[])];if(e){const n=Ub(e);t.push(lo(n.recoveryParam,"recoveryParam")),t.push(wd(n.r)),t.push(wd(n.s))}return yo(["0x01",jb(t)])}function Qq(r,e,t){try{const n=Zi(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");r.v=n}catch{vl.throwArgumentError("invalid v for transaction type: 1","v",e[0])}r.r=Fn(e[1],32),r.s=Fn(e[2],32);try{const n=Bi(t(r));r.from=Xq(n,{r:r.r,s:r.s,recoveryParam:r.v})}catch{}}function jae(r){const e=DR(r.slice(1));e.length!==9&&e.length!==12&&vl.throwArgumentError("invalid component count for transaction type: 2","payload",wr(r));const t=Zi(e[2]),n=Zi(e[3]),i={type:2,chainId:Zi(e[0]).toNumber(),nonce:Zi(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:n,gasPrice:null,gasLimit:Zi(e[4]),to:FR(e[5]),value:Zi(e[6]),data:e[7],accessList:jg(e[8])};return e.length===9||(i.hash=Bi(r),Qq(i,e.slice(9),zae)),i}function Vae(r){const e=DR(r.slice(1));e.length!==8&&e.length!==11&&vl.throwArgumentError("invalid component count for transaction type: 1","payload",wr(r));const t={type:1,chainId:Zi(e[0]).toNumber(),nonce:Zi(e[1]).toNumber(),gasPrice:Zi(e[2]),gasLimit:Zi(e[3]),to:FR(e[4]),value:Zi(e[5]),data:e[6],accessList:jg(e[7])};return e.length===8||(t.hash=Bi(r),Qq(t,e.slice(8),qae)),t}function Kae(r){const e=DR(r);e.length!==9&&e.length!==6&&vl.throwArgumentError("invalid raw transaction","rawTransaction",r);const t={nonce:Zi(e[0]).toNumber(),gasPrice:Zi(e[1]),gasLimit:Zi(e[2]),to:FR(e[3]),value:Zi(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=xt.from(e[6]).toNumber()}catch{return t}if(t.r=Fn(e[7],32),t.s=Fn(e[8],32),xt.from(t.r).isZero()&&xt.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let n=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(wr(t.chainId)),i.push("0x"),i.push("0x"),n-=t.chainId*2+8);const s=Bi(jb(i));try{t.from=Xq(s,{r:wr(t.r),s:wr(t.s),recoveryParam:n})}catch{}t.hash=Bi(r)}return t.type=null,t}function Hae(r){const e=xr(r);if(e[0]>127)return Kae(e);switch(e[0]){case 1:return Vae(e);case 2:return jae(e)}return vl.throwError(`unsupported transaction type: ${e[0]}`,Ve.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const bp=new Ve(Vb);class Dt{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),c=this.number.bind(this),l=this.type.bind(this),u=f=>this.data(f,!0);return e.transaction={hash:o,type:l,accessList:Dt.allowNull(this.accessList.bind(this),null),blockHash:Dt.allowNull(o,null),blockNumber:Dt.allowNull(c,null),transactionIndex:Dt.allowNull(c,null),confirmations:Dt.allowNull(c,null),from:t,gasPrice:Dt.allowNull(n),maxPriorityFeePerGas:Dt.allowNull(n),maxFeePerGas:Dt.allowNull(n),gasLimit:n,to:Dt.allowNull(t,null),value:n,nonce:c,data:s,r:Dt.allowNull(this.uint256),s:Dt.allowNull(this.uint256),v:Dt.allowNull(c),creates:Dt.allowNull(t,null),raw:Dt.allowNull(s)},e.transactionRequest={from:Dt.allowNull(t),nonce:Dt.allowNull(c),gasLimit:Dt.allowNull(n),gasPrice:Dt.allowNull(n),maxPriorityFeePerGas:Dt.allowNull(n),maxFeePerGas:Dt.allowNull(n),to:Dt.allowNull(t),value:Dt.allowNull(n),data:Dt.allowNull(u),type:Dt.allowNull(c),accessList:Dt.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:o,address:t,topics:Dt.arrayOf(o),data:s,logIndex:c,blockHash:o},e.receipt={to:Dt.allowNull(this.address,null),from:Dt.allowNull(this.address,null),contractAddress:Dt.allowNull(t,null),transactionIndex:c,root:Dt.allowNull(a),gasUsed:n,logsBloom:Dt.allowNull(s),blockHash:o,transactionHash:o,logs:Dt.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:Dt.allowNull(c,null),cumulativeGasUsed:n,effectiveGasPrice:Dt.allowNull(n),status:Dt.allowNull(c),type:l},e.block={hash:Dt.allowNull(o),parentHash:o,number:c,timestamp:c,nonce:Dt.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:Dt.allowNull(t),extraData:s,transactions:Dt.allowNull(Dt.arrayOf(o)),baseFeePerGas:Dt.allowNull(n)},e.blockWithTransactions=Bs(e.block),e.blockWithTransactions.transactions=Dt.allowNull(Dt.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Dt.allowNull(i,void 0),toBlock:Dt.allowNull(i,void 0),blockHash:Dt.allowNull(o,void 0),address:Dt.allowNull(t,void 0),topics:Dt.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Dt.allowNull(c),blockHash:Dt.allowNull(o),transactionIndex:c,removed:Dt.allowNull(this.boolean.bind(this)),address:t,data:Dt.allowFalsish(s,"0x"),topics:Dt.arrayOf(o),transactionHash:o,logIndex:c},e}accessList(e){return jg(e||[])}number(e){return e==="0x"?0:xt.from(e).toNumber()}type(e){return e==="0x"||e==null?0:xt.from(e).toNumber()}bigNumber(e){return xt.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),ln(e))?e.toLowerCase():bp.throwArgumentError("invalid hash","value",e)}data(e,t){const n=this.hex(e,t);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Ca(e)}callAddress(e){if(!ln(e,32))return null;const t=Ca(ms(e,12));return t===foe?null:t}contractAddress(e){return rae(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||ln(e))return kR(e);throw new Error("invalid blockTag")}hash(e,t){const n=this.hex(e,t);return Ef(n)!==32?bp.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const t=xt.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!ln(e))throw new Error("invalid uint256");return Fn(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=Dt.check(t,e);return i._difficulty=n==null?null:xt.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Dt.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&xt.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=Dt.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;ln(n)&&(n=xt.from(n).toNumber()),t.chainId=n}else{let n=e.networkId;n==null&&t.v==null&&(n=e.chainId),ln(n)&&(n=xt.from(n).toNumber()),typeof n!="number"&&t.v!=null&&(n=(t.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),t.chainId=n}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return Hae(e)}receiptLog(e){return Dt.check(this.formats.receiptLog,e)}receipt(e){const t=Dt.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const n=xt.from(t.root).toNumber();n===0||n===1?(t.status!=null&&t.status!==n&&bp.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=n,delete t.root):bp.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&bp.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return Dt.check(this.formats.filter,e)}filterLog(e){return Dt.check(this.formats.filterLog,e)}static check(e,t){const n={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return n}static allowNull(e,t){return function(n){return n==null?t:e(n)}}static allowFalsish(e,t){return function(n){return n?e(n):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const n=[];return t.forEach(function(i){n.push(e(i))}),n}}}var cr=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const Rr=new Ve(Vb),Wae=10;function EO(r){return r==null?"null":(Ef(r)!==32&&Rr.throwArgumentError("invalid topic","topic",r),r.toLowerCase())}function AO(r){for(r=r.slice();r.length>0&&r[r.length-1]==null;)r.pop();return r.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[EO(i)]=!0});const n=Object.keys(t);return n.sort(),n.join("|")}else return EO(e)}).join("&")}function Gae(r){return r===""?[]:r.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(n=>n==="null"?null:n);return t.length===1?t[0]:t})}function hh(r){if(typeof r=="string"){if(r=r.toLowerCase(),Ef(r)===32)return"tx:"+r;if(r.indexOf(":")===-1)return r}else{if(Array.isArray(r))return"filter:*:"+AO(r);if(aoe.isForkEvent(r))throw Rr.warn("not implemented"),new Error("not implemented");if(r&&typeof r=="object")return"filter:"+(r.address||"*")+":"+AO(r.topics||[])}throw new Error("invalid event - "+r)}function wp(){return new Date().getTime()}function IO(r){return new Promise(e=>{setTimeout(e,r)})}const Yae=["block","network","pending","poll"];let Xae=class{constructor(e,t,n){Nr(this,"tag",e),Nr(this,"listener",t),Nr(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],n=Gae(e[2]),i={};return n.length>0&&(i.topics=n),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||Yae.indexOf(this.tag)>=0}};const Jae={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function U1(r){return Fn(xt.from(r).toHexString(),32)}function CO(r){return OA.encode(rf([r,ms(vO(vO(r)),0,4)]))}const Zq=new RegExp("^(ipfs)://(.*)$","i"),TO=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Zq,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Cy(r,e){try{return zb(ug(r,e))}catch{}return null}function ug(r,e){if(r==="0x")return null;const t=xt.from(ms(r,e,e+32)).toNumber(),n=xt.from(ms(r,t,t+32)).toNumber();return ms(r,t+32,t+32+n)}function z1(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):Rr.throwArgumentError("unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}function RO(r){const e=xr(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function Qae(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}function ej(r){const e=[];let t=0;for(let n=0;n<r.length;n++)e.push(null),t+=32;for(let n=0;n<r.length;n++){const i=xr(r[n]);e[n]=RO(t),e.push(RO(i.length)),e.push(Qae(i)),t+=32+Math.ceil(i.length/32)*32}return yo(e)}class kO{constructor(e,t,n,i){Nr(this,"provider",e),Nr(this,"name",n),Nr(this,"address",e.formatter.address(t)),Nr(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>xt.from(e).eq(1)).catch(e=>{if(e.code===Ve.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return cr(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:yo([e,Ey(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=yo(["0x9061b923",ej([Xoe(this.name),n.data])]));try{let s=yield this.provider.call(n);return xr(s).length%32===4&&Rr.throwError("resolver threw error",Ve.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=ug(s,0)),s}catch(s){if(s.code===Ve.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return cr(this,void 0,void 0,function*(){const n=yield this._fetch(e,t);return n!=null?ug(n,0):null})}_getAddress(e,t){const n=Jae[String(e)];if(n==null&&Rr.throwError(`unsupported coin type: ${e}`,Ve.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(t);const i=xr(t);if(n.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return CO(rf([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return CO(rf([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=xO.toWords(i.slice(2));return a.unshift(o),xO.encode(n.prefix,a)}}return null}getAddress(e){return cr(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===doe?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===Ve.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",U1(e));if(t==null||t==="0x")return null;const n=this._getAddress(e,t);return n==null&&Rr.throwError("invalid or unsupported coin data",Ve.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),n})}getAvatar(){return cr(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let n=0;n<TO.length;n++){const i=t.match(TO[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:z1(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),c=(i[2]||"").split("/");if(c.length!==2)return null;const l=yield this.provider.formatter.address(c[0]),u=Fn(xt.from(c[1]).toHexString(),32);if(s==="erc721"){const p=this.provider.formatter.callAddress(yield this.provider.call({to:l,data:yo(["0x6352211e",u])}));if(a!==p)return null;e.push({type:"owner",content:p})}else if(s==="erc1155"){const p=xt.from(yield this.provider.call({to:l,data:yo(["0x00fdd58e",Fn(a,32),u])}));if(p.isZero())return null;e.push({type:"balance",content:p.toString()})}const f={to:this.provider.formatter.address(c[0]),data:yo([o,u])};let h=Cy(yield this.provider.call(f),0);if(h==null)return null;e.push({type:"metadata-url-base",content:h}),s==="erc1155"&&(h=h.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:h})),h.match(/^ipfs:/i)&&(h=z1(h)),e.push({type:"metadata-url",content:h});const d=yield MR(h);if(!d)return null;e.push({type:"metadata",content:JSON.stringify(d)});let g=d.image;if(typeof g!="string")return null;if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(Zq)==null)return null;e.push({type:"url-ipfs",content:g}),g=z1(g)}return e.push({type:"url",content:g}),{linkage:e,url:g}}}}}catch{}return null})}getContentHash(){return cr(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===o*2)return"ipfs://"+OA.encode("0x"+t[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+OA.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+_q("0x"+s[1]).replace(/[=+\/]/g,c=>o[c])}return Rr.throwError("invalid or unsupported content hash data",Ve.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return cr(this,void 0,void 0,function*(){let t=cl(e);t=rf([U1(64),U1(t.length),t]),t.length%32!==0&&(t=rf([t,Fn("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",wr(t));return n==null||n==="0x"?null:zb(n)})}}let q1=null,Zae=1;class ece extends OR{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Nr(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=u0(new.target,"getNetwork")(e);t?(Nr(this,"_network",t),this.emit("network",t,null)):Rr.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return cr(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Rr.throwError("no network detected",Ve.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:Nr(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return f0(()=>this._ready().then(e=>e,e=>{if(!(e.code===Ve.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return q1==null&&(q1=new Dt),q1}static getNetwork(e){return uoe(e??"homestead")}ccipReadFetch(e,t,n){return cr(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],l=c.replace("{sender}",i).replace("{data}",s),u=c.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),f=yield MR({url:l,errorPassThrough:!0},u,(d,g)=>(d.status=g.statusCode,d));if(f.data)return f.data;const h=f.message||"unknown error";if(f.status>=400&&f.status<500)return Rr.throwError(`response not found during CCIP fetch: ${h}`,Ve.errors.SERVER_ERROR,{url:c,errorMessage:h});o.push(h)}return Rr.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,Ve.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return cr(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(wp()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=wp(),n=Ri({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const o=wp();return i=xt.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return cr(this,void 0,void 0,function*(){const e=Zae++,t=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)Rr.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",Rr.makeError("network block skew detected",Ve.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(c=>{i._inflight=!1,c.length!==0&&c.forEach(l=>{l.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=l.blockNumber),this._emitted["b:"+l.blockHash]=l.blockNumber,this._emitted["t:"+l.transactionHash]=l.blockNumber,this.emit(s,l)})}).catch(c=>{this.emit("error",c),i._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return cr(this,void 0,void 0,function*(){return Rr.throwError("provider does not support network detection",Ve.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return cr(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield IO(0),this._network;const n=Rr.makeError("underlying network changed",Ve.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=wp();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=wp(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,n){return cr(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,n||0,null)})}_waitForTransaction(e,t,n,i){return cr(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const c=[];let l=!1;const u=function(){return l?!0:(l=!0,c.forEach(h=>{h()}),!1)},f=h=>{h.confirmations<t||u()||o(h)};if(this.on(e,f),c.push(()=>{this.removeListener(e,f)}),i){let h=i.startBlock,d=null;const g=p=>cr(this,void 0,void 0,function*(){l||(yield IO(1e3),this.getTransactionCount(i.from).then(m=>cr(this,void 0,void 0,function*(){if(!l){if(m<=i.nonce)h=p;else{{const y=yield this.getTransaction(e);if(y&&y.blockNumber!=null)return}for(d==null&&(d=h-3,d<i.startBlock&&(d=i.startBlock));d<=p;){if(l)return;const y=yield this.getBlockWithTransactions(d);for(let v=0;v<y.transactions.length;v++){const b=y.transactions[v];if(b.hash===e)return;if(b.from===i.from&&b.nonce===i.nonce){if(l)return;const _=yield this.waitForTransaction(b.hash,t);if(u())return;let x="replaced";b.data===i.data&&b.to===i.to&&b.value.eq(i.value)?x="repriced":b.data==="0x"&&b.from===b.to&&b.value.isZero()&&(x="cancelled"),a(Rr.makeError("transaction was replaced",Ve.errors.TRANSACTION_REPLACED,{cancelled:x==="replaced"||x==="cancelled",reason:x,replacement:this._wrapTransaction(b),hash:e,receipt:_}));return}}d++}}l||this.once("block",g)}}),m=>{l||this.once("block",g)}))});if(l)return;this.once("block",g),c.push(()=>{this.removeListener("block",g)})}if(typeof n=="number"&&n>0){const h=setTimeout(()=>{u()||a(Rr.makeError("timeout exceeded",Ve.errors.TIMEOUT,{timeout:n}))},n);h.unref&&h.unref(),c.push(()=>{clearTimeout(h)})}})})}getBlockNumber(){return cr(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return cr(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return xt.from(e)}catch(t){return Rr.throwError("bad result from backend",Ve.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return cr(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ri({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",n);try{return xt.from(i)}catch(s){return Rr.throwError("bad result from backend",Ve.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,t){return cr(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ri({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",n);try{return xt.from(i).toNumber()}catch(s){return Rr.throwError("bad result from backend",Ve.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,t){return cr(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ri({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",n);try{return wr(i)}catch(s){return Rr.throwError("bad result from backend",Ve.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,t,n){return cr(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Ri({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(t).then(o=>kR(o))}),s=yield this.perform("getStorageAt",i);try{return wr(s)}catch(o){return Rr.throwError("bad result from backend",Ve.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,n){if(t!=null&&Ef(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&Rr.throwError("Transaction hash mismatch from Provider.sendTransaction.",Ve.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>cr(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const c=yield this._waitForTransaction(e.hash,s,o,a);return c==null&&s===0?null:(this._emitted["t:"+e.hash]=c.blockNumber,c.status===0&&Rr.throwError("transaction failed",Ve.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:c}),c)}),i}sendTransaction(e){return cr(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>wr(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return cr(this,void 0,void 0,function*(){const t=yield e,n={};return["from","to"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?xt.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(n.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?wr(s):null))}),this.formatter.transactionRequest(yield Ri(n))})}_getFilter(e){return cr(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(t[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(t[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield Ri(t))})}_call(e,t,n){return cr(this,void 0,void 0,function*(){n>=Wae&&Rr.throwError("CCIP read exceeded maximum redirections",Ve.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(n>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&Ef(s)%32===4)try{const o=ms(s,4),a=ms(o,0,32);xt.from(a).eq(i)||Rr.throwError("CCIP Read sender did not match",Ve.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const c=[],l=xt.from(ms(o,32,64)).toNumber(),u=xt.from(ms(o,l,l+32)).toNumber(),f=ms(o,l+32);for(let y=0;y<u;y++){const v=Cy(f,y*32);v==null&&Rr.throwError("CCIP Read contained corrupt URL string",Ve.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),c.push(v)}const h=ug(o,64);xt.from(ms(o,100,128)).isZero()||Rr.throwError("CCIP Read callback selector included junk",Ve.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const d=ms(o,96,100),g=ug(o,128),p=yield this.ccipReadFetch(e,h,c);p==null&&Rr.throwError("CCIP Read disabled or provided no URLs",Ve.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const m={to:i,data:yo([d,ej([p,g])])};return this._call(m,t,n+1)}catch(o){if(o.code===Ve.errors.SERVER_ERROR)throw o}try{return wr(s)}catch(o){return Rr.throwError("bad result from backend",Ve.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return cr(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ri({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return cr(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ri({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",t);try{return xt.from(n)}catch(i){return Rr.throwError("bad result from backend",Ve.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:n,error:i})}})}_getAddress(e){return cr(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Rr.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&Rr.throwError("ENS name not configured",Ve.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return cr(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!t};if(ln(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),ln(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{Rr.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return f0(()=>cr(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(t){let o=null;for(let c=0;c<s.transactions.length;c++){const l=s.transactions[c];if(l.blockNumber==null)l.confirmations=0;else if(l.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let u=o-l.blockNumber+1;u<=0&&(u=1),l.confirmations=u}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(c=>this._wrapTransaction(c)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return cr(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return f0(()=>cr(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return cr(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return f0(()=>cr(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return cr(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ri({filter:this._getFilter(e)}),n=yield this.perform("getLogs",t);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),Dt.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return cr(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return cr(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Rr.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return cr(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const n=yield this._getResolver(t,"getResolver");if(n!=null){const i=new kO(this,n,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return cr(this,void 0,void 0,function*(){t==null&&(t="ENS");const n=yield this.getNetwork();n.ensAddress||Rr.throwError("network does not support ENS",Ve.errors.UNSUPPORTED_OPERATION,{operation:t,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+Ey(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return cr(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(ln(e))throw n}typeof e!="string"&&Rr.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return cr(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(t,"lookupAddress");if(n==null)return null;const i=Cy(yield this.call({to:n,data:"0x691f3431"+Ey(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return cr(this,void 0,void 0,function*(){let t=null;if(ln(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;t=new kO(this,o,s);try{const a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==Ve.errors.CALL_EXCEPTION)throw a}try{const a=Cy(yield this.call({to:o,data:"0x691f3431"+Ey(s).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==Ve.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;const n=yield t.getAvatar();return n==null?null:n.url})}perform(e,t){return Rr.throwError(e+" not implemented",Ve.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,n){const i=new Xae(hh(e),t,n);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let n=!1,i=[],s=hh(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),n=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let t=hh(e);return this._events.filter(n=>n.tag===t).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let t=hh(e);return this._events.filter(n=>n.tag===t).map(n=>n.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const n=[];let i=!1,s=hh(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const n=hh(e);this._events=this._events.filter(i=>i.tag!==n?!0:(t.push(i),!1))}return t.forEach(n=>{this._stopEvent(n)}),this}}var Lc=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const ei=new Ve(Vb),tce=["call","estimateGas"];function O0(r,e){if(r==null)return null;if(typeof r.message=="string"&&r.message.match("reverted")){const t=ln(r.data)?r.data:null;if(!e||t)return{message:r.message,data:t}}if(typeof r=="object"){for(const t in r){const n=O0(r[t],e);if(n)return n}return null}if(typeof r=="string")try{return O0(JSON.parse(r),e)}catch{}return null}function tj(r,e,t){const n=t.transaction||t.signedTransaction;if(r==="call"){const s=O0(e,!0);if(s)return s.data;ei.throwError("missing revert data in call exception; Transaction reverted without a reason string",Ve.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(r==="estimateGas"){let s=O0(e.body,!1);s==null&&(s=O0(e,!1)),s&&ei.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ve.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:r,transaction:n,error:e})}let i=e.message;throw e.code===Ve.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&ei.throwError("insufficient funds for intrinsic transaction cost",Ve.errors.INSUFFICIENT_FUNDS,{error:e,method:r,transaction:n}),i.match(/nonce (is )?too low/i)&&ei.throwError("nonce has already been used",Ve.errors.NONCE_EXPIRED,{error:e,method:r,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&ei.throwError("replacement fee too low",Ve.errors.REPLACEMENT_UNDERPRICED,{error:e,method:r,transaction:n}),i.match(/only replay-protected/i)&&ei.throwError("legacy pre-eip-155 transactions not supported",Ve.errors.UNSUPPORTED_OPERATION,{error:e,method:r,transaction:n}),tce.indexOf(r)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&ei.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ve.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:r,transaction:n}),e}function PO(r){return new Promise(function(e){setTimeout(e,r)})}function rce(r){if(r.error){const e=new Error(r.error.message);throw e.code=r.error.code,e.data=r.error.data,e}return r.result}function xp(r){return r&&r.toLowerCase()}const NA={};class rj extends Fb{constructor(e,t,n){if(super(),e!==NA)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Nr(this,"provider",t),n==null&&(n=0),typeof n=="string"?(Nr(this,"_address",this.provider.formatter.address(n)),Nr(this,"_index",null)):typeof n=="number"?(Nr(this,"_index",n),Nr(this,"_address",null)):ei.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return ei.throwError("cannot alter JSON-RPC Signer connection",Ve.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new nce(NA,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&ei.throwError("unknown account #"+this._index,Ve.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Bs(e);const t=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Bs(e);n.from=t,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>Lc(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&ei.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),Ri({tx:Ri(e),sender:t}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&ei.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&ei.throwError("user rejected transaction",Ve.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),tj("sendTransaction",o,s)))})}signTransaction(e){return ei.throwError("signing transactions is unsupported",Ve.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Lc(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield f0(()=>Lc(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return Lc(this,void 0,void 0,function*(){const t=typeof e=="string"?cl(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[wr(t),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&ei.throwError("user rejected signing",Ve.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return Lc(this,void 0,void 0,function*(){const t=typeof e=="string"?cl(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),wr(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&ei.throwError("user rejected signing",Ve.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,t,n){return Lc(this,void 0,void 0,function*(){const i=yield so.resolveNames(e,t,n,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(so.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&ei.throwError("user rejected signing",Ve.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return Lc(this,void 0,void 0,function*(){const t=this.provider,n=yield this.getAddress();return t.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class nce extends rj{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(t,n)}))}}const ice={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class sce extends ece{constructor(e,t){let n=t;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(n),e||(e=u0(this.constructor,"defaultUrl")()),typeof e=="string"?Nr(this,"connection",Object.freeze({url:e})):Nr(this,"connection",Object.freeze(Bs(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Lc(this,void 0,void 0,function*(){yield PO(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=u0(this.constructor,"getNetwork");try{return t(xt.from(e).toNumber())}catch(n){return ei.throwError("could not detect network",Ve.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return ei.throwError("could not detect network",Ve.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new rj(NA,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:ag(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=MR(this.connection,JSON.stringify(n),rce).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[xp(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[xp(t.address),t.blockTag]];case"getCode":return["eth_getCode",[xp(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[xp(t.address),Fn(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[u0(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[u0(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=xp(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return Lc(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&xt.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Bs(t),t.transaction=Bs(i),delete t.transaction.type)}}const n=this.prepareRequest(e,t);n==null&&ei.throwError(e+" not implemented",Ve.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return tj(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(c){return e.emit("pending",c),null})})}),o.then(function(){return PO(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const n=Bs(ice);if(t)for(const s in t)t[s]&&(n[s]=!0);Use(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=kR(xt.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=wr(e[s]))}),e.accessList&&(i.accessList=jg(e.accessList)),i}}var oce=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const ace=new Ve(Vb);class cce extends sce{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return oce(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||ace.throwError("no network detected",Ve.errors.UNKNOWN_ERROR,{}),this._network==null&&(Nr(this,"_network",t),this.emit("network",t,null))),t})}}function LA(r){if(typeof r=="number"||typeof r=="bigint"||typeof r=="string")return r;if(typeof r.toHexString=="function")return r.toHexString();throw Error(`Expected numeric value but received ${r}`)}const nj=r=>[Nb.id,oq.id].includes(r),lce=async(r,e)=>{if(!nj(r.chainId))throw Error("Invalid chain ID for Arbitrum gas estimation.");if(r.type===void 0&&(r.type=2),r.maxFeePerGas)return r;try{let{lastBaseFeePerGas:t}=await e.getFeeData();if(t){let n=t.mul(xt.from(120)).div(xt.from(100));r.maxFeePerGas=LA(n),r.maxPriorityFeePerGas=LA(xt.from(0))}}catch(t){throw Error(`Failed to set gas price for Arbitrum transaction: ${t}.`)}return r},ij=r=>[56,97].includes(r),uce=async(r,e)=>{if(!ij(r.chainId))throw Error("Invalid chain ID for BSC gas estimation.");if(r.type===void 0?r.type=0:(r.type==1||r.type==2)&&console.warn("Transaction request type specified is incompatible for chain and will result in undefined behavior.  Please use transaction type 0."),!r.gasPrice){let t=await e.getFeeData();r.gasPrice=t.gasPrice?.toHexString()}return r},sj=r=>[Lb.id,cq.id,ER.id,uq.id,fq.id,dq.id,hq.id,81457,168587773].includes(r),fce=async(r,e)=>{if(!sj(r.chainId))throw Error("Invalid chain ID for OP Stack gas estimation.");if(r.type===void 0&&(r.type=2),r.gasPrice&&(console.warn("`gasPrice` is not supported on this chain and will be ignored. Use `maxPriorityFeePerGas` and/or `maxFeePerGas` instead."),delete r.gasPrice),r.maxPriorityFeePerGas&&r.maxFeePerGas)return r;try{if(!r.maxPriorityFeePerGas){let t=await e.send("eth_maxPriorityFeePerGas",[]);r.maxPriorityFeePerGas=t}if(r.maxFeePerGas&&(console.warn("maxFeePerGas is specified without maxPriorityFeePerGas - this can result in hung transactions."),r.maxPriorityFeePerGas>=r.maxFeePerGas))throw Error("Overridden maxFeePerGas is less than or equal to the calculated maxPriorityFeePerGas. Please set both values or maxPriorityFeePerGas alone for correct gas estimation.");if(!r.maxFeePerGas){let{lastBaseFeePerGas:t}=await e.getFeeData();if(!t)throw Error("Unable to fetch baseFee for last block.");let n=xt.from(t).mul(xt.from(126)).div(xt.from(100)).add(xt.from(r.maxPriorityFeePerGas));r.maxFeePerGas=LA(n)}}catch(t){throw Error(`Failed to set gas price for OP stack transaction: ${t}.`)}return r},hce="units/5.8.0",dce=new Ve(hce),pce=["wei","kwei","mwei","gwei","szabo","finney","ether"];function OO(r,e){if(typeof r!="string"&&dce.throwArgumentError("value must be a string","value",r),typeof e=="string"){const t=pce.indexOf(e);t!==-1&&(e=3*t)}return Ya(r,e??18)}var Ty={exports:{}},gce=Ty.exports,DO;function mce(){return DO||(DO=1,function(r,e){(function(t,n){r.exports=n()})(gce,function(){var t=function(s,o){if(o=o||{},typeof s!="function")throw new i("fetch must be a function");if(typeof o!="object")throw new i("defaults must be an object");if(o.retries!==void 0&&!n(o.retries))throw new i("retries must be a positive integer");if(o.retryDelay!==void 0&&!n(o.retryDelay)&&typeof o.retryDelay!="function")throw new i("retryDelay must be a positive integer or a function returning a positive integer");if(o.retryOn!==void 0&&!Array.isArray(o.retryOn)&&typeof o.retryOn!="function")throw new i("retryOn property expects an array or function");var a={retries:3,retryDelay:1e3,retryOn:[]};return o=Object.assign(a,o),function(l,u){var f=o.retries,h=o.retryDelay,d=o.retryOn;if(u&&u.retries!==void 0)if(n(u.retries))f=u.retries;else throw new i("retries must be a positive integer");if(u&&u.retryDelay!==void 0)if(n(u.retryDelay)||typeof u.retryDelay=="function")h=u.retryDelay;else throw new i("retryDelay must be a positive integer or a function returning a positive integer");if(u&&u.retryOn)if(Array.isArray(u.retryOn)||typeof u.retryOn=="function")d=u.retryOn;else throw new i("retryOn property expects an array or function");return new Promise(function(g,p){var m=function(v){var b=typeof Request<"u"&&l instanceof Request?l.clone():l;s(b,u).then(function(_){if(Array.isArray(d)&&d.indexOf(_.status)===-1)g(_);else if(typeof d=="function")try{return Promise.resolve(d(v,null,_)).then(function(x){x?y(v,null,_):g(_)}).catch(p)}catch(x){p(x)}else v<f?y(v,null,_):g(_)}).catch(function(_){if(typeof d=="function")try{Promise.resolve(d(v,_,null)).then(function(x){x?y(v,_,null):p(_)}).catch(function(x){p(x)})}catch(x){p(x)}else v<f?y(v,_,null):p(_)})};function y(v,b,_){var x=typeof h=="function"?h(v,b,_):h;setTimeout(function(){m(++v)},x)}m(0)})}};function n(s){return Number.isInteger(s)&&s>=0}function i(s){this.name="ArgumentError",this.message=s}return t})}(Ty)),Ty.exports}var yce=mce();const UR=Gs(yce);let vce=UR(fetch,{retries:3,retryDelay:500});const oj=r=>[Ug.id,AR.id].includes(r);let j1=r=>({maxPriorityFee:OO(r.maxPriorityFee.toFixed(9),"gwei").toHexString(),maxFee:OO(r.maxFee.toFixed(9),"gwei").toHexString()}),bce=r=>({safeLow:j1(r.safeLow),standard:j1(r.standard),fast:j1(r.fast)});const wce=async r=>{let e="";switch(r){case Ug.id:e="https://gasstation.polygon.technology/v2";break;case AR.id:e="https://gasstation.polygon.technology/amoy";break;default:throw Error(`chainId ${r} does not support polygon gas stations`)}let t=await vce(e),n=await t.json();if(t.status>399)throw n;return bce(n)};async function xce(r){if(!oj(r.chainId))throw Error("Invalid chain ID for Polygon gas estimation.");if(r.type===void 0&&(r.type=2),r.maxPriorityFeePerGas&&r.maxFeePerGas)return r;try{let{standard:e}=await wce(r.chainId);r.maxPriorityFeePerGas||(r.maxPriorityFeePerGas=e.maxPriorityFee),r.maxFeePerGas||(r.maxFeePerGas=e.maxFee),r.gasPrice&&(console.warn("`gasPrice` is not supported on this chain and will be ignored. Use `maxPriorityFeePerGas` and/or `maxFeePerGas` instead."),delete r.gasPrice)}catch(e){throw Error(`Failed to set gas prices from Polygon gas station with error: ${e}.`)}return r}const _ce=async(r,e)=>{if(r.type===void 0&&(r.type=2),r.type===2){if(!r.maxFeePerGas||!r.maxPriorityFeePerGas){let t=await e.getFeeData();r.maxFeePerGas||(r.maxFeePerGas=t.maxFeePerGas?.toHexString()),r.maxPriorityFeePerGas||(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas?.toHexString())}}else if(!r.gasPrice){let t=await e.getFeeData();r.gasPrice=t.gasPrice?.toHexString()}return r};async function Sce(r,e){try{return(await e.estimateGas(r)).toHexString()}catch(t){let n;if("message"in t&&t.message.includes("insufficient funds")&&(console.warn(`Gas estimation failed with error: ${t}. Retrying gas estimation by omitting the 'value'`),n=await async function({txRequest:i,provider:s}){try{let o={...i,value:void 0};return(await s.estimateGas(o)).toHexString()}catch(o){return console.warn(`Gas estimation failed with error: ${o} when omitting the 'value'`),null}}({txRequest:r,provider:e})),n||(console.warn(`Gas estimation failed with error: ${t}. Retrying gas estimation by omitting the 'from'`),n=await async function({txRequest:i,provider:s}){try{let o={...i,from:void 0};return(await s.estimateGas(o)).toHexString()}catch(o){return console.warn(`Gas estimation failed with error: ${o} when omitting the 'from' address`),null}}({txRequest:r,provider:e})),!n)throw t;return n}}const $O=(r,e,t,n)=>{let i=Number(r),s=e.find(o=>o.id===i);if(!s)throw new Dse(`Unsupported chainId ${r}`,4901);return new cce(s.rpcUrls.privyWalletOverride&&s.rpcUrls.privyWalletOverride.http[0]?s.rpcUrls.privyWalletOverride.http[0]:t.rpcUrls&&t.rpcUrls[i]?t.rpcUrls[i]:s.rpcUrls.privy?.http[0]?{url:s.rpcUrls.privy.http[0],headers:{"privy-app-id":n.appId}}:s.rpcUrls.public?.http[0]?s.rpcUrls.public?.http[0]:s.rpcUrls.default?.http[0])};function aj(r){return/^-?0x[a-f0-9]+$/i.test(r)}function Ece(r){for(let e of["gasLimit","gasPrice","value","maxPriorityFeePerGas","maxFeePerGas"]){let t=r[e];if(t!==void 0&&!function(n){let i=typeof n=="number",s=typeof n=="bigint",o=typeof n=="string"&&aj(n);return i||s||o}(t))throw Error(`Transaction request property '${e}' must be a valid number, bigint, or hex string representing a quantity`)}if(typeof r.chainId!="number")throw Error("Transaction request property 'chainId' must be a number")}async function MO(r,e,t){if(e.chainId=Number(e.chainId),Ece(e),e.from||(e.from=r),!e.nonce){let n=new TR(r,t);e.nonce=await n.getTransactionCount("pending")}return e.gasLimit||(e.gas?(e.gasLimit=e.gas,delete e.gas):e.gasLimit=await Sce(e,t)),typeof e.type=="string"&&aj(e.type)&&(e.type=Number(e.type)),[23294,23295].includes(e.chainId)&&(e.type=0),(e=oj(e.chainId)?await xce(e):nj(e.chainId)?await lce(e,t):sj(e.chainId)?await fce(e,t):ij(e.chainId)?await uce(e,t):await _ce(e,t)).type===0&&delete e.accessList,e.type!==2&&(delete e.maxPriorityFeePerGas,delete e.maxFeePerGas),e}function Ace({currentRecoveryMethod:r,upgradeToRecoveryMethod:e}){switch(r){case"privy":case"user-passcode":case"recovery-encryption-key":return!0;case"icloud":case"google-drive":if(r===e)throw Error("Cannot upgrade to the existing cloud platform");return!0;default:throw Error("Unknown recovery method")}}function cj(r){return new Promise(e=>{setTimeout(()=>{e()},r)})}let Ice=class{enqueue(e,t){this.callbacks[e]=t}dequeue(e,t){let n=this.callbacks[t];if(!n)throw Error(`cannot dequeue ${e} event: no event found for id ${t}`);switch(delete this.callbacks[t],e){case"privy:iframe:ready":case"privy:wallets:create":case"privy:user-signer:sign":case"privy:wallets:add":case"privy:wallets:set-recovery":case"privy:wallets:connect":case"privy:wallets:recover":case"privy:wallets:rpc":case"privy:wallet:create":case"privy:wallet:connect":case"privy:wallet:recover":case"privy:wallet:rpc":case"privy:solana-wallet:create":case"privy:solana-wallet:create-additional":case"privy:solana-wallet:connect":case"privy:solana-wallet:recover":case"privy:solana-wallet:rpc":case"privy:delegated-actions:consent":case"privy:mfa:verify":case"privy:mfa:init-enrollment":case"privy:mfa:submit-enrollment":case"privy:mfa:unenroll":case"privy:mfa:clear":return n;default:throw Error(`invalid wallet event type ${e}`)}}constructor(){this.callbacks={}}};async function Cce(r,e,t,n,i=!1,s,o){let a=i,c=async u=>{if(a){u===(i?0:1)?n():t.current?.reject(new wy("missing_or_invalid_mfa","MFA verification failed, retry."));let f=await new Promise((h,d)=>{e.current={resolve:h,reject:d},setTimeout(()=>{let g=new wy("mfa_timeout","Timed out waiting for MFA code");t.current?.reject(g),d(g)},o)});return await r(f)}return await r()},l=null;for(let u=0;u<s;u++)try{l=await c(u),t.current?.resolve(void 0);break}catch(f){if(f.type!=="missing_or_invalid_mfa")throw t.current?.resolve(void 0),f;a=!0}if(l===null){let u=new wy("mfa_verification_max_attempts_reached","Max MFA verification attempts reached");throw t.current?.reject(u),u}return l}var BO;let Tce=(BO=0,()=>"id-"+BO++),Rce=(r,e)=>typeof e=="bigint"?e.toString():e,Ol=(r,{ms:e,msg:t})=>Promise.race([r,cj(e??15e3).then(()=>Promise.reject(Error(t)))]),NO=new Ice,LO=class{invokeWithMfa(e,t){return Ol(Cce(n=>Ol(this.waitForReady().then(()=>e(n)),{msg:t.timeoutMsg,ms:t.timeoutMs}),this.mfa.rootPromise,this.mfa.submitPromise,()=>this.mfa.emit("mfaRequired"),t.mfaAlwaysRequired??!1,4,3e5),{msg:"Operation reached timeout: MFA verification",ms:126e4})}reload(){return this.ready=!1,this._embeddedWalletMessagePoster.reload()}ping(e=15e3){return Ol(this.invoke("privy:iframe:ready",{}),{msg:"Ping reached timeout",ms:e})}create(e){return Ol(this.waitForReady().then(()=>this.invoke("privy:wallet:create",e)),{msg:"Operation reached timeout: create"})}rpc(e){return this.invokeWithMfa(t=>this.invoke("privy:wallet:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: rpc"})}createSolana(e){return this.invokeWithMfa(t=>this.invoke("privy:solana-wallet:create",{...t,...e}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}createAdditionalSolana(e){return Ol(this.waitForReady().then(()=>this.invoke("privy:solana-wallet:create-additional",e)),{msg:"Operation reached timeout: create"})}solanaRpc(e){return this.invokeWithMfa(t=>this.invoke("privy:solana-wallet:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: solana-rpc"})}delegateWallets(e){return this.invokeWithMfa(t=>this.invoke("privy:delegated-actions:consent",{...t,...e}),{timeoutMsg:"Operation reached timeout: delegated-actions:consent"})}verifyMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:verify",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:verify",mfaAlwaysRequired:!0})}initEnrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:init-enrollment",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:init-enrollment"})}submitEnrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:submit-enrollment",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:submit-enrollment"})}unenrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:unenroll",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:unenroll",mfaAlwaysRequired:!0})}clearMfa(e){return Ol(this.waitForReady().then(()=>this.invoke("privy:mfa:clear",e)),{msg:"Operation reached timeout: mfa:clear"})}createWallet(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:create",{...t,...e}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}signWithUserSigner(e){return this.invokeWithMfa(t=>this.invoke("privy:user-signer:sign",{...t,...e}),{timeoutMsg:"Operation reached timeout: user-signer:sign"})}addWallet(e){return Ol(this.waitForReady().then(()=>this.invoke("privy:wallets:add",e)),{msg:"Operation reached timeout: wallets:add"})}setRecovery(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:set-recovery",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:set-recovery",timeoutMs:6e4})}connect(e){return Ol(this.waitForReady().then(()=>this.invoke("privy:wallets:connect",e)),{msg:"Operation reached timeout: wallets:connect"})}recover(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:recover",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:recover",timeoutMs:6e4})}rpcWallet(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:rpc"})}handleEmbeddedWalletMessages(e){let{reject:t,resolve:n}=NO.dequeue(e.event,e.id);return e.error!==void 0?t(new wy(e.error.type,e.error.message)):n(e.data)}waitForReady(){return this.ready?Promise.resolve():new Promise(async(e,t)=>{for(;!this.ready;)this.invoke("privy:iframe:ready",{}).then(()=>{this.ready=!0,e()}).catch(t),await cj(150)})}invoke(e,t){let n=((s,o)=>`${s}${JSON.stringify(o,Rce)}`)(e,t);if(e==="privy:wallet:create"||e==="privy:solana-wallet:create"){let s=this.cache.get(n);if(s)return s}let i=new Promise((s,o)=>{let a=Tce();NO.enqueue(a,{resolve:s,reject:o}),this._embeddedWalletMessagePoster.postMessage(JSON.stringify({id:a,event:e,data:t}),"*")}).finally(()=>{this.cache.delete(n)});return this.cache.set(n,i),i}constructor(e,t){this.ready=!1,this.cache=new Map,this._embeddedWalletMessagePoster=e,this.mfa=t}};var V1={exports:{}},FO;function kce(){return FO||(FO=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||c,h),g=t?t+l:l;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],d]:c._events[g].push(d):(c._events[g]=d,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,f;if(this._eventsCount===0)return l;for(f in u=this._events)e.call(u,f)&&l.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=t?t+l:l,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,g=new Array(d);h<d;h++)g[h]=f[h].fn;return g},a.prototype.listenerCount=function(l){var u=t?t+l:l,f=this._events[u];return f?f.fn?1:f.length:0},a.prototype.emit=function(l,u,f,h,d,g){var p=t?t+l:l;if(!this._events[p])return!1;var m=this._events[p],y=arguments.length,v,b;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,f),!0;case 4:return m.fn.call(m.context,u,f,h),!0;case 5:return m.fn.call(m.context,u,f,h,d),!0;case 6:return m.fn.call(m.context,u,f,h,d,g),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];m.fn.apply(m.context,v)}else{var _=m.length,x;for(b=0;b<_;b++)switch(m[b].once&&this.removeListener(l,m[b].fn,void 0,!0),y){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,u);break;case 3:m[b].fn.call(m[b].context,u,f);break;case 4:m[b].fn.call(m[b].context,u,f,h);break;default:if(!v)for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];m[b].fn.apply(m[b].context,v)}}return!0},a.prototype.on=function(l,u,f){return s(this,l,u,f,!1)},a.prototype.once=function(l,u,f){return s(this,l,u,f,!0)},a.prototype.removeListener=function(l,u,f,h){var d=t?t+l:l;if(!this._events[d])return this;if(!u)return o(this,d),this;var g=this._events[d];if(g.fn)g.fn===u&&(!h||g.once)&&(!f||g.context===f)&&o(this,d);else{for(var p=0,m=[],y=g.length;p<y;p++)(g[p].fn!==u||h&&!g[p].once||f&&g[p].context!==f)&&m.push(g[p]);m.length?this._events[d]=m.length===1?m[0]:m:o(this,d)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=t?t+l:l,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a}(V1)),V1.exports}var Pce=kce();const Vg=Gs(Pce);let Oce=["eth_sign","eth_signTransaction","personal_sign","eth_signTypedData_v4","csw_signUserOperation","secp256k1_sign"];const Dce=r=>Oce.includes(r);var lj={},Wb={};Wb.byteLength=Bce;Wb.toByteArray=Lce;Wb.fromByteArray=zce;var nc=[],Ko=[],$ce=typeof Uint8Array<"u"?Uint8Array:Array,K1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var dh=0,Mce=K1.length;dh<Mce;++dh)nc[dh]=K1[dh],Ko[K1.charCodeAt(dh)]=dh;Ko[45]=62;Ko[95]=63;function uj(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Bce(r){var e=uj(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Nce(r,e,t){return(e+t)*3/4-t}function Lce(r){var e,t=uj(r),n=t[0],i=t[1],s=new $ce(Nce(r,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=Ko[r.charCodeAt(c)]<<18|Ko[r.charCodeAt(c+1)]<<12|Ko[r.charCodeAt(c+2)]<<6|Ko[r.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Ko[r.charCodeAt(c)]<<2|Ko[r.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=Ko[r.charCodeAt(c)]<<10|Ko[r.charCodeAt(c+1)]<<4|Ko[r.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Fce(r){return nc[r>>18&63]+nc[r>>12&63]+nc[r>>6&63]+nc[r&63]}function Uce(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(Fce(n));return i.join("")}function zce(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,a=t-n;o<a;o+=s)i.push(Uce(r,o,o+s>a?a:o+s));return n===1?(e=r[t-1],i.push(nc[e>>2]+nc[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(nc[e>>10]+nc[e>>4&63]+nc[e<<2&63]+"=")),i.join("")}var zR={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */zR.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,f=t?i-1:0,h=t?-1:1,d=r[e+f];for(f+=h,s=d&(1<<-u)-1,d>>=-u,u+=a;u>0;s=s*256+r[e+f],f+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+r[e+f],f+=h,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(d?-1:1)*o*Math.pow(2,s-n)};zR.write=function(r,e,t,n,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,f=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,g=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+f>=1?e+=h/c:e+=h*Math.pow(2,1-f),e*c>=2&&(o++,c/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*c-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;r[t+d]=a&255,d+=g,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;r[t+d]=o&255,d+=g,o/=256,l-=8);r[t+d-g]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=Wb,t=zR,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=x,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const K=new s(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,s.prototype),Object.setPrototypeOf(K,M),K.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(K){if(K>i)throw new RangeError('The value "'+K+'" is invalid for option "size"');const M=new s(K);return Object.setPrototypeOf(M,u.prototype),M}function u(K,M,P){if(typeof K=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(K)}return f(K,M,P)}u.poolSize=8192;function f(K,M,P){if(typeof K=="string")return p(K,M);if(o.isView(K))return y(K);if(K==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K);if(Ae(K,o)||K&&Ae(K.buffer,o)||typeof a<"u"&&(Ae(K,a)||K&&Ae(K.buffer,a)))return v(K,M,P);if(typeof K=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ee=K.valueOf&&K.valueOf();if(ee!=null&&ee!==K)return u.from(ee,M,P);const pe=b(K);if(pe)return pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof K[Symbol.toPrimitive]=="function")return u.from(K[Symbol.toPrimitive]("string"),M,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K)}u.from=function(K,M,P){return f(K,M,P)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function h(K){if(typeof K!="number")throw new TypeError('"size" argument must be of type number');if(K<0)throw new RangeError('The value "'+K+'" is invalid for option "size"')}function d(K,M,P){return h(K),K<=0?l(K):M!==void 0?typeof P=="string"?l(K).fill(M,P):l(K).fill(M):l(K)}u.alloc=function(K,M,P){return d(K,M,P)};function g(K){return h(K),l(K<0?0:_(K)|0)}u.allocUnsafe=function(K){return g(K)},u.allocUnsafeSlow=function(K){return g(K)};function p(K,M){if((typeof M!="string"||M==="")&&(M="utf8"),!u.isEncoding(M))throw new TypeError("Unknown encoding: "+M);const P=E(K,M)|0;let ee=l(P);const pe=ee.write(K,M);return pe!==P&&(ee=ee.slice(0,pe)),ee}function m(K){const M=K.length<0?0:_(K.length)|0,P=l(M);for(let ee=0;ee<M;ee+=1)P[ee]=K[ee]&255;return P}function y(K){if(Ae(K,s)){const M=new s(K);return v(M.buffer,M.byteOffset,M.byteLength)}return m(K)}function v(K,M,P){if(M<0||K.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<M+(P||0))throw new RangeError('"length" is outside of buffer bounds');let ee;return M===void 0&&P===void 0?ee=new s(K):P===void 0?ee=new s(K,M):ee=new s(K,M,P),Object.setPrototypeOf(ee,u.prototype),ee}function b(K){if(u.isBuffer(K)){const M=_(K.length)|0,P=l(M);return P.length===0||K.copy(P,0,0,M),P}if(K.length!==void 0)return typeof K.length!="number"||Oe(K.length)?l(0):m(K);if(K.type==="Buffer"&&Array.isArray(K.data))return m(K.data)}function _(K){if(K>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return K|0}function x(K){return+K!=K&&(K=0),u.alloc(+K)}u.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==u.prototype},u.compare=function(M,P){if(Ae(M,s)&&(M=u.from(M,M.offset,M.byteLength)),Ae(P,s)&&(P=u.from(P,P.offset,P.byteLength)),!u.isBuffer(M)||!u.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===P)return 0;let ee=M.length,pe=P.length;for(let be=0,fe=Math.min(ee,pe);be<fe;++be)if(M[be]!==P[be]){ee=M[be],pe=P[be];break}return ee<pe?-1:pe<ee?1:0},u.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(M,P){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return u.alloc(0);let ee;if(P===void 0)for(P=0,ee=0;ee<M.length;++ee)P+=M[ee].length;const pe=u.allocUnsafe(P);let be=0;for(ee=0;ee<M.length;++ee){let fe=M[ee];if(Ae(fe,s))be+fe.length>pe.length?(u.isBuffer(fe)||(fe=u.from(fe)),fe.copy(pe,be)):s.prototype.set.call(pe,fe,be);else if(u.isBuffer(fe))fe.copy(pe,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=fe.length}return pe};function E(K,M){if(u.isBuffer(K))return K.length;if(o.isView(K)||Ae(K,o))return K.byteLength;if(typeof K!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof K);const P=K.length,ee=arguments.length>2&&arguments[2]===!0;if(!ee&&P===0)return 0;let pe=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return de(K).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P*2;case"hex":return P>>>1;case"base64":return Me(K).length;default:if(pe)return ee?-1:de(K).length;M=(""+M).toLowerCase(),pe=!0}}u.byteLength=E;function S(K,M,P){let ee=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0,M>>>=0,P<=M))return"";for(K||(K="utf8");;)switch(K){case"hex":return T(this,M,P);case"utf8":case"utf-8":return Y(this,M,P);case"ascii":return te(this,M,P);case"latin1":case"binary":return X(this,M,P);case"base64":return N(this,M,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,M,P);default:if(ee)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),ee=!0}}u.prototype._isBuffer=!0;function C(K,M,P){const ee=K[M];K[M]=K[P],K[P]=ee}u.prototype.swap16=function(){const M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let P=0;P<M;P+=2)C(this,P,P+1);return this},u.prototype.swap32=function(){const M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let P=0;P<M;P+=4)C(this,P,P+3),C(this,P+1,P+2);return this},u.prototype.swap64=function(){const M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let P=0;P<M;P+=8)C(this,P,P+7),C(this,P+1,P+6),C(this,P+2,P+5),C(this,P+3,P+4);return this},u.prototype.toString=function(){const M=this.length;return M===0?"":arguments.length===0?Y(this,0,M):S.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(M){if(!u.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:u.compare(this,M)===0},u.prototype.inspect=function(){let M="";const P=r.INSPECT_MAX_BYTES;return M=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(M+=" ... "),"<Buffer "+M+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(M,P,ee,pe,be){if(Ae(M,s)&&(M=u.from(M,M.offset,M.byteLength)),!u.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(P===void 0&&(P=0),ee===void 0&&(ee=M?M.length:0),pe===void 0&&(pe=0),be===void 0&&(be=this.length),P<0||ee>M.length||pe<0||be>this.length)throw new RangeError("out of range index");if(pe>=be&&P>=ee)return 0;if(pe>=be)return-1;if(P>=ee)return 1;if(P>>>=0,ee>>>=0,pe>>>=0,be>>>=0,this===M)return 0;let fe=be-pe,Ee=ee-P;const Le=Math.min(fe,Ee),Ke=this.slice(pe,be),je=M.slice(P,ee);for(let Pe=0;Pe<Le;++Pe)if(Ke[Pe]!==je[Pe]){fe=Ke[Pe],Ee=je[Pe];break}return fe<Ee?-1:Ee<fe?1:0};function k(K,M,P,ee,pe){if(K.length===0)return-1;if(typeof P=="string"?(ee=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),P=+P,Oe(P)&&(P=pe?0:K.length-1),P<0&&(P=K.length+P),P>=K.length){if(pe)return-1;P=K.length-1}else if(P<0)if(pe)P=0;else return-1;if(typeof M=="string"&&(M=u.from(M,ee)),u.isBuffer(M))return M.length===0?-1:$(K,M,P,ee,pe);if(typeof M=="number")return M=M&255,typeof s.prototype.indexOf=="function"?pe?s.prototype.indexOf.call(K,M,P):s.prototype.lastIndexOf.call(K,M,P):$(K,[M],P,ee,pe);throw new TypeError("val must be string, number or Buffer")}function $(K,M,P,ee,pe){let be=1,fe=K.length,Ee=M.length;if(ee!==void 0&&(ee=String(ee).toLowerCase(),ee==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(K.length<2||M.length<2)return-1;be=2,fe/=2,Ee/=2,P/=2}function Le(je,Pe){return be===1?je[Pe]:je.readUInt16BE(Pe*be)}let Ke;if(pe){let je=-1;for(Ke=P;Ke<fe;Ke++)if(Le(K,Ke)===Le(M,je===-1?0:Ke-je)){if(je===-1&&(je=Ke),Ke-je+1===Ee)return je*be}else je!==-1&&(Ke-=Ke-je),je=-1}else for(P+Ee>fe&&(P=fe-Ee),Ke=P;Ke>=0;Ke--){let je=!0;for(let Pe=0;Pe<Ee;Pe++)if(Le(K,Ke+Pe)!==Le(M,Pe)){je=!1;break}if(je)return Ke}return-1}u.prototype.includes=function(M,P,ee){return this.indexOf(M,P,ee)!==-1},u.prototype.indexOf=function(M,P,ee){return k(this,M,P,ee,!0)},u.prototype.lastIndexOf=function(M,P,ee){return k(this,M,P,ee,!1)};function J(K,M,P,ee){P=Number(P)||0;const pe=K.length-P;ee?(ee=Number(ee),ee>pe&&(ee=pe)):ee=pe;const be=M.length;ee>be/2&&(ee=be/2);let fe;for(fe=0;fe<ee;++fe){const Ee=parseInt(M.substr(fe*2,2),16);if(Oe(Ee))return fe;K[P+fe]=Ee}return fe}function j(K,M,P,ee){return xe(de(M,K.length-P),K,P,ee)}function L(K,M,P,ee){return xe(_e(M),K,P,ee)}function w(K,M,P,ee){return xe(Me(M),K,P,ee)}function R(K,M,P,ee){return xe(Ce(M,K.length-P),K,P,ee)}u.prototype.write=function(M,P,ee,pe){if(P===void 0)pe="utf8",ee=this.length,P=0;else if(ee===void 0&&typeof P=="string")pe=P,ee=this.length,P=0;else if(isFinite(P))P=P>>>0,isFinite(ee)?(ee=ee>>>0,pe===void 0&&(pe="utf8")):(pe=ee,ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-P;if((ee===void 0||ee>be)&&(ee=be),M.length>0&&(ee<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");let fe=!1;for(;;)switch(pe){case"hex":return J(this,M,P,ee);case"utf8":case"utf-8":return j(this,M,P,ee);case"ascii":case"latin1":case"binary":return L(this,M,P,ee);case"base64":return w(this,M,P,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,M,P,ee);default:if(fe)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),fe=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(K,M,P){return M===0&&P===K.length?e.fromByteArray(K):e.fromByteArray(K.slice(M,P))}function Y(K,M,P){P=Math.min(K.length,P);const ee=[];let pe=M;for(;pe<P;){const be=K[pe];let fe=null,Ee=be>239?4:be>223?3:be>191?2:1;if(pe+Ee<=P){let Le,Ke,je,Pe;switch(Ee){case 1:be<128&&(fe=be);break;case 2:Le=K[pe+1],(Le&192)===128&&(Pe=(be&31)<<6|Le&63,Pe>127&&(fe=Pe));break;case 3:Le=K[pe+1],Ke=K[pe+2],(Le&192)===128&&(Ke&192)===128&&(Pe=(be&15)<<12|(Le&63)<<6|Ke&63,Pe>2047&&(Pe<55296||Pe>57343)&&(fe=Pe));break;case 4:Le=K[pe+1],Ke=K[pe+2],je=K[pe+3],(Le&192)===128&&(Ke&192)===128&&(je&192)===128&&(Pe=(be&15)<<18|(Le&63)<<12|(Ke&63)<<6|je&63,Pe>65535&&Pe<1114112&&(fe=Pe))}}fe===null?(fe=65533,Ee=1):fe>65535&&(fe-=65536,ee.push(fe>>>10&1023|55296),fe=56320|fe&1023),ee.push(fe),pe+=Ee}return G(ee)}const z=4096;function G(K){const M=K.length;if(M<=z)return String.fromCharCode.apply(String,K);let P="",ee=0;for(;ee<M;)P+=String.fromCharCode.apply(String,K.slice(ee,ee+=z));return P}function te(K,M,P){let ee="";P=Math.min(K.length,P);for(let pe=M;pe<P;++pe)ee+=String.fromCharCode(K[pe]&127);return ee}function X(K,M,P){let ee="";P=Math.min(K.length,P);for(let pe=M;pe<P;++pe)ee+=String.fromCharCode(K[pe]);return ee}function T(K,M,P){const ee=K.length;(!M||M<0)&&(M=0),(!P||P<0||P>ee)&&(P=ee);let pe="";for(let be=M;be<P;++be)pe+=se[K[be]];return pe}function A(K,M,P){const ee=K.slice(M,P);let pe="";for(let be=0;be<ee.length-1;be+=2)pe+=String.fromCharCode(ee[be]+ee[be+1]*256);return pe}u.prototype.slice=function(M,P){const ee=this.length;M=~~M,P=P===void 0?ee:~~P,M<0?(M+=ee,M<0&&(M=0)):M>ee&&(M=ee),P<0?(P+=ee,P<0&&(P=0)):P>ee&&(P=ee),P<M&&(P=M);const pe=this.subarray(M,P);return Object.setPrototypeOf(pe,u.prototype),pe};function O(K,M,P){if(K%1!==0||K<0)throw new RangeError("offset is not uint");if(K+M>P)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(M,P,ee){M=M>>>0,P=P>>>0,ee||O(M,P,this.length);let pe=this[M],be=1,fe=0;for(;++fe<P&&(be*=256);)pe+=this[M+fe]*be;return pe},u.prototype.readUintBE=u.prototype.readUIntBE=function(M,P,ee){M=M>>>0,P=P>>>0,ee||O(M,P,this.length);let pe=this[M+--P],be=1;for(;P>0&&(be*=256);)pe+=this[M+--P]*be;return pe},u.prototype.readUint8=u.prototype.readUInt8=function(M,P){return M=M>>>0,P||O(M,1,this.length),this[M]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(M,P){return M=M>>>0,P||O(M,2,this.length),this[M]|this[M+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(M,P){return M=M>>>0,P||O(M,2,this.length),this[M]<<8|this[M+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(M,P){return M=M>>>0,P||O(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(M,P){return M=M>>>0,P||O(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},u.prototype.readBigUInt64LE=V(function(M){M=M>>>0,ie(M,"offset");const P=this[M],ee=this[M+7];(P===void 0||ee===void 0)&&B(M,this.length-8);const pe=P+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24,be=this[++M]+this[++M]*2**8+this[++M]*2**16+ee*2**24;return BigInt(pe)+(BigInt(be)<<BigInt(32))}),u.prototype.readBigUInt64BE=V(function(M){M=M>>>0,ie(M,"offset");const P=this[M],ee=this[M+7];(P===void 0||ee===void 0)&&B(M,this.length-8);const pe=P*2**24+this[++M]*2**16+this[++M]*2**8+this[++M],be=this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+ee;return(BigInt(pe)<<BigInt(32))+BigInt(be)}),u.prototype.readIntLE=function(M,P,ee){M=M>>>0,P=P>>>0,ee||O(M,P,this.length);let pe=this[M],be=1,fe=0;for(;++fe<P&&(be*=256);)pe+=this[M+fe]*be;return be*=128,pe>=be&&(pe-=Math.pow(2,8*P)),pe},u.prototype.readIntBE=function(M,P,ee){M=M>>>0,P=P>>>0,ee||O(M,P,this.length);let pe=P,be=1,fe=this[M+--pe];for(;pe>0&&(be*=256);)fe+=this[M+--pe]*be;return be*=128,fe>=be&&(fe-=Math.pow(2,8*P)),fe},u.prototype.readInt8=function(M,P){return M=M>>>0,P||O(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},u.prototype.readInt16LE=function(M,P){M=M>>>0,P||O(M,2,this.length);const ee=this[M]|this[M+1]<<8;return ee&32768?ee|4294901760:ee},u.prototype.readInt16BE=function(M,P){M=M>>>0,P||O(M,2,this.length);const ee=this[M+1]|this[M]<<8;return ee&32768?ee|4294901760:ee},u.prototype.readInt32LE=function(M,P){return M=M>>>0,P||O(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},u.prototype.readInt32BE=function(M,P){return M=M>>>0,P||O(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},u.prototype.readBigInt64LE=V(function(M){M=M>>>0,ie(M,"offset");const P=this[M],ee=this[M+7];(P===void 0||ee===void 0)&&B(M,this.length-8);const pe=this[M+4]+this[M+5]*2**8+this[M+6]*2**16+(ee<<24);return(BigInt(pe)<<BigInt(32))+BigInt(P+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24)}),u.prototype.readBigInt64BE=V(function(M){M=M>>>0,ie(M,"offset");const P=this[M],ee=this[M+7];(P===void 0||ee===void 0)&&B(M,this.length-8);const pe=(P<<24)+this[++M]*2**16+this[++M]*2**8+this[++M];return(BigInt(pe)<<BigInt(32))+BigInt(this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+ee)}),u.prototype.readFloatLE=function(M,P){return M=M>>>0,P||O(M,4,this.length),t.read(this,M,!0,23,4)},u.prototype.readFloatBE=function(M,P){return M=M>>>0,P||O(M,4,this.length),t.read(this,M,!1,23,4)},u.prototype.readDoubleLE=function(M,P){return M=M>>>0,P||O(M,8,this.length),t.read(this,M,!0,52,8)},u.prototype.readDoubleBE=function(M,P){return M=M>>>0,P||O(M,8,this.length),t.read(this,M,!1,52,8)};function I(K,M,P,ee,pe,be){if(!u.isBuffer(K))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>pe||M<be)throw new RangeError('"value" argument is out of bounds');if(P+ee>K.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(M,P,ee,pe){if(M=+M,P=P>>>0,ee=ee>>>0,!pe){const Ee=Math.pow(2,8*ee)-1;I(this,M,P,ee,Ee,0)}let be=1,fe=0;for(this[P]=M&255;++fe<ee&&(be*=256);)this[P+fe]=M/be&255;return P+ee},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(M,P,ee,pe){if(M=+M,P=P>>>0,ee=ee>>>0,!pe){const Ee=Math.pow(2,8*ee)-1;I(this,M,P,ee,Ee,0)}let be=ee-1,fe=1;for(this[P+be]=M&255;--be>=0&&(fe*=256);)this[P+be]=M/fe&255;return P+ee},u.prototype.writeUint8=u.prototype.writeUInt8=function(M,P,ee){return M=+M,P=P>>>0,ee||I(this,M,P,1,255,0),this[P]=M&255,P+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(M,P,ee){return M=+M,P=P>>>0,ee||I(this,M,P,2,65535,0),this[P]=M&255,this[P+1]=M>>>8,P+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(M,P,ee){return M=+M,P=P>>>0,ee||I(this,M,P,2,65535,0),this[P]=M>>>8,this[P+1]=M&255,P+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(M,P,ee){return M=+M,P=P>>>0,ee||I(this,M,P,4,4294967295,0),this[P+3]=M>>>24,this[P+2]=M>>>16,this[P+1]=M>>>8,this[P]=M&255,P+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(M,P,ee){return M=+M,P=P>>>0,ee||I(this,M,P,4,4294967295,0),this[P]=M>>>24,this[P+1]=M>>>16,this[P+2]=M>>>8,this[P+3]=M&255,P+4};function U(K,M,P,ee,pe){we(M,ee,pe,K,P,7);let be=Number(M&BigInt(4294967295));K[P++]=be,be=be>>8,K[P++]=be,be=be>>8,K[P++]=be,be=be>>8,K[P++]=be;let fe=Number(M>>BigInt(32)&BigInt(4294967295));return K[P++]=fe,fe=fe>>8,K[P++]=fe,fe=fe>>8,K[P++]=fe,fe=fe>>8,K[P++]=fe,P}function Z(K,M,P,ee,pe){we(M,ee,pe,K,P,7);let be=Number(M&BigInt(4294967295));K[P+7]=be,be=be>>8,K[P+6]=be,be=be>>8,K[P+5]=be,be=be>>8,K[P+4]=be;let fe=Number(M>>BigInt(32)&BigInt(4294967295));return K[P+3]=fe,fe=fe>>8,K[P+2]=fe,fe=fe>>8,K[P+1]=fe,fe=fe>>8,K[P]=fe,P+8}u.prototype.writeBigUInt64LE=V(function(M,P=0){return U(this,M,P,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=V(function(M,P=0){return Z(this,M,P,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(M,P,ee,pe){if(M=+M,P=P>>>0,!pe){const Le=Math.pow(2,8*ee-1);I(this,M,P,ee,Le-1,-Le)}let be=0,fe=1,Ee=0;for(this[P]=M&255;++be<ee&&(fe*=256);)M<0&&Ee===0&&this[P+be-1]!==0&&(Ee=1),this[P+be]=(M/fe>>0)-Ee&255;return P+ee},u.prototype.writeIntBE=function(M,P,ee,pe){if(M=+M,P=P>>>0,!pe){const Le=Math.pow(2,8*ee-1);I(this,M,P,ee,Le-1,-Le)}let be=ee-1,fe=1,Ee=0;for(this[P+be]=M&255;--be>=0&&(fe*=256);)M<0&&Ee===0&&this[P+be+1]!==0&&(Ee=1),this[P+be]=(M/fe>>0)-Ee&255;return P+ee},u.prototype.writeInt8=function(M,P,ee){return M=+M,P=P>>>0,ee||I(this,M,P,1,127,-128),M<0&&(M=255+M+1),this[P]=M&255,P+1},u.prototype.writeInt16LE=function(M,P,ee){return M=+M,P=P>>>0,ee||I(this,M,P,2,32767,-32768),this[P]=M&255,this[P+1]=M>>>8,P+2},u.prototype.writeInt16BE=function(M,P,ee){return M=+M,P=P>>>0,ee||I(this,M,P,2,32767,-32768),this[P]=M>>>8,this[P+1]=M&255,P+2},u.prototype.writeInt32LE=function(M,P,ee){return M=+M,P=P>>>0,ee||I(this,M,P,4,2147483647,-2147483648),this[P]=M&255,this[P+1]=M>>>8,this[P+2]=M>>>16,this[P+3]=M>>>24,P+4},u.prototype.writeInt32BE=function(M,P,ee){return M=+M,P=P>>>0,ee||I(this,M,P,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[P]=M>>>24,this[P+1]=M>>>16,this[P+2]=M>>>8,this[P+3]=M&255,P+4},u.prototype.writeBigInt64LE=V(function(M,P=0){return U(this,M,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=V(function(M,P=0){return Z(this,M,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function oe(K,M,P,ee,pe,be){if(P+ee>K.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function he(K,M,P,ee,pe){return M=+M,P=P>>>0,pe||oe(K,M,P,4),t.write(K,M,P,ee,23,4),P+4}u.prototype.writeFloatLE=function(M,P,ee){return he(this,M,P,!0,ee)},u.prototype.writeFloatBE=function(M,P,ee){return he(this,M,P,!1,ee)};function re(K,M,P,ee,pe){return M=+M,P=P>>>0,pe||oe(K,M,P,8),t.write(K,M,P,ee,52,8),P+8}u.prototype.writeDoubleLE=function(M,P,ee){return re(this,M,P,!0,ee)},u.prototype.writeDoubleBE=function(M,P,ee){return re(this,M,P,!1,ee)},u.prototype.copy=function(M,P,ee,pe){if(!u.isBuffer(M))throw new TypeError("argument should be a Buffer");if(ee||(ee=0),!pe&&pe!==0&&(pe=this.length),P>=M.length&&(P=M.length),P||(P=0),pe>0&&pe<ee&&(pe=ee),pe===ee||M.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(ee<0||ee>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),M.length-P<pe-ee&&(pe=M.length-P+ee);const be=pe-ee;return this===M&&typeof s.prototype.copyWithin=="function"?this.copyWithin(P,ee,pe):s.prototype.set.call(M,this.subarray(ee,pe),P),be},u.prototype.fill=function(M,P,ee,pe){if(typeof M=="string"){if(typeof P=="string"?(pe=P,P=0,ee=this.length):typeof ee=="string"&&(pe=ee,ee=this.length),pe!==void 0&&typeof pe!="string")throw new TypeError("encoding must be a string");if(typeof pe=="string"&&!u.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);if(M.length===1){const fe=M.charCodeAt(0);(pe==="utf8"&&fe<128||pe==="latin1")&&(M=fe)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(P<0||this.length<P||this.length<ee)throw new RangeError("Out of range index");if(ee<=P)return this;P=P>>>0,ee=ee===void 0?this.length:ee>>>0,M||(M=0);let be;if(typeof M=="number")for(be=P;be<ee;++be)this[be]=M;else{const fe=u.isBuffer(M)?M:u.from(M,pe),Ee=fe.length;if(Ee===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(be=0;be<ee-P;++be)this[be+P]=fe[be%Ee]}return this};const F={};function H(K,M,P){F[K]=class extends P{constructor(){super(),Object.defineProperty(this,"message",{value:M.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${K}]`,this.stack,delete this.name}get code(){return K}set code(pe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:pe,writable:!0})}toString(){return`${this.name} [${K}]: ${this.message}`}}}H("ERR_BUFFER_OUT_OF_BOUNDS",function(K){return K?`${K} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(K,M){return`The "${K}" argument must be of type number. Received type ${typeof M}`},TypeError),H("ERR_OUT_OF_RANGE",function(K,M,P){let ee=`The value of "${K}" is out of range.`,pe=P;return Number.isInteger(P)&&Math.abs(P)>2**32?pe=ue(String(P)):typeof P=="bigint"&&(pe=String(P),(P>BigInt(2)**BigInt(32)||P<-(BigInt(2)**BigInt(32)))&&(pe=ue(pe)),pe+="n"),ee+=` It must be ${M}. Received ${pe}`,ee},RangeError);function ue(K){let M="",P=K.length;const ee=K[0]==="-"?1:0;for(;P>=ee+4;P-=3)M=`_${K.slice(P-3,P)}${M}`;return`${K.slice(0,P)}${M}`}function le(K,M,P){ie(M,"offset"),(K[M]===void 0||K[M+P]===void 0)&&B(M,K.length-(P+1))}function we(K,M,P,ee,pe,be){if(K>P||K<M){const fe=typeof M=="bigint"?"n":"";let Ee;throw M===0||M===BigInt(0)?Ee=`>= 0${fe} and < 2${fe} ** ${(be+1)*8}${fe}`:Ee=`>= -(2${fe} ** ${(be+1)*8-1}${fe}) and < 2 ** ${(be+1)*8-1}${fe}`,new F.ERR_OUT_OF_RANGE("value",Ee,K)}le(ee,pe,be)}function ie(K,M){if(typeof K!="number")throw new F.ERR_INVALID_ARG_TYPE(M,"number",K)}function B(K,M,P){throw Math.floor(K)!==K?(ie(K,P),new F.ERR_OUT_OF_RANGE("offset","an integer",K)):M<0?new F.ERR_BUFFER_OUT_OF_BOUNDS:new F.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${M}`,K)}const q=/[^+/0-9A-Za-z-_]/g;function ne(K){if(K=K.split("=")[0],K=K.trim().replace(q,""),K.length<2)return"";for(;K.length%4!==0;)K=K+"=";return K}function de(K,M){M=M||1/0;let P;const ee=K.length;let pe=null;const be=[];for(let fe=0;fe<ee;++fe){if(P=K.charCodeAt(fe),P>55295&&P<57344){if(!pe){if(P>56319){(M-=3)>-1&&be.push(239,191,189);continue}else if(fe+1===ee){(M-=3)>-1&&be.push(239,191,189);continue}pe=P;continue}if(P<56320){(M-=3)>-1&&be.push(239,191,189),pe=P;continue}P=(pe-55296<<10|P-56320)+65536}else pe&&(M-=3)>-1&&be.push(239,191,189);if(pe=null,P<128){if((M-=1)<0)break;be.push(P)}else if(P<2048){if((M-=2)<0)break;be.push(P>>6|192,P&63|128)}else if(P<65536){if((M-=3)<0)break;be.push(P>>12|224,P>>6&63|128,P&63|128)}else if(P<1114112){if((M-=4)<0)break;be.push(P>>18|240,P>>12&63|128,P>>6&63|128,P&63|128)}else throw new Error("Invalid code point")}return be}function _e(K){const M=[];for(let P=0;P<K.length;++P)M.push(K.charCodeAt(P)&255);return M}function Ce(K,M){let P,ee,pe;const be=[];for(let fe=0;fe<K.length&&!((M-=2)<0);++fe)P=K.charCodeAt(fe),ee=P>>8,pe=P%256,be.push(pe),be.push(ee);return be}function Me(K){return e.toByteArray(ne(K))}function xe(K,M,P,ee){let pe;for(pe=0;pe<ee&&!(pe+P>=M.length||pe>=K.length);++pe)M[pe+P]=K[pe];return pe}function Ae(K,M){return K instanceof M||K!=null&&K.constructor!=null&&K.constructor.name!=null&&K.constructor.name===M.name}function Oe(K){return K!==K}const se=function(){const K="0123456789abcdef",M=new Array(256);for(let P=0;P<16;++P){const ee=P*16;for(let pe=0;pe<16;++pe)M[ee+pe]=K[P]+K[pe]}return M}();function V(K){return typeof BigInt>"u"?Q:K}function Q(){throw new Error("BigInt not supported")}})(lj);const Xe=lj.Buffer,bv=r=>/^0x[0-9a-fA-F]*$/.test(r),wv=r=>Xe.from(r,"utf8"),fg=r=>`0x${r.toString("hex")}`;var H1,UO;function qce(){return UO||(UO=1,H1=function r(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?r(e.toJSON()):Array.isArray(e)?`[${e.reduce((i,s,o)=>`${i}${o===0?"":","}${r(s===void 0||typeof s=="symbol"?null:s)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,i)=>{if(e[i]===void 0||typeof e[i]=="symbol")return n;const s=n.length===0?"":",";return`${n}${s}${r(i)}:${r(e[i])}`},"")}}`}),H1}var jce=qce();const Vce=Gs(jce);async function Kce(r,e){let t=Vce(e);if(t===void 0)throw new Wr({error:"Failed to prepare the payload for signing",code:"invalid_input"});let n=Xe.from(t).toString("base64"),{signature:i}=await r({message:n});return{signature:i}}async function ph(r,e,{wallet_id:t,...n}){let i={version:1,url:r.getCompiledPath(f1,{params:{wallet_id:t}}),method:f1.method,headers:{"privy-app-id":r.app.appId},body:{...n}},{signature:s}=await Kce(e,i);return await r.fetchPrivyRoute(f1,{body:n,params:{wallet_id:t},headers:{"privy-authorization-signature":s}})}function Hce(r){return{from:r.from,to:r.to,nonce:Du(r.nonce),chain_id:Du(r.chainId),data:function(e){if(e!==void 0)return typeof e=="string"?bv(e)?e:fg(wv(e)):fg(Xe.from(Uint8Array.from(e)))}(r.data),value:Du(r.value),type:r.type,gas_limit:Du(r.gasLimit),gas_price:Du(r.gasPrice),max_fee_per_gas:Du(r.maxFeePerGas),max_priority_fee_per_gas:Du(r.maxPriorityFeePerGas)}}function Du(r){if(typeof r=="number"||typeof r=="bigint")return`0x${BigInt(r).toString(16)}`;if(typeof r=="string")return bv(r)?r:fg(wv(r))}function Wce(r){return typeof r=="string"&&(r=JSON.parse(r)),{types:r.types,primary_type:String(r.primaryType),domain:r.domain,message:r.message}}async function fj({context:r,account:e,rpcRequest:t}){switch(t.chainType){case"ethereum":return async function({context:n,account:i,rpcRequest:s}){switch(s.method){case"personal_sign":{let[o]=s.params,a=await ph(n,n.signRequest,{chain_type:"ethereum",method:"personal_sign",wallet_id:i.id,params:o.startsWith("0x")?{message:o.slice(2),encoding:"hex"}:{message:o,encoding:"utf-8"}});if(a.method!=="personal_sign")throw Error("Unable to sign message");return{data:a.data.signature}}case"eth_signTransaction":{let[o]=s.params,a=await ph(n,n.signRequest,{chain_type:"ethereum",method:"eth_signTransaction",wallet_id:i.id,params:{transaction:Hce(o)}});if(a.method!=="eth_signTransaction")throw Error("Unable to sign transaction");return{data:a.data.signed_transaction}}case"eth_signTypedData_v4":{let[,o]=s.params,a=await ph(n,n.signRequest,{chain_type:"ethereum",method:s.method,wallet_id:i.id,params:{typed_data:Wce(o)}});if(a.method!=="eth_signTypedData_v4")throw Error("Unable to sign typed data");return{data:a.data.signature}}case"eth_sign":{let[,o]=s.params,a=await ph(n,n.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:i.id,params:{hash:bv(o)?o:fg(wv(o))}});if(a.method!=="secp256k1_sign")throw Error("Unable to sign message");return{data:a.data.signature}}case"secp256k1_sign":{let[o]=s.params,a=await ph(n,n.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:i.id,params:{hash:bv(o)?o:fg(wv(o))}});if(a.method!=="secp256k1_sign")throw Error("Unable to sign message");return{data:a.data.signature}}case"csw_signUserOperation":case"eth_sendTransaction":case"eth_populateTransactionRequest":throw Error(`This wallet does not support the method: ${s.method}`)}}({context:r,account:e,rpcRequest:t.request});case"solana":return async function({context:n,account:i,rpcRequest:s}){if(s.method==="signMessage"){let{message:o}=s.params,a=await ph(n,n.signRequest,{chain_type:"solana",method:"signMessage",wallet_id:i.id,params:{message:o,encoding:"base64"}});if(a.method!=="signMessage")throw Error("Unable to sign message");return{data:a.data.signature}}}({context:r,account:e,rpcRequest:t.request})}}let W1=class extends Vg{async request(e){if(Dce(e.method))return this.handleIFrameRpc(e);switch(e.method){case"eth_accounts":case"eth_requestAccounts":return this._account.address?[this._account.address]:[];case"eth_chainId":return`0x${this._chainId.toString(16)}`;case"wallet_switchEthereumChain":return this.handleSwitchEthereumChain(e);case"eth_estimateGas":return this.handleEstimateGas(e);case"eth_sendTransaction":{let t=e.params?.[0];return this.handleSendTransaction(t)}case"eth_populateTransactionRequest":{let t=e.params?.[0];return this.handlePopulateTransaction(t)}default:return this.handleJsonRpc(e)}}ensureChainId(e){let t={chainId:this._chainId,...e};return this.internalSwitchEthereumChain(t.chainId),t}internalSwitchEthereumChain(e){e&&Number(e)!==this._chainId&&(this._chainId=Number(e),this._jsonRpcProvider=$O(this._chainId,this._chains,{rpcUrls:[]},{appId:this._privyInternal.appId}),this.emit("chainChanged",e))}async handlePopulateTransaction(e){let t=this.ensureChainId(e);return MO(this._account.address,t,this._jsonRpcProvider)}async handleSendTransaction(e){let t=this.ensureChainId(e),n=await MO(this._account.address,t,this._jsonRpcProvider),i=await this.handleIFrameRpc({method:"eth_signTransaction",params:[n]});return await this.handleJsonRpc({method:"eth_sendRawTransaction",params:[i]})}async handleEstimateGas(e){if(!e.params||!Array.isArray(e.params))throw Error("Invalid params for eth_estimateGas");delete e.params[0].gasPrice,delete e.params[0].maxFeePerGas,delete e.params[0].maxPriorityFeePerGas;let t={...e.params[0],chainId:`0x${this._chainId.toString(16)}`};this.internalSwitchEthereumChain(t.chainId);try{return await this._jsonRpcProvider.send("eth_estimateGas",[t])}catch(n){console.warn(`Gas estimation failed with error: ${n}. Retrying gas estimation by omitting the 'from' address`);try{return delete t.from,await this._jsonRpcProvider.send("eth_estimateGas",[t])}catch(i){throw console.warn(`Gas estimation failed with error: ${i} when omitting the 'from' address`),n}}}handleSwitchEthereumChain(e){let t;if(!e.params||!Array.isArray(e.params))throw new PP(`Invalid params for ${e.method}`,4200);if(typeof e.params[0]=="string")t=e.params[0];else{if(!("chainId"in e.params[0])||typeof e.params[0].chainId!="string")throw new PP(`Invalid params for ${e.method}`,4200);t=e.params[0].chainId}this.internalSwitchEthereumChain(t)}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessToken();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address});let n=this._account;if(jl(n)){let{data:i}=await fj({context:{app:this._appApi,fetchPrivyRoute:(...s)=>this._privyInternal.fetch(...s),getCompiledPath:(...s)=>this._privyInternal.getPath(...s),signRequest:({message:s})=>this._walletProxy.signWithUserSigner({accessToken:t,message:s})},account:n,rpcRequest:{chainType:"ethereum",request:e}});return i}try{await this._walletProxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:t})}catch(i){let s=CR(i);if(s&&this._account.recovery_method==="privy")await this._walletProxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:t});else{if(!s||!this._onNeedsRecovery)throw i;{let o;await new Promise(async(a,c)=>{o=setTimeout(()=>c(new Wr({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>a(!0)})}).finally(()=>clearTimeout(o))}}}return(await this._walletProxy.rpcWallet({accessToken:t,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:"ethereum"})).response.data}catch(t){console.error(t);let n=t instanceof Error?t.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:n}),new Wr({code:"embedded_wallet_request_error",error:n})}}async handleJsonRpc(e){return this._jsonRpcProvider.send(e.method,e.params??[])}toJSON(){return`PrivyEIP1193Provider { address: '${this._account.address}', chainId: ${this._chainId}, request: [Function] }`}constructor({walletProxy:e,privyInternal:t,account:n,entropyId:i,entropyIdVerifier:s,chains:o,onNeedsRecovery:a,chainId:c=o[0].id,appApi:l}){super(),this._walletProxy=e,this._privyInternal=t,this._account=n,this._entropyId=i,this._entropyIdVerifier=s,this._chainId=c,this._chains=o,this._onNeedsRecovery=a,this._jsonRpcProvider=$O(c,o,{rpcUrls:[]},{appId:l.appId}),this._appApi=l}};function FA(r){return"version"in r}function zO(r,e){let t=(FA(r)?r.message:r.compileMessage()).staticAccountKeys.find(n=>n.toBase58()===e);if(!t)throw Error(`Transaction does not contain public key ${e}`);return t}let Gce=class{async request(e){if(!await this._privyInternal.getAccessToken())throw new Wr({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});switch(e.method){case"signAndSendTransaction":return await this.handleSignAndSendTransaction(e);case"signTransaction":return await this.handleSignTransaction(e);default:return await this.handleIFrameRpc(e)}}get _publicKey(){return this._account.address}async connectAndRecover(e){if(this._account.recovery_method!=="privy-v2")try{await this._proxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e})}catch(t){let n=CR(t);if(n&&this._account.recovery_method==="privy")await this._proxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e});else{if(!n||!this._onNeedsRecovery)throw t;{let i;await new Promise(async(s,o)=>{i=setTimeout(()=>o(new Wr({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>s(!0)})}).finally(()=>clearTimeout(i))}}}}async signMessageRpc(e,t){let n=this._account;if(!jl(n))return(await this._proxy.rpcWallet({accessToken:t,request:e,chainType:"solana",hdWalletIndex:this._account.wallet_index,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier})).response.data;{let{data:i}=await fj({context:{app:this._app,fetchPrivyRoute:(...s)=>this._privyInternal.fetch(...s),getCompiledPath:(...s)=>this._privyInternal.getPath(...s),signRequest:({message:s})=>this._proxy.signWithUserSigner({accessToken:t,message:s})},account:n,rpcRequest:{chainType:"solana",request:e}});return{signature:i}}}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessToken();if(!t)throw Error("Missing privy token. User must be logged in");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t),await this.signMessageRpc(e,t)}catch(t){console.error(t);let n=t instanceof Error?t.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:n}),new Wr({code:"embedded_wallet_request_error",error:n})}}async handleSignAndSendTransaction(e){try{let t=await this._privyInternal.getAccessToken();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t);let{transaction:n,connection:i,options:s}=e.params,o=zO(n,this._account.address),a=FA(n)?Xe.from(n.message.serialize()):n.serializeMessage(),{signature:c}=await this.signMessageRpc({method:"signMessage",params:{message:a.toString("base64")}},t);return n.addSignature(o,Xe.from(c,"base64")),{signature:await i.sendRawTransaction(n.serialize(),s)}}catch(t){console.error(t);let n=t instanceof Error?t.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:n}),new Wr({code:"embedded_wallet_request_error",error:n})}}async handleSignTransaction(e){try{let t=await this._privyInternal.getAccessToken();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t);let{transaction:n}=e.params,i=zO(n,this._account.address),s=FA(n)?Xe.from(n.message.serialize()):n.serializeMessage(),{signature:o}=await this.signMessageRpc({method:"signMessage",params:{message:s.toString("base64")}},t);return n.addSignature(i,Xe.from(o,"base64")),{signedTransaction:n}}catch(t){console.error(t);let n=t instanceof Error?t.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.wallet_index,error:n}),new Wr({code:"embedded_wallet_request_error",error:n})}}toJSON(){return`PrivyEmbeddedSolanaProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:t,account:n,entropyId:i,entropyIdVerifier:s,onNeedsRecovery:o,app:a}){this._proxy=e,this._privyInternal=t,this._account=n,this._entropyId=i,this._entropyIdVerifier=s,this._onNeedsRecovery=o,this._app=a}},Yce=class{setMessagePoster(e){this._proxy=new LO(e,this._mfaPromises),this._mfa.setProxy(this._proxy)}async signWithUserSigner(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let t=await this._privyInternal.getAccessToken();if(!t)throw new Wr({error:"User must be logged in to sign a message with the user signer",code:"user_signer_sign_error"});let{signature:n}=await this._proxy.signWithUserSigner({accessToken:t,message:e.message});return{signature:n}}async add(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(this._privyInternal.config?.embedded_wallet_config.mode==="user-controlled-server-wallets-only")await y1({context:{app:this._appApi,fetchPrivyRoute:(...n)=>this._privyInternal.fetch(...n),getCompiledPath:(...n)=>this._privyInternal.getPath(...n)},chainType:e.chainType});else{let n=await this._privyInternal.getAccessToken();if(!n)throw new Wr({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.addWallet({accessToken:n,...e})}let{user:t}=await this._privyInternal.refreshSession();return{user:t}}async getBitcoinProvider({wallet:e,entropyId:t,entropyIdVerifier:n,recoveryPassword:i,recoveryAccessToken:s,recoverySecretOverride:o}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessToken())throw Error("User must be logged in to create an embedded wallet");return jl(e)||await this._load({entropyId:t,entropyIdVerifier:n,wallet:e,recoveryPassword:i,recoveryAccessToken:s,recoverySecretOverride:o}),new kse({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:t,entropyIdVerifier:n})}async create({password:e,recoveryMethod:t,recoveryToken:n,recoveryKey:i,recoverySecretOverride:s,iCloudRecordNameOverride:o,solanaAccount:a,skipCallbacks:c}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(this._privyInternal.config?.embedded_wallet_config.mode==="user-controlled-server-wallets-only"){if(t&&!t.startsWith("privy"))throw new Wr({error:"User-controlled server wallets do not support custom recovery methods",code:"embedded_wallet_creation_error"});await y1({context:{app:this._appApi,fetchPrivyRoute:(...l)=>this._privyInternal.fetch(...l),getCompiledPath:(...l)=>this._privyInternal.getPath(...l)},chainType:"ethereum"})}else{let l;if(l=t||(e?"user-passcode":"privy"),e&&typeof e!="string")throw Error("Invalid recovery password, must be a string");if(l==="privy"&&this._privyInternal.config?.embedded_wallet_config.require_user_password_on_create)throw Error("Password not provided yet is required by App configuration");let u=await this._privyInternal.getAccessToken();if(!u)throw Error("User must be logged in to create an embedded wallet");let{address:f}=await this._proxy.create({accessToken:u,recoveryMethod:l,recoveryKey:i,recoveryPassword:e,recoveryAccessToken:n,recoverySecretOverride:s,iCloudRecordNameOverride:o,solanaAddress:a?.address});if(!f)throw Error("Failed to create wallet")}return await this._privyInternal.refreshSession(c)}async createSolana(e){if(!this._proxy)throw new Wr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});if(this._privyInternal.config?.embedded_wallet_config.mode==="user-controlled-server-wallets-only")await y1({context:{app:this._appApi,fetchPrivyRoute:(...t)=>this._privyInternal.fetch(...t),getCompiledPath:(...t)=>this._privyInternal.getPath(...t)},chainType:"solana"});else{let t=await this._privyInternal.getAccessToken();if(!t)throw new Wr({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});e?.ethereumAccount&&await this.getProvider(e.ethereumAccount);let{publicKey:n}=await this._proxy.createSolana({accessToken:t,ethereumAddress:e?.ethereumAccount?.address});if(!n)throw new Wr({error:"Failed to create wallet",code:"embedded_wallet_creation_error"})}return await this._privyInternal.refreshSession()}async delegateWallets({delegatedWallets:e,rootWallet:t}){if(!this._proxy)throw new Wr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});let n=await this._privyInternal.getAccessToken();if(!n)throw new Wr({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.delegateWallets({accessToken:n,delegatedWallets:e,rootWallet:t})}async getProvider(e,t,n,i,s){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return jl(e)||await this._load({wallet:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",recoveryPassword:t,recoveryKey:s,recoveryAccessToken:n,recoverySecretOverride:i}),new W1({account:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}async getEthereumProvider({wallet:e,entropyId:t,entropyIdVerifier:n,recoveryPassword:i,recoveryAccessToken:s,recoverySecretOverride:o,recoveryKey:a,onNeedsRecovery:c}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessToken())throw Error("User must be logged in to create an embedded wallet");return jl(e)||(!c||i||s||o||a)&&await this._load({entropyId:t,entropyIdVerifier:n,wallet:e,recoveryPassword:i,recoveryAccessToken:s,recoverySecretOverride:o,recoveryKey:a}),new W1({account:e,entropyId:t,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,onNeedsRecovery:c,appApi:this._appApi})}async getSolanaProvider(e,t,n,i,s,o,a){if(!this._proxy)throw new Wr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return jl(e)||(!a||i||s||o)&&await this._load({wallet:e,entropyId:t,entropyIdVerifier:n,recoveryPassword:i,recoveryAccessToken:s,recoverySecretOverride:o}),new Gce({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:t,entropyIdVerifier:n,onNeedsRecovery:a,app:this._appApi})}async setRecovery(e){let{wallet:t,...n}=e;if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(jl(t))throw new Wr({error:"This wallet does not support setting recovery methods",code:"unsupported_recovery_method"});Ace({currentRecoveryMethod:t.recovery_method,upgradeToRecoveryMethod:n.recoveryMethod==="icloud-native"?"icloud":n.recoveryMethod}),await this._load(t.chain_type==="solana"?{wallet:t,entropyId:t.address,entropyIdVerifier:"solana-address-verifier"}:{wallet:t,entropyId:t.address,entropyIdVerifier:"ethereum-address-verifier"});let i=await this._privyInternal.getAccessToken();if(!i)throw Error("User must be logged in to interact with embedded wallets");let s=t.recovery_method;this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_started",{address:t.address,target_recovery_method:n.recoveryMethod,existing_recovery_method:s});try{let o;if(n.recoveryMethod==="user-passcode")o={recoveryMethod:"user-passcode",recoveryPassword:n.password};else if(n.recoveryMethod==="google-drive")o={recoveryMethod:"google-drive",recoveryAccessToken:n.recoveryAccessToken};else if(n.recoveryMethod==="icloud")o={recoveryMethod:"icloud",recoveryAccessToken:n.recoveryAccessToken};else if(n.recoveryMethod==="icloud-native")o={recoveryMethod:"icloud-native",iCloudRecordNameOverride:n.iCloudRecordNameOverride,recoverySecretOverride:n.recoverySecretOverride};else if(n.recoveryMethod==="recovery-encryption-key")o={recoveryMethod:"recovery-encryption-key",recoveryKey:n.recoveryKey};else{if(n.recoveryMethod!=="privy")throw Error(`Unknown recovery method: ${n.recoveryMethod}`);o={recoveryMethod:"privy"}}await this._proxy.setRecovery({accessToken:i,entropyId:t.address,entropyIdVerifier:t.chain_type==="solana"?"solana-address-verifier":"ethereum-address-verifier",...o}),this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_completed",{address:t.address,target_recovery_method:n.recoveryMethod,existing_recovery_method:s});let{user:a}=await this._privyInternal.refreshSession();return{user:a,provider:t.chain_type!=="ethereum"?null:new W1({account:t,entropyId:t.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}}catch(o){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_failed",{address:t.address,recovery_method:t.recovery_method,error:o instanceof Error?o.message:"Unable to recover wallet"}),o}}getURL(){let e=new URL(`${this._privyInternal.baseUrl}/apps/${this._privyInternal.appId}/embedded-wallets`);return this._privyInternal.caid&&e.searchParams.append("caid",this._privyInternal.caid),this._privyInternal.appClientId&&e.searchParams.append("client_id",this._privyInternal.appClientId),e.href}get chains(){return this._chains}onMessage(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return this._proxy.handleEmbeddedWalletMessages(e)}reload(){this._proxy?this._proxy.reload():console.warn("Attempted to reload proxy before initialized")}async ping(e){try{if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return await this._proxy.ping(e),!0}catch(t){return console.error(t),!1}}async _load({entropyId:e,entropyIdVerifier:t,wallet:n,recoveryPassword:i,recoveryKey:s,recoveryAccessToken:o,recoverySecretOverride:a}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let c=await this._privyInternal.getAccessToken();if(!c)throw Error("User must be logged in to interact with embedded wallets");try{return await this._proxy.connect({accessToken:c,entropyId:e,entropyIdVerifier:t}),e}catch(l){if(CR(l))try{if(n.recovery_method==="privy"){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:n.address,recovery_method:n.recovery_method});let u=await this._proxy.recover({accessToken:c,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:n.address,recovery_method:n.recovery_method}),u.entropyId}if(n.recovery_method==="user-passcode"&&i){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:n.address,recovery_method:n.recovery_method});let u=await this._proxy.recover({accessToken:c,recoveryPassword:i,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:n.address,recovery_method:n.recovery_method}),u.entropyId}if(["google-drive","icloud"].includes(n.recovery_method)&&o){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:n.address,recovery_method:n.recovery_method});let u=await this._proxy.recover({accessToken:c,recoveryAccessToken:o,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:n.address,recovery_method:n.recovery_method}),u.entropyId}if(n.recovery_method==="icloud"&&a){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:n.address,recovery_method:"icloud-native"});let u=await this._proxy.recover({accessToken:c,recoverySecretOverride:a,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:n.address,recovery_method:"icloud-native"}),u.entropyId}if(n.recovery_method==="recovery-encryption-key"&&s){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:n.address,recovery_method:n.recovery_method});let u=await this._proxy.recover({accessToken:c,recoveryKey:s,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:n.address,recovery_method:n.recovery_method}),u.entropyId}}catch(u){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_failed",{address:n.address,recovery_method:n.recovery_method,error:u instanceof Error?u.message:`Unable to recover wallet: ${e}`}),u}throw l}}constructor(e,t,n,i,s,o){if(this._chains=Array.from(IR),this._privyInternal=e,t&&(this._proxy=new LO(t,s),i.setProxy(this._proxy)),n){let a=Tse(n);this._chains=a}this._mfa=i,this._mfaPromises=s,this._appApi=o}},Xce=class extends Vg{constructor(){super(),this.rootPromise={current:null},this.submitPromise={current:null}}};var Dm,Jce=new Uint8Array(16);function hj(){if(!Dm&&(Dm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Dm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Dm(Jce)}const Qce=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Gb(r){return typeof r=="string"&&Qce.test(r)}var _i=[];for(var G1=0;G1<256;++G1)_i.push((G1+256).toString(16).substr(1));function Yb(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(_i[r[e+0]]+_i[r[e+1]]+_i[r[e+2]]+_i[r[e+3]]+"-"+_i[r[e+4]]+_i[r[e+5]]+"-"+_i[r[e+6]]+_i[r[e+7]]+"-"+_i[r[e+8]]+_i[r[e+9]]+"-"+_i[r[e+10]]+_i[r[e+11]]+_i[r[e+12]]+_i[r[e+13]]+_i[r[e+14]]+_i[r[e+15]]).toLowerCase();if(!Gb(t))throw TypeError("Stringified UUID is invalid");return t}var qO,Y1,X1=0,J1=0;function Zce(r,e,t){var n=e&&t||0,i=e||new Array(16);r=r||{};var s=r.node||qO,o=r.clockseq!==void 0?r.clockseq:Y1;if(s==null||o==null){var a=r.random||(r.rng||hj)();s==null&&(s=qO=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Y1=(a[6]<<8|a[7])&16383)}var c=r.msecs!==void 0?r.msecs:Date.now(),l=r.nsecs!==void 0?r.nsecs:J1+1,u=c-X1+(l-J1)/1e4;if(u<0&&r.clockseq===void 0&&(o=o+1&16383),(u<0||c>X1)&&r.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");X1=c,J1=l,Y1=o,c+=122192928e5;var f=((c&268435455)*1e4+l)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=f&255;var h=c/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var d=0;d<6;++d)i[n+d]=s[d];return e||Yb(i)}function dj(r){if(!Gb(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function ele(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var tle="6ba7b810-9dad-11d1-80b4-00c04fd430c8",rle="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function pj(r,e,t){function n(i,s,o,a){if(typeof i=="string"&&(i=ele(i)),typeof s=="string"&&(s=dj(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return Yb(c)}try{n.name=r}catch{}return n.DNS=tle,n.URL=rle,n}function nle(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return ile(sle(ole(r),r.length*8))}function ile(r){for(var e=[],t=r.length*32,n="0123456789abcdef",i=0;i<t;i+=8){var s=r[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function gj(r){return(r+64>>>9<<4)+14+1}function sle(r,e){r[e>>5]|=128<<e%32,r[gj(e)-1]=e;for(var t=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<r.length;o+=16){var a=t,c=n,l=i,u=s;t=Hi(t,n,i,s,r[o],7,-680876936),s=Hi(s,t,n,i,r[o+1],12,-389564586),i=Hi(i,s,t,n,r[o+2],17,606105819),n=Hi(n,i,s,t,r[o+3],22,-1044525330),t=Hi(t,n,i,s,r[o+4],7,-176418897),s=Hi(s,t,n,i,r[o+5],12,1200080426),i=Hi(i,s,t,n,r[o+6],17,-1473231341),n=Hi(n,i,s,t,r[o+7],22,-45705983),t=Hi(t,n,i,s,r[o+8],7,1770035416),s=Hi(s,t,n,i,r[o+9],12,-1958414417),i=Hi(i,s,t,n,r[o+10],17,-42063),n=Hi(n,i,s,t,r[o+11],22,-1990404162),t=Hi(t,n,i,s,r[o+12],7,1804603682),s=Hi(s,t,n,i,r[o+13],12,-40341101),i=Hi(i,s,t,n,r[o+14],17,-1502002290),n=Hi(n,i,s,t,r[o+15],22,1236535329),t=Wi(t,n,i,s,r[o+1],5,-165796510),s=Wi(s,t,n,i,r[o+6],9,-1069501632),i=Wi(i,s,t,n,r[o+11],14,643717713),n=Wi(n,i,s,t,r[o],20,-373897302),t=Wi(t,n,i,s,r[o+5],5,-701558691),s=Wi(s,t,n,i,r[o+10],9,38016083),i=Wi(i,s,t,n,r[o+15],14,-660478335),n=Wi(n,i,s,t,r[o+4],20,-405537848),t=Wi(t,n,i,s,r[o+9],5,568446438),s=Wi(s,t,n,i,r[o+14],9,-1019803690),i=Wi(i,s,t,n,r[o+3],14,-187363961),n=Wi(n,i,s,t,r[o+8],20,1163531501),t=Wi(t,n,i,s,r[o+13],5,-1444681467),s=Wi(s,t,n,i,r[o+2],9,-51403784),i=Wi(i,s,t,n,r[o+7],14,1735328473),n=Wi(n,i,s,t,r[o+12],20,-1926607734),t=Gi(t,n,i,s,r[o+5],4,-378558),s=Gi(s,t,n,i,r[o+8],11,-2022574463),i=Gi(i,s,t,n,r[o+11],16,1839030562),n=Gi(n,i,s,t,r[o+14],23,-35309556),t=Gi(t,n,i,s,r[o+1],4,-1530992060),s=Gi(s,t,n,i,r[o+4],11,1272893353),i=Gi(i,s,t,n,r[o+7],16,-155497632),n=Gi(n,i,s,t,r[o+10],23,-1094730640),t=Gi(t,n,i,s,r[o+13],4,681279174),s=Gi(s,t,n,i,r[o],11,-358537222),i=Gi(i,s,t,n,r[o+3],16,-722521979),n=Gi(n,i,s,t,r[o+6],23,76029189),t=Gi(t,n,i,s,r[o+9],4,-640364487),s=Gi(s,t,n,i,r[o+12],11,-421815835),i=Gi(i,s,t,n,r[o+15],16,530742520),n=Gi(n,i,s,t,r[o+2],23,-995338651),t=Yi(t,n,i,s,r[o],6,-198630844),s=Yi(s,t,n,i,r[o+7],10,1126891415),i=Yi(i,s,t,n,r[o+14],15,-1416354905),n=Yi(n,i,s,t,r[o+5],21,-57434055),t=Yi(t,n,i,s,r[o+12],6,1700485571),s=Yi(s,t,n,i,r[o+3],10,-1894986606),i=Yi(i,s,t,n,r[o+10],15,-1051523),n=Yi(n,i,s,t,r[o+1],21,-2054922799),t=Yi(t,n,i,s,r[o+8],6,1873313359),s=Yi(s,t,n,i,r[o+15],10,-30611744),i=Yi(i,s,t,n,r[o+6],15,-1560198380),n=Yi(n,i,s,t,r[o+13],21,1309151649),t=Yi(t,n,i,s,r[o+4],6,-145523070),s=Yi(s,t,n,i,r[o+11],10,-1120210379),i=Yi(i,s,t,n,r[o+2],15,718787259),n=Yi(n,i,s,t,r[o+9],21,-343485551),t=Yl(t,a),n=Yl(n,c),i=Yl(i,l),s=Yl(s,u)}return[t,n,i,s]}function ole(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(gj(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function Yl(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function ale(r,e){return r<<e|r>>>32-e}function Xb(r,e,t,n,i,s){return Yl(ale(Yl(Yl(e,r),Yl(n,s)),i),t)}function Hi(r,e,t,n,i,s,o){return Xb(e&t|~e&n,r,e,i,s,o)}function Wi(r,e,t,n,i,s,o){return Xb(e&n|t&~n,r,e,i,s,o)}function Gi(r,e,t,n,i,s,o){return Xb(e^t^n,r,e,i,s,o)}function Yi(r,e,t,n,i,s,o){return Xb(t^(e|~n),r,e,i,s,o)}var cle=pj("v3",48,nle);function UA(r,e,t){r=r||{};var n=r.random||(r.rng||hj)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return Yb(n)}function lle(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function Q1(r,e){return r<<e|r>>>32-e}function ule(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,o=Math.ceil(s/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=r[c*64+u*4]<<24|r[c*64+u*4+1]<<16|r[c*64+u*4+2]<<8|r[c*64+u*4+3];a[c]=l}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var h=new Uint32Array(80),d=0;d<16;++d)h[d]=a[f][d];for(var g=16;g<80;++g)h[g]=Q1(h[g-3]^h[g-8]^h[g-14]^h[g-16],1);for(var p=t[0],m=t[1],y=t[2],v=t[3],b=t[4],_=0;_<80;++_){var x=Math.floor(_/20),E=Q1(p,5)+lle(x,m,y,v)+b+e[x]+h[_]>>>0;b=v,v=y,y=Q1(m,30)>>>0,m=p,p=E}t[0]=t[0]+p>>>0,t[1]=t[1]+m>>>0,t[2]=t[2]+y>>>0,t[3]=t[3]+v>>>0,t[4]=t[4]+b>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var fle=pj("v5",80,ule);const hle="00000000-0000-0000-0000-000000000000";function dle(r){if(!Gb(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const ple=Object.freeze(Object.defineProperty({__proto__:null,NIL:hle,parse:dj,stringify:Yb,v1:Zce,v3:cle,v4:UA,v5:fle,validate:Gb,version:dle},Symbol.toStringTag,{value:"Module"}));/*! js-cookie v3.0.5 | MIT */function $m(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}var gle={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function zA(r,e){function t(i,s,o){if(!(typeof document>"u")){o=$m({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,o[c]!==!0&&(a+="="+o[c].split(";")[0]));return document.cookie=i+"="+r.write(s,i)+a}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var c=s[a].split("="),l=c.slice(1).join("=");try{var u=decodeURIComponent(c[0]);if(o[u]=r.read(l,u),i===u)break}catch{}}return i?o[i]:o}}return Object.create({set:t,get:n,remove:function(i,s){t(i,"",$m({},s,{expires:-1}))},withAttributes:function(i){return zA(this.converter,$m({},this.attributes,i))},withConverter:function(i){return zA($m({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}var Qs=zA(gle,{path:"/"});const jO=Promise.allSettled.bind(Promise)??(r=>Promise.all(r.map(e=>e.then(t=>({status:"fulfilled",value:t})).catch(t=>({status:"rejected",reason:t})))));let gh="privy:token",Z1="privy-token",Mm="privy:refresh_token",ex="privy-refresh-token",mh="privy:id-token",tx="privy-id-token",Bm="privy-session",mj=class extends Vg{set isUsingServerCookies(e){this._isUsingServerCookies=e}async getToken(){let e=await this._storage.get(gh);try{return typeof e=="string"?new l0(e).value:null}catch(t){return console.error(t),await this.destroyLocalState({reason:"getToken_error"}),null}}async getRefreshToken(){let e=await this._storage.get(Mm);return typeof e=="string"?e:null}async getIdentityToken(){let e=await this._storage.get(mh);return typeof e=="string"?e:null}get mightHaveServerCookies(){try{let e=Qs.get(Bm);return e!==void 0&&e.length>0}catch(e){console.error(e)}return!1}hasRefreshCredentials(e,t){return this.mightHaveServerCookies||typeof e=="string"&&typeof t=="string"}tokenIsActive(e){if(!e)return!1;let t=l0.parse(e);return t!==null&&!t.isExpired(30)}async destroyLocalState(e){await jO([this._storage.del(gh),this._storage.del(Mm),this._storage.del(mh),this._storage.del(this.GUEST_CREDENTIAL_STORAGE_KEY)]),Qs.remove(Z1),Qs.remove(ex),Qs.remove(tx),Qs.remove(Bm),e?.reason&&this.emit("storage_cleared",{reason:e.reason})}async storeToken(e){if(typeof e=="string"){let t=await this._storage.get(gh);if(await this._storage.put(gh,e),!this._isUsingServerCookies){let n=l0.parse(e)?.expiration;Qs.set(Z1,e,{sameSite:"Strict",secure:!0,expires:n?new Date(1e3*n):void 0})}t!==e&&this.emit("token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let t=await this._storage.get(gh);await this._storage.del(gh),Qs.remove(Z1),t!==null&&this.emit("token_cleared",{reason:"set_with_non_string_value"})}}async storeRefreshToken(e){typeof e=="string"?(await this._storage.put(Mm,e),this._isUsingServerCookies||(Qs.set(Bm,"t",{sameSite:"Strict",secure:!0,expires:30}),Qs.set(ex,e,{sameSite:"Strict",secure:!0,expires:30})),this.emit("refresh_token_stored",{cookiesEnabled:this._isUsingServerCookies})):(await this._storage.del(Mm),Qs.remove(ex),Qs.remove(Bm),this.emit("refresh_token_cleared",{reason:"set_with_non_string_value"}))}async updateWithTokensResponse(e){let t=(await jO([this.storeToken(e.token),this.storeRefreshToken(e.refresh_token),this.storeIdentityToken(e.identity_token),this.processOAuthTokens(e.oauth_tokens)])).filter(n=>n.status==="rejected");t.length>0&&this.emit("error_storing_tokens",t.map(n=>String(n.reason)).join(", "))}async processOAuthTokens(e){e&&this.emit("oauth_tokens_granted",e)}async storeIdentityToken(e){if(typeof e=="string"){let t=await this._storage.get(mh);if(await this._storage.put(mh,e),!this._isUsingServerCookies){let n=l0.parse(e)?.expiration;Qs.set(tx,e,{sameSite:"Strict",secure:!0,expires:n?new Date(1e3*n):void 0})}t!==e&&this.emit("identity_token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let t=await this._storage.get(mh);await this._storage.del(mh),Qs.remove(tx),t!==null&&this.emit("identity_token_cleared",{reason:"set_with_non_string_value"})}}async getOrCreateGuestCredential(){let e=this._storage.get(this.GUEST_CREDENTIAL_STORAGE_KEY);if(e&&typeof e=="string")return e;let t=_R(crypto.getRandomValues(new Uint8Array(32)));return await this._storage.put(this.GUEST_CREDENTIAL_STORAGE_KEY,t),t}constructor(e){super(),this._isUsingServerCookies=!1,this._storage=e.storage,this.GUEST_CREDENTIAL_STORAGE_KEY=`privy:guest:${e.appId}`}};mj.events=["storage_cleared","token_cleared","refresh_token_cleared","identity_token_cleared","token_stored","refresh_token_stored","identity_token_stored","oauth_tokens_granted","error_storing_tokens"];var mle=r=>{let e=new AbortController;return setTimeout(()=>e.abort(),r),e.signal};function yle(r){let e=new URLSearchParams;for(let t in r)r[t]!=null&&e.append(t,String(r[t]));return Array.from(e).length?"?"+e.toString():""}const Nm=()=>{};let Dl={NONE:Number.NEGATIVE_INFINITY,ERROR:1,WARN:2,INFO:3,DEBUG:Number.POSITIVE_INFINITY};const vle=({level:r}={level:"ERROR"})=>({get level(){return r},error:Dl[r]>=Dl.ERROR?console.error:Nm,warn:Dl[r]>=Dl.WARN?console.warn:Nm,info:Dl[r]>=Dl.INFO?console.info:Nm,debug:Dl[r]>=Dl.DEBUG?console.debug:Nm});let rx="privy:caid",ble=class{setCallbacks(e){this.callbacks={...this.callbacks,...e}}get isReady(){return!!this._config}get config(){return this._config}get caid(){return this._analyticsId}async _initialize(){if(this.isReady)this.callbacks?.setIsReady?.(!0);else{if(!await this.isStorageAccessible())throw new Wr({code:"storage_error",error:"Unable to access storage"});this._config=await this.getAppConfig(),this._config?.custom_api_url&&(this.baseUrl=this._config.custom_api_url,this.session.isUsingServerCookies=!0),this.callbacks?.setIsReady?.(!0),this._sdkVersion.startsWith("react-auth:")||this.createAnalyticsEvent("sdk_initialize",{})}}getPath(e,{params:t,query:n}){return`${this.baseUrl}${Lne(e.path,t)}${yle(n)}`}async fetch(e,{body:t,params:n,query:i,headers:s,onRequest:o=this._beforeRequest.bind(this)}){let a=new Request(this.getPath(e,{params:n,query:i}),{method:e.method,body:JSON.stringify(t),headers:s}),c=await o(a),l=await this._fetch(a,c),u=await l.json();if(l.status>299)throw new m1(u);return u}async _beforeRequestWithoutInitialize(e){let t=await this.session.getToken(),n=new Headers(e.headers);n.set("privy-app-id",this.appId),this.appClientId&&n.set("privy-client-id",this.appClientId),n.set("privy-client",this._sdkVersion),t&&n.set("Authorization",`Bearer ${t}`),n.set("Content-Type","application/json"),n.set("Accept","application/json");let i=await this._getOrGenerateClientAnalyticsId();return i&&n.set("privy-ca-id",i),this.nativeAppIdentifier&&n.set("x-native-app-identifier",this.nativeAppIdentifier),{signal:mle(2e4),headers:n,credentials:"include"}}async beforeRequestWithoutRefresh(e){return await this._initialize(),this._beforeRequestWithoutInitialize(e)}async _beforeRequest(e){return await this._initialize(),await this.getAccessToken(),this.beforeRequestWithoutRefresh(e)}async getAppConfig(){return await this.fetch(Qre,{params:{app_id:this.appId},onRequest:this._beforeRequestWithoutInitialize.bind(this)})}async _getOrGenerateClientAnalyticsId(){if(this._analyticsId)return this._analyticsId;try{let e=await this._storage.get(rx);if(typeof e=="string"&&e.length>0)return this._analyticsId=e,e}catch(e){this.logger.error("Unable to load clientId",e)}try{this._analyticsId=UA()}catch(e){this.logger.error("Unable to generate uuidv4",e)}if(!this._analyticsId)return null;try{await this._storage.put(rx,this._analyticsId)}catch(e){this.logger.error(`Unable to store clientId: ${this._analyticsId}`,e)}return this._analyticsId}async destroyClientAnalyticsId(){try{return await this._storage.del(rx)}catch(e){this.logger.error("Unable to delete clientId",e)}}async createAnalyticsEvent(e,t){try{await this.fetch(Jre,{body:{event_name:e,client_id:await this._getOrGenerateClientAnalyticsId(),payload:t},onRequest:this.beforeRequestWithoutRefresh.bind(this)})}catch{}}async refreshSession(e=!1){if(!await this.isStorageAccessible())throw new Wr({code:"storage_error",error:"Unable to access storage"});let t=await this.session.getRefreshToken()??void 0,n=t??"key",i=this._cache.get(n);if(i)return this.logger.debug("[privy:refresh] found in-flight session refresh request, deduping"),await i;let s=this._refreshSession(t,e);this._cache.set(n,s);try{return await s}finally{this._cache.delete(n)}}async _refreshSession(e,t){let n=await this.session.getToken();if(!this.session.hasRefreshCredentials(n,e??null))throw this.logger.debug("[privy:refresh] missing tokens, skipping request"),await this._initialize(),new m1({code:mP.MISSING_OR_INVALID_TOKEN,error:"No tokens found in storage"});try{this.logger.debug(`[privy:refresh] fetching: ${gP.path}`);let i=await this.fetch(gP,{body:{refresh_token:e},onRequest:this.beforeRequestWithoutRefresh.bind(this)}),s=i.session_update_action;return this.logger.debug(`[privy:refresh] response: ${s}`),t||this.callbacks?.setUser?.(i.user),s==="set"&&(await this.session.updateWithTokensResponse(i),this.logger.debug("[privy:refresh] tokens stored")),s==="clear"&&(await this.session.destroyLocalState(),this.logger.debug("[privy:refresh] tokens cleared"),t||this.callbacks?.setUser?.(null)),s==="ignore"&&i.token&&(await this.session.storeToken(i.token),this.logger.debug("[privy:refresh] access token stored"),i.identity_token&&(this.logger.debug("[privy:refresh] identity token stored"),await this.session.storeIdentityToken(i.identity_token))),this.logger.debug("[privy:refresh] returning response"),i}catch(i){throw this.logger.debug(`[privy:refresh] error: ${i.message??"unknown error"}`),i instanceof m1&&i.code===mP.MISSING_OR_INVALID_TOKEN&&(await this.session.destroyLocalState(),t||this.callbacks?.setUser?.(null)),i}}async getAccessToken(){let[e,t]=await Promise.all([this.session.getToken(),this.session.getRefreshToken()]);if(!this.session.tokenIsActive(e)&&this.session.hasRefreshCredentials(e,t)){let n=await this.refreshSession(),i=await this.session.getToken();return n.token||this.logger.debug("[privy:getAccessToken] expected token received null"),n.token===e&&this.logger.debug("[privy:getAccessToken] expected new token in response received existing"),i===e&&this.logger.debug("[privy:getAccessToken] expected new token in storage received existing"),n.token??i}return e}async getIdentityToken(){return await this.session.getIdentityToken()}async isStorageAccessible(){try{let e=`privy:__storage__test-${UA()}`,t="blobby";await this._storage.put(e,t);let n=await this._storage.get(e);return await this._storage.del(e),n===t}catch(e){return this.logger.error(e),!1}}constructor(e){this._sdkVersion="js-sdk-core:0.54.2",this._cache=new Map,this.logger=vle({level:e.logLevel??"ERROR"}),this._storage=e.storage,this._analyticsId=null,this._getOrGenerateClientAnalyticsId(),this.baseUrl=e.baseUrl??"https://auth.privy.io",this.appId=e.appId,this.appClientId=e.appClientId,this._sdkVersion=e.sdkVersion??this._sdkVersion,this.callbacks=e.callbacks,this.nativeAppIdentifier=e.nativeAppIdentifier,this.session=new mj({storage:this._storage,isUsingServerCookies:!1,appId:e.appId}),this._fetch=UR(globalThis.fetch,{retries:3,retryDelay:t=>3**t*500,retryOn:[408,409,425,500,502,503,504]}),this.session.on("error_storing_tokens",t=>{this.createAnalyticsEvent("error_updating_tokens_in_storage",{reason:t})})}},wle=class{async get(){let{user:e}=await this._privyInternal.refreshSession();return{user:e}}async acceptTerms(){return{user:await this._privyInternal.fetch(Yne,{})}}constructor(e){this._privyInternal=e}};const yj=r=>r.type==="wallet"&&r.wallet_client_type==="privy"&&r.connector_type==="embedded",vj=r=>r?r.linked_accounts.filter(yj).filter(e=>e.chain_type==="ethereum").sort((e,t)=>e.wallet_index-t.wallet_index):[],qA=r=>vj(r).find(e=>e.wallet_index===0)??null,bj=r=>r?r.linked_accounts.filter(yj).filter(e=>e.chain_type==="solana").sort((e,t)=>e.wallet_index-t.wallet_index):[],xv=r=>bj(r).find(e=>e.wallet_index===0)??null,xle=(r,e)=>!(e==="off"||vj(r).length>0||r.linked_accounts.filter(t=>t.type==="wallet"&&t.chain_type==="ethereum").length>0&&e!=="all-users"),_le=(r,e)=>!(e==="off"||bj(r).length>0||r.linked_accounts.filter(t=>t.type==="wallet"&&t.chain_type==="solana").length>0&&e!=="all-users"),Ta=async(r,e,t)=>{let n=xle(e.user,t?.ethereum?.createOnLogin??"off"),i=_le(e.user,t?.solana?.createOnLogin??"off");if(n&&i){let s=await r.create({recoveryMethod:"privy",skipCallbacks:!0});return{...await r.createSolana({ethereumAccount:qA(s.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}}return n?{...await r.create({recoveryMethod:"privy",solanaAccount:xv(e.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}:i?{...await r.createSolana({ethereumAccount:qA(e.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}:e};let Sle=class{async syncWithToken(e,t,n){let i=await this._privyInternal.fetch(rne,{body:{token:e,mode:n}});await this._privyInternal.session.updateWithTokensResponse(i);let s=await Ta(this._embedded,i,t?.embedded);return this._privyInternal.callbacks?.setUser?.(s.user),s}constructor(e,t){this._privyInternal=e,this._embedded=t}},Ele=class{async sendCode(e,t){return this._privyInternal.fetch(Ene,{body:{email:e,token:t}})}async loginWithCode(e,t,n,i){let s=await this._privyInternal.fetch(Sne,{body:{email:e,code:t,mode:n}});await this._privyInternal.session.updateWithTokensResponse(s);let o=await Ta(this._embedded,s,i?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}async linkWithCode(e,t){await this._privyInternal.fetch(Ane,{body:{email:e,code:t}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async updateEmail({oldEmailAddress:e,newEmailAddress:t,code:n}){await this._privyInternal.fetch(Cne,{body:{oldAddress:e,newAddress:t,code:n}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async unlink(e){await this._privyInternal.fetch(Ine,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}},Ale=class{async initializeAuth({relyingParty:e,redirectUrl:t,token:n}){return await this._privyInternal.fetch(nne,{body:{relying_party:e,redirect_url:t,token:n}})}async getFarcasterStatus({channel_token:e}){return await this._privyInternal.fetch(ane,{headers:{"farcaster-channel-token":e}})}async authenticate({channel_token:e,message:t,signature:n,fid:i,mode:s},o){let a=await this._privyInternal.fetch(ine,{body:{channel_token:e,message:t,signature:n,fid:i,mode:s}});await this._privyInternal.session.updateWithTokensResponse(a);let c=await Ta(this._embedded,a,o?.embedded);return this._privyInternal.callbacks?.setUser?.(c.user),c}async link({channel_token:e,message:t,signature:n,fid:i}){await this._privyInternal.fetch(sne,{body:{channel_token:e,message:t,signature:n,fid:i}});let s=await this._privyInternal.refreshSession();return{user:s.user,identity_token:s.identity_token}}async unlink({fid:e}){await this._privyInternal.fetch(one,{body:{fid:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}},Ile=class{async initializeAuth(){return await this._privyInternal.fetch(cne,{body:{}})}async authenticate({message:e,signature:t,fid:n},i){let s=await this._privyInternal.fetch(lne,{body:{message:e,signature:t,fid:n}});await this._privyInternal.session.updateWithTokensResponse(s);let o=await Ta(this._embedded,s,i?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}constructor(e,t){this._privyInternal=e,this._embedded=t}},Cle=class{async create(e){let t=await this._privyInternal.session.getOrCreateGuestCredential(),n=await this._privyInternal.fetch(une,{body:{guest_credential:t}});await this._privyInternal.session.updateWithTokensResponse(n);let i=await Ta(this._embedded,n,e?.embedded);return this._privyInternal.callbacks?.setUser?.(i.user),i}constructor(e,t){this._privyInternal=e,this._embedded=t}};const Vl="privy:state_code",Kl="privy:code_verifier";async function Tle(r,e){let t=new TextEncoder().encode(r);return new Uint8Array(await e("SHA-256",t))}function Rle(r){return crypto.getRandomValues(new Uint8Array(r))}function qR(){return _R(Rle(36))}function wj(){return qR()}async function xj({codeVerifier:r,method:e="S256",digest:t=crypto.subtle.digest.bind(crypto.subtle)}){if(e!="S256")return r;{let n=await Tle(r,t);return _R(n)}}let kle=class{async generateURL(e,t){let n=qR(),i=wj(),s=await xj({codeVerifier:n,digest:this._crypto?.digest});return await Promise.all([this._storage.put(Kl,n),this._storage.put(Vl,i)]),this._privyInternal.fetch(pne,{body:{redirect_to:t,provider:e,code_challenge:s,state_code:i}})}async loginWithCode(e,t,n,i,s,o){let[a,c]=await Promise.all([this._storage.get(Kl),this._storage.get(Vl)]);if(c!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:n,storedStateCode:c??"",returnedStateCode:t??""}),new Wr({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let l=await this._privyInternal.fetch(dne,{body:{authorization_code:e,code_type:i,state_code:c,code_verifier:a,mode:s}});await this._privyInternal.session.updateWithTokensResponse(l);let u=await Ta(this._embedded,l,o?.embedded);return await Promise.all([this._storage.del(Kl),this._storage.del(Vl)]),this._privyInternal.callbacks?.setUser?.(u.user),u}async linkWithCode(e,t,n,i){let[s,o]=await Promise.all([this._storage.get(Kl),this._storage.get(Vl)]);if(o!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:n,storedStateCode:o??"",returnedStateCode:t??""}),new Wr({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let a=await this._privyInternal.fetch(gne,{body:{authorization_code:e,code_type:i,state_code:o,code_verifier:s}});await this._privyInternal.session.processOAuthTokens(a.oauth_tokens);let c=await this._privyInternal.refreshSession();return await Promise.all([this._storage.del(Kl),this._storage.del(Vl)]),{user:c.user,identity_token:c.identity_token}}async unlink(e,t){await this._privyInternal.fetch(mne,{body:{provider:e,subject:t}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}constructor(e,t,n,i){this._privyInternal=e,this._embedded=t,this._storage=n,this._crypto=i}},Ple=class{async generateRegistrationOptions(e){return await this._privyInternal.fetch(_ne,{body:{relying_party:e}})}async generateAuthenticationOptions(e){return await this._privyInternal.fetch(wne,{body:{relying_party:e}})}async generateSignupOptions(e){return await this._privyInternal.fetch(xne,{body:{relying_party:e}})}async loginWithPasskey(e,t,n,i){let s=await this._privyInternal.fetch(vne,{body:{relying_party:n,challenge:t,authenticator_response:this._transformAuthenticationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(s);let o=await Ta(this._embedded,s,i?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}async signupWithPasskey(e,t,n){let i=await this._privyInternal.fetch(bne,{body:{relying_party:t,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(i);let s=await Ta(this._embedded,i,n?.embedded);return this._privyInternal.callbacks?.setUser?.(s.user),s}async linkWithPasskey(e,t){await this._privyInternal.fetch(yne,{body:{relying_party:t,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}_transformRegistrationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{client_data_json:e.response.clientDataJSON,attestation_object:e.response.attestationObject,authenticator_data:e.response.authenticatorData||void 0,transports:e.response.transports||void 0,public_key:e.response.publicKey||void 0,public_key_algorithm:e.response.publicKeyAlgorithm||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}_transformAuthenticationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{signature:e.response.signature,client_data_json:e.response.clientDataJSON,authenticator_data:e.response.authenticatorData,user_handle:e.response.userHandle||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}constructor(e,t){this._privyInternal=e,this._embedded=t}},Ole=class{async sendCode(e,t){return this._privyInternal.fetch(Rne,{body:{phoneNumber:e,token:t}})}async loginWithCode(e,t,n,i){let s=await this._privyInternal.fetch(Tne,{body:{phoneNumber:e,code:t,mode:n}});await this._privyInternal.session.updateWithTokensResponse(s);let o=await Ta(this._embedded,s,i?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}async linkWithCode(e,t){await this._privyInternal.fetch(kne,{body:{phoneNumber:e,code:t}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async updatePhone({oldPhoneNumber:e,newPhoneNumber:t,code:n}){await this._privyInternal.fetch(One,{body:{old_phone_number:e,new_phone_number:t,code:n}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async unlink(e){await this._privyInternal.fetch(Pne,{body:{phoneNumber:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}},Dle=class{async unlinkWallet(e){await this._privyInternal.fetch(Vne,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}async linkWithSiwe(e,t,n){let i=t||this._wallet,s=n||this._preparedMessage;if(!i)throw Error("A wallet must be provided in the init step or as an argument to linkWithSiwe");if(!s)throw Error("A message must be generated and signed before being used to link a wallet to privy");await this._privyInternal.fetch(qne,{body:{message:s,signature:e,chainId:i.chainId,walletClientType:i.walletClientType,connectorType:i.connectorType}});let o=await this._privyInternal.refreshSession();return{user:o.user,identity_token:o.identity_token}}async loginWithSiwe(e,t,n,i,s){let o=t||this._wallet,a=n||this._preparedMessage;if(!o)throw Error("A wallet must be provided in the init step or as an argument to loginWithSiwe");if(!a)throw Error("A message must be generated and signed before being used to login to privy with a wallet");let c=await this._privyInternal.fetch(zne,{body:{signature:e,message:a,chainId:o.chainId,walletClientType:o.walletClientType,connectorType:o.connectorType,mode:i}});await this._privyInternal.session.updateWithTokensResponse(c);let l=await Ta(this._embedded,c,s?.embedded);return this._privyInternal.callbacks?.setUser?.(l.user),l}async init(e,t,n){var i;this._wallet=e;let{nonce:s}=await this._privyInternal.fetch(kz,{body:{address:e.address}}),o=`${(i={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:new Date().toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:t,nonce:s,uri:n}).domain} wants you to sign in with your Ethereum account:
${i.address}

${i.statement}

URI: ${i.uri}
Version: 1
Chain ID: ${i.chainId}
Nonce: ${i.nonce}
Issued At: ${i.issuedAt}
Resources:
- https://privy.io`;return this._preparedMessage=o,{nonce:s,message:o}}constructor(e,t){this._wallet=void 0,this._privyInternal=e,this._embedded=t}},$le=class{async unlink({address:e}){await this._privyInternal.fetch(Gne,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}async link({message:e,signature:t,walletClientType:n,connectorType:i}){await this._privyInternal.fetch(Wne,{body:{message:e,signature:t,walletClientType:n,connectorType:i}});let s=await this._privyInternal.refreshSession();return{user:s.user,identity_token:s.identity_token}}async login({mode:e,message:t,signature:n,walletClientType:i,connectorType:s,opts:o}){let a=await this._privyInternal.fetch(Hne,{body:{signature:n,message:t,walletClientType:i,connectorType:s,mode:e}});await this._privyInternal.session.updateWithTokensResponse(a);let c=await Ta(this._embedded,a,o?.embedded);return this._privyInternal.callbacks?.setUser?.(c.user),c}async fetchNonce({address:e}){let{nonce:t}=await this._privyInternal.fetch(Kne,{body:{address:e}});return{nonce:t}}constructor(e,t){this._privyInternal=e,this._embedded=t}},Mle=class{async link(e,t,n){await this._privyInternal.fetch(jne,{body:{message:e,signature:t,smart_wallet_type:n}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async init(e){var t;let{nonce:n}=await this._privyInternal.fetch(kz,{body:{address:e.address}});return{nonce:n,message:`${(t={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:new Date().toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:"privy.io",uri:"https://auth.privy.io",nonce:n}).domain} wants you to sign in with your Ethereum account:
${t.address}

${t.statement}

URI: ${t.uri}
Version: 1
Chain ID: ${t.chainId}
Nonce: ${t.nonce}
Issued At: ${t.issuedAt}
Resources:
- https://privy.io`}}constructor(e){this._privyInternal=e}},Ble=class{async logout(){try{let e=await this._privyInternal.session.getRefreshToken()??void 0;await this._privyInternal.fetch(Fne,{body:{refresh_token:e}})}catch{console.warn("Error destroying session")}await Promise.all([this._privyInternal.session.destroyLocalState({reason:"logout"}),this._privyInternal.destroyClientAnalyticsId()]),this._privyInternal.callbacks?.setUser?.(null)}constructor(e,t,n,i){this._privyInternal=e,this.customProvider=new Sle(this._privyInternal,t),this.phone=new Ole(this._privyInternal,t),this.email=new Ele(this._privyInternal,t),this.oauth=new kle(this._privyInternal,t,n,i),this.guest=new Cle(this._privyInternal,t),this.siwe=new Dle(this._privyInternal,t),this.siws=new $le(this._privyInternal,t),this.smartWallet=new Mle(this._privyInternal),this.passkey=new Ple(this._privyInternal,t),this.farcaster=new Ale(this._privyInternal,t),this.farcasterV2=new Ile(this._privyInternal,t)}},Nle=class{async initOnRampSession(e){return await this._privyInternal.fetch(Zre,{body:e})}async getStatus(e){return await this._privyInternal.fetch(ene,{query:{partnerUserId:e}})}constructor(e){this._privyInternal=e}};const Lle={prod:{url:"https://api.moonpay.com/v1",key:"pk_live_hirbpu0cVcLHrjktC9l7fbc9ctjv0SL"},sandbox:{url:"https://api.moonpay.com/v1",key:"pk_test_fqWjXZMSFwloh7orvJsRfjiUHXJqFzI"}};SR.id,Nb.id,Lb.id,Ug.id,aq.id,lq.id;SR.id,Nb.id,ER.id,Lb.id,Ug.id;let Fle=class{async sign(e){return await this._privyInternal.fetch(Xne,{body:e})}async getTransactionStatus({transactionId:e,useSandbox:t}){let{url:n,key:i}=Lle[t?"sandbox":"prod"],s=await UR(fetch,{retries:3,retryDelay:500})(`${n}/transactions/ext/${e}?apiKey=${i}`);if(!s.ok)throw new Rse({error:`Failed to fetch transaction status for Transaction ${e}`,code:"failed_to_fetch_moonpay_transaction_status",response:s});let o=await s.json();return Array.isArray(o)?o.at(0):void 0}constructor(e){this._privyInternal=e}},Ule=class{constructor(e){this.moonpay=new Fle(e),this.coinbase=new Nle(e)}},zle=class{async generateAuthenticationOptions(e){return await this._privyInternal.fetch(fne,{body:e})}constructor(e){this._privyInternal=e}},qle=class{async sendCode(e){return await this._privyInternal.fetch(hne,{body:e})}constructor(e){this._privyInternal=e}},jle=class{setProxy(e){this.proxy=e}async getAccessToken(){let e=await this.privyInternal.getAccessToken();if(!e)throw new Wr({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return e}async verifyMfa(){if(!this.proxy)throw new Wr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.verifyMfa({accessToken:await this.getAccessToken()})}async initEnrollMfa(e){if(!this.proxy)throw new Wr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.initEnrollMfa({...e,accessToken:await this.getAccessToken()})}async submitEnrollMfa(e){if(!this.proxy)throw new Wr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let t=await this.proxy.submitEnrollMfa({...e,accessToken:await this.getAccessToken()});return await this.privyInternal.refreshSession(),t}async unenrollMfa(e){if(!this.proxy)throw new Wr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let t=await this.proxy.unenrollMfa({method:e,accessToken:await this.getAccessToken()});return await this.privyInternal.refreshSession(),t}async clearMfa(e){if(!this.proxy)throw new Wr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.clearMfa(e)}constructor(e,t){this.proxy=t,this.privyInternal=e,this.sms=new qle(e),this.passkey=new zle(e)}},Vle=class{async init(e){return this._privyInternal.fetch(Bne,{body:{client_type:e}})}async getICloudConfiguration(e){return this._privyInternal.fetch(Nne,{body:{client_type:e}})}constructor(e){this._privyInternal=e}},Kle=class{async generateURL(e){let t=qR(),n=wj(),i=await xj({codeVerifier:t,digest:this._crypto?.digest});return await Promise.all([this._storage.put(Kl,t),this._storage.put(Vl,n)]),this._privyInternal.fetch($ne,{body:{redirect_to:e,code_challenge:i,state_code:n}})}async authorize(e,t){let[n,i]=await Promise.all([this._storage.get(Kl),this._storage.get(Vl)]);if(i!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"recovery_oauth",storedStateCode:i??"",returnedStateCode:t??""}),new Wr({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let s=await this._privyInternal.fetch(Mne,{body:{authorization_code:e,state_code:i,code_verifier:n}});return await Promise.all([this._storage.del(Kl),this._storage.del(Vl)]),s}constructor(e,t,n){this._privyInternal=e,this._storage=t,this._crypto=n}},Hle=class{async getRecoveryKeyMaterial(e,t){return this._privyInternal.fetch(Dne,{body:{chain_type:t},params:{address:e}})}constructor(e,t,n){this._privyInternal=e,this.auth=new Kle(this._privyInternal,t,n),this.icloudAuth=new Vle(this._privyInternal)}},Wle=class{async initialize(){await this._privyInternal._initialize()}setMessagePoster(e){this.embeddedWallet.setMessagePoster(e)}addOAuthTokensListener(e){return this._privyInternal.session.on("oauth_tokens_granted",e),{unsubscribe:()=>{this._privyInternal.session.removeListener("oauth_tokens_granted",e)}}}setCallbacks(e){this._privyInternal.setCallbacks(e)}getAccessToken(){return this._privyInternal.getAccessToken()}getIdentityToken(){return this._privyInternal.getIdentityToken()}getCompiledPath(e,t){return this._privyInternal.getPath(e,t)}async fetchPrivyRoute(e,t){return this._privyInternal.fetch(e,t)}get logger(){return this._privyInternal.logger}constructor({clientId:e,...t}){this._privyInternal=new ble({...t,appClientId:e}),this.mfa=new jle(this._privyInternal),this.mfaPromises=new Xce,this.app=new nse(this._privyInternal),this.embeddedWallet=new Yce(this._privyInternal,t.embeddedWalletMessagePoster,t.supportedChains,this.mfa,this.mfaPromises,this.app),this.user=new wle(this._privyInternal),this.auth=new Ble(this._privyInternal,this.embeddedWallet,t.storage,t.crypto),this.recovery=new Hle(this._privyInternal,t.storage,t.crypto),this.funding=new Ule(this._privyInternal),this.delegated=new pse(this._privyInternal),this.crossApp=new sq(this._privyInternal,t.storage)}};const Gle=(r,e)=>{if(!r)return null;let t=qA(r)??xv(r);return t?Yle(t):null},Yle=r=>{if(r.chain_type==="ethereum")return{entropyId:r.address,entropyIdVerifier:"ethereum-address-verifier"};if(r.chain_type==="solana")return{entropyId:r.address,entropyIdVerifier:"solana-address-verifier"};throw Error("Invalid embedded wallet account type")};var Xle=28e5,Jle=2800001,Qle=2800003,Zle=361e4,eue=3610003,tue=3610005,rue=3610007,nue=3704001,iue=5663015,sue=5663016,oue=5663017,aue=8078e3,cue=8078001,lue=8078004,uue=8078005,fue=8078006,hue=8078007,due=8078011,hg=8078012,pue=8078013,gue=8078014;function _j(r){return Array.isArray(r)?"%5B"+r.map(_j).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function mue([r,e]){return`${r}=${_j(e)}`}function yue(r){const e=Object.entries(r).map(mue).join("&");return btoa(e)}function vue(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${yue(e)}'`),`${t}\``}}var wn=class extends Error{cause=this.cause;context;constructor(...[r,e]){let t,n;if(e){const{cause:s,...o}=e;s&&(n={cause:s}),Object.keys(o).length>0&&(t=o)}const i=vue(r,t);super(i,n),this.context={__code:r,...t},this.name="SolanaError"}},bue=(r,e)=>{if(r.length>=e)return r;const t=new Uint8Array(e).fill(0);return t.set(r),t},wue=(r,e)=>bue(r.length<=e?r:r.slice(0,e),e);function _v(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function Oa(r){return Object.freeze({...r,encode:e=>{const t=new Uint8Array(_v(e,r));return r.write(e,t,0),t}})}function Is(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function fa(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function xue(r){return!fa(r)}function Sj(r,e){if(fa(r)!==fa(e))throw new wn(lue);if(fa(r)&&fa(e)&&r.fixedSize!==e.fixedSize)throw new wn(uue,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!fa(r)&&!fa(e)&&r.maxSize!==e.maxSize)throw new wn(fue,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function _ue(r,e,t=0){if(e.length-t<=0)throw new wn(aue,{codecDescription:r})}function Ej(r,e,t,n=0){const i=t.length-n;if(i<e)throw new wn(cue,{bytesLength:i,codecDescription:r,expected:e})}function VO(r,e,t){if(e<0||e>t)throw new wn(gue,{bytesLength:t,codecDescription:r,offset:e})}function Aj(r,e){return Oa({fixedSize:e,write:(t,n,i)=>{const s=r.encode(t),o=s.length>e?s.slice(0,e):s;return n.set(o,i),i+e}})}function Ij(r,e){return Is({fixedSize:e,read:(t,n)=>{Ej("fixCodecSize",e,t,n),(n>0||t.length>e)&&(t=t.slice(n,n+e)),fa(r)&&(t=wue(t,r.fixedSize));const[i]=r.read(t,0);return[i,n+e]}})}function Sue(r,e){return Is({...r,read:(t,n)=>{const i=l=>Eue(l,t.length),s=e.preOffset?e.preOffset({bytes:t,preOffset:n,wrapBytes:i}):n;VO("offsetDecoder",s,t.length);const[o,a]=r.read(t,s),c=e.postOffset?e.postOffset({bytes:t,newPreOffset:s,postOffset:a,preOffset:n,wrapBytes:i}):a;return VO("offsetDecoder",c,t.length),[o,c]}})}function Eue(r,e){return e===0?0:(r%e+e)%e}function Aue(r,e){if(fa(r)){const t=e(r.fixedSize);if(t<0)throw new wn(pue,{bytesLength:t,codecDescription:"resizeDecoder"});return Is({...r,fixedSize:t})}return r}function Iue(r,e){return Sue(Aue(r,t=>t+e),{postOffset:({postOffset:t})=>t+e})}function Cj(r,e){return Oa({...xue(r)?{...r,getSizeFromValue:t=>r.getSizeFromValue(e(t))}:r,write:(t,n,i)=>r.write(e(t),n,i)})}function Cue(r,e){return Is({...r,read:(t,n)=>{const[i,s]=r.read(t,n);return[e(i,t,n),s]}})}function Tue(r,e,t=e){if(!e.match(new RegExp(`^[${r}]*$`)))throw new wn(hg,{alphabet:r,base:r.length,value:t})}var Rue=r=>Oa({getSizeFromValue:e=>{const[t,n]=KO(e,r[0]);if(!n)return e.length;const i=HO(n,r);return t.length+Math.ceil(i.toString(16).length/2)},write(e,t,n){if(Tue(r,e),e==="")return n;const[i,s]=KO(e,r[0]);if(!s)return t.set(new Uint8Array(i.length).fill(0),n),n+i.length;let o=HO(s,r);const a=[];for(;o>0n;)a.unshift(Number(o%256n)),o/=256n;const c=[...Array(i.length).fill(0),...a];return t.set(c,n),n+c.length}}),kue=r=>Is({read(e,t){const n=t===0?e:e.slice(t);if(n.length===0)return["",0];let i=n.findIndex(c=>c!==0);i=i===-1?n.length:i;const s=r[0].repeat(i);if(i===n.length)return[s,e.length];const o=n.slice(i).reduce((c,l)=>c*256n+BigInt(l),0n),a=Pue(o,r);return[s+a,e.length]}});function KO(r,e){const[t,n]=r.split(new RegExp(`((?!${e}).*)`));return[t,n]}function HO(r,e){const t=BigInt(e.length);let n=0n;for(const i of r)n*=t,n+=BigInt(e.indexOf(i));return n}function Pue(r,e){const t=BigInt(e.length),n=[];for(;r>0n;)n.unshift(e[Number(r%t)]),r/=t;return n.join("")}var WO={alphabet:"0123456789abcdef",base:16};function nx(r){if(r>=48&&r<=57)return r-48;if(r>=65&&r<=70)return r-55;if(r>=97&&r<=102)return r-87}var Oue=()=>Oa({getSizeFromValue:r=>Math.ceil(r.length/2),write(r,e,t){const n=r.length,i=n/2;if(n===1){const o=r.charCodeAt(0),a=nx(o);if(a===void 0)throw new wn(hg,{...WO,value:r});return e.set([a],t),1+t}const s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=r.charCodeAt(a++),l=r.charCodeAt(a++),u=nx(c),f=nx(l);if(u===void 0||f===void 0&&!Number.isNaN(l))throw new wn(hg,{...WO,value:r});s[o]=Number.isNaN(l)?u:u<<4|(f??0)}return e.set(s,t),s.length+t}}),Due=()=>Is({read(r,e){return[r.slice(e).reduce((n,i)=>n+i.toString(16).padStart(2,"0"),""),r.length]}}),Tj="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Rj=()=>Rue(Tj),kj=()=>kue(Tj),GO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$ue=()=>Oa({getSizeFromValue:r=>{try{return atob(r).length}catch{throw new wn(hg,{alphabet:GO,base:64,value:r})}},write(r,e,t){try{const n=atob(r).split("").map(i=>i.charCodeAt(0));return e.set(n,t),n.length+t}catch{throw new wn(hg,{alphabet:GO,base:64,value:r})}}}),Pj=()=>Is({read(r,e=0){const t=r.slice(e);return[btoa(String.fromCharCode(...t)),r.length]}}),Mue=r=>r.replace(/\u0000/g,""),Bue=globalThis.TextDecoder,YO=globalThis.TextEncoder,Nue=()=>{let r;return Oa({getSizeFromValue:e=>(r||=new YO).encode(e).length,write:(e,t,n)=>{const i=(r||=new YO).encode(e);return t.set(i,n),n+i.length}})},Lue=()=>{let r;return Is({read(e,t){const n=(r||=new Bue).decode(e.slice(t));return[Mue(n),e.length]}})};function Oj(){if(!globalThis.isSecureContext)throw new wn(Zle)}function Dj(){if(Oj(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.exportKey!="function")throw new wn(eue)}function Fue(){if(Oj(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.sign!="function")throw new wn(tue)}var ix,sx;function jR(){return ix||(ix=Rj()),ix}function Uue(){return sx||(sx=kj()),sx}function jA(r){if(r.length<32||r.length>44)return!1;const e=jR();try{return e.encode(r).byteLength===32}catch{return!1}}function zue(r){if(r.length<32||r.length>44)throw new wn(Jle,{actualLength:r.length});const n=jR().encode(r).byteLength;if(n!==32)throw new wn(Xle,{actualLength:n})}function VR(r){return zue(r),r}function que(){return Cj(Aj(jR(),32),r=>VR(r))}function KR(){return Ij(Uue(),32)}function jue(){return Sj(que(),KR())}async function $j(r){if(Dj(),r.type!=="public"||r.algorithm.name!=="Ed25519")throw new wn(Qle);const e=await crypto.subtle.exportKey("raw",r);return KR().decode(new Uint8Array(e))}function Mj(r,e,t,n){if(n<e||n>t)throw new wn(due,{codecDescription:r,max:t,min:e,value:n})}function Bj(r){return r?.endian!==1}function Nj(r){return Oa({fixedSize:r.size,write(e,t,n){r.range&&Mj(r.name,r.range[0],r.range[1],e);const i=new ArrayBuffer(r.size);return r.set(new DataView(i),e,Bj(r.config)),t.set(new Uint8Array(i),n),n+r.size}})}function HR(r){return Is({fixedSize:r.size,read(e,t=0){_ue(r.name,e,t),Ej(r.name,r.size,e,t);const n=new DataView(Vue(e,t,r.size));return[r.get(n,Bj(r.config)),t+r.size]}})}function Vue(r,e,t){const n=r.byteOffset+(e??0),i=t??r.byteLength;return r.buffer.slice(n,n+i)}var Kue=()=>Oa({getSizeFromValue:r=>r<=127?1:r<=16383?2:3,maxSize:3,write:(r,e,t)=>{Mj("shortU16",0,65535,r);const n=[0];for(let i=0;;i+=1){const s=Number(r)>>i*7;if(s===0)break;const o=127&s;n[i]=o,i>0&&(n[i-1]|=128)}return e.set(n,t),t+n.length}}),Lj=()=>Is({maxSize:3,read:(r,e)=>{let t=0,n=0;for(;++n;){const i=n-1,s=r[e+i],o=127&s;if(t|=o<<i*7,(s&128)===0)break}return[t,e+n]}}),Hue=(r={})=>Nj({config:r,name:"u32",range:[0,+"0xffffffff"],set:(e,t,n)=>e.setUint32(0,Number(t),n),size:4}),Wue=(r={})=>HR({config:r,get:(e,t)=>e.getUint32(0,t),name:"u32",size:4}),Gue=(r={})=>Nj({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),Yue=(r={})=>HR({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),Xue=(r={})=>Sj(Gue(r),Yue(r)),Jue=()=>HR({get:r=>r.getUint8(0),name:"u8",size:1});function Que(r,e,t){if(e!==t)throw new wn(hue,{actual:t,codecDescription:r,expected:e})}function xd(r){return r.reduce((e,t)=>e===null||t===null?null:e+t,0)}function Kg(r){return fa(r)?r.fixedSize:null}function Hg(r){return fa(r)?r.fixedSize:r.maxSize??null}function Zue(r,e={}){const t=e.size??Hue(),n=Sv(t,Kg(r)),i=Sv(t,Hg(r))??void 0;return Oa({...n!==null?{fixedSize:n}:{getSizeFromValue:s=>(typeof t=="object"?_v(s.length,t):0)+[...s].reduce((a,c)=>a+_v(c,r),0),maxSize:i},write:(s,o,a)=>(typeof t=="number"&&Que("array",t,s.length),typeof t=="object"&&(a=t.write(s.length,o,a)),s.forEach(c=>{a=r.write(c,o,a)}),a)})}function Fj(r,e={}){const t=e.size??Wue(),n=Kg(r),i=Sv(t,n),s=Sv(t,Hg(r))??void 0;return Is({...i!==null?{fixedSize:i}:{maxSize:s},read:(o,a)=>{const c=[];if(typeof t=="object"&&o.slice(a).length===0)return[c,a];if(t==="remainder"){for(;a<o.length;){const[f,h]=r.read(o,a);a=h,c.push(f)}return[c,a]}const[l,u]=typeof t=="number"?[t,a]:t.read(o,a);a=u;for(let f=0;f<l;f+=1){const[h,d]=r.read(o,a);a=d,c.push(h)}return[c,a]}})}function Sv(r,e){return typeof r!="number"?null:r===0?0:e===null?null:e*r}function Uj(){return Oa({getSizeFromValue:r=>r.length,write:(r,e,t)=>(e.set(r,t),t+r.length)})}function XO(){return Is({read:(r,e)=>{const t=r.slice(e);return[t,e+t.length]}})}function efe(r){const e=xd(r.map(Kg)),t=xd(r.map(Hg))??void 0;return Is({...e===null?{maxSize:t}:{fixedSize:e},read:(n,i)=>{const s=[];return r.forEach(o=>{const[a,c]=o.read(n,i);s.push(a),i=c}),[s,i]}})}function tfe(r){const e=r.map(([,i])=>i),t=xd(e.map(Kg)),n=xd(e.map(Hg))??void 0;return Oa({...t===null?{getSizeFromValue:i=>r.map(([s,o])=>_v(i[s],o)).reduce((s,o)=>s+o,0),maxSize:n}:{fixedSize:t},write:(i,s,o)=>(r.forEach(([a,c])=>{o=c.write(i[a],s,o)}),o)})}function rfe(r){const e=r.map(([,i])=>i),t=xd(e.map(Kg)),n=xd(e.map(Hg))??void 0;return Is({...t===null?{maxSize:n}:{fixedSize:t},read:(i,s)=>{const o={};return r.forEach(([a,c])=>{const[l,u]=c.read(i,s);s=u,o[a]=l}),[o,s]}})}var zj=Object.freeze({name:"Ed25519"});function nfe(r){return new Uint8Array([48,46,2,1,0,48,5,6,3,43,101,112,4,34,4,32,...r])}async function JO(r,e=!1){const t=r.byteLength;if(t!==32)throw new wn(nue,{actualLength:t});const n=nfe(r);return await crypto.subtle.importKey("pkcs8",n,zj,e,["sign"])}async function ife(r,e=!1){if(Dj(),r.extractable===!1)throw new wn(rue,{key:r});const t=await crypto.subtle.exportKey("jwk",r);return await crypto.subtle.importKey("jwk",{crv:"Ed25519",ext:e,key_ops:["verify"],kty:"OKP",x:t.x},"Ed25519",e,["verify"])}async function qj(r,e){Fue();const t=await crypto.subtle.sign(zj,r,e);return new Uint8Array(t)}async function sfe(r,e=!1){const t=JO(r,e),[n,i]=await Promise.all([(e?t:JO(r,!0)).then(async s=>await ife(s,!0)),t]);return{privateKey:i,publicKey:n}}var QO=128;function ofe(){return Is({maxSize:1,read:(r,e)=>{const t=r[e];return(t&QO)===0?["legacy",e]:[t^QO,e+1]}})}function afe(r){const e=Object.values(r);if(e.length===0)throw new wn(sue);return e.map(t=>t||new Uint8Array(64).fill(0))}function cfe(){return Cj(Zue(Aj(Uj(),64),{size:Kue()}),afe)}function jj(){return tfe([["signatures",cfe()],["messageBytes",Uj()]])}function Vj(){return Cue(rfe([["signatures",Fj(Ij(XO(),64),{size:Lj()})],["messageBytes",XO()]]),lfe)}function lfe(r){const{messageBytes:e,signatures:t}=r,n=efe([ofe(),Iue(Jue(),2),Fj(KR(),{size:Lj()})]),[i,s,o]=n.decode(e),a=o.slice(0,s);if(a.length!==t.length)throw new wn(oue,{numRequiredSignatures:s,signaturesLength:t.length,signerAddresses:a});const c={};return a.forEach((l,u)=>{const f=t[u];f.every(h=>h===0)?c[l]=null:c[l]=f}),{messageBytes:e,signatures:Object.freeze(c)}}function ufe(r,e){return r.length===e.length&&r.every((t,n)=>t===e[n])}async function Kj(r,e){let t,n;if(await Promise.all(r.map(async i=>{const s=await $j(i.publicKey),o=e.signatures[s];if(o===void 0){n||=new Set,n.add(s);return}if(n)return;const a=await qj(i.privateKey,e.messageBytes);o!==null&&ufe(a,o)||(t||={},t[s]=a)})),n&&n.size>0){const i=Object.keys(e.signatures);throw new wn(iue,{expectedAddresses:i,unexpectedAddresses:[...n]})}return t?Object.freeze({...e,signatures:Object.freeze({...e.signatures,...t})}):e}function ffe(r){const e=jj().encode(r);return Pj().decode(e)}async function hfe(r){const e=await $j(r.publicKey);return Object.freeze({address:e,keyPair:r,signMessages:n=>Promise.all(n.map(async i=>Object.freeze({[e]:await qj(r.privateKey,i.content)}))),signTransactions:n=>Promise.all(n.map(async i=>{const s=await Kj([r],i);return Object.freeze({[e]:s.signatures[e]})}))})}async function rd(r,e){return await hfe(await sfe(r,e))}var dfe=globalThis.TextEncoder;function pfe(r,e={}){return Object.freeze({content:typeof r=="string"?new dfe().encode(r):r,signatures:Object.freeze({...e})})}class Br{static unmarshalBase64(e){return $ue().encode(e)}static marshalBase64(e){return Pj().decode(e)}static unmarshalBase58(e){return Rj().encode(e)}static marshalBase58(e){return kj().decode(e)}static unmarshalHex(e){return Oue().encode(e)}static marshalHex(e){return Due().decode(e)}}class _d{static unmarshalTransaction(e){const t=typeof e=="string"?Br.unmarshalBase64(e):e;return Vj().decode(t)}static marshalTransaction(e,t){return jj().encode({messageBytes:e,signatures:t})}static appendSignature(e,t,n){const{messageBytes:i,signatures:s}=this.unmarshalTransaction(e);return this.marshalTransaction(i,{...s,[t]:n})}}var ZO=Object.prototype.hasOwnProperty;function VA(r,e){var t,n;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&VA(r[n],e[n]););return n===-1}if(!t||typeof r=="object"){n=0;for(t in r)if(ZO.call(r,t)&&++n&&!ZO.call(e,t)||!(t in e)||!VA(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!==r&&e!==e}const gfe=new Error("request for lock canceled");var mfe=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};class yfe{constructor(e,t=gfe){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((n,i)=>{const s={resolve:n,reject:i,weight:e,priority:t},o=Hj(this._queue,a=>t<=a.priority);o===-1&&e<=this._value?this._dispatchItem(s):this._queue.splice(o+1,0,s)})}runExclusive(e){return mfe(this,arguments,void 0,function*(t,n=1,i=0){const[s,o]=yield this.acquire(n,i);try{return yield t(s)}finally{o()}})}waitForUnlock(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(n=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),vfe(this._weightedWaiters[e-1],{resolve:n,priority:t})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){const t=this._weightedWaiters[e-1];t&&(t.forEach(n=>n.resolve()),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let t=this._value;t>0;t--){const n=this._weightedWaiters[t-1];if(!n)continue;const i=n.findIndex(s=>s.priority<=e);(i===-1?n:n.splice(0,i)).forEach(s=>s.resolve())}}}_couldLockImmediately(e,t){return(this._queue.length===0||this._queue[0].priority<t)&&e<=this._value}}function vfe(r,e){const t=Hj(r,n=>e.priority<=n.priority);r.splice(t+1,0,e)}function Hj(r,e){for(let t=r.length-1;t>=0;t--)if(e(r[t]))return t;return-1}var bfe=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};class WR{constructor(e){this._semaphore=new yfe(1,e)}acquire(){return bfe(this,arguments,void 0,function*(e=0){const[,t]=yield this._semaphore.acquire(1,e);return t})}runExclusive(e,t=0){return this._semaphore.runExclusive(()=>e(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const Ry=globalThis.browser?.runtime?.id==null?globalThis.chrome:globalThis.browser,Wj=wfe();function wfe(){const r={local:Lm("local"),session:Lm("session"),sync:Lm("sync"),managed:Lm("managed")},e=p=>{const m=r[p];if(m==null){const y=Object.keys(r).join(", ");throw Error(`Invalid area "${p}". Options: ${y}`)}return m},t=p=>{const m=p.indexOf(":"),y=p.substring(0,m),v=p.substring(m+1);if(v==null)throw Error(`Storage key should be in the form of "area:key", but received "${p}"`);return{driverArea:y,driverKey:v,driver:e(y)}},n=p=>p+"$",i=(p,m)=>{const y={...p};return Object.entries(m).forEach(([v,b])=>{b==null?delete y[v]:y[v]=b}),y},s=(p,m)=>p??m??null,o=p=>typeof p=="object"&&!Array.isArray(p)?p:{},a=async(p,m,y)=>{const v=await p.getItem(m);return s(v,y?.fallback??y?.defaultValue)},c=async(p,m)=>{const y=n(m),v=await p.getItem(y);return o(v)},l=async(p,m,y)=>{await p.setItem(m,y??null)},u=async(p,m,y)=>{const v=n(m),b=o(await p.getItem(v));await p.setItem(v,i(b,y))},f=async(p,m,y)=>{if(await p.removeItem(m),y?.removeMeta){const v=n(m);await p.removeItem(v)}},h=async(p,m,y)=>{const v=n(m);if(y==null)await p.removeItem(v);else{const b=o(await p.getItem(v));[y].flat().forEach(_=>delete b[_]),await p.setItem(v,b)}},d=(p,m,y)=>p.watch(m,y);return{getItem:async(p,m)=>{const{driver:y,driverKey:v}=t(p);return await a(y,v,m)},getItems:async p=>{const m=new Map,y=new Map,v=[];p.forEach(_=>{let x,E;typeof _=="string"?x=_:"getValue"in _?(x=_.key,E={fallback:_.fallback}):(x=_.key,E=_.options),v.push(x);const{driverArea:S,driverKey:C}=t(x),k=m.get(S)??[];m.set(S,k.concat(C)),y.set(x,E)});const b=new Map;return await Promise.all(Array.from(m.entries()).map(async([_,x])=>{(await r[_].getItems(x)).forEach(S=>{const C=`${_}:${S.key}`,k=y.get(C),$=s(S.value,k?.fallback??k?.defaultValue);b.set(C,$)})})),v.map(_=>({key:_,value:b.get(_)}))},getMeta:async p=>{const{driver:m,driverKey:y}=t(p);return await c(m,y)},getMetas:async p=>{const m=p.map(b=>{const _=typeof b=="string"?b:b.key,{driverArea:x,driverKey:E}=t(_);return{key:_,driverArea:x,driverKey:E,driverMetaKey:n(E)}}),y=m.reduce((b,_)=>(b[_.driverArea]??=[],b[_.driverArea].push(_),b),{}),v={};return await Promise.all(Object.entries(y).map(async([b,_])=>{const x=await Ry.storage[b].get(_.map(E=>E.driverMetaKey));_.forEach(E=>{v[E.key]=x[E.driverMetaKey]??{}})})),m.map(b=>({key:b.key,meta:v[b.key]}))},setItem:async(p,m)=>{const{driver:y,driverKey:v}=t(p);await l(y,v,m)},setItems:async p=>{const m={};p.forEach(y=>{const{driverArea:v,driverKey:b}=t("key"in y?y.key:y.item.key);m[v]??=[],m[v].push({key:b,value:y.value})}),await Promise.all(Object.entries(m).map(async([y,v])=>{await e(y).setItems(v)}))},setMeta:async(p,m)=>{const{driver:y,driverKey:v}=t(p);await u(y,v,m)},setMetas:async p=>{const m={};p.forEach(y=>{const{driverArea:v,driverKey:b}=t("key"in y?y.key:y.item.key);m[v]??=[],m[v].push({key:b,properties:y.meta})}),await Promise.all(Object.entries(m).map(async([y,v])=>{const b=e(y),_=v.map(({key:C})=>n(C));console.log(y,_);const x=await b.getItems(_),E=Object.fromEntries(x.map(({key:C,value:k})=>[C,o(k)])),S=v.map(({key:C,properties:k})=>{const $=n(C);return{key:$,value:i(E[$]??{},k)}});await b.setItems(S)}))},removeItem:async(p,m)=>{const{driver:y,driverKey:v}=t(p);await f(y,v,m)},removeItems:async p=>{const m={};p.forEach(y=>{let v,b;typeof y=="string"?v=y:"getValue"in y?v=y.key:"item"in y?(v=y.item.key,b=y.options):(v=y.key,b=y.options);const{driverArea:_,driverKey:x}=t(v);m[_]??=[],m[_].push(x),b?.removeMeta&&m[_].push(n(x))}),await Promise.all(Object.entries(m).map(async([y,v])=>{await e(y).removeItems(v)}))},clear:async p=>{await e(p).clear()},removeMeta:async(p,m)=>{const{driver:y,driverKey:v}=t(p);await h(y,v,m)},snapshot:async(p,m)=>{const v=await e(p).snapshot();return m?.excludeKeys?.forEach(b=>{delete v[b],delete v[n(b)]}),v},restoreSnapshot:async(p,m)=>{await e(p).restoreSnapshot(m)},watch:(p,m)=>{const{driver:y,driverKey:v}=t(p);return d(y,v,m)},unwatch(){Object.values(r).forEach(p=>{p.unwatch()})},defineItem:(p,m)=>{const{driver:y,driverKey:v}=t(p),{version:b=1,migrations:_={}}=m??{};if(b<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const x=async()=>{const $=n(v),[{value:J},{value:j}]=await y.getItems([v,$]);if(J==null)return;const L=j?.v??1;if(L>b)throw Error(`Version downgrade detected (v${L} -> v${b}) for "${p}"`);if(L===b)return;console.debug(`[@wxt-dev/storage] Running storage migration for ${p}: v${L} -> v${b}`);const w=Array.from({length:b-L},(N,Y)=>L+Y+1);let R=J;for(const N of w)try{R=await _?.[N]?.(R)??R}catch(Y){throw new xfe(p,N,{cause:Y})}await y.setItems([{key:v,value:R},{key:$,value:{...j,v:b}}]),console.debug(`[@wxt-dev/storage] Storage migration completed for ${p} v${b}`,{migratedValue:R})},E=m?.migrations==null?Promise.resolve():x().catch($=>{console.error(`[@wxt-dev/storage] Migration failed for ${p}`,$)}),S=new WR,C=()=>m?.fallback??m?.defaultValue??null,k=()=>S.runExclusive(async()=>{const $=await y.getItem(v);if($!=null||m?.init==null)return $;const J=await m.init();return await y.setItem(v,J),J});return E.then(k),{key:p,get defaultValue(){return C()},get fallback(){return C()},getValue:async()=>(await E,m?.init?await k():await a(y,v,m)),getMeta:async()=>(await E,await c(y,v)),setValue:async $=>(await E,await l(y,v,$)),setMeta:async $=>(await E,await u(y,v,$)),removeValue:async $=>(await E,await f(y,v,$)),removeMeta:async $=>(await E,await h(y,v,$)),watch:$=>d(y,v,(J,j)=>$(J??C(),j??C())),migrate:x}}}}function Lm(r){const e=()=>{if(Ry.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(Ry.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const n=Ry.storage[r];if(n==null)throw Error(`"browser.storage.${r}" is undefined`);return n},t=new Set;return{getItem:async n=>(await e().get(n))[n],getItems:async n=>{const i=await e().get(n);return n.map(s=>({key:s,value:i[s]??null}))},setItem:async(n,i)=>{i==null?await e().remove(n):await e().set({[n]:i})},setItems:async n=>{const i=n.reduce((s,{key:o,value:a})=>(s[o]=a,s),{});await e().set(i)},removeItem:async n=>{await e().remove(n)},removeItems:async n=>{await e().remove(n)},clear:async()=>{await e().clear()},snapshot:async()=>await e().get(),restoreSnapshot:async n=>{await e().set(n)},watch(n,i){const s=o=>{const a=o[n];a!=null&&(VA(a.newValue,a.oldValue)||i(a.newValue??null,a.oldValue??null))};return e().onChanged.addListener(s),t.add(s),()=>{e().onChanged.removeListener(s),t.delete(s)}},unwatch(){t.forEach(n=>{e().onChanged.removeListener(n)}),t.clear()}}}class xfe extends Error{constructor(e,t,n){super(`v${t} migration failed for "${e}"`,n),this.key=e,this.version=t}}class _fe{#e=new WR;#t=Wj.defineItem("local:privy_sdk",{init:()=>({})});async get(e){return this.#e.runExclusive(async()=>(await this.#t.getValue())[e])}async put(e,t){return this.#e.runExclusive(async()=>{const n=await this.#t.getValue();n[e]=t,await this.#t.setValue(n)})}async del(e){return this.#e.runExclusive(async()=>{const t=await this.#t.getValue();delete t[e],await this.#t.setValue(t)})}async getKeys(){return this.#e.runExclusive(async()=>{const e=await this.#t.getValue();return Object.keys(e)})}}class Fm{static#e=new WR;static#t=Wj.defineItem("local:privy_user",{init:()=>null});static async get(){return this.#e.runExclusive(async()=>this.#t.getValue())}static async set(e){return this.#e.runExclusive(async()=>this.#t.setValue(e))}}class Wg{static#e="cm8pkejey0052l1ljvgxjztau";static#t=["https://auth.privy.io","https://wallet.privy.io","https://api.privy.io"];static#r=new Wle({appId:this.#e,storage:new _fe,clientId:"client-WY5i3gLn3XiKAEXk8hFjvfSJBfBsUXa2cWs6wSbm2qeKZ"});static#n=!1;static async initEmbeddedWallet(){if(this.#n)return;const e=document.createElement("iframe");if(e.src=this.#r.embeddedWallet.getURL(),e.style.display="none",e.style.position="absolute",e.style.width="0",e.style.height="0",e.style.border="none",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),await new Promise(t=>e.onload=t),e.contentWindow){this.#r.setMessagePoster(e.contentWindow);const t=n=>{this.#t.some(s=>s===n.origin)?this.#r.embeddedWallet.onMessage(n.data):console.warn("Rejected message from invalid origin:",n.origin)};window.addEventListener("message",t)}else console.warn("iframe.contentWindow is null - embedded wallet may not work properly");this.#n=!0}static async getAuthenticatedUser(e){if(e)return Fm.get();try{const{user:t}=await this.#r.user.get();return await Fm.set(t),t}catch{return null}}static async login(e){const{url:t}=await this.#r.auth.oauth.generateURL(e,`https://${bo.runtime.id}.chromiumapp.org`),n=await bo.identity.launchWebAuthFlow({url:t,interactive:!0});if(bo.runtime.lastError)throw new Error(bo.runtime.lastError.message);if(!n)throw new Error("OAuth cancelled or failed");const{searchParams:i}=new URL(n),s=i.get("privy_oauth_code")||i.get("code"),o=i.get("privy_oauth_state")||i.get("state");if(!s||!o)throw new Error("Missing authorization code or state");const{user:a}=await this.#r.auth.oauth.loginWithCode(s,o,e);return await Fm.set(a),a}static async findLinkedAccount(e){const t=await this.getAuthenticatedUser(!0);if(!t)throw new Error("User not logged in yet");switch(e){case"google":return t.linked_accounts.find(n=>n.type==="google_oauth");case"apple":return t.linked_accounts.find(n=>n.type==="apple_oauth");case"twitter":return t.linked_accounts.find(n=>n.type==="twitter_oauth");case"discord":return t.linked_accounts.find(n=>n.type==="discord_oauth")}}static async getSolanaWallet(){const e=await this.getAuthenticatedUser(!0);if(!e)throw new Error("User not logged in yet");const t=xv(e);if(t)return t;await this.initEmbeddedWallet();const{user:n}=await this.#r.embeddedWallet.createSolana();await Fm.set(n);const i=xv(n);if(!i)throw new Error("Failed to create Solana wallet");return i}static async sign(e){const t=await this.getAuthenticatedUser(!0);if(!t)throw new Error("User not logged in yet");const n=await this.getSolanaWallet();if(!n)throw new Error("Could not get Solana wallet");const i=Gle(t);if(!i)throw new Error("Could not get entropy details");await this.initEmbeddedWallet();const s=await this.#r.embeddedWallet.getSolanaProvider(n,i.entropyId,i.entropyIdVerifier),{signature:o}=await s.request({method:"signMessage",params:{message:e}});return{signerAddress:n.address,signature:o}}static async signMessage(e){const{signature:t}=await this.sign(e);return t}static async signTransaction(e){const{messageBytes:t,signatures:n}=_d.unmarshalTransaction(e),{signature:i,signerAddress:s}=await this.sign(Br.marshalBase64(t)),o=_d.marshalTransaction(t,{...n,[s]:Br.unmarshalBase64(i)});return Br.marshalBase64(o)}}var Sfe=ye("<div>");const Gj=r=>{const e=qs(()=>({queryKey:["prive_provider",r.account.address],queryFn:async()=>{if(r.account.type!=="privy")return null;const n=(await Wg.getAuthenticatedUser(!0))?.linked_accounts.map(i=>i.type);return n?.includes("google_oauth")?"i-tabler:brand-google":n?.includes("apple_oauth")?"i-tabler:brand-apple":n?.includes("twitter_oauth")?"i-tabler:brand-x":n?.includes("discord_oauth")?"i-tabler:brand-discord":null}}));return D(We,{get when(){return e.data},children:t=>(()=>{var n=Sfe();return bn(n,st(r,{get class(){return Xr(t(),r.class)}}),!1,!1),n})()})};var Efe=ye('<svg viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd clip-rule=evenodd d="M5.535 7.74707H18.466V17.7866L12.0005 20.75L5.535 17.7866V7.74707ZM6.97178 9.18385V16.8646L12.0005 19.1694L17.0292 16.8646V9.18385H6.97178Z"></path><path fill-rule=evenodd clip-rule=evenodd d="M12.0005 3.43678C10.6415 3.43678 9.48618 4.59769 9.48618 6.0974L9.48616 7.73863H14.5149V6.0974C14.5149 4.59769 13.3595 3.43678 12.0005 3.43678ZM15.9517 8.45701V6.0974C15.9517 3.86476 14.2123 2 12.0005 2C9.78875 2 8.0494 3.86476 8.0494 6.0974L8.04936 8.45661L8.04932 9.17541H15.9517V8.45701Z">');const GR=r=>(()=>{var e=Efe();return bn(e,r,!0,!0),e})();var Afe=ye("<svg fill=none role=img xmlns=http://www.w3.org/2000/svg><mask maskUnits=userSpaceOnUse x=0 y=0><rect fill=#FFFFFF></rect></mask><g><rect></rect><rect x=0 y=0></rect><g><rect y=14 width=1.5 height=2 rx=1 stroke=none></rect><rect y=14 width=1.5 height=2 rx=1 stroke=none>"),Ife=ye("<title>"),Cfe=ye("<svg><path fill=none stroke-linecap=round></svg>",!1,!0,!1),Tfe=ye("<svg><path></svg>",!1,!0,!1);const Rfe=r=>{const e=ke(()=>"mask"+Yj(r.name)),t=ke(()=>Pfe(r.name,r.colors));return(()=>{var n=Afe(),i=n.firstChild,s=i.firstChild,o=i.nextSibling,a=o.firstChild,c=a.nextSibling,l=c.nextSibling,u=l.firstChild,f=u.nextSibling;return Mr(n,"viewBox","0 0 "+Mn+" "+Mn),bn(n,st({get width(){return r.size},get height(){return r.size}},r),!0,!0),ce(n,(()=>{var h=Or(()=>!!r.title);return()=>h()&&(()=>{var d=Ife();return ce(d,()=>r.name),d})()})(),i),Mr(i,"width",Mn),Mr(i,"height",Mn),Mr(s,"width",Mn),Mr(s,"height",Mn),Mr(a,"width",Mn),Mr(a,"height",Mn),Mr(c,"width",Mn),Mr(c,"height",Mn),ce(l,(()=>{var h=Or(()=>!!t().isMouthOpen);return()=>h()?(()=>{var d=Cfe();return ht(g=>{var p="M15 "+(19+t().mouthSpread)+"c2 1 4 1 6 0",m=t().faceColor;return p!==g.e&&Mr(d,"d",g.e=p),m!==g.t&&Mr(d,"stroke",g.t=m),g},{e:void 0,t:void 0}),d})():(()=>{var d=Tfe();return ht(g=>{var p="M13,"+(19+t().mouthSpread)+" a1,0.75 0 0,0 10,0",m=t().faceColor;return p!==g.e&&Mr(d,"d",g.e=p),m!==g.t&&Mr(d,"fill",g.t=m),g},{e:void 0,t:void 0}),d})()})(),u),ht(h=>{var d=e(),g=r.square?void 0:Mn*2,p=`url(#${e()})`,m=t().backgroundColor,y="translate("+t().wrapperTranslateX+" "+t().wrapperTranslateY+") rotate("+t().wrapperRotate+" "+Mn/2+" "+Mn/2+") scale("+t().wrapperScale+")",v=t().wrapperColor,b=t().isCircle?Mn:Mn/6,_="translate("+t().faceTranslateX+" "+t().faceTranslateY+") rotate("+t().faceRotate+" "+Mn/2+" "+Mn/2+")",x=14-t().eyeSpread,E=t().faceColor,S=20+t().eyeSpread,C=t().faceColor;return d!==h.e&&Mr(i,"id",h.e=d),g!==h.t&&Mr(s,"rx",h.t=g),p!==h.a&&Mr(o,"mask",h.a=p),m!==h.o&&Mr(a,"fill",h.o=m),y!==h.i&&Mr(c,"transform",h.i=y),v!==h.n&&Mr(c,"fill",h.n=v),b!==h.s&&Mr(c,"rx",h.s=b),_!==h.h&&Mr(l,"transform",h.h=_),x!==h.r&&Mr(u,"x",h.r=x),E!==h.d&&Mr(u,"fill",h.d=E),S!==h.l&&Mr(f,"x",h.l=S),C!==h.u&&Mr(f,"fill",h.u=C),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),n})()},Yj=r=>{let e=0;for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);e=(e<<5)-e+n,e=e&e}return Math.abs(e)},Xj=(r,e)=>Math.floor(r/Math.pow(10,e)%10),e4=(r,e)=>!(Xj(r,e)%2),Oc=(r,e,t)=>{const n=r%e;return t&&Xj(r,t)%2===0?-n:n},t4=(r,e,t)=>e[r%t],kfe=r=>{r.slice(0,1)==="#"&&(r=r.slice(1));const e=parseInt(r.substr(0,2),16),t=parseInt(r.substr(2,2),16),n=parseInt(r.substr(4,2),16);return(e*299+t*587+n*114)/1e3>=128?"#000000":"#FFFFFF"},Mn=36;function Pfe(r,e){const t=Yj(r),n=e&&e.length,i=t4(t,e,n),s=Oc(t,10,1),o=s<5?s+Mn/9:s,a=Oc(t,10,2),c=a<5?a+Mn/9:a;return{wrapperColor:i,faceColor:kfe(i),backgroundColor:t4(t+13,e,n),wrapperTranslateX:o,wrapperTranslateY:c,wrapperRotate:Oc(t,360),wrapperScale:1+Oc(t,Mn/12)/10,isMouthOpen:e4(t,2),isCircle:e4(t,1),eyeSpread:Oc(t,5),mouthSpread:Oc(t,3),faceRotate:Oc(t,10,3),faceTranslateX:o>Mn/6?o/2:Oc(t,8,1),faceTranslateY:c>Mn/6?c/2:Oc(t,7,2)}}const Gg=r=>D(Rfe,{get name(){return r.id},colors:["#1F5739","#A4D756","#00A57F","#C7F284"],get class(){return Xr("size-8",r.class)}}),Jj=()=>{const{updateUserSettings:r}=Pa();return{useStandaloneMode:i=>{const s=i?`${new URL(document.URL).origin}/popup.html#${i}`:document.URL.replace("sidepanel.html","popup.html");window.open(s,"_blank"),window.close()},useSidepanelMode:async()=>{await r({type:"setUiMode",mode:"sidepanel"});const i=(await bo.windows.getCurrent()).id??-1;await bo.sidePanel.open({windowId:i}),xf!==oc.WINDOW&&window.close()},usePopupMode:async()=>{await r({type:"setUiMode",mode:"popup"}),await bo.action.openPopup(),xf===oc.WINDOW?await bo.sidePanel.setOptions({enabled:!1}):window.close()}}},bl=r=>{const e=Co();return()=>{xf===oc.SIDE_PANEL||window.history.length>1?e(-1):e(vt.HOME)}};var Ofe=ye('<nav class="h-[3.25rem] ring-0.5 ring-zinc-700 flex items-center bg-zinc-900">'),Dfe=ye('<div class="flex items-center gap-2"><div class=font-semibold>Jupiter Wallet'),$fe=ye('<div class="size-4.5 i-tabler:spy text-zinc-400 ml-1 mr--1">'),Mfe=ye('<div class="i-tabler:chevron-down size-4.5 text-zinc-500 group-hover:text-zinc-300 transition-100 ml-2">'),Bfe=ye('<button class="h-full pl-4 pr-3 flex items-center transition-100 group"><div class="font-semibold pl-3">'),Nfe=ye("<div class=flex-1>"),Lfe=ye('<div class="i-tabler:dots-vertical size-5">'),r4=ye("<div>");const Ffe=()=>{const r=Ff(),e=Co(),t=bl(),{settings:n}=Pa(),{selectedAccount:i,lock:s}=Jr(),{useStandaloneMode:o,useSidepanelMode:a,usePopupMode:c}=Jj(),l=ke(()=>{if(!(r.pathname===vt.ONBOARD||r.pathname===vt.ROOT||r.pathname===vt.UNLOCK))return i()}),u=ke(()=>r.pathname===vt.HOME||r.pathname===vt.RECEIVE||r.pathname===vt.SEND||r.pathname===vt.SWAP||r.pathname===vt.SETTINGS||r.pathname===vt.PNL||r.pathname.startsWith(vt.ACCOUNTS)||r.pathname.startsWith(vt.ASSETS(""))),f=ke(()=>[{title:"Settings",icon:"i-tabler:settings",onClick:()=>{e(vt.SETTINGS)}},n.uiMode==="popup"?{title:"Side Panel Mode",icon:"i-tabler:layout-sidebar-right",onClick:()=>a()}:{title:"Popup Mode",icon:"i-tabler:picture-in-picture-top",onClick:()=>c()},{title:"Expand View",icon:"i-tabler:arrows-diagonal",onClick:()=>o()},{title:"Jupiter Sync",icon:"i-tabler:device-mobile-bolt",onClick:()=>{o(`${vt.ONBOARD}?type=jupiter-sync`)}},{title:"Lock Wallet",icon:"i-tabler:lock-password",onClick:()=>{s()}}]);return(()=>{var h=Ofe();return ce(h,D(We,{get when(){return l()},get fallback(){return(()=>{var d=Dfe(),g=d.firstChild;return ce(d,D(Lg,{class:"size-7 rounded-full"}),g),d})()},children:d=>[(()=>{var g=Bfe(),p=g.firstChild;return g.$$click=()=>r.pathname.startsWith(vt.ACCOUNTS)?t():e(vt.ACCOUNTS),ce(g,D(Gg,{get id(){return d().address},class:"size-6.5"}),p),ce(p,()=>d().label),ce(g,D(yr,{get children(){return[D(Ne,{get when(){return d().type==="readonly"},get children(){return $fe()}}),D(Ne,{get when(){return d().type==="ledger"},get children(){return D(pR,{class:"size-4 fill-zinc-400 ml-1.5"})}}),D(Ne,{get when(){return d().type==="keystone"},get children(){return D(dR,{class:"size-5 fill-zinc-400 ml-1 mr--1"})}}),D(Ne,{get when(){return d().type==="trezor"},get children(){return D(GR,{class:"size-5 fill-zinc-400 ml-1 mr--1"})}}),D(Ne,{get when(){return d().type==="privy"},get children(){return D(Gj,{class:"size-4 text-zinc-400 ml-1 mr--1",get account(){return d()}})}})]}}),null),ce(g,D(We,{get when(){return u()},get children(){return Mfe()}}),null),ht(m=>{var y={"cursor-pointer hover:bg-zinc-800 hover:text-zinc-100":u()},v=!u();return m.e=Gr(g,y,m.e),v!==m.t&&(g.disabled=m.t=v),m},{e:void 0,t:void 0}),g})(),Nfe(),D(ts.Root,{get children(){return[D(ts.Trigger,{class:"cursor-pointer text-zinc-400 hover:text-zinc-50 transition-100 px-3 h-full hover:bg-zinc-800",get classList(){return{hidden:!u()}},get disabled(){return!u()},get children(){return Lfe()}}),D(ts.Portal,{get children(){return D(ts.Content,{class:"z-100 text-base bg-zinc-900 rounded ring-1 ring-zinc-700",get children(){return D(Lt,{get each(){return f()},children:({title:g,icon:p,onClick:m})=>D(ts.Item,{as:"button",class:"cursor-pointer flex items-center gap-3 p-3 hover:bg-zinc-800 rounded w-full",onClick:m,get children(){return[(()=>{var y=r4();return ht(()=>ui(y,Xr(p,"size-5"))),y})(),(()=>{var y=r4();return ce(y,g),y})()]}})})}})}})]}})]})),h})()};Yt(["click"]);var Ufe=ye('<div class="flex flex-col">');const zfe=r=>{const e=Ff(),{isReady:t}=Jr(),n=ke(()=>e.pathname.startsWith(vt.ONBOARD)||e.pathname===vt.UNLOCK);return[D(q7,{get isVisible(){return!t()}}),D(We,{get when(){return!n()},get children(){return D(Ffe,{})}}),(()=>{var i=Ufe();return ce(i,()=>r.children),ht(s=>Gr(i,{"min-h-100%":n(),"min-h-[calc(100%-3.25rem)] ring-0.5 ring-zinc-700":!n()},s)),i})(),Or(()=>Or(()=>!1)()&&D(Wre,{}))]};var qfe=ye('<div class="i-tabler:x size-5">'),jfe=ye('<div class="flex items-center justify-between border-b border-zinc-700 p-4">'),Vfe=ye('<div class="text-zinc-400 leading-5">On the next screen, your private key will be revealed.'),Kfe=ye('<div class="bg-zinc-950 ring-1 ring-zinc-800 p-4 rounded-md text-zinc-300 space-y-5">'),Hfe=ye('<form><input class="ring-1 ring-zinc-700 focus:ring-primary-200 w-full outline-none rounded-md p-3 bg-zinc-800 transition-100"placeholder="Confirm password to continue"type=password id=password-input name=password-input><div class="mt-3 flex justify-between gap-3"><button class="flex-1 cursor-pointer p-2.5 rounded-md bg-zinc-800 font-semibold active:bg-zinc-800/75 transition-100"type=reset>Cancel</button><button class="flex-1 cursor-pointer p-2.5 rounded-md bg-red-500 font-semibold active:bg-red-700 transition-100"type=submit>Reveal'),Wfe=ye('<div class="fixed inset-0 flex items-center justify-center">'),Gfe=ye('<div class="flex items-center gap-3"><div class="flex-none size-6 i-tabler:alert-triangle text-red-500"></div><div class=leading-5>');const n4="password-input",Yfe=r=>{const e=Ws(),[t,n]=$e(!0);async function i(o){o.preventDefault();const c=new FormData(o.target).get(n4)?.toString().trim()||"";if(!(!c||!r.address))try{const l=await _r.export({password:c,address:r.address});r.onConfirm(l),n(!1)}catch{e.alert({title:"Incorrect Password",content:"The password you entered is incorrect."})}}function s(o){o||r.onExit()}return Dr(()=>document.getElementById(n4)?.focus()),D(Hn,{get open(){return t()},onOpenChange:s,get children(){return D(Hn.Portal,{get children(){return[D(Hn.Overlay,{class:"fixed inset-0 backdrop-blur"}),(()=>{var o=Wfe();return ce(o,D(Hn.Content,{class:"bg-zinc-900 rounded-md max-w-95vw w-md ring-1 ring-zinc-700",get children(){return[(()=>{var a=jfe();return ce(a,D(Hn.Title,{class:"font-semibold",get children(){return r.title??"Confirm Password"}}),null),ce(a,D(Hn.CloseButton,{class:"cursor-pointer bg-zinc-900 hover:bg-zinc-950 p-2 rounded-md -m-2 transition-100 text-zinc-500 hover:text-zinc-200",get children(){return qfe()}}),null),a})(),D(Hn.Description,{class:"p-4 space-y-4",get children(){return[Vfe(),(()=>{var a=Kfe();return ce(a,D(Lt,{each:["Anyone with your keys will have complete control of your wallet","Never share your keys with any app or website","Jupiter will never ask you for your keys"],children:c=>(()=>{var l=Gfe(),u=l.firstChild,f=u.nextSibling;return ce(f,c),l})()})),a})(),(()=>{var a=Hfe(),c=a.firstChild,l=c.nextSibling,u=l.firstChild;return a.addEventListener("submit",f=>i(f)),u.$$click=()=>r.onExit(),a})()]}})]}})),o})()]}})}})};Yt(["click"]);var Xfe=ye('<div><button class="flex items-center gap-2 h-6 cursor-pointer group transition-100"><div class="text-zinc-500 group-hover:text-zinc-200 flex items-center justify-center transition-100"><div class="i-tabler:arrow-left size-5"></div></div><div class="font-semibold text-zinc-200">');const Ys=r=>{const e=bl();return(()=>{var t=Xfe(),n=t.firstChild,i=n.firstChild,s=i.nextSibling;return n.$$click=()=>r.onBack?.()||e(),ce(s,()=>r.title),t})()};Yt(["click"]);var Jfe=ye('<div class="p-3 h-48 bg-zinc-900 rounded-xl">'),Qfe=ye('<div class="p-4 space-y-4"><div class="flex items-center gap-2"><div class="text-zinc-400 text-sm bg-zinc-900 rounded-md h-6 px-1.5 flex items-center">'),Zfe=ye('<div class=space-y-3><div><div class=text-zinc-400>Address</div><div class="bg-zinc-900 py-3 px-4 rounded-xl whitespace-pre-wrap break-all select-all"></div></div><div><div class=text-zinc-400>Private Key (Base 58)</div><div class="bg-zinc-900 py-3 px-4 rounded-xl whitespace-pre-wrap break-all select-all"></div></div><div><div class=text-zinc-400>Private Key (Base 64)</div><div class="bg-zinc-900 py-3 px-4 rounded-xl whitespace-pre-wrap break-all select-all">'),ehe=ye('<div><div class="flex items-center justify-between"><div class=text-zinc-400>Seed Phrase</div><div class="text-sm text-zinc-400"></div></div><div class="bg-zinc-900 p-3 rounded-xl whitespace-pre-wrap select-all">');const the=()=>{const r=db(),e=bl(),{accounts:t}=Jr(),n=ke(()=>t().find(o=>o.address===r.address)),[i,s]=$e();return[D(Yfe,{title:"Export Key",get address(){return n()?.address},onConfirm:o=>s(o),onExit:e}),(()=>{var o=Qfe(),a=o.firstChild,c=a.firstChild;return ce(a,D(Ys,{title:"Export Key"}),c),ce(c,()=>n()?.label),ce(o,D(yr,{get children(){return[D(Ne,{get when(){return!i()},get children(){return Jfe()}}),D(Ne,{get when(){return i()},keyed:!0,children:l=>(()=>{var u=Zfe(),f=u.firstChild,h=f.firstChild,d=h.nextSibling,g=f.nextSibling,p=g.firstChild,m=p.nextSibling,y=g.nextSibling,v=y.firstChild,b=v.nextSibling;return ce(d,()=>n()?.address),ce(m,()=>Br.marshalBase58(Br.unmarshalBase64(l.privateKey))),ce(b,()=>l.privateKey),ce(u,D(We,{get when(){return l.type==="mnemonic"&&l},keyed:!0,children:_=>(()=>{var x=ehe(),E=x.firstChild,S=E.firstChild,C=S.nextSibling,k=E.nextSibling;return ce(C,()=>_.path),ce(k,()=>_.mnemonic),x})()}),null),u})()})]}}),null),o})()]};var rhe=ye('<div><div class="w-full h-14.5"></div><div class="fixed bottom-0 left-0 w-full flex justify-center z-1"><div class="flex items-center gap-4 grid grid-cols-2 font-semibold w-full max-w-md border-t border-zinc-700 bg-zinc-950 p-4"><button class="p-2.25 bg-zinc-800 rounded-xl cursor-pointer text-zinc-300 active:bg-zinc-800/75 transition-100"type=reset></button><button class="p-2.25 rounded-xl transition-100"type=submit>');const fs=r=>(()=>{var e=rhe(),t=e.firstChild,n=t.nextSibling,i=n.firstChild,s=i.firstChild,o=s.nextSibling;return s.$$click=()=>r.onCancelClick(),ce(s,()=>r.cancelTitle??"Cancel"),o.$$click=()=>r.onApproveClick(),ce(o,()=>r.approveTitle??"Approve"),ht(a=>{var c={"cursor-pointer bg-primary-200 active:bg-primary-200/80 text-zinc-950":!r.isApproveDisabled,"cursor-not-allowed bg-zinc-900 text-zinc-500":r.isApproveDisabled},l=r.isApproveDisabled;return a.e=Gr(o,c,a.e),l!==a.t&&(o.disabled=a.t=l),a},{e:void 0,t:void 0}),e})();Yt(["click"]);var nhe=ye("<span>");const Yo=r=>(()=>{var e=nhe(),t=e.firstChild;return bn(e,r,!1,!0),ce(e,()=>r.address.slice(0,5),t),ce(e,()=>r.address.slice(-5),null),e})();var ihe=ye('<div class="p-4 space-y-4"><div class="flex items-center gap-2"><div class="text-zinc-400 text-sm bg-zinc-900 rounded-md h-6 px-1.5 flex items-center"></div></div><div class="space-y-3 rounded"><div class=text-zinc-400><label>Current Name</label><div class="bg-zinc-900/80 rounded-xl py-3 px-4 cursor-not-allowed"></div></div><form><div class="flex flex-col text-zinc-400"><label for=wallet-name-input>New Name</label><input class="ring-1 ring-zinc-700 focus:ring-primary-200 w-full outline-none rounded-xl py-3 px-4 bg-zinc-900 transition-100 text-zinc-50"placeholder="eg. Trading, Savings, Investments"id=wallet-name-input name=wallet-name-input maxlength=16>');const i4="wallet-name-input",she=()=>{const r=db(),e=bl(),{updateUserSettings:t}=Pa(),{refresh:n,accounts:i}=Jr(),s=ke(()=>i().find(a=>a.address===r.address));async function o(a,c){a.preventDefault();const u=new FormData(a.target).get(i4)?.toString().trim()||"";!u||!c||(await t({type:"setAccountLabel",address:c,label:u}),await n(),e())}return Dr(()=>document.getElementById(i4)?.focus()),(()=>{var a=ihe(),c=a.firstChild,l=c.firstChild,u=c.nextSibling,f=u.firstChild,h=f.firstChild,d=h.nextSibling,g=f.nextSibling,p=g.firstChild,m=p.firstChild;return m.nextSibling,ce(c,D(Ys,{title:"Rename Wallet"}),l),ce(l,D(Yo,{get address(){return s()?.address??""}})),ce(d,()=>s()?.label),g.addEventListener("submit",y=>o(y,s()?.address)),ce(g,D(fs,{onCancelClick:e,onApproveClick:()=>{},approveTitle:"Rename"}),null),a})()};var Jb=class{x;y;width;height;constructor(e){this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},D0=r=>{let e=new Jb(r.getBoundingClientRect());const{transform:t}=getComputedStyle(r);return t&&(e=ohe(e,t)),e},ohe=(r,e)=>{let t,n;if(e.startsWith("matrix3d(")){const i=e.slice(9,-1).split(/, /);t=+i[12],n=+i[13]}else if(e.startsWith("matrix(")){const i=e.slice(7,-1).split(/, /);t=+i[4],n=+i[5]}else t=0,n=0;return new Jb({...r,x:r.x-t,y:r.y-n})},ma=()=>({x:0,y:0}),YR=(r,e)=>r.x===e.x&&r.y===e.y,ox=(r,e)=>new Jb({...r,x:r.x+e.x,y:r.y+e.y}),ahe=(r,e)=>Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2)),che=(r,e)=>{const t=Math.max(r.top,e.top),n=Math.max(r.left,e.left),i=Math.min(r.right,e.right),s=Math.min(r.bottom,e.bottom),o=i-n,a=s-t;if(n<i&&t<s){const c=r.width*r.height,l=e.width*e.height,u=o*a;return u/(c+l-u)}return 0},ax=(r,e)=>r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height,lhe=(r,e,t)=>{const n=r.transformed.center,i={distance:1/0,droppable:null};for(const s of e){const o=ahe(n,s.layout.center);o<i.distance?(i.distance=o,i.droppable=s):o===i.distance&&s.id===t.activeDroppableId&&(i.droppable=s)}return i.droppable},uhe=(r,e,t)=>{const n=r.transformed,i={ratio:0,droppable:null};for(const s of e){const o=che(n,s.layout);o>i.ratio?(i.ratio=o,i.droppable=s):o>0&&o===i.ratio&&s.id===t.activeDroppableId&&(i.droppable=s)}return i.droppable},Qj=nn(),fhe=r=>{const e=st({collisionDetector:uhe},r),[t,n]=zf({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return t.active.draggableId!==null?t.draggables[t.active.draggableId]:null},droppableId:null,get droppable(){return t.active.droppableId!==null?t.droppables[t.active.droppableId]:null},sensorId:null,get sensor(){return t.active.sensorId!==null?t.sensors[t.active.sensorId]:null},overlay:null}}),i=(w,R,N)=>{w.substring(0,w.length-1),br(()=>t[w][R])&&n(w,R,"transformers",N.id,N)},s=(w,R,N)=>{w.substring(0,w.length-1),br(()=>t[w][R])&&br(()=>t[w][R].transformers[N])&&n(w,R,"transformers",N,void 0)},o=({id:w,node:R,layout:N,data:Y})=>{const z=t.draggables[w],G={id:w,node:R,layout:N,data:Y,_pendingCleanup:!1};let te;if(!z)Object.defineProperties(G,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(t.active.overlay)return ma();const X=Object.values(t.draggables[w].transformers);return X.sort((T,A)=>T.order-A.order),X.reduce((T,A)=>A.callback(T),ma())}},transformed:{enumerable:!0,configurable:!0,get:()=>ox(t.draggables[w].layout,t.draggables[w].transform)}});else if(t.active.draggableId===w&&!t.active.overlay){const X={x:z.layout.x-N.x,y:z.layout.y-N.y},T="addDraggable-existing-offset",A=z.transformers[T],O=A?A.callback(X):X;te={id:T,order:100,callback:I=>({x:I.x+O.x,y:I.y+O.y})},J(()=>s("draggables",w,T))}ai(()=>{n("draggables",w,G),te&&i("draggables",w,te)}),t.active.draggable&&_()},a=w=>{br(()=>t.draggables[w])&&(n("draggables",w,"_pendingCleanup",!0),queueMicrotask(()=>c(w)))},c=w=>{if(t.draggables[w]?._pendingCleanup){const R=t.active.draggableId===w;ai(()=>{R&&n("active","draggableId",null),n("draggables",w,void 0)})}},l=({id:w,node:R,layout:N,data:Y})=>{const z=t.droppables[w],G={id:w,node:R,layout:N,data:Y,_pendingCleanup:!1};z||Object.defineProperties(G,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const te=Object.values(t.droppables[w].transformers);return te.sort((X,T)=>X.order-T.order),te.reduce((X,T)=>T.callback(X),ma())}},transformed:{enumerable:!0,configurable:!0,get:()=>ox(t.droppables[w].layout,t.droppables[w].transform)}}),n("droppables",w,G),t.active.draggable&&_()},u=w=>{br(()=>t.droppables[w])&&(n("droppables",w,"_pendingCleanup",!0),queueMicrotask(()=>f(w)))},f=w=>{if(t.droppables[w]?._pendingCleanup){const R=t.active.droppableId===w;ai(()=>{R&&n("active","droppableId",null),n("droppables",w,void 0)})}},h=({id:w,activators:R})=>{n("sensors",w,{id:w,activators:R,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:t.sensors[w].coordinates.current.x-t.sensors[w].coordinates.origin.x,y:t.sensors[w].coordinates.current.y-t.sensors[w].coordinates.origin.y}}}})},d=w=>{if(!br(()=>t.sensors[w]))return;const R=t.active.sensorId===w;ai(()=>{R&&n("active","sensorId",null),n("sensors",w,void 0)})},g=({node:w,layout:R})=>{const N=t.active.overlay,Y={node:w,layout:R};N||Object.defineProperties(Y,{id:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.id},data:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.data},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(t.active.draggable?t.active.draggable.transformers:{}).filter(([z])=>z!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const z=Object.values(t.active.overlay?t.active.overlay.transformers:[]);return z.sort((G,te)=>G.order-te.order),z.reduce((G,te)=>te.callback(G),ma())}},transformed:{enumerable:!0,configurable:!0,get:()=>t.active.overlay?ox(t.active.overlay.layout,t.active.overlay.transform):new Jb({x:0,y:0,width:0,height:0})}}),n("active","overlay",Y)},p=()=>n("active","overlay",null),m=(w,R)=>{ai(()=>{n("sensors",w,"coordinates",{origin:{...R},current:{...R}}),n("active","sensorId",w)})},y=w=>{const R=t.active.sensorId;R&&n("sensors",R,"coordinates","current",{...w})},v=()=>n("active","sensorId",null),b=(w,R)=>{const N={};for(const z of Object.values(t.sensors))if(z)for(const[G,te]of Object.entries(z.activators))N[G]??=[],N[G].push({sensor:z,activator:te});const Y={};for(const z in N){let G=z;R&&(G=`on${z}`),Y[G]=te=>{for(const{activator:X}of N[z]){if(t.active.sensor)break;X(te,w)}}}return Y},_=()=>{let w=!1;const R=Object.values(t.draggables),N=Object.values(t.droppables),Y=t.active.overlay;return ai(()=>{const z=new WeakMap;for(const G of R)if(G){const te=G.layout;z.has(G.node)||z.set(G.node,D0(G.node));const X=z.get(G.node);ax(te,X)||(n("draggables",G.id,"layout",X),w=!0)}for(const G of N)if(G){const te=G.layout;z.has(G.node)||z.set(G.node,D0(G.node));const X=z.get(G.node);ax(te,X)||(n("droppables",G.id,"layout",X),w=!0)}if(Y){const G=Y.layout,te=D0(Y.node);ax(G,te)||(n("active","overlay","layout",te),w=!0)}}),w},x=()=>{const w=t.active.overlay??t.active.draggable;if(w){const R=e.collisionDetector(w,Object.values(t.droppables),{activeDroppableId:t.active.droppableId}),N=R?R.id:null;t.active.droppableId!==N&&n("active","droppableId",N)}},E=w=>{const R={id:"sensorMove",order:0,callback:N=>t.active.sensor?{x:N.x+t.active.sensor.coordinates.delta.x,y:N.y+t.active.sensor.coordinates.delta.y}:N};_(),ai(()=>{n("active","draggableId",w),i("draggables",w,R)}),x()},S=()=>{const w=br(()=>t.active.draggableId);ai(()=>{w!==null&&s("draggables",w,"sensorMove"),n("active",["draggableId","droppableId"],null)}),_()},C=w=>{it(()=>{const R=t.active.draggable;R&&br(()=>w({draggable:R}))})},k=w=>{it(()=>{const R=t.active.draggable;if(R){const N=br(()=>t.active.overlay);Object.values(N?N.transform:R.transform),br(()=>w({draggable:R,overlay:N}))}})},$=w=>{it(()=>{const R=t.active.draggable,N=t.active.droppable;R&&br(()=>w({draggable:R,droppable:N,overlay:t.active.overlay}))})},J=w=>{it(({previousDraggable:R,previousDroppable:N,previousOverlay:Y})=>{const z=t.active.draggable,G=z?t.active.droppable:null,te=z?t.active.overlay:null;return!z&&R&&br(()=>w({draggable:R,droppable:N,overlay:Y})),{previousDraggable:z,previousDroppable:G,previousOverlay:te}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};k(()=>x()),e.onDragStart&&C(e.onDragStart),e.onDragMove&&k(e.onDragMove),e.onDragOver&&$(e.onDragOver),e.onDragEnd&&J(e.onDragEnd);const L=[t,{addTransformer:i,removeTransformer:s,addDraggable:o,removeDraggable:a,addDroppable:l,removeDroppable:u,addSensor:h,removeSensor:d,setOverlay:g,clearOverlay:p,recomputeLayouts:_,detectCollisions:x,draggableActivators:b,sensorStart:m,sensorMove:y,sensorEnd:v,dragStart:E,dragEnd:S,onDragStart:C,onDragMove:k,onDragOver:$,onDragEnd:J}];return D(Qj.Provider,{value:L,get children(){return e.children}})},ep=()=>Qr(Qj)||null,hhe=(r="pointer-sensor")=>{const[e,{addSensor:t,removeSensor:n,sensorStart:i,sensorMove:s,sensorEnd:o,dragStart:a,dragEnd:c}]=ep(),l=250,u=10;Dr(()=>{t({id:r,activators:{pointerdown:p}})}),yt(()=>{n(r)});const f=()=>e.active.sensorId===r,h={x:0,y:0};let d=null,g=null;const p=(x,E)=>{x.button===0&&(document.addEventListener("pointermove",v),document.addEventListener("pointerup",b),g=E,h.x=x.clientX,h.y=x.clientY,d=window.setTimeout(y,l))},m=()=>{d&&(clearTimeout(d),d=null),document.removeEventListener("pointermove",v),document.removeEventListener("pointerup",b),document.removeEventListener("selectionchange",_)},y=()=>{e.active.sensor?f()||m():(i(r,h),a(g),_(),document.addEventListener("selectionchange",_))},v=x=>{const E={x:x.clientX,y:x.clientY};if(!e.active.sensor){const S={x:E.x-h.x,y:E.y-h.y};Math.sqrt(S.x**2+S.y**2)>u&&y()}f()&&(x.preventDefault(),s(E))},b=x=>{m(),f()&&(x.preventDefault(),c(),o())},_=()=>{window.getSelection()?.removeAllRanges()}},dhe=r=>(hhe(),Or(()=>r.children)),Qb=r=>({transform:`translate3d(${r.x}px, ${r.y}px, 0)`}),phe=(r,e={})=>{const[t,{addDraggable:n,removeDraggable:i,draggableActivators:s}]=ep(),[o,a]=$e(null);Dr(()=>{const f=o();f&&n({id:r,node:f,layout:D0(f),data:e})}),yt(()=>i(r));const c=()=>t.active.draggableId===r,l=()=>t.draggables[r]?.transform||ma();return Object.defineProperties((f,h)=>{const d=h?h():{};it(()=>{const g=o(),p=s(r);if(g)for(const m in p)g.addEventListener(m,p[m]);yt(()=>{if(g)for(const m in p)g.removeEventListener(m,p[m])})}),a(f),d.skipTransform||it(()=>{const g=l();if(YR(g,ma()))f.style.removeProperty("transform");else{const p=Qb(l());f.style.setProperty("transform",p.transform??null)}})},{ref:{enumerable:!0,value:a},isActiveDraggable:{enumerable:!0,get:c},dragActivators:{enumerable:!0,get:()=>s(r,!0)},transform:{enumerable:!0,get:l}})},ghe=(r,e={})=>{const[t,{addDroppable:n,removeDroppable:i}]=ep(),[s,o]=$e(null);Dr(()=>{const u=s();u&&n({id:r,node:u,layout:D0(u),data:e})}),yt(()=>i(r));const a=()=>t.active.droppableId===r,c=()=>t.droppables[r]?.transform||ma();return Object.defineProperties((u,f)=>{const h=f?f():{};o(u),h.skipTransform||it(()=>{const d=c();if(YR(d,ma()))u.style.removeProperty("transform");else{const g=Qb(c());u.style.setProperty("transform",g.transform??null)}})},{ref:{enumerable:!0,value:o},isActiveDroppable:{enumerable:!0,get:a},transform:{enumerable:!0,get:c}})},mhe=(r,e,t)=>{const n=r.slice();return n.splice(t,0,...n.splice(e,1)),n},Zj=nn(),yhe=r=>{const[e]=ep(),[t,n]=zf({initialIds:[],sortedIds:[]}),i=a=>a>=0&&a<t.initialIds.length;it(()=>{n("initialIds",[...r.ids]),n("sortedIds",[...r.ids])}),it(()=>{e.active.draggableId&&e.active.droppableId?br(()=>{const a=t.sortedIds.indexOf(e.active.draggableId),c=t.initialIds.indexOf(e.active.droppableId);if(!i(a)||!i(c))n("sortedIds",[...r.ids]);else if(a!==c){const l=mhe(t.sortedIds,a,c);n("sortedIds",l)}}):n("sortedIds",[...r.ids])});const o=[t,{}];return D(Zj.Provider,{value:o,get children(){return r.children}})},vhe=()=>Qr(Zj)||null,bhe=(r,e)=>t=>{r(t),e(t)},whe=(r,e={})=>{const[t,{addTransformer:n,removeTransformer:i}]=ep(),[s]=vhe(),o=phe(r,e),a=ghe(r,e),c=bhe(o.ref,a.ref),l=()=>s.initialIds.indexOf(r),u=()=>s.sortedIds.indexOf(r),f=m=>t.droppables[m]?.layout||null,h=()=>{const m=ma(),y=l(),v=u();if(v!==y){const b=f(r),_=f(s.initialIds[v]);b&&_&&(m.x=_.x-b.x,m.y=_.y-b.y)}return m},d={id:"sortableOffset",order:100,callback:m=>{const y=h();return{x:m.x+y.x,y:m.y+y.y}}};Dr(()=>n("droppables",r,d)),yt(()=>i("droppables",r,d.id));const g=()=>(r===t.active.draggableId&&!t.active.overlay?t.draggables[r]?.transform:t.droppables[r]?.transform)||ma();return Object.defineProperties(m=>{o(m,()=>({skipTransform:!0})),a(m,()=>({skipTransform:!0})),it(()=>{const y=g();if(YR(y,ma()))m.style.removeProperty("transform");else{const v=Qb(g());m.style.setProperty("transform",v.transform??null)}})},{ref:{enumerable:!0,value:c},transform:{enumerable:!0,get:g},isActiveDraggable:{enumerable:!0,get:()=>o.isActiveDraggable},dragActivators:{enumerable:!0,get:()=>o.dragActivators},isActiveDroppable:{enumerable:!0,get:()=>a.isActiveDroppable}})};const Zb=async r=>{typeof r=="string"?await navigator.clipboard.writeText(r):await navigator.clipboard.write(r)};var xhe=ye('<div class="i-tabler:dots-vertical size-5">'),s4=ye("<div>");const _he=r=>{const e=Co(),{updateUserSettings:t}=Pa(),{selectedAccount:n,refresh:i}=Jr(),s=Ws(),o=[{title:"Rename Wallet",icon:"i-tabler:edit",onClick:()=>{e(vt.ACCOUNTS_RENAME(r.account.address))}},{title:"Export Key",icon:"i-tabler:key",onClick:()=>{e(vt.ACCOUNTS_KEY(r.account.address))},isHidden:r.account.type!=="standalone"&&r.account.type!=="mnemonic"},{title:"View on Explorer",icon:"i-tabler:external-link",onClick:()=>{window.open(`https://solscan.io/account/${r.account.address}`,"_blank")}},{title:"Delete Wallet",icon:"i-tabler:trash-x",onClick:()=>{s.confirm({title:"Confirm Delete Wallet",content:"Are you sure you want to delete this wallet? This action cannot be undone. Make sure you have a suitable backup of your seed phrase or private key before proceeding!",confirmText:"Delete",confirmStyle:"danger",onConfirm:async()=>{await t({type:"deleteAccount",address:r.account.address}),await i()}})},isHidden:n()?.address===r.account.address}];return D(ts.Root,{get children(){return[D(ts.Trigger,{class:"cursor-pointer px-4 h-full text-zinc-500 hover:text-zinc-100 transition-100",onClick:a=>{a.stopImmediatePropagation()},get children(){return xhe()}}),D(ts.Portal,{get children(){return D(ts.Content,{class:"z-100 text-base bg-zinc-900 rounded ring-1 ring-zinc-700",get children(){return D(Lt,{each:o,children:({title:a,icon:c,onClick:l,isHidden:u})=>D(We,{when:!u,get children(){return D(ts.Item,{as:"button",class:"cursor-pointer flex items-center gap-3 p-3 hover:bg-zinc-800 rounded w-full",classList:{"text-red-500":a==="Delete Wallet"},onClick:f=>{f.stopImmediatePropagation(),l()},get children(){return[(()=>{var f=s4();return ht(()=>ui(f,Xr(c,"size-5"))),f})(),(()=>{var f=s4();return ce(f,a),f})()]}})}})})}})}})]}})};var She=ye('<div class="size-4.5 i-tabler:spy text-zinc-400 ml-1">'),Ehe=ye('<div><button class="relative cursor-move px-4 h-full text-zinc-50 transition-100 group"><div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 i-tabler:arrows-move size-6 opacity-0 group-hover:opacity-100 transition-100"></div></button><div class=text-left><div class="flex items-center"><div class=font-semibold></div></div><button class="flex-1 flex gap-1 text-sm justify-center items-center cursor-pointer transition-100 text-zinc-400 hover:text-zinc-100"><div class=size-4></div></button></div><div class=flex-1>');const Ahe=r=>{const e=Co(),{updateUserSettings:t}=Pa(),{selectedAccount:n}=Jr(),i=whe(r.account.address),[s]=ep()??[],[o,a]=$e(!1);async function c(f){n()?.address!==f&&(await t({type:"setSelectedAccount",address:f}),e(vt.HOME))}let l;function u(f,h){f.stopImmediatePropagation(),l?.(),Zb(h),a(!0),l=tl(()=>a(!1),2500,setTimeout)}return(()=>{var f=Ehe(),h=f.firstChild,d=h.firstChild,g=h.nextSibling,p=g.firstChild,m=p.firstChild,y=p.nextSibling,v=y.firstChild;g.nextSibling,f.$$click=()=>c(r.account.address);var b=i.ref;return typeof b=="function"?qd(b,f):i.ref=f,h.$$click=_=>{_.stopPropagation()},bn(h,st(()=>i.dragActivators),!1,!0),ce(h,D(Gg,{get id(){return r.account.address},get class(){return Xr("size-9 transition-100 group-hover:opacity-25")}}),d),ce(m,()=>r.account.label),ce(p,D(yr,{get children(){return[D(Ne,{get when(){return r.account.type==="readonly"},get children(){return She()}}),D(Ne,{get when(){return r.account.type==="ledger"},get children(){return D(pR,{class:"size-4 fill-zinc-400 ml-1.5"})}}),D(Ne,{get when(){return r.account.type==="keystone"},get children(){return D(dR,{class:"size-5 fill-zinc-400 ml-1"})}}),D(Ne,{get when(){return r.account.type==="trezor"},get children(){return D(GR,{class:"size-5 fill-zinc-400 ml-1"})}}),D(Ne,{get when(){return r.account.type==="privy"},get children(){return D(Gj,{class:"size-4 text-zinc-400 ml-1",get account(){return r.account}})}})]}}),null),y.$$click=_=>u(_,r.account.address),ce(y,D(Yo,{get address(){return r.account.address}}),v),ce(f,D(_he,{get account(){return r.account}}),null),ht(_=>{var x=Xr("relative cursor-pointer w-full h-17 bg-zinc-900 rounded-xl flex items-center",{"ring-1 ring-primary-200":n()?.address===r.account.address,"bg-zinc-800 duration-0 z-1":i.isActiveDraggable,"transition-transform":!!s?.active.draggable,"transition-100 hover:bg-zinc-800/75":!s?.active.draggable}),E=Qb(i.transform),S={"i-tabler:copy-check-filled":o(),"i-tabler:copy":!o()};return x!==_.e&&ui(f,_.e=x),_.t=AT(f,E,_.t),_.a=Gr(v,S,_.a),_},{e:void 0,t:void 0,a:void 0}),f})()};Yt(["click"]);var Ihe=ye('<div class="space-y-2 pb-2">');const Che=()=>{const{accounts:r,updateAccountsOrder:e}=Jr(),t=ke(()=>r().map(i=>i.address));return D(fhe,{onDragEnd:({draggable:i,droppable:s})=>{if(i&&s){const o=t(),a=o.indexOf(i.id.toString()),c=o.indexOf(s.id.toString());if(a!==c){const l=o.slice();l.splice(c,0,...l.splice(a,1)),e(l)}}},collisionDetector:lhe,get children(){return[D(dhe,{}),D(yhe,{get ids(){return t()},get children(){var i=Ihe();return ce(i,D(Lt,{get each(){return r()},children:s=>D(Ahe,{account:s})})),i}})]}})};var The=ye('<div class="relative flex flex-col flex-1"><div class=p-4></div><div class="absolute bottom-0 left-0 border-t border-zinc-700 bg-zinc-950 p-4 w-full"><button class="relative h-10 cursor-pointer w-full rounded-md bg-zinc-800 text-zinc-300 font-semibold active:bg-zinc-800/75 transition-100 group"><div>Add New Wallet</div><div class="absolute right-3 top-0 flex items-center justify-center h-full"><div class="i-tabler:plus size-5.5 group-hover:rotate-90 transition-200">');const Rhe=()=>{function r(){window.open(`/popup.html#${vt.ONBOARD}`,"_blank")}return(()=>{var e=The(),t=e.firstChild,n=t.nextSibling,i=n.firstChild;return ce(t,D(Ys,{title:"Manage Wallets"})),ce(e,D(Hd,{class:"h-[calc(100vh-11.3rem)] overflow-auto px-4 pt-0.3",gradientClass:"from-zinc-950/0 to-zinc-950",get children(){return D(Che,{})}}),n),i.$$click=r,e})()};Yt(["click"]);class o4 extends Error{response;request;options;constructor(e,t,n){const i=e.status||e.status===0?e.status:"",s=e.statusText||"",o=`${i} ${s}`.trim(),a=o?`status code ${o}`:"an unknown error";super(`Request failed with ${a}: ${t.method} ${t.url}`),this.name="HTTPError",this.response=e,this.request=t,this.options=n}}let eV=class extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name="TimeoutError",this.request=e}};const a4=(()=>{let r=!1,e=!1;const t=typeof globalThis.ReadableStream=="function",n=typeof globalThis.Request=="function";if(t&&n)try{e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type")}catch(i){if(i instanceof Error&&i.message==="unsupported BodyInit type")return!1;throw i}return r&&!e})(),khe=typeof globalThis.AbortController=="function",Phe=typeof globalThis.ReadableStream=="function",Ohe=typeof globalThis.FormData=="function",tV=["get","post","put","patch","head","delete"],Dhe={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},cx=2147483647,$he=new TextEncoder().encode("------WebKitFormBoundaryaxpyiPgbbPti10Rw").length,rV=Symbol("stop"),Mhe={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0},Bhe={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},Nhe=r=>{if(!r)return 0;if(r instanceof FormData){let e=0;for(const[t,n]of r)e+=$he,e+=new TextEncoder().encode(`Content-Disposition: form-data; name="${t}"`).length,e+=typeof n=="string"?new TextEncoder().encode(n).length:n.size;return e}if(r instanceof Blob)return r.size;if(r instanceof ArrayBuffer)return r.byteLength;if(typeof r=="string")return new TextEncoder().encode(r).length;if(r instanceof URLSearchParams)return new TextEncoder().encode(r.toString()).length;if("byteLength"in r)return r.byteLength;if(typeof r=="object"&&r!==null)try{const e=JSON.stringify(r);return new TextEncoder().encode(e).length}catch{return 0}return 0},Lhe=(r,e)=>{const t=Number(r.headers.get("content-length"))||0;let n=0;return r.status===204?(e&&e({percent:1,totalBytes:t,transferredBytes:n},new Uint8Array),new Response(null,{status:r.status,statusText:r.statusText,headers:r.headers})):new Response(new ReadableStream({async start(i){const s=r.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:t},new Uint8Array);async function o(){const{done:a,value:c}=await s.read();if(a){i.close();return}if(e){n+=c.byteLength;const l=t===0?0:n/t;e({percent:l,transferredBytes:n,totalBytes:t},c)}i.enqueue(c),await o()}await o()}}),{status:r.status,statusText:r.statusText,headers:r.headers})},Fhe=(r,e)=>{const t=Nhe(r.body);let n=0;return new Request(r,{duplex:"half",body:new ReadableStream({async start(i){const s=r.body instanceof ReadableStream?r.body.getReader():new Response("").body.getReader();async function o(){const{done:a,value:c}=await s.read();if(a){e&&e({percent:1,transferredBytes:n,totalBytes:Math.max(t,n)},new Uint8Array),i.close();return}n+=c.byteLength;let l=t===0?0:n/t;(t<n||l===1)&&(l=.99),e&&e({percent:Number(l.toFixed(2)),transferredBytes:n,totalBytes:t},c),i.enqueue(c),await o()}await o()}})})},h0=r=>r!==null&&typeof r=="object",Um=(...r)=>{for(const e of r)if((!h0(e)||Array.isArray(e))&&e!==void 0)throw new TypeError("The `options` argument must be an object");return XR({},...r)},nV=(r={},e={})=>{const t=new globalThis.Headers(r),n=e instanceof globalThis.Headers,i=new globalThis.Headers(e);for(const[s,o]of i.entries())n&&o==="undefined"||o===void 0?t.delete(s):t.set(s,o);return t};function zm(r,e,t){return Object.hasOwn(e,t)&&e[t]===void 0?[]:XR(r[t]??[],e[t]??[])}const iV=(r={},e={})=>({beforeRequest:zm(r,e,"beforeRequest"),beforeRetry:zm(r,e,"beforeRetry"),afterResponse:zm(r,e,"afterResponse"),beforeError:zm(r,e,"beforeError")}),XR=(...r)=>{let e={},t={},n={};for(const i of r)if(Array.isArray(i))Array.isArray(e)||(e=[]),e=[...e,...i];else if(h0(i)){for(let[s,o]of Object.entries(i))h0(o)&&s in e&&(o=XR(e[s],o)),e={...e,[s]:o};h0(i.hooks)&&(n=iV(n,i.hooks),e.hooks=n),h0(i.headers)&&(t=nV(t,i.headers),e.headers=t)}return e},Uhe=r=>tV.includes(r)?r.toUpperCase():r,zhe=["get","put","head","delete","options","trace"],qhe=[408,413,429,500,502,503,504],jhe=[413,429,503],c4={limit:2,methods:zhe,statusCodes:qhe,afterStatusCodes:jhe,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:r=>.3*2**(r-1)*1e3},Vhe=(r={})=>{if(typeof r=="number")return{...c4,limit:r};if(r.methods&&!Array.isArray(r.methods))throw new Error("retry.methods must be an array");if(r.statusCodes&&!Array.isArray(r.statusCodes))throw new Error("retry.statusCodes must be an array");return{...c4,...r}};async function Khe(r,e,t,n){return new Promise((i,s)=>{const o=setTimeout(()=>{t&&t.abort(),s(new eV(r))},n.timeout);n.fetch(r,e).then(i).catch(s).then(()=>{clearTimeout(o)})})}async function Hhe(r,{signal:e}){return new Promise((t,n)=>{e&&(e.throwIfAborted(),e.addEventListener("abort",i,{once:!0}));function i(){clearTimeout(s),n(e.reason)}const s=setTimeout(()=>{e?.removeEventListener("abort",i),t()},r)})}const Whe=(r,e)=>{const t={};for(const n in e)!(n in Bhe)&&!(n in Mhe)&&!(n in r)&&(t[n]=e[n]);return t};class Ev{static create(e,t){const n=new Ev(e,t),i=async()=>{if(typeof n._options.timeout=="number"&&n._options.timeout>cx)throw new RangeError(`The \`timeout\` option cannot be greater than ${cx}`);await Promise.resolve();let a=await n._fetch();for(const c of n._options.hooks.afterResponse){const l=await c(n.request,n._options,n._decorateResponse(a.clone()));l instanceof globalThis.Response&&(a=l)}if(n._decorateResponse(a),!a.ok&&n._options.throwHttpErrors){let c=new o4(a,n.request,n._options);for(const l of n._options.hooks.beforeError)c=await l(c);throw c}if(n._options.onDownloadProgress){if(typeof n._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!Phe)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return Lhe(a.clone(),n._options.onDownloadProgress)}return a},o=(n._options.retry.methods.includes(n.request.method.toLowerCase())?n._retry(i):i()).finally(async()=>{n.request.bodyUsed||await n.request.body?.cancel()});for(const[a,c]of Object.entries(Dhe))o[a]=async()=>{n.request.headers.set("accept",n.request.headers.get("accept")||c);const l=await o;if(a==="json"){if(l.status===204||(await l.clone().arrayBuffer()).byteLength===0)return"";if(t.parseJson)return t.parseJson(await l.text())}return l[a]()};return o}request;abortController;_retryCount=0;_input;_options;constructor(e,t={}){if(this._input=e,this._options={...t,headers:nV(this._input.headers,t.headers),hooks:iV({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:Uhe(t.method??this._input.method??"GET"),prefixUrl:String(t.prefixUrl||""),retry:Vhe(t.retry),throwHttpErrors:t.throwHttpErrors!==!1,timeout:t.timeout??1e4,fetch:t.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(khe){const n=this._options.signal??this._input.signal;this.abortController=new globalThis.AbortController,this._options.signal=n?AbortSignal.any([n,this.abortController.signal]):this.abortController.signal}if(a4&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const i="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),s=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,i);(Ohe&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(s,{...this.request}),this._options)}if(this._options.onUploadProgress){if(typeof this._options.onUploadProgress!="function")throw new TypeError("The `onUploadProgress` option must be a function");if(!a4)throw new Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request.body&&(this.request=Fhe(this.request,this._options.onUploadProgress))}}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount>this._options.retry.limit||e instanceof eV)throw e;if(e instanceof o4){if(!this._options.retry.statusCodes.includes(e.response.status))throw e;const n=e.response.headers.get("Retry-After")??e.response.headers.get("RateLimit-Reset")??e.response.headers.get("X-RateLimit-Reset")??e.response.headers.get("X-Rate-Limit-Reset");if(n&&this._options.retry.afterStatusCodes.includes(e.response.status)){let i=Number(n)*1e3;Number.isNaN(i)?i=Date.parse(n)-Date.now():i>=Date.parse("2024-01-01")&&(i-=Date.now());const s=this._options.retry.maxRetryAfter??i;return i<s?i:s}if(e.response.status===413)throw e}const t=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,t)}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(t){const n=Math.min(this._calculateRetryDelay(t),cx);if(this._retryCount<1)throw t;await Hhe(n,{signal:this._options.signal});for(const i of this._options.hooks.beforeRetry)if(await i({request:this.request,options:this._options,error:t,retryCount:this._retryCount})===rV)return;return this._retry(e)}}async _fetch(){for(const n of this._options.hooks.beforeRequest){const i=await n(this.request,this._options);if(i instanceof Request){this.request=i;break}if(i instanceof Response)return i}const e=Whe(this.request,this._options),t=this.request;return this.request=t.clone(),this._options.timeout===!1?this._options.fetch(t,e):Khe(t,e,this.abortController,this._options)}}/*! MIT License  Sindre Sorhus */const KA=r=>{const e=(t,n)=>Ev.create(t,Um(r,n));for(const t of tV)e[t]=(n,i)=>Ev.create(n,Um(r,i,{method:t}));return e.create=t=>KA(Um(t)),e.extend=t=>(typeof t=="function"&&(t=t(r??{})),KA(Um(r,t))),e.stop=rV,e},Bn=KA();class ss{static#e="https://wallet-api.jup.ag";static async simulateTransaction(e){return Bn.post(`${this.#e}/v1/simulate`,{json:e}).json()}static async getAddressesExistence(e){return Bn.get(`${this.#e}/v1/existence`,{searchParams:{addresses:e.join(",")}}).json()}static async getHoldings(e){return Bn.get(`${this.#e}/v2/portfolio/holdings/${e}`).json()}static async getNfts({address:e,page:t=1,limit:n=30}){return Bn.get(`${this.#e}/v2/portfolio/nft/${e}`,{searchParams:{page:t,limit:n}}).json()}static async getPositions(e){return Bn.get(`${this.#e}/v2/portfolio/positions/${e}`).json()}static async getTransactions(e,t){return Bn.get(`${this.#e}/v1/transactions/${e}`,{searchParams:t?{before:t}:{}}).json()}static async scanSite(e){return Bn.get(`${this.#e}/v1/scan/site/${encodeURIComponent(e)}`).json()}static async getTransferTx(e){return Bn.get(`${this.#e}/v2/transfer`,{searchParams:e,throwHttpErrors:!1}).json()}static async postExecuteTransfer(e){return Bn.post(`${this.#e}/v2/transfer`,{json:e}).json()}static async postMetrics(e,t){return Bn.post(`${this.#e}/v1/metrics`,{json:t,headers:{"x-user-id":e}}).json()}static async getOverallPnl(e){return Bn.get(`${this.#e}/v1/pnl/${e}`).json()}static async getPnlPositions(e,t){return Bn.get(`${this.#e}/v1/pnl/${e}/positions`,{searchParams:t}).json()}static async getPnlPosition(e,t){return Bn.get(`${this.#e}/v1/pnl/${e}/positions/${t}`).json()}static async getPnlActivity(e,t){return Bn.get(`${this.#e}/v1/pnl/${e}/activity/${t}`).json()}}var Ghe=ye('<img class="size-full rounded">'),Yhe=ye("<div>"),Xhe=ye('<div class="size-full i-tabler:world-question">');const sV=r=>{const[e,t]=$e(!0),n=ke(()=>{if(!r.domain.includes("://"))return r.domain;try{return new URL(r.domain).host}catch{return t(!1),""}});return(()=>{var i=Yhe();return ce(i,D(We,{get when(){return e()},get fallback(){return Xhe()},get children(){var s=Ghe();return s.addEventListener("error",()=>t(!1)),ht(()=>Mr(s,"src",`https://wsrv.nl/?w=128&h=128&url=${encodeURIComponent(`https://www.google.com/s2/favicons?domain=${n()}&sz=64`)}`)),s}})),ht(()=>ui(i,Xr("size-8 text-zinc-400",r.class))),i})()};var Jhe=ye('<div class="flex items-center gap-3"><div class="space-y-1 py-1"><h1 class="text-lg font-semibold leading-none"></h1><h2 class="text-zinc-300 leading-none">');const JR=r=>{const[e]=Uf(),t=ke(()=>typeof e.origin!="string"?"unknown":new URL(e.origin).host),n=ke(()=>t()===bo.runtime.id);return(()=>{var i=Jhe(),s=i.firstChild,o=s.firstChild,a=o.nextSibling;return ce(i,D(We,{get when(){return n()},get fallback(){return D(sV,{get domain(){return t()},class:"size-10"})},get children(){return D(Lg,{class:"size-10 rounded-full"})}}),s),ce(o,()=>r.title),ce(a,D(We,{get when(){return n()},get fallback(){return t()},children:"Jupiter Wallet"})),i})()};var Qhe=ye('<div class="p-3 bg-zinc-900 rounded space-y-3"><div class=text-zinc-400>Connecting will allow the site to:'),Zhe=ye('<div class="p-3 bg-zinc-900 rounded space-y-3"><div class=text-zinc-400>This will not allow the site to:'),ede=ye('<div class="flex-1 p-4 space-y-4 flex flex-col"><div class=flex-1></div><div class="text-zinc-500 text-center">Only connect to websites you trust'),tde=ye('<div class="space-y-2 p-3 ring-1 ring-red-800 bg-red-900/15 rounded text-red-400"><div class="flex items-center gap-2"><div class="i-tabler:alert-triangle-filled size-6 animate-pulse"></div><p class=font-bold>This website could be malicious!</p></div><p>Do not proceed to connect unless you know what you are doing.</p><p>If you think this is a mistake, please <a class=underline href=https://discord.gg/jup target=_blank>reach out to us on Discord</a>.'),rde=ye('<div class="flex gap-3 items-center"><div class="size-6 rounded-full bg-green-500/10 flex items-center justify-center"><div class="size-4 i-tabler:check text-green-500"></div></div><div>'),nde=ye('<div class="flex gap-3 items-center"><div class="size-6 rounded-full bg-red-500/10 flex items-center justify-center"><div class="size-4 i-tabler:x text-red-500"></div></div><div>');const ide=()=>{const[r]=Uf(),e=ke(()=>typeof r.id!="string"?null:r.id||null),t=ke(()=>typeof r.origin!="string"?"":new URL(r.origin).host),n=qs(()=>({queryKey:["connect",t()],queryFn:()=>ss.scanSite(t()),enabled:t()!==""})),i=ke(()=>n.data?.result==="MALICIOUS");async function s(o){await _r.approve({id:e()||"",isApproved:o})}return(()=>{var o=ede(),a=o.firstChild;return a.nextSibling,ce(o,D(JR,{title:"Approve Connection"}),a),ce(o,D(We,{get when(){return!i()},get fallback(){return tde()},get children(){return[(()=>{var c=Qhe();return c.firstChild,ce(c,D(Lt,{each:["View your addresses","View your balances","View your on-chain activity"],children:l=>(()=>{var u=rde(),f=u.firstChild,h=f.nextSibling;return ce(h,l),u})()}),null),c})(),(()=>{var c=Zhe();return c.firstChild,ce(c,D(Lt,{each:["Sign without your approval","Steal your private keys"],children:l=>(()=>{var u=nde(),f=u.firstChild,h=f.nextSibling;return ce(h,l),u})()}),null),c})()]}}),a),ce(o,D(fs,{onCancelClick:()=>s(!1),onApproveClick:()=>s(!0),approveTitle:"Connect"}),null),o})()},oV=()=>{const[r]=Uf();return ke(()=>typeof r.id!="string"?null:r.id||null)};var No={};const ew=Xd(ple);var lx={},HA=function(r,e){return HA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},HA(r,e)};function ta(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");HA(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Av=function(){return Av=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Av.apply(this,arguments)};function aV(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function cV(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function lV(r,e){return function(t,n){e(t,n,r)}}function uV(r,e,t,n,i,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!e&&r?n.static?r:r.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),f,h=!1,d=t.length-1;d>=0;d--){var g={};for(var p in n)g[p]=p==="access"?{}:n[p];for(var p in n.access)g.access[p]=n.access[p];g.addInitializer=function(y){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var m=(0,t[d])(a==="accessor"?{get:u.get,set:u.set}:u[c],g);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=o(m.get))&&(u.get=f),(f=o(m.set))&&(u.set=f),(f=o(m.init))&&i.unshift(f)}else(f=o(m))&&(a==="field"?i.unshift(f):u[c]=f)}l&&Object.defineProperty(l,n.name,u),h=!0}function fV(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function hV(r){return typeof r=="symbol"?r:"".concat(r)}function dV(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function pV(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function QR(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function tw(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var rw=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};function gV(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&rw(e,r,t)}function mu(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yu(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function mV(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(yu(arguments[e]));return r}function yV(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Af(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}function rl(r){return this instanceof rl?(this.v=r,this):new rl(r)}function ZR(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(d){return function(g){return Promise.resolve(g).then(d,f)}}function a(d,g){n[d]&&(i[d]=function(p){return new Promise(function(m,y){s.push([d,p,m,y])>1||c(d,p)})},g&&(i[d]=g(i[d])))}function c(d,g){try{l(n[d](g))}catch(p){h(s[0][3],p)}}function l(d){d.value instanceof rl?Promise.resolve(d.value.v).then(u,f):h(s[0][2],d)}function u(d){c("next",d)}function f(d){c("throw",d)}function h(d,g){d(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function vV(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:rl(r[i](o)),done:!1}:s?s(o):o}:s}}function e3(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof mu=="function"?mu(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function bV(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var sde=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e},WA=function(r){return WA=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},WA(r)};function wV(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t=WA(r),n=0;n<t.length;n++)t[n]!=="default"&&rw(e,r,t[n]);return sde(e,r),e}function xV(r){return r&&r.__esModule?r:{default:r}}function _V(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function SV(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function EV(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function AV(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}var ode=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};function IV(r){function e(s){r.error=r.hasError?new ode(s,r.error,"An error was suppressed during disposal."):s,r.hasError=!0}var t,n=0;function i(){for(;t=r.stack.pop();)try{if(!t.async&&n===1)return n=0,r.stack.push(t),Promise.resolve().then(i);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return i()}function CV(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,i,s,o){return n?e?".jsx":".js":i&&(!s||!o)?t:i+s+"."+o.toLowerCase()+"js"}):r}const ade={__extends:ta,__assign:Av,__rest:aV,__decorate:cV,__param:lV,__esDecorate:uV,__runInitializers:fV,__propKey:hV,__setFunctionName:dV,__metadata:pV,__awaiter:QR,__generator:tw,__createBinding:rw,__exportStar:gV,__values:mu,__read:yu,__spread:mV,__spreadArrays:yV,__spreadArray:Af,__await:rl,__asyncGenerator:ZR,__asyncDelegator:vV,__asyncValues:e3,__makeTemplateObject:bV,__importStar:wV,__importDefault:xV,__classPrivateFieldGet:_V,__classPrivateFieldSet:SV,__classPrivateFieldIn:EV,__addDisposableResource:AV,__disposeResources:IV,__rewriteRelativeImportExtension:CV},cde=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:AV,get __assign(){return Av},__asyncDelegator:vV,__asyncGenerator:ZR,__asyncValues:e3,__await:rl,__awaiter:QR,__classPrivateFieldGet:_V,__classPrivateFieldIn:EV,__classPrivateFieldSet:SV,__createBinding:rw,__decorate:cV,__disposeResources:IV,__esDecorate:uV,__exportStar:gV,__extends:ta,__generator:tw,__importDefault:xV,__importStar:wV,__makeTemplateObject:bV,__metadata:pV,__param:lV,__propKey:hV,__read:yu,__rest:aV,__rewriteRelativeImportExtension:CV,__runInitializers:fV,__setFunctionName:dV,__spread:mV,__spreadArray:Af,__spreadArrays:yV,__values:mu,default:ade},Symbol.toStringTag,{value:"Module"})),lde=Xd(cde);var ux={},_p={},fx={},ky={exports:{}},Sp={},l4;function t3(){if(l4)return Sp;l4=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.DataItem=void 0;let r=class{constructor(t,n){this.setTag=i=>{this.tag=i},this.clearTag=()=>{this.tag=void 0},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=t,this.tag=n}};return Sp.DataItem=r,Sp}var ude=ky.exports,u4;function fde(){return u4||(u4=1,function(r){(function(e,t){r.exports?r.exports=t():e.CBOR=t()})(ude,function(){const{DataItem:e}=t3();var t=function(){function n(S){this.$hex=S}n.prototype={length:function(){return this.$hex.length/2},toString:function(S){if(!S||S==="hex"||S===16)return this.$hex;if(S==="utf-8"){for(var C="",k=0;k<this.$hex.length;k+=2)C+="%"+this.$hex.substring(k,k+2);return decodeURIComponent(C)}if(S==="latin"){for(var C=[],k=0;k<this.$hex.length;k+=2)C.push(parseInt(this.$hex.substring(k,k+2),16));return String.fromCharCode.apply(String,C)}throw new Error("Unrecognised format: "+S)}},n.fromLatinString=function(S){for(var C="",k=0;k<S.length;k++){var $=S.charCodeAt(k).toString(16);$.length===1&&($="0"+$),C+=$}return new n(C)},n.fromUtf8String=function(S){for(var C=encodeURIComponent(S),k="",$=0;$<C.length;$++)if(C.charAt($)==="%")k+=C.substring($+1,$+3),$+=2;else{var J=C.charCodeAt($).toString(16);J.length<2&&(J="0"+J),k+=J}return new n(k)};var i=[],s={},o=function(S){return function(){throw new Error(S+" not implemented")}};function a(){}a.prototype={peekByte:o("peekByte"),readByte:o("readByte"),readChunk:o("readChunk"),readFloat16:function(){var S=this.readUint16(),C=(S&32767)>>10,k=S&1023,$=S&32768;if(C===31)return k===0?$?-1/0:1/0:NaN;var J=C?Math.pow(2,C-25)*(1024+k):Math.pow(2,-24)*k;return $?-J:J},readFloat32:function(){var S=this.readUint32(),C=(S&2147483647)>>23,k=S&8388607,$=S&2147483648;if(C===255)return k===0?$?-1/0:1/0:NaN;var J=C?Math.pow(2,C-23-127)*(8388608+k):Math.pow(2,-149)*k;return $?-J:J},readFloat64:function(){var S=this.readUint32(),C=this.readUint32(),k=S>>20&2047,$=(S&1048575)*4294967296+C,J=S&2147483648;if(k===2047)return $===0?J?-1/0:1/0:NaN;var j=k?Math.pow(2,k-52-1023)*(4503599627370496+$):Math.pow(2,-1074)*$;return J?-j:j},readUint16:function(){return this.readByte()*256+this.readByte()},readUint32:function(){return this.readUint16()*65536+this.readUint16()},readUint64:function(){return this.readUint32()*4294967296+this.readUint32()}};function c(){}c.prototype={writeByte:o("writeByte"),result:o("result"),writeFloat16:o("writeFloat16"),writeFloat32:o("writeFloat32"),writeFloat64:o("writeFloat64"),writeUint16:function(S){this.writeByte(S>>8&255),this.writeByte(S&255)},writeUint32:function(S){this.writeUint16(S>>16&65535),this.writeUint16(S&65535)},writeUint64:function(S){if(S>=9007199254740992||S<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+S+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(S/4294967296)),this.writeUint32(S%4294967296)},writeString:o("writeString"),canWriteBinary:function(S){return!1},writeBinary:o("writeChunk")};function l(S){var C=S.readByte(),k=C>>5,$=C&31;return{type:k,value:$}}function u(S,C){var k=S.value;if(k<24)return k;if(k==24)return C.readByte();if(k==25)return C.readUint16();if(k==26)return C.readUint32();if(k==27)return C.readUint64();if(k==31)return null;o("Additional info: "+k)()}function f(S,C,k){k.writeByte(S<<5|C)}function h(S,C,k){var $=S<<5;C<24?k.writeByte($|C):C<256?(k.writeByte($|24),k.writeByte(C)):C<65536?(k.writeByte($|25),k.writeUint16(C)):C<4294967296?(k.writeByte($|26),k.writeUint32(C)):(k.writeByte($|27),k.writeUint64(C))}var d=new Error;function g(S){var C=l(S);switch(C.type){case 0:return u(C,S);case 1:return-1-u(C,S);case 2:return S.readChunk(u(C,S));case 3:var k=S.readChunk(u(C,S));return k.toString("utf-8");case 4:case 5:var $=u(C,S),N=[];if($!==null){C.type===5&&($*=2);for(var J=0;J<$;J++)N[J]=g(S)}else for(var j;(j=g(S))!==d;)N.push(j);if(C.type===5){for(var L={},J=0;J<N.length;J+=2)L[N[J]]=N[J+1];return L}else return N;case 6:var w=u(C,S),R=s[w],N=g(S);return R?R(N):N;case 7:if(C.value===25)return S.readFloat16();if(C.value===26)return S.readFloat32();if(C.value===27)return S.readFloat64();switch(u(C,S)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case null:return d;default:throw new Error("Unknown fixed value: "+C.value)}default:throw new Error("Unsupported header: "+JSON.stringify(C))}throw new Error("not implemented yet")}function p(S,C){for(var k=0;k<i.length;k++){var $=i[k].fn(S);if($!==void 0)return h(6,i[k].tag,C),p($,C)}if(S&&typeof S.toCBOR=="function"&&(S=S.toCBOR()),S===!1)h(7,20,C);else if(S===!0)h(7,21,C);else if(S===null)h(7,22,C);else if(S===void 0)h(7,23,C);else if(typeof S=="number")Math.floor(S)===S&&S<9007199254740992&&S>-9007199254740992?S<0?h(1,-1-S,C):h(0,S,C):(f(7,27,C),C.writeFloat64(S));else if(typeof S=="string")C.writeString(S,function(j){h(3,j,C)});else if(C.canWriteBinary(S))C.writeBinary(S,function(j){h(2,j,C)});else if(typeof S=="object")if(v.config.useToJSON&&typeof S.toJSON=="function"&&(S=S.toJSON()),Array.isArray(S)){h(4,S.length,C);for(var k=0;k<S.length;k++)p(S[k],C)}else{var J=Object.keys(S);h(5,J.length,C);for(var k=0;k<J.length;k++){const L=parseInt(J[k]);isNaN(L)?(p(J[k],C),p(S[J[k]],C)):(p(L,C),p(S[J[k]],C))}}else throw new Error("CBOR encoding not supported: "+S)}var m=[],y=[],v={config:{useToJSON:!0},addWriter:function(S,C){typeof S=="string"?y.push(function(k){if(S===k)return C(k)}):y.push(S)},addReader:function(S,C){typeof S=="string"?m.push(function(k,$){if(S===$)return C(k,$)}):m.push(S)},encode:function(S,C){for(var k=0;k<y.length;k++){var $=y[k],J=$(C);if(J)return p(S,J),J.result()}throw new Error("Unsupported output format: "+C)},encodeDataItem:function(S,C){for(var k=0;k<y.length;k++){var $=y[k],J=$(C);if(J)return S.getTag()!==void 0?(p(S,J),J.result()):(p(S.getData(),J),J.result())}throw new Error("Unsupported output format: "+C)},decode:function(S,C){for(var k=0;k<m.length;k++){var $=m[k],J=$(S,C);if(J)return g(J)}throw new Error("Unsupported input format: "+C)},decodeToDataItem:function(S,C){for(var k=0;k<m.length;k++){var $=m[k],J=$(S,C);if(J){const j=g(J);return j instanceof e?j:new e(j)}}throw new Error("Unsupported input format: "+C)},addSemanticEncode:function(S,C){if(typeof S!="number"||S%1!==0||S<0)throw new Error("Tag must be a positive integer");return i.push({tag:S,fn:C}),this},addSemanticDecode:function(S,C){if(typeof S!="number"||S%1!==0||S<0)throw new Error("Tag must be a positive integer");return s[S]=C,this}};function b(S){this.buffer=S,this.pos=0}b.prototype=Object.create(a.prototype),b.prototype.peekByte=function(){return this.buffer[this.pos]},b.prototype.readByte=function(){return this.buffer[this.pos++]},b.prototype.readUint16=function(){var S=this.buffer.readUInt16BE(this.pos);return this.pos+=2,S},b.prototype.readUint32=function(){var S=this.buffer.readUInt32BE(this.pos);return this.pos+=4,S},b.prototype.readFloat32=function(){var S=this.buffer.readFloatBE(this.pos);return this.pos+=4,S},b.prototype.readFloat64=function(){var S=this.buffer.readDoubleBE(this.pos);return this.pos+=8,S},b.prototype.readChunk=function(S){var C=Xe.alloc(S);return this.buffer.copy(C,0,this.pos,this.pos+=S),C};function _(S){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=Xe.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=S}_.prototype=Object.create(c.prototype),_.prototype.writeByte=function(S){this.latestBuffer[this.latestBufferOffset++]=S,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Xe.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},_.prototype.writeFloat32=function(S){var C=Xe.alloc(4);C.writeFloatBE(S,0),this.writeBuffer(C)},_.prototype.writeFloat64=function(S){var C=Xe.alloc(8);C.writeDoubleBE(S,0),this.writeBuffer(C)},_.prototype.writeString=function(S,C){var k=Xe.from(S,"utf-8");C(k.length),this.writeBuffer(k)},_.prototype.canWriteBinary=function(S){return S instanceof Xe},_.prototype.writeBinary=function(S,C){C(S.length),this.writeBuffer(S)},_.prototype.writeBuffer=function(S){if(!(S instanceof Xe))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=S.length?(S.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=S.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Xe.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(S),this.latestBuffer=Xe.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(S),this.byteLength+=S.length},_.prototype.result=function(){for(var S=Xe.alloc(this.byteLength),C=0,k=0;k<this.completeBuffers.length;k++){var $=this.completeBuffers[k];$.copy(S,C,0,$.length),C+=$.length}return this.latestBufferOffset&&this.latestBuffer.copy(S,C,0,this.latestBufferOffset),this.stringFormat?S.toString(this.stringFormat):S},typeof Xe=="function"&&(v.addReader(function(S,C){if(Xe.isBuffer(S))return new b(S);if(C==="hex"||C==="base64"){var k=Xe.from(S,C);return new b(k)}}),v.addWriter(function(S){if(!S||S==="buffer")return new _;if(S==="hex"||S==="base64")return new _(S)}));function x(S){this.hex=S,this.pos=0}x.prototype=Object.create(a.prototype),x.prototype.peekByte=function(){var S=this.hex.substring(this.pos,2);return parseInt(S,16)},x.prototype.readByte=function(){var S=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(S,16)},x.prototype.readChunk=function(S){var C=this.hex.substring(this.pos,this.pos+S*2);return this.pos+=S*2,typeof Xe=="function"?Xe.from(C,"hex"):new n(C)};function E(S){this.$hex="",this.finalFormat=S||"hex"}return E.prototype=Object.create(c.prototype),E.prototype.writeByte=function(S){if(S<0||S>255)throw new Error("Byte value out of range: "+S);var C=S.toString(16);C.length==1&&(C="0"+C),this.$hex+=C},E.prototype.canWriteBinary=function(S){return S instanceof n||typeof Xe=="function"&&S instanceof Xe},E.prototype.writeBinary=function(S,C){if(S instanceof n)C(S.length()),this.$hex+=S.$hex;else if(typeof Xe=="function"&&S instanceof Xe)C(S.length),this.$hex+=S.toString("hex");else throw new TypeError("HexWriter only accepts BinaryHex or Buffers")},E.prototype.result=function(){return this.finalFormat==="buffer"&&typeof Xe=="function"?Xe.from(this.$hex,"hex"):new n(this.$hex).toString(this.finalFormat)},E.prototype.writeString=function(S,C){var k=n.fromUtf8String(S);C(k.length()),this.$hex+=k.$hex},v.addReader(function(S,C){if(S instanceof n||S.$hex)return new x(S.$hex);if(C==="hex")return new x(S)}),v.addWriter(function(S){if(S==="hex")return new E}),v}();return t.addSemanticEncode(0,function(n){if(n instanceof Date)return n.toISOString()}).addSemanticDecode(0,function(n){return new Date(n)}).addSemanticDecode(1,function(n){return new Date(n)}),t})}(ky)),ky.exports}var f4;function Li(){return f4||(f4=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DataItem=r.addWriter=r.addReader=r.addSemanticEncode=r.addSemanticDecode=r.decodeToDataItem=r.encodeDataItem=void 0;var e=fde();Object.defineProperty(r,"encodeDataItem",{enumerable:!0,get:function(){return e.encodeDataItem}}),Object.defineProperty(r,"decodeToDataItem",{enumerable:!0,get:function(){return e.decodeToDataItem}}),Object.defineProperty(r,"addSemanticDecode",{enumerable:!0,get:function(){return e.addSemanticDecode}}),Object.defineProperty(r,"addSemanticEncode",{enumerable:!0,get:function(){return e.addSemanticEncode}}),Object.defineProperty(r,"addReader",{enumerable:!0,get:function(){return e.addReader}}),Object.defineProperty(r,"addWriter",{enumerable:!0,get:function(){return e.addWriter}});var t=t3();Object.defineProperty(r,"DataItem",{enumerable:!0,get:function(){return t.DataItem}})}(fx)),fx}var h4;function GA(){if(h4)return _p;h4=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.patchTags=void 0;const r=Li(),e=[],t=n=>{n.forEach(i=>{e.find(s=>s===i)||((0,r.addSemanticEncode)(i,s=>{if(s instanceof r.DataItem&&s.getTag()===i)return s.getData()}),(0,r.addSemanticDecode)(i,s=>new r.DataItem(s,i)),e.push(i))})};return _p.patchTags=t,_p}var $u={},d4;function Fi(){if(d4)return $u;d4=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.RegistryTypes=$u.RegistryType=void 0;let r=class{constructor(t,n){this.type=t,this.tag=n,this.getTag=()=>this.tag,this.getType=()=>this.type}};return $u.RegistryType=r,$u.RegistryTypes={UUID:new r("uuid",37),BYTES:new r("bytes",void 0),CRYPTO_HDKEY:new r("crypto-hdkey",303),CRYPTO_KEYPATH:new r("crypto-keypath",304),CRYPTO_COIN_INFO:new r("crypto-coin-info",305),CRYPTO_ECKEY:new r("crypto-eckey",306),CRYPTO_OUTPUT:new r("crypto-output",308),CRYPTO_PSBT:new r("crypto-psbt",310),CRYPTO_ACCOUNT:new r("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new r("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new r("qr-hardware-call",1201),KEY_DERIVATION_CALL:new r("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new r("key-derivation-schema",1302)},$u}var hx={},p4;function r3(){return p4||(p4=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ScriptExpressions=r.ScriptExpression=void 0;class e{constructor(n,i){this.tag=n,this.expression=i,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}r.ScriptExpression=e,e.fromTag=t=>Object.values(r.ScriptExpressions).find(i=>i.getTag()===t),r.ScriptExpressions={SCRIPT_HASH:new e(400,"sh"),WITNESS_SCRIPT_HASH:new e(401,"wsh"),PUBLIC_KEY:new e(402,"pk"),PUBLIC_KEY_HASH:new e(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new e(404,"wpkh"),COMBO:new e(405,"combo"),MULTISIG:new e(406,"multi"),SORTED_MULTISIG:new e(407,"sortedmulti"),ADDRESS:new e(307,"addr"),RAW_SCRIPT:new e(408,"raw")}}(hx)),hx}var g4;function m4(){if(g4)return ux;g4=1,Object.defineProperty(ux,"__esModule",{value:!0});const r=GA(),e=Fi(),t=r3(),n=Object.values(e.RegistryTypes).filter(s=>!!s.getTag()).map(s=>s.getTag()),i=Object.values(t.ScriptExpressions).map(s=>s.getTag());return(0,r.patchTags)(n.concat(i)),ux}var dx={},Ep={},y4;function TV(){if(y4)return Ep;y4=1,Ep.byteLength=a,Ep.toByteArray=l,Ep.fromByteArray=h;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function o(d){var g=d.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=d.indexOf("=");p===-1&&(p=g);var m=p===g?0:4-p%4;return[p,m]}function a(d){var g=o(d),p=g[0],m=g[1];return(p+m)*3/4-m}function c(d,g,p){return(g+p)*3/4-p}function l(d){var g,p=o(d),m=p[0],y=p[1],v=new t(c(d,m,y)),b=0,_=y>0?m-4:m,x;for(x=0;x<_;x+=4)g=e[d.charCodeAt(x)]<<18|e[d.charCodeAt(x+1)]<<12|e[d.charCodeAt(x+2)]<<6|e[d.charCodeAt(x+3)],v[b++]=g>>16&255,v[b++]=g>>8&255,v[b++]=g&255;return y===2&&(g=e[d.charCodeAt(x)]<<2|e[d.charCodeAt(x+1)]>>4,v[b++]=g&255),y===1&&(g=e[d.charCodeAt(x)]<<10|e[d.charCodeAt(x+1)]<<4|e[d.charCodeAt(x+2)]>>2,v[b++]=g>>8&255,v[b++]=g&255),v}function u(d){return r[d>>18&63]+r[d>>12&63]+r[d>>6&63]+r[d&63]}function f(d,g,p){for(var m,y=[],v=g;v<p;v+=3)m=(d[v]<<16&16711680)+(d[v+1]<<8&65280)+(d[v+2]&255),y.push(u(m));return y.join("")}function h(d){for(var g,p=d.length,m=p%3,y=[],v=16383,b=0,_=p-m;b<_;b+=v)y.push(f(d,b,b+v>_?_:b+v));return m===1?(g=d[p-1],y.push(r[g>>2]+r[g<<4&63]+"==")):m===2&&(g=(d[p-2]<<8)+d[p-1],y.push(r[g>>10]+r[g>>4&63]+r[g<<2&63]+"=")),y.join("")}return Ep}var qm={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var v4;function RV(){return v4||(v4=1,qm.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,f=t?i-1:0,h=t?-1:1,d=r[e+f];for(f+=h,s=d&(1<<-u)-1,d>>=-u,u+=a;u>0;s=s*256+r[e+f],f+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+r[e+f],f+=h,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(d?-1:1)*o*Math.pow(2,s-n)},qm.write=function(r,e,t,n,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,f=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,g=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+f>=1?e+=h/c:e+=h*Math.pow(2,1-f),e*c>=2&&(o++,c/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*c-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;r[t+d]=a&255,d+=g,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;r[t+d]=o&255,d+=g,o/=256,l-=8);r[t+d-g]|=p*128}),qm}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var b4;function xc(){return b4||(b4=1,function(r){const e=TV(),t=RV(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=v,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const se=new Uint8Array(1),V={foo:function(){return 42}};return Object.setPrototypeOf(V,Uint8Array.prototype),Object.setPrototypeOf(se,V),se.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(se){if(se>i)throw new RangeError('The value "'+se+'" is invalid for option "size"');const V=new Uint8Array(se);return Object.setPrototypeOf(V,a.prototype),V}function a(se,V,Q){if(typeof se=="number"){if(typeof V=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(se)}return c(se,V,Q)}a.poolSize=8192;function c(se,V,Q){if(typeof se=="string")return h(se,V);if(ArrayBuffer.isView(se))return g(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(Ce(se,ArrayBuffer)||se&&Ce(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(se,SharedArrayBuffer)||se&&Ce(se.buffer,SharedArrayBuffer)))return p(se,V,Q);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const K=se.valueOf&&se.valueOf();if(K!=null&&K!==se)return a.from(K,V,Q);const M=m(se);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return a.from(se[Symbol.toPrimitive]("string"),V,Q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}a.from=function(se,V,Q){return c(se,V,Q)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function u(se,V,Q){return l(se),se<=0?o(se):V!==void 0?typeof Q=="string"?o(se).fill(V,Q):o(se).fill(V):o(se)}a.alloc=function(se,V,Q){return u(se,V,Q)};function f(se){return l(se),o(se<0?0:y(se)|0)}a.allocUnsafe=function(se){return f(se)},a.allocUnsafeSlow=function(se){return f(se)};function h(se,V){if((typeof V!="string"||V==="")&&(V="utf8"),!a.isEncoding(V))throw new TypeError("Unknown encoding: "+V);const Q=b(se,V)|0;let K=o(Q);const M=K.write(se,V);return M!==Q&&(K=K.slice(0,M)),K}function d(se){const V=se.length<0?0:y(se.length)|0,Q=o(V);for(let K=0;K<V;K+=1)Q[K]=se[K]&255;return Q}function g(se){if(Ce(se,Uint8Array)){const V=new Uint8Array(se);return p(V.buffer,V.byteOffset,V.byteLength)}return d(se)}function p(se,V,Q){if(V<0||se.byteLength<V)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<V+(Q||0))throw new RangeError('"length" is outside of buffer bounds');let K;return V===void 0&&Q===void 0?K=new Uint8Array(se):Q===void 0?K=new Uint8Array(se,V):K=new Uint8Array(se,V,Q),Object.setPrototypeOf(K,a.prototype),K}function m(se){if(a.isBuffer(se)){const V=y(se.length)|0,Q=o(V);return Q.length===0||se.copy(Q,0,0,V),Q}if(se.length!==void 0)return typeof se.length!="number"||Me(se.length)?o(0):d(se);if(se.type==="Buffer"&&Array.isArray(se.data))return d(se.data)}function y(se){if(se>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return se|0}function v(se){return+se!=se&&(se=0),a.alloc(+se)}a.isBuffer=function(V){return V!=null&&V._isBuffer===!0&&V!==a.prototype},a.compare=function(V,Q){if(Ce(V,Uint8Array)&&(V=a.from(V,V.offset,V.byteLength)),Ce(Q,Uint8Array)&&(Q=a.from(Q,Q.offset,Q.byteLength)),!a.isBuffer(V)||!a.isBuffer(Q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(V===Q)return 0;let K=V.length,M=Q.length;for(let P=0,ee=Math.min(K,M);P<ee;++P)if(V[P]!==Q[P]){K=V[P],M=Q[P];break}return K<M?-1:M<K?1:0},a.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(V,Q){if(!Array.isArray(V))throw new TypeError('"list" argument must be an Array of Buffers');if(V.length===0)return a.alloc(0);let K;if(Q===void 0)for(Q=0,K=0;K<V.length;++K)Q+=V[K].length;const M=a.allocUnsafe(Q);let P=0;for(K=0;K<V.length;++K){let ee=V[K];if(Ce(ee,Uint8Array))P+ee.length>M.length?(a.isBuffer(ee)||(ee=a.from(ee)),ee.copy(M,P)):Uint8Array.prototype.set.call(M,ee,P);else if(a.isBuffer(ee))ee.copy(M,P);else throw new TypeError('"list" argument must be an Array of Buffers');P+=ee.length}return M};function b(se,V){if(a.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||Ce(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);const Q=se.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&Q===0)return 0;let M=!1;for(;;)switch(V){case"ascii":case"latin1":case"binary":return Q;case"utf8":case"utf-8":return B(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q*2;case"hex":return Q>>>1;case"base64":return de(se).length;default:if(M)return K?-1:B(se).length;V=(""+V).toLowerCase(),M=!0}}a.byteLength=b;function _(se,V,Q){let K=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((Q===void 0||Q>this.length)&&(Q=this.length),Q<=0)||(Q>>>=0,V>>>=0,Q<=V))return"";for(se||(se="utf8");;)switch(se){case"hex":return G(this,V,Q);case"utf8":case"utf-8":return w(this,V,Q);case"ascii":return Y(this,V,Q);case"latin1":case"binary":return z(this,V,Q);case"base64":return L(this,V,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,V,Q);default:if(K)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),K=!0}}a.prototype._isBuffer=!0;function x(se,V,Q){const K=se[V];se[V]=se[Q],se[Q]=K}a.prototype.swap16=function(){const V=this.length;if(V%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Q=0;Q<V;Q+=2)x(this,Q,Q+1);return this},a.prototype.swap32=function(){const V=this.length;if(V%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Q=0;Q<V;Q+=4)x(this,Q,Q+3),x(this,Q+1,Q+2);return this},a.prototype.swap64=function(){const V=this.length;if(V%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Q=0;Q<V;Q+=8)x(this,Q,Q+7),x(this,Q+1,Q+6),x(this,Q+2,Q+5),x(this,Q+3,Q+4);return this},a.prototype.toString=function(){const V=this.length;return V===0?"":arguments.length===0?w(this,0,V):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(V){if(!a.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V?!0:a.compare(this,V)===0},a.prototype.inspect=function(){let V="";const Q=r.INSPECT_MAX_BYTES;return V=this.toString("hex",0,Q).replace(/(.{2})/g,"$1 ").trim(),this.length>Q&&(V+=" ... "),"<Buffer "+V+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(V,Q,K,M,P){if(Ce(V,Uint8Array)&&(V=a.from(V,V.offset,V.byteLength)),!a.isBuffer(V))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof V);if(Q===void 0&&(Q=0),K===void 0&&(K=V?V.length:0),M===void 0&&(M=0),P===void 0&&(P=this.length),Q<0||K>V.length||M<0||P>this.length)throw new RangeError("out of range index");if(M>=P&&Q>=K)return 0;if(M>=P)return-1;if(Q>=K)return 1;if(Q>>>=0,K>>>=0,M>>>=0,P>>>=0,this===V)return 0;let ee=P-M,pe=K-Q;const be=Math.min(ee,pe),fe=this.slice(M,P),Ee=V.slice(Q,K);for(let Le=0;Le<be;++Le)if(fe[Le]!==Ee[Le]){ee=fe[Le],pe=Ee[Le];break}return ee<pe?-1:pe<ee?1:0};function E(se,V,Q,K,M){if(se.length===0)return-1;if(typeof Q=="string"?(K=Q,Q=0):Q>2147483647?Q=2147483647:Q<-2147483648&&(Q=-2147483648),Q=+Q,Me(Q)&&(Q=M?0:se.length-1),Q<0&&(Q=se.length+Q),Q>=se.length){if(M)return-1;Q=se.length-1}else if(Q<0)if(M)Q=0;else return-1;if(typeof V=="string"&&(V=a.from(V,K)),a.isBuffer(V))return V.length===0?-1:S(se,V,Q,K,M);if(typeof V=="number")return V=V&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(se,V,Q):Uint8Array.prototype.lastIndexOf.call(se,V,Q):S(se,[V],Q,K,M);throw new TypeError("val must be string, number or Buffer")}function S(se,V,Q,K,M){let P=1,ee=se.length,pe=V.length;if(K!==void 0&&(K=String(K).toLowerCase(),K==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(se.length<2||V.length<2)return-1;P=2,ee/=2,pe/=2,Q/=2}function be(Ee,Le){return P===1?Ee[Le]:Ee.readUInt16BE(Le*P)}let fe;if(M){let Ee=-1;for(fe=Q;fe<ee;fe++)if(be(se,fe)===be(V,Ee===-1?0:fe-Ee)){if(Ee===-1&&(Ee=fe),fe-Ee+1===pe)return Ee*P}else Ee!==-1&&(fe-=fe-Ee),Ee=-1}else for(Q+pe>ee&&(Q=ee-pe),fe=Q;fe>=0;fe--){let Ee=!0;for(let Le=0;Le<pe;Le++)if(be(se,fe+Le)!==be(V,Le)){Ee=!1;break}if(Ee)return fe}return-1}a.prototype.includes=function(V,Q,K){return this.indexOf(V,Q,K)!==-1},a.prototype.indexOf=function(V,Q,K){return E(this,V,Q,K,!0)},a.prototype.lastIndexOf=function(V,Q,K){return E(this,V,Q,K,!1)};function C(se,V,Q,K){Q=Number(Q)||0;const M=se.length-Q;K?(K=Number(K),K>M&&(K=M)):K=M;const P=V.length;K>P/2&&(K=P/2);let ee;for(ee=0;ee<K;++ee){const pe=parseInt(V.substr(ee*2,2),16);if(Me(pe))return ee;se[Q+ee]=pe}return ee}function k(se,V,Q,K){return _e(B(V,se.length-Q),se,Q,K)}function $(se,V,Q,K){return _e(q(V),se,Q,K)}function J(se,V,Q,K){return _e(de(V),se,Q,K)}function j(se,V,Q,K){return _e(ne(V,se.length-Q),se,Q,K)}a.prototype.write=function(V,Q,K,M){if(Q===void 0)M="utf8",K=this.length,Q=0;else if(K===void 0&&typeof Q=="string")M=Q,K=this.length,Q=0;else if(isFinite(Q))Q=Q>>>0,isFinite(K)?(K=K>>>0,M===void 0&&(M="utf8")):(M=K,K=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const P=this.length-Q;if((K===void 0||K>P)&&(K=P),V.length>0&&(K<0||Q<0)||Q>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let ee=!1;for(;;)switch(M){case"hex":return C(this,V,Q,K);case"utf8":case"utf-8":return k(this,V,Q,K);case"ascii":case"latin1":case"binary":return $(this,V,Q,K);case"base64":return J(this,V,Q,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,V,Q,K);default:if(ee)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),ee=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(se,V,Q){return V===0&&Q===se.length?e.fromByteArray(se):e.fromByteArray(se.slice(V,Q))}function w(se,V,Q){Q=Math.min(se.length,Q);const K=[];let M=V;for(;M<Q;){const P=se[M];let ee=null,pe=P>239?4:P>223?3:P>191?2:1;if(M+pe<=Q){let be,fe,Ee,Le;switch(pe){case 1:P<128&&(ee=P);break;case 2:be=se[M+1],(be&192)===128&&(Le=(P&31)<<6|be&63,Le>127&&(ee=Le));break;case 3:be=se[M+1],fe=se[M+2],(be&192)===128&&(fe&192)===128&&(Le=(P&15)<<12|(be&63)<<6|fe&63,Le>2047&&(Le<55296||Le>57343)&&(ee=Le));break;case 4:be=se[M+1],fe=se[M+2],Ee=se[M+3],(be&192)===128&&(fe&192)===128&&(Ee&192)===128&&(Le=(P&15)<<18|(be&63)<<12|(fe&63)<<6|Ee&63,Le>65535&&Le<1114112&&(ee=Le))}}ee===null?(ee=65533,pe=1):ee>65535&&(ee-=65536,K.push(ee>>>10&1023|55296),ee=56320|ee&1023),K.push(ee),M+=pe}return N(K)}const R=4096;function N(se){const V=se.length;if(V<=R)return String.fromCharCode.apply(String,se);let Q="",K=0;for(;K<V;)Q+=String.fromCharCode.apply(String,se.slice(K,K+=R));return Q}function Y(se,V,Q){let K="";Q=Math.min(se.length,Q);for(let M=V;M<Q;++M)K+=String.fromCharCode(se[M]&127);return K}function z(se,V,Q){let K="";Q=Math.min(se.length,Q);for(let M=V;M<Q;++M)K+=String.fromCharCode(se[M]);return K}function G(se,V,Q){const K=se.length;(!V||V<0)&&(V=0),(!Q||Q<0||Q>K)&&(Q=K);let M="";for(let P=V;P<Q;++P)M+=xe[se[P]];return M}function te(se,V,Q){const K=se.slice(V,Q);let M="";for(let P=0;P<K.length-1;P+=2)M+=String.fromCharCode(K[P]+K[P+1]*256);return M}a.prototype.slice=function(V,Q){const K=this.length;V=~~V,Q=Q===void 0?K:~~Q,V<0?(V+=K,V<0&&(V=0)):V>K&&(V=K),Q<0?(Q+=K,Q<0&&(Q=0)):Q>K&&(Q=K),Q<V&&(Q=V);const M=this.subarray(V,Q);return Object.setPrototypeOf(M,a.prototype),M};function X(se,V,Q){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+V>Q)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(V,Q,K){V=V>>>0,Q=Q>>>0,K||X(V,Q,this.length);let M=this[V],P=1,ee=0;for(;++ee<Q&&(P*=256);)M+=this[V+ee]*P;return M},a.prototype.readUintBE=a.prototype.readUIntBE=function(V,Q,K){V=V>>>0,Q=Q>>>0,K||X(V,Q,this.length);let M=this[V+--Q],P=1;for(;Q>0&&(P*=256);)M+=this[V+--Q]*P;return M},a.prototype.readUint8=a.prototype.readUInt8=function(V,Q){return V=V>>>0,Q||X(V,1,this.length),this[V]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(V,Q){return V=V>>>0,Q||X(V,2,this.length),this[V]|this[V+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(V,Q){return V=V>>>0,Q||X(V,2,this.length),this[V]<<8|this[V+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(V,Q){return V=V>>>0,Q||X(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+this[V+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(V,Q){return V=V>>>0,Q||X(V,4,this.length),this[V]*16777216+(this[V+1]<<16|this[V+2]<<8|this[V+3])},a.prototype.readBigUInt64LE=Ae(function(V){V=V>>>0,ue(V,"offset");const Q=this[V],K=this[V+7];(Q===void 0||K===void 0)&&le(V,this.length-8);const M=Q+this[++V]*2**8+this[++V]*2**16+this[++V]*2**24,P=this[++V]+this[++V]*2**8+this[++V]*2**16+K*2**24;return BigInt(M)+(BigInt(P)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ae(function(V){V=V>>>0,ue(V,"offset");const Q=this[V],K=this[V+7];(Q===void 0||K===void 0)&&le(V,this.length-8);const M=Q*2**24+this[++V]*2**16+this[++V]*2**8+this[++V],P=this[++V]*2**24+this[++V]*2**16+this[++V]*2**8+K;return(BigInt(M)<<BigInt(32))+BigInt(P)}),a.prototype.readIntLE=function(V,Q,K){V=V>>>0,Q=Q>>>0,K||X(V,Q,this.length);let M=this[V],P=1,ee=0;for(;++ee<Q&&(P*=256);)M+=this[V+ee]*P;return P*=128,M>=P&&(M-=Math.pow(2,8*Q)),M},a.prototype.readIntBE=function(V,Q,K){V=V>>>0,Q=Q>>>0,K||X(V,Q,this.length);let M=Q,P=1,ee=this[V+--M];for(;M>0&&(P*=256);)ee+=this[V+--M]*P;return P*=128,ee>=P&&(ee-=Math.pow(2,8*Q)),ee},a.prototype.readInt8=function(V,Q){return V=V>>>0,Q||X(V,1,this.length),this[V]&128?(255-this[V]+1)*-1:this[V]},a.prototype.readInt16LE=function(V,Q){V=V>>>0,Q||X(V,2,this.length);const K=this[V]|this[V+1]<<8;return K&32768?K|4294901760:K},a.prototype.readInt16BE=function(V,Q){V=V>>>0,Q||X(V,2,this.length);const K=this[V+1]|this[V]<<8;return K&32768?K|4294901760:K},a.prototype.readInt32LE=function(V,Q){return V=V>>>0,Q||X(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},a.prototype.readInt32BE=function(V,Q){return V=V>>>0,Q||X(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},a.prototype.readBigInt64LE=Ae(function(V){V=V>>>0,ue(V,"offset");const Q=this[V],K=this[V+7];(Q===void 0||K===void 0)&&le(V,this.length-8);const M=this[V+4]+this[V+5]*2**8+this[V+6]*2**16+(K<<24);return(BigInt(M)<<BigInt(32))+BigInt(Q+this[++V]*2**8+this[++V]*2**16+this[++V]*2**24)}),a.prototype.readBigInt64BE=Ae(function(V){V=V>>>0,ue(V,"offset");const Q=this[V],K=this[V+7];(Q===void 0||K===void 0)&&le(V,this.length-8);const M=(Q<<24)+this[++V]*2**16+this[++V]*2**8+this[++V];return(BigInt(M)<<BigInt(32))+BigInt(this[++V]*2**24+this[++V]*2**16+this[++V]*2**8+K)}),a.prototype.readFloatLE=function(V,Q){return V=V>>>0,Q||X(V,4,this.length),t.read(this,V,!0,23,4)},a.prototype.readFloatBE=function(V,Q){return V=V>>>0,Q||X(V,4,this.length),t.read(this,V,!1,23,4)},a.prototype.readDoubleLE=function(V,Q){return V=V>>>0,Q||X(V,8,this.length),t.read(this,V,!0,52,8)},a.prototype.readDoubleBE=function(V,Q){return V=V>>>0,Q||X(V,8,this.length),t.read(this,V,!1,52,8)};function T(se,V,Q,K,M,P){if(!a.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(V>M||V<P)throw new RangeError('"value" argument is out of bounds');if(Q+K>se.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(V,Q,K,M){if(V=+V,Q=Q>>>0,K=K>>>0,!M){const pe=Math.pow(2,8*K)-1;T(this,V,Q,K,pe,0)}let P=1,ee=0;for(this[Q]=V&255;++ee<K&&(P*=256);)this[Q+ee]=V/P&255;return Q+K},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(V,Q,K,M){if(V=+V,Q=Q>>>0,K=K>>>0,!M){const pe=Math.pow(2,8*K)-1;T(this,V,Q,K,pe,0)}let P=K-1,ee=1;for(this[Q+P]=V&255;--P>=0&&(ee*=256);)this[Q+P]=V/ee&255;return Q+K},a.prototype.writeUint8=a.prototype.writeUInt8=function(V,Q,K){return V=+V,Q=Q>>>0,K||T(this,V,Q,1,255,0),this[Q]=V&255,Q+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(V,Q,K){return V=+V,Q=Q>>>0,K||T(this,V,Q,2,65535,0),this[Q]=V&255,this[Q+1]=V>>>8,Q+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(V,Q,K){return V=+V,Q=Q>>>0,K||T(this,V,Q,2,65535,0),this[Q]=V>>>8,this[Q+1]=V&255,Q+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(V,Q,K){return V=+V,Q=Q>>>0,K||T(this,V,Q,4,4294967295,0),this[Q+3]=V>>>24,this[Q+2]=V>>>16,this[Q+1]=V>>>8,this[Q]=V&255,Q+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(V,Q,K){return V=+V,Q=Q>>>0,K||T(this,V,Q,4,4294967295,0),this[Q]=V>>>24,this[Q+1]=V>>>16,this[Q+2]=V>>>8,this[Q+3]=V&255,Q+4};function A(se,V,Q,K,M){H(V,K,M,se,Q,7);let P=Number(V&BigInt(4294967295));se[Q++]=P,P=P>>8,se[Q++]=P,P=P>>8,se[Q++]=P,P=P>>8,se[Q++]=P;let ee=Number(V>>BigInt(32)&BigInt(4294967295));return se[Q++]=ee,ee=ee>>8,se[Q++]=ee,ee=ee>>8,se[Q++]=ee,ee=ee>>8,se[Q++]=ee,Q}function O(se,V,Q,K,M){H(V,K,M,se,Q,7);let P=Number(V&BigInt(4294967295));se[Q+7]=P,P=P>>8,se[Q+6]=P,P=P>>8,se[Q+5]=P,P=P>>8,se[Q+4]=P;let ee=Number(V>>BigInt(32)&BigInt(4294967295));return se[Q+3]=ee,ee=ee>>8,se[Q+2]=ee,ee=ee>>8,se[Q+1]=ee,ee=ee>>8,se[Q]=ee,Q+8}a.prototype.writeBigUInt64LE=Ae(function(V,Q=0){return A(this,V,Q,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ae(function(V,Q=0){return O(this,V,Q,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(V,Q,K,M){if(V=+V,Q=Q>>>0,!M){const be=Math.pow(2,8*K-1);T(this,V,Q,K,be-1,-be)}let P=0,ee=1,pe=0;for(this[Q]=V&255;++P<K&&(ee*=256);)V<0&&pe===0&&this[Q+P-1]!==0&&(pe=1),this[Q+P]=(V/ee>>0)-pe&255;return Q+K},a.prototype.writeIntBE=function(V,Q,K,M){if(V=+V,Q=Q>>>0,!M){const be=Math.pow(2,8*K-1);T(this,V,Q,K,be-1,-be)}let P=K-1,ee=1,pe=0;for(this[Q+P]=V&255;--P>=0&&(ee*=256);)V<0&&pe===0&&this[Q+P+1]!==0&&(pe=1),this[Q+P]=(V/ee>>0)-pe&255;return Q+K},a.prototype.writeInt8=function(V,Q,K){return V=+V,Q=Q>>>0,K||T(this,V,Q,1,127,-128),V<0&&(V=255+V+1),this[Q]=V&255,Q+1},a.prototype.writeInt16LE=function(V,Q,K){return V=+V,Q=Q>>>0,K||T(this,V,Q,2,32767,-32768),this[Q]=V&255,this[Q+1]=V>>>8,Q+2},a.prototype.writeInt16BE=function(V,Q,K){return V=+V,Q=Q>>>0,K||T(this,V,Q,2,32767,-32768),this[Q]=V>>>8,this[Q+1]=V&255,Q+2},a.prototype.writeInt32LE=function(V,Q,K){return V=+V,Q=Q>>>0,K||T(this,V,Q,4,2147483647,-2147483648),this[Q]=V&255,this[Q+1]=V>>>8,this[Q+2]=V>>>16,this[Q+3]=V>>>24,Q+4},a.prototype.writeInt32BE=function(V,Q,K){return V=+V,Q=Q>>>0,K||T(this,V,Q,4,2147483647,-2147483648),V<0&&(V=4294967295+V+1),this[Q]=V>>>24,this[Q+1]=V>>>16,this[Q+2]=V>>>8,this[Q+3]=V&255,Q+4},a.prototype.writeBigInt64LE=Ae(function(V,Q=0){return A(this,V,Q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ae(function(V,Q=0){return O(this,V,Q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function I(se,V,Q,K,M,P){if(Q+K>se.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("Index out of range")}function U(se,V,Q,K,M){return V=+V,Q=Q>>>0,M||I(se,V,Q,4),t.write(se,V,Q,K,23,4),Q+4}a.prototype.writeFloatLE=function(V,Q,K){return U(this,V,Q,!0,K)},a.prototype.writeFloatBE=function(V,Q,K){return U(this,V,Q,!1,K)};function Z(se,V,Q,K,M){return V=+V,Q=Q>>>0,M||I(se,V,Q,8),t.write(se,V,Q,K,52,8),Q+8}a.prototype.writeDoubleLE=function(V,Q,K){return Z(this,V,Q,!0,K)},a.prototype.writeDoubleBE=function(V,Q,K){return Z(this,V,Q,!1,K)},a.prototype.copy=function(V,Q,K,M){if(!a.isBuffer(V))throw new TypeError("argument should be a Buffer");if(K||(K=0),!M&&M!==0&&(M=this.length),Q>=V.length&&(Q=V.length),Q||(Q=0),M>0&&M<K&&(M=K),M===K||V.length===0||this.length===0)return 0;if(Q<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),V.length-Q<M-K&&(M=V.length-Q+K);const P=M-K;return this===V&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Q,K,M):Uint8Array.prototype.set.call(V,this.subarray(K,M),Q),P},a.prototype.fill=function(V,Q,K,M){if(typeof V=="string"){if(typeof Q=="string"?(M=Q,Q=0,K=this.length):typeof K=="string"&&(M=K,K=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!a.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(V.length===1){const ee=V.charCodeAt(0);(M==="utf8"&&ee<128||M==="latin1")&&(V=ee)}}else typeof V=="number"?V=V&255:typeof V=="boolean"&&(V=Number(V));if(Q<0||this.length<Q||this.length<K)throw new RangeError("Out of range index");if(K<=Q)return this;Q=Q>>>0,K=K===void 0?this.length:K>>>0,V||(V=0);let P;if(typeof V=="number")for(P=Q;P<K;++P)this[P]=V;else{const ee=a.isBuffer(V)?V:a.from(V,M),pe=ee.length;if(pe===0)throw new TypeError('The value "'+V+'" is invalid for argument "value"');for(P=0;P<K-Q;++P)this[P+Q]=ee[P%pe]}return this};const oe={};function he(se,V,Q){oe[se]=class extends Q{constructor(){super(),Object.defineProperty(this,"message",{value:V.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${se}]`,this.stack,delete this.name}get code(){return se}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${se}]: ${this.message}`}}}he("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?`${se} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(se,V){return`The "${se}" argument must be of type number. Received type ${typeof V}`},TypeError),he("ERR_OUT_OF_RANGE",function(se,V,Q){let K=`The value of "${se}" is out of range.`,M=Q;return Number.isInteger(Q)&&Math.abs(Q)>2**32?M=re(String(Q)):typeof Q=="bigint"&&(M=String(Q),(Q>BigInt(2)**BigInt(32)||Q<-(BigInt(2)**BigInt(32)))&&(M=re(M)),M+="n"),K+=` It must be ${V}. Received ${M}`,K},RangeError);function re(se){let V="",Q=se.length;const K=se[0]==="-"?1:0;for(;Q>=K+4;Q-=3)V=`_${se.slice(Q-3,Q)}${V}`;return`${se.slice(0,Q)}${V}`}function F(se,V,Q){ue(V,"offset"),(se[V]===void 0||se[V+Q]===void 0)&&le(V,se.length-(Q+1))}function H(se,V,Q,K,M,P){if(se>Q||se<V){const ee=typeof V=="bigint"?"n":"";let pe;throw V===0||V===BigInt(0)?pe=`>= 0${ee} and < 2${ee} ** ${(P+1)*8}${ee}`:pe=`>= -(2${ee} ** ${(P+1)*8-1}${ee}) and < 2 ** ${(P+1)*8-1}${ee}`,new oe.ERR_OUT_OF_RANGE("value",pe,se)}F(K,M,P)}function ue(se,V){if(typeof se!="number")throw new oe.ERR_INVALID_ARG_TYPE(V,"number",se)}function le(se,V,Q){throw Math.floor(se)!==se?(ue(se,Q),new oe.ERR_OUT_OF_RANGE("offset","an integer",se)):V<0?new oe.ERR_BUFFER_OUT_OF_BOUNDS:new oe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${V}`,se)}const we=/[^+/0-9A-Za-z-_]/g;function ie(se){if(se=se.split("=")[0],se=se.trim().replace(we,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function B(se,V){V=V||1/0;let Q;const K=se.length;let M=null;const P=[];for(let ee=0;ee<K;++ee){if(Q=se.charCodeAt(ee),Q>55295&&Q<57344){if(!M){if(Q>56319){(V-=3)>-1&&P.push(239,191,189);continue}else if(ee+1===K){(V-=3)>-1&&P.push(239,191,189);continue}M=Q;continue}if(Q<56320){(V-=3)>-1&&P.push(239,191,189),M=Q;continue}Q=(M-55296<<10|Q-56320)+65536}else M&&(V-=3)>-1&&P.push(239,191,189);if(M=null,Q<128){if((V-=1)<0)break;P.push(Q)}else if(Q<2048){if((V-=2)<0)break;P.push(Q>>6|192,Q&63|128)}else if(Q<65536){if((V-=3)<0)break;P.push(Q>>12|224,Q>>6&63|128,Q&63|128)}else if(Q<1114112){if((V-=4)<0)break;P.push(Q>>18|240,Q>>12&63|128,Q>>6&63|128,Q&63|128)}else throw new Error("Invalid code point")}return P}function q(se){const V=[];for(let Q=0;Q<se.length;++Q)V.push(se.charCodeAt(Q)&255);return V}function ne(se,V){let Q,K,M;const P=[];for(let ee=0;ee<se.length&&!((V-=2)<0);++ee)Q=se.charCodeAt(ee),K=Q>>8,M=Q%256,P.push(M),P.push(K);return P}function de(se){return e.toByteArray(ie(se))}function _e(se,V,Q,K){let M;for(M=0;M<K&&!(M+Q>=V.length||M>=se.length);++M)V[M+Q]=se[M];return M}function Ce(se,V){return se instanceof V||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===V.name}function Me(se){return se!==se}const xe=function(){const se="0123456789abcdef",V=new Array(256);for(let Q=0;Q<16;++Q){const K=Q*16;for(let M=0;M<16;++M)V[K+M]=se[Q]+se[M]}return V}();function Ae(se){return typeof BigInt>"u"?Oe:se}function Oe(){throw new Error("BigInt not supported")}}(dx)),dx}var Ap={},jm={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var w4;function Xs(){return w4||(w4=1,function(r,e){var t=xc(),n=t.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=s);function s(o,a,c){return n(o,a,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(jm,jm.exports)),jm.exports}var Vm={exports:{}},Km={exports:{}},x4;function kV(){if(x4)return Km.exports;x4=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(x,E,S){return Function.prototype.apply.call(x,E,S)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:t=function(x){return Object.getOwnPropertyNames(x)};function n(_){console&&console.warn&&console.warn(_)}var i=Number.isNaN||function(x){return x!==x};function s(){s.init.call(this)}Km.exports=s,Km.exports.once=y,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(_){if(typeof _!="number"||_<0||i(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");o=_}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||i(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this};function c(_){return _._maxListeners===void 0?s.defaultMaxListeners:_._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(x){for(var E=[],S=1;S<arguments.length;S++)E.push(arguments[S]);var C=x==="error",k=this._events;if(k!==void 0)C=C&&k.error===void 0;else if(!C)return!1;if(C){var $;if(E.length>0&&($=E[0]),$ instanceof Error)throw $;var J=new Error("Unhandled error."+($?" ("+$.message+")":""));throw J.context=$,J}var j=k[x];if(j===void 0)return!1;if(typeof j=="function")e(j,this,E);else for(var L=j.length,w=g(j,L),S=0;S<L;++S)e(w[S],this,E);return!0};function l(_,x,E,S){var C,k,$;if(a(E),k=_._events,k===void 0?(k=_._events=Object.create(null),_._eventsCount=0):(k.newListener!==void 0&&(_.emit("newListener",x,E.listener?E.listener:E),k=_._events),$=k[x]),$===void 0)$=k[x]=E,++_._eventsCount;else if(typeof $=="function"?$=k[x]=S?[E,$]:[$,E]:S?$.unshift(E):$.push(E),C=c(_),C>0&&$.length>C&&!$.warned){$.warned=!0;var J=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(x)+" listeners added. Use emitter.setMaxListeners() to increase limit");J.name="MaxListenersExceededWarning",J.emitter=_,J.type=x,J.count=$.length,n(J)}return _}s.prototype.addListener=function(x,E){return l(this,x,E,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(x,E){return l(this,x,E,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(_,x,E){var S={fired:!1,wrapFn:void 0,target:_,type:x,listener:E},C=u.bind(S);return C.listener=E,S.wrapFn=C,C}s.prototype.once=function(x,E){return a(E),this.on(x,f(this,x,E)),this},s.prototype.prependOnceListener=function(x,E){return a(E),this.prependListener(x,f(this,x,E)),this},s.prototype.removeListener=function(x,E){var S,C,k,$,J;if(a(E),C=this._events,C===void 0)return this;if(S=C[x],S===void 0)return this;if(S===E||S.listener===E)--this._eventsCount===0?this._events=Object.create(null):(delete C[x],C.removeListener&&this.emit("removeListener",x,S.listener||E));else if(typeof S!="function"){for(k=-1,$=S.length-1;$>=0;$--)if(S[$]===E||S[$].listener===E){J=S[$].listener,k=$;break}if(k<0)return this;k===0?S.shift():p(S,k),S.length===1&&(C[x]=S[0]),C.removeListener!==void 0&&this.emit("removeListener",x,J||E)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(x){var E,S,C;if(S=this._events,S===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete S[x]),this;if(arguments.length===0){var k=Object.keys(S),$;for(C=0;C<k.length;++C)$=k[C],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(E=S[x],typeof E=="function")this.removeListener(x,E);else if(E!==void 0)for(C=E.length-1;C>=0;C--)this.removeListener(x,E[C]);return this};function h(_,x,E){var S=_._events;if(S===void 0)return[];var C=S[x];return C===void 0?[]:typeof C=="function"?E?[C.listener||C]:[C]:E?m(C):g(C,C.length)}s.prototype.listeners=function(x){return h(this,x,!0)},s.prototype.rawListeners=function(x){return h(this,x,!1)},s.listenerCount=function(_,x){return typeof _.listenerCount=="function"?_.listenerCount(x):d.call(_,x)},s.prototype.listenerCount=d;function d(_){var x=this._events;if(x!==void 0){var E=x[_];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function g(_,x){for(var E=new Array(x),S=0;S<x;++S)E[S]=_[S];return E}function p(_,x){for(;x+1<_.length;x++)_[x]=_[x+1];_.pop()}function m(_){for(var x=new Array(_.length),E=0;E<x.length;++E)x[E]=_[E].listener||_[E];return x}function y(_,x){return new Promise(function(E,S){function C($){_.removeListener(x,k),S($)}function k(){typeof _.removeListener=="function"&&_.removeListener("error",C),E([].slice.call(arguments))}b(_,x,k,{once:!0}),x!=="error"&&v(_,C,{once:!0})})}function v(_,x,E){typeof _.on=="function"&&b(_,"error",x,E)}function b(_,x,E,S){if(typeof _.on=="function")S.once?_.once(x,E):_.on(x,E);else if(typeof _.addEventListener=="function")_.addEventListener(x,function C(k){S.once&&_.removeEventListener(x,C),E(k)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return Km.exports}var px,_4;function PV(){return _4||(_4=1,px=kV().EventEmitter),px}var gx,S4;function hde(){if(S4)return gx;S4=1;function r(g,p){var m=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);p&&(y=y.filter(function(v){return Object.getOwnPropertyDescriptor(g,v).enumerable})),m.push.apply(m,y)}return m}function e(g){for(var p=1;p<arguments.length;p++){var m=arguments[p]!=null?arguments[p]:{};p%2?r(Object(m),!0).forEach(function(y){t(g,y,m[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(m)):r(Object(m)).forEach(function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(m,y))})}return g}function t(g,p,m){return p=o(p),p in g?Object.defineProperty(g,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):g[p]=m,g}function n(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function i(g,p){for(var m=0;m<p.length;m++){var y=p[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,o(y.key),y)}}function s(g,p,m){return p&&i(g.prototype,p),Object.defineProperty(g,"prototype",{writable:!1}),g}function o(g){var p=a(g,"string");return typeof p=="symbol"?p:String(p)}function a(g,p){if(typeof g!="object"||g===null)return g;var m=g[Symbol.toPrimitive];if(m!==void 0){var y=m.call(g,p);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}var c=xc(),l=c.Buffer,u=Hf,f=u.inspect,h=f&&f.custom||"inspect";function d(g,p,m){l.prototype.copy.call(g,p,m)}return gx=function(){function g(){n(this,g),this.head=null,this.tail=null,this.length=0}return s(g,[{key:"push",value:function(m){var y={data:m,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(m){var y={data:m,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var y=this.head,v=""+y.data;y=y.next;)v+=m+y.data;return v}},{key:"concat",value:function(m){if(this.length===0)return l.alloc(0);for(var y=l.allocUnsafe(m>>>0),v=this.head,b=0;v;)d(v.data,y,b),b+=v.data.length,v=v.next;return y}},{key:"consume",value:function(m,y){var v;return m<this.head.data.length?(v=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?v=this.shift():v=y?this._getString(m):this._getBuffer(m),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var y=this.head,v=1,b=y.data;for(m-=b.length;y=y.next;){var _=y.data,x=m>_.length?_.length:m;if(x===_.length?b+=_:b+=_.slice(0,m),m-=x,m===0){x===_.length?(++v,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=_.slice(x));break}++v}return this.length-=v,b}},{key:"_getBuffer",value:function(m){var y=l.allocUnsafe(m),v=this.head,b=1;for(v.data.copy(y),m-=v.data.length;v=v.next;){var _=v.data,x=m>_.length?_.length:m;if(_.copy(y,y.length-m,0,x),m-=x,m===0){x===_.length?(++b,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=_.slice(x));break}++b}return this.length-=b,y}},{key:h,value:function(m,y){return f(this,e(e({},y),{},{depth:0,customInspect:!1}))}}]),g}(),gx}var mx,E4;function OV(){if(E4)return mx;E4=1;function r(o,a){var c=this,l=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return l||u?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Kt.nextTick(i,this,o)):Kt.nextTick(i,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(f){!a&&f?c._writableState?c._writableState.errorEmitted?Kt.nextTick(t,c):(c._writableState.errorEmitted=!0,Kt.nextTick(e,c,f)):Kt.nextTick(e,c,f):a?(Kt.nextTick(t,c),a(f)):Kt.nextTick(t,c)}),this)}function e(o,a){i(o,a),t(o)}function t(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(o,a){o.emit("error",a)}function s(o,a){var c=o._readableState,l=o._writableState;c&&c.autoDestroy||l&&l.autoDestroy?o.destroy(a):o.emit("error",a)}return mx={destroy:r,undestroy:n,errorOrDestroy:s},mx}var yx={},A4;function tp(){if(A4)return yx;A4=1;function r(a,c){a.prototype=Object.create(c.prototype),a.prototype.constructor=a,a.__proto__=c}var e={};function t(a,c,l){l||(l=Error);function u(h,d,g){return typeof c=="string"?c:c(h,d,g)}var f=function(h){r(d,h);function d(g,p,m){return h.call(this,u(g,p,m))||this}return d}(l);f.prototype.name=l.name,f.prototype.code=a,e[a]=f}function n(a,c){if(Array.isArray(a)){var l=a.length;return a=a.map(function(u){return String(u)}),l>2?"one of ".concat(c," ").concat(a.slice(0,l-1).join(", "),", or ")+a[l-1]:l===2?"one of ".concat(c," ").concat(a[0]," or ").concat(a[1]):"of ".concat(c," ").concat(a[0])}else return"of ".concat(c," ").concat(String(a))}function i(a,c,l){return a.substr(0,c.length)===c}function s(a,c,l){return(l===void 0||l>a.length)&&(l=a.length),a.substring(l-c.length,l)===c}function o(a,c,l){return typeof l!="number"&&(l=0),l+c.length>a.length?!1:a.indexOf(c,l)!==-1}return t("ERR_INVALID_OPT_VALUE",function(a,c){return'The value "'+c+'" is invalid for option "'+a+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(a,c,l){var u;typeof c=="string"&&i(c,"not ")?(u="must not be",c=c.replace(/^not /,"")):u="must be";var f;if(s(a," argument"))f="The ".concat(a," ").concat(u," ").concat(n(c,"type"));else{var h=o(a,".")?"property":"argument";f='The "'.concat(a,'" ').concat(h," ").concat(u," ").concat(n(c,"type"))}return f+=". Received type ".concat(typeof l),f},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),yx.codes=e,yx}var vx,I4;function DV(){if(I4)return vx;I4=1;var r=tp().codes.ERR_INVALID_OPT_VALUE;function e(n,i,s){return n.highWaterMark!=null?n.highWaterMark:i?n[s]:null}function t(n,i,s,o){var a=e(i,o,s);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var c=o?s:"highWaterMark";throw new r(c,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return vx={getHighWaterMark:t},vx}var bx,C4;function dde(){if(C4)return bx;C4=1,bx=r;function r(t,n){if(e("noDeprecation"))return t;var i=!1;function s(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return t.apply(this,arguments)}return s}function e(t){try{if(!gi.localStorage)return!1}catch{return!1}var n=gi.localStorage[t];return n==null?!1:String(n).toLowerCase()==="true"}return bx}var wx,T4;function $V(){if(T4)return wx;T4=1,wx=C;function r(U){var Z=this;this.next=null,this.entry=null,this.finish=function(){I(Z,U)}}var e;C.WritableState=E;var t={deprecate:dde()},n=PV(),i=xc().Buffer,s=(typeof gi<"u"?gi:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(U){return i.from(U)}function a(U){return i.isBuffer(U)||U instanceof s}var c=OV(),l=DV(),u=l.getHighWaterMark,f=tp().codes,h=f.ERR_INVALID_ARG_TYPE,d=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,p=f.ERR_STREAM_CANNOT_PIPE,m=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,v=f.ERR_STREAM_WRITE_AFTER_END,b=f.ERR_UNKNOWN_ENCODING,_=c.errorOrDestroy;yi()(C,n);function x(){}function E(U,Z,oe){e=e||Sd(),U=U||{},typeof oe!="boolean"&&(oe=Z instanceof e),this.objectMode=!!U.objectMode,oe&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=u(this,U,"writableHighWaterMark",oe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var he=U.decodeStrings===!1;this.decodeStrings=!he,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(re){N(Z,re)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}E.prototype.getBuffer=function(){for(var Z=this.bufferedRequest,oe=[];Z;)oe.push(Z),Z=Z.next;return oe},function(){try{Object.defineProperty(E.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var S;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(S=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(Z){return S.call(this,Z)?!0:this!==C?!1:Z&&Z._writableState instanceof E}})):S=function(Z){return Z instanceof this};function C(U){e=e||Sd();var Z=this instanceof e;if(!Z&&!S.call(C,this))return new C(U);this._writableState=new E(U,this,Z),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),n.call(this)}C.prototype.pipe=function(){_(this,new p)};function k(U,Z){var oe=new v;_(U,oe),Kt.nextTick(Z,oe)}function $(U,Z,oe,he){var re;return oe===null?re=new y:typeof oe!="string"&&!Z.objectMode&&(re=new h("chunk",["string","Buffer"],oe)),re?(_(U,re),Kt.nextTick(he,re),!1):!0}C.prototype.write=function(U,Z,oe){var he=this._writableState,re=!1,F=!he.objectMode&&a(U);return F&&!i.isBuffer(U)&&(U=o(U)),typeof Z=="function"&&(oe=Z,Z=null),F?Z="buffer":Z||(Z=he.defaultEncoding),typeof oe!="function"&&(oe=x),he.ending?k(this,oe):(F||$(this,he,U,oe))&&(he.pendingcb++,re=j(this,he,F,U,Z,oe)),re},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&G(this,U))},C.prototype.setDefaultEncoding=function(Z){if(typeof Z=="string"&&(Z=Z.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Z+"").toLowerCase())>-1))throw new b(Z);return this._writableState.defaultEncoding=Z,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function J(U,Z,oe){return!U.objectMode&&U.decodeStrings!==!1&&typeof Z=="string"&&(Z=i.from(Z,oe)),Z}Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function j(U,Z,oe,he,re,F){if(!oe){var H=J(Z,he,re);he!==H&&(oe=!0,re="buffer",he=H)}var ue=Z.objectMode?1:he.length;Z.length+=ue;var le=Z.length<Z.highWaterMark;if(le||(Z.needDrain=!0),Z.writing||Z.corked){var we=Z.lastBufferedRequest;Z.lastBufferedRequest={chunk:he,encoding:re,isBuf:oe,callback:F,next:null},we?we.next=Z.lastBufferedRequest:Z.bufferedRequest=Z.lastBufferedRequest,Z.bufferedRequestCount+=1}else L(U,Z,!1,ue,he,re,F);return le}function L(U,Z,oe,he,re,F,H){Z.writelen=he,Z.writecb=H,Z.writing=!0,Z.sync=!0,Z.destroyed?Z.onwrite(new m("write")):oe?U._writev(re,Z.onwrite):U._write(re,F,Z.onwrite),Z.sync=!1}function w(U,Z,oe,he,re){--Z.pendingcb,oe?(Kt.nextTick(re,he),Kt.nextTick(A,U,Z),U._writableState.errorEmitted=!0,_(U,he)):(re(he),U._writableState.errorEmitted=!0,_(U,he),A(U,Z))}function R(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function N(U,Z){var oe=U._writableState,he=oe.sync,re=oe.writecb;if(typeof re!="function")throw new g;if(R(oe),Z)w(U,oe,he,Z,re);else{var F=te(oe)||U.destroyed;!F&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&G(U,oe),he?Kt.nextTick(Y,U,oe,F,re):Y(U,oe,F,re)}}function Y(U,Z,oe,he){oe||z(U,Z),Z.pendingcb--,he(),A(U,Z)}function z(U,Z){Z.length===0&&Z.needDrain&&(Z.needDrain=!1,U.emit("drain"))}function G(U,Z){Z.bufferProcessing=!0;var oe=Z.bufferedRequest;if(U._writev&&oe&&oe.next){var he=Z.bufferedRequestCount,re=new Array(he),F=Z.corkedRequestsFree;F.entry=oe;for(var H=0,ue=!0;oe;)re[H]=oe,oe.isBuf||(ue=!1),oe=oe.next,H+=1;re.allBuffers=ue,L(U,Z,!0,Z.length,re,"",F.finish),Z.pendingcb++,Z.lastBufferedRequest=null,F.next?(Z.corkedRequestsFree=F.next,F.next=null):Z.corkedRequestsFree=new r(Z),Z.bufferedRequestCount=0}else{for(;oe;){var le=oe.chunk,we=oe.encoding,ie=oe.callback,B=Z.objectMode?1:le.length;if(L(U,Z,!1,B,le,we,ie),oe=oe.next,Z.bufferedRequestCount--,Z.writing)break}oe===null&&(Z.lastBufferedRequest=null)}Z.bufferedRequest=oe,Z.bufferProcessing=!1}C.prototype._write=function(U,Z,oe){oe(new d("_write()"))},C.prototype._writev=null,C.prototype.end=function(U,Z,oe){var he=this._writableState;return typeof U=="function"?(oe=U,U=null,Z=null):typeof Z=="function"&&(oe=Z,Z=null),U!=null&&this.write(U,Z),he.corked&&(he.corked=1,this.uncork()),he.ending||O(this,he,oe),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function te(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function X(U,Z){U._final(function(oe){Z.pendingcb--,oe&&_(U,oe),Z.prefinished=!0,U.emit("prefinish"),A(U,Z)})}function T(U,Z){!Z.prefinished&&!Z.finalCalled&&(typeof U._final=="function"&&!Z.destroyed?(Z.pendingcb++,Z.finalCalled=!0,Kt.nextTick(X,U,Z)):(Z.prefinished=!0,U.emit("prefinish")))}function A(U,Z){var oe=te(Z);if(oe&&(T(U,Z),Z.pendingcb===0&&(Z.finished=!0,U.emit("finish"),Z.autoDestroy))){var he=U._readableState;(!he||he.autoDestroy&&he.endEmitted)&&U.destroy()}return oe}function O(U,Z,oe){Z.ending=!0,A(U,Z),oe&&(Z.finished?Kt.nextTick(oe):U.once("finish",oe)),Z.ended=!0,U.writable=!1}function I(U,Z,oe){var he=U.entry;for(U.entry=null;he;){var re=he.callback;Z.pendingcb--,re(oe),he=he.next}Z.corkedRequestsFree.next=U}return Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Z){this._writableState&&(this._writableState.destroyed=Z)}}),C.prototype.destroy=c.destroy,C.prototype._undestroy=c.undestroy,C.prototype._destroy=function(U,Z){Z(U)},wx}var xx,R4;function Sd(){if(R4)return xx;R4=1;var r=Object.keys||function(l){var u=[];for(var f in l)u.push(f);return u};xx=o;var e=MV(),t=$V();yi()(o,e);for(var n=r(t.prototype),i=0;i<n.length;i++){var s=n[i];o.prototype[s]||(o.prototype[s]=t.prototype[s])}function o(l){if(!(this instanceof o))return new o(l);e.call(this,l),t.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||Kt.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=u,this._writableState.destroyed=u)}}),xx}var _x={},k4;function YA(){if(k4)return _x;k4=1;var r=Xs().Buffer,e=r.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(y){if(!y)return"utf8";for(var v;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(v)return;y=(""+y).toLowerCase(),v=!0}}function n(y){var v=t(y);if(typeof v!="string"&&(r.isEncoding===e||!e(y)))throw new Error("Unknown encoding: "+y);return v||y}_x.StringDecoder=i;function i(y){this.encoding=n(y);var v;switch(this.encoding){case"utf16le":this.text=f,this.end=h,v=4;break;case"utf8":this.fillLast=c,v=4;break;case"base64":this.text=d,this.end=g,v=3;break;default:this.write=p,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(v)}i.prototype.write=function(y){if(y.length===0)return"";var v,b;if(this.lastNeed){if(v=this.fillLast(y),v===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<y.length?v?v+this.text(y,b):this.text(y,b):v||""},i.prototype.end=u,i.prototype.text=l,i.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function s(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function o(y,v,b){var _=v.length-1;if(_<b)return 0;var x=s(v[_]);return x>=0?(x>0&&(y.lastNeed=x-1),x):--_<b||x===-2?0:(x=s(v[_]),x>=0?(x>0&&(y.lastNeed=x-2),x):--_<b||x===-2?0:(x=s(v[_]),x>=0?(x>0&&(x===2?x=0:y.lastNeed=x-3),x):0))}function a(y,v,b){if((v[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return y.lastNeed=2,""}}function c(y){var v=this.lastTotal-this.lastNeed,b=a(this,y);if(b!==void 0)return b;if(this.lastNeed<=y.length)return y.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,v,0,y.length),this.lastNeed-=y.length}function l(y,v){var b=o(this,y,v);if(!this.lastNeed)return y.toString("utf8",v);this.lastTotal=b;var _=y.length-(b-this.lastNeed);return y.copy(this.lastChar,0,_),y.toString("utf8",v,_)}function u(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+"":v}function f(y,v){if((y.length-v)%2===0){var b=y.toString("utf16le",v);if(b){var _=b.charCodeAt(b.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",v,y.length-1)}function h(y){var v=y&&y.length?this.write(y):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,b)}return v}function d(y,v){var b=(y.length-v)%3;return b===0?y.toString("base64",v):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",v,y.length-b))}function g(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function p(y){return y.toString(this.encoding)}function m(y){return y&&y.length?this.write(y):""}return _x}var Sx,P4;function n3(){if(P4)return Sx;P4=1;var r=tp().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var o=!1;return function(){if(!o){o=!0;for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];s.apply(this,c)}}}function t(){}function n(s){return s.setHeader&&typeof s.abort=="function"}function i(s,o,a){if(typeof o=="function")return i(s,null,o);o||(o={}),a=e(a||t);var c=o.readable||o.readable!==!1&&s.readable,l=o.writable||o.writable!==!1&&s.writable,u=function(){s.writable||h()},f=s._writableState&&s._writableState.finished,h=function(){l=!1,f=!0,c||a.call(s)},d=s._readableState&&s._readableState.endEmitted,g=function(){c=!1,d=!0,l||a.call(s)},p=function(b){a.call(s,b)},m=function(){var b;if(c&&!d)return(!s._readableState||!s._readableState.ended)&&(b=new r),a.call(s,b);if(l&&!f)return(!s._writableState||!s._writableState.ended)&&(b=new r),a.call(s,b)},y=function(){s.req.on("finish",h)};return n(s)?(s.on("complete",h),s.on("abort",m),s.req?y():s.on("request",y)):l&&!s._writableState&&(s.on("end",u),s.on("close",u)),s.on("end",g),s.on("finish",h),o.error!==!1&&s.on("error",p),s.on("close",m),function(){s.removeListener("complete",h),s.removeListener("abort",m),s.removeListener("request",y),s.req&&s.req.removeListener("finish",h),s.removeListener("end",u),s.removeListener("close",u),s.removeListener("finish",h),s.removeListener("end",g),s.removeListener("error",p),s.removeListener("close",m)}}return Sx=i,Sx}var Ex,O4;function pde(){if(O4)return Ex;O4=1;var r;function e(b,_,x){return _=t(_),_ in b?Object.defineProperty(b,_,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[_]=x,b}function t(b){var _=n(b,"string");return typeof _=="symbol"?_:String(_)}function n(b,_){if(typeof b!="object"||b===null)return b;var x=b[Symbol.toPrimitive];if(x!==void 0){var E=x.call(b,_);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(b)}var i=n3(),s=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),u=Symbol("handlePromise"),f=Symbol("stream");function h(b,_){return{value:b,done:_}}function d(b){var _=b[s];if(_!==null){var x=b[f].read();x!==null&&(b[l]=null,b[s]=null,b[o]=null,_(h(x,!1)))}}function g(b){Kt.nextTick(d,b)}function p(b,_){return function(x,E){b.then(function(){if(_[c]){x(h(void 0,!0));return}_[u](x,E)},E)}}var m=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((r={get stream(){return this[f]},next:function(){var _=this,x=this[a];if(x!==null)return Promise.reject(x);if(this[c])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise(function(k,$){Kt.nextTick(function(){_[a]?$(_[a]):k(h(void 0,!0))})});var E=this[l],S;if(E)S=new Promise(p(E,this));else{var C=this[f].read();if(C!==null)return Promise.resolve(h(C,!1));S=new Promise(this[u])}return this[l]=S,S}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var _=this;return new Promise(function(x,E){_[f].destroy(null,function(S){if(S){E(S);return}x(h(void 0,!0))})})}),r),m),v=function(_){var x,E=Object.create(y,(x={},e(x,f,{value:_,writable:!0}),e(x,s,{value:null,writable:!0}),e(x,o,{value:null,writable:!0}),e(x,a,{value:null,writable:!0}),e(x,c,{value:_._readableState.endEmitted,writable:!0}),e(x,u,{value:function(C,k){var $=E[f].read();$?(E[l]=null,E[s]=null,E[o]=null,C(h($,!1))):(E[s]=C,E[o]=k)},writable:!0}),x));return E[l]=null,i(_,function(S){if(S&&S.code!=="ERR_STREAM_PREMATURE_CLOSE"){var C=E[o];C!==null&&(E[l]=null,E[s]=null,E[o]=null,C(S)),E[a]=S;return}var k=E[s];k!==null&&(E[l]=null,E[s]=null,E[o]=null,k(h(void 0,!0))),E[c]=!0}),_.on("readable",g.bind(null,E)),E};return Ex=v,Ex}var Ax,D4;function gde(){return D4||(D4=1,Ax=function(){throw new Error("Readable.from is not available in the browser")}),Ax}var Ix,$4;function MV(){if($4)return Ix;$4=1,Ix=k;var r;k.ReadableState=C,kV().EventEmitter;var e=function(H,ue){return H.listeners(ue).length},t=PV(),n=xc().Buffer,i=(typeof gi<"u"?gi:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(F){return n.from(F)}function o(F){return n.isBuffer(F)||F instanceof i}var a=Hf,c;a&&a.debuglog?c=a.debuglog("stream"):c=function(){};var l=hde(),u=OV(),f=DV(),h=f.getHighWaterMark,d=tp().codes,g=d.ERR_INVALID_ARG_TYPE,p=d.ERR_STREAM_PUSH_AFTER_EOF,m=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,b,_;yi()(k,t);var x=u.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(F,H,ue){if(typeof F.prependListener=="function")return F.prependListener(H,ue);!F._events||!F._events[H]?F.on(H,ue):Array.isArray(F._events[H])?F._events[H].unshift(ue):F._events[H]=[ue,F._events[H]]}function C(F,H,ue){r=r||Sd(),F=F||{},typeof ue!="boolean"&&(ue=H instanceof r),this.objectMode=!!F.objectMode,ue&&(this.objectMode=this.objectMode||!!F.readableObjectMode),this.highWaterMark=h(this,F,"readableHighWaterMark",ue),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=F.emitClose!==!1,this.autoDestroy=!!F.autoDestroy,this.destroyed=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(v||(v=YA().StringDecoder),this.decoder=new v(F.encoding),this.encoding=F.encoding)}function k(F){if(r=r||Sd(),!(this instanceof k))return new k(F);var H=this instanceof r;this._readableState=new C(F,this,H),this.readable=!0,F&&(typeof F.read=="function"&&(this._read=F.read),typeof F.destroy=="function"&&(this._destroy=F.destroy)),t.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),k.prototype.destroy=u.destroy,k.prototype._undestroy=u.undestroy,k.prototype._destroy=function(F,H){H(F)},k.prototype.push=function(F,H){var ue=this._readableState,le;return ue.objectMode?le=!0:typeof F=="string"&&(H=H||ue.defaultEncoding,H!==ue.encoding&&(F=n.from(F,H),H=""),le=!0),$(this,F,H,!1,le)},k.prototype.unshift=function(F){return $(this,F,null,!0,!1)};function $(F,H,ue,le,we){c("readableAddChunk",H);var ie=F._readableState;if(H===null)ie.reading=!1,N(F,ie);else{var B;if(we||(B=j(ie,H)),B)x(F,B);else if(ie.objectMode||H&&H.length>0)if(typeof H!="string"&&!ie.objectMode&&Object.getPrototypeOf(H)!==n.prototype&&(H=s(H)),le)ie.endEmitted?x(F,new y):J(F,ie,H,!0);else if(ie.ended)x(F,new p);else{if(ie.destroyed)return!1;ie.reading=!1,ie.decoder&&!ue?(H=ie.decoder.write(H),ie.objectMode||H.length!==0?J(F,ie,H,!1):G(F,ie)):J(F,ie,H,!1)}else le||(ie.reading=!1,G(F,ie))}return!ie.ended&&(ie.length<ie.highWaterMark||ie.length===0)}function J(F,H,ue,le){H.flowing&&H.length===0&&!H.sync?(H.awaitDrain=0,F.emit("data",ue)):(H.length+=H.objectMode?1:ue.length,le?H.buffer.unshift(ue):H.buffer.push(ue),H.needReadable&&Y(F)),G(F,H)}function j(F,H){var ue;return!o(H)&&typeof H!="string"&&H!==void 0&&!F.objectMode&&(ue=new g("chunk",["string","Buffer","Uint8Array"],H)),ue}k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function(F){v||(v=YA().StringDecoder);var H=new v(F);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var ue=this._readableState.buffer.head,le="";ue!==null;)le+=H.write(ue.data),ue=ue.next;return this._readableState.buffer.clear(),le!==""&&this._readableState.buffer.push(le),this._readableState.length=le.length,this};var L=1073741824;function w(F){return F>=L?F=L:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}function R(F,H){return F<=0||H.length===0&&H.ended?0:H.objectMode?1:F!==F?H.flowing&&H.length?H.buffer.head.data.length:H.length:(F>H.highWaterMark&&(H.highWaterMark=w(F)),F<=H.length?F:H.ended?H.length:(H.needReadable=!0,0))}k.prototype.read=function(F){c("read",F),F=parseInt(F,10);var H=this._readableState,ue=F;if(F!==0&&(H.emittedReadable=!1),F===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return c("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?oe(this):Y(this),null;if(F=R(F,H),F===0&&H.ended)return H.length===0&&oe(this),null;var le=H.needReadable;c("need readable",le),(H.length===0||H.length-F<H.highWaterMark)&&(le=!0,c("length less than watermark",le)),H.ended||H.reading?(le=!1,c("reading or ended",le)):le&&(c("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(F=R(ue,H)));var we;return F>0?we=Z(F,H):we=null,we===null?(H.needReadable=H.length<=H.highWaterMark,F=0):(H.length-=F,H.awaitDrain=0),H.length===0&&(H.ended||(H.needReadable=!0),ue!==F&&H.ended&&oe(this)),we!==null&&this.emit("data",we),we};function N(F,H){if(c("onEofChunk"),!H.ended){if(H.decoder){var ue=H.decoder.end();ue&&ue.length&&(H.buffer.push(ue),H.length+=H.objectMode?1:ue.length)}H.ended=!0,H.sync?Y(F):(H.needReadable=!1,H.emittedReadable||(H.emittedReadable=!0,z(F)))}}function Y(F){var H=F._readableState;c("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(c("emitReadable",H.flowing),H.emittedReadable=!0,Kt.nextTick(z,F))}function z(F){var H=F._readableState;c("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&(H.length||H.ended)&&(F.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,U(F)}function G(F,H){H.readingMore||(H.readingMore=!0,Kt.nextTick(te,F,H))}function te(F,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){var ue=H.length;if(c("maybeReadMore read 0"),F.read(0),ue===H.length)break}H.readingMore=!1}k.prototype._read=function(F){x(this,new m("_read()"))},k.prototype.pipe=function(F,H){var ue=this,le=this._readableState;switch(le.pipesCount){case 0:le.pipes=F;break;case 1:le.pipes=[le.pipes,F];break;default:le.pipes.push(F);break}le.pipesCount+=1,c("pipe count=%d opts=%j",le.pipesCount,H);var we=(!H||H.end!==!1)&&F!==Kt.stdout&&F!==Kt.stderr,ie=we?q:Oe;le.endEmitted?Kt.nextTick(ie):ue.once("end",ie),F.on("unpipe",B);function B(se,V){c("onunpipe"),se===ue&&V&&V.hasUnpiped===!1&&(V.hasUnpiped=!0,_e())}function q(){c("onend"),F.end()}var ne=X(ue);F.on("drain",ne);var de=!1;function _e(){c("cleanup"),F.removeListener("close",xe),F.removeListener("finish",Ae),F.removeListener("drain",ne),F.removeListener("error",Me),F.removeListener("unpipe",B),ue.removeListener("end",q),ue.removeListener("end",Oe),ue.removeListener("data",Ce),de=!0,le.awaitDrain&&(!F._writableState||F._writableState.needDrain)&&ne()}ue.on("data",Ce);function Ce(se){c("ondata");var V=F.write(se);c("dest.write",V),V===!1&&((le.pipesCount===1&&le.pipes===F||le.pipesCount>1&&re(le.pipes,F)!==-1)&&!de&&(c("false write response, pause",le.awaitDrain),le.awaitDrain++),ue.pause())}function Me(se){c("onerror",se),Oe(),F.removeListener("error",Me),e(F,"error")===0&&x(F,se)}S(F,"error",Me);function xe(){F.removeListener("finish",Ae),Oe()}F.once("close",xe);function Ae(){c("onfinish"),F.removeListener("close",xe),Oe()}F.once("finish",Ae);function Oe(){c("unpipe"),ue.unpipe(F)}return F.emit("pipe",ue),le.flowing||(c("pipe resume"),ue.resume()),F};function X(F){return function(){var ue=F._readableState;c("pipeOnDrain",ue.awaitDrain),ue.awaitDrain&&ue.awaitDrain--,ue.awaitDrain===0&&e(F,"data")&&(ue.flowing=!0,U(F))}}k.prototype.unpipe=function(F){var H=this._readableState,ue={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return F&&F!==H.pipes?this:(F||(F=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,F&&F.emit("unpipe",this,ue),this);if(!F){var le=H.pipes,we=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var ie=0;ie<we;ie++)le[ie].emit("unpipe",this,{hasUnpiped:!1});return this}var B=re(H.pipes,F);return B===-1?this:(H.pipes.splice(B,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),F.emit("unpipe",this,ue),this)},k.prototype.on=function(F,H){var ue=t.prototype.on.call(this,F,H),le=this._readableState;return F==="data"?(le.readableListening=this.listenerCount("readable")>0,le.flowing!==!1&&this.resume()):F==="readable"&&!le.endEmitted&&!le.readableListening&&(le.readableListening=le.needReadable=!0,le.flowing=!1,le.emittedReadable=!1,c("on readable",le.length,le.reading),le.length?Y(this):le.reading||Kt.nextTick(A,this)),ue},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(F,H){var ue=t.prototype.removeListener.call(this,F,H);return F==="readable"&&Kt.nextTick(T,this),ue},k.prototype.removeAllListeners=function(F){var H=t.prototype.removeAllListeners.apply(this,arguments);return(F==="readable"||F===void 0)&&Kt.nextTick(T,this),H};function T(F){var H=F._readableState;H.readableListening=F.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:F.listenerCount("data")>0&&F.resume()}function A(F){c("readable nexttick read 0"),F.read(0)}k.prototype.resume=function(){var F=this._readableState;return F.flowing||(c("resume"),F.flowing=!F.readableListening,O(this,F)),F.paused=!1,this};function O(F,H){H.resumeScheduled||(H.resumeScheduled=!0,Kt.nextTick(I,F,H))}function I(F,H){c("resume",H.reading),H.reading||F.read(0),H.resumeScheduled=!1,F.emit("resume"),U(F),H.flowing&&!H.reading&&F.read(0)}k.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function U(F){var H=F._readableState;for(c("flow",H.flowing);H.flowing&&F.read()!==null;);}k.prototype.wrap=function(F){var H=this,ue=this._readableState,le=!1;F.on("end",function(){if(c("wrapped end"),ue.decoder&&!ue.ended){var B=ue.decoder.end();B&&B.length&&H.push(B)}H.push(null)}),F.on("data",function(B){if(c("wrapped data"),ue.decoder&&(B=ue.decoder.write(B)),!(ue.objectMode&&B==null)&&!(!ue.objectMode&&(!B||!B.length))){var q=H.push(B);q||(le=!0,F.pause())}});for(var we in F)this[we]===void 0&&typeof F[we]=="function"&&(this[we]=function(q){return function(){return F[q].apply(F,arguments)}}(we));for(var ie=0;ie<E.length;ie++)F.on(E[ie],this.emit.bind(this,E[ie]));return this._read=function(B){c("wrapped _read",B),le&&(le=!1,F.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return b===void 0&&(b=pde()),b(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),k._fromList=Z,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Z(F,H){if(H.length===0)return null;var ue;return H.objectMode?ue=H.buffer.shift():!F||F>=H.length?(H.decoder?ue=H.buffer.join(""):H.buffer.length===1?ue=H.buffer.first():ue=H.buffer.concat(H.length),H.buffer.clear()):ue=H.buffer.consume(F,H.decoder),ue}function oe(F){var H=F._readableState;c("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,Kt.nextTick(he,H,F))}function he(F,H){if(c("endReadableNT",F.endEmitted,F.length),!F.endEmitted&&F.length===0&&(F.endEmitted=!0,H.readable=!1,H.emit("end"),F.autoDestroy)){var ue=H._writableState;(!ue||ue.autoDestroy&&ue.finished)&&H.destroy()}}typeof Symbol=="function"&&(k.from=function(F,H){return _===void 0&&(_=gde()),_(k,F,H)});function re(F,H){for(var ue=0,le=F.length;ue<le;ue++)if(F[ue]===H)return ue;return-1}return Ix}var Cx,M4;function BV(){if(M4)return Cx;M4=1,Cx=a;var r=tp().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,n=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=r.ERR_TRANSFORM_WITH_LENGTH_0,s=Sd();yi()(a,s);function o(u,f){var h=this._transformState;h.transforming=!1;var d=h.writecb;if(d===null)return this.emit("error",new t);h.writechunk=null,h.writecb=null,f!=null&&this.push(f),d(u);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function a(u){if(!(this instanceof a))return new a(u);s.call(this,u),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",c)}function c(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,h){l(u,f,h)}):l(this,null,null)}a.prototype.push=function(u,f){return this._transformState.needTransform=!1,s.prototype.push.call(this,u,f)},a.prototype._transform=function(u,f,h){h(new e("_transform()"))},a.prototype._write=function(u,f,h){var d=this._transformState;if(d.writecb=h,d.writechunk=u,d.writeencoding=f,!d.transforming){var g=this._readableState;(d.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},a.prototype._read=function(u){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},a.prototype._destroy=function(u,f){s.prototype._destroy.call(this,u,function(h){f(h)})};function l(u,f,h){if(f)return u.emit("error",f);if(h!=null&&u.push(h),u._writableState.length)throw new i;if(u._transformState.transforming)throw new n;return u.push(null)}return Cx}var Tx,B4;function mde(){if(B4)return Tx;B4=1,Tx=e;var r=BV();yi()(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,n,i){i(null,t)},Tx}var Rx,N4;function yde(){if(N4)return Rx;N4=1;var r;function e(h){var d=!1;return function(){d||(d=!0,h.apply(void 0,arguments))}}var t=tp().codes,n=t.ERR_MISSING_ARGS,i=t.ERR_STREAM_DESTROYED;function s(h){if(h)throw h}function o(h){return h.setHeader&&typeof h.abort=="function"}function a(h,d,g,p){p=e(p);var m=!1;h.on("close",function(){m=!0}),r===void 0&&(r=n3()),r(h,{readable:d,writable:g},function(v){if(v)return p(v);m=!0,p()});var y=!1;return function(v){if(!m&&!y){if(y=!0,o(h))return h.abort();if(typeof h.destroy=="function")return h.destroy();p(v||new i("pipe"))}}}function c(h){h()}function l(h,d){return h.pipe(d)}function u(h){return!h.length||typeof h[h.length-1]!="function"?s:h.pop()}function f(){for(var h=arguments.length,d=new Array(h),g=0;g<h;g++)d[g]=arguments[g];var p=u(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new n("streams");var m,y=d.map(function(v,b){var _=b<d.length-1,x=b>0;return a(v,_,x,function(E){m||(m=E),E&&y.forEach(c),!_&&(y.forEach(c),p(m))})});return d.reduce(l)}return Rx=f,Rx}var L4;function vde(){return L4||(L4=1,function(r,e){e=r.exports=MV(),e.Stream=e,e.Readable=e,e.Writable=$V(),e.Duplex=Sd(),e.Transform=BV(),e.PassThrough=mde(),e.finished=n3(),e.pipeline=yde()}(Vm,Vm.exports)),Vm.exports}var kx,F4;function NV(){if(F4)return kx;F4=1;var r=Xs().Buffer,e=vde().Transform,t=yi();function n(s,o){if(!r.isBuffer(s)&&typeof s!="string")throw new TypeError(o+" must be a string or a buffer")}function i(s){e.call(this),this._block=r.allocUnsafe(s),this._blockSize=s,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return t(i,e),i.prototype._transform=function(s,o,a){var c=null;try{this.update(s,o)}catch(l){c=l}a(c)},i.prototype._flush=function(s){var o=null;try{this.push(this.digest())}catch(a){o=a}s(o)},i.prototype.update=function(s,o){if(n(s,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(s)||(s=r.from(s,o));for(var a=this._block,c=0;this._blockOffset+s.length-c>=this._blockSize;){for(var l=this._blockOffset;l<this._blockSize;)a[l++]=s[c++];this._update(),this._blockOffset=0}for(;c<s.length;)a[this._blockOffset++]=s[c++];for(var u=0,f=s.length*8;f>0;++u)this._length[u]+=f,f=this._length[u]/4294967296|0,f>0&&(this._length[u]-=4294967296*f);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(s){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var o=this._digest();s!==void 0&&(o=o.toString(s)),this._block.fill(0),this._blockOffset=0;for(var a=0;a<4;++a)this._length[a]=0;return o},i.prototype._digest=function(){throw new Error("_digest is not implemented")},kx=i,kx}var Px,U4;function bde(){if(U4)return Px;U4=1;var r=yi(),e=NV(),t=Xs().Buffer,n=new Array(16);function i(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}r(i,e),i.prototype._update=function(){for(var u=n,f=0;f<16;++f)u[f]=this._block.readInt32LE(f*4);var h=this._a,d=this._b,g=this._c,p=this._d;h=o(h,d,g,p,u[0],3614090360,7),p=o(p,h,d,g,u[1],3905402710,12),g=o(g,p,h,d,u[2],606105819,17),d=o(d,g,p,h,u[3],3250441966,22),h=o(h,d,g,p,u[4],4118548399,7),p=o(p,h,d,g,u[5],1200080426,12),g=o(g,p,h,d,u[6],2821735955,17),d=o(d,g,p,h,u[7],4249261313,22),h=o(h,d,g,p,u[8],1770035416,7),p=o(p,h,d,g,u[9],2336552879,12),g=o(g,p,h,d,u[10],4294925233,17),d=o(d,g,p,h,u[11],2304563134,22),h=o(h,d,g,p,u[12],1804603682,7),p=o(p,h,d,g,u[13],4254626195,12),g=o(g,p,h,d,u[14],2792965006,17),d=o(d,g,p,h,u[15],1236535329,22),h=a(h,d,g,p,u[1],4129170786,5),p=a(p,h,d,g,u[6],3225465664,9),g=a(g,p,h,d,u[11],643717713,14),d=a(d,g,p,h,u[0],3921069994,20),h=a(h,d,g,p,u[5],3593408605,5),p=a(p,h,d,g,u[10],38016083,9),g=a(g,p,h,d,u[15],3634488961,14),d=a(d,g,p,h,u[4],3889429448,20),h=a(h,d,g,p,u[9],568446438,5),p=a(p,h,d,g,u[14],3275163606,9),g=a(g,p,h,d,u[3],4107603335,14),d=a(d,g,p,h,u[8],1163531501,20),h=a(h,d,g,p,u[13],2850285829,5),p=a(p,h,d,g,u[2],4243563512,9),g=a(g,p,h,d,u[7],1735328473,14),d=a(d,g,p,h,u[12],2368359562,20),h=c(h,d,g,p,u[5],4294588738,4),p=c(p,h,d,g,u[8],2272392833,11),g=c(g,p,h,d,u[11],1839030562,16),d=c(d,g,p,h,u[14],4259657740,23),h=c(h,d,g,p,u[1],2763975236,4),p=c(p,h,d,g,u[4],1272893353,11),g=c(g,p,h,d,u[7],4139469664,16),d=c(d,g,p,h,u[10],3200236656,23),h=c(h,d,g,p,u[13],681279174,4),p=c(p,h,d,g,u[0],3936430074,11),g=c(g,p,h,d,u[3],3572445317,16),d=c(d,g,p,h,u[6],76029189,23),h=c(h,d,g,p,u[9],3654602809,4),p=c(p,h,d,g,u[12],3873151461,11),g=c(g,p,h,d,u[15],530742520,16),d=c(d,g,p,h,u[2],3299628645,23),h=l(h,d,g,p,u[0],4096336452,6),p=l(p,h,d,g,u[7],1126891415,10),g=l(g,p,h,d,u[14],2878612391,15),d=l(d,g,p,h,u[5],4237533241,21),h=l(h,d,g,p,u[12],1700485571,6),p=l(p,h,d,g,u[3],2399980690,10),g=l(g,p,h,d,u[10],4293915773,15),d=l(d,g,p,h,u[1],2240044497,21),h=l(h,d,g,p,u[8],1873313359,6),p=l(p,h,d,g,u[15],4264355552,10),g=l(g,p,h,d,u[6],2734768916,15),d=l(d,g,p,h,u[13],1309151649,21),h=l(h,d,g,p,u[4],4149444226,6),p=l(p,h,d,g,u[11],3174756917,10),g=l(g,p,h,d,u[2],718787259,15),d=l(d,g,p,h,u[9],3951481745,21),this._a=this._a+h|0,this._b=this._b+d|0,this._c=this._c+g|0,this._d=this._d+p|0},i.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var u=t.allocUnsafe(16);return u.writeInt32LE(this._a,0),u.writeInt32LE(this._b,4),u.writeInt32LE(this._c,8),u.writeInt32LE(this._d,12),u};function s(u,f){return u<<f|u>>>32-f}function o(u,f,h,d,g,p,m){return s(u+(f&h|~f&d)+g+p|0,m)+f|0}function a(u,f,h,d,g,p,m){return s(u+(f&d|h&~d)+g+p|0,m)+f|0}function c(u,f,h,d,g,p,m){return s(u+(f^h^d)+g+p|0,m)+f|0}function l(u,f,h,d,g,p,m){return s(u+(h^(f|~d))+g+p|0,m)+f|0}return Px=i,Px}var Ox,z4;function wde(){if(z4)return Ox;z4=1;var r=xc().Buffer,e=yi(),t=NV(),n=new Array(16),i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],o=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],a=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],c=[0,1518500249,1859775393,2400959708,2840853838],l=[1352829926,1548603684,1836072691,2053994217,0];function u(){t.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}e(u,t),u.prototype._update=function(){for(var y=n,v=0;v<16;++v)y[v]=this._block.readInt32LE(v*4);for(var b=this._a|0,_=this._b|0,x=this._c|0,E=this._d|0,S=this._e|0,C=this._a|0,k=this._b|0,$=this._c|0,J=this._d|0,j=this._e|0,L=0;L<80;L+=1){var w,R;L<16?(w=h(b,_,x,E,S,y[i[L]],c[0],o[L]),R=m(C,k,$,J,j,y[s[L]],l[0],a[L])):L<32?(w=d(b,_,x,E,S,y[i[L]],c[1],o[L]),R=p(C,k,$,J,j,y[s[L]],l[1],a[L])):L<48?(w=g(b,_,x,E,S,y[i[L]],c[2],o[L]),R=g(C,k,$,J,j,y[s[L]],l[2],a[L])):L<64?(w=p(b,_,x,E,S,y[i[L]],c[3],o[L]),R=d(C,k,$,J,j,y[s[L]],l[3],a[L])):(w=m(b,_,x,E,S,y[i[L]],c[4],o[L]),R=h(C,k,$,J,j,y[s[L]],l[4],a[L])),b=S,S=E,E=f(x,10),x=_,_=w,C=j,j=J,J=f($,10),$=k,k=R}var N=this._b+x+J|0;this._b=this._c+E+j|0,this._c=this._d+S+C|0,this._d=this._e+b+k|0,this._e=this._a+_+$|0,this._a=N},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var y=r.alloc?r.alloc(20):new r(20);return y.writeInt32LE(this._a,0),y.writeInt32LE(this._b,4),y.writeInt32LE(this._c,8),y.writeInt32LE(this._d,12),y.writeInt32LE(this._e,16),y};function f(y,v){return y<<v|y>>>32-v}function h(y,v,b,_,x,E,S,C){return f(y+(v^b^_)+E+S|0,C)+x|0}function d(y,v,b,_,x,E,S,C){return f(y+(v&b|~v&_)+E+S|0,C)+x|0}function g(y,v,b,_,x,E,S,C){return f(y+((v|~b)^_)+E+S|0,C)+x|0}function p(y,v,b,_,x,E,S,C){return f(y+(v&_|b&~_)+E+S|0,C)+x|0}function m(y,v,b,_,x,E,S,C){return f(y+(v^(b|~_))+E+S|0,C)+x|0}return Ox=u,Ox}var Dx={exports:{}},$x,q4;function xde(){if(q4)return $x;q4=1;var r={}.toString;return $x=Array.isArray||function(e){return r.call(e)=="[object Array]"},$x}var Mx,j4;function _c(){return j4||(j4=1,Mx=TypeError),Mx}var Bx,V4;function i3(){return V4||(V4=1,Bx=Object),Bx}var Nx,K4;function _de(){return K4||(K4=1,Nx=Error),Nx}var Lx,H4;function Sde(){return H4||(H4=1,Lx=EvalError),Lx}var Fx,W4;function Ede(){return W4||(W4=1,Fx=RangeError),Fx}var Ux,G4;function Ade(){return G4||(G4=1,Ux=ReferenceError),Ux}var zx,Y4;function LV(){return Y4||(Y4=1,zx=SyntaxError),zx}var qx,X4;function Ide(){return X4||(X4=1,qx=URIError),qx}var jx,J4;function Cde(){return J4||(J4=1,jx=Math.abs),jx}var Vx,Q4;function Tde(){return Q4||(Q4=1,Vx=Math.floor),Vx}var Kx,Z4;function Rde(){return Z4||(Z4=1,Kx=Math.max),Kx}var Hx,eD;function kde(){return eD||(eD=1,Hx=Math.min),Hx}var Wx,tD;function Pde(){return tD||(tD=1,Wx=Math.pow),Wx}var Gx,rD;function Ode(){return rD||(rD=1,Gx=Math.round),Gx}var Yx,nD;function Dde(){return nD||(nD=1,Yx=Number.isNaN||function(e){return e!==e}),Yx}var Xx,iD;function $de(){if(iD)return Xx;iD=1;var r=Dde();return Xx=function(t){return r(t)||t===0?t:t<0?-1:1},Xx}var Jx,sD;function Mde(){return sD||(sD=1,Jx=Object.getOwnPropertyDescriptor),Jx}var Qx,oD;function rp(){if(oD)return Qx;oD=1;var r=Mde();if(r)try{r([],"length")}catch{r=null}return Qx=r,Qx}var Zx,aD;function nw(){if(aD)return Zx;aD=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return Zx=r,Zx}var e_,cD;function s3(){return cD||(cD=1,e_=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),e_}var t_,lD;function Bde(){if(lD)return t_;lD=1;var r=typeof Symbol<"u"&&Symbol,e=s3();return t_=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},t_}var r_,uD;function FV(){return uD||(uD=1,r_=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),r_}var n_,fD;function UV(){if(fD)return n_;fD=1;var r=i3();return n_=r.getPrototypeOf||null,n_}var i_,hD;function Nde(){if(hD)return i_;hD=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(c,l){for(var u=[],f=0;f<c.length;f+=1)u[f]=c[f];for(var h=0;h<l.length;h+=1)u[h+c.length]=l[h];return u},s=function(c,l){for(var u=[],f=l,h=0;f<c.length;f+=1,h+=1)u[h]=c[f];return u},o=function(a,c){for(var l="",u=0;u<a.length;u+=1)l+=a[u],u+1<a.length&&(l+=c);return l};return i_=function(c){var l=this;if(typeof l!="function"||e.apply(l)!==n)throw new TypeError(r+l);for(var u=s(arguments,1),f,h=function(){if(this instanceof f){var y=l.apply(this,i(u,arguments));return Object(y)===y?y:this}return l.apply(c,i(u,arguments))},d=t(0,l.length-u.length),g=[],p=0;p<d;p++)g[p]="$"+p;if(f=Function("binder","return function ("+o(g,",")+"){ return binder.apply(this,arguments); }")(h),l.prototype){var m=function(){};m.prototype=l.prototype,f.prototype=new m,m.prototype=null}return f},i_}var s_,dD;function Yg(){if(dD)return s_;dD=1;var r=Nde();return s_=Function.prototype.bind||r,s_}var o_,pD;function o3(){return pD||(pD=1,o_=Function.prototype.call),o_}var a_,gD;function a3(){return gD||(gD=1,a_=Function.prototype.apply),a_}var c_,mD;function Lde(){return mD||(mD=1,c_=typeof Reflect<"u"&&Reflect&&Reflect.apply),c_}var l_,yD;function zV(){if(yD)return l_;yD=1;var r=Yg(),e=a3(),t=o3(),n=Lde();return l_=n||r.call(t,e),l_}var u_,vD;function c3(){if(vD)return u_;vD=1;var r=Yg(),e=_c(),t=o3(),n=zV();return u_=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return n(r,t,s)},u_}var f_,bD;function Fde(){if(bD)return f_;bD=1;var r=c3(),e=rp(),t;try{t=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var n=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return f_=n&&typeof n.get=="function"?r([n.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,f_}var h_,wD;function l3(){if(wD)return h_;wD=1;var r=FV(),e=UV(),t=Fde();return h_=r?function(i){return r(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,h_}var d_,xD;function qV(){if(xD)return d_;xD=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Yg();return d_=t.call(r,e),d_}var p_,_D;function Xg(){if(_D)return p_;_D=1;var r,e=i3(),t=_de(),n=Sde(),i=Ede(),s=Ade(),o=LV(),a=_c(),c=Ide(),l=Cde(),u=Tde(),f=Rde(),h=kde(),d=Pde(),g=Ode(),p=$de(),m=Function,y=function(he){try{return m('"use strict"; return ('+he+").constructor;")()}catch{}},v=rp(),b=nw(),_=function(){throw new a},x=v?function(){try{return arguments.callee,_}catch{try{return v(arguments,"callee").get}catch{return _}}}():_,E=Bde()(),S=l3(),C=UV(),k=FV(),$=a3(),J=o3(),j={},L=typeof Uint8Array>"u"||!S?r:S(Uint8Array),w={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":E&&S?S([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":j,"%AsyncGenerator%":j,"%AsyncGeneratorFunction%":j,"%AsyncIteratorPrototype%":j,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":m,"%GeneratorFunction%":j,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&S?S(S([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!E||!S?r:S(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":v,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!E||!S?r:S(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&S?S(""[Symbol.iterator]()):r,"%Symbol%":E?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":x,"%TypedArray%":L,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":J,"%Function.prototype.apply%":$,"%Object.defineProperty%":b,"%Object.getPrototypeOf%":C,"%Math.abs%":l,"%Math.floor%":u,"%Math.max%":f,"%Math.min%":h,"%Math.pow%":d,"%Math.round%":g,"%Math.sign%":p,"%Reflect.getPrototypeOf%":k};if(S)try{null.error}catch(he){var R=S(S(he));w["%Error.prototype%"]=R}var N=function he(re){var F;if(re==="%AsyncFunction%")F=y("async function () {}");else if(re==="%GeneratorFunction%")F=y("function* () {}");else if(re==="%AsyncGeneratorFunction%")F=y("async function* () {}");else if(re==="%AsyncGenerator%"){var H=he("%AsyncGeneratorFunction%");H&&(F=H.prototype)}else if(re==="%AsyncIteratorPrototype%"){var ue=he("%AsyncGenerator%");ue&&S&&(F=S(ue.prototype))}return w[re]=F,F},Y={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},z=Yg(),G=qV(),te=z.call(J,Array.prototype.concat),X=z.call($,Array.prototype.splice),T=z.call(J,String.prototype.replace),A=z.call(J,String.prototype.slice),O=z.call(J,RegExp.prototype.exec),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,U=/\\(\\)?/g,Z=function(re){var F=A(re,0,1),H=A(re,-1);if(F==="%"&&H!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(H==="%"&&F!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ue=[];return T(re,I,function(le,we,ie,B){ue[ue.length]=ie?T(B,U,"$1"):we||le}),ue},oe=function(re,F){var H=re,ue;if(G(Y,H)&&(ue=Y[H],H="%"+ue[0]+"%"),G(w,H)){var le=w[H];if(le===j&&(le=N(H)),typeof le>"u"&&!F)throw new a("intrinsic "+re+" exists, but is not available. Please file an issue!");return{alias:ue,name:H,value:le}}throw new o("intrinsic "+re+" does not exist!")};return p_=function(re,F){if(typeof re!="string"||re.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof F!="boolean")throw new a('"allowMissing" argument must be a boolean');if(O(/^%?[^%]*%?$/,re)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var H=Z(re),ue=H.length>0?H[0]:"",le=oe("%"+ue+"%",F),we=le.name,ie=le.value,B=!1,q=le.alias;q&&(ue=q[0],X(H,te([0,1],q)));for(var ne=1,de=!0;ne<H.length;ne+=1){var _e=H[ne],Ce=A(_e,0,1),Me=A(_e,-1);if((Ce==='"'||Ce==="'"||Ce==="`"||Me==='"'||Me==="'"||Me==="`")&&Ce!==Me)throw new o("property names with quotes must have matching quotes");if((_e==="constructor"||!de)&&(B=!0),ue+="."+_e,we="%"+ue+"%",G(w,we))ie=w[we];else if(ie!=null){if(!(_e in ie)){if(!F)throw new a("base intrinsic for "+re+" exists, but the property is not available.");return}if(v&&ne+1>=H.length){var xe=v(ie,_e);de=!!xe,de&&"get"in xe&&!("originalValue"in xe.get)?ie=xe.get:ie=ie[_e]}else de=G(ie,_e),ie=ie[_e];de&&!B&&(w[we]=ie)}}return ie},p_}var g_,SD;function wl(){if(SD)return g_;SD=1;var r=Xg(),e=c3(),t=e([r("%String.prototype.indexOf%")]);return g_=function(i,s){var o=r(i,!!s);return typeof o=="function"&&t(i,".prototype.")>-1?e([o]):o},g_}var m_,ED;function Ude(){if(ED)return m_;ED=1;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,t)}catch(v){v!==n&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(b){try{var _=r.call(b);return i.test(_)}catch{return!1}},o=function(b){try{return s(b)?!1:(r.call(b),!0)}catch{return!1}},a=Object.prototype.toString,c="[object Object]",l="[object Function]",u="[object GeneratorFunction]",f="[object HTMLAllCollection]",h="[object HTML document.all class]",d="[object HTMLCollection]",g=typeof Symbol=="function"&&!!Symbol.toStringTag,p=!(0 in[,]),m=function(){return!1};if(typeof document=="object"){var y=document.all;a.call(y)===a.call(document.all)&&(m=function(b){if((p||!b)&&(typeof b>"u"||typeof b=="object"))try{var _=a.call(b);return(_===f||_===h||_===d||_===c)&&b("")==null}catch{}return!1})}return m_=e?function(b){if(m(b))return!0;if(!b||typeof b!="function"&&typeof b!="object")return!1;try{e(b,null,t)}catch(_){if(_!==n)return!1}return!s(b)&&o(b)}:function(b){if(m(b))return!0;if(!b||typeof b!="function"&&typeof b!="object")return!1;if(g)return o(b);if(s(b))return!1;var _=a.call(b);return _!==l&&_!==u&&!/^\[object HTML/.test(_)?!1:o(b)},m_}var y_,AD;function zde(){if(AD)return y_;AD=1;var r=Ude(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=function(c,l,u){for(var f=0,h=c.length;f<h;f++)t.call(c,f)&&(u==null?l(c[f],f,c):l.call(u,c[f],f,c))},i=function(c,l,u){for(var f=0,h=c.length;f<h;f++)u==null?l(c.charAt(f),f,c):l.call(u,c.charAt(f),f,c)},s=function(c,l,u){for(var f in c)t.call(c,f)&&(u==null?l(c[f],f,c):l.call(u,c[f],f,c))};function o(a){return e.call(a)==="[object Array]"}return y_=function(c,l,u){if(!r(l))throw new TypeError("iterator must be a function");var f;arguments.length>=3&&(f=u),o(c)?n(c,l,f):typeof c=="string"?i(c,l,f):s(c,l,f)},y_}var v_,ID;function qde(){return ID||(ID=1,v_=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),v_}var b_,CD;function jde(){if(CD)return b_;CD=1;var r=qde(),e=typeof globalThis>"u"?gi:globalThis;return b_=function(){for(var n=[],i=0;i<r.length;i++)typeof e[r[i]]=="function"&&(n[n.length]=r[i]);return n},b_}var w_={exports:{}},x_,TD;function jV(){if(TD)return x_;TD=1;var r=nw(),e=LV(),t=_c(),n=rp();return x_=function(s,o,a){if(!s||typeof s!="object"&&typeof s!="function")throw new t("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,h=!!n&&n(s,o);if(r)r(s,o,{configurable:u===null&&h?h.configurable:!u,enumerable:c===null&&h?h.enumerable:!c,value:a,writable:l===null&&h?h.writable:!l});else if(f||!c&&!l&&!u)s[o]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},x_}var __,RD;function VV(){if(RD)return __;RD=1;var r=nw(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},__=e,__}var S_,kD;function Vde(){if(kD)return S_;kD=1;var r=Xg(),e=jV(),t=VV()(),n=rp(),i=_c(),s=r("%Math.floor%");return S_=function(a,c){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof c!="number"||c<0||c>4294967295||s(c)!==c)throw new i("`length` must be a positive 32-bit integer");var l=arguments.length>2&&!!arguments[2],u=!0,f=!0;if("length"in a&&n){var h=n(a,"length");h&&!h.configurable&&(u=!1),h&&!h.writable&&(f=!1)}return(u||f||!l)&&(t?e(a,"length",c,!0,!0):e(a,"length",c)),a},S_}var E_,PD;function Kde(){if(PD)return E_;PD=1;var r=Yg(),e=a3(),t=zV();return E_=function(){return t(r,e,arguments)},E_}var OD;function iw(){return OD||(OD=1,function(r){var e=Vde(),t=nw(),n=c3(),i=Kde();r.exports=function(o){var a=n(arguments),c=o.length-(arguments.length-1);return e(a,1+(c>0?c:0),!0)},t?t(r.exports,"apply",{value:i}):r.exports.apply=i}(w_)),w_.exports}var A_,DD;function sw(){if(DD)return A_;DD=1;var r=s3();return A_=function(){return r()&&!!Symbol.toStringTag},A_}var I_,$D;function KV(){if($D)return I_;$D=1;var r=zde(),e=jde(),t=iw(),n=wl(),i=rp(),s=l3(),o=n("Object.prototype.toString"),a=sw()(),c=typeof globalThis>"u"?gi:globalThis,l=e(),u=n("String.prototype.slice"),f=n("Array.prototype.indexOf",!0)||function(m,y){for(var v=0;v<m.length;v+=1)if(m[v]===y)return v;return-1},h={__proto__:null};a&&i&&s?r(l,function(p){var m=new c[p];if(Symbol.toStringTag in m&&s){var y=s(m),v=i(y,Symbol.toStringTag);if(!v&&y){var b=s(y);v=i(b,Symbol.toStringTag)}h["$"+p]=t(v.get)}}):r(l,function(p){var m=new c[p],y=m.slice||m.set;y&&(h["$"+p]=t(y))});var d=function(m){var y=!1;return r(h,function(v,b){if(!y)try{"$"+v(m)===b&&(y=u(b,1))}catch{}}),y},g=function(m){var y=!1;return r(h,function(v,b){if(!y)try{v(m),y=u(b,1)}catch{}}),y};return I_=function(m){if(!m||typeof m!="object")return!1;if(!a){var y=u(o(m),8,-1);return f(l,y)>-1?y:y!=="Object"?!1:g(m)}return i?d(m):null},I_}var C_,MD;function HV(){if(MD)return C_;MD=1;var r=KV();return C_=function(t){return!!r(t)},C_}var T_,BD;function Hde(){if(BD)return T_;BD=1;var r=_c(),e=wl(),t=e("TypedArray.prototype.buffer",!0),n=HV();return T_=t||function(s){if(!n(s))throw new r("Not a Typed Array");return s.buffer},T_}var R_,ND;function Wde(){if(ND)return R_;ND=1;var r=Xs().Buffer,e=xde(),t=Hde(),n=ArrayBuffer.isView||function(c){try{return t(c),!0}catch{return!1}},i=typeof Uint8Array<"u",s=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o=s&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);return R_=function(c,l){if(c instanceof r)return c;if(typeof c=="string")return r.from(c,l);if(s&&n(c)){if(c.byteLength===0)return r.alloc(0);if(o){var u=r.from(c.buffer,c.byteOffset,c.byteLength);if(u.byteLength===c.byteLength)return u}var f=c instanceof Uint8Array?c:new Uint8Array(c.buffer,c.byteOffset,c.byteLength),h=r.from(f);if(h.length===c.byteLength)return h}if(i&&c instanceof Uint8Array)return r.from(c);var d=e(c);if(d)for(var g=0;g<c.length;g+=1){var p=c[g];if(typeof p!="number"||p<0||p>255||~~p!==p)throw new RangeError("Array items must be numbers in the range 0-255.")}if(d||r.isBuffer(c)&&c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c))return r.from(c);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},R_}var k_,LD;function np(){if(LD)return k_;LD=1;var r=Xs().Buffer,e=Wde();function t(n,i){this._block=r.alloc(n),this._finalSize=i,this._blockSize=n,this._len=0}return t.prototype.update=function(n,i){n=e(n,i||"utf8");for(var s=this._block,o=this._blockSize,a=n.length,c=this._len,l=0;l<a;){for(var u=c%o,f=Math.min(a-l,o-u),h=0;h<f;h++)s[u+h]=n[l+h];c+=f,l+=f,c%o===0&&this._update(s)}return this._len+=a,this},t.prototype.digest=function(n){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var s=this._len*8;if(s<=4294967295)this._block.writeUInt32BE(s,this._blockSize-4);else{var o=(s&4294967295)>>>0,a=(s-o)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(o,this._blockSize-4)}this._update(this._block);var c=this._hash();return n?c.toString(n):c},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},k_=t,k_}var P_,FD;function Gde(){if(FD)return P_;FD=1;var r=yi(),e=np(),t=Xs().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function s(){this.init(),this._w=i,e.call(this,64,56)}r(s,e),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(l){return l<<5|l>>>27}function a(l){return l<<30|l>>>2}function c(l,u,f,h){return l===0?u&f|~u&h:l===2?u&f|u&h|f&h:u^f^h}return s.prototype._update=function(l){for(var u=this._w,f=this._a|0,h=this._b|0,d=this._c|0,g=this._d|0,p=this._e|0,m=0;m<16;++m)u[m]=l.readInt32BE(m*4);for(;m<80;++m)u[m]=u[m-3]^u[m-8]^u[m-14]^u[m-16];for(var y=0;y<80;++y){var v=~~(y/20),b=o(f)+c(v,h,d,g)+p+u[y]+n[v]|0;p=g,g=d,d=a(h),h=f,f=b}this._a=f+this._a|0,this._b=h+this._b|0,this._c=d+this._c|0,this._d=g+this._d|0,this._e=p+this._e|0},s.prototype._hash=function(){var l=t.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},P_=s,P_}var O_,UD;function Yde(){if(UD)return O_;UD=1;var r=yi(),e=np(),t=Xs().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function s(){this.init(),this._w=i,e.call(this,64,56)}r(s,e),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(u){return u<<1|u>>>31}function a(u){return u<<5|u>>>27}function c(u){return u<<30|u>>>2}function l(u,f,h,d){return u===0?f&h|~f&d:u===2?f&h|f&d|h&d:f^h^d}return s.prototype._update=function(u){for(var f=this._w,h=this._a|0,d=this._b|0,g=this._c|0,p=this._d|0,m=this._e|0,y=0;y<16;++y)f[y]=u.readInt32BE(y*4);for(;y<80;++y)f[y]=o(f[y-3]^f[y-8]^f[y-14]^f[y-16]);for(var v=0;v<80;++v){var b=~~(v/20),_=a(h)+l(b,d,g,p)+m+f[v]+n[b]|0;m=p,p=g,g=c(d),d=h,h=_}this._a=h+this._a|0,this._b=d+this._b|0,this._c=g+this._c|0,this._d=p+this._d|0,this._e=m+this._e|0},s.prototype._hash=function(){var u=t.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},O_=s,O_}var D_,zD;function WV(){if(zD)return D_;zD=1;var r=yi(),e=np(),t=Xs().Buffer,n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=new Array(64);function s(){this.init(),this._w=i,e.call(this,64,56)}r(s,e),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function o(h,d,g){return g^h&(d^g)}function a(h,d,g){return h&d|g&(h|d)}function c(h){return(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10)}function l(h){return(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7)}function u(h){return(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3}function f(h){return(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10}return s.prototype._update=function(h){for(var d=this._w,g=this._a|0,p=this._b|0,m=this._c|0,y=this._d|0,v=this._e|0,b=this._f|0,_=this._g|0,x=this._h|0,E=0;E<16;++E)d[E]=h.readInt32BE(E*4);for(;E<64;++E)d[E]=f(d[E-2])+d[E-7]+u(d[E-15])+d[E-16]|0;for(var S=0;S<64;++S){var C=x+l(v)+o(v,b,_)+n[S]+d[S]|0,k=c(g)+a(g,p,m)|0;x=_,_=b,b=v,v=y+C|0,y=m,m=p,p=g,g=C+k|0}this._a=g+this._a|0,this._b=p+this._b|0,this._c=m+this._c|0,this._d=y+this._d|0,this._e=v+this._e|0,this._f=b+this._f|0,this._g=_+this._g|0,this._h=x+this._h|0},s.prototype._hash=function(){var h=t.allocUnsafe(32);return h.writeInt32BE(this._a,0),h.writeInt32BE(this._b,4),h.writeInt32BE(this._c,8),h.writeInt32BE(this._d,12),h.writeInt32BE(this._e,16),h.writeInt32BE(this._f,20),h.writeInt32BE(this._g,24),h.writeInt32BE(this._h,28),h},D_=s,D_}var $_,qD;function Xde(){if(qD)return $_;qD=1;var r=yi(),e=WV(),t=np(),n=Xs().Buffer,i=new Array(64);function s(){this.init(),this._w=i,t.call(this,64,56)}return r(s,e),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var o=n.allocUnsafe(28);return o.writeInt32BE(this._a,0),o.writeInt32BE(this._b,4),o.writeInt32BE(this._c,8),o.writeInt32BE(this._d,12),o.writeInt32BE(this._e,16),o.writeInt32BE(this._f,20),o.writeInt32BE(this._g,24),o},$_=s,$_}var M_,jD;function GV(){if(jD)return M_;jD=1;var r=yi(),e=np(),t=Xs().Buffer,n=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],i=new Array(160);function s(){this.init(),this._w=i,e.call(this,128,112)}r(s,e),s.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function o(p,m,y){return y^p&(m^y)}function a(p,m,y){return p&m|y&(p|m)}function c(p,m){return(p>>>28|m<<4)^(m>>>2|p<<30)^(m>>>7|p<<25)}function l(p,m){return(p>>>14|m<<18)^(p>>>18|m<<14)^(m>>>9|p<<23)}function u(p,m){return(p>>>1|m<<31)^(p>>>8|m<<24)^p>>>7}function f(p,m){return(p>>>1|m<<31)^(p>>>8|m<<24)^(p>>>7|m<<25)}function h(p,m){return(p>>>19|m<<13)^(m>>>29|p<<3)^p>>>6}function d(p,m){return(p>>>19|m<<13)^(m>>>29|p<<3)^(p>>>6|m<<26)}function g(p,m){return p>>>0<m>>>0?1:0}return s.prototype._update=function(p){for(var m=this._w,y=this._ah|0,v=this._bh|0,b=this._ch|0,_=this._dh|0,x=this._eh|0,E=this._fh|0,S=this._gh|0,C=this._hh|0,k=this._al|0,$=this._bl|0,J=this._cl|0,j=this._dl|0,L=this._el|0,w=this._fl|0,R=this._gl|0,N=this._hl|0,Y=0;Y<32;Y+=2)m[Y]=p.readInt32BE(Y*4),m[Y+1]=p.readInt32BE(Y*4+4);for(;Y<160;Y+=2){var z=m[Y-30],G=m[Y-15*2+1],te=u(z,G),X=f(G,z);z=m[Y-2*2],G=m[Y-2*2+1];var T=h(z,G),A=d(G,z),O=m[Y-7*2],I=m[Y-7*2+1],U=m[Y-16*2],Z=m[Y-16*2+1],oe=X+I|0,he=te+O+g(oe,X)|0;oe=oe+A|0,he=he+T+g(oe,A)|0,oe=oe+Z|0,he=he+U+g(oe,Z)|0,m[Y]=he,m[Y+1]=oe}for(var re=0;re<160;re+=2){he=m[re],oe=m[re+1];var F=a(y,v,b),H=a(k,$,J),ue=c(y,k),le=c(k,y),we=l(x,L),ie=l(L,x),B=n[re],q=n[re+1],ne=o(x,E,S),de=o(L,w,R),_e=N+ie|0,Ce=C+we+g(_e,N)|0;_e=_e+de|0,Ce=Ce+ne+g(_e,de)|0,_e=_e+q|0,Ce=Ce+B+g(_e,q)|0,_e=_e+oe|0,Ce=Ce+he+g(_e,oe)|0;var Me=le+H|0,xe=ue+F+g(Me,le)|0;C=S,N=R,S=E,R=w,E=x,w=L,L=j+_e|0,x=_+Ce+g(L,j)|0,_=b,j=J,b=v,J=$,v=y,$=k,k=_e+Me|0,y=Ce+xe+g(k,_e)|0}this._al=this._al+k|0,this._bl=this._bl+$|0,this._cl=this._cl+J|0,this._dl=this._dl+j|0,this._el=this._el+L|0,this._fl=this._fl+w|0,this._gl=this._gl+R|0,this._hl=this._hl+N|0,this._ah=this._ah+y+g(this._al,k)|0,this._bh=this._bh+v+g(this._bl,$)|0,this._ch=this._ch+b+g(this._cl,J)|0,this._dh=this._dh+_+g(this._dl,j)|0,this._eh=this._eh+x+g(this._el,L)|0,this._fh=this._fh+E+g(this._fl,w)|0,this._gh=this._gh+S+g(this._gl,R)|0,this._hh=this._hh+C+g(this._hl,N)|0},s.prototype._hash=function(){var p=t.allocUnsafe(64);function m(y,v,b){p.writeInt32BE(y,b),p.writeInt32BE(v,b+4)}return m(this._ah,this._al,0),m(this._bh,this._bl,8),m(this._ch,this._cl,16),m(this._dh,this._dl,24),m(this._eh,this._el,32),m(this._fh,this._fl,40),m(this._gh,this._gl,48),m(this._hh,this._hl,56),p},M_=s,M_}var B_,VD;function Jde(){if(VD)return B_;VD=1;var r=yi(),e=GV(),t=np(),n=Xs().Buffer,i=new Array(160);function s(){this.init(),this._w=i,t.call(this,128,112)}return r(s,e),s.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},s.prototype._hash=function(){var o=n.allocUnsafe(48);function a(c,l,u){o.writeInt32BE(c,u),o.writeInt32BE(l,u+4)}return a(this._ah,this._al,0),a(this._bh,this._bl,8),a(this._ch,this._cl,16),a(this._dh,this._dl,24),a(this._eh,this._el,32),a(this._fh,this._fl,40),o},B_=s,B_}var KD;function YV(){return KD||(KD=1,function(r){r.exports=function(t){var n=t.toLowerCase(),i=r.exports[n];if(!i)throw new Error(n+" is not supported (we accept pull requests)");return new i},r.exports.sha=Gde(),r.exports.sha1=Yde(),r.exports.sha224=Xde(),r.exports.sha256=WV(),r.exports.sha384=Jde(),r.exports.sha512=GV()}(Dx)),Dx.exports}var N_,HD;function Qde(){if(HD)return N_;HD=1;var r=Xs().Buffer,e=Hf.Transform,t=YA().StringDecoder,n=yi();function i(c){e.call(this),this.hashMode=typeof c=="string",this.hashMode?this[c]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(i,e);var s=typeof Uint8Array<"u",o=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);function a(c,l){if(c instanceof r)return c;if(typeof c=="string")return r.from(c,l);if(o&&ArrayBuffer.isView(c)){if(c.byteLength===0)return r.alloc(0);var u=r.from(c.buffer,c.byteOffset,c.byteLength);if(u.byteLength===c.byteLength)return u}if(s&&c instanceof Uint8Array||r.isBuffer(c)&&c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c))return r.from(c);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return i.prototype.update=function(c,l,u){var f=a(c,l),h=this._update(f);return this.hashMode?this:(u&&(h=this._toString(h,u)),h)},i.prototype.setAutoPadding=function(){},i.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},i.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},i.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},i.prototype._transform=function(c,l,u){var f;try{this.hashMode?this._update(c):this.push(this._update(c))}catch(h){f=h}finally{u(f)}},i.prototype._flush=function(c){var l;try{this.push(this.__final())}catch(u){l=u}c(l)},i.prototype._finalOrDigest=function(c){var l=this.__final()||r.alloc(0);return c&&(l=this._toString(l,c,!0)),l},i.prototype._toString=function(c,l,u){if(this._decoder||(this._decoder=new t(l),this._encoding=l),this._encoding!==l)throw new Error("cant switch encodings");var f=this._decoder.write(c);return u&&(f+=this._decoder.end()),f},N_=i,N_}var L_,WD;function Zde(){if(WD)return L_;WD=1;var r=yi(),e=bde(),t=wde(),n=YV(),i=Qde();function s(o){i.call(this,"digest"),this._hash=o}return r(s,i),s.prototype._update=function(o){this._hash.update(o)},s.prototype._final=function(){return this._hash.digest()},L_=function(a){return a=a.toLowerCase(),a==="md5"?new e:a==="rmd160"||a==="ripemd160"?new t:new s(n(a))},L_}var F_,GD;function epe(){if(GD)return F_;GD=1;var r=Xs().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=s}var c=t.length,l=t.charAt(0),u=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function h(p){if((Array.isArray(p)||p instanceof Uint8Array)&&(p=r.from(p)),!r.isBuffer(p))throw new TypeError("Expected Buffer");if(p.length===0)return"";for(var m=0,y=0,v=0,b=p.length;v!==b&&p[v]===0;)v++,m++;for(var _=(b-v)*f+1>>>0,x=new Uint8Array(_);v!==b;){for(var E=p[v],S=0,C=_-1;(E!==0||S<y)&&C!==-1;C--,S++)E+=256*x[C]>>>0,x[C]=E%c>>>0,E=E/c>>>0;if(E!==0)throw new Error("Non-zero carry");y=S,v++}for(var k=_-y;k!==_&&x[k]===0;)k++;for(var $=l.repeat(m);k<_;++k)$+=t.charAt(x[k]);return $}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return r.alloc(0);for(var m=0,y=0,v=0;p[m]===l;)y++,m++;for(var b=(p.length-m)*u+1>>>0,_=new Uint8Array(b);m<p.length;){var x=p.charCodeAt(m);if(x>255)return;var E=n[x];if(E===255)return;for(var S=0,C=b-1;(E!==0||S<v)&&C!==-1;C--,S++)E+=c*_[C]>>>0,_[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");v=S,m++}for(var k=b-v;k!==b&&_[k]===0;)k++;var $=r.allocUnsafe(y+(b-k));$.fill(0,0,y);for(var J=y;k!==b;)$[J++]=_[k++];return $}function g(p){var m=d(p);if(m)return m;throw new Error("Non-base"+c+" character")}return{encode:h,decodeUnsafe:d,decode:g}}return F_=e,F_}var U_,YD;function u3(){if(YD)return U_;YD=1;var r=epe(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return U_=r(e),U_}var z_,XD;function tpe(){if(XD)return z_;XD=1;var r=u3(),e=Xs().Buffer;return z_=function(t){function n(a){var c=t(a);return r.encode(e.concat([a,c],a.length+4))}function i(a){var c=a.slice(0,-4),l=a.slice(-4),u=t(c);if(!(l[0]^u[0]|l[1]^u[1]|l[2]^u[2]|l[3]^u[3]))return c}function s(a){var c=r.decodeUnsafe(a);if(c)return i(c)}function o(a){var c=r.decode(a),l=i(c);if(!l)throw new Error("Invalid checksum");return l}return{encode:n,decode:o,decodeUnsafe:s}},z_}var q_,JD;function rpe(){if(JD)return q_;JD=1;var r=Zde(),e=tpe();function t(n){var i=r("sha256").update(n).digest();return r("sha256").update(i).digest()}return q_=e(t),q_}var j_={},Ip={},ia={},Hm={},Zs={},QD;function f3(){if(QD)return Zs;QD=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.InvalidChecksumError=Zs.InvalidSequenceComponentError=Zs.InvalidTypeError=Zs.InvalidPathLengthError=Zs.InvalidSchemeError=void 0;class r extends Error{constructor(){super("Invalid Scheme"),this.name="InvalidSchemeError"}}Zs.InvalidSchemeError=r;class e extends Error{constructor(){super("Invalid Path"),this.name="InvalidPathLengthError"}}Zs.InvalidPathLengthError=e;class t extends Error{constructor(){super("Invalid Type"),this.name="InvalidTypeError"}}Zs.InvalidTypeError=t;class n extends Error{constructor(){super("Invalid Sequence Component"),this.name="InvalidSequenceComponentError"}}Zs.InvalidSequenceComponentError=n;class i extends Error{constructor(){super("Invalid Checksum"),this.name="InvalidChecksumError"}}return Zs.InvalidChecksumError=i,Zs}var Yr={},V_={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ZD;function npe(){return ZD||(ZD=1,function(r){var e=TV(),t=RV(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=v,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var ie=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(ie,B),ie.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(ie){if(ie>i)throw new RangeError('The value "'+ie+'" is invalid for option "size"');var B=new Uint8Array(ie);return Object.setPrototypeOf(B,a.prototype),B}function a(ie,B,q){if(typeof ie=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(ie)}return c(ie,B,q)}a.poolSize=8192;function c(ie,B,q){if(typeof ie=="string")return h(ie,B);if(ArrayBuffer.isView(ie))return g(ie);if(ie==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(ue(ie,ArrayBuffer)||ie&&ue(ie.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ue(ie,SharedArrayBuffer)||ie&&ue(ie.buffer,SharedArrayBuffer)))return p(ie,B,q);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ne=ie.valueOf&&ie.valueOf();if(ne!=null&&ne!==ie)return a.from(ne,B,q);var de=m(ie);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return a.from(ie[Symbol.toPrimitive]("string"),B,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}a.from=function(ie,B,q){return c(ie,B,q)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function u(ie,B,q){return l(ie),ie<=0?o(ie):B!==void 0?typeof q=="string"?o(ie).fill(B,q):o(ie).fill(B):o(ie)}a.alloc=function(ie,B,q){return u(ie,B,q)};function f(ie){return l(ie),o(ie<0?0:y(ie)|0)}a.allocUnsafe=function(ie){return f(ie)},a.allocUnsafeSlow=function(ie){return f(ie)};function h(ie,B){if((typeof B!="string"||B==="")&&(B="utf8"),!a.isEncoding(B))throw new TypeError("Unknown encoding: "+B);var q=b(ie,B)|0,ne=o(q),de=ne.write(ie,B);return de!==q&&(ne=ne.slice(0,de)),ne}function d(ie){for(var B=ie.length<0?0:y(ie.length)|0,q=o(B),ne=0;ne<B;ne+=1)q[ne]=ie[ne]&255;return q}function g(ie){if(ue(ie,Uint8Array)){var B=new Uint8Array(ie);return p(B.buffer,B.byteOffset,B.byteLength)}return d(ie)}function p(ie,B,q){if(B<0||ie.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<B+(q||0))throw new RangeError('"length" is outside of buffer bounds');var ne;return B===void 0&&q===void 0?ne=new Uint8Array(ie):q===void 0?ne=new Uint8Array(ie,B):ne=new Uint8Array(ie,B,q),Object.setPrototypeOf(ne,a.prototype),ne}function m(ie){if(a.isBuffer(ie)){var B=y(ie.length)|0,q=o(B);return q.length===0||ie.copy(q,0,0,B),q}if(ie.length!==void 0)return typeof ie.length!="number"||le(ie.length)?o(0):d(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return d(ie.data)}function y(ie){if(ie>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return ie|0}function v(ie){return+ie!=ie&&(ie=0),a.alloc(+ie)}a.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==a.prototype},a.compare=function(B,q){if(ue(B,Uint8Array)&&(B=a.from(B,B.offset,B.byteLength)),ue(q,Uint8Array)&&(q=a.from(q,q.offset,q.byteLength)),!a.isBuffer(B)||!a.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===q)return 0;for(var ne=B.length,de=q.length,_e=0,Ce=Math.min(ne,de);_e<Ce;++_e)if(B[_e]!==q[_e]){ne=B[_e],de=q[_e];break}return ne<de?-1:de<ne?1:0},a.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(B,q){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return a.alloc(0);var ne;if(q===void 0)for(q=0,ne=0;ne<B.length;++ne)q+=B[ne].length;var de=a.allocUnsafe(q),_e=0;for(ne=0;ne<B.length;++ne){var Ce=B[ne];if(ue(Ce,Uint8Array))_e+Ce.length>de.length?a.from(Ce).copy(de,_e):Uint8Array.prototype.set.call(de,Ce,_e);else if(a.isBuffer(Ce))Ce.copy(de,_e);else throw new TypeError('"list" argument must be an Array of Buffers');_e+=Ce.length}return de};function b(ie,B){if(a.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||ue(ie,ArrayBuffer))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);var q=ie.length,ne=arguments.length>2&&arguments[2]===!0;if(!ne&&q===0)return 0;for(var de=!1;;)switch(B){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return oe(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q*2;case"hex":return q>>>1;case"base64":return F(ie).length;default:if(de)return ne?-1:oe(ie).length;B=(""+B).toLowerCase(),de=!0}}a.byteLength=b;function _(ie,B,q){var ne=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,B>>>=0,q<=B))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return G(this,B,q);case"utf8":case"utf-8":return w(this,B,q);case"ascii":return Y(this,B,q);case"latin1":case"binary":return z(this,B,q);case"base64":return L(this,B,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,B,q);default:if(ne)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),ne=!0}}a.prototype._isBuffer=!0;function x(ie,B,q){var ne=ie[B];ie[B]=ie[q],ie[q]=ne}a.prototype.swap16=function(){var B=this.length;if(B%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var q=0;q<B;q+=2)x(this,q,q+1);return this},a.prototype.swap32=function(){var B=this.length;if(B%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var q=0;q<B;q+=4)x(this,q,q+3),x(this,q+1,q+2);return this},a.prototype.swap64=function(){var B=this.length;if(B%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var q=0;q<B;q+=8)x(this,q,q+7),x(this,q+1,q+6),x(this,q+2,q+5),x(this,q+3,q+4);return this},a.prototype.toString=function(){var B=this.length;return B===0?"":arguments.length===0?w(this,0,B):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(B){if(!a.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B?!0:a.compare(this,B)===0},a.prototype.inspect=function(){var B="",q=r.INSPECT_MAX_BYTES;return B=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(B+=" ... "),"<Buffer "+B+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(B,q,ne,de,_e){if(ue(B,Uint8Array)&&(B=a.from(B,B.offset,B.byteLength)),!a.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(q===void 0&&(q=0),ne===void 0&&(ne=B?B.length:0),de===void 0&&(de=0),_e===void 0&&(_e=this.length),q<0||ne>B.length||de<0||_e>this.length)throw new RangeError("out of range index");if(de>=_e&&q>=ne)return 0;if(de>=_e)return-1;if(q>=ne)return 1;if(q>>>=0,ne>>>=0,de>>>=0,_e>>>=0,this===B)return 0;for(var Ce=_e-de,Me=ne-q,xe=Math.min(Ce,Me),Ae=this.slice(de,_e),Oe=B.slice(q,ne),se=0;se<xe;++se)if(Ae[se]!==Oe[se]){Ce=Ae[se],Me=Oe[se];break}return Ce<Me?-1:Me<Ce?1:0};function E(ie,B,q,ne,de){if(ie.length===0)return-1;if(typeof q=="string"?(ne=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,le(q)&&(q=de?0:ie.length-1),q<0&&(q=ie.length+q),q>=ie.length){if(de)return-1;q=ie.length-1}else if(q<0)if(de)q=0;else return-1;if(typeof B=="string"&&(B=a.from(B,ne)),a.isBuffer(B))return B.length===0?-1:S(ie,B,q,ne,de);if(typeof B=="number")return B=B&255,typeof Uint8Array.prototype.indexOf=="function"?de?Uint8Array.prototype.indexOf.call(ie,B,q):Uint8Array.prototype.lastIndexOf.call(ie,B,q):S(ie,[B],q,ne,de);throw new TypeError("val must be string, number or Buffer")}function S(ie,B,q,ne,de){var _e=1,Ce=ie.length,Me=B.length;if(ne!==void 0&&(ne=String(ne).toLowerCase(),ne==="ucs2"||ne==="ucs-2"||ne==="utf16le"||ne==="utf-16le")){if(ie.length<2||B.length<2)return-1;_e=2,Ce/=2,Me/=2,q/=2}function xe(Q,K){return _e===1?Q[K]:Q.readUInt16BE(K*_e)}var Ae;if(de){var Oe=-1;for(Ae=q;Ae<Ce;Ae++)if(xe(ie,Ae)===xe(B,Oe===-1?0:Ae-Oe)){if(Oe===-1&&(Oe=Ae),Ae-Oe+1===Me)return Oe*_e}else Oe!==-1&&(Ae-=Ae-Oe),Oe=-1}else for(q+Me>Ce&&(q=Ce-Me),Ae=q;Ae>=0;Ae--){for(var se=!0,V=0;V<Me;V++)if(xe(ie,Ae+V)!==xe(B,V)){se=!1;break}if(se)return Ae}return-1}a.prototype.includes=function(B,q,ne){return this.indexOf(B,q,ne)!==-1},a.prototype.indexOf=function(B,q,ne){return E(this,B,q,ne,!0)},a.prototype.lastIndexOf=function(B,q,ne){return E(this,B,q,ne,!1)};function C(ie,B,q,ne){q=Number(q)||0;var de=ie.length-q;ne?(ne=Number(ne),ne>de&&(ne=de)):ne=de;var _e=B.length;ne>_e/2&&(ne=_e/2);for(var Ce=0;Ce<ne;++Ce){var Me=parseInt(B.substr(Ce*2,2),16);if(le(Me))return Ce;ie[q+Ce]=Me}return Ce}function k(ie,B,q,ne){return H(oe(B,ie.length-q),ie,q,ne)}function $(ie,B,q,ne){return H(he(B),ie,q,ne)}function J(ie,B,q,ne){return H(F(B),ie,q,ne)}function j(ie,B,q,ne){return H(re(B,ie.length-q),ie,q,ne)}a.prototype.write=function(B,q,ne,de){if(q===void 0)de="utf8",ne=this.length,q=0;else if(ne===void 0&&typeof q=="string")de=q,ne=this.length,q=0;else if(isFinite(q))q=q>>>0,isFinite(ne)?(ne=ne>>>0,de===void 0&&(de="utf8")):(de=ne,ne=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var _e=this.length-q;if((ne===void 0||ne>_e)&&(ne=_e),B.length>0&&(ne<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");for(var Ce=!1;;)switch(de){case"hex":return C(this,B,q,ne);case"utf8":case"utf-8":return k(this,B,q,ne);case"ascii":case"latin1":case"binary":return $(this,B,q,ne);case"base64":return J(this,B,q,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,B,q,ne);default:if(Ce)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),Ce=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(ie,B,q){return B===0&&q===ie.length?e.fromByteArray(ie):e.fromByteArray(ie.slice(B,q))}function w(ie,B,q){q=Math.min(ie.length,q);for(var ne=[],de=B;de<q;){var _e=ie[de],Ce=null,Me=_e>239?4:_e>223?3:_e>191?2:1;if(de+Me<=q){var xe,Ae,Oe,se;switch(Me){case 1:_e<128&&(Ce=_e);break;case 2:xe=ie[de+1],(xe&192)===128&&(se=(_e&31)<<6|xe&63,se>127&&(Ce=se));break;case 3:xe=ie[de+1],Ae=ie[de+2],(xe&192)===128&&(Ae&192)===128&&(se=(_e&15)<<12|(xe&63)<<6|Ae&63,se>2047&&(se<55296||se>57343)&&(Ce=se));break;case 4:xe=ie[de+1],Ae=ie[de+2],Oe=ie[de+3],(xe&192)===128&&(Ae&192)===128&&(Oe&192)===128&&(se=(_e&15)<<18|(xe&63)<<12|(Ae&63)<<6|Oe&63,se>65535&&se<1114112&&(Ce=se))}}Ce===null?(Ce=65533,Me=1):Ce>65535&&(Ce-=65536,ne.push(Ce>>>10&1023|55296),Ce=56320|Ce&1023),ne.push(Ce),de+=Me}return N(ne)}var R=4096;function N(ie){var B=ie.length;if(B<=R)return String.fromCharCode.apply(String,ie);for(var q="",ne=0;ne<B;)q+=String.fromCharCode.apply(String,ie.slice(ne,ne+=R));return q}function Y(ie,B,q){var ne="";q=Math.min(ie.length,q);for(var de=B;de<q;++de)ne+=String.fromCharCode(ie[de]&127);return ne}function z(ie,B,q){var ne="";q=Math.min(ie.length,q);for(var de=B;de<q;++de)ne+=String.fromCharCode(ie[de]);return ne}function G(ie,B,q){var ne=ie.length;(!B||B<0)&&(B=0),(!q||q<0||q>ne)&&(q=ne);for(var de="",_e=B;_e<q;++_e)de+=we[ie[_e]];return de}function te(ie,B,q){for(var ne=ie.slice(B,q),de="",_e=0;_e<ne.length-1;_e+=2)de+=String.fromCharCode(ne[_e]+ne[_e+1]*256);return de}a.prototype.slice=function(B,q){var ne=this.length;B=~~B,q=q===void 0?ne:~~q,B<0?(B+=ne,B<0&&(B=0)):B>ne&&(B=ne),q<0?(q+=ne,q<0&&(q=0)):q>ne&&(q=ne),q<B&&(q=B);var de=this.subarray(B,q);return Object.setPrototypeOf(de,a.prototype),de};function X(ie,B,q){if(ie%1!==0||ie<0)throw new RangeError("offset is not uint");if(ie+B>q)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(B,q,ne){B=B>>>0,q=q>>>0,ne||X(B,q,this.length);for(var de=this[B],_e=1,Ce=0;++Ce<q&&(_e*=256);)de+=this[B+Ce]*_e;return de},a.prototype.readUintBE=a.prototype.readUIntBE=function(B,q,ne){B=B>>>0,q=q>>>0,ne||X(B,q,this.length);for(var de=this[B+--q],_e=1;q>0&&(_e*=256);)de+=this[B+--q]*_e;return de},a.prototype.readUint8=a.prototype.readUInt8=function(B,q){return B=B>>>0,q||X(B,1,this.length),this[B]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(B,q){return B=B>>>0,q||X(B,2,this.length),this[B]|this[B+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(B,q){return B=B>>>0,q||X(B,2,this.length),this[B]<<8|this[B+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(B,q){return B=B>>>0,q||X(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+this[B+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(B,q){return B=B>>>0,q||X(B,4,this.length),this[B]*16777216+(this[B+1]<<16|this[B+2]<<8|this[B+3])},a.prototype.readIntLE=function(B,q,ne){B=B>>>0,q=q>>>0,ne||X(B,q,this.length);for(var de=this[B],_e=1,Ce=0;++Ce<q&&(_e*=256);)de+=this[B+Ce]*_e;return _e*=128,de>=_e&&(de-=Math.pow(2,8*q)),de},a.prototype.readIntBE=function(B,q,ne){B=B>>>0,q=q>>>0,ne||X(B,q,this.length);for(var de=q,_e=1,Ce=this[B+--de];de>0&&(_e*=256);)Ce+=this[B+--de]*_e;return _e*=128,Ce>=_e&&(Ce-=Math.pow(2,8*q)),Ce},a.prototype.readInt8=function(B,q){return B=B>>>0,q||X(B,1,this.length),this[B]&128?(255-this[B]+1)*-1:this[B]},a.prototype.readInt16LE=function(B,q){B=B>>>0,q||X(B,2,this.length);var ne=this[B]|this[B+1]<<8;return ne&32768?ne|4294901760:ne},a.prototype.readInt16BE=function(B,q){B=B>>>0,q||X(B,2,this.length);var ne=this[B+1]|this[B]<<8;return ne&32768?ne|4294901760:ne},a.prototype.readInt32LE=function(B,q){return B=B>>>0,q||X(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},a.prototype.readInt32BE=function(B,q){return B=B>>>0,q||X(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},a.prototype.readFloatLE=function(B,q){return B=B>>>0,q||X(B,4,this.length),t.read(this,B,!0,23,4)},a.prototype.readFloatBE=function(B,q){return B=B>>>0,q||X(B,4,this.length),t.read(this,B,!1,23,4)},a.prototype.readDoubleLE=function(B,q){return B=B>>>0,q||X(B,8,this.length),t.read(this,B,!0,52,8)},a.prototype.readDoubleBE=function(B,q){return B=B>>>0,q||X(B,8,this.length),t.read(this,B,!1,52,8)};function T(ie,B,q,ne,de,_e){if(!a.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>de||B<_e)throw new RangeError('"value" argument is out of bounds');if(q+ne>ie.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(B,q,ne,de){if(B=+B,q=q>>>0,ne=ne>>>0,!de){var _e=Math.pow(2,8*ne)-1;T(this,B,q,ne,_e,0)}var Ce=1,Me=0;for(this[q]=B&255;++Me<ne&&(Ce*=256);)this[q+Me]=B/Ce&255;return q+ne},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(B,q,ne,de){if(B=+B,q=q>>>0,ne=ne>>>0,!de){var _e=Math.pow(2,8*ne)-1;T(this,B,q,ne,_e,0)}var Ce=ne-1,Me=1;for(this[q+Ce]=B&255;--Ce>=0&&(Me*=256);)this[q+Ce]=B/Me&255;return q+ne},a.prototype.writeUint8=a.prototype.writeUInt8=function(B,q,ne){return B=+B,q=q>>>0,ne||T(this,B,q,1,255,0),this[q]=B&255,q+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(B,q,ne){return B=+B,q=q>>>0,ne||T(this,B,q,2,65535,0),this[q]=B&255,this[q+1]=B>>>8,q+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(B,q,ne){return B=+B,q=q>>>0,ne||T(this,B,q,2,65535,0),this[q]=B>>>8,this[q+1]=B&255,q+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(B,q,ne){return B=+B,q=q>>>0,ne||T(this,B,q,4,4294967295,0),this[q+3]=B>>>24,this[q+2]=B>>>16,this[q+1]=B>>>8,this[q]=B&255,q+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(B,q,ne){return B=+B,q=q>>>0,ne||T(this,B,q,4,4294967295,0),this[q]=B>>>24,this[q+1]=B>>>16,this[q+2]=B>>>8,this[q+3]=B&255,q+4},a.prototype.writeIntLE=function(B,q,ne,de){if(B=+B,q=q>>>0,!de){var _e=Math.pow(2,8*ne-1);T(this,B,q,ne,_e-1,-_e)}var Ce=0,Me=1,xe=0;for(this[q]=B&255;++Ce<ne&&(Me*=256);)B<0&&xe===0&&this[q+Ce-1]!==0&&(xe=1),this[q+Ce]=(B/Me>>0)-xe&255;return q+ne},a.prototype.writeIntBE=function(B,q,ne,de){if(B=+B,q=q>>>0,!de){var _e=Math.pow(2,8*ne-1);T(this,B,q,ne,_e-1,-_e)}var Ce=ne-1,Me=1,xe=0;for(this[q+Ce]=B&255;--Ce>=0&&(Me*=256);)B<0&&xe===0&&this[q+Ce+1]!==0&&(xe=1),this[q+Ce]=(B/Me>>0)-xe&255;return q+ne},a.prototype.writeInt8=function(B,q,ne){return B=+B,q=q>>>0,ne||T(this,B,q,1,127,-128),B<0&&(B=255+B+1),this[q]=B&255,q+1},a.prototype.writeInt16LE=function(B,q,ne){return B=+B,q=q>>>0,ne||T(this,B,q,2,32767,-32768),this[q]=B&255,this[q+1]=B>>>8,q+2},a.prototype.writeInt16BE=function(B,q,ne){return B=+B,q=q>>>0,ne||T(this,B,q,2,32767,-32768),this[q]=B>>>8,this[q+1]=B&255,q+2},a.prototype.writeInt32LE=function(B,q,ne){return B=+B,q=q>>>0,ne||T(this,B,q,4,2147483647,-2147483648),this[q]=B&255,this[q+1]=B>>>8,this[q+2]=B>>>16,this[q+3]=B>>>24,q+4},a.prototype.writeInt32BE=function(B,q,ne){return B=+B,q=q>>>0,ne||T(this,B,q,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[q]=B>>>24,this[q+1]=B>>>16,this[q+2]=B>>>8,this[q+3]=B&255,q+4};function A(ie,B,q,ne,de,_e){if(q+ne>ie.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function O(ie,B,q,ne,de){return B=+B,q=q>>>0,de||A(ie,B,q,4),t.write(ie,B,q,ne,23,4),q+4}a.prototype.writeFloatLE=function(B,q,ne){return O(this,B,q,!0,ne)},a.prototype.writeFloatBE=function(B,q,ne){return O(this,B,q,!1,ne)};function I(ie,B,q,ne,de){return B=+B,q=q>>>0,de||A(ie,B,q,8),t.write(ie,B,q,ne,52,8),q+8}a.prototype.writeDoubleLE=function(B,q,ne){return I(this,B,q,!0,ne)},a.prototype.writeDoubleBE=function(B,q,ne){return I(this,B,q,!1,ne)},a.prototype.copy=function(B,q,ne,de){if(!a.isBuffer(B))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),!de&&de!==0&&(de=this.length),q>=B.length&&(q=B.length),q||(q=0),de>0&&de<ne&&(de=ne),de===ne||B.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),B.length-q<de-ne&&(de=B.length-q+ne);var _e=de-ne;return this===B&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(q,ne,de):Uint8Array.prototype.set.call(B,this.subarray(ne,de),q),_e},a.prototype.fill=function(B,q,ne,de){if(typeof B=="string"){if(typeof q=="string"?(de=q,q=0,ne=this.length):typeof ne=="string"&&(de=ne,ne=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!a.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(B.length===1){var _e=B.charCodeAt(0);(de==="utf8"&&_e<128||de==="latin1")&&(B=_e)}}else typeof B=="number"?B=B&255:typeof B=="boolean"&&(B=Number(B));if(q<0||this.length<q||this.length<ne)throw new RangeError("Out of range index");if(ne<=q)return this;q=q>>>0,ne=ne===void 0?this.length:ne>>>0,B||(B=0);var Ce;if(typeof B=="number")for(Ce=q;Ce<ne;++Ce)this[Ce]=B;else{var Me=a.isBuffer(B)?B:a.from(B,de),xe=Me.length;if(xe===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(Ce=0;Ce<ne-q;++Ce)this[Ce+q]=Me[Ce%xe]}return this};var U=/[^+/0-9A-Za-z-_]/g;function Z(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(U,""),ie.length<2)return"";for(;ie.length%4!==0;)ie=ie+"=";return ie}function oe(ie,B){B=B||1/0;for(var q,ne=ie.length,de=null,_e=[],Ce=0;Ce<ne;++Ce){if(q=ie.charCodeAt(Ce),q>55295&&q<57344){if(!de){if(q>56319){(B-=3)>-1&&_e.push(239,191,189);continue}else if(Ce+1===ne){(B-=3)>-1&&_e.push(239,191,189);continue}de=q;continue}if(q<56320){(B-=3)>-1&&_e.push(239,191,189),de=q;continue}q=(de-55296<<10|q-56320)+65536}else de&&(B-=3)>-1&&_e.push(239,191,189);if(de=null,q<128){if((B-=1)<0)break;_e.push(q)}else if(q<2048){if((B-=2)<0)break;_e.push(q>>6|192,q&63|128)}else if(q<65536){if((B-=3)<0)break;_e.push(q>>12|224,q>>6&63|128,q&63|128)}else if(q<1114112){if((B-=4)<0)break;_e.push(q>>18|240,q>>12&63|128,q>>6&63|128,q&63|128)}else throw new Error("Invalid code point")}return _e}function he(ie){for(var B=[],q=0;q<ie.length;++q)B.push(ie.charCodeAt(q)&255);return B}function re(ie,B){for(var q,ne,de,_e=[],Ce=0;Ce<ie.length&&!((B-=2)<0);++Ce)q=ie.charCodeAt(Ce),ne=q>>8,de=q%256,_e.push(de),_e.push(ne);return _e}function F(ie){return e.toByteArray(Z(ie))}function H(ie,B,q,ne){for(var de=0;de<ne&&!(de+q>=B.length||de>=ie.length);++de)B[de+q]=ie[de];return de}function ue(ie,B){return ie instanceof B||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===B.name}function le(ie){return ie!==ie}var we=function(){for(var ie="0123456789abcdef",B=new Array(256),q=0;q<16;++q)for(var ne=q*16,de=0;de<16;++de)B[ne+de]=ie[q]+ie[de];return B}()}(V_)),V_}var $i=npe();const Da=$i.Buffer.from&&$i.Buffer.alloc&&$i.Buffer.allocUnsafe&&$i.Buffer.allocUnsafeSlow?$i.Buffer.from:r=>new $i.Buffer(r);function $a(r,e){const t=(n,i)=>e(n,i)>>>0;return t.signed=e,t.unsigned=t,t.model=r,t}const XV=$a("crc1",function(r,e){$i.Buffer.isBuffer(r)||(r=Da(r));let t=~~e,n=0;for(let i=0;i<r.length;i++){const s=r[i];n+=s}return t+=n%256,t%256});let XA=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];typeof Int32Array<"u"&&(XA=new Int32Array(XA));const JV=$a("crc-8",function(r,e){$i.Buffer.isBuffer(r)||(r=Da(r));let t=~~e;for(let n=0;n<r.length;n++){const i=r[n];t=XA[(t^i)&255]&255}return t});let JA=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];typeof Int32Array<"u"&&(JA=new Int32Array(JA));const QV=$a("dallas-1-wire",function(r,e){$i.Buffer.isBuffer(r)||(r=Da(r));let t=~~e;for(let n=0;n<r.length;n++){const i=r[n];t=JA[(t^i)&255]&255}return t});let QA=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];typeof Int32Array<"u"&&(QA=new Int32Array(QA));const ZV=$a("crc-16",function(r,e){$i.Buffer.isBuffer(r)||(r=Da(r));let t=~~e;for(let n=0;n<r.length;n++){const i=r[n];t=(QA[(t^i)&255]^t>>8)&65535}return t});let ZA=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920];typeof Int32Array<"u"&&(ZA=new Int32Array(ZA));const eK=$a("ccitt",function(r,e){$i.Buffer.isBuffer(r)||(r=Da(r));let t=typeof e<"u"?~~e:65535;for(let n=0;n<r.length;n++){const i=r[n];t=(ZA[(t>>8^i)&255]^t<<8)&65535}return t});let eI=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];typeof Int32Array<"u"&&(eI=new Int32Array(eI));const tK=$a("crc-16-modbus",function(r,e){$i.Buffer.isBuffer(r)||(r=Da(r));let t=typeof e<"u"?~~e:65535;for(let n=0;n<r.length;n++){const i=r[n];t=(eI[(t^i)&255]^t>>8)&65535}return t}),rK=$a("xmodem",function(r,e){$i.Buffer.isBuffer(r)||(r=Da(r));let t=typeof e<"u"?~~e:0;for(let n=0;n<r.length;n++){const i=r[n];let s=t>>>8&255;s^=i&255,s^=s>>>4,t=t<<8&65535,t^=s,s=s<<5&65535,t^=s,s=s<<7&65535,t^=s}return t});let tI=[0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960];typeof Int32Array<"u"&&(tI=new Int32Array(tI));const nK=$a("kermit",function(r,e){$i.Buffer.isBuffer(r)||(r=Da(r));let t=typeof e<"u"?~~e:0;for(let n=0;n<r.length;n++){const i=r[n];t=(tI[(t^i)&255]^t>>8)&65535}return t});let rI=[0,8801531,9098509,825846,9692897,1419802,1651692,10452759,10584377,2608578,2839604,11344079,3303384,11807523,12104405,4128302,12930697,4391538,5217156,13227903,5679208,13690003,14450021,5910942,6606768,14844747,15604413,6837830,16197969,7431594,8256604,16494759,840169,9084178,8783076,18463,10434312,1670131,1434117,9678590,11358416,2825259,2590173,10602790,4109873,12122826,11821884,3289031,13213536,5231515,4409965,12912278,5929345,14431610,13675660,5693559,6823513,15618722,14863188,6588335,16513208,8238147,7417269,16212302,1680338,10481449,9664223,1391140,9061683,788936,36926,8838341,12067563,4091408,3340262,11844381,2868234,11372785,10555655,2579964,14478683,5939616,5650518,13661357,5180346,13190977,12967607,4428364,8219746,16457881,16234863,7468436,15633027,6866552,6578062,14816117,1405499,9649856,10463030,1698765,8819930,55329,803287,9047340,11858690,3325945,4072975,12086004,2561507,10574104,11387118,2853909,13647026,5664841,5958079,14460228,4446803,12949160,13176670,5194661,7454091,16249200,16476294,8201341,14834538,6559633,6852199,15647388,3360676,11864927,12161705,4185682,10527045,2551230,2782280,11286707,9619101,1346150,1577872,10379115,73852,8875143,9172337,899466,16124205,7357910,8182816,16421083,6680524,14918455,15678145,6911546,5736468,13747439,14507289,5968354,12873461,4334094,5159928,13170435,4167245,12180150,11879232,3346363,11301036,2767959,2532769,10545498,10360692,1596303,1360505,9604738,913813,9157998,8856728,92259,16439492,8164415,7343561,16138546,6897189,15692510,14936872,6662099,5986813,14488838,13733104,5750795,13156124,5174247,4352529,12855018,2810998,11315341,10498427,2522496,12124823,4148844,3397530,11901793,9135439,862644,110658,8912057,1606574,10407765,9590435,1317464,15706879,6940164,6651890,14889737,8145950,16384229,16161043,7394792,5123014,13133629,12910283,4370992,14535975,5997020,5707818,13718737,2504095,10516836,11329682,2796649,11916158,3383173,4130419,12143240,8893606,129117,876971,9121104,1331783,9576124,10389322,1625009,14908182,6633453,6925851,15721184,7380471,16175372,16402682,8127489,4389423,12891860,13119266,5137369,13704398,5722165,6015427,14517560];typeof Int32Array<"u"&&(rI=new Int32Array(rI));const iK=$a("crc-24",function(r,e){$i.Buffer.isBuffer(r)||(r=Da(r));let t=typeof e<"u"?~~e:11994318;for(let n=0;n<r.length;n++){const i=r[n];t=(rI[(t>>16^i)&255]^t<<8)&16777215}return t});let nI=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(nI=new Int32Array(nI));const sK=$a("crc-32",function(r,e){$i.Buffer.isBuffer(r)||(r=Da(r));let t=e===0?0:~~e^-1;for(let n=0;n<r.length;n++){const i=r[n];t=nI[(t^i)&255]^t>>>8}return t^-1});let iI=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(iI=new Int32Array(iI));const oK=$a("jam",function(r,e=-1){$i.Buffer.isBuffer(r)||(r=Da(r));let t=e===0?0:~~e;for(let n=0;n<r.length;n++){const i=r[n];t=iI[(t^i)&255]^t>>>8}return t}),ipe={crc1:XV,crc8:JV,crc81wire:QV,crc16:ZV,crc16ccitt:eK,crc16modbus:tK,crc16xmodem:rK,crc16kermit:nK,crc24:iK,crc32:sK,crcjam:oK},spe=Object.freeze(Object.defineProperty({__proto__:null,crc1:XV,crc16:ZV,crc16ccitt:eK,crc16kermit:nK,crc16modbus:tK,crc16xmodem:rK,crc24:iK,crc32:sK,crc8:JV,crc81wire:QV,crcjam:oK,default:ipe},Symbol.toStringTag,{value:"Module"})),ope=Xd(spe);var e8;function Gf(){if(e8)return Yr;e8=1;var r=Yr&&Yr.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.bufferXOR=Yr.setDifference=Yr.arrayContains=Yr.arraysEqual=Yr.hasPrefix=Yr.isURType=Yr.intToBytes=Yr.toUint32=Yr.getCRCHex=Yr.getCRC=Yr.split=Yr.partition=Yr.sha256Hash=void 0;const e=r(YV()),t=ope,n=m=>e.default("sha256").update(m).digest();Yr.sha256Hash=n;const i=(m,y)=>m.match(new RegExp(".{1,"+y+"}","g"))||[m];Yr.partition=i;const s=(m,y)=>[m.slice(0,-y),m.slice(-y)];Yr.split=s;const o=m=>t.crc32(m);Yr.getCRC=o;const a=m=>t.crc32(m).toString(16).padStart(8,"0");Yr.getCRCHex=a;const c=m=>m>>>0;Yr.toUint32=c;const l=m=>{const y=new ArrayBuffer(4);return new DataView(y).setUint32(0,m,!1),Xe.from(y)};Yr.intToBytes=l;const u=m=>m.split("").every((y,v)=>{let b=m.charCodeAt(v);return 97<=b&&b<=122||48<=b&&b<=57||b===45});Yr.isURType=u;const f=(m,y)=>m.indexOf(y)===0;Yr.hasPrefix=f;const h=(m,y)=>m.length!==y.length?!1:m.every(v=>y.includes(v));Yr.arraysEqual=h;const d=(m,y)=>y.every(v=>m.includes(v));Yr.arrayContains=d;const g=(m,y)=>m.filter(v=>y.indexOf(v)<0);Yr.setDifference=g;const p=(m,y)=>{const v=Math.max(m.length,y.length),b=Xe.allocUnsafe(v);for(let _=0;_<v;++_)b[_]=m[_]^y[_];return b};return Yr.bufferXOR=p,Yr}var Mu={},Py={exports:{}},ape=Py.exports,t8;function cpe(){return t8||(t8=1,function(r){(function(e,t){r.exports?r.exports=t():e.CBOR=t()})(ape,function(){var e=function(){function t(E){this.$hex=E}t.prototype={length:function(){return this.$hex.length/2},toString:function(E){if(!E||E==="hex"||E===16)return this.$hex;if(E==="utf-8"){for(var S="",C=0;C<this.$hex.length;C+=2)S+="%"+this.$hex.substring(C,C+2);return decodeURIComponent(S)}if(E==="latin"){for(var S=[],C=0;C<this.$hex.length;C+=2)S.push(parseInt(this.$hex.substring(C,C+2),16));return String.fromCharCode.apply(String,S)}throw new Error("Unrecognised format: "+E)}},t.fromLatinString=function(E){for(var S="",C=0;C<E.length;C++){var k=E.charCodeAt(C).toString(16);k.length===1&&(k="0"+k),S+=k}return new t(S)},t.fromUtf8String=function(E){for(var S=encodeURIComponent(E),C="",k=0;k<S.length;k++)if(S.charAt(k)==="%")C+=S.substring(k+1,k+3),k+=2;else{var $=S.charCodeAt(k).toString(16);$.length<2&&($="0"+$),C+=$}return new t(C)};var n=[],i={},s=function(E){return function(){throw new Error(E+" not implemented")}};function o(){}o.prototype={peekByte:s("peekByte"),readByte:s("readByte"),readChunk:s("readChunk"),readFloat16:function(){var E=this.readUint16(),S=(E&32767)>>10,C=E&1023,k=E&32768;if(S===31)return C===0?k?-1/0:1/0:NaN;var $=S?Math.pow(2,S-25)*(1024+C):Math.pow(2,-24)*C;return k?-$:$},readFloat32:function(){var E=this.readUint32(),S=(E&2147483647)>>23,C=E&8388607,k=E&2147483648;if(S===255)return C===0?k?-1/0:1/0:NaN;var $=S?Math.pow(2,S-23-127)*(8388608+C):Math.pow(2,-149)*C;return k?-$:$},readFloat64:function(){var E=this.readUint32(),S=this.readUint32(),C=E>>20&2047,k=(E&1048575)*4294967296+S,$=E&2147483648;if(C===2047)return k===0?$?-1/0:1/0:NaN;var J=C?Math.pow(2,C-52-1023)*(4503599627370496+k):Math.pow(2,-1074)*k;return $?-J:J},readUint16:function(){return this.readByte()*256+this.readByte()},readUint32:function(){return this.readUint16()*65536+this.readUint16()},readUint64:function(){return this.readUint32()*4294967296+this.readUint32()}};function a(){}a.prototype={writeByte:s("writeByte"),result:s("result"),writeFloat16:s("writeFloat16"),writeFloat32:s("writeFloat32"),writeFloat64:s("writeFloat64"),writeUint16:function(E){this.writeByte(E>>8&255),this.writeByte(E&255)},writeUint32:function(E){this.writeUint16(E>>16&65535),this.writeUint16(E&65535)},writeUint64:function(E){if(E>=9007199254740992||E<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+E+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(E/4294967296)),this.writeUint32(E%4294967296)},writeString:s("writeString"),canWriteBinary:function(E){return!1},writeBinary:s("writeChunk")};function c(E){var S=E.readByte(),C=S>>5,k=S&31;return{type:C,value:k}}function l(E,S){var C=E.value;if(C<24)return C;if(C==24)return S.readByte();if(C==25)return S.readUint16();if(C==26)return S.readUint32();if(C==27)return S.readUint64();if(C==31)return null;s("Additional info: "+C)()}function u(E,S,C){C.writeByte(E<<5|S)}function f(E,S,C){var k=E<<5;S<24?C.writeByte(k|S):S<256?(C.writeByte(k|24),C.writeByte(S)):S<65536?(C.writeByte(k|25),C.writeUint16(S)):S<4294967296?(C.writeByte(k|26),C.writeUint32(S)):(C.writeByte(k|27),C.writeUint64(S))}var h=new Error;function d(E){var S=c(E);switch(S.type){case 0:return l(S,E);case 1:return-1-l(S,E);case 2:return E.readChunk(l(S,E));case 3:var C=E.readChunk(l(S,E));return C.toString("utf-8");case 4:case 5:var k=l(S,E),R=[];if(k!==null){S.type===5&&(k*=2);for(var $=0;$<k;$++)R[$]=d(E)}else for(var J;(J=d(E))!==h;)R.push(J);if(S.type===5){for(var j={},$=0;$<R.length;$+=2)j[R[$]]=R[$+1];return j}else return R;case 6:var L=l(S,E),w=i[L],R=d(E);return w?w(R):R;case 7:if(S.value===25)return E.readFloat16();if(S.value===26)return E.readFloat32();if(S.value===27)return E.readFloat64();switch(l(S,E)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case null:return h;default:throw new Error("Unknown fixed value: "+S.value)}default:throw new Error("Unsupported header: "+JSON.stringify(S))}throw new Error("not implemented yet")}function g(E,S){for(var C=0;C<n.length;C++){var k=n[C].fn(E);if(k!==void 0)return f(6,n[C].tag,S),g(k,S)}if(E&&typeof E.toCBOR=="function"&&(E=E.toCBOR()),E===!1)f(7,20,S);else if(E===!0)f(7,21,S);else if(E===null)f(7,22,S);else if(E===void 0)f(7,23,S);else if(typeof E=="number")Math.floor(E)===E&&E<9007199254740992&&E>-9007199254740992?E<0?f(1,-1-E,S):f(0,E,S):(u(7,27,S),S.writeFloat64(E));else if(typeof E=="string")S.writeString(E,function(J){f(3,J,S)});else if(S.canWriteBinary(E))S.writeBinary(E,function(J){f(2,J,S)});else if(typeof E=="object")if(y.config.useToJSON&&typeof E.toJSON=="function"&&(E=E.toJSON()),Array.isArray(E)){f(4,E.length,S);for(var C=0;C<E.length;C++)g(E[C],S)}else{var $=Object.keys(E);f(5,$.length,S);for(var C=0;C<$.length;C++)g($[C],S),g(E[$[C]],S)}else throw new Error("CBOR encoding not supported: "+E)}var p=[],m=[],y={config:{useToJSON:!0},addWriter:function(E,S){typeof E=="string"?m.push(function(C){if(E===C)return S(C)}):m.push(E)},addReader:function(E,S){typeof E=="string"?p.push(function(C,k){if(E===k)return S(C,k)}):p.push(E)},encode:function(E,S){for(var C=0;C<m.length;C++){var k=m[C],$=k(S);if($)return g(E,$),$.result()}throw new Error("Unsupported output format: "+S)},decode:function(E,S){for(var C=0;C<p.length;C++){var k=p[C],$=k(E,S);if($)return d($)}throw new Error("Unsupported input format: "+S)},addSemanticEncode:function(E,S){if(typeof E!="number"||E%1!==0||E<0)throw new Error("Tag must be a positive integer");return n.push({tag:E,fn:S}),this},addSemanticDecode:function(E,S){if(typeof E!="number"||E%1!==0||E<0)throw new Error("Tag must be a positive integer");return i[E]=S,this},Reader:o,Writer:a};function v(E){this.buffer=E,this.pos=0}v.prototype=Object.create(o.prototype),v.prototype.peekByte=function(){return this.buffer[this.pos]},v.prototype.readByte=function(){return this.buffer[this.pos++]},v.prototype.readUint16=function(){var E=this.buffer.readUInt16BE(this.pos);return this.pos+=2,E},v.prototype.readUint32=function(){var E=this.buffer.readUInt32BE(this.pos);return this.pos+=4,E},v.prototype.readFloat32=function(){var E=this.buffer.readFloatBE(this.pos);return this.pos+=4,E},v.prototype.readFloat64=function(){var E=this.buffer.readDoubleBE(this.pos);return this.pos+=8,E},v.prototype.readChunk=function(E){var S=Xe.alloc(E);return this.buffer.copy(S,0,this.pos,this.pos+=E),S};function b(E){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=Xe.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=E}b.prototype=Object.create(a.prototype),b.prototype.writeByte=function(E){this.latestBuffer[this.latestBufferOffset++]=E,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Xe.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},b.prototype.writeFloat32=function(E){var S=Xe.alloc(4);S.writeFloatBE(E,0),this.writeBuffer(S)},b.prototype.writeFloat64=function(E){var S=Xe.alloc(8);S.writeDoubleBE(E,0),this.writeBuffer(S)},b.prototype.writeString=function(E,S){var C=Xe.from(E,"utf-8");S(C.length),this.writeBuffer(C)},b.prototype.canWriteBinary=function(E){return E instanceof Xe},b.prototype.writeBinary=function(E,S){S(E.length),this.writeBuffer(E)},b.prototype.writeBuffer=function(E){if(!(E instanceof Xe))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=E.length?(E.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=E.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Xe.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(E),this.latestBuffer=Xe.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(E),this.byteLength+=E.length},b.prototype.result=function(){for(var E=Xe.alloc(this.byteLength),S=0,C=0;C<this.completeBuffers.length;C++){var k=this.completeBuffers[C];k.copy(E,S,0,k.length),S+=k.length}return this.latestBufferOffset&&this.latestBuffer.copy(E,S,0,this.latestBufferOffset),this.stringFormat?E.toString(this.stringFormat):E},typeof Xe=="function"&&(y.addReader(function(E,S){if(E instanceof Xe)return new v(E);if(S==="hex"||S==="base64"){var C=Xe.from(E,S);return new v(C)}}),y.addWriter(function(E){if(!E||E==="buffer")return new b;if(E==="hex"||E==="base64")return new b(E)}));function _(E){this.hex=E,this.pos=0}_.prototype=Object.create(o.prototype),_.prototype.peekByte=function(){var E=this.hex.substring(this.pos,2);return parseInt(E,16)},_.prototype.readByte=function(){var E=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(E,16)},_.prototype.readChunk=function(E){var S=this.hex.substring(this.pos,this.pos+E*2);return this.pos+=E*2,typeof Xe=="function"?Xe.from(S,"hex"):new t(S)};function x(E){this.$hex="",this.finalFormat=E||"hex"}return x.prototype=Object.create(a.prototype),x.prototype.writeByte=function(E){if(E<0||E>255)throw new Error("Byte value out of range: "+E);var S=E.toString(16);S.length==1&&(S="0"+S),this.$hex+=S},x.prototype.canWriteBinary=function(E){return E instanceof t||typeof Xe=="function"&&E instanceof Xe},x.prototype.writeBinary=function(E,S){if(E instanceof t)S(E.length()),this.$hex+=E.$hex;else if(typeof Xe=="function"&&E instanceof Xe)S(E.length),this.$hex+=E.toString("hex");else throw new TypeError("HexWriter only accepts BinaryHex or Buffers")},x.prototype.result=function(){return this.finalFormat==="buffer"&&typeof Xe=="function"?Xe.from(this.$hex,"hex"):new t(this.$hex).toString(this.finalFormat)},x.prototype.writeString=function(E,S){var C=t.fromUtf8String(E);S(C.length()),this.$hex+=C.$hex},y.addReader(function(E,S){if(E instanceof t||E.$hex)return new _(E.$hex);if(S==="hex")return new _(E)}),y.addWriter(function(E){if(E==="hex")return new x}),y}();return e.addSemanticEncode(0,function(t){if(t instanceof Date)return t.toISOString()}).addSemanticDecode(0,function(t){return new Date(t)}).addSemanticDecode(1,function(t){return new Date(t)}),e})}(Py)),Py.exports}var r8;function aK(){if(r8)return Mu;r8=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.cborDecode=Mu.cborEncode=void 0;const r=cpe(),e=n=>r.encode(n);Mu.cborEncode=e;const t=n=>r.decode(Xe.isBuffer(n)?n:Xe.from(n,"hex"));return Mu.cborDecode=t,Mu}var n8;function cK(){if(n8)return Hm;n8=1,Object.defineProperty(Hm,"__esModule",{value:!0});const r=f3(),e=Gf(),t=aK();class n{constructor(s,o="bytes"){if(this._cborPayload=s,this._type=o,!e.isURType(this._type))throw new r.InvalidTypeError}static fromBuffer(s){return new n(t.cborEncode(s))}static from(s,o){return n.fromBuffer(Xe.from(s,o))}decodeCBOR(){return t.cborDecode(this._cborPayload)}get type(){return this._type}get cbor(){return this._cborPayload}equals(s){return this.type===s.type&&this.cbor.equals(s.cbor)}}return Hm.default=n,Hm}var yh={},$l={},K_={exports:{}},H_={},W_={},G_={},Y_,i8;function lpe(){if(i8)return Y_;i8=1;var r=sw()(),e=wl(),t=e("Object.prototype.toString"),n=function(a){return r&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:t(a)==="[object Arguments]"},i=function(a){return n(a)?!0:a!==null&&typeof a=="object"&&"length"in a&&typeof a.length=="number"&&a.length>=0&&t(a)!=="[object Array]"&&"callee"in a&&t(a.callee)==="[object Function]"},s=function(){return n(arguments)}();return n.isLegacyArguments=i,Y_=s?n:i,Y_}var X_,s8;function upe(){if(s8)return X_;s8=1;var r=wl(),e=sw()(),t=qV(),n=rp(),i;if(e){var s=r("RegExp.prototype.exec"),o={},a=function(){throw o},c={toString:a,valueOf:a};typeof Symbol.toPrimitive=="symbol"&&(c[Symbol.toPrimitive]=a),i=function(h){if(!h||typeof h!="object")return!1;var d=n(h,"lastIndex"),g=d&&t(d,"value");if(!g)return!1;try{s(h,c)}catch(p){return p===o}}}else{var l=r("Object.prototype.toString"),u="[object RegExp]";i=function(h){return!h||typeof h!="object"&&typeof h!="function"?!1:l(h)===u}}return X_=i,X_}var J_,o8;function fpe(){if(o8)return J_;o8=1;var r=wl(),e=upe(),t=r("RegExp.prototype.exec"),n=_c();return J_=function(s){if(!e(s))throw new n("`regex` must be a RegExp");return function(a){return t(s,a)!==null}},J_}var Q_,a8;function hpe(){if(a8)return Q_;a8=1;var r=wl(),e=fpe(),t=e(/^\s*(?:function)?\*/),n=sw()(),i=l3(),s=r("Object.prototype.toString"),o=r("Function.prototype.toString"),a=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},c;return Q_=function(u){if(typeof u!="function")return!1;if(t(o(u)))return!0;if(!n){var f=s(u);return f==="[object GeneratorFunction]"}if(!i)return!1;if(typeof c>"u"){var h=a();c=h?i(h):!1}return i(u)===c},Q_}var c8;function dpe(){return c8||(c8=1,function(r){var e=lpe(),t=hpe(),n=KV(),i=HV();function s(ne){return ne.call.bind(ne)}var o=typeof BigInt<"u",a=typeof Symbol<"u",c=s(Object.prototype.toString),l=s(Number.prototype.valueOf),u=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(o)var h=s(BigInt.prototype.valueOf);if(a)var d=s(Symbol.prototype.valueOf);function g(ne,de){if(typeof ne!="object")return!1;try{return de(ne),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=t,r.isTypedArray=i;function p(ne){return typeof Promise<"u"&&ne instanceof Promise||ne!==null&&typeof ne=="object"&&typeof ne.then=="function"&&typeof ne.catch=="function"}r.isPromise=p;function m(ne){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ne):i(ne)||A(ne)}r.isArrayBufferView=m;function y(ne){return n(ne)==="Uint8Array"}r.isUint8Array=y;function v(ne){return n(ne)==="Uint8ClampedArray"}r.isUint8ClampedArray=v;function b(ne){return n(ne)==="Uint16Array"}r.isUint16Array=b;function _(ne){return n(ne)==="Uint32Array"}r.isUint32Array=_;function x(ne){return n(ne)==="Int8Array"}r.isInt8Array=x;function E(ne){return n(ne)==="Int16Array"}r.isInt16Array=E;function S(ne){return n(ne)==="Int32Array"}r.isInt32Array=S;function C(ne){return n(ne)==="Float32Array"}r.isFloat32Array=C;function k(ne){return n(ne)==="Float64Array"}r.isFloat64Array=k;function $(ne){return n(ne)==="BigInt64Array"}r.isBigInt64Array=$;function J(ne){return n(ne)==="BigUint64Array"}r.isBigUint64Array=J;function j(ne){return c(ne)==="[object Map]"}j.working=typeof Map<"u"&&j(new Map);function L(ne){return typeof Map>"u"?!1:j.working?j(ne):ne instanceof Map}r.isMap=L;function w(ne){return c(ne)==="[object Set]"}w.working=typeof Set<"u"&&w(new Set);function R(ne){return typeof Set>"u"?!1:w.working?w(ne):ne instanceof Set}r.isSet=R;function N(ne){return c(ne)==="[object WeakMap]"}N.working=typeof WeakMap<"u"&&N(new WeakMap);function Y(ne){return typeof WeakMap>"u"?!1:N.working?N(ne):ne instanceof WeakMap}r.isWeakMap=Y;function z(ne){return c(ne)==="[object WeakSet]"}z.working=typeof WeakSet<"u"&&z(new WeakSet);function G(ne){return z(ne)}r.isWeakSet=G;function te(ne){return c(ne)==="[object ArrayBuffer]"}te.working=typeof ArrayBuffer<"u"&&te(new ArrayBuffer);function X(ne){return typeof ArrayBuffer>"u"?!1:te.working?te(ne):ne instanceof ArrayBuffer}r.isArrayBuffer=X;function T(ne){return c(ne)==="[object DataView]"}T.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&T(new DataView(new ArrayBuffer(1),0,1));function A(ne){return typeof DataView>"u"?!1:T.working?T(ne):ne instanceof DataView}r.isDataView=A;var O=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function I(ne){return c(ne)==="[object SharedArrayBuffer]"}function U(ne){return typeof O>"u"?!1:(typeof I.working>"u"&&(I.working=I(new O)),I.working?I(ne):ne instanceof O)}r.isSharedArrayBuffer=U;function Z(ne){return c(ne)==="[object AsyncFunction]"}r.isAsyncFunction=Z;function oe(ne){return c(ne)==="[object Map Iterator]"}r.isMapIterator=oe;function he(ne){return c(ne)==="[object Set Iterator]"}r.isSetIterator=he;function re(ne){return c(ne)==="[object Generator]"}r.isGeneratorObject=re;function F(ne){return c(ne)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=F;function H(ne){return g(ne,l)}r.isNumberObject=H;function ue(ne){return g(ne,u)}r.isStringObject=ue;function le(ne){return g(ne,f)}r.isBooleanObject=le;function we(ne){return o&&g(ne,h)}r.isBigIntObject=we;function ie(ne){return a&&g(ne,d)}r.isSymbolObject=ie;function B(ne){return H(ne)||ue(ne)||le(ne)||we(ne)||ie(ne)}r.isBoxedPrimitive=B;function q(ne){return typeof Uint8Array<"u"&&(X(ne)||U(ne))}r.isAnyArrayBuffer=q,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ne){Object.defineProperty(r,ne,{enumerable:!1,value:function(){throw new Error(ne+" is not supported in userland")}})})}(G_)),G_}var Z_,l8;function ppe(){return l8||(l8=1,Z_=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),Z_}var u8;function dg(){return u8||(u8=1,function(r){var e={},t=Object.getOwnPropertyDescriptors||function(O){for(var I=Object.keys(O),U={},Z=0;Z<I.length;Z++)U[I[Z]]=Object.getOwnPropertyDescriptor(O,I[Z]);return U},n=/%[sdj%]/g;r.format=function(A){if(!E(A)){for(var O=[],I=0;I<arguments.length;I++)O.push(a(arguments[I]));return O.join(" ")}for(var I=1,U=arguments,Z=U.length,oe=String(A).replace(n,function(re){if(re==="%%")return"%";if(I>=Z)return re;switch(re){case"%s":return String(U[I++]);case"%d":return Number(U[I++]);case"%j":try{return JSON.stringify(U[I++])}catch{return"[Circular]"}default:return re}}),he=U[I];I<Z;he=U[++I])b(he)||!$(he)?oe+=" "+he:oe+=" "+a(he);return oe},r.deprecate=function(A,O){if(typeof Kt<"u"&&Kt.noDeprecation===!0)return A;if(typeof Kt>"u")return function(){return r.deprecate(A,O).apply(this,arguments)};var I=!1;function U(){if(!I){if(Kt.throwDeprecation)throw new Error(O);Kt.traceDeprecation?console.trace(O):console.error(O),I=!0}return A.apply(this,arguments)}return U};var i={},s=/^$/;if(e.NODE_DEBUG){var o=e.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+o+"$","i")}r.debuglog=function(A){if(A=A.toUpperCase(),!i[A])if(s.test(A)){var O=Kt.pid;i[A]=function(){var I=r.format.apply(r,arguments);console.error("%s %d: %s",A,O,I)}}else i[A]=function(){};return i[A]};function a(A,O){var I={seen:[],stylize:l};return arguments.length>=3&&(I.depth=arguments[2]),arguments.length>=4&&(I.colors=arguments[3]),v(O)?I.showHidden=O:O&&r._extend(I,O),C(I.showHidden)&&(I.showHidden=!1),C(I.depth)&&(I.depth=2),C(I.colors)&&(I.colors=!1),C(I.customInspect)&&(I.customInspect=!0),I.colors&&(I.stylize=c),f(I,A,I.depth)}r.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function c(A,O){var I=a.styles[O];return I?"\x1B["+a.colors[I][0]+"m"+A+"\x1B["+a.colors[I][1]+"m":A}function l(A,O){return A}function u(A){var O={};return A.forEach(function(I,U){O[I]=!0}),O}function f(A,O,I){if(A.customInspect&&O&&L(O.inspect)&&O.inspect!==r.inspect&&!(O.constructor&&O.constructor.prototype===O)){var U=O.inspect(I,A);return E(U)||(U=f(A,U,I)),U}var Z=h(A,O);if(Z)return Z;var oe=Object.keys(O),he=u(oe);if(A.showHidden&&(oe=Object.getOwnPropertyNames(O)),j(O)&&(oe.indexOf("message")>=0||oe.indexOf("description")>=0))return d(O);if(oe.length===0){if(L(O)){var re=O.name?": "+O.name:"";return A.stylize("[Function"+re+"]","special")}if(k(O))return A.stylize(RegExp.prototype.toString.call(O),"regexp");if(J(O))return A.stylize(Date.prototype.toString.call(O),"date");if(j(O))return d(O)}var F="",H=!1,ue=["{","}"];if(y(O)&&(H=!0,ue=["[","]"]),L(O)){var le=O.name?": "+O.name:"";F=" [Function"+le+"]"}if(k(O)&&(F=" "+RegExp.prototype.toString.call(O)),J(O)&&(F=" "+Date.prototype.toUTCString.call(O)),j(O)&&(F=" "+d(O)),oe.length===0&&(!H||O.length==0))return ue[0]+F+ue[1];if(I<0)return k(O)?A.stylize(RegExp.prototype.toString.call(O),"regexp"):A.stylize("[Object]","special");A.seen.push(O);var we;return H?we=g(A,O,I,he,oe):we=oe.map(function(ie){return p(A,O,I,he,ie,H)}),A.seen.pop(),m(we,F,ue)}function h(A,O){if(C(O))return A.stylize("undefined","undefined");if(E(O)){var I="'"+JSON.stringify(O).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return A.stylize(I,"string")}if(x(O))return A.stylize(""+O,"number");if(v(O))return A.stylize(""+O,"boolean");if(b(O))return A.stylize("null","null")}function d(A){return"["+Error.prototype.toString.call(A)+"]"}function g(A,O,I,U,Z){for(var oe=[],he=0,re=O.length;he<re;++he)G(O,String(he))?oe.push(p(A,O,I,U,String(he),!0)):oe.push("");return Z.forEach(function(F){F.match(/^\d+$/)||oe.push(p(A,O,I,U,F,!0))}),oe}function p(A,O,I,U,Z,oe){var he,re,F;if(F=Object.getOwnPropertyDescriptor(O,Z)||{value:O[Z]},F.get?F.set?re=A.stylize("[Getter/Setter]","special"):re=A.stylize("[Getter]","special"):F.set&&(re=A.stylize("[Setter]","special")),G(U,Z)||(he="["+Z+"]"),re||(A.seen.indexOf(F.value)<0?(b(I)?re=f(A,F.value,null):re=f(A,F.value,I-1),re.indexOf(`
`)>-1&&(oe?re=re.split(`
`).map(function(H){return"  "+H}).join(`
`).slice(2):re=`
`+re.split(`
`).map(function(H){return"   "+H}).join(`
`))):re=A.stylize("[Circular]","special")),C(he)){if(oe&&Z.match(/^\d+$/))return re;he=JSON.stringify(""+Z),he.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(he=he.slice(1,-1),he=A.stylize(he,"name")):(he=he.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),he=A.stylize(he,"string"))}return he+": "+re}function m(A,O,I){var U=A.reduce(function(Z,oe){return oe.indexOf(`
`)>=0,Z+oe.replace(/\u001b\[\d\d?m/g,"").length+1},0);return U>60?I[0]+(O===""?"":O+`
 `)+" "+A.join(`,
  `)+" "+I[1]:I[0]+O+" "+A.join(", ")+" "+I[1]}r.types=dpe();function y(A){return Array.isArray(A)}r.isArray=y;function v(A){return typeof A=="boolean"}r.isBoolean=v;function b(A){return A===null}r.isNull=b;function _(A){return A==null}r.isNullOrUndefined=_;function x(A){return typeof A=="number"}r.isNumber=x;function E(A){return typeof A=="string"}r.isString=E;function S(A){return typeof A=="symbol"}r.isSymbol=S;function C(A){return A===void 0}r.isUndefined=C;function k(A){return $(A)&&R(A)==="[object RegExp]"}r.isRegExp=k,r.types.isRegExp=k;function $(A){return typeof A=="object"&&A!==null}r.isObject=$;function J(A){return $(A)&&R(A)==="[object Date]"}r.isDate=J,r.types.isDate=J;function j(A){return $(A)&&(R(A)==="[object Error]"||A instanceof Error)}r.isError=j,r.types.isNativeError=j;function L(A){return typeof A=="function"}r.isFunction=L;function w(A){return A===null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||typeof A=="symbol"||typeof A>"u"}r.isPrimitive=w,r.isBuffer=ppe();function R(A){return Object.prototype.toString.call(A)}function N(A){return A<10?"0"+A.toString(10):A.toString(10)}var Y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function z(){var A=new Date,O=[N(A.getHours()),N(A.getMinutes()),N(A.getSeconds())].join(":");return[A.getDate(),Y[A.getMonth()],O].join(" ")}r.log=function(){console.log("%s - %s",z(),r.format.apply(r,arguments))},r.inherits=yi(),r._extend=function(A,O){if(!O||!$(O))return A;for(var I=Object.keys(O),U=I.length;U--;)A[I[U]]=O[I[U]];return A};function G(A,O){return Object.prototype.hasOwnProperty.call(A,O)}var te=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');if(te&&O[te]){var I=O[te];if(typeof I!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(I,te,{value:I,enumerable:!1,writable:!1,configurable:!0}),I}function I(){for(var U,Z,oe=new Promise(function(F,H){U=F,Z=H}),he=[],re=0;re<arguments.length;re++)he.push(arguments[re]);he.push(function(F,H){F?Z(F):U(H)});try{O.apply(this,he)}catch(F){Z(F)}return oe}return Object.setPrototypeOf(I,Object.getPrototypeOf(O)),te&&Object.defineProperty(I,te,{value:I,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(I,t(O))},r.promisify.custom=te;function X(A,O){if(!A){var I=new Error("Promise was rejected with a falsy value");I.reason=A,A=I}return O(A)}function T(A){if(typeof A!="function")throw new TypeError('The "original" argument must be of type Function');function O(){for(var I=[],U=0;U<arguments.length;U++)I.push(arguments[U]);var Z=I.pop();if(typeof Z!="function")throw new TypeError("The last argument must be of type Function");var oe=this,he=function(){return Z.apply(oe,arguments)};A.apply(this,I).then(function(re){Kt.nextTick(he.bind(null,null,re))},function(re){Kt.nextTick(X.bind(null,re,he))})}return Object.setPrototypeOf(O,Object.getPrototypeOf(A)),Object.defineProperties(O,t(A)),O}r.callbackify=T}(W_)),W_}var f8;function lK(){if(f8)return H_;f8=1;function r(v){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},r(v)}function e(v,b,_){return Object.defineProperty(v,"prototype",{writable:!1}),v}function t(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function n(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),b&&i(v,b)}function i(v,b){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,E){return x.__proto__=E,x},i(v,b)}function s(v){var b=c();return function(){var x=l(v),E;if(b){var S=l(this).constructor;E=Reflect.construct(x,arguments,S)}else E=x.apply(this,arguments);return o(this,E)}}function o(v,b){if(b&&(r(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(v)}function a(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l(v){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)},l(v)}var u={},f,h;function d(v,b,_){_||(_=Error);function x(S,C,k){return typeof b=="string"?b:b(S,C,k)}var E=function(S){n(k,S);var C=s(k);function k($,J,j){var L;return t(this,k),L=C.call(this,x($,J,j)),L.code=v,L}return e(k)}(_);u[v]=E}function g(v,b){if(Array.isArray(v)){var _=v.length;return v=v.map(function(x){return String(x)}),_>2?"one of ".concat(b," ").concat(v.slice(0,_-1).join(", "),", or ")+v[_-1]:_===2?"one of ".concat(b," ").concat(v[0]," or ").concat(v[1]):"of ".concat(b," ").concat(v[0])}else return"of ".concat(b," ").concat(String(v))}function p(v,b,_){return v.substr(0,b.length)===b}function m(v,b,_){return(_===void 0||_>v.length)&&(_=v.length),v.substring(_-b.length,_)===b}function y(v,b,_){return typeof _!="number"&&(_=0),_+b.length>v.length?!1:v.indexOf(b,_)!==-1}return d("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),d("ERR_INVALID_ARG_TYPE",function(v,b,_){f===void 0&&(f=pg()),f(typeof v=="string","'name' must be a string");var x;typeof b=="string"&&p(b,"not ")?(x="must not be",b=b.replace(/^not /,"")):x="must be";var E;if(m(v," argument"))E="The ".concat(v," ").concat(x," ").concat(g(b,"type"));else{var S=y(v,".")?"property":"argument";E='The "'.concat(v,'" ').concat(S," ").concat(x," ").concat(g(b,"type"))}return E+=". Received type ".concat(r(_)),E},TypeError),d("ERR_INVALID_ARG_VALUE",function(v,b){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";h===void 0&&(h=dg());var x=h.inspect(b);return x.length>128&&(x="".concat(x.slice(0,128),"...")),"The argument '".concat(v,"' ").concat(_,". Received ").concat(x)},TypeError),d("ERR_INVALID_RETURN_VALUE",function(v,b,_){var x;return _&&_.constructor&&_.constructor.name?x="instance of ".concat(_.constructor.name):x="type ".concat(r(_)),"Expected ".concat(v,' to be returned from the "').concat(b,'"')+" function but got ".concat(x,".")},TypeError),d("ERR_MISSING_ARGS",function(){for(var v=arguments.length,b=new Array(v),_=0;_<v;_++)b[_]=arguments[_];f===void 0&&(f=pg()),f(b.length>0,"At least one arg needs to be specified");var x="The ",E=b.length;switch(b=b.map(function(S){return'"'.concat(S,'"')}),E){case 1:x+="".concat(b[0]," argument");break;case 2:x+="".concat(b[0]," and ").concat(b[1]," arguments");break;default:x+=b.slice(0,E-1).join(", "),x+=", and ".concat(b[E-1]," arguments");break}return"".concat(x," must be specified")},TypeError),H_.codes=u,H_}var eS,h8;function gpe(){if(h8)return eS;h8=1;function r(G,te){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(G);te&&(T=T.filter(function(A){return Object.getOwnPropertyDescriptor(G,A).enumerable})),X.push.apply(X,T)}return X}function e(G){for(var te=1;te<arguments.length;te++){var X=arguments[te]!=null?arguments[te]:{};te%2?r(Object(X),!0).forEach(function(T){t(G,T,X[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):r(Object(X)).forEach(function(T){Object.defineProperty(G,T,Object.getOwnPropertyDescriptor(X,T))})}return G}function t(G,te,X){return te=o(te),te in G?Object.defineProperty(G,te,{value:X,enumerable:!0,configurable:!0,writable:!0}):G[te]=X,G}function n(G,te){if(!(G instanceof te))throw new TypeError("Cannot call a class as a function")}function i(G,te){for(var X=0;X<te.length;X++){var T=te[X];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(G,o(T.key),T)}}function s(G,te,X){return te&&i(G.prototype,te),Object.defineProperty(G,"prototype",{writable:!1}),G}function o(G){var te=a(G,"string");return v(te)==="symbol"?te:String(te)}function a(G,te){if(v(G)!=="object"||G===null)return G;var X=G[Symbol.toPrimitive];if(X!==void 0){var T=X.call(G,te);if(v(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(G)}function c(G,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(te&&te.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),Object.defineProperty(G,"prototype",{writable:!1}),te&&m(G,te)}function l(G){var te=g();return function(){var T=y(G),A;if(te){var O=y(this).constructor;A=Reflect.construct(T,arguments,O)}else A=T.apply(this,arguments);return u(this,A)}}function u(G,te){if(te&&(v(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(G)}function f(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function h(G){var te=typeof Map=="function"?new Map:void 0;return h=function(T){if(T===null||!p(T))return T;if(typeof T!="function")throw new TypeError("Super expression must either be null or a function");if(typeof te<"u"){if(te.has(T))return te.get(T);te.set(T,A)}function A(){return d(T,arguments,y(this).constructor)}return A.prototype=Object.create(T.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),m(A,T)},h(G)}function d(G,te,X){return g()?d=Reflect.construct.bind():d=function(A,O,I){var U=[null];U.push.apply(U,O);var Z=Function.bind.apply(A,U),oe=new Z;return I&&m(oe,I.prototype),oe},d.apply(null,arguments)}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p(G){return Function.toString.call(G).indexOf("[native code]")!==-1}function m(G,te){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,A){return T.__proto__=A,T},m(G,te)}function y(G){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},y(G)}function v(G){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},v(G)}var b=dg(),_=b.inspect,x=lK(),E=x.codes.ERR_INVALID_ARG_TYPE;function S(G,te,X){return(X===void 0||X>G.length)&&(X=G.length),G.substring(X-te.length,X)===te}function C(G,te){if(te=Math.floor(te),G.length==0||te==0)return"";var X=G.length*te;for(te=Math.floor(Math.log(te)/Math.log(2));te;)G+=G,te--;return G+=G.substring(0,X-G.length),G}var k="",$="",J="",j="",L={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},w=10;function R(G){var te=Object.keys(G),X=Object.create(Object.getPrototypeOf(G));return te.forEach(function(T){X[T]=G[T]}),Object.defineProperty(X,"message",{value:G.message}),X}function N(G){return _(G,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function Y(G,te,X){var T="",A="",O=0,I="",U=!1,Z=N(G),oe=Z.split(`
`),he=N(te).split(`
`),re=0,F="";if(X==="strictEqual"&&v(G)==="object"&&v(te)==="object"&&G!==null&&te!==null&&(X="strictEqualObject"),oe.length===1&&he.length===1&&oe[0]!==he[0]){var H=oe[0].length+he[0].length;if(H<=w){if((v(G)!=="object"||G===null)&&(v(te)!=="object"||te===null)&&(G!==0||te!==0))return"".concat(L[X],`

`)+"".concat(oe[0]," !== ").concat(he[0],`
`)}else if(X!=="strictEqualObject"){var ue=Kt.stderr&&Kt.stderr.isTTY?Kt.stderr.columns:80;if(H<ue){for(;oe[0][re]===he[0][re];)re++;re>2&&(F=`
  `.concat(C(" ",re),"^"),re=0)}}}for(var le=oe[oe.length-1],we=he[he.length-1];le===we&&(re++<2?I=`
  `.concat(le).concat(I):T=le,oe.pop(),he.pop(),!(oe.length===0||he.length===0));)le=oe[oe.length-1],we=he[he.length-1];var ie=Math.max(oe.length,he.length);if(ie===0){var B=Z.split(`
`);if(B.length>30)for(B[26]="".concat(k,"...").concat(j);B.length>27;)B.pop();return"".concat(L.notIdentical,`

`).concat(B.join(`
`),`
`)}re>3&&(I=`
`.concat(k,"...").concat(j).concat(I),U=!0),T!==""&&(I=`
  `.concat(T).concat(I),T="");var q=0,ne=L[X]+`
`.concat($,"+ actual").concat(j," ").concat(J,"- expected").concat(j),de=" ".concat(k,"...").concat(j," Lines skipped");for(re=0;re<ie;re++){var _e=re-O;if(oe.length<re+1)_e>1&&re>2&&(_e>4?(A+=`
`.concat(k,"...").concat(j),U=!0):_e>3&&(A+=`
  `.concat(he[re-2]),q++),A+=`
  `.concat(he[re-1]),q++),O=re,T+=`
`.concat(J,"-").concat(j," ").concat(he[re]),q++;else if(he.length<re+1)_e>1&&re>2&&(_e>4?(A+=`
`.concat(k,"...").concat(j),U=!0):_e>3&&(A+=`
  `.concat(oe[re-2]),q++),A+=`
  `.concat(oe[re-1]),q++),O=re,A+=`
`.concat($,"+").concat(j," ").concat(oe[re]),q++;else{var Ce=he[re],Me=oe[re],xe=Me!==Ce&&(!S(Me,",")||Me.slice(0,-1)!==Ce);xe&&S(Ce,",")&&Ce.slice(0,-1)===Me&&(xe=!1,Me+=","),xe?(_e>1&&re>2&&(_e>4?(A+=`
`.concat(k,"...").concat(j),U=!0):_e>3&&(A+=`
  `.concat(oe[re-2]),q++),A+=`
  `.concat(oe[re-1]),q++),O=re,A+=`
`.concat($,"+").concat(j," ").concat(Me),T+=`
`.concat(J,"-").concat(j," ").concat(Ce),q+=2):(A+=T,T="",(_e===1||re===0)&&(A+=`
  `.concat(Me),q++))}if(q>20&&re<ie-2)return"".concat(ne).concat(de,`
`).concat(A,`
`).concat(k,"...").concat(j).concat(T,`
`)+"".concat(k,"...").concat(j)}return"".concat(ne).concat(U?de:"",`
`).concat(A).concat(T).concat(I).concat(F)}var z=function(G,te){c(T,G);var X=l(T);function T(A){var O;if(n(this,T),v(A)!=="object"||A===null)throw new E("options","Object",A);var I=A.message,U=A.operator,Z=A.stackStartFn,oe=A.actual,he=A.expected,re=Error.stackTraceLimit;if(Error.stackTraceLimit=0,I!=null)O=X.call(this,String(I));else if(Kt.stderr&&Kt.stderr.isTTY&&(Kt.stderr&&Kt.stderr.getColorDepth&&Kt.stderr.getColorDepth()!==1?(k="\x1B[34m",$="\x1B[32m",j="\x1B[39m",J="\x1B[31m"):(k="",$="",j="",J="")),v(oe)==="object"&&oe!==null&&v(he)==="object"&&he!==null&&"stack"in oe&&oe instanceof Error&&"stack"in he&&he instanceof Error&&(oe=R(oe),he=R(he)),U==="deepStrictEqual"||U==="strictEqual")O=X.call(this,Y(oe,he,U));else if(U==="notDeepStrictEqual"||U==="notStrictEqual"){var F=L[U],H=N(oe).split(`
`);if(U==="notStrictEqual"&&v(oe)==="object"&&oe!==null&&(F=L.notStrictEqualObject),H.length>30)for(H[26]="".concat(k,"...").concat(j);H.length>27;)H.pop();H.length===1?O=X.call(this,"".concat(F," ").concat(H[0])):O=X.call(this,"".concat(F,`

`).concat(H.join(`
`),`
`))}else{var ue=N(oe),le="",we=L[U];U==="notDeepEqual"||U==="notEqual"?(ue="".concat(L[U],`

`).concat(ue),ue.length>1024&&(ue="".concat(ue.slice(0,1021),"..."))):(le="".concat(N(he)),ue.length>512&&(ue="".concat(ue.slice(0,509),"...")),le.length>512&&(le="".concat(le.slice(0,509),"...")),U==="deepEqual"||U==="equal"?ue="".concat(we,`

`).concat(ue,`

should equal

`):le=" ".concat(U," ").concat(le)),O=X.call(this,"".concat(ue).concat(le))}return Error.stackTraceLimit=re,O.generatedMessage=!I,Object.defineProperty(f(O),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),O.code="ERR_ASSERTION",O.actual=oe,O.expected=he,O.operator=U,Error.captureStackTrace&&Error.captureStackTrace(f(O),Z),O.stack,O.name="AssertionError",u(O)}return s(T,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:te,value:function(O,I){return _(this,e(e({},I),{},{customInspect:!1,depth:0}))}}]),T}(h(Error),_.custom);return eS=z,eS}var tS,d8;function uK(){if(d8)return tS;d8=1;var r=Object.prototype.toString;return tS=function(t){var n=r.call(t),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&r.call(t.callee)==="[object Function]"),i},tS}var rS,p8;function mpe(){if(p8)return rS;p8=1;var r;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=uK(),i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),o=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(h){var d=h.constructor;return d&&d.prototype===h},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!l["$"+h]&&e.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{c(window[h])}catch{return!0}}catch{return!0}return!1}(),f=function(h){if(typeof window>"u"||!u)return c(h);try{return c(h)}catch{return!1}};r=function(d){var g=d!==null&&typeof d=="object",p=t.call(d)==="[object Function]",m=n(d),y=g&&t.call(d)==="[object String]",v=[];if(!g&&!p&&!m)throw new TypeError("Object.keys called on a non-object");var b=o&&p;if(y&&d.length>0&&!e.call(d,0))for(var _=0;_<d.length;++_)v.push(String(_));if(m&&d.length>0)for(var x=0;x<d.length;++x)v.push(String(x));else for(var E in d)!(b&&E==="prototype")&&e.call(d,E)&&v.push(String(E));if(s)for(var S=f(d),C=0;C<a.length;++C)!(S&&a[C]==="constructor")&&e.call(d,a[C])&&v.push(a[C]);return v}}return rS=r,rS}var nS,g8;function fK(){if(g8)return nS;g8=1;var r=Array.prototype.slice,e=uK(),t=Object.keys,n=t?function(o){return t(o)}:mpe(),i=Object.keys;return n.shim=function(){if(Object.keys){var o=function(){var a=Object.keys(arguments);return a&&a.length===arguments.length}(1,2);o||(Object.keys=function(c){return e(c)?i(r.call(c)):i(c)})}else Object.keys=n;return Object.keys||n},nS=n,nS}var iS,m8;function ype(){if(m8)return iS;m8=1;var r=fK(),e=s3()(),t=wl(),n=i3(),i=t("Array.prototype.push"),s=t("Object.prototype.propertyIsEnumerable"),o=e?n.getOwnPropertySymbols:null;return iS=function(c,l){if(c==null)throw new TypeError("target must be an object");var u=n(c);if(arguments.length===1)return u;for(var f=1;f<arguments.length;++f){var h=n(arguments[f]),d=r(h),g=e&&(n.getOwnPropertySymbols||o);if(g)for(var p=g(h),m=0;m<p.length;++m){var y=p[m];s(h,y)&&i(d,y)}for(var v=0;v<d.length;++v){var b=d[v];if(s(h,b)){var _=h[b];u[b]=_}}}return u},iS}var sS,y8;function vpe(){if(y8)return sS;y8=1;var r=ype(),e=function(){if(!Object.assign)return!1;for(var n="abcdefghijklmnopqrst",i=n.split(""),s={},o=0;o<i.length;++o)s[i[o]]=i[o];var a=Object.assign({},s),c="";for(var l in a)c+=l;return n!==c},t=function(){if(!Object.assign||!Object.preventExtensions)return!1;var n=Object.preventExtensions({1:2});try{Object.assign(n,"xy")}catch{return n[1]==="y"}return!1};return sS=function(){return!Object.assign||e()||t()?r:Object.assign},sS}var oS,v8;function hK(){if(v8)return oS;v8=1;var r=function(e){return e!==e};return oS=function(t,n){return t===0&&n===0?1/t===1/n:!!(t===n||r(t)&&r(n))},oS}var aS,b8;function h3(){if(b8)return aS;b8=1;var r=hK();return aS=function(){return typeof Object.is=="function"?Object.is:r},aS}var cS,w8;function bpe(){if(w8)return cS;w8=1;var r=Xg(),e=iw(),t=e(r("String.prototype.indexOf"));return cS=function(i,s){var o=r(i,!!s);return typeof o=="function"&&t(i,".prototype.")>-1?e(o):o},cS}var lS,x8;function ow(){if(x8)return lS;x8=1;var r=fK(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",t=Object.prototype.toString,n=Array.prototype.concat,i=jV(),s=function(l){return typeof l=="function"&&t.call(l)==="[object Function]"},o=VV()(),a=function(l,u,f,h){if(u in l){if(h===!0){if(l[u]===f)return}else if(!s(h)||!h())return}o?i(l,u,f,!0):i(l,u,f)},c=function(l,u){var f=arguments.length>2?arguments[2]:{},h=r(u);e&&(h=n.call(h,Object.getOwnPropertySymbols(u)));for(var d=0;d<h.length;d+=1)a(l,h[d],u[h[d]],f[h[d]])};return c.supportsDescriptors=!!o,lS=c,lS}var uS,_8;function wpe(){if(_8)return uS;_8=1;var r=h3(),e=ow();return uS=function(){var n=r();return e(Object,{is:n},{is:function(){return Object.is!==n}}),n},uS}var fS,S8;function xpe(){if(S8)return fS;S8=1;var r=ow(),e=iw(),t=hK(),n=h3(),i=wpe(),s=e(n(),Object);return r(s,{getPolyfill:n,implementation:t,shim:i}),fS=s,fS}var hS,E8;function dK(){return E8||(E8=1,hS=function(e){return e!==e}),hS}var dS,A8;function pK(){if(A8)return dS;A8=1;var r=dK();return dS=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r},dS}var pS,I8;function _pe(){if(I8)return pS;I8=1;var r=ow(),e=pK();return pS=function(){var n=e();return r(Number,{isNaN:n},{isNaN:function(){return Number.isNaN!==n}}),n},pS}var gS,C8;function Spe(){if(C8)return gS;C8=1;var r=iw(),e=ow(),t=dK(),n=pK(),i=_pe(),s=r(n(),Number);return e(s,{getPolyfill:n,implementation:t,shim:i}),gS=s,gS}var mS,T8;function Epe(){if(T8)return mS;T8=1;function r(xe,Ae){return s(xe)||i(xe,Ae)||t(xe,Ae)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t(xe,Ae){if(xe){if(typeof xe=="string")return n(xe,Ae);var Oe=Object.prototype.toString.call(xe).slice(8,-1);if(Oe==="Object"&&xe.constructor&&(Oe=xe.constructor.name),Oe==="Map"||Oe==="Set")return Array.from(xe);if(Oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Oe))return n(xe,Ae)}}function n(xe,Ae){(Ae==null||Ae>xe.length)&&(Ae=xe.length);for(var Oe=0,se=new Array(Ae);Oe<Ae;Oe++)se[Oe]=xe[Oe];return se}function i(xe,Ae){var Oe=xe==null?null:typeof Symbol<"u"&&xe[Symbol.iterator]||xe["@@iterator"];if(Oe!=null){var se,V,Q,K,M=[],P=!0,ee=!1;try{if(Q=(Oe=Oe.call(xe)).next,Ae!==0)for(;!(P=(se=Q.call(Oe)).done)&&(M.push(se.value),M.length!==Ae);P=!0);}catch(pe){ee=!0,V=pe}finally{try{if(!P&&Oe.return!=null&&(K=Oe.return(),Object(K)!==K))return}finally{if(ee)throw V}}return M}}function s(xe){if(Array.isArray(xe))return xe}function o(xe){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ae){return typeof Ae}:function(Ae){return Ae&&typeof Symbol=="function"&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae},o(xe)}var a=/a/g.flags!==void 0,c=function(Ae){var Oe=[];return Ae.forEach(function(se){return Oe.push(se)}),Oe},l=function(Ae){var Oe=[];return Ae.forEach(function(se,V){return Oe.push([V,se])}),Oe},u=Object.is?Object.is:xpe(),f=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},h=Number.isNaN?Number.isNaN:Spe();function d(xe){return xe.call.bind(xe)}var g=d(Object.prototype.hasOwnProperty),p=d(Object.prototype.propertyIsEnumerable),m=d(Object.prototype.toString),y=dg().types,v=y.isAnyArrayBuffer,b=y.isArrayBufferView,_=y.isDate,x=y.isMap,E=y.isRegExp,S=y.isSet,C=y.isNativeError,k=y.isBoxedPrimitive,$=y.isNumberObject,J=y.isStringObject,j=y.isBooleanObject,L=y.isBigIntObject,w=y.isSymbolObject,R=y.isFloat32Array,N=y.isFloat64Array;function Y(xe){if(xe.length===0||xe.length>10)return!0;for(var Ae=0;Ae<xe.length;Ae++){var Oe=xe.charCodeAt(Ae);if(Oe<48||Oe>57)return!0}return xe.length===10&&xe>=Math.pow(2,32)}function z(xe){return Object.keys(xe).filter(Y).concat(f(xe).filter(Object.prototype.propertyIsEnumerable.bind(xe)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function G(xe,Ae){if(xe===Ae)return 0;for(var Oe=xe.length,se=Ae.length,V=0,Q=Math.min(Oe,se);V<Q;++V)if(xe[V]!==Ae[V]){Oe=xe[V],se=Ae[V];break}return Oe<se?-1:se<Oe?1:0}var te=!0,X=!1,T=0,A=1,O=2,I=3;function U(xe,Ae){return a?xe.source===Ae.source&&xe.flags===Ae.flags:RegExp.prototype.toString.call(xe)===RegExp.prototype.toString.call(Ae)}function Z(xe,Ae){if(xe.byteLength!==Ae.byteLength)return!1;for(var Oe=0;Oe<xe.byteLength;Oe++)if(xe[Oe]!==Ae[Oe])return!1;return!0}function oe(xe,Ae){return xe.byteLength!==Ae.byteLength?!1:G(new Uint8Array(xe.buffer,xe.byteOffset,xe.byteLength),new Uint8Array(Ae.buffer,Ae.byteOffset,Ae.byteLength))===0}function he(xe,Ae){return xe.byteLength===Ae.byteLength&&G(new Uint8Array(xe),new Uint8Array(Ae))===0}function re(xe,Ae){return $(xe)?$(Ae)&&u(Number.prototype.valueOf.call(xe),Number.prototype.valueOf.call(Ae)):J(xe)?J(Ae)&&String.prototype.valueOf.call(xe)===String.prototype.valueOf.call(Ae):j(xe)?j(Ae)&&Boolean.prototype.valueOf.call(xe)===Boolean.prototype.valueOf.call(Ae):L(xe)?L(Ae)&&BigInt.prototype.valueOf.call(xe)===BigInt.prototype.valueOf.call(Ae):w(Ae)&&Symbol.prototype.valueOf.call(xe)===Symbol.prototype.valueOf.call(Ae)}function F(xe,Ae,Oe,se){if(xe===Ae)return xe!==0?!0:Oe?u(xe,Ae):!0;if(Oe){if(o(xe)!=="object")return typeof xe=="number"&&h(xe)&&h(Ae);if(o(Ae)!=="object"||xe===null||Ae===null||Object.getPrototypeOf(xe)!==Object.getPrototypeOf(Ae))return!1}else{if(xe===null||o(xe)!=="object")return Ae===null||o(Ae)!=="object"?xe==Ae:!1;if(Ae===null||o(Ae)!=="object")return!1}var V=m(xe),Q=m(Ae);if(V!==Q)return!1;if(Array.isArray(xe)){if(xe.length!==Ae.length)return!1;var K=z(xe),M=z(Ae);return K.length!==M.length?!1:ue(xe,Ae,Oe,se,A,K)}if(V==="[object Object]"&&(!x(xe)&&x(Ae)||!S(xe)&&S(Ae)))return!1;if(_(xe)){if(!_(Ae)||Date.prototype.getTime.call(xe)!==Date.prototype.getTime.call(Ae))return!1}else if(E(xe)){if(!E(Ae)||!U(xe,Ae))return!1}else if(C(xe)||xe instanceof Error){if(xe.message!==Ae.message||xe.name!==Ae.name)return!1}else if(b(xe)){if(!Oe&&(R(xe)||N(xe))){if(!Z(xe,Ae))return!1}else if(!oe(xe,Ae))return!1;var P=z(xe),ee=z(Ae);return P.length!==ee.length?!1:ue(xe,Ae,Oe,se,T,P)}else{if(S(xe))return!S(Ae)||xe.size!==Ae.size?!1:ue(xe,Ae,Oe,se,O);if(x(xe))return!x(Ae)||xe.size!==Ae.size?!1:ue(xe,Ae,Oe,se,I);if(v(xe)){if(!he(xe,Ae))return!1}else if(k(xe)&&!re(xe,Ae))return!1}return ue(xe,Ae,Oe,se,T)}function H(xe,Ae){return Ae.filter(function(Oe){return p(xe,Oe)})}function ue(xe,Ae,Oe,se,V,Q){if(arguments.length===5){Q=Object.keys(xe);var K=Object.keys(Ae);if(Q.length!==K.length)return!1}for(var M=0;M<Q.length;M++)if(!g(Ae,Q[M]))return!1;if(Oe&&arguments.length===5){var P=f(xe);if(P.length!==0){var ee=0;for(M=0;M<P.length;M++){var pe=P[M];if(p(xe,pe)){if(!p(Ae,pe))return!1;Q.push(pe),ee++}else if(p(Ae,pe))return!1}var be=f(Ae);if(P.length!==be.length&&H(Ae,be).length!==ee)return!1}else{var fe=f(Ae);if(fe.length!==0&&H(Ae,fe).length!==0)return!1}}if(Q.length===0&&(V===T||V===A&&xe.length===0||xe.size===0))return!0;if(se===void 0)se={val1:new Map,val2:new Map,position:0};else{var Ee=se.val1.get(xe);if(Ee!==void 0){var Le=se.val2.get(Ae);if(Le!==void 0)return Ee===Le}se.position++}se.val1.set(xe,se.position),se.val2.set(Ae,se.position);var Ke=_e(xe,Ae,Oe,Q,se,V);return se.val1.delete(xe),se.val2.delete(Ae),Ke}function le(xe,Ae,Oe,se){for(var V=c(xe),Q=0;Q<V.length;Q++){var K=V[Q];if(F(Ae,K,Oe,se))return xe.delete(K),!0}return!1}function we(xe){switch(o(xe)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":xe=+xe;case"number":if(h(xe))return!1}return!0}function ie(xe,Ae,Oe){var se=we(Oe);return se??(Ae.has(se)&&!xe.has(se))}function B(xe,Ae,Oe,se,V){var Q=we(Oe);if(Q!=null)return Q;var K=Ae.get(Q);return K===void 0&&!Ae.has(Q)||!F(se,K,!1,V)?!1:!xe.has(Q)&&F(se,K,!1,V)}function q(xe,Ae,Oe,se){for(var V=null,Q=c(xe),K=0;K<Q.length;K++){var M=Q[K];if(o(M)==="object"&&M!==null)V===null&&(V=new Set),V.add(M);else if(!Ae.has(M)){if(Oe||!ie(xe,Ae,M))return!1;V===null&&(V=new Set),V.add(M)}}if(V!==null){for(var P=c(Ae),ee=0;ee<P.length;ee++){var pe=P[ee];if(o(pe)==="object"&&pe!==null){if(!le(V,pe,Oe,se))return!1}else if(!Oe&&!xe.has(pe)&&!le(V,pe,Oe,se))return!1}return V.size===0}return!0}function ne(xe,Ae,Oe,se,V,Q){for(var K=c(xe),M=0;M<K.length;M++){var P=K[M];if(F(Oe,P,V,Q)&&F(se,Ae.get(P),V,Q))return xe.delete(P),!0}return!1}function de(xe,Ae,Oe,se){for(var V=null,Q=l(xe),K=0;K<Q.length;K++){var M=r(Q[K],2),P=M[0],ee=M[1];if(o(P)==="object"&&P!==null)V===null&&(V=new Set),V.add(P);else{var pe=Ae.get(P);if(pe===void 0&&!Ae.has(P)||!F(ee,pe,Oe,se)){if(Oe||!B(xe,Ae,P,ee,se))return!1;V===null&&(V=new Set),V.add(P)}}}if(V!==null){for(var be=l(Ae),fe=0;fe<be.length;fe++){var Ee=r(be[fe],2),Le=Ee[0],Ke=Ee[1];if(o(Le)==="object"&&Le!==null){if(!ne(V,xe,Le,Ke,Oe,se))return!1}else if(!Oe&&(!xe.has(Le)||!F(xe.get(Le),Ke,!1,se))&&!ne(V,xe,Le,Ke,!1,se))return!1}return V.size===0}return!0}function _e(xe,Ae,Oe,se,V,Q){var K=0;if(Q===O){if(!q(xe,Ae,Oe,V))return!1}else if(Q===I){if(!de(xe,Ae,Oe,V))return!1}else if(Q===A)for(;K<xe.length;K++)if(g(xe,K)){if(!g(Ae,K)||!F(xe[K],Ae[K],Oe,V))return!1}else{if(g(Ae,K))return!1;for(var M=Object.keys(xe);K<M.length;K++){var P=M[K];if(!g(Ae,P)||!F(xe[P],Ae[P],Oe,V))return!1}return M.length===Object.keys(Ae).length}for(K=0;K<se.length;K++){var ee=se[K];if(!F(xe[ee],Ae[ee],Oe,V))return!1}return!0}function Ce(xe,Ae){return F(xe,Ae,X)}function Me(xe,Ae){return F(xe,Ae,te)}return mS={isDeepEqual:Ce,isDeepStrictEqual:Me},mS}var R8;function pg(){if(R8)return K_.exports;R8=1;function r(O){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},r(O)}function e(O,I,U){return Object.defineProperty(O,"prototype",{writable:!1}),O}function t(O,I){if(!(O instanceof I))throw new TypeError("Cannot call a class as a function")}var n=lK(),i=n.codes,s=i.ERR_AMBIGUOUS_ARGUMENT,o=i.ERR_INVALID_ARG_TYPE,a=i.ERR_INVALID_ARG_VALUE,c=i.ERR_INVALID_RETURN_VALUE,l=i.ERR_MISSING_ARGS,u=gpe(),f=dg(),h=f.inspect,d=dg().types,g=d.isPromise,p=d.isRegExp,m=vpe()(),y=h3()(),v=bpe()("RegExp.prototype.test"),b,_;function x(){var O=Epe();b=O.isDeepEqual,_=O.isDeepStrictEqual}var E=!1,S=K_.exports=j,C={};function k(O){throw O.message instanceof Error?O.message:new u(O)}function $(O,I,U,Z,oe){var he=arguments.length,re;if(he===0)re="Failed";else if(he===1)U=O,O=void 0;else{if(E===!1){E=!0;var F=Kt.emitWarning?Kt.emitWarning:console.warn.bind(console);F("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}he===2&&(Z="!=")}if(U instanceof Error)throw U;var H={actual:O,expected:I,operator:Z===void 0?"fail":Z,stackStartFn:oe||$};U!==void 0&&(H.message=U);var ue=new u(H);throw re&&(ue.message=re,ue.generatedMessage=!0),ue}S.fail=$,S.AssertionError=u;function J(O,I,U,Z){if(!U){var oe=!1;if(I===0)oe=!0,Z="No value argument passed to `assert.ok()`";else if(Z instanceof Error)throw Z;var he=new u({actual:U,expected:!0,message:Z,operator:"==",stackStartFn:O});throw he.generatedMessage=oe,he}}function j(){for(var O=arguments.length,I=new Array(O),U=0;U<O;U++)I[U]=arguments[U];J.apply(void 0,[j,I.length].concat(I))}S.ok=j,S.equal=function O(I,U,Z){if(arguments.length<2)throw new l("actual","expected");I!=U&&k({actual:I,expected:U,message:Z,operator:"==",stackStartFn:O})},S.notEqual=function O(I,U,Z){if(arguments.length<2)throw new l("actual","expected");I==U&&k({actual:I,expected:U,message:Z,operator:"!=",stackStartFn:O})},S.deepEqual=function O(I,U,Z){if(arguments.length<2)throw new l("actual","expected");b===void 0&&x(),b(I,U)||k({actual:I,expected:U,message:Z,operator:"deepEqual",stackStartFn:O})},S.notDeepEqual=function O(I,U,Z){if(arguments.length<2)throw new l("actual","expected");b===void 0&&x(),b(I,U)&&k({actual:I,expected:U,message:Z,operator:"notDeepEqual",stackStartFn:O})},S.deepStrictEqual=function O(I,U,Z){if(arguments.length<2)throw new l("actual","expected");b===void 0&&x(),_(I,U)||k({actual:I,expected:U,message:Z,operator:"deepStrictEqual",stackStartFn:O})},S.notDeepStrictEqual=L;function L(O,I,U){if(arguments.length<2)throw new l("actual","expected");b===void 0&&x(),_(O,I)&&k({actual:O,expected:I,message:U,operator:"notDeepStrictEqual",stackStartFn:L})}S.strictEqual=function O(I,U,Z){if(arguments.length<2)throw new l("actual","expected");y(I,U)||k({actual:I,expected:U,message:Z,operator:"strictEqual",stackStartFn:O})},S.notStrictEqual=function O(I,U,Z){if(arguments.length<2)throw new l("actual","expected");y(I,U)&&k({actual:I,expected:U,message:Z,operator:"notStrictEqual",stackStartFn:O})};var w=e(function O(I,U,Z){var oe=this;t(this,O),U.forEach(function(he){he in I&&(Z!==void 0&&typeof Z[he]=="string"&&p(I[he])&&v(I[he],Z[he])?oe[he]=Z[he]:oe[he]=I[he])})});function R(O,I,U,Z,oe,he){if(!(U in O)||!_(O[U],I[U])){if(!Z){var re=new w(O,oe),F=new w(I,oe,O),H=new u({actual:re,expected:F,operator:"deepStrictEqual",stackStartFn:he});throw H.actual=O,H.expected=I,H.operator=he.name,H}k({actual:O,expected:I,message:Z,operator:he.name,stackStartFn:he})}}function N(O,I,U,Z){if(typeof I!="function"){if(p(I))return v(I,O);if(arguments.length===2)throw new o("expected",["Function","RegExp"],I);if(r(O)!=="object"||O===null){var oe=new u({actual:O,expected:I,message:U,operator:"deepStrictEqual",stackStartFn:Z});throw oe.operator=Z.name,oe}var he=Object.keys(I);if(I instanceof Error)he.push("name","message");else if(he.length===0)throw new a("error",I,"may not be an empty object");return b===void 0&&x(),he.forEach(function(re){typeof O[re]=="string"&&p(I[re])&&v(I[re],O[re])||R(O,I,re,U,he,Z)}),!0}return I.prototype!==void 0&&O instanceof I?!0:Error.isPrototypeOf(I)?!1:I.call({},O)===!0}function Y(O){if(typeof O!="function")throw new o("fn","Function",O);try{O()}catch(I){return I}return C}function z(O){return g(O)||O!==null&&r(O)==="object"&&typeof O.then=="function"&&typeof O.catch=="function"}function G(O){return Promise.resolve().then(function(){var I;if(typeof O=="function"){if(I=O(),!z(I))throw new c("instance of Promise","promiseFn",I)}else if(z(O))I=O;else throw new o("promiseFn",["Function","Promise"],O);return Promise.resolve().then(function(){return I}).then(function(){return C}).catch(function(U){return U})})}function te(O,I,U,Z){if(typeof U=="string"){if(arguments.length===4)throw new o("error",["Object","Error","Function","RegExp"],U);if(r(I)==="object"&&I!==null){if(I.message===U)throw new s("error/message",'The error message "'.concat(I.message,'" is identical to the message.'))}else if(I===U)throw new s("error/message",'The error "'.concat(I,'" is identical to the message.'));Z=U,U=void 0}else if(U!=null&&r(U)!=="object"&&typeof U!="function")throw new o("error",["Object","Error","Function","RegExp"],U);if(I===C){var oe="";U&&U.name&&(oe+=" (".concat(U.name,")")),oe+=Z?": ".concat(Z):".";var he=O.name==="rejects"?"rejection":"exception";k({actual:void 0,expected:U,operator:O.name,message:"Missing expected ".concat(he).concat(oe),stackStartFn:O})}if(U&&!N(I,U,Z,O))throw I}function X(O,I,U,Z){if(I!==C){if(typeof U=="string"&&(Z=U,U=void 0),!U||N(I,U)){var oe=Z?": ".concat(Z):".",he=O.name==="doesNotReject"?"rejection":"exception";k({actual:I,expected:U,operator:O.name,message:"Got unwanted ".concat(he).concat(oe,`
`)+'Actual message: "'.concat(I&&I.message,'"'),stackStartFn:O})}throw I}}S.throws=function O(I){for(var U=arguments.length,Z=new Array(U>1?U-1:0),oe=1;oe<U;oe++)Z[oe-1]=arguments[oe];te.apply(void 0,[O,Y(I)].concat(Z))},S.rejects=function O(I){for(var U=arguments.length,Z=new Array(U>1?U-1:0),oe=1;oe<U;oe++)Z[oe-1]=arguments[oe];return G(I).then(function(he){return te.apply(void 0,[O,he].concat(Z))})},S.doesNotThrow=function O(I){for(var U=arguments.length,Z=new Array(U>1?U-1:0),oe=1;oe<U;oe++)Z[oe-1]=arguments[oe];X.apply(void 0,[O,Y(I)].concat(Z))},S.doesNotReject=function O(I){for(var U=arguments.length,Z=new Array(U>1?U-1:0),oe=1;oe<U;oe++)Z[oe-1]=arguments[oe];return G(I).then(function(he){return X.apply(void 0,[O,he].concat(Z))})},S.ifError=function O(I){if(I!=null){var U="ifError got unwanted exception: ";r(I)==="object"&&typeof I.message=="string"?I.message.length===0&&I.constructor?U+=I.constructor.name:U+=I.message:U+=h(I);var Z=new u({actual:I,expected:null,operator:"ifError",message:U,stackStartFn:O}),oe=I.stack;if(typeof oe=="string"){var he=oe.split(`
`);he.shift();for(var re=Z.stack.split(`
`),F=0;F<he.length;F++){var H=re.indexOf(he[F]);if(H!==-1){re=re.slice(0,H);break}}Z.stack="".concat(re.join(`
`),`
`).concat(he.join(`
`))}throw Z}};function T(O,I,U,Z,oe){if(!p(I))throw new o("regexp","RegExp",I);var he=oe==="match";if(typeof O!="string"||v(I,O)!==he){if(U instanceof Error)throw U;var re=!U;U=U||(typeof O!="string"?'The "string" argument must be of type string. Received type '+"".concat(r(O)," (").concat(h(O),")"):(he?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(h(I),`. Input:

`).concat(h(O),`
`));var F=new u({actual:O,expected:I,message:U,operator:oe,stackStartFn:Z});throw F.generatedMessage=re,F}}S.match=function O(I,U,Z){T(I,U,Z,O,"match")},S.doesNotMatch=function O(I,U,Z){T(I,U,Z,O,"doesNotMatch")};function A(){for(var O=arguments.length,I=new Array(O),U=0;U<O;U++)I[U]=arguments[U];J.apply(void 0,[A,I.length].concat(I))}return S.strict=m(A,S,{equal:S.strictEqual,deepEqual:S.deepStrictEqual,notEqual:S.notStrictEqual,notDeepEqual:S.notDeepStrictEqual}),S.strict.strict=S.strict,K_.exports}var Cp={},vh={},Oy={exports:{}},Ape=Oy.exports,k8;function Ipe(){return k8||(k8=1,function(r){(function(e){var t,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,u=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,d=1e9;function g(E){var S,C,k,$=O.prototype={constructor:O,toString:null,valueOf:null},J=new O(1),j=20,L=4,w=-7,R=21,N=-1e7,Y=1e7,z=!1,G=1,te=0,X={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},T="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function O(re,F){var H,ue,le,we,ie,B,q,ne,de=this;if(!(de instanceof O))return new O(re,F);if(F==null){if(re&&re._isBigNumber===!0){de.s=re.s,!re.c||re.e>Y?de.c=de.e=null:re.e<N?de.c=[de.e=0]:(de.e=re.e,de.c=re.c.slice());return}if((B=typeof re=="number")&&re*0==0){if(de.s=1/re<0?(re=-re,-1):1,re===~~re){for(we=0,ie=re;ie>=10;ie/=10,we++);we>Y?de.c=de.e=null:(de.e=we,de.c=[re]);return}ne=String(re)}else{if(!n.test(ne=String(re)))return k(de,ne,B);de.s=ne.charCodeAt(0)==45?(ne=ne.slice(1),-1):1}(we=ne.indexOf("."))>-1&&(ne=ne.replace(".","")),(ie=ne.search(/e/i))>0?(we<0&&(we=ie),we+=+ne.slice(ie+1),ne=ne.substring(0,ie)):we<0&&(we=ne.length)}else{if(v(F,2,T.length,"Base"),F==10&&A)return de=new O(re),oe(de,j+de.e+1,L);if(ne=String(re),B=typeof re=="number"){if(re*0!=0)return k(de,ne,B,F);if(de.s=1/re<0?(ne=ne.slice(1),-1):1,O.DEBUG&&ne.replace(/^0\.0*|\./,"").length>15)throw Error(a+re)}else de.s=ne.charCodeAt(0)===45?(ne=ne.slice(1),-1):1;for(H=T.slice(0,F),we=ie=0,q=ne.length;ie<q;ie++)if(H.indexOf(ue=ne.charAt(ie))<0){if(ue=="."){if(ie>we){we=q;continue}}else if(!le&&(ne==ne.toUpperCase()&&(ne=ne.toLowerCase())||ne==ne.toLowerCase()&&(ne=ne.toUpperCase()))){le=!0,ie=-1,we=0;continue}return k(de,String(re),B,F)}B=!1,ne=C(ne,F,10,de.s),(we=ne.indexOf("."))>-1?ne=ne.replace(".",""):we=ne.length}for(ie=0;ne.charCodeAt(ie)===48;ie++);for(q=ne.length;ne.charCodeAt(--q)===48;);if(ne=ne.slice(ie,++q)){if(q-=ie,B&&O.DEBUG&&q>15&&(re>u||re!==s(re)))throw Error(a+de.s*re);if((we=we-ie-1)>Y)de.c=de.e=null;else if(we<N)de.c=[de.e=0];else{if(de.e=we,de.c=[],ie=(we+1)%l,we<0&&(ie+=l),ie<q){for(ie&&de.c.push(+ne.slice(0,ie)),q-=l;ie<q;)de.c.push(+ne.slice(ie,ie+=l));ie=l-(ne=ne.slice(ie)).length}else ie-=q;for(;ie--;ne+="0");de.c.push(+ne)}}else de.c=[de.e=0]}O.clone=g,O.ROUND_UP=0,O.ROUND_DOWN=1,O.ROUND_CEIL=2,O.ROUND_FLOOR=3,O.ROUND_HALF_UP=4,O.ROUND_HALF_DOWN=5,O.ROUND_HALF_EVEN=6,O.ROUND_HALF_CEIL=7,O.ROUND_HALF_FLOOR=8,O.EUCLID=9,O.config=O.set=function(re){var F,H;if(re!=null)if(typeof re=="object"){if(re.hasOwnProperty(F="DECIMAL_PLACES")&&(H=re[F],v(H,0,d,F),j=H),re.hasOwnProperty(F="ROUNDING_MODE")&&(H=re[F],v(H,0,8,F),L=H),re.hasOwnProperty(F="EXPONENTIAL_AT")&&(H=re[F],H&&H.pop?(v(H[0],-1e9,0,F),v(H[1],0,d,F),w=H[0],R=H[1]):(v(H,-1e9,d,F),w=-(R=H<0?-H:H))),re.hasOwnProperty(F="RANGE"))if(H=re[F],H&&H.pop)v(H[0],-1e9,-1,F),v(H[1],1,d,F),N=H[0],Y=H[1];else if(v(H,-1e9,d,F),H)N=-(Y=H<0?-H:H);else throw Error(o+F+" cannot be zero: "+H);if(re.hasOwnProperty(F="CRYPTO"))if(H=re[F],H===!!H)if(H)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))z=H;else throw z=!H,Error(o+"crypto unavailable");else z=H;else throw Error(o+F+" not true or false: "+H);if(re.hasOwnProperty(F="MODULO_MODE")&&(H=re[F],v(H,0,9,F),G=H),re.hasOwnProperty(F="POW_PRECISION")&&(H=re[F],v(H,0,d,F),te=H),re.hasOwnProperty(F="FORMAT"))if(H=re[F],typeof H=="object")X=H;else throw Error(o+F+" not an object: "+H);if(re.hasOwnProperty(F="ALPHABET"))if(H=re[F],typeof H=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(H))A=H.slice(0,10)=="0123456789",T=H;else throw Error(o+F+" invalid: "+H)}else throw Error(o+"Object expected: "+re);return{DECIMAL_PLACES:j,ROUNDING_MODE:L,EXPONENTIAL_AT:[w,R],RANGE:[N,Y],CRYPTO:z,MODULO_MODE:G,POW_PRECISION:te,FORMAT:X,ALPHABET:T}},O.isBigNumber=function(re){if(!re||re._isBigNumber!==!0)return!1;if(!O.DEBUG)return!0;var F,H,ue=re.c,le=re.e,we=re.s;e:if({}.toString.call(ue)=="[object Array]"){if((we===1||we===-1)&&le>=-1e9&&le<=d&&le===s(le)){if(ue[0]===0){if(le===0&&ue.length===1)return!0;break e}if(F=(le+1)%l,F<1&&(F+=l),String(ue[0]).length==F){for(F=0;F<ue.length;F++)if(H=ue[F],H<0||H>=c||H!==s(H))break e;if(H!==0)return!0}}}else if(ue===null&&le===null&&(we===null||we===1||we===-1))return!0;throw Error(o+"Invalid BigNumber: "+re)},O.maximum=O.max=function(){return U(arguments,-1)},O.minimum=O.min=function(){return U(arguments,1)},O.random=function(){var re=9007199254740992,F=Math.random()*re&2097151?function(){return s(Math.random()*re)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(H){var ue,le,we,ie,B,q=0,ne=[],de=new O(J);if(H==null?H=j:v(H,0,d),ie=i(H/l),z)if(crypto.getRandomValues){for(ue=crypto.getRandomValues(new Uint32Array(ie*=2));q<ie;)B=ue[q]*131072+(ue[q+1]>>>11),B>=9e15?(le=crypto.getRandomValues(new Uint32Array(2)),ue[q]=le[0],ue[q+1]=le[1]):(ne.push(B%1e14),q+=2);q=ie/2}else if(crypto.randomBytes){for(ue=crypto.randomBytes(ie*=7);q<ie;)B=(ue[q]&31)*281474976710656+ue[q+1]*1099511627776+ue[q+2]*4294967296+ue[q+3]*16777216+(ue[q+4]<<16)+(ue[q+5]<<8)+ue[q+6],B>=9e15?crypto.randomBytes(7).copy(ue,q):(ne.push(B%1e14),q+=7);q=ie/7}else throw z=!1,Error(o+"crypto unavailable");if(!z)for(;q<ie;)B=F(),B<9e15&&(ne[q++]=B%1e14);for(ie=ne[--q],H%=l,ie&&H&&(B=f[l-H],ne[q]=s(ie/B)*B);ne[q]===0;ne.pop(),q--);if(q<0)ne=[we=0];else{for(we=-1;ne[0]===0;ne.splice(0,1),we-=l);for(q=1,B=ne[0];B>=10;B/=10,q++);q<l&&(we-=l-q)}return de.e=we,de.c=ne,de}}(),O.sum=function(){for(var re=1,F=arguments,H=new O(F[0]);re<F.length;)H=H.plus(F[re++]);return H},C=function(){var re="0123456789";function F(H,ue,le,we){for(var ie,B=[0],q,ne=0,de=H.length;ne<de;){for(q=B.length;q--;B[q]*=ue);for(B[0]+=we.indexOf(H.charAt(ne++)),ie=0;ie<B.length;ie++)B[ie]>le-1&&(B[ie+1]==null&&(B[ie+1]=0),B[ie+1]+=B[ie]/le|0,B[ie]%=le)}return B.reverse()}return function(H,ue,le,we,ie){var B,q,ne,de,_e,Ce,Me,xe,Ae=H.indexOf("."),Oe=j,se=L;for(Ae>=0&&(de=te,te=0,H=H.replace(".",""),xe=new O(ue),Ce=xe.pow(H.length-Ae),te=de,xe.c=F(x(m(Ce.c),Ce.e,"0"),10,le,re),xe.e=xe.c.length),Me=F(H,ue,le,ie?(B=T,re):(B=re,T)),ne=de=Me.length;Me[--de]==0;Me.pop());if(!Me[0])return B.charAt(0);if(Ae<0?--ne:(Ce.c=Me,Ce.e=ne,Ce.s=we,Ce=S(Ce,xe,Oe,se,le),Me=Ce.c,_e=Ce.r,ne=Ce.e),q=ne+Oe+1,Ae=Me[q],de=le/2,_e=_e||q<0||Me[q+1]!=null,_e=se<4?(Ae!=null||_e)&&(se==0||se==(Ce.s<0?3:2)):Ae>de||Ae==de&&(se==4||_e||se==6&&Me[q-1]&1||se==(Ce.s<0?8:7)),q<1||!Me[0])H=_e?x(B.charAt(1),-Oe,B.charAt(0)):B.charAt(0);else{if(Me.length=q,_e)for(--le;++Me[--q]>le;)Me[q]=0,q||(++ne,Me=[1].concat(Me));for(de=Me.length;!Me[--de];);for(Ae=0,H="";Ae<=de;H+=B.charAt(Me[Ae++]));H=x(H,ne,B.charAt(0))}return H}}(),S=function(){function re(ue,le,we){var ie,B,q,ne,de=0,_e=ue.length,Ce=le%h,Me=le/h|0;for(ue=ue.slice();_e--;)q=ue[_e]%h,ne=ue[_e]/h|0,ie=Me*q+ne*Ce,B=Ce*q+ie%h*h+de,de=(B/we|0)+(ie/h|0)+Me*ne,ue[_e]=B%we;return de&&(ue=[de].concat(ue)),ue}function F(ue,le,we,ie){var B,q;if(we!=ie)q=we>ie?1:-1;else for(B=q=0;B<we;B++)if(ue[B]!=le[B]){q=ue[B]>le[B]?1:-1;break}return q}function H(ue,le,we,ie){for(var B=0;we--;)ue[we]-=B,B=ue[we]<le[we]?1:0,ue[we]=B*ie+ue[we]-le[we];for(;!ue[0]&&ue.length>1;ue.splice(0,1));}return function(ue,le,we,ie,B){var q,ne,de,_e,Ce,Me,xe,Ae,Oe,se,V,Q,K,M,P,ee,pe,be=ue.s==le.s?1:-1,fe=ue.c,Ee=le.c;if(!fe||!fe[0]||!Ee||!Ee[0])return new O(!ue.s||!le.s||(fe?Ee&&fe[0]==Ee[0]:!Ee)?NaN:fe&&fe[0]==0||!Ee?be*0:be/0);for(Ae=new O(be),Oe=Ae.c=[],ne=ue.e-le.e,be=we+ne+1,B||(B=c,ne=p(ue.e/l)-p(le.e/l),be=be/l|0),de=0;Ee[de]==(fe[de]||0);de++);if(Ee[de]>(fe[de]||0)&&ne--,be<0)Oe.push(1),_e=!0;else{for(M=fe.length,ee=Ee.length,de=0,be+=2,Ce=s(B/(Ee[0]+1)),Ce>1&&(Ee=re(Ee,Ce,B),fe=re(fe,Ce,B),ee=Ee.length,M=fe.length),K=ee,se=fe.slice(0,ee),V=se.length;V<ee;se[V++]=0);pe=Ee.slice(),pe=[0].concat(pe),P=Ee[0],Ee[1]>=B/2&&P++;do{if(Ce=0,q=F(Ee,se,ee,V),q<0){if(Q=se[0],ee!=V&&(Q=Q*B+(se[1]||0)),Ce=s(Q/P),Ce>1)for(Ce>=B&&(Ce=B-1),Me=re(Ee,Ce,B),xe=Me.length,V=se.length;F(Me,se,xe,V)==1;)Ce--,H(Me,ee<xe?pe:Ee,xe,B),xe=Me.length,q=1;else Ce==0&&(q=Ce=1),Me=Ee.slice(),xe=Me.length;if(xe<V&&(Me=[0].concat(Me)),H(se,Me,V,B),V=se.length,q==-1)for(;F(Ee,se,ee,V)<1;)Ce++,H(se,ee<V?pe:Ee,V,B),V=se.length}else q===0&&(Ce++,se=[0]);Oe[de++]=Ce,se[0]?se[V++]=fe[K]||0:(se=[fe[K]],V=1)}while((K++<M||se[0]!=null)&&be--);_e=se[0]!=null,Oe[0]||Oe.splice(0,1)}if(B==c){for(de=1,be=Oe[0];be>=10;be/=10,de++);oe(Ae,we+(Ae.e=de+ne*l-1)+1,ie,_e)}else Ae.e=ne,Ae.r=+_e;return Ae}}();function I(re,F,H,ue){var le,we,ie,B,q;if(H==null?H=L:v(H,0,8),!re.c)return re.toString();if(le=re.c[0],ie=re.e,F==null)q=m(re.c),q=ue==1||ue==2&&(ie<=w||ie>=R)?_(q,ie):x(q,ie,"0");else if(re=oe(new O(re),F,H),we=re.e,q=m(re.c),B=q.length,ue==1||ue==2&&(F<=we||we<=w)){for(;B<F;q+="0",B++);q=_(q,we)}else if(F-=ie+(ue===2&&we>ie),q=x(q,we,"0"),we+1>B){if(--F>0)for(q+=".";F--;q+="0");}else if(F+=we-B,F>0)for(we+1==B&&(q+=".");F--;q+="0");return re.s<0&&le?"-"+q:q}function U(re,F){for(var H,ue,le=1,we=new O(re[0]);le<re.length;le++)ue=new O(re[le]),(!ue.s||(H=y(we,ue))===F||H===0&&we.s===F)&&(we=ue);return we}function Z(re,F,H){for(var ue=1,le=F.length;!F[--le];F.pop());for(le=F[0];le>=10;le/=10,ue++);return(H=ue+H*l-1)>Y?re.c=re.e=null:H<N?re.c=[re.e=0]:(re.e=H,re.c=F),re}k=function(){var re=/^(-?)0([xbo])(?=\w[\w.]*$)/i,F=/^([^.]+)\.$/,H=/^\.([^.]+)$/,ue=/^-?(Infinity|NaN)$/,le=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(we,ie,B,q){var ne,de=B?ie:ie.replace(le,"");if(ue.test(de))we.s=isNaN(de)?null:de<0?-1:1;else{if(!B&&(de=de.replace(re,function(_e,Ce,Me){return ne=(Me=Me.toLowerCase())=="x"?16:Me=="b"?2:8,!q||q==ne?Ce:_e}),q&&(ne=q,de=de.replace(F,"$1").replace(H,"0.$1")),ie!=de))return new O(de,ne);if(O.DEBUG)throw Error(o+"Not a"+(q?" base "+q:"")+" number: "+ie);we.s=null}we.c=we.e=null}}();function oe(re,F,H,ue){var le,we,ie,B,q,ne,de,_e=re.c,Ce=f;if(_e){e:{for(le=1,B=_e[0];B>=10;B/=10,le++);if(we=F-le,we<0)we+=l,ie=F,q=_e[ne=0],de=s(q/Ce[le-ie-1]%10);else if(ne=i((we+1)/l),ne>=_e.length)if(ue){for(;_e.length<=ne;_e.push(0));q=de=0,le=1,we%=l,ie=we-l+1}else break e;else{for(q=B=_e[ne],le=1;B>=10;B/=10,le++);we%=l,ie=we-l+le,de=ie<0?0:s(q/Ce[le-ie-1]%10)}if(ue=ue||F<0||_e[ne+1]!=null||(ie<0?q:q%Ce[le-ie-1]),ue=H<4?(de||ue)&&(H==0||H==(re.s<0?3:2)):de>5||de==5&&(H==4||ue||H==6&&(we>0?ie>0?q/Ce[le-ie]:0:_e[ne-1])%10&1||H==(re.s<0?8:7)),F<1||!_e[0])return _e.length=0,ue?(F-=re.e+1,_e[0]=Ce[(l-F%l)%l],re.e=-F||0):_e[0]=re.e=0,re;if(we==0?(_e.length=ne,B=1,ne--):(_e.length=ne+1,B=Ce[l-we],_e[ne]=ie>0?s(q/Ce[le-ie]%Ce[ie])*B:0),ue)for(;;)if(ne==0){for(we=1,ie=_e[0];ie>=10;ie/=10,we++);for(ie=_e[0]+=B,B=1;ie>=10;ie/=10,B++);we!=B&&(re.e++,_e[0]==c&&(_e[0]=1));break}else{if(_e[ne]+=B,_e[ne]!=c)break;_e[ne--]=0,B=1}for(we=_e.length;_e[--we]===0;_e.pop());}re.e>Y?re.c=re.e=null:re.e<N&&(re.c=[re.e=0])}return re}function he(re){var F,H=re.e;return H===null?re.toString():(F=m(re.c),F=H<=w||H>=R?_(F,H):x(F,H,"0"),re.s<0?"-"+F:F)}return $.absoluteValue=$.abs=function(){var re=new O(this);return re.s<0&&(re.s=1),re},$.comparedTo=function(re,F){return y(this,new O(re,F))},$.decimalPlaces=$.dp=function(re,F){var H,ue,le,we=this;if(re!=null)return v(re,0,d),F==null?F=L:v(F,0,8),oe(new O(we),re+we.e+1,F);if(!(H=we.c))return null;if(ue=((le=H.length-1)-p(this.e/l))*l,le=H[le])for(;le%10==0;le/=10,ue--);return ue<0&&(ue=0),ue},$.dividedBy=$.div=function(re,F){return S(this,new O(re,F),j,L)},$.dividedToIntegerBy=$.idiv=function(re,F){return S(this,new O(re,F),0,1)},$.exponentiatedBy=$.pow=function(re,F){var H,ue,le,we,ie,B,q,ne,de,_e=this;if(re=new O(re),re.c&&!re.isInteger())throw Error(o+"Exponent not an integer: "+he(re));if(F!=null&&(F=new O(F)),B=re.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!re.c||!re.c[0])return de=new O(Math.pow(+he(_e),B?re.s*(2-b(re)):+he(re))),F?de.mod(F):de;if(q=re.s<0,F){if(F.c?!F.c[0]:!F.s)return new O(NaN);ue=!q&&_e.isInteger()&&F.isInteger(),ue&&(_e=_e.mod(F))}else{if(re.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||B&&_e.c[1]>=24e7:_e.c[0]<8e13||B&&_e.c[0]<=9999975e7)))return we=_e.s<0&&b(re)?-0:0,_e.e>-1&&(we=1/we),new O(q?1/we:we);te&&(we=i(te/l+2))}for(B?(H=new O(.5),q&&(re.s=1),ne=b(re)):(le=Math.abs(+he(re)),ne=le%2),de=new O(J);;){if(ne){if(de=de.times(_e),!de.c)break;we?de.c.length>we&&(de.c.length=we):ue&&(de=de.mod(F))}if(le){if(le=s(le/2),le===0)break;ne=le%2}else if(re=re.times(H),oe(re,re.e+1,1),re.e>14)ne=b(re);else{if(le=+he(re),le===0)break;ne=le%2}_e=_e.times(_e),we?_e.c&&_e.c.length>we&&(_e.c.length=we):ue&&(_e=_e.mod(F))}return ue?de:(q&&(de=J.div(de)),F?de.mod(F):we?oe(de,te,L,ie):de)},$.integerValue=function(re){var F=new O(this);return re==null?re=L:v(re,0,8),oe(F,F.e+1,re)},$.isEqualTo=$.eq=function(re,F){return y(this,new O(re,F))===0},$.isFinite=function(){return!!this.c},$.isGreaterThan=$.gt=function(re,F){return y(this,new O(re,F))>0},$.isGreaterThanOrEqualTo=$.gte=function(re,F){return(F=y(this,new O(re,F)))===1||F===0},$.isInteger=function(){return!!this.c&&p(this.e/l)>this.c.length-2},$.isLessThan=$.lt=function(re,F){return y(this,new O(re,F))<0},$.isLessThanOrEqualTo=$.lte=function(re,F){return(F=y(this,new O(re,F)))===-1||F===0},$.isNaN=function(){return!this.s},$.isNegative=function(){return this.s<0},$.isPositive=function(){return this.s>0},$.isZero=function(){return!!this.c&&this.c[0]==0},$.minus=function(re,F){var H,ue,le,we,ie=this,B=ie.s;if(re=new O(re,F),F=re.s,!B||!F)return new O(NaN);if(B!=F)return re.s=-F,ie.plus(re);var q=ie.e/l,ne=re.e/l,de=ie.c,_e=re.c;if(!q||!ne){if(!de||!_e)return de?(re.s=-F,re):new O(_e?ie:NaN);if(!de[0]||!_e[0])return _e[0]?(re.s=-F,re):new O(de[0]?ie:L==3?-0:0)}if(q=p(q),ne=p(ne),de=de.slice(),B=q-ne){for((we=B<0)?(B=-B,le=de):(ne=q,le=_e),le.reverse(),F=B;F--;le.push(0));le.reverse()}else for(ue=(we=(B=de.length)<(F=_e.length))?B:F,B=F=0;F<ue;F++)if(de[F]!=_e[F]){we=de[F]<_e[F];break}if(we&&(le=de,de=_e,_e=le,re.s=-re.s),F=(ue=_e.length)-(H=de.length),F>0)for(;F--;de[H++]=0);for(F=c-1;ue>B;){if(de[--ue]<_e[ue]){for(H=ue;H&&!de[--H];de[H]=F);--de[H],de[ue]+=c}de[ue]-=_e[ue]}for(;de[0]==0;de.splice(0,1),--ne);return de[0]?Z(re,de,ne):(re.s=L==3?-1:1,re.c=[re.e=0],re)},$.modulo=$.mod=function(re,F){var H,ue,le=this;return re=new O(re,F),!le.c||!re.s||re.c&&!re.c[0]?new O(NaN):!re.c||le.c&&!le.c[0]?new O(le):(G==9?(ue=re.s,re.s=1,H=S(le,re,0,3),re.s=ue,H.s*=ue):H=S(le,re,0,G),re=le.minus(H.times(re)),!re.c[0]&&G==1&&(re.s=le.s),re)},$.multipliedBy=$.times=function(re,F){var H,ue,le,we,ie,B,q,ne,de,_e,Ce,Me,xe,Ae,Oe,se=this,V=se.c,Q=(re=new O(re,F)).c;if(!V||!Q||!V[0]||!Q[0])return!se.s||!re.s||V&&!V[0]&&!Q||Q&&!Q[0]&&!V?re.c=re.e=re.s=null:(re.s*=se.s,!V||!Q?re.c=re.e=null:(re.c=[0],re.e=0)),re;for(ue=p(se.e/l)+p(re.e/l),re.s*=se.s,q=V.length,_e=Q.length,q<_e&&(xe=V,V=Q,Q=xe,le=q,q=_e,_e=le),le=q+_e,xe=[];le--;xe.push(0));for(Ae=c,Oe=h,le=_e;--le>=0;){for(H=0,Ce=Q[le]%Oe,Me=Q[le]/Oe|0,ie=q,we=le+ie;we>le;)ne=V[--ie]%Oe,de=V[ie]/Oe|0,B=Me*ne+de*Ce,ne=Ce*ne+B%Oe*Oe+xe[we]+H,H=(ne/Ae|0)+(B/Oe|0)+Me*de,xe[we--]=ne%Ae;xe[we]=H}return H?++ue:xe.splice(0,1),Z(re,xe,ue)},$.negated=function(){var re=new O(this);return re.s=-re.s||null,re},$.plus=function(re,F){var H,ue=this,le=ue.s;if(re=new O(re,F),F=re.s,!le||!F)return new O(NaN);if(le!=F)return re.s=-F,ue.minus(re);var we=ue.e/l,ie=re.e/l,B=ue.c,q=re.c;if(!we||!ie){if(!B||!q)return new O(le/0);if(!B[0]||!q[0])return q[0]?re:new O(B[0]?ue:le*0)}if(we=p(we),ie=p(ie),B=B.slice(),le=we-ie){for(le>0?(ie=we,H=q):(le=-le,H=B),H.reverse();le--;H.push(0));H.reverse()}for(le=B.length,F=q.length,le-F<0&&(H=q,q=B,B=H,F=le),le=0;F;)le=(B[--F]=B[F]+q[F]+le)/c|0,B[F]=c===B[F]?0:B[F]%c;return le&&(B=[le].concat(B),++ie),Z(re,B,ie)},$.precision=$.sd=function(re,F){var H,ue,le,we=this;if(re!=null&&re!==!!re)return v(re,1,d),F==null?F=L:v(F,0,8),oe(new O(we),re,F);if(!(H=we.c))return null;if(le=H.length-1,ue=le*l+1,le=H[le]){for(;le%10==0;le/=10,ue--);for(le=H[0];le>=10;le/=10,ue++);}return re&&we.e+1>ue&&(ue=we.e+1),ue},$.shiftedBy=function(re){return v(re,-9007199254740991,u),this.times("1e"+re)},$.squareRoot=$.sqrt=function(){var re,F,H,ue,le,we=this,ie=we.c,B=we.s,q=we.e,ne=j+4,de=new O("0.5");if(B!==1||!ie||!ie[0])return new O(!B||B<0&&(!ie||ie[0])?NaN:ie?we:1/0);if(B=Math.sqrt(+he(we)),B==0||B==1/0?(F=m(ie),(F.length+q)%2==0&&(F+="0"),B=Math.sqrt(+F),q=p((q+1)/2)-(q<0||q%2),B==1/0?F="5e"+q:(F=B.toExponential(),F=F.slice(0,F.indexOf("e")+1)+q),H=new O(F)):H=new O(B+""),H.c[0]){for(q=H.e,B=q+ne,B<3&&(B=0);;)if(le=H,H=de.times(le.plus(S(we,le,ne,1))),m(le.c).slice(0,B)===(F=m(H.c)).slice(0,B))if(H.e<q&&--B,F=F.slice(B-3,B+1),F=="9999"||!ue&&F=="4999"){if(!ue&&(oe(le,le.e+j+2,0),le.times(le).eq(we))){H=le;break}ne+=4,B+=4,ue=1}else{(!+F||!+F.slice(1)&&F.charAt(0)=="5")&&(oe(H,H.e+j+2,1),re=!H.times(H).eq(we));break}}return oe(H,H.e+j+1,L,re)},$.toExponential=function(re,F){return re!=null&&(v(re,0,d),re++),I(this,re,F,1)},$.toFixed=function(re,F){return re!=null&&(v(re,0,d),re=re+this.e+1),I(this,re,F)},$.toFormat=function(re,F,H){var ue,le=this;if(H==null)re!=null&&F&&typeof F=="object"?(H=F,F=null):re&&typeof re=="object"?(H=re,re=F=null):H=X;else if(typeof H!="object")throw Error(o+"Argument not an object: "+H);if(ue=le.toFixed(re,F),le.c){var we,ie=ue.split("."),B=+H.groupSize,q=+H.secondaryGroupSize,ne=H.groupSeparator||"",de=ie[0],_e=ie[1],Ce=le.s<0,Me=Ce?de.slice(1):de,xe=Me.length;if(q&&(we=B,B=q,q=we,xe-=we),B>0&&xe>0){for(we=xe%B||B,de=Me.substr(0,we);we<xe;we+=B)de+=ne+Me.substr(we,B);q>0&&(de+=ne+Me.slice(we)),Ce&&(de="-"+de)}ue=_e?de+(H.decimalSeparator||"")+((q=+H.fractionGroupSize)?_e.replace(new RegExp("\\d{"+q+"}\\B","g"),"$&"+(H.fractionGroupSeparator||"")):_e):de}return(H.prefix||"")+ue+(H.suffix||"")},$.toFraction=function(re){var F,H,ue,le,we,ie,B,q,ne,de,_e,Ce,Me=this,xe=Me.c;if(re!=null&&(B=new O(re),!B.isInteger()&&(B.c||B.s!==1)||B.lt(J)))throw Error(o+"Argument "+(B.isInteger()?"out of range: ":"not an integer: ")+he(B));if(!xe)return new O(Me);for(F=new O(J),ne=H=new O(J),ue=q=new O(J),Ce=m(xe),we=F.e=Ce.length-Me.e-1,F.c[0]=f[(ie=we%l)<0?l+ie:ie],re=!re||B.comparedTo(F)>0?we>0?F:ne:B,ie=Y,Y=1/0,B=new O(Ce),q.c[0]=0;de=S(B,F,0,1),le=H.plus(de.times(ue)),le.comparedTo(re)!=1;)H=ue,ue=le,ne=q.plus(de.times(le=ne)),q=le,F=B.minus(de.times(le=F)),B=le;return le=S(re.minus(H),ue,0,1),q=q.plus(le.times(ne)),H=H.plus(le.times(ue)),q.s=ne.s=Me.s,we=we*2,_e=S(ne,ue,we,L).minus(Me).abs().comparedTo(S(q,H,we,L).minus(Me).abs())<1?[ne,ue]:[q,H],Y=ie,_e},$.toNumber=function(){return+he(this)},$.toPrecision=function(re,F){return re!=null&&v(re,1,d),I(this,re,F,2)},$.toString=function(re){var F,H=this,ue=H.s,le=H.e;return le===null?ue?(F="Infinity",ue<0&&(F="-"+F)):F="NaN":(re==null?F=le<=w||le>=R?_(m(H.c),le):x(m(H.c),le,"0"):re===10&&A?(H=oe(new O(H),j+le+1,L),F=x(m(H.c),H.e,"0")):(v(re,2,T.length,"Base"),F=C(x(m(H.c),le,"0"),10,re,ue,!0)),ue<0&&H.c[0]&&(F="-"+F)),F},$.valueOf=$.toJSON=function(){return he(this)},$._isBigNumber=!0,E!=null&&O.set(E),O}function p(E){var S=E|0;return E>0||E===S?S:S-1}function m(E){for(var S,C,k=1,$=E.length,J=E[0]+"";k<$;){for(S=E[k++]+"",C=l-S.length;C--;S="0"+S);J+=S}for($=J.length;J.charCodeAt(--$)===48;);return J.slice(0,$+1||1)}function y(E,S){var C,k,$=E.c,J=S.c,j=E.s,L=S.s,w=E.e,R=S.e;if(!j||!L)return null;if(C=$&&!$[0],k=J&&!J[0],C||k)return C?k?0:-L:j;if(j!=L)return j;if(C=j<0,k=w==R,!$||!J)return k?0:!$^C?1:-1;if(!k)return w>R^C?1:-1;for(L=(w=$.length)<(R=J.length)?w:R,j=0;j<L;j++)if($[j]!=J[j])return $[j]>J[j]^C?1:-1;return w==R?0:w>R^C?1:-1}function v(E,S,C,k){if(E<S||E>C||E!==s(E))throw Error(o+(k||"Argument")+(typeof E=="number"?E<S||E>C?" out of range: ":" not an integer: ":" not a primitive number: ")+String(E))}function b(E){var S=E.c.length-1;return p(E.e/l)==S&&E.c[S]%2!=0}function _(E,S){return(E.length>1?E.charAt(0)+"."+E.slice(1):E)+(S<0?"e":"e+")+S}function x(E,S,C){var k,$;if(S<0){for($=C+".";++S;$+=C);E=$+E}else if(k=E.length,++S>k){for($=C,S-=k;--S;$+=C);E+=$}else S<k&&(E=E.slice(0,S)+"."+E.slice(S));return E}t=g(),t.default=t.BigNumber=t,r.exports?r.exports=t:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=t)})(Ape)}(Oy)),Oy.exports}var Dy={exports:{}},Cpe=Dy.exports,P8;function Tpe(){return P8||(P8=1,function(r,e){(function(t,n){r.exports=n()})(Cpe,function(){var t=Math.imul,n=Math.clz32,i=Math.abs,s=Math.max,o=Math.floor;class a extends Array{constructor(l,u){if(super(l),this.sign=u,l>a.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(l){var u=Number.isFinite;if(typeof l=="number"){if(l===0)return a.__zero();if(a.__isOneDigitInt(l))return 0>l?a.__oneDigit(-l,!0):a.__oneDigit(l,!1);if(!u(l)||o(l)!==l)throw new RangeError("The number "+l+" cannot be converted to BigInt because it is not an integer");return a.__fromDouble(l)}if(typeof l=="string"){const f=a.__fromString(l);if(f===null)throw new SyntaxError("Cannot convert "+l+" to a BigInt");return f}if(typeof l=="boolean")return l===!0?a.__oneDigit(1,!1):a.__zero();if(typeof l=="object"){if(l.constructor===a)return l;const f=a.__toPrimitive(l);return a.BigInt(f)}throw new TypeError("Cannot convert "+l+" to a BigInt")}toDebugString(){const l=["BigInt["];for(const u of this)l.push((u&&(u>>>0).toString(16))+", ");return l.push("]"),l.join("")}toString(l=10){if(2>l||36<l)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(l&l-1)==0?a.__toStringBasePowerOfTwo(this,l):a.__toStringGeneric(this,l,!1)}static toNumber(l){const u=l.length;if(u===0)return 0;if(u===1){const C=l.__unsignedDigit(0);return l.sign?-C:C}const f=l.__digit(u-1),h=a.__clz30(f),d=30*u-h;if(1024<d)return l.sign?-1/0:1/0;let g=d-1,p=f,m=u-1;const y=h+3;let v=y===32?0:p<<y;v>>>=12;const b=y-12;let _=12<=y?0:p<<20+y,x=20+y;for(0<b&&0<m&&(m--,p=l.__digit(m),v|=p>>>30-b,_=p<<b+2,x=b+2);0<x&&0<m;)m--,p=l.__digit(m),_|=30<=x?p<<x-30:p>>>30-x,x-=30;const E=a.__decideRounding(l,x,m,p);if((E===1||E===0&&(1&_)==1)&&(_=_+1>>>0,_===0&&(v++,v>>>20!=0&&(v=0,g++,1023<g))))return l.sign?-1/0:1/0;const S=l.sign?-2147483648:0;return g=g+1023<<20,a.__kBitConversionInts[1]=S|g|v,a.__kBitConversionInts[0]=_,a.__kBitConversionDouble[0]}static unaryMinus(l){if(l.length===0)return l;const u=l.__copy();return u.sign=!l.sign,u}static bitwiseNot(l){return l.sign?a.__absoluteSubOne(l).__trim():a.__absoluteAddOne(l,!0)}static exponentiate(l,u){if(u.sign)throw new RangeError("Exponent must be positive");if(u.length===0)return a.__oneDigit(1,!1);if(l.length===0)return l;if(l.length===1&&l.__digit(0)===1)return l.sign&&(1&u.__digit(0))==0?a.unaryMinus(l):l;if(1<u.length)throw new RangeError("BigInt too big");let f=u.__unsignedDigit(0);if(f===1)return l;if(f>=a.__kMaxLengthBits)throw new RangeError("BigInt too big");if(l.length===1&&l.__digit(0)===2){const g=1+(0|f/30),p=l.sign&&(1&f)!=0,m=new a(g,p);m.__initializeDigits();const y=1<<f%30;return m.__setDigit(g-1,y),m}let h=null,d=l;for((1&f)!=0&&(h=l),f>>=1;f!==0;f>>=1)d=a.multiply(d,d),(1&f)!=0&&(h===null?h=d:h=a.multiply(h,d));return h}static multiply(l,u){if(l.length===0)return l;if(u.length===0)return u;let f=l.length+u.length;30<=l.__clzmsd()+u.__clzmsd()&&f--;const h=new a(f,l.sign!==u.sign);h.__initializeDigits();for(let d=0;d<l.length;d++)a.__multiplyAccumulate(u,l.__digit(d),h,d);return h.__trim()}static divide(l,u){if(u.length===0)throw new RangeError("Division by zero");if(0>a.__absoluteCompare(l,u))return a.__zero();const f=l.sign!==u.sign,h=u.__unsignedDigit(0);let d;if(u.length===1&&32767>=h){if(h===1)return f===l.sign?l:a.unaryMinus(l);d=a.__absoluteDivSmall(l,h,null)}else d=a.__absoluteDivLarge(l,u,!0,!1);return d.sign=f,d.__trim()}static remainder(l,u){if(u.length===0)throw new RangeError("Division by zero");if(0>a.__absoluteCompare(l,u))return l;const f=u.__unsignedDigit(0);if(u.length===1&&32767>=f){if(f===1)return a.__zero();const d=a.__absoluteModSmall(l,f);return d===0?a.__zero():a.__oneDigit(d,l.sign)}const h=a.__absoluteDivLarge(l,u,!1,!0);return h.sign=l.sign,h.__trim()}static add(l,u){const f=l.sign;return f===u.sign?a.__absoluteAdd(l,u,f):0<=a.__absoluteCompare(l,u)?a.__absoluteSub(l,u,f):a.__absoluteSub(u,l,!f)}static subtract(l,u){const f=l.sign;return f===u.sign?0<=a.__absoluteCompare(l,u)?a.__absoluteSub(l,u,f):a.__absoluteSub(u,l,!f):a.__absoluteAdd(l,u,f)}static leftShift(l,u){return u.length===0||l.length===0?l:u.sign?a.__rightShiftByAbsolute(l,u):a.__leftShiftByAbsolute(l,u)}static signedRightShift(l,u){return u.length===0||l.length===0?l:u.sign?a.__leftShiftByAbsolute(l,u):a.__rightShiftByAbsolute(l,u)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(l,u){return 0>a.__compareToBigInt(l,u)}static lessThanOrEqual(l,u){return 0>=a.__compareToBigInt(l,u)}static greaterThan(l,u){return 0<a.__compareToBigInt(l,u)}static greaterThanOrEqual(l,u){return 0<=a.__compareToBigInt(l,u)}static equal(l,u){if(l.sign!==u.sign||l.length!==u.length)return!1;for(let f=0;f<l.length;f++)if(l.__digit(f)!==u.__digit(f))return!1;return!0}static notEqual(l,u){return!a.equal(l,u)}static bitwiseAnd(l,u){if(!l.sign&&!u.sign)return a.__absoluteAnd(l,u).__trim();if(l.sign&&u.sign){const f=s(l.length,u.length)+1;let h=a.__absoluteSubOne(l,f);const d=a.__absoluteSubOne(u);return h=a.__absoluteOr(h,d,h),a.__absoluteAddOne(h,!0,h).__trim()}return l.sign&&([l,u]=[u,l]),a.__absoluteAndNot(l,a.__absoluteSubOne(u)).__trim()}static bitwiseXor(l,u){if(!l.sign&&!u.sign)return a.__absoluteXor(l,u).__trim();if(l.sign&&u.sign){const d=s(l.length,u.length),g=a.__absoluteSubOne(l,d),p=a.__absoluteSubOne(u);return a.__absoluteXor(g,p,g).__trim()}const f=s(l.length,u.length)+1;l.sign&&([l,u]=[u,l]);let h=a.__absoluteSubOne(u,f);return h=a.__absoluteXor(h,l,h),a.__absoluteAddOne(h,!0,h).__trim()}static bitwiseOr(l,u){const f=s(l.length,u.length);if(!l.sign&&!u.sign)return a.__absoluteOr(l,u).__trim();if(l.sign&&u.sign){let d=a.__absoluteSubOne(l,f);const g=a.__absoluteSubOne(u);return d=a.__absoluteAnd(d,g,d),a.__absoluteAddOne(d,!0,d).__trim()}l.sign&&([l,u]=[u,l]);let h=a.__absoluteSubOne(u,f);return h=a.__absoluteAndNot(h,l,h),a.__absoluteAddOne(h,!0,h).__trim()}static asIntN(l,u){if(u.length===0)return u;if(l=o(l),0>l)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(l===0)return a.__zero();if(l>=a.__kMaxLengthBits)return u;const f=0|(l+29)/30;if(u.length<f)return u;const h=u.__unsignedDigit(f-1),d=1<<(l-1)%30;if(u.length===f&&h<d)return u;if((h&d)!==d)return a.__truncateToNBits(l,u);if(!u.sign)return a.__truncateAndSubFromPowerOfTwo(l,u,!0);if((h&d-1)==0){for(let g=f-2;0<=g;g--)if(u.__digit(g)!==0)return a.__truncateAndSubFromPowerOfTwo(l,u,!1);return u.length===f&&h===d?u:a.__truncateToNBits(l,u)}return a.__truncateAndSubFromPowerOfTwo(l,u,!1)}static asUintN(l,u){if(u.length===0)return u;if(l=o(l),0>l)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(l===0)return a.__zero();if(u.sign){if(l>a.__kMaxLengthBits)throw new RangeError("BigInt too big");return a.__truncateAndSubFromPowerOfTwo(l,u,!1)}if(l>=a.__kMaxLengthBits)return u;const f=0|(l+29)/30;if(u.length<f)return u;const h=l%30;return u.length==f&&(h===0||!(u.__digit(f-1)>>>h))?u:a.__truncateToNBits(l,u)}static ADD(l,u){if(l=a.__toPrimitive(l),u=a.__toPrimitive(u),typeof l=="string")return typeof u!="string"&&(u=u.toString()),l+u;if(typeof u=="string")return l.toString()+u;if(l=a.__toNumeric(l),u=a.__toNumeric(u),a.__isBigInt(l)&&a.__isBigInt(u))return a.add(l,u);if(typeof l=="number"&&typeof u=="number")return l+u;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(l,u){return a.__compare(l,u,0)}static LE(l,u){return a.__compare(l,u,1)}static GT(l,u){return a.__compare(l,u,2)}static GE(l,u){return a.__compare(l,u,3)}static EQ(l,u){for(;;){if(a.__isBigInt(l))return a.__isBigInt(u)?a.equal(l,u):a.EQ(u,l);if(typeof l=="number"){if(a.__isBigInt(u))return a.__equalToNumber(u,l);if(typeof u!="object")return l==u;u=a.__toPrimitive(u)}else if(typeof l=="string"){if(a.__isBigInt(u))return l=a.__fromString(l),l!==null&&a.equal(l,u);if(typeof u!="object")return l==u;u=a.__toPrimitive(u)}else if(typeof l=="boolean"){if(a.__isBigInt(u))return a.__equalToNumber(u,+l);if(typeof u!="object")return l==u;u=a.__toPrimitive(u)}else if(typeof l=="symbol"){if(a.__isBigInt(u))return!1;if(typeof u!="object")return l==u;u=a.__toPrimitive(u)}else if(typeof l=="object"){if(typeof u=="object"&&u.constructor!==a)return l==u;l=a.__toPrimitive(l)}else return l==u}}static NE(l,u){return!a.EQ(l,u)}static __zero(){return new a(0,!1)}static __oneDigit(l,u){const f=new a(1,u);return f.__setDigit(0,l),f}__copy(){const l=new a(this.length,this.sign);for(let u=0;u<this.length;u++)l[u]=this[u];return l}__trim(){let l=this.length,u=this[l-1];for(;u===0;)l--,u=this[l-1],this.pop();return l===0&&(this.sign=!1),this}__initializeDigits(){for(let l=0;l<this.length;l++)this[l]=0}static __decideRounding(l,u,f,h){if(0<u)return-1;let d;if(0>u)d=-u-1;else{if(f===0)return-1;f--,h=l.__digit(f),d=29}let g=1<<d;if((h&g)==0)return-1;if(g-=1,(h&g)!=0)return 1;for(;0<f;)if(f--,l.__digit(f)!==0)return 1;return 0}static __fromDouble(l){a.__kBitConversionDouble[0]=l;const u=2047&a.__kBitConversionInts[1]>>>20,f=u-1023,h=(0|f/30)+1,d=new a(h,0>l);let g=1048575&a.__kBitConversionInts[1]|1048576,p=a.__kBitConversionInts[0];const m=20,y=f%30;let v,b=0;if(20>y){const _=m-y;b=_+32,v=g>>>_,g=g<<32-_|p>>>_,p<<=32-_}else if(y===20)b=32,v=g,g=p,p=0;else{const _=y-m;b=32-_,v=g<<_|p>>>32-_,g=p<<_,p=0}d.__setDigit(h-1,v);for(let _=h-2;0<=_;_--)0<b?(b-=30,v=g>>>2,g=g<<30|p>>>2,p<<=30):v=0,d.__setDigit(_,v);return d.__trim()}static __isWhitespace(l){return 13>=l&&9<=l||(159>=l?l==32:131071>=l?l==160||l==5760:196607>=l?(l&=131071,10>=l||l==40||l==41||l==47||l==95||l==4096):l==65279)}static __fromString(l,u=0){let f=0;const h=l.length;let d=0;if(d===h)return a.__zero();let g=l.charCodeAt(d);for(;a.__isWhitespace(g);){if(++d===h)return a.__zero();g=l.charCodeAt(d)}if(g===43){if(++d===h)return null;g=l.charCodeAt(d),f=1}else if(g===45){if(++d===h)return null;g=l.charCodeAt(d),f=-1}if(u===0){if(u=10,g===48){if(++d===h)return a.__zero();if(g=l.charCodeAt(d),g===88||g===120){if(u=16,++d===h)return null;g=l.charCodeAt(d)}else if(g===79||g===111){if(u=8,++d===h)return null;g=l.charCodeAt(d)}else if(g===66||g===98){if(u=2,++d===h)return null;g=l.charCodeAt(d)}}}else if(u===16&&g===48){if(++d===h)return a.__zero();if(g=l.charCodeAt(d),g===88||g===120){if(++d===h)return null;g=l.charCodeAt(d)}}if(f!=0&&u!==10)return null;for(;g===48;){if(++d===h)return a.__zero();g=l.charCodeAt(d)}const p=h-d;let m=a.__kMaxBitsPerChar[u],y=a.__kBitsPerCharTableMultiplier-1;if(p>1073741824/m)return null;const v=m*p+y>>>a.__kBitsPerCharTableShift,b=new a(0|(v+29)/30,!1),_=10>u?u:10,x=10<u?u-10:0;if((u&u-1)==0){m>>=a.__kBitsPerCharTableShift;const E=[],S=[];let C=!1;do{let k=0,$=0;for(;;){let J;if(g-48>>>0<_)J=g-48;else if((32|g)-97>>>0<x)J=(32|g)-87;else{C=!0;break}if($+=m,k=k<<m|J,++d===h){C=!0;break}if(g=l.charCodeAt(d),30<$+m)break}E.push(k),S.push($)}while(!C);a.__fillFromParts(b,E,S)}else{b.__initializeDigits();let E=!1,S=0;do{let C=0,k=1;for(;;){let J;if(g-48>>>0<_)J=g-48;else if((32|g)-97>>>0<x)J=(32|g)-87;else{E=!0;break}const j=k*u;if(1073741823<j)break;if(k=j,C=C*u+J,S++,++d===h){E=!0;break}g=l.charCodeAt(d)}y=30*a.__kBitsPerCharTableMultiplier-1;const $=0|(m*S+y>>>a.__kBitsPerCharTableShift)/30;b.__inplaceMultiplyAdd(k,C,$)}while(!E)}if(d!==h){if(!a.__isWhitespace(g))return null;for(d++;d<h;d++)if(g=l.charCodeAt(d),!a.__isWhitespace(g))return null}return b.sign=f==-1,b.__trim()}static __fillFromParts(l,u,f){let h=0,d=0,g=0;for(let p=u.length-1;0<=p;p--){const m=u[p],y=f[p];d|=m<<g,g+=y,g===30?(l.__setDigit(h++,d),g=0,d=0):30<g&&(l.__setDigit(h++,1073741823&d),g-=30,d=m>>>y-g)}if(d!==0){if(h>=l.length)throw new Error("implementation bug");l.__setDigit(h++,d)}for(;h<l.length;h++)l.__setDigit(h,0)}static __toStringBasePowerOfTwo(l,u){const f=l.length;let h=u-1;h=(85&h>>>1)+(85&h),h=(51&h>>>2)+(51&h),h=(15&h>>>4)+(15&h);const d=h,g=u-1,p=l.__digit(f-1),m=a.__clz30(p);let y=0|(30*f-m+d-1)/d;if(l.sign&&y++,268435456<y)throw new Error("string too long");const v=Array(y);let b=y-1,_=0,x=0;for(let S=0;S<f-1;S++){const C=l.__digit(S),k=(_|C<<x)&g;v[b--]=a.__kConversionChars[k];const $=d-x;for(_=C>>>$,x=30-$;x>=d;)v[b--]=a.__kConversionChars[_&g],_>>>=d,x-=d}const E=(_|p<<x)&g;for(v[b--]=a.__kConversionChars[E],_=p>>>d-x;_!==0;)v[b--]=a.__kConversionChars[_&g],_>>>=d;if(l.sign&&(v[b--]="-"),b!=-1)throw new Error("implementation bug");return v.join("")}static __toStringGeneric(l,u,f){const h=l.length;if(h===0)return"";if(h===1){let S=l.__unsignedDigit(0).toString(u);return f===!1&&l.sign&&(S="-"+S),S}const d=30*h-a.__clz30(l.__digit(h-1)),g=a.__kMaxBitsPerChar[u],p=g-1;let m=d*a.__kBitsPerCharTableMultiplier;m+=p-1,m=0|m/p;const y=m+1>>1,v=a.exponentiate(a.__oneDigit(u,!1),a.__oneDigit(y,!1));let b,_;const x=v.__unsignedDigit(0);if(v.length===1&&32767>=x){b=new a(l.length,!1),b.__initializeDigits();let S=0;for(let C=2*l.length-1;0<=C;C--){const k=S<<15|l.__halfDigit(C);b.__setHalfDigit(C,0|k/x),S=0|k%x}_=S.toString(u)}else{const S=a.__absoluteDivLarge(l,v,!0,!0);b=S.quotient;const C=S.remainder.__trim();_=a.__toStringGeneric(C,u,!0)}b.__trim();let E=a.__toStringGeneric(b,u,!0);for(;_.length<y;)_="0"+_;return f===!1&&l.sign&&(E="-"+E),E+_}static __unequalSign(l){return l?-1:1}static __absoluteGreater(l){return l?-1:1}static __absoluteLess(l){return l?1:-1}static __compareToBigInt(l,u){const f=l.sign;if(f!==u.sign)return a.__unequalSign(f);const h=a.__absoluteCompare(l,u);return 0<h?a.__absoluteGreater(f):0>h?a.__absoluteLess(f):0}static __compareToNumber(l,u){if(a.__isOneDigitInt(u)){const f=l.sign,h=0>u;if(f!==h)return a.__unequalSign(f);if(l.length===0){if(h)throw new Error("implementation bug");return u===0?0:-1}if(1<l.length)return a.__absoluteGreater(f);const d=i(u),g=l.__unsignedDigit(0);return g>d?a.__absoluteGreater(f):g<d?a.__absoluteLess(f):0}return a.__compareToDouble(l,u)}static __compareToDouble(l,u){if(u!==u)return u;if(u===1/0)return-1;if(u===-1/0)return 1;const f=l.sign;if(f!==0>u)return a.__unequalSign(f);if(u===0)throw new Error("implementation bug: should be handled elsewhere");if(l.length===0)return-1;a.__kBitConversionDouble[0]=u;const h=2047&a.__kBitConversionInts[1]>>>20;if(h==2047)throw new Error("implementation bug: handled elsewhere");const d=h-1023;if(0>d)return a.__absoluteGreater(f);const g=l.length;let p=l.__digit(g-1);const m=a.__clz30(p),y=30*g-m,v=d+1;if(y<v)return a.__absoluteLess(f);if(y>v)return a.__absoluteGreater(f);let b=1048576|1048575&a.__kBitConversionInts[1],_=a.__kBitConversionInts[0];const x=20,E=29-m;if(E!==(0|(y-1)%30))throw new Error("implementation bug");let S,C=0;if(20>E){const k=x-E;C=k+32,S=b>>>k,b=b<<32-k|_>>>k,_<<=32-k}else if(E===20)C=32,S=b,b=_,_=0;else{const k=E-x;C=32-k,S=b<<k|_>>>32-k,b=_<<k,_=0}if(p>>>=0,S>>>=0,p>S)return a.__absoluteGreater(f);if(p<S)return a.__absoluteLess(f);for(let k=g-2;0<=k;k--){0<C?(C-=30,S=b>>>2,b=b<<30|_>>>2,_<<=30):S=0;const $=l.__unsignedDigit(k);if($>S)return a.__absoluteGreater(f);if($<S)return a.__absoluteLess(f)}if(b!==0||_!==0){if(C===0)throw new Error("implementation bug");return a.__absoluteLess(f)}return 0}static __equalToNumber(l,u){return a.__isOneDigitInt(u)?u===0?l.length===0:l.length===1&&l.sign===0>u&&l.__unsignedDigit(0)===i(u):a.__compareToDouble(l,u)===0}static __comparisonResultToBool(l,u){return u===0?0>l:u===1?0>=l:u===2?0<l:u===3?0<=l:void 0}static __compare(l,u,f){if(l=a.__toPrimitive(l),u=a.__toPrimitive(u),typeof l=="string"&&typeof u=="string")switch(f){case 0:return l<u;case 1:return l<=u;case 2:return l>u;case 3:return l>=u}if(a.__isBigInt(l)&&typeof u=="string")return u=a.__fromString(u),u!==null&&a.__comparisonResultToBool(a.__compareToBigInt(l,u),f);if(typeof l=="string"&&a.__isBigInt(u))return l=a.__fromString(l),l!==null&&a.__comparisonResultToBool(a.__compareToBigInt(l,u),f);if(l=a.__toNumeric(l),u=a.__toNumeric(u),a.__isBigInt(l)){if(a.__isBigInt(u))return a.__comparisonResultToBool(a.__compareToBigInt(l,u),f);if(typeof u!="number")throw new Error("implementation bug");return a.__comparisonResultToBool(a.__compareToNumber(l,u),f)}if(typeof l!="number")throw new Error("implementation bug");if(a.__isBigInt(u))return a.__comparisonResultToBool(a.__compareToNumber(u,l),2^f);if(typeof u!="number")throw new Error("implementation bug");return f===0?l<u:f===1?l<=u:f===2?l>u:f===3?l>=u:void 0}__clzmsd(){return a.__clz30(this.__digit(this.length-1))}static __absoluteAdd(l,u,f){if(l.length<u.length)return a.__absoluteAdd(u,l,f);if(l.length===0)return l;if(u.length===0)return l.sign===f?l:a.unaryMinus(l);let h=l.length;(l.__clzmsd()===0||u.length===l.length&&u.__clzmsd()===0)&&h++;const d=new a(h,f);let g=0,p=0;for(;p<u.length;p++){const m=l.__digit(p)+u.__digit(p)+g;g=m>>>30,d.__setDigit(p,1073741823&m)}for(;p<l.length;p++){const m=l.__digit(p)+g;g=m>>>30,d.__setDigit(p,1073741823&m)}return p<d.length&&d.__setDigit(p,g),d.__trim()}static __absoluteSub(l,u,f){if(l.length===0)return l;if(u.length===0)return l.sign===f?l:a.unaryMinus(l);const h=new a(l.length,f);let d=0,g=0;for(;g<u.length;g++){const p=l.__digit(g)-u.__digit(g)-d;d=1&p>>>30,h.__setDigit(g,1073741823&p)}for(;g<l.length;g++){const p=l.__digit(g)-d;d=1&p>>>30,h.__setDigit(g,1073741823&p)}return h.__trim()}static __absoluteAddOne(l,u,f=null){const h=l.length;f===null?f=new a(h,u):f.sign=u;let d=1;for(let g=0;g<h;g++){const p=l.__digit(g)+d;d=p>>>30,f.__setDigit(g,1073741823&p)}return d!=0&&f.__setDigitGrow(h,1),f}static __absoluteSubOne(l,u){const f=l.length;u=u||f;const h=new a(u,!1);let d=1;for(let g=0;g<f;g++){const p=l.__digit(g)-d;d=1&p>>>30,h.__setDigit(g,1073741823&p)}if(d!=0)throw new Error("implementation bug");for(let g=f;g<u;g++)h.__setDigit(g,0);return h}static __absoluteAnd(l,u,f=null){let h=l.length,d=u.length,g=d;if(h<d){g=h;const y=l,v=h;l=u,h=d,u=y,d=v}let p=g;f===null?f=new a(p,!1):p=f.length;let m=0;for(;m<g;m++)f.__setDigit(m,l.__digit(m)&u.__digit(m));for(;m<p;m++)f.__setDigit(m,0);return f}static __absoluteAndNot(l,u,f=null){const h=l.length,d=u.length;let g=d;h<d&&(g=h);let p=h;f===null?f=new a(p,!1):p=f.length;let m=0;for(;m<g;m++)f.__setDigit(m,l.__digit(m)&~u.__digit(m));for(;m<h;m++)f.__setDigit(m,l.__digit(m));for(;m<p;m++)f.__setDigit(m,0);return f}static __absoluteOr(l,u,f=null){let h=l.length,d=u.length,g=d;if(h<d){g=h;const y=l,v=h;l=u,h=d,u=y,d=v}let p=h;f===null?f=new a(p,!1):p=f.length;let m=0;for(;m<g;m++)f.__setDigit(m,l.__digit(m)|u.__digit(m));for(;m<h;m++)f.__setDigit(m,l.__digit(m));for(;m<p;m++)f.__setDigit(m,0);return f}static __absoluteXor(l,u,f=null){let h=l.length,d=u.length,g=d;if(h<d){g=h;const y=l,v=h;l=u,h=d,u=y,d=v}let p=h;f===null?f=new a(p,!1):p=f.length;let m=0;for(;m<g;m++)f.__setDigit(m,l.__digit(m)^u.__digit(m));for(;m<h;m++)f.__setDigit(m,l.__digit(m));for(;m<p;m++)f.__setDigit(m,0);return f}static __absoluteCompare(l,u){const f=l.length-u.length;if(f!=0)return f;let h=l.length-1;for(;0<=h&&l.__digit(h)===u.__digit(h);)h--;return 0>h?0:l.__unsignedDigit(h)>u.__unsignedDigit(h)?1:-1}static __multiplyAccumulate(l,u,f,h){if(u===0)return;const d=32767&u,g=u>>>15;let p=0,m=0;for(let y,v=0;v<l.length;v++,h++){y=f.__digit(h);const b=l.__digit(v),_=32767&b,x=b>>>15,E=a.__imul(_,d),S=a.__imul(_,g),C=a.__imul(x,d),k=a.__imul(x,g);y+=m+E+p,p=y>>>30,y&=1073741823,y+=((32767&S)<<15)+((32767&C)<<15),p+=y>>>30,m=k+(S>>>15)+(C>>>15),f.__setDigit(h,1073741823&y)}for(;p!=0||m!==0;h++){let y=f.__digit(h);y+=p+m,m=0,p=y>>>30,f.__setDigit(h,1073741823&y)}}static __internalMultiplyAdd(l,u,f,h,d){let g=f,p=0;for(let m=0;m<h;m++){const y=l.__digit(m),v=a.__imul(32767&y,u),b=a.__imul(y>>>15,u),_=v+((32767&b)<<15)+p+g;g=_>>>30,p=b>>>15,d.__setDigit(m,1073741823&_)}if(d.length>h)for(d.__setDigit(h++,g+p);h<d.length;)d.__setDigit(h++,0);else if(g+p!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(l,u,f){f>this.length&&(f=this.length);const h=32767&l,d=l>>>15;let g=0,p=u;for(let m=0;m<f;m++){const y=this.__digit(m),v=32767&y,b=y>>>15,_=a.__imul(v,h),x=a.__imul(v,d),E=a.__imul(b,h),S=a.__imul(b,d);let C=p+_+g;g=C>>>30,C&=1073741823,C+=((32767&x)<<15)+((32767&E)<<15),g+=C>>>30,p=S+(x>>>15)+(E>>>15),this.__setDigit(m,1073741823&C)}if(g!=0||p!==0)throw new Error("implementation bug")}static __absoluteDivSmall(l,u,f=null){f===null&&(f=new a(l.length,!1));let h=0;for(let d,g=2*l.length-1;0<=g;g-=2){d=(h<<15|l.__halfDigit(g))>>>0;const p=0|d/u;h=0|d%u,d=(h<<15|l.__halfDigit(g-1))>>>0;const m=0|d/u;h=0|d%u,f.__setDigit(g>>>1,p<<15|m)}return f}static __absoluteModSmall(l,u){let f=0;for(let h=2*l.length-1;0<=h;h--)f=0|((f<<15|l.__halfDigit(h))>>>0)%u;return f}static __absoluteDivLarge(l,u,f,h){const d=u.__halfDigitLength(),g=u.length,p=l.__halfDigitLength()-d;let m=null;f&&(m=new a(p+2>>>1,!1),m.__initializeDigits());const y=new a(d+2>>>1,!1);y.__initializeDigits();const v=a.__clz15(u.__halfDigit(d-1));0<v&&(u=a.__specialLeftShift(u,v,0));const b=a.__specialLeftShift(l,v,1),_=u.__halfDigit(d-1);let x=0;for(let E,S=p;0<=S;S--){E=32767;const C=b.__halfDigit(S+d);if(C!==_){const $=(C<<15|b.__halfDigit(S+d-1))>>>0;E=0|$/_;let J=0|$%_;const j=u.__halfDigit(d-2),L=b.__halfDigit(S+d-2);for(;a.__imul(E,j)>>>0>(J<<16|L)>>>0&&(E--,J+=_,!(32767<J)););}a.__internalMultiplyAdd(u,E,0,g,y);let k=b.__inplaceSub(y,S,d+1);k!==0&&(k=b.__inplaceAdd(u,S,d),b.__setHalfDigit(S+d,32767&b.__halfDigit(S+d)+k),E--),f&&(1&S?x=E<<15:m.__setDigit(S>>>1,x|E))}if(h)return b.__inplaceRightShift(v),f?{quotient:m,remainder:b}:b;if(f)return m;throw new Error("unreachable")}static __clz15(l){return a.__clz30(l)-15}__inplaceAdd(l,u,f){let h=0;for(let d=0;d<f;d++){const g=this.__halfDigit(u+d)+l.__halfDigit(d)+h;h=g>>>15,this.__setHalfDigit(u+d,32767&g)}return h}__inplaceSub(l,u,f){let h=0;if(1&u){u>>=1;let d=this.__digit(u),g=32767&d,p=0;for(;p<f-1>>>1;p++){const v=l.__digit(p),b=(d>>>15)-(32767&v)-h;h=1&b>>>15,this.__setDigit(u+p,(32767&b)<<15|32767&g),d=this.__digit(u+p+1),g=(32767&d)-(v>>>15)-h,h=1&g>>>15}const m=l.__digit(p),y=(d>>>15)-(32767&m)-h;if(h=1&y>>>15,this.__setDigit(u+p,(32767&y)<<15|32767&g),u+p+1>=this.length)throw new RangeError("out of bounds");(1&f)==0&&(d=this.__digit(u+p+1),g=(32767&d)-(m>>>15)-h,h=1&g>>>15,this.__setDigit(u+l.length,1073709056&d|32767&g))}else{u>>=1;let d=0;for(;d<l.length-1;d++){const v=this.__digit(u+d),b=l.__digit(d),_=(32767&v)-(32767&b)-h;h=1&_>>>15;const x=(v>>>15)-(b>>>15)-h;h=1&x>>>15,this.__setDigit(u+d,(32767&x)<<15|32767&_)}const g=this.__digit(u+d),p=l.__digit(d),m=(32767&g)-(32767&p)-h;h=1&m>>>15;let y=0;(1&f)==0&&(y=(g>>>15)-(p>>>15)-h,h=1&y>>>15),this.__setDigit(u+d,(32767&y)<<15|32767&m)}return h}__inplaceRightShift(l){if(l===0)return;let u=this.__digit(0)>>>l;const f=this.length-1;for(let h=0;h<f;h++){const d=this.__digit(h+1);this.__setDigit(h,1073741823&d<<30-l|u),u=d>>>l}this.__setDigit(f,u)}static __specialLeftShift(l,u,f){const h=l.length,d=new a(h+f,!1);if(u===0){for(let p=0;p<h;p++)d.__setDigit(p,l.__digit(p));return 0<f&&d.__setDigit(h,0),d}let g=0;for(let p=0;p<h;p++){const m=l.__digit(p);d.__setDigit(p,1073741823&m<<u|g),g=m>>>30-u}return 0<f&&d.__setDigit(h,g),d}static __leftShiftByAbsolute(l,u){const f=a.__toShiftAmount(u);if(0>f)throw new RangeError("BigInt too big");const h=0|f/30,d=f%30,g=l.length,p=d!==0&&l.__digit(g-1)>>>30-d!=0,m=g+h+(p?1:0),y=new a(m,l.sign);if(d===0){let v=0;for(;v<h;v++)y.__setDigit(v,0);for(;v<m;v++)y.__setDigit(v,l.__digit(v-h))}else{let v=0;for(let b=0;b<h;b++)y.__setDigit(b,0);for(let b=0;b<g;b++){const _=l.__digit(b);y.__setDigit(b+h,1073741823&_<<d|v),v=_>>>30-d}if(p)y.__setDigit(g+h,v);else if(v!==0)throw new Error("implementation bug")}return y.__trim()}static __rightShiftByAbsolute(l,u){const f=l.length,h=l.sign,d=a.__toShiftAmount(u);if(0>d)return a.__rightShiftByMaximum(h);const g=0|d/30,p=d%30;let m=f-g;if(0>=m)return a.__rightShiftByMaximum(h);let y=!1;if(h){if((l.__digit(g)&(1<<p)-1)!=0)y=!0;else for(let b=0;b<g;b++)if(l.__digit(b)!==0){y=!0;break}}y&&p===0&&~l.__digit(f-1)==0&&m++;let v=new a(m,h);if(p===0){v.__setDigit(m-1,0);for(let b=g;b<f;b++)v.__setDigit(b-g,l.__digit(b))}else{let b=l.__digit(g)>>>p;const _=f-g-1;for(let x=0;x<_;x++){const E=l.__digit(x+g+1);v.__setDigit(x,1073741823&E<<30-p|b),b=E>>>p}v.__setDigit(_,b)}return y&&(v=a.__absoluteAddOne(v,!0,v)),v.__trim()}static __rightShiftByMaximum(l){return l?a.__oneDigit(1,!0):a.__zero()}static __toShiftAmount(l){if(1<l.length)return-1;const u=l.__unsignedDigit(0);return u>a.__kMaxLengthBits?-1:u}static __toPrimitive(l,u="default"){if(typeof l!="object"||l.constructor===a)return l;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const d=l[Symbol.toPrimitive];if(d){const g=d(u);if(typeof g!="object")return g;throw new TypeError("Cannot convert object to primitive value")}}const f=l.valueOf;if(f){const d=f.call(l);if(typeof d!="object")return d}const h=l.toString;if(h){const d=h.call(l);if(typeof d!="object")return d}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(l){return a.__isBigInt(l)?l:+l}static __isBigInt(l){return typeof l=="object"&&l!==null&&l.constructor===a}static __truncateToNBits(l,u){const f=0|(l+29)/30,h=new a(f,u.sign),d=f-1;for(let p=0;p<d;p++)h.__setDigit(p,u.__digit(p));let g=u.__digit(d);if(l%30!=0){const p=32-l%30;g=g<<p>>>p}return h.__setDigit(d,g),h.__trim()}static __truncateAndSubFromPowerOfTwo(l,u,f){var h=Math.min;const d=0|(l+29)/30,g=new a(d,f);let p=0;const m=d-1;let y=0;for(const x=h(m,u.length);p<x;p++){const E=0-u.__digit(p)-y;y=1&E>>>30,g.__setDigit(p,1073741823&E)}for(;p<m;p++)g.__setDigit(p,0|1073741823&-y);let v=m<u.length?u.__digit(m):0;const b=l%30;let _;if(b==0)_=0-v-y,_&=1073741823;else{const x=32-b;v=v<<x>>>x;const E=1<<32-x;_=E-v-y,_&=E-1}return g.__setDigit(m,_),g.__trim()}__digit(l){return this[l]}__unsignedDigit(l){return this[l]>>>0}__setDigit(l,u){this[l]=0|u}__setDigitGrow(l,u){this[l]=0|u}__halfDigitLength(){const l=this.length;return 32767>=this.__unsignedDigit(l-1)?2*l-1:2*l}__halfDigit(l){return 32767&this[l>>>1]>>>15*(1&l)}__setHalfDigit(l,u){const f=l>>>1,h=this.__digit(f),d=1&l?32767&h|u<<15:1073709056&h|32767&u;this.__setDigit(f,d)}static __digitPow(l,u){let f=1;for(;0<u;)1&u&&(f*=l),u>>>=1,l*=l;return f}static __isOneDigitInt(l){return(1073741823&l)===l}}return a.__kMaxLength=33554432,a.__kMaxLengthBits=a.__kMaxLength<<5,a.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],a.__kBitsPerCharTableShift=5,a.__kBitsPerCharTableMultiplier=1<<a.__kBitsPerCharTableShift,a.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],a.__kBitConversionBuffer=new ArrayBuffer(8),a.__kBitConversionDouble=new Float64Array(a.__kBitConversionBuffer),a.__kBitConversionInts=new Int32Array(a.__kBitConversionBuffer),a.__clz30=n?function(c){return n(c)-2}:function(c){var l=Math.LN2,u=Math.log;return c===0?30:0|29-(0|u(c>>>0)/l)},a.__imul=t||function(c,l){return 0|c*l},a})}(Dy)),Dy.exports}var O8;function Rpe(){if(O8)return vh;O8=1;var r=vh&&vh.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(vh,"__esModule",{value:!0});const e=Gf(),t=r(Ipe()),n=r(Tpe()),i=18446744073709552e3,s=(a,c)=>n.default.bitwiseXor(n.default.asUintN(64,n.default.leftShift(a,n.default.BigInt(c))),n.default.BigInt(n.default.asUintN(64,n.default.signedRightShift(a,n.default.subtract(n.default.BigInt(64),n.default.BigInt(c))))));class o{constructor(c){this.next=()=>new t.default(this.roll().toString()),this.nextDouble=()=>new t.default(this.roll().toString()).div(i+1),this.nextInt=(u,f)=>Math.floor(this.nextDouble().toNumber()*(f-u+1)+u),this.nextByte=()=>this.nextInt(0,255),this.nextData=u=>[...new Array(u)].map(()=>this.nextByte());const l=e.sha256Hash(c);this.s=[n.default.BigInt(0),n.default.BigInt(0),n.default.BigInt(0),n.default.BigInt(0)],this.setS(l)}setS(c){for(let l=0;l<4;l++){let u=l*8,f=n.default.BigInt(0);for(let h=0;h<8;h++)f=n.default.asUintN(64,n.default.leftShift(f,n.default.BigInt(8))),f=n.default.asUintN(64,n.default.bitwiseOr(f,n.default.BigInt(c[u+h])));this.s[l]=n.default.asUintN(64,f)}}roll(){const c=n.default.asUintN(64,n.default.multiply(s(n.default.asUintN(64,n.default.multiply(this.s[1],n.default.BigInt(5))),7),n.default.BigInt(9))),l=n.default.asUintN(64,n.default.leftShift(this.s[1],n.default.BigInt(17)));return this.s[2]=n.default.asUintN(64,n.default.bitwiseXor(this.s[2],n.default.BigInt(this.s[0]))),this.s[3]=n.default.asUintN(64,n.default.bitwiseXor(this.s[3],n.default.BigInt(this.s[1]))),this.s[1]=n.default.asUintN(64,n.default.bitwiseXor(this.s[1],n.default.BigInt(this.s[2]))),this.s[0]=n.default.asUintN(64,n.default.bitwiseXor(this.s[0],n.default.BigInt(this.s[3]))),this.s[2]=n.default.asUintN(64,n.default.bitwiseXor(this.s[2],n.default.BigInt(l))),this.s[3]=n.default.asUintN(64,s(this.s[3],45)),c}}return vh.default=o,vh}var kpe=function(r,e){var t=r.reduce(function(u,f){if(f<0)throw new Error("Probability must be a positive: p["+r.indexOf(f)+"]="+f);return u+f},0);if(t===0)throw new Error("Probability sum must be greater than zero.");for(var n=r.map(function(u){return u*e/t}),i={prob:new Array(e),alias:new Array(e)},s=[],o=[],a=e-1;a>=0;a--)n[a]<1?s.push(a):o.push(a);for(;s.length>0&&o.length>0;){var c=s.pop(),l=o.pop();i.prob[c]=n[c],i.alias[c]=l,n[l]=n[l]+n[c]-1,n[l]<1?s.push(l):o.push(l)}for(;o.length>0;)i.prob[o.pop()]=1;for(;s.length>0;)i.prob[s.pop()]=1;return i},D8=function(r,e,t){var n=Math.floor(t()*r.prob.length);return e[t()<r.prob[n]?n:r.alias[n]]},Ppe=function(r,e,t,n){if(n===void 0&&(n=1),n===1)return D8(r,e,t);for(var i=[],s=0;s<n;s++)i.push(D8(r,e,t));return i},Ope=function(r,e,t){if(t===void 0&&(t=Math.random),!Array.isArray(r))throw new Error("Probabilities must be an array.");if(r.length===0)throw new Error("Probabilities array must not be empty.");var n=r.length,i=e??Array.from({length:n},function(o,a){return a}),s=kpe(r,n);return{next:function(o){return o===void 0&&(o=1),Ppe(s,i,t,o)}}};const Dpe=Object.freeze(Object.defineProperty({__proto__:null,default:Ope},Symbol.toStringTag,{value:"Module"})),$pe=Xd(Dpe);var $8;function gK(){return $8||($8=1,function(r){var e=Cp&&Cp.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0}),r.chooseFragments=r.shuffle=r.chooseDegree=void 0;const t=Gf(),n=e(Rpe()),i=e($pe),s=(c,l)=>{const u=[...new Array(c)].map((h,d)=>1/(d+1));return i.default(u,void 0,l.nextDouble).next()+1};r.chooseDegree=s;const o=(c,l)=>{let u=[...c],f=[];for(;u.length>0;){let h=l.nextInt(0,u.length-1),d=u[h];u.splice(h,1),f.push(d)}return f};r.shuffle=o;const a=(c,l,u)=>{if(c<=l)return[c-1];{const f=Xe.concat([t.intToBytes(c),t.intToBytes(u)]),h=new n.default(f),d=r.chooseDegree(l,h),g=[...new Array(l)].map((m,y)=>y);return r.shuffle(g,h).slice(0,d)}};r.chooseFragments=a}(Cp)),Cp}var M8;function mK(){if(M8)return $l;M8=1;var r=$l&&$l.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty($l,"__esModule",{value:!0}),$l.FountainEncoderPart=void 0;const e=r(pg()),t=Gf(),n=gK(),i=aK();class s{constructor(c,l,u,f,h){this._seqNum=c,this._seqLength=l,this._messageLength=u,this._checksum=f,this._fragment=h}get messageLength(){return this._messageLength}get fragment(){return this._fragment}get seqNum(){return this._seqNum}get seqLength(){return this._seqLength}get checksum(){return this._checksum}cbor(){const c=i.cborEncode([this._seqNum,this._seqLength,this._messageLength,this._checksum,this._fragment]);return Xe.from(c)}description(){return`seqNum:${this._seqNum}, seqLen:${this._seqLength}, messageLen:${this._messageLength}, checksum:${this._checksum}, data:${this._fragment.toString("hex")}`}static fromCBOR(c){const[l,u,f,h,d]=i.cborDecode(c);return e.default(typeof l=="number"),e.default(typeof u=="number"),e.default(typeof f=="number"),e.default(typeof h=="number"),e.default(Xe.isBuffer(d)&&d.length>0),new s(l,u,f,h,Xe.from(d))}}$l.FountainEncoderPart=s;class o{constructor(c,l=100,u=0,f=10){const h=o.findNominalFragmentLength(c.length,f,l);this._messageLength=c.length,this._fragments=o.partitionMessage(c,h),this.fragmentLength=h,this.seqNum=t.toUint32(u),this.checksum=t.getCRC(c)}get fragmentsLength(){return this._fragments.length}get fragments(){return this._fragments}get messageLength(){return this._messageLength}isComplete(){return this.seqNum>=this._fragments.length}isSinglePart(){return this._fragments.length===1}seqLength(){return this._fragments.length}mix(c){return c.reduce((l,u)=>t.bufferXOR(this._fragments[u],l),Xe.alloc(this.fragmentLength,0))}nextPart(){this.seqNum=t.toUint32(this.seqNum+1);const c=n.chooseFragments(this.seqNum,this._fragments.length,this.checksum),l=this.mix(c);return new s(this.seqNum,this._fragments.length,this._messageLength,this.checksum,l)}static findNominalFragmentLength(c,l,u){e.default(c>0),e.default(l>0),e.default(u>=l);const f=Math.ceil(c/l);let h=0;for(let d=1;d<=f&&(h=Math.ceil(c/d),!(h<=u));d++);return h}static partitionMessage(c,l){let u=Xe.from(c),f,h=[];for(;u.length>0;)[f,u]=t.split(u,-l),f=Xe.alloc(l,0).fill(f,0,f.length),h.push(f);return h}}return $l.default=o,$l}var bh={},B8;function yK(){if(B8)return bh;B8=1;var r=bh&&bh.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(bh,"__esModule",{value:!0});const e=r(pg()),t=Gf(),n="ableacidalsoapexaquaarchatomauntawayaxisbackbaldbarnbeltbetabiasbluebodybragbrewbulbbuzzcalmcashcatschefcityclawcodecolacookcostcruxcurlcuspcyandarkdatadaysdelidicedietdoordowndrawdropdrumdulldutyeacheasyechoedgeepicevenexamexiteyesfactfairfernfigsfilmfishfizzflapflewfluxfoxyfreefrogfuelfundgalagamegeargemsgiftgirlglowgoodgraygrimgurugushgyrohalfhanghardhawkheathelphighhillholyhopehornhutsicedideaidleinchinkyintoirisironitemjadejazzjoinjoltjowljudojugsjumpjunkjurykeepkenokeptkeyskickkilnkingkitekiwiknoblamblavalazyleaflegsliarlimplionlistlogoloudloveluaulucklungmainmanymathmazememomenumeowmildmintmissmonknailnavyneednewsnextnoonnotenumbobeyoboeomitonyxopenovalowlspaidpartpeckplaypluspoempoolposepuffpumapurrquadquizraceramprealredorichroadrockroofrubyruinrunsrustsafesagascarsetssilkskewslotsoapsolosongstubsurfswantacotasktaxitenttiedtimetinytoiltombtoystriptunatwinuglyundouniturgeuservastveryvetovialvibeviewvisavoidvowswallwandwarmwaspwavewaxywebswhatwhenwhizwolfworkyankyawnyellyogayurtzapszerozestzinczonezoom";let i=[];const s=256,o=4,a=2;var c;(function(v){v.STANDARD="standard",v.URI="uri",v.MINIMAL="minimal"})(c||(c={}));const l=v=>n.slice(v*o,v*o+o),u=v=>{const b=l(v);return`${b[0]}${b[o-1]}`},f=v=>{const b=t.getCRCHex(Xe.from(v,"hex"));return`${v}${b}`},h=(v,b)=>{const _=f(v);return Xe.from(_,"hex").reduce((S,C)=>[...S,l(C)],[]).join(b)},d=v=>{const b=f(v);return Xe.from(b,"hex").reduce((E,S)=>E+u(S),"")},g=(v,b)=>{e.default(v.length===b,"Invalid Bytewords: word.length does not match wordLength provided");const _=26;if(i.length===0){const k=_*_;i=[...new Array(k)].map(()=>-1);for(let $=0;$<s;$++){const J=l($);let j=J[0].charCodeAt(0)-97,w=(J[3].charCodeAt(0)-97)*_+j;i[w]=$}}let x=v[0].toLowerCase().charCodeAt(0)-97,E=v[b==4?3:1].toLowerCase().charCodeAt(0)-97;e.default(0<=x&&x<_&&0<=E&&E<_,"Invalid Bytewords: invalid word");let S=E*_+x,C=i[S];if(e.default(C!==-1,"Invalid Bytewords: value not in lookup table"),b==o){const k=l(C);let $=v[1].toLowerCase(),J=v[2].toLowerCase();e.default($===k[1]&&J===k[2],"Invalid Bytewords: invalid middle letters of word")}return Xe.from([C]).toString("hex")},p=(v,b,_)=>{const E=(_==o?v.split(b):t.partition(v,2)).map($=>g($,_)).join("");e.default(E.length>=5,"Invalid Bytewords: invalid decoded string length");const[S,C]=t.split(Xe.from(E,"hex"),4),k=t.getCRCHex(S);return e.default(k===C.toString("hex"),"Invalid Checksum"),S.toString("hex")},m=(v,b=c.MINIMAL)=>{switch(b){case c.STANDARD:return p(v," ",o);case c.URI:return p(v,"-",o);case c.MINIMAL:return p(v,"",a);default:throw new Error(`Invalid style ${b}`)}},y=(v,b=c.MINIMAL)=>{switch(b){case c.STANDARD:return h(v," ");case c.URI:return h(v,"-");case c.MINIMAL:return d(v);default:throw new Error(`Invalid style ${b}`)}};return bh.default={decode:m,encode:y,STYLES:c},bh}var N8;function Mpe(){if(N8)return yh;N8=1;var r=yh&&yh.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(yh,"__esModule",{value:!0});const e=r(mK()),t=r(yK());class n{constructor(s,o,a,c){this.ur=s,this.fountainEncoder=new e.default(s.cbor,o,a,c)}get fragmentsLength(){return this.fountainEncoder.fragmentsLength}get fragments(){return this.fountainEncoder.fragments}get messageLength(){return this.fountainEncoder.messageLength}get cbor(){return this.ur.cbor}encodeWhole(){return[...new Array(this.fragmentsLength)].map(()=>this.nextPart())}nextPart(){const s=this.fountainEncoder.nextPart();return this.fountainEncoder.isSinglePart()?n.encodeSinglePart(this.ur):n.encodePart(this.ur.type,s)}static encodeUri(s,o){const a=o.join("/");return[s,a].join(":")}static encodeUR(s){return n.encodeUri("ur",s)}static encodePart(s,o){const a=`${o.seqNum}-${o.seqLength}`,c=t.default.encode(o.cbor().toString("hex"),t.default.STYLES.MINIMAL);return n.encodeUR([s,a,c])}static encodeSinglePart(s){const o=t.default.encode(s.cbor.toString("hex"),t.default.STYLES.MINIMAL);return n.encodeUR([s.type,o])}}return yh.default=n,yh}var wh={},xh={},L8;function Bpe(){if(L8)return xh;L8=1,Object.defineProperty(xh,"__esModule",{value:!0}),xh.FountainDecoderPart=void 0;const r=Gf(),e=gK(),t=f3();class n{constructor(o,a){this._indexes=o,this._fragment=a}get indexes(){return this._indexes}get fragment(){return this._fragment}static fromEncoderPart(o){const a=e.chooseFragments(o.seqNum,o.seqLength,o.checksum),c=o.fragment;return new n(a,c)}isSimple(){return this.indexes.length===1}}xh.FountainDecoderPart=n;class i{constructor(){this.result=void 0,this.expectedMessageLength=0,this.expectedChecksum=0,this.expectedFragmentLength=0,this.processedPartsCount=0,this.expectedPartIndexes=[],this.lastPartIndexes=[],this.queuedParts=[],this.receivedPartIndexes=[],this.mixedParts=[],this.simpleParts=[]}validatePart(o){if(this.expectedPartIndexes.length===0)[...new Array(o.seqLength)].forEach((a,c)=>this.expectedPartIndexes.push(c)),this.expectedMessageLength=o.messageLength,this.expectedChecksum=o.checksum,this.expectedFragmentLength=o.fragment.length;else if(this.expectedPartIndexes.length!==o.seqLength||this.expectedMessageLength!==o.messageLength||this.expectedChecksum!==o.checksum||this.expectedFragmentLength!==o.fragment.length)return!1;return!0}reducePartByPart(o,a){if(r.arrayContains(o.indexes,a.indexes)){const c=r.setDifference(o.indexes,a.indexes),l=r.bufferXOR(o.fragment,a.fragment);return new n(c,l)}else return o}reduceMixedBy(o){const a=[];this.mixedParts.map(({value:c})=>this.reducePartByPart(c,o)).forEach(c=>{c.isSimple()?this.queuedParts.push(c):a.push({key:c.indexes,value:c})}),this.mixedParts=a}processSimplePart(o){const a=o.indexes[0];if(!this.receivedPartIndexes.includes(a))if(this.simpleParts.push({key:o.indexes,value:o}),this.receivedPartIndexes.push(a),r.arraysEqual(this.receivedPartIndexes,this.expectedPartIndexes)){const c=this.simpleParts.map(({value:f})=>f).sort((f,h)=>f.indexes[0]-h.indexes[0]),l=i.joinFragments(c.map(f=>f.fragment),this.expectedMessageLength);r.getCRC(l)===this.expectedChecksum?this.result=l:this.error=new t.InvalidChecksumError}else this.reduceMixedBy(o)}processMixedPart(o){if(this.mixedParts.some(({key:c})=>r.arraysEqual(c,o.indexes)))return;let a=this.simpleParts.reduce((c,{value:l})=>this.reducePartByPart(c,l),o);a=this.mixedParts.reduce((c,{value:l})=>this.reducePartByPart(c,l),a),a.isSimple()?this.queuedParts.push(a):(this.reduceMixedBy(a),this.mixedParts.push({key:a.indexes,value:a}))}processQueuedItem(){if(this.queuedParts.length===0)return;const o=this.queuedParts.shift();o.isSimple()?this.processSimplePart(o):this.processMixedPart(o)}receivePart(o){if(this.isComplete()||!this.validatePart(o))return!1;const a=n.fromEncoderPart(o);for(this.lastPartIndexes=a.indexes,this.queuedParts.push(a);!this.isComplete()&&this.queuedParts.length>0;)this.processQueuedItem();return this.processedPartsCount+=1,!0}isComplete(){return this.result!==void 0&&this.result.length>0}isSuccess(){return!!(this.error===void 0&&this.isComplete())}resultMessage(){return this.isSuccess()?this.result:Xe.from([])}isFailure(){return this.error!==void 0}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.expectedPartIndexes.length}getExpectedPartIndexes(){return[...this.expectedPartIndexes]}getReceivedPartIndexes(){return[...this.receivedPartIndexes]}getLastPartIndexes(){return[...this.lastPartIndexes]}estimatedPercentComplete(){if(this.isComplete())return 1;const o=this.expectedPartCount();return o===0?0:Math.min(.99,this.processedPartsCount/(o*1.75))}getProgress(){if(this.isComplete())return 1;const o=this.expectedPartCount();return o===0?0:this.receivedPartIndexes.length/o}}return xh.default=i,i.joinFragments=(s,o)=>Xe.concat(s).slice(0,o),xh}var F8;function Npe(){if(F8)return wh;F8=1;var r=wh&&wh.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(wh,"__esModule",{value:!0});const e=r(Bpe()),t=r(yK()),n=r(pg()),i=Gf(),s=f3(),o=r(cK()),a=mK();class c{constructor(u=new e.default,f="bytes"){this.fountainDecoder=u,this.type=f,n.default(i.isURType(f),"Invalid UR type"),this.expected_type=""}static decodeBody(u,f){const h=t.default.decode(f,t.default.STYLES.MINIMAL);return new o.default(Xe.from(h,"hex"),u)}validatePart(u){return this.expected_type?this.expected_type===u:i.isURType(u)?(this.expected_type=u,!0):!1}static decode(u){const[f,h]=this.parse(u);if(h.length===0)throw new s.InvalidPathLengthError;const d=h[0];return c.decodeBody(f,d)}static parse(u){const f=u.toLowerCase();if(f.slice(0,3)!=="ur:")throw new s.InvalidSchemeError;const d=f.slice(3).split("/"),g=d[0];if(d.length<2)throw new s.InvalidPathLengthError;if(!i.isURType(g))throw new s.InvalidTypeError;return[g,d.slice(1)]}static parseSequenceComponent(u){const f=u.split("-");if(f.length!==2)throw new s.InvalidSequenceComponentError;const h=i.toUint32(Number(f[0])),d=Number(f[1]);if(h<1||d<1)throw new s.InvalidSequenceComponentError;return[h,d]}receivePart(u){if(this.result!==void 0)return!1;const[f,h]=c.parse(u);if(!this.validatePart(f))return!1;if(h.length===1)return this.result=c.decodeBody(f,h[0]),!0;if(h.length!==2)throw new s.InvalidPathLengthError;const[d,g]=h,[p,m]=c.parseSequenceComponent(d),y=t.default.decode(g,t.default.STYLES.MINIMAL),v=a.FountainEncoderPart.fromCBOR(y);return p!==v.seqNum||m!==v.seqLength||!this.fountainDecoder.receivePart(v)?!1:(this.fountainDecoder.isSuccess()?this.result=new o.default(this.fountainDecoder.resultMessage(),f):this.fountainDecoder.isFailure()&&(this.error=new s.InvalidSchemeError),!0)}resultUR(){return this.result?this.result:new o.default(Xe.from([]))}isComplete(){return this.result&&this.result.cbor.length>0}isSuccess(){return!this.error&&this.isComplete()}isError(){return this.error!==void 0}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.fountainDecoder.expectedPartCount()}expectedPartIndexes(){return this.fountainDecoder.getExpectedPartIndexes()}receivedPartIndexes(){return this.fountainDecoder.getReceivedPartIndexes()}lastPartIndexes(){return this.fountainDecoder.getLastPartIndexes()}estimatedPercentComplete(){return this.fountainDecoder.estimatedPercentComplete()}getProgress(){return this.fountainDecoder.getProgress()}}return wh.default=c,wh}var U8;function d3(){if(U8)return ia;U8=1;var r=ia&&ia.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ia,"__esModule",{value:!0}),ia.URDecoder=ia.UREncoder=ia.UR=void 0;const e=r(cK());ia.UR=e.default;const t=r(Mpe());ia.UREncoder=t.default;const n=r(Npe());return ia.URDecoder=n.default,ia}var z8;function _s(){if(z8)return Ip;z8=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.RegistryItem=void 0;const r=d3(),e=Li();let t=class{constructor(){this.toCBOR=()=>{if(this.toDataItem()===void 0)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,e.encodeDataItem)(this.toDataItem())},this.toUR=()=>new r.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(i,s,o)=>{const a=this.toUR();return new r.UREncoder(a,i,s,o)}}};return Ip.RegistryItem=t,Ip}var q8;function sI(){return q8||(q8=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoCoinInfo=r.Network=r.Type=void 0;const e=Li(),t=_s(),n=Fi();var i;(function(c){c.type="1",c.network="2"})(i||(i={}));var s;(function(c){c[c.bitcoin=0]="bitcoin"})(s=r.Type||(r.Type={}));var o;(function(c){c[c.mainnet=0]="mainnet",c[c.testnet=1]="testnet"})(o=r.Network||(r.Network={}));class a extends t.RegistryItem{constructor(l,u){super(),this.type=l,this.network=u,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||s.bitcoin,this.getNetwork=()=>this.network||o.mainnet,this.toDataItem=()=>{const f={};return this.type&&(f[i.type]=this.type),this.network&&(f[i.network]=this.network),new e.DataItem(f)}}}r.CryptoCoinInfo=a,a.fromDataItem=c=>{const l=c.getData(),u=l[i.type],f=l[i.network];return new a(u,f)},a.fromCBOR=c=>{const l=(0,e.decodeToDataItem)(c);return a.fromDataItem(l)}}(j_)),j_}var Tp={},Rp={},j8;function oI(){if(j8)return Rp;j8=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.PathComponent=void 0;let r=class vK{constructor(t){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=t.index,this.hardened=t.hardened,this.index!==void 0?this.wildcard=!1:this.wildcard=!0,this.index&&(this.index&vK.HARDENED_BIT)!==0)throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}};return Rp.PathComponent=r,r.HARDENED_BIT=2147483648,Rp}var V8;function Iv(){if(V8)return Tp;V8=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.CryptoKeypath=void 0;const r=Li(),e=oI(),t=_s(),n=Fi();var i;(function(o){o[o.components=1]="components",o[o.source_fingerprint=2]="source_fingerprint",o[o.depth=3]="depth"})(i||(i={}));let s=class extends t.RegistryItem{constructor(a=[],c,l){super(),this.components=a,this.sourceFingerprint=c,this.depth=l,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>this.components.length===0?void 0:this.components.map(f=>`${f.isWildcard()?"*":f.getIndex()}${f.isHardened()?"'":""}`).join("/"),this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const u={},f=[];return this.components&&this.components.forEach(h=>{h.isWildcard()?f.push([]):f.push(h.getIndex()),f.push(h.isHardened())}),u[i.components]=f,this.sourceFingerprint&&(u[i.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==void 0&&(u[i.depth]=this.depth),new r.DataItem(u)}}};return Tp.CryptoKeypath=s,s.fromDataItem=o=>{const a=o.getData(),c=[],l=a[i.components];if(l)for(let d=0;d<l.length;d+=2){const g=l[d+1],p=l[d];typeof p=="number"?c.push(new e.PathComponent({index:p,hardened:g})):c.push(new e.PathComponent({hardened:g}))}const u=a[i.source_fingerprint];let f;u&&(f=Xe.alloc(4),f.writeUInt32BE(u,0));const h=a[i.depth];return new s(c,f,h)},s.fromCBOR=o=>{const a=(0,r.decodeToDataItem)(o);return s.fromDataItem(a)},Tp}var K8;function gg(){if(K8)return Ap;K8=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.CryptoHDKey=void 0;const r=rpe(),e=sI(),t=Iv(),n=Li(),i=_s(),s=Fi();var o;(function(c){c[c.is_master=1]="is_master",c[c.is_private=2]="is_private",c[c.key_data=3]="key_data",c[c.chain_code=4]="chain_code",c[c.use_info=5]="use_info",c[c.origin=6]="origin",c[c.children=7]="children",c[c.parent_fingerprint=8]="parent_fingerprint",c[c.name=9]="name",c[c.note=10]="note"})(o||(o={}));let a=class extends i.RegistryItem{constructor(l){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var u,f,h;let d,g,p=0,m=Xe.alloc(4).fill(0);if(this.isMaster())d=Xe.from("0488ADE4","hex"),g=0,p=0;else{g=((u=this.getOrigin())===null||u===void 0?void 0:u.getComponents().length)||((f=this.getOrigin())===null||f===void 0?void 0:f.getDepth());const x=(h=this.getOrigin())===null||h===void 0?void 0:h.getComponents(),E=x[x.length-1];E&&(p=E.isHardened()?E.getIndex()+2147483648:E.getIndex(),this.getParentFingerprint()&&(m=this.getParentFingerprint())),this.isPrivateKey()?d=Xe.from("0488ADE4","hex"):d=Xe.from("0488B21E","hex")}const y=Xe.alloc(1);y.writeUInt8(g,0);const v=Xe.alloc(4);v.writeUInt32BE(p,0);const b=this.getChainCode(),_=this.getKey();return(0,r.encode)(Xe.concat([d,y,m,v,b,_]))},this.getRegistryType=()=>s.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var u,f,h,d,g,p,m;let y="";return this.getOrigin()&&!((u=this.getOrigin())===null||u===void 0)&&u.getSourceFingerprint()&&!((f=this.getOrigin())===null||f===void 0)&&f.getPath()&&(y+=`${(d=(h=this.getOrigin())===null||h===void 0?void 0:h.getSourceFingerprint())===null||d===void 0?void 0:d.toString("hex")}/${(g=this.getOrigin())===null||g===void 0?void 0:g.getPath()}`),y+=this.getBip32Key(),this.getChildren()&&!((p=this.getChildren())===null||p===void 0)&&p.getPath()&&(y+=`/${(m=this.getChildren())===null||m===void 0?void 0:m.getPath()}`),y},this.setupMasterKey=u=>{this.master=!0,this.key=u.key,this.chainCode=u.chainCode},this.setupDeriveKey=u=>{this.master=!1,this.privateKey=u.isPrivateKey,this.key=u.key,this.chainCode=u.chainCode,this.useInfo=u.useInfo,this.origin=u.origin,this.children=u.children,this.parentFingerprint=u.parentFingerprint,this.name=u.name,this.note=u.note},this.toDataItem=()=>{const u={};if(this.master)u[o.is_master]=!0,u[o.key_data]=this.key,u[o.chain_code]=this.chainCode;else{if(this.privateKey!==void 0&&(u[o.is_private]=this.privateKey),u[o.key_data]=this.key,this.chainCode&&(u[o.chain_code]=this.chainCode),this.useInfo){const f=this.useInfo.toDataItem();f.setTag(this.useInfo.getRegistryType().getTag()),u[o.use_info]=f}if(this.origin){const f=this.origin.toDataItem();f.setTag(this.origin.getRegistryType().getTag()),u[o.origin]=f}if(this.children){const f=this.children.toDataItem();f.setTag(this.children.getRegistryType().getTag()),u[o.children]=f}this.parentFingerprint&&(u[o.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==void 0&&(u[o.name]=this.name),this.note!==void 0&&(u[o.note]=this.note)}return new n.DataItem(u)},l.isMaster?this.setupMasterKey(l):this.setupDeriveKey(l)}};return Ap.CryptoHDKey=a,a.fromDataItem=c=>{const l=c.getData(),u=!!l[o.is_master],f=l[o.is_private],h=l[o.key_data],d=l[o.chain_code],g=l[o.use_info]?e.CryptoCoinInfo.fromDataItem(l[o.use_info]):void 0,p=l[o.origin]?t.CryptoKeypath.fromDataItem(l[o.origin]):void 0,m=l[o.children]?t.CryptoKeypath.fromDataItem(l[o.children]):void 0,y=l[o.parent_fingerprint];let v;y&&(v=Xe.alloc(4),v.writeUInt32BE(y,0));const b=l[o.name],_=l[o.note];return new a({isMaster:u,isPrivateKey:f,key:h,chainCode:d,useInfo:g,origin:p,children:m,parentFingerprint:v,name:b,note:_})},a.fromCBOR=c=>{const l=(0,n.decodeToDataItem)(c);return a.fromDataItem(l)},Ap}var kp={},H8;function Cv(){if(H8)return kp;H8=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.CryptoECKey=void 0;const r=Li(),e=_s(),t=Fi();var n;(function(s){s[s.curve=1]="curve",s[s.private=2]="private",s[s.data=3]="data"})(n||(n={}));let i=class extends e.RegistryItem{constructor(o){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>t.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const a={};return this.curve&&(a[n.curve]=this.curve),this.privateKey!==void 0&&(a[n.private]=this.privateKey),a[n.data]=this.data,new r.DataItem(a)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=o.data,this.curve=o.curve,this.privateKey=o.privateKey||void 0}};return kp.CryptoECKey=i,i.fromDataItem=s=>{const o=s.getData(),a=o[n.curve],c=o[n.private],l=o[n.data];if(!l)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${s}`);return new i({data:l,curve:a,privateKey:c})},i.fromCBOR=s=>{const o=(0,r.decodeToDataItem)(s);return i.fromDataItem(o)},kp}var Pp={},W8;function Lpe(){if(W8)return Pp;W8=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.Bytes=void 0;const r=Li(),e=_s(),t=Fi();let n=class extends e.RegistryItem{constructor(s){super(),this.bytes=s,this.getRegistryType=()=>t.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new r.DataItem(this.bytes)}};return Pp.Bytes=n,n.fromDataItem=i=>{const s=i.getData();if(!s)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${i}`);return new n(s)},n.fromCBOR=i=>{const s=(0,r.decodeToDataItem)(i);return n.fromDataItem(s)},Pp}var Op={},Dp={},G8;function aI(){if(G8)return Dp;G8=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.MultiKey=void 0;const r=Cv(),e=gg(),t=t3(),n=_s(),i=Fi();var s;(function(a){a[a.threshold=1]="threshold",a[a.keys=2]="keys"})(s||(s={}));let o=class extends n.RegistryItem{constructor(c,l){super(),this.threshold=c,this.keys=l,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const u={};u[s.threshold]=this.threshold;const f=this.keys.map(h=>{const d=h.toDataItem();return d.setTag(h.getRegistryType().getTag()),d});return u[s.keys]=f,new t.DataItem(u)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map(u=>u.getOutputDescriptorContent()).join(",")].join(",")}};return Dp.MultiKey=o,o.fromDataItem=a=>{const c=a.getData(),l=c[s.threshold],u=c[s.keys],f=[];return u.forEach(h=>{h.getTag()===i.RegistryTypes.CRYPTO_HDKEY.getTag()?f.push(e.CryptoHDKey.fromDataItem(h)):h.getTag()===i.RegistryTypes.CRYPTO_ECKEY.getTag()&&f.push(r.CryptoECKey.fromDataItem(h))}),new o(l,f)},Dp}var Y8;function X8(){if(Y8)return Op;Y8=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.CryptoOutput=void 0;const r=Cv(),e=gg(),t=Li(),n=aI(),i=_s(),s=Fi(),o=r3();let a=class extends i.RegistryItem{constructor(l,u){super(),this.scriptExpressions=l,this.cryptoKey=u,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>{if(this.cryptoKey instanceof e.CryptoHDKey)return this.cryptoKey},this.getECKey=()=>{if(this.cryptoKey instanceof r.CryptoECKey)return this.cryptoKey},this.getMultiKey=()=>{if(this.cryptoKey instanceof n.MultiKey)return this.cryptoKey},this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=f=>f>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[f].getExpression()}(${this._toOutputDescriptor(f+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let f=this.cryptoKey.toDataItem();return(this.cryptoKey instanceof r.CryptoECKey||this.cryptoKey instanceof e.CryptoHDKey)&&f.setTag(this.cryptoKey.getRegistryType().getTag()),[...this.scriptExpressions].reverse().forEach(d=>{const g=d.getTag();f.getTag()===void 0?f.setTag(g):f=new t.DataItem(f,g)}),f}}};return Op.CryptoOutput=a,a.fromDataItem=c=>{const l=[];let u=c;for(;;){let d=u.getTag();const g=o.ScriptExpression.fromTag(d);if(g)if(l.push(g),u.getData()instanceof t.DataItem)u=u.getData(),d=u.getTag();else break;else break}const f=l.length;if(f>0&&(l[f-1].getExpression()===o.ScriptExpressions.MULTISIG.getExpression()||l[f-1].getExpression()===o.ScriptExpressions.SORTED_MULTISIG.getExpression())){const d=n.MultiKey.fromDataItem(u);return new a(l,d)}if(u.getTag()===s.RegistryTypes.CRYPTO_HDKEY.getTag()){const d=e.CryptoHDKey.fromDataItem(u);return new a(l,d)}else{const d=r.CryptoECKey.fromDataItem(u);return new a(l,d)}},a.fromCBOR=c=>{const l=(0,t.decodeToDataItem)(c);return a.fromDataItem(l)},Op}var $p={},J8;function Q8(){if(J8)return $p;J8=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.CryptoPSBT=void 0;const r=Li(),e=_s(),t=Fi();let n=class extends e.RegistryItem{constructor(s){super(),this.psbt=s,this.getRegistryType=()=>t.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new r.DataItem(this.psbt)}};return $p.CryptoPSBT=n,n.fromDataItem=i=>{const s=i.getData();if(!s)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${i}`);return new n(s)},n.fromCBOR=i=>{const s=(0,r.decodeToDataItem)(i);return n.fromDataItem(s)},$p}var Mp={},Z8;function e5(){if(Z8)return Mp;Z8=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.CryptoAccount=void 0;const r=aw(),e=Li(),t=_s(),n=Fi();var i;(function(o){o[o.masterFingerprint=1]="masterFingerprint",o[o.outputDescriptors=2]="outputDescriptors"})(i||(i={}));let s=class extends t.RegistryItem{constructor(a,c){super(),this.masterFingerprint=a,this.outputDescriptors=c,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const l={};return this.masterFingerprint&&(l[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(l[i.outputDescriptors]=this.outputDescriptors.map(u=>u.toDataItem())),new e.DataItem(l)}}};return Mp.CryptoAccount=s,s.fromDataItem=o=>{const a=o.getData(),c=Xe.alloc(4),l=a[i.masterFingerprint];l&&c.writeUInt32BE(l,0);const f=a[i.outputDescriptors].map(h=>r.CryptoOutput.fromDataItem(h));return new s(c,f)},s.fromCBOR=o=>{const a=(0,e.decodeToDataItem)(o);return s.fromDataItem(a)},Mp}var Bp={},Np={},t5;function bK(){if(t5)return Np;t5=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.UnknownURTypeError=void 0;class r extends Error{constructor(t){super(t)}}return Np.UnknownURTypeError=r,Np}var r5;function n5(){if(r5)return Bp;r5=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.URRegistryDecoder=void 0;const r=d3(),e=aw(),t=Fi(),n=bK();class i extends r.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const o=this.resultUR();switch(o.type){case t.RegistryTypes.BYTES.getType():return e.Bytes.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_HDKEY.getType():return e.CryptoHDKey.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_KEYPATH.getType():return e.CryptoKeypath.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_COIN_INFO.getType():return e.CryptoCoinInfo.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_ECKEY.getType():return e.CryptoECKey.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_OUTPUT.getType():return e.CryptoOutput.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_PSBT.getType():return e.CryptoPSBT.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_ACCOUNT.getType():return e.CryptoAccount.fromCBOR(o.cbor);default:throw new n.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${o.type} is not supported now`)}}}}return Bp.URRegistryDecoder=i,Bp}var Lp={},i5;function s5(){if(i5)return Lp;i5=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.CryptoMultiAccounts=void 0;const r=Fi(),e=gg(),t=_s(),n=Li();var i;(function(o){o[o.masterFingerprint=1]="masterFingerprint",o[o.keys=2]="keys",o[o.device=3]="device",o[o.deviceId=4]="deviceId",o[o.version=5]="version"})(i||(i={}));let s=class extends t.RegistryItem{constructor(a,c,l,u,f){super(),this.masterFingerprint=a,this.keys=c,this.device=l,this.deviceId=u,this.version=f,this.getRegistryType=()=>r.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{const h={};return this.masterFingerprint&&(h[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(h[i.keys]=this.keys.map(d=>{const g=d.toDataItem();return g.setTag(d.getRegistryType().getTag()),g})),this.device&&(h[i.device]=this.device),this.deviceId&&(h[i.deviceId]=this.deviceId),this.version&&(h[i.version]=this.version),new n.DataItem(h)}}};return Lp.CryptoMultiAccounts=s,s.fromDataItem=o=>{const a=o.getData(),c=Xe.alloc(4),l=a[i.masterFingerprint];l&&c.writeUInt32BE(l,0);const f=a[i.keys].map(p=>e.CryptoHDKey.fromDataItem(p)),h=a[i.device],d=a[i.deviceId],g=a[i.version];return new s(c,f,h,d,g)},s.fromCBOR=o=>{const a=(0,n.decodeToDataItem)(o);return s.fromDataItem(a)},Lp}var yS={},Fp={},vS={},o5;function wK(){return o5||(o5=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyDerivationSchema=r.DerivationAlgorithm=r.Curve=void 0;const e=Fi(),t=_s(),n=Li(),i=Iv();var s;(function(l){l[l.keyPath=1]="keyPath",l[l.curve=2]="curve",l[l.algo=3]="algo",l[l.chainType=4]="chainType"})(s||(s={}));var o;(function(l){l[l.secp256k1=0]="secp256k1",l[l.ed25519=1]="ed25519"})(o=r.Curve||(r.Curve={}));var a;(function(l){l[l.slip10=0]="slip10",l[l.bip32ed25519=1]="bip32ed25519"})(a=r.DerivationAlgorithm||(r.DerivationAlgorithm={}));class c extends t.RegistryItem{constructor(u,f=o.secp256k1,h=a.slip10,d){super(),this.keypath=u,this.curve=f,this.algo=h,this.chainType=d,this.getRegistryType=()=>e.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.getChainType=()=>this.chainType,this.toDataItem=()=>{const g={},p=this.getKeypath().toDataItem();return p.setTag(this.getKeypath().getRegistryType().getTag()),g[s.keyPath]=p,g[s.curve]=this.curve,g[s.algo]=this.algo,this.chainType&&(g[s.chainType]=this.chainType),new n.DataItem(g)}}}r.KeyDerivationSchema=c,c.fromDataItem=l=>{const u=l.getData(),f=i.CryptoKeypath.fromDataItem(u[s.keyPath]),h=u[s.curve],d=u[s.algo],g=u[s.chainType];return new c(f,h,d,g)},c.fromCBOR=l=>{const u=(0,n.decodeToDataItem)(l);return c.fromDataItem(u)}}(vS)),vS}var a5;function xK(){if(a5)return Fp;a5=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.KeyDerivation=void 0;const r=Fi(),e=_s(),t=Li(),n=wK();var i;(function(o){o[o.schemas=1]="schemas"})(i||(i={}));let s=class extends e.RegistryItem{constructor(a){super(),this.schemas=a,this.getRegistryType=()=>r.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{const c={};return c[i.schemas]=this.schemas.map(l=>{const u=l.toDataItem();return u.setTag(l.getRegistryType().getTag()),u}),new t.DataItem(c)}}};return Fp.KeyDerivation=s,s.fromDataItem=o=>{const c=o.getData()[i.schemas].map(l=>n.KeyDerivationSchema.fromDataItem(l));return new s(c)},s.fromCBOR=o=>{const a=(0,t.decodeToDataItem)(o);return s.fromDataItem(a)},Fp}var c5;function Fpe(){return c5||(c5=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.QRHardwareCall=r.QRHardwareCallVersion=r.QRHardwareCallType=void 0;const e=Fi(),t=_s(),n=Li(),i=xK();var s;(function(c){c[c.type=1]="type",c[c.params=2]="params",c[c.origin=3]="origin",c[c.version=4]="version"})(s||(s={}));var o;(function(c){c[c.KeyDerivation=0]="KeyDerivation"})(o=r.QRHardwareCallType||(r.QRHardwareCallType={})),function(c){c[c.V0=0]="V0",c[c.V1=1]="V1"}(r.QRHardwareCallVersion||(r.QRHardwareCallVersion={}));class a extends t.RegistryItem{constructor(l,u,f,h){super(),this.type=l,this.params=u,this.origin=f,this.version=h,this.getRegistryType=()=>e.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.getVersion=()=>this.version,this.toDataItem=()=>{const d={};d[s.type]=this.type;const g=this.params.toDataItem();return g.setTag(this.params.getRegistryType().getTag()),d[s.params]=g,this.origin&&(d[s.origin]=this.origin),this.version&&(d[s.version]=this.version),new n.DataItem(d)}}}r.QRHardwareCall=a,a.fromDataItem=c=>{const l=c.getData(),u=l[s.type]||o.KeyDerivation;let f;switch(u){case o.KeyDerivation:f=i.KeyDerivation.fromDataItem(l[s.params])}const h=l[s.origin],d=l[s.version];return new a(u,f,h,d)},a.fromCBOR=c=>{const l=(0,n.decodeToDataItem)(c);return a.fromDataItem(l)}}(yS)),yS}var bS={},l5;function Upe(){return l5||(l5=1,Object.defineProperty(bS,"__esModule",{value:!0})),bS}var u5;function aw(){return u5||(u5=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.extend=r.PathComponent=r.ScriptExpressions=r.MultiKey=r.CryptoPSBT=r.CryptoOutput=r.CryptoECKey=r.CryptoCoinInfoNetwork=r.CryptoCoinInfoType=r.CryptoCoinInfo=r.CryptoKeypath=r.CryptoMultiAccounts=r.CryptoHDKey=r.CryptoAccount=r.Bytes=r.URRegistryDecoder=r.DataItem=void 0;const e=lde;m4();const t=xc();Object.defineProperty(r,"Buffer",{enumerable:!0,get:function(){return t.Buffer}});const n=gg();Object.defineProperty(r,"CryptoHDKey",{enumerable:!0,get:function(){return n.CryptoHDKey}});const i=Iv();Object.defineProperty(r,"CryptoKeypath",{enumerable:!0,get:function(){return i.CryptoKeypath}});const s=sI();Object.defineProperty(r,"CryptoCoinInfo",{enumerable:!0,get:function(){return s.CryptoCoinInfo}}),Object.defineProperty(r,"CryptoCoinInfoType",{enumerable:!0,get:function(){return s.Type}}),Object.defineProperty(r,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return s.Network}});const o=Cv();Object.defineProperty(r,"CryptoECKey",{enumerable:!0,get:function(){return o.CryptoECKey}});const a=Lpe();Object.defineProperty(r,"Bytes",{enumerable:!0,get:function(){return a.Bytes}});const c=X8();Object.defineProperty(r,"CryptoOutput",{enumerable:!0,get:function(){return c.CryptoOutput}});const l=Q8();Object.defineProperty(r,"CryptoPSBT",{enumerable:!0,get:function(){return l.CryptoPSBT}});const u=e5();Object.defineProperty(r,"CryptoAccount",{enumerable:!0,get:function(){return u.CryptoAccount}});const f=n5();Object.defineProperty(r,"URRegistryDecoder",{enumerable:!0,get:function(){return f.URRegistryDecoder}});const h=aI();Object.defineProperty(r,"MultiKey",{enumerable:!0,get:function(){return h.MultiKey}});const d=r3();Object.defineProperty(r,"ScriptExpressions",{enumerable:!0,get:function(){return d.ScriptExpressions}});const g=oI();Object.defineProperty(r,"PathComponent",{enumerable:!0,get:function(){return g.PathComponent}});const p=_s(),m=Fi(),y=Li();var v=Li();Object.defineProperty(r,"DataItem",{enumerable:!0,get:function(){return v.DataItem}});const b=GA(),_=s5();Object.defineProperty(r,"CryptoMultiAccounts",{enumerable:!0,get:function(){return _.CryptoMultiAccounts}});const x={URRegistryDecoder:f.URRegistryDecoder,Bytes:a.Bytes,CryptoAccount:u.CryptoAccount,CryptoHDKey:n.CryptoHDKey,CryptoMultiAccounts:_.CryptoMultiAccounts,CryptoKeypath:i.CryptoKeypath,CryptoCoinInfo:s.CryptoCoinInfo,CryptoCoinInfoType:s.Type,CryptoCoinInfoNetwork:s.Network,CryptoECKey:o.CryptoECKey,CryptoOutput:c.CryptoOutput,CryptoPSBT:l.CryptoPSBT,MultiKey:h.MultiKey,ScriptExpressions:d.ScriptExpressions,PathComponent:g.PathComponent},E={addReader:y.addReader,addSemanticDecode:y.addSemanticDecode,addSemanticEncode:y.addSemanticEncode,addWriter:y.addWriter,patchTags:b.patchTags},S={RegistryTypes:m.RegistryTypes,RegistryItem:p.RegistryItem,RegistryType:m.RegistryType,decodeToDataItem:y.decodeToDataItem,encodeDataItem:y.encodeDataItem,cbor:E};r.extend=S,(0,e.__exportStar)(bK(),r),(0,e.__exportStar)(n5(),r),(0,e.__exportStar)(Li(),r),(0,e.__exportStar)(e5(),r),(0,e.__exportStar)(Q8(),r),(0,e.__exportStar)(gg(),r),(0,e.__exportStar)(s5(),r),(0,e.__exportStar)(Fpe(),r),(0,e.__exportStar)(xK(),r),(0,e.__exportStar)(wK(),r),(0,e.__exportStar)(X8(),r),(0,e.__exportStar)(sI(),r),(0,e.__exportStar)(Cv(),r),(0,e.__exportStar)(aI(),r),(0,e.__exportStar)(Iv(),r),(0,e.__exportStar)(m4(),r),(0,e.__exportStar)(oI(),r),(0,e.__exportStar)(_s(),r),(0,e.__exportStar)(Fi(),r),(0,e.__exportStar)(Upe(),r),(0,e.__exportStar)(GA(),r),r.default=x}(lx)),lx}var eo={},Bu={},Up={},f5;function _K(){if(f5)return Up;f5=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.Status=void 0;var r;return function(e){e[e.RSP_SUCCESS_CODE=0]="RSP_SUCCESS_CODE",e[e.RSP_FAILURE_CODE=1]="RSP_FAILURE_CODE",e[e.PRS_INVALID_TOTAL_PACKETS=2]="PRS_INVALID_TOTAL_PACKETS",e[e.PRS_INVALID_INDEX=3]="PRS_INVALID_INDEX",e[e.PRS_PARSING_REJECTED=4]="PRS_PARSING_REJECTED",e[e.PRS_PARSING_ERROR=5]="PRS_PARSING_ERROR",e[e.PRS_PARSING_DISALLOWED=6]="PRS_PARSING_DISALLOWED",e[e.PRS_PARSING_UNMATCHED=7]="PRS_PARSING_UNMATCHED",e[e.PRS_PARSING_MISMATCHED_WALLET=8]="PRS_PARSING_MISMATCHED_WALLET",e[e.PRS_PARSING_VERIFY_PASSWORD_ERROR=9]="PRS_PARSING_VERIFY_PASSWORD_ERROR",e[e.PRS_EXPORT_ADDRESS_UNSUPPORTED_CHAIN=10]="PRS_EXPORT_ADDRESS_UNSUPPORTED_CHAIN",e[e.PRS_EXPORT_ADDRESS_INVALID_PARAMS=11]="PRS_EXPORT_ADDRESS_INVALID_PARAMS",e[e.PRS_EXPORT_ADDRESS_ERROR=12]="PRS_EXPORT_ADDRESS_ERROR",e[e.PRS_EXPORT_ADDRESS_DISALLOWED=13]="PRS_EXPORT_ADDRESS_DISALLOWED",e[e.PRS_EXPORT_ADDRESS_REJECTED=14]="PRS_EXPORT_ADDRESS_REJECTED",e[e.PRS_EXPORT_ADDRESS_BUSY=15]="PRS_EXPORT_ADDRESS_BUSY",e[e.ERR_DEVICE_NOT_OPENED=2684354561]="ERR_DEVICE_NOT_OPENED",e[e.ERR_DEVICE_NOT_FOUND=2684354562]="ERR_DEVICE_NOT_FOUND",e[e.ERR_RESPONSE_STATUS_NOT_OK=2684354563]="ERR_RESPONSE_STATUS_NOT_OK",e[e.ERR_TIMEOUT=2684354564]="ERR_TIMEOUT",e[e.ERR_DATA_TOO_LARGE=2684354565]="ERR_DATA_TOO_LARGE",e[e.ERR_NOT_SUPPORTED=2684354566]="ERR_NOT_SUPPORTED",e[e.ERR_BUFFER_MISMATCH=2684354567]="ERR_BUFFER_MISMATCH",e[e.ERR_RECEIVED_BABBLE=2684354568]="ERR_RECEIVED_BABBLE",e[e.ERR_INVALID_PACKET_SIZE=2684354569]="ERR_INVALID_PACKET_SIZE",e[e.ERR_TRANSPORT_HAS_NOT_BEEN_SET=2684354570]="ERR_TRANSPORT_HAS_NOT_BEEN_SET",e[e.ERR_UR_INCOMPLETE=2684354571]="ERR_UR_INCOMPLETE",e[e.ERR_UR_INVALID_TYPE=2684354572]="ERR_UR_INVALID_TYPE",e[e.RSP_MAX_VALUE=4294967295]="RSP_MAX_VALUE"}(r||(Up.Status=r={})),Up}var wS={},h5;function zpe(){return h5||(h5=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.throwTransportError=r.ErrorInfo=r.TransportError=void 0;const e=_K();class t extends Error{constructor(s,o,a){super(`${s} (error_code: ${o})`),this.name="TransportError",this.transportErrorCode=o,this.details=a??"",Object.setPrototypeOf(this,new.target.prototype)}}r.TransportError=t,r.ErrorInfo={[e.Status.ERR_DEVICE_NOT_OPENED]:"The USB device cannot be connected.",[e.Status.ERR_DEVICE_NOT_FOUND]:"The USB device cannot be found.",[e.Status.ERR_RESPONSE_STATUS_NOT_OK]:"The response status is not ok.",[e.Status.ERR_TIMEOUT]:"The request timed out.",[e.Status.ERR_DATA_TOO_LARGE]:"The data is too large.",[e.Status.ERR_NOT_SUPPORTED]:"The USB device is not supported.",[e.Status.ERR_BUFFER_MISMATCH]:"The buffer mismatched.",[e.Status.ERR_RECEIVED_BABBLE]:"The USB device received babble.",[e.Status.ERR_INVALID_PACKET_SIZE]:"The packet size is invalid.",[e.Status.ERR_TRANSPORT_HAS_NOT_BEEN_SET]:"The transport has not been set.",[e.Status.ERR_UR_INCOMPLETE]:"The UR is incomplete.",[e.Status.ERR_UR_INVALID_TYPE]:"The UR type is invalid."};const n=i=>{var s;const o=(s=r.ErrorInfo[i])!==null&&s!==void 0?s:"Unknown error";throw new t(o,i)};r.throwTransportError=n}(wS)),wS}var d5;function vu(){return d5||(d5=1,function(r){var e=Bu&&Bu.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=Bu&&Bu.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(_K(),r),t(zpe(),r)}(Bu)),Bu}var Nu={},wi={},p5;function Tv(){if(p5)return wi;p5=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.isString=wi.isUint8Array=wi.generateRequestID=wi.isEmpty=wi.setUint16=wi.safeJSONparse=wi.safeJSONStringify=void 0;const r=a=>{try{return JSON.stringify(a)}catch{return""}};wi.safeJSONStringify=r;const e=a=>{try{return JSON.parse(a)}catch{return a}};wi.safeJSONparse=e;const t=(a,c,l)=>{a[c]=l>>8&255,a[c+1]=l&255};wi.setUint16=t;const n=a=>Array.isArray(a)?a.length===0:typeof a=="object"?Object.keys(a).length===0:!a;wi.isEmpty=n;const i=()=>Math.floor(Math.random()*65535);wi.generateRequestID=i;const s=a=>a instanceof Uint8Array;wi.isUint8Array=s;const o=a=>typeof a=="string";return wi.isString=o,wi}var gn={},g5;function p3(){return g5||(g5=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.OFFSET_CDATA=gn.OFFSET_LC=gn.OFFSET_P2=gn.OFFSET_P1=gn.OFFSET_INS=gn.OFFSET_CLA=gn.USBTimeout=gn.MAXUSBPackets=gn.USBPackageSize=gn.USBInterfaceNumber=gn.USBConfigurationValue=void 0,gn.USBConfigurationValue=1,gn.USBInterfaceNumber=0,gn.USBPackageSize=64,gn.MAXUSBPackets=200,gn.USBTimeout=1e3*15,gn.OFFSET_CLA=0,gn.OFFSET_INS=1,gn.OFFSET_P1=3,gn.OFFSET_P2=5,gn.OFFSET_LC=7,gn.OFFSET_CDATA=9),gn}var m5;function qpe(){if(m5)return Nu;m5=1,Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.decode=Nu.encode=void 0;const r=Tv(),e=p3(),t=vu(),n=55,i=9,s=l=>l.length===0?null:new TextDecoder("utf-8").decode(l),o=(l,u,f)=>{if((0,r.isString)(f)&&(!f||f.length===0)){const p=new Uint8Array(9);return p[e.OFFSET_CLA]=0,(0,r.setUint16)(p,e.OFFSET_INS,l),(0,r.setUint16)(p,e.OFFSET_P1,1),(0,r.setUint16)(p,e.OFFSET_P2,0),(0,r.setUint16)(p,e.OFFSET_LC,u),[p]}const h=(0,r.isString)(f)?new TextEncoder().encode(f):f,d=[],g=Math.ceil(h.length/n);for(let p=0;p<g;p++){const m=h.slice(p*n,(p+1)*n),y=i+m.length,v=new Uint8Array(y);v[e.OFFSET_CLA]=0,(0,r.setUint16)(v,e.OFFSET_INS,l),(0,r.setUint16)(v,e.OFFSET_P1,g),(0,r.setUint16)(v,e.OFFSET_P2,p),(0,r.setUint16)(v,e.OFFSET_LC,u),v.set(m,i),d.push(v)}return d};Nu.encode=o;const a=l=>{l.length<i&&(0,t.throwTransportError)(t.Status.ERR_INVALID_PACKET_SIZE);const u=new DataView(l.buffer),f=u.getUint8(0),h=u.getUint16(e.OFFSET_INS),d=u.getUint16(e.OFFSET_P1),g=u.getUint16(e.OFFSET_P2),p=u.getUint16(e.OFFSET_LC),m=l.buffer.byteLength-2,y=u.getUint16(m),v=m-e.OFFSET_CDATA,b=new Uint8Array(l.buffer,e.OFFSET_CDATA,v),_=s(b);return{cla:f,ins:h,totalPackets:d,packetIndex:g,requestID:p,data:_,status:y}},c=l=>l.map(f=>a(f)).sort(({packetIndex:f},{packetIndex:h})=>f-h).reduce((f,{data:h,status:d})=>({data:f.data+h,status:d}),{data:""});return Nu.decode=c,Nu}var zp={},y5;function v5(){return y5||(y5=1,function(r){var e=zp&&zp.__awaiter||function(m,y,v,b){function _(x){return x instanceof v?x:new v(function(E){E(x)})}return new(v||(v=Promise))(function(x,E){function S($){try{k(b.next($))}catch(J){E(J)}}function C($){try{k(b.throw($))}catch(J){E(J)}}function k($){$.done?x($.value):_($.value).then(S,C)}k((b=b.apply(m,y||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.close=r.request=r.gracefullyResetDevice=r.isSupported=r.getFirstKeystoneDevice=r.getKeystoneDevices=r.open=r.requestKeystoneDevice=r.initializeDisconnectListener=r.keystoneUSBVendorId=void 0;const t=p3(),n=Tv(),i=vu();r.keystoneUSBVendorId=4617;const s=[{vendorId:r.keystoneUSBVendorId}],o=(m,y)=>{const v=b=>{m===b.device&&(y&&y(m),(0,r.close)(m),navigator.usb.removeEventListener("disconnect",v))};navigator.usb.addEventListener("disconnect",v)};r.initializeDisconnectListener=o;function a(m){return e(this,void 0,void 0,function*(){m.configuration===null&&(yield m.selectConfiguration(t.USBConfigurationValue))})}function c(){return e(this,void 0,void 0,function*(){return yield navigator.usb.requestDevice({filters:s})})}r.requestKeystoneDevice=c;const l=m=>e(void 0,void 0,void 0,function*(){yield m.open(),yield a(m),yield d(m);try{yield m.claimInterface(t.USBInterfaceNumber)}catch(y){throw yield(0,r.close)(m),y}return m});r.open=l;function u(){return e(this,void 0,void 0,function*(){return(yield navigator.usb.getDevices()).filter(y=>y.vendorId===r.keystoneUSBVendorId)})}r.getKeystoneDevices=u;function f(){return e(this,void 0,void 0,function*(){const m=yield u();return m.length>0?m[0]:c()})}r.getFirstKeystoneDevice=f;const h=()=>e(void 0,void 0,void 0,function*(){return(!navigator?.usb||typeof navigator.usb.getDevices!="function")&&(0,i.throwTransportError)(i.Status.ERR_NOT_SUPPORTED),(0,n.isEmpty)(yield u())&&(0,i.throwTransportError)(i.Status.ERR_DEVICE_NOT_FOUND),!0});r.isSupported=h;function d(m){return e(this,void 0,void 0,function*(){try{yield m.reset()}catch(y){console.warn(y)}})}r.gracefullyResetDevice=d;const g=()=>e(void 0,void 0,void 0,function*(){const m=yield c();return yield(0,r.open)(m)});r.request=g;const p=m=>e(void 0,void 0,void 0,function*(){try{console.log("Closing device"),yield m.releaseInterface(t.USBInterfaceNumber),yield d(m),yield m.close(),console.log("Closing device done")}catch(y){console.log("in closh func"),console.warn(y)}});r.close=p}(zp)),zp}var Lu={},b5;function w5(){if(b5)return Lu;b5=1;var r=Lu&&Lu.__awaiter||function(t,n,i,s){function o(a){return a instanceof i?a:new i(function(c){c(a)})}return new(i||(i=Promise))(function(a,c){function l(h){try{f(s.next(h))}catch(d){c(d)}}function u(h){try{f(s.throw(h))}catch(d){c(d)}}function f(h){h.done?a(h.value):o(h.value).then(l,u)}f((s=s.apply(t,n||[])).next())})};Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.logMethod=void 0;function e(t,n,i){const s=i.value;return i.value=function(...o){return r(this,void 0,void 0,function*(){const a=o.map(l=>JSON.stringify(l)).join(),c=yield s.apply(this,o);return console.log(`[${new Date().toISOString()}] Call: ${n}(${a}) => ${JSON.stringify(c)}`),c})},i}return Lu.logMethod=e,Lu}var qp={},x5;function jpe(){if(x5)return qp;x5=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.Actions=void 0;var r;return function(e){e[e.CMD_ECHO_TEST=1]="CMD_ECHO_TEST",e[e.CMD_RESOLVE_UR=2]="CMD_RESOLVE_UR",e[e.CMD_CHECK_LOCK_STATUS=3]="CMD_CHECK_LOCK_STATUS",e[e.CMD_EXPORT_ADDRESS=4]="CMD_EXPORT_ADDRESS",e[e.CMD_GET_DEVICE_VERSION=5]="CMD_GET_DEVICE_VERSION"}(r||(qp.Actions=r={})),qp}var jp={},_5;function Vpe(){if(_5)return jp;_5=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.Chain=void 0;var r;return function(e){e[e.ETH=0]="ETH"}(r||(jp.Chain=r={})),jp}var S5;function Kpe(){return S5||(S5=1,function(r){var e=eo&&eo.__createBinding||(Object.create?function(_,x,E,S){S===void 0&&(S=E);var C=Object.getOwnPropertyDescriptor(x,E);(!C||("get"in C?!x.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return x[E]}}),Object.defineProperty(_,S,C)}:function(_,x,E,S){S===void 0&&(S=E),_[S]=x[E]}),t=eo&&eo.__decorate||function(_,x,E,S){var C=arguments.length,k=C<3?x:S===null?S=Object.getOwnPropertyDescriptor(x,E):S,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(_,x,E,S);else for(var J=_.length-1;J>=0;J--)($=_[J])&&(k=(C<3?$(k):C>3?$(x,E,k):$(x,E))||k);return C>3&&k&&Object.defineProperty(x,E,k),k},n=eo&&eo.__exportStar||function(_,x){for(var E in _)E!=="default"&&!Object.prototype.hasOwnProperty.call(x,E)&&e(x,_,E)},i=eo&&eo.__awaiter||function(_,x,E,S){function C(k){return k instanceof E?k:new E(function($){$(k)})}return new(E||(E=Promise))(function(k,$){function J(w){try{L(S.next(w))}catch(R){$(R)}}function j(w){try{L(S.throw(w))}catch(R){$(R)}}function L(w){w.done?k(w.value):C(w.value).then(J,j)}L((S=S.apply(_,x||[])).next())})},s=eo&&eo.__classPrivateFieldGet||function(_,x,E,S){if(E==="a"&&!S)throw new TypeError("Private accessor was defined without a getter");if(typeof x=="function"?_!==x||!S:!x.has(_))throw new TypeError("Cannot read private member from an object whose class did not declare it");return E==="m"?S:E==="a"?S.call(_):S?S.value:x.get(_)},o,a,c;Object.defineProperty(r,"__esModule",{value:!0}),r.TransportWebUSB=r.Chain=r.StatusCode=r.Actions=void 0;const l=xc(),u=vu(),f=qpe(),h=p3(),d=v5(),g=Tv(),p=w5();var m=jpe();Object.defineProperty(r,"Actions",{enumerable:!0,get:function(){return m.Actions}}),n(v5(),r);var y=vu();Object.defineProperty(r,"StatusCode",{enumerable:!0,get:function(){return y.Status}});var v=Vpe();Object.defineProperty(r,"Chain",{enumerable:!0,get:function(){return v.Chain}}),n(w5(),r),n(Tv(),r);class b{constructor(x,E){var S,C,k;o.add(this),this.endpoint=3,this.requestTimeout=h.USBTimeout,this.maxPacketSize=h.MAXUSBPackets,this.receive=($,J)=>i(this,void 0,void 0,function*(){var j,L,w,R,N,Y,z;if(!(!((j=this.device)===null||j===void 0)&&j.opened))return null;const G=[];let te=0,X=0,T=!0;do{const O=yield this.device.transferIn(this.endpoint,h.USBPackageSize);O.status==="babble"&&(0,u.throwTransportError)(u.Status.ERR_RECEIVED_BABBLE);const I=!!(!((L=O?.data)===null||L===void 0)&&L.buffer),U=((R=(w=O?.data)===null||w===void 0?void 0:w.buffer)===null||R===void 0?void 0:R.byteLength)===0;if(!(I&&!U&&new DataView(O.data.buffer).getUint16(h.OFFSET_INS)===$&&new DataView(O.data.buffer).getUint16(h.OFFSET_LC)===J)){yield this.open();continue}T=!1,G.push(l.Buffer.from(O.data.buffer)),X=new DataView(O.data.buffer).getUint16(h.OFFSET_P1),te+=1}while(te<X||T);const A=(0,f.decode)(G);if(A.status!==u.Status.RSP_SUCCESS_CODE)throw new u.TransportError(`${(Y=(N=(0,g.safeJSONparse)(A.data))===null||N===void 0?void 0:N.payload)!==null&&Y!==void 0?Y:"unknown error"}`,(z=A.status)!==null&&z!==void 0?z:u.Status.RSP_FAILURE_CODE);return(0,g.safeJSONparse)(A.data)}),this.open=()=>i(this,void 0,void 0,function*(){this.device||(this.device=yield(0,d.requestKeystoneDevice)()),yield(0,d.open)(this.device)}),this.close=()=>i(this,void 0,void 0,function*(){var $;return(($=this.device)===null||$===void 0?void 0:$.opened)&&(0,d.close)(this.device)}),this.endpoint=(S=E?.endpoint)!==null&&S!==void 0?S:this.endpoint,this.requestTimeout=(C=E?.timeout)!==null&&C!==void 0?C:this.requestTimeout,this.maxPacketSize=(k=E?.maxPacketSize)!==null&&k!==void 0?k:this.maxPacketSize,this.device=x}send(x,E){return i(this,void 0,void 0,function*(){return yield s(this,o,"m",c).call(this,x,E).finally(()=>i(this,void 0,void 0,function*(){yield(0,d.close)(this.device)}))})}}r.TransportWebUSB=b,a=b,o=new WeakSet,c=function(x,E){var S;return i(this,void 0,void 0,function*(){yield(0,d.open)(this.device),!((S=this.device)===null||S===void 0)&&S.opened||(0,u.throwTransportError)(u.Status.ERR_DEVICE_NOT_OPENED),!(0,g.isUint8Array)(E)&&!(0,g.isString)(E)&&(E=(0,g.safeJSONStringify)(E));const C=(0,g.generateRequestID)(),k=(0,f.encode)(x,C,E);this.maxPacketSize<k.length&&(0,u.throwTransportError)(u.Status.ERR_DATA_TOO_LARGE);let $;const J=new Promise((L,w)=>{$=setTimeout(()=>w(new u.TransportError(u.ErrorInfo[u.Status.ERR_TIMEOUT],u.Status.ERR_TIMEOUT)),this.requestTimeout)}),j=i(this,void 0,void 0,function*(){try{do(yield this.device.transferOut(this.endpoint,k[0])).status!=="ok"&&(0,u.throwTransportError)(u.Status.ERR_RESPONSE_STATUS_NOT_OK),k.shift();while(k.length>0);return yield this.receive(x,C)}finally{clearTimeout($)}});return Promise.race([j,J])})},b.requestPermission=()=>i(void 0,void 0,void 0,function*(){return yield(0,d.close)(yield(0,d.request)())}),b.connect=_=>i(void 0,void 0,void 0,function*(){yield(0,d.isSupported)();const x=yield(0,d.getKeystoneDevices)();let E=null;return x.length>1?E=yield(0,d.requestKeystoneDevice)():E=x[0],(0,d.initializeDisconnectListener)(E,_?.disconnectListener),new a(E,_)}),t([p.logMethod],b.prototype,"send",null)}(eo)),eo}var xS={exports:{}},_S={},E5;function Hpe(){return E5||(E5=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=aw(),t=ew;const n={SOL_SIGN_REQUEST:new e.RegistryType("sol-sign-request",1101),SOL_SIGNATURE:new e.RegistryType("sol-signature",1102),SOL_NFT_ITEM:new e.RegistryType("sol-nft-item",1104)},{decodeToDataItem:i,RegistryTypes:s}=e.extend;var o,a;(o=r.SignType||(r.SignType={}))[o.Transaction=1]="Transaction",o[o.Message=2]="Message",function(m){m[m.requestId=1]="requestId",m[m.signData=2]="signData",m[m.derivationPath=3]="derivationPath",m[m.address=4]="address",m[m.origin=5]="origin",m[m.signType=6]="signType"}(a||(a={}));class c extends e.RegistryItem{constructor(y){super(),this.getRegistryType=()=>n.SOL_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.getSignType=()=>this.signType,this.toDataItem=()=>{const v={};this.requestId&&(v[a.requestId]=new e.DataItem(this.requestId,s.UUID.getTag())),this.address&&(v[a.address]=this.address),this.origin&&(v[a.origin]=this.origin),v[a.signData]=this.signData,v[a.signType]=this.signType;const b=this.derivationPath.toDataItem();return b.setTag(this.derivationPath.getRegistryType().getTag()),v[a.derivationPath]=b,new e.DataItem(v)},this.requestId=y.requestId,this.signData=y.signData,this.derivationPath=y.derivationPath,this.address=y.address,this.origin=y.origin,this.signType=y.signType}static constructSOLRequest(y,v,b,_,x,E,S){const C=v.replace(/[m|M]\//,"").split("/"),k=new e.CryptoKeypath(C.map($=>{const J=parseInt($.replace("'",""));let j=!1;return $.endsWith("'")&&(j=!0),new e.PathComponent({index:J,hardened:j})}),Xe.from(b,"hex"));return new c({requestId:x?Xe.from(t.parse(x)):void 0,signData:y,derivationPath:k,address:E?Xe.from(E.replace("0x",""),"hex"):void 0,origin:S||void 0,signType:_})}}c.fromDataItem=m=>{const y=m.getData(),v=y[a.signData],b=e.CryptoKeypath.fromDataItem(y[a.derivationPath]),_=y[a.address]?y[a.address]:void 0,x=y[a.requestId]?y[a.requestId].getData():void 0;return new c({requestId:x,signData:v,derivationPath:b,address:_,origin:y[a.origin]?y[a.origin]:void 0,signType:y[a.signType]})},c.fromCBOR=m=>{const y=i(m);return c.fromDataItem(y)};const{RegistryTypes:l,decodeToDataItem:u}=e.extend;var f;(function(m){m[m.requestId=1]="requestId",m[m.signature=2]="signature"})(f||(f={}));class h extends e.RegistryItem{constructor(y,v){super(),this.getRegistryType=()=>n.SOL_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.toDataItem=()=>{const b={};return this.requestId&&(b[f.requestId]=new e.DataItem(this.requestId,l.UUID.getTag())),b[f.signature]=this.signature,new e.DataItem(b)},this.signature=y,this.requestId=v}}h.fromDataItem=m=>{const y=m.getData(),v=y[f.signature],b=y[f.requestId]?y[f.requestId].getData():void 0;return new h(v,b)},h.fromCBOR=m=>{const y=u(m);return h.fromDataItem(y)};const{decodeToDataItem:d}=e.extend;var g;(function(m){m[m.mintAddress=1]="mintAddress",m[m.collectionName=2]="collectionName",m[m.name=3]="name",m[m.mediaData=4]="mediaData"})(g||(g={}));class p extends e.RegistryItem{constructor(y){super(),this.getRegistryType=()=>n.SOL_NFT_ITEM,this.getName=()=>this.name,this.getMediaData=()=>this.mediaData,this.getMintAddress=()=>this.mintAddress,this.getCollectionName=()=>this.collectionName,this.toDataItem=()=>{const v={};return v[g.name]=this.name,v[g.mintAddress]=this.mintAddress,v[g.collectionName]=this.collectionName,v[g.mediaData]=this.mediaData,new e.DataItem(v)},this.name=y.name,this.mintAddress=y.mintAddress,this.collectionName=y.collectionName,this.mediaData=y.mediaData}static constructETHNFTItem(y,v,b,_){return new p({mintAddress:y,collectionName:v,mediaData:_,name:b})}}p.fromDataItem=m=>{const y=m.getData();return new p({name:y[g.name],mintAddress:y[g.mintAddress],collectionName:y[g.collectionName],mediaData:y[g.mediaData]})},p.fromCBOR=m=>{const y=d(m);return p.fromDataItem(y)},e.patchTags(Object.values(n).filter(m=>!!m.getTag()).map(m=>m.getTag())),Object.keys(e).forEach(function(m){m!=="default"&&Object.defineProperty(r,m,{enumerable:!0,get:function(){return e[m]}})}),r.SOLNFTItem=p,r.SolSignRequest=c,r.SolSignature=h}(_S)),_S}var A5;function Wpe(){return A5||(A5=1,xS.exports=Hpe()),xS.exports}var I5;function Gpe(){if(I5)return No;I5=1;var r=No&&No.__createBinding||(Object.create?function(p,m,y,v){v===void 0&&(v=y);var b=Object.getOwnPropertyDescriptor(m,y);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[y]}}),Object.defineProperty(p,v,b)}:function(p,m,y,v){v===void 0&&(v=y),p[v]=m[y]}),e=No&&No.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),t=No&&No.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var y in p)y!=="default"&&Object.prototype.hasOwnProperty.call(p,y)&&r(m,p,y);return e(m,p),m},n=No&&No.__awaiter||function(p,m,y,v){function b(_){return _ instanceof y?_:new y(function(x){x(_)})}return new(y||(y=Promise))(function(_,x){function E(k){try{C(v.next(k))}catch($){x($)}}function S(k){try{C(v.throw(k))}catch($){x($)}}function C(k){k.done?_(k.value):b(k.value).then(E,S)}C((v=v.apply(p,m||[])).next())})};Object.defineProperty(No,"__esModule",{value:!0});const i=t(ew),s=aw(),o=d3(),a=Kpe(),c=vu(),l=Wpe(),u=p=>{const y=p.replace(/[m|M]\//,"").split("/").map(v=>{const b=parseInt(v.replace("'",""),10),_=v.endsWith("'");return new s.PathComponent({index:b,hardened:_})});return new s.CryptoKeypath(y)};class f{constructor(m,y){this.transport=m,y&&(this.mfp=y)}precheck(){if(this.transport||(0,c.throwTransportError)(c.Status.ERR_TRANSPORT_HAS_NOT_BEEN_SET),!this.mfp)throw new Error("missing mfp for this wallet")}sendToDevice(m,y){return n(this,void 0,void 0,function*(){return this.transport.send(m,y)})}checkDeviceLockStatus(){return n(this,void 0,void 0,function*(){return(yield this.sendToDevice(a.Actions.CMD_CHECK_LOCK_STATUS,"")).payload})}getAddress(m,y=!1){return n(this,void 0,void 0,function*(){const v=s.Curve.ed25519,b=s.DerivationAlgorithm.slip10,_=new s.KeyDerivationSchema(u(m),v,b,"SOL"),x=new s.KeyDerivation([_]);let S=new s.QRHardwareCall(s.QRHardwareCallType.KeyDerivation,x,"Keystone USB SDK",s.QRHardwareCallVersion.V1).toUR();const C=new o.UREncoder(S,1/0).nextPart().toUpperCase(),k=yield this.sendToDevice(a.Actions.CMD_RESOLVE_UR,C);let $=d(k.payload),J=s.CryptoMultiAccounts.fromCBOR($.cbor),j=J.getKeys()[0];return this.mfp=J.getMasterFingerprint().toString("hex"),{address:j.getKey(),mfp:this.mfp}})}sign(m,y,v){return n(this,void 0,void 0,function*(){this.precheck();const b=h(y,m,this.mfp,v),_=yield this.sendToDevice(a.Actions.CMD_RESOLVE_UR,b);let x=d(_.payload);return{signature:g(x)}})}signTransaction(m,y){return n(this,void 0,void 0,function*(){return this.sign(m,y,l.SignType.Transaction)})}signOffchainMessage(m,y){return n(this,void 0,void 0,function*(){return this.sign(m,y,l.SignType.Message)})}getAppConfig(){return n(this,void 0,void 0,function*(){let y=(yield this.sendToDevice(a.Actions.CMD_GET_DEVICE_VERSION,"")).payload,v=JSON.parse(y);return{version:v.firmwareVersion,mfp:v.walletMFP}})}}No.default=f;const h=(p,m,y,v)=>{const b=i.v4(),x=l.SolSignRequest.constructSOLRequest(p,m,y,v,b).toUR();return new o.UREncoder(x,1/0).nextPart().toUpperCase()},d=p=>{const m=new o.URDecoder;return m.receivePart(p),m.isComplete()||(0,c.throwTransportError)(c.Status.ERR_UR_INCOMPLETE),m.resultUR()},g=p=>l.SolSignature.fromCBOR(p.cbor).getSignature();return No}var Ype=Gpe();const Xpe=Gs(Ype);var Fu={},Lo={},Dc={},en={},C5;function cI(){if(C5)return en;C5=1;var r={};return Object.defineProperty(en,"__esModule",{value:!0}),en.keystoneUSBProductId=en.keystoneUSBVendorId=en.OFFSET_CDATA=en.OFFSET_LC=en.OFFSET_P2=en.OFFSET_P1=en.OFFSET_INS=en.OFFSET_CLA=en.USBTimeout=en.MAXUSBPackets=en.USBPackageSize=en.USBInterfaceNumber=en.USBConfigurationValue=void 0,en.USBConfigurationValue=1,en.USBInterfaceNumber=typeof window<"u"?0:r.KEYSTONE_USB_ENV==="development"?1:0,en.USBPackageSize=64,en.MAXUSBPackets=200,en.USBTimeout=1e3*15,en.OFFSET_CLA=0,en.OFFSET_INS=1,en.OFFSET_P1=3,en.OFFSET_P2=5,en.OFFSET_LC=7,en.OFFSET_CDATA=9,en.keystoneUSBVendorId=4617,en.keystoneUSBProductId=12289,en}var Vp={},T5;function Jpe(){if(T5)return Vp;T5=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.Actions=void 0;var r;return function(e){e[e.CMD_ECHO_TEST=1]="CMD_ECHO_TEST",e[e.CMD_RESOLVE_UR=2]="CMD_RESOLVE_UR",e[e.CMD_CHECK_LOCK_STATUS=3]="CMD_CHECK_LOCK_STATUS",e[e.CMD_EXPORT_ADDRESS=4]="CMD_EXPORT_ADDRESS",e[e.CMD_GET_DEVICE_VERSION=5]="CMD_GET_DEVICE_VERSION"}(r||(Vp.Actions=r={})),Vp}var Kp={},R5;function Qpe(){if(R5)return Kp;R5=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.Chain=void 0;var r;return function(e){e[e.ETH=0]="ETH"}(r||(Kp.Chain=r={})),Kp}var _h={},k5;function Zpe(){if(k5)return _h;k5=1;var r={},e=_h&&_h.__awaiter||function(i,s,o,a){function c(l){return l instanceof o?l:new o(function(u){u(l)})}return new(o||(o=Promise))(function(l,u){function f(g){try{d(a.next(g))}catch(p){u(p)}}function h(g){try{d(a.throw(g))}catch(p){u(p)}}function d(g){g.done?l(g.value):c(g.value).then(f,h)}d((a=a.apply(i,s||[])).next())})};Object.defineProperty(_h,"__esModule",{value:!0}),_h.logMethod=n;const t=r.KEYSTONE_USB_ENV==="development";function n(i,s,o){const a=o.value;return o.value=function(...c){return e(this,void 0,void 0,function*(){const l=c.map(f=>JSON.stringify(f)).join(),u=yield a.apply(this,c);return t&&console.log(`[${new Date().toISOString()}] Call: ${s}(${l}) => ${JSON.stringify(u)}`),u})},o}return _h}var xi={},P5;function SK(){if(P5)return xi;P5=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.isString=xi.isUint8Array=xi.generateRequestID=xi.isEmpty=xi.setUint16=xi.safeJSONparse=xi.safeJSONStringify=void 0;const r=a=>{try{return JSON.stringify(a)}catch{return""}};xi.safeJSONStringify=r;const e=a=>{try{return JSON.parse(a)}catch{return a}};xi.safeJSONparse=e;const t=(a,c,l)=>{a[c]=l>>8&255,a[c+1]=l&255};xi.setUint16=t;const n=a=>Array.isArray(a)?a.length===0:typeof a=="object"?Object.keys(a).length===0:!a;xi.isEmpty=n;const i=()=>Math.floor(Math.random()*65535);xi.generateRequestID=i;const s=a=>a instanceof Uint8Array;xi.isUint8Array=s;const o=a=>typeof a=="string";return xi.isString=o,xi}var Uu={},O5;function e0e(){if(O5)return Uu;O5=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.decode=Uu.encode=void 0;const r=SK(),e=cI(),t=vu(),n=55,i=9,s=l=>l.length===0?null:new TextDecoder("utf-8").decode(l),o=(l,u,f)=>{if((0,r.isString)(f)&&(!f||f.length===0)){const p=new Uint8Array(9);return p[e.OFFSET_CLA]=0,(0,r.setUint16)(p,e.OFFSET_INS,l),(0,r.setUint16)(p,e.OFFSET_P1,1),(0,r.setUint16)(p,e.OFFSET_P2,0),(0,r.setUint16)(p,e.OFFSET_LC,u),[p]}const h=(0,r.isString)(f)?new TextEncoder().encode(f):f,d=[],g=Math.ceil(h.length/n);for(let p=0;p<g;p++){const m=h.slice(p*n,(p+1)*n),y=i+m.length,v=new Uint8Array(y);v[e.OFFSET_CLA]=0,(0,r.setUint16)(v,e.OFFSET_INS,l),(0,r.setUint16)(v,e.OFFSET_P1,g),(0,r.setUint16)(v,e.OFFSET_P2,p),(0,r.setUint16)(v,e.OFFSET_LC,u),v.set(m,i),d.push(v)}return d};Uu.encode=o;const a=l=>{l.length<i&&(0,t.throwTransportError)(t.Status.ERR_INVALID_PACKET_SIZE);const u=new DataView(l.buffer),f=u.getUint8(0),h=u.getUint16(e.OFFSET_INS),d=u.getUint16(e.OFFSET_P1),g=u.getUint16(e.OFFSET_P2),p=u.getUint16(e.OFFSET_LC),m=l.buffer.byteLength-2,y=u.getUint16(m),v=m-e.OFFSET_CDATA,b=new Uint8Array(l.buffer,e.OFFSET_CDATA,v),_=s(b);return{cla:f,ins:h,totalPackets:d,packetIndex:g,requestID:p,data:_,status:y}},c=l=>l.map(f=>a(f)).sort(({packetIndex:f},{packetIndex:h})=>f-h).reduce((f,{data:h,status:d})=>({data:f.data+h,status:d}),{data:""});return Uu.decode=c,Uu}var SS={},D5;function t0e(){return D5||(D5=1,Object.defineProperty(SS,"__esModule",{value:!0})),SS}var $5;function ES(){return $5||($5=1,function(r){var e=Dc&&Dc.__createBinding||(Object.create?function(o,a,c,l){l===void 0&&(l=c);var u=Object.getOwnPropertyDescriptor(a,c);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,l,u)}:function(o,a,c,l){l===void 0&&(l=c),o[l]=a[c]}),t=Dc&&Dc.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)};Dc&&Dc.__awaiter,Object.defineProperty(r,"__esModule",{value:!0}),r.Chain=r.StatusCode=r.Actions=void 0,cI();var n=Jpe();Object.defineProperty(r,"Actions",{enumerable:!0,get:function(){return n.Actions}});var i=vu();Object.defineProperty(r,"StatusCode",{enumerable:!0,get:function(){return i.Status}});var s=Qpe();Object.defineProperty(r,"Chain",{enumerable:!0,get:function(){return s.Chain}}),t(Zpe(),r),t(SK(),r),t(e0e(),r),t(cI(),r),t(t0e(),r)}(Dc)),Dc}var M5;function r0e(){if(M5)return Lo;M5=1;var r=Lo&&Lo.__decorate||function(x,E,S,C){var k=arguments.length,$=k<3?E:C===null?C=Object.getOwnPropertyDescriptor(E,S):C,J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(x,E,S,C);else for(var j=x.length-1;j>=0;j--)(J=x[j])&&($=(k<3?J($):k>3?J(E,S,$):J(E,S))||$);return k>3&&$&&Object.defineProperty(E,S,$),$},e=Lo&&Lo.__awaiter||function(x,E,S,C){function k($){return $ instanceof S?$:new S(function(J){J($)})}return new(S||(S=Promise))(function($,J){function j(R){try{w(C.next(R))}catch(N){J(N)}}function L(R){try{w(C.throw(R))}catch(N){J(N)}}function w(R){R.done?$(R.value):k(R.value).then(j,L)}w((C=C.apply(x,E||[])).next())})},t=Lo&&Lo.__classPrivateFieldGet||function(x,E,S,C){if(S==="a"&&!C)throw new TypeError("Private accessor was defined without a getter");if(typeof E=="function"?x!==E||!C:!E.has(x))throw new TypeError("Cannot read private member from an object whose class did not declare it");return S==="m"?C:S==="a"?C.call(x):C?C.value:E.get(x)},n,i,s;Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.TransportWebUSB=void 0,Lo.createKeystoneTransport=g;const o=ES(),a=ES(),c=ES(),l=vu(),u=xc(),f=[{vendorId:a.keystoneUSBVendorId}];class h{static getKeystoneDevices(){return e(this,void 0,void 0,function*(){return(yield navigator.usb.getDevices()).filter(S=>S.vendorId===a.keystoneUSBVendorId)})}static getFirstKeystoneDevice(){return e(this,void 0,void 0,function*(){const E=yield this.getKeystoneDevices();return E.length>0?E[0]:m()})}static isSupported(){return e(this,void 0,void 0,function*(){return(!navigator?.usb||typeof navigator.usb.getDevices!="function")&&(0,l.throwTransportError)(l.Status.ERR_NOT_SUPPORTED),(0,c.isEmpty)(yield this.getKeystoneDevices())&&(0,l.throwTransportError)(l.Status.ERR_DEVICE_NOT_FOUND),!0})}constructor(E,S){var C,k,$;n.add(this),this.endpoint=3,this.requestTimeout=a.USBTimeout,this.maxPacketSize=a.MAXUSBPackets,this.receive=(J,j)=>e(this,void 0,void 0,function*(){var L,w,R,N,Y,z,G;if(!(!((L=this.device)===null||L===void 0)&&L.opened))return null;const te=[];let X=0,T=0,A=!0;do{const I=yield this.device.transferIn(this.endpoint,a.USBPackageSize);I.status==="babble"&&(0,l.throwTransportError)(l.Status.ERR_RECEIVED_BABBLE);const U=!!(!((w=I?.data)===null||w===void 0)&&w.buffer),Z=((N=(R=I?.data)===null||R===void 0?void 0:R.buffer)===null||N===void 0?void 0:N.byteLength)===0;if(!(U&&!Z&&new DataView(I.data.buffer).getUint16(a.OFFSET_INS)===J&&new DataView(I.data.buffer).getUint16(a.OFFSET_LC)===j)){yield this.open();continue}A=!1,te.push(u.Buffer.from(I.data.buffer)),T=new DataView(I.data.buffer).getUint16(a.OFFSET_P1),X+=1}while(X<T||A);const O=(0,o.decode)(te);if(O.status!==l.Status.RSP_SUCCESS_CODE)throw new l.TransportError(`${(z=(Y=(0,c.safeJSONparse)(O.data))===null||Y===void 0?void 0:Y.payload)!==null&&z!==void 0?z:"unknown error"}`,(G=O.status)!==null&&G!==void 0?G:l.Status.RSP_FAILURE_CODE);return(0,c.safeJSONparse)(O.data)}),this.open=()=>e(this,void 0,void 0,function*(){this.device||(this.device=yield m()),yield y(this.device)}),this.close=()=>e(this,void 0,void 0,function*(){var J;!((J=this.device)===null||J===void 0)&&J.opened&&(yield _(this.device))}),this.endpoint=(C=S?.endpoint)!==null&&C!==void 0?C:this.endpoint,this.requestTimeout=(k=S?.timeout)!==null&&k!==void 0?k:this.requestTimeout,this.maxPacketSize=($=S?.maxPacketSize)!==null&&$!==void 0?$:this.maxPacketSize,this.device=E}send(E,S){return e(this,void 0,void 0,function*(){return yield t(this,n,"m",s).call(this,E,S).finally(()=>e(this,void 0,void 0,function*(){yield _(this.device)}))})}}Lo.TransportWebUSB=h,i=h,n=new WeakSet,s=function(E,S){return e(this,void 0,void 0,function*(){var C;yield y(this.device),!((C=this.device)===null||C===void 0)&&C.opened||(0,l.throwTransportError)(l.Status.ERR_DEVICE_NOT_OPENED),!(0,c.isUint8Array)(S)&&!(0,c.isString)(S)&&(S=(0,c.safeJSONStringify)(S));const k=(0,c.generateRequestID)(),$=(0,o.encode)(E,k,S);this.maxPacketSize<$.length&&(0,l.throwTransportError)(l.Status.ERR_DATA_TOO_LARGE);let J;const j=new Promise((w,R)=>{J=setTimeout(()=>R(new l.TransportError(l.ErrorInfo[l.Status.ERR_TIMEOUT],l.Status.ERR_TIMEOUT)),this.requestTimeout)}),L=e(this,void 0,void 0,function*(){try{do(yield this.device.transferOut(this.endpoint,$[0])).status!=="ok"&&(0,l.throwTransportError)(l.Status.ERR_RESPONSE_STATUS_NOT_OK),$.shift();while($.length>0);return yield this.receive(E,k)}finally{clearTimeout(J)}});return Promise.race([L,j])})},h.requestPermission=()=>e(void 0,void 0,void 0,function*(){return yield _(yield b())}),h.connect=x=>e(void 0,void 0,void 0,function*(){yield i.isSupported();const E=yield i.getKeystoneDevices();let S=null;return E.length>1?S=yield m():S=E[0],d(S,x?.disconnectListener),new i(S,x)}),r([o.logMethod],h.prototype,"send",null);const d=(x,E)=>{const S=C=>{x===C.device&&(E&&E(x),_(x),navigator.usb.removeEventListener("disconnect",S))};navigator.usb.addEventListener("disconnect",S)};function g(){return e(this,arguments,void 0,function*(x=1e5){if((yield h.getKeystoneDevices()).length<=0)try{yield h.requestPermission()}catch{throw new Error("USB_PERMISSION_NOT_AVAILABLE")}const E=yield h.connect({timeout:x});return yield E.close(),E})}function p(x){return e(this,void 0,void 0,function*(){x.configuration===null&&(yield x.selectConfiguration(a.USBConfigurationValue))})}function m(){return e(this,void 0,void 0,function*(){return yield navigator.usb.requestDevice({filters:f})})}const y=x=>e(void 0,void 0,void 0,function*(){yield x.open(),yield p(x),yield v(x);try{yield x.claimInterface(a.USBInterfaceNumber)}catch(E){throw yield _(x),E}return x});function v(x){return e(this,void 0,void 0,function*(){try{yield x.reset()}catch(E){console.warn(E)}})}const b=()=>e(void 0,void 0,void 0,function*(){const x=yield m();return yield y(x)}),_=x=>e(void 0,void 0,void 0,function*(){try{yield x.releaseInterface(a.USBInterfaceNumber),yield v(x),yield x.close()}catch(E){console.warn(E)}});return Lo}var B5;function n0e(){return B5||(B5=1,function(r){var e=Fu&&Fu.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=Fu&&Fu.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(r0e(),r)}(Fu)),Fu}var N5=n0e();class jh{static getDerivationPath(e){return e.type==="root"?"m/44'/501'":e.type==="legacy"?`m/44'/501'/${e.index}'`:`m/44'/501'/${e.index}'/0'`}static async pairDevice(){return N5.TransportWebUSB.requestPermission()}static async getSolanaApp(e){const t=await N5.TransportWebUSB.connect({timeout:12e4});return new Xpe(t,e)}static async getAddress(e){const t=this.getDerivationPath(e),n=await this.getSolanaApp(),{address:i,mfp:s}=await n.getAddress(t);return{address:jue().decode(i),mfp:s,path:t}}static async signTransaction(e,t,n,i){const{messageBytes:s,signatures:o}=_d.unmarshalTransaction(i),c=await(await this.getSolanaApp(e)).signTransaction(t,Xe.from(s));return _d.marshalTransaction(s,{...o,[n]:c.signature})}static async signMessage(e,t,n){const i=await this.getSolanaApp(e),{signature:s}=await i.signOffchainMessage(t,Xe.from(n,"utf-8"));return s}}var i0e=ye('<div class="bg-red-900/15 text-red-400 ring-1 ring-red-800 py-3 px-4 rounded-xl space-y-2">Error: '),s0e=ye('<p class="leading-5 text-yellow-400">Facing issues? Ensure that your Keystone device is unlocked and in the main page, then re-connect and re-approve the connection.'),o0e=ye('<div class="bg-zinc-900 rounded-xl flex flex-col items-center justify-center gap-6 py-10"><div class="i-tabler:loader-2 animate-spin size-12 text-zinc-500"></div><div class=text-zinc-400>Approve with your Keystone device...');const a0e=r=>{const[e,t]=$e(null);async function n(){if(t(null),r.pendingMsg.type==="keystone")try{const i=await jh.signMessage(r.pendingMsg.mfp,r.pendingMsg.path,r.pendingMsg.message);_r.approve({id:r.pendingMsg.id,isApproved:!0,signature:Br.marshalBase64(i)})}catch(i){t(i instanceof Error?i.message:"Unknown error occurred.")}}return Dr(()=>n()),[D(We,{get when(){return e()},get fallback(){return o0e()},get children(){return[(()=>{var i=i0e();return i.firstChild,ce(i,e,null),i})(),s0e()]}}),D(fs,{onApproveClick:n,onCancelClick:()=>r.setView("message"),cancelTitle:"Back",get approveTitle(){return e()===null?"Sign":"Retry"},get isApproveDisabled(){return e()===null}})]};var c0e=ye('<div class="bg-yellow-900/15 text-yellow-400 ring-1 ring-yellow-800 py-3 px-4 rounded-xl space-y-2"><div class="flex items-center gap-2"><div class="i-tabler:info-triangle size-5"></div><div class=font-semibold>Not Supported</div></div><div class=leading-5>Signing off-chain messages is not supported by Ledger yet. Please try again with a different wallet.');const l0e=r=>[c0e(),D(fs,{onApproveClick:()=>{},onCancelClick:()=>r.setView("message"),cancelTitle:"Back",approveTitle:"Sign",isApproveDisabled:!0})];var u0e=ye('<p class="text-zinc-400 leading-5">Signing the following message will prove you have ownership of your wallet:'),f0e=ye('<div class="py-3 px-4 bg-zinc-900 rounded-xl leading-5 whitespace-pre-line break-words"><div>'),h0e=ye('<div class="flex-1 flex items-end"><div class="flex-1 text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">This wallet is read-only and cannot perform any actions.');const d0e=r=>{async function e(t){if(!t||r.pendingMsg.type==="standalone"||r.pendingMsg.type==="mnemonic"||r.pendingMsg.type==="privy"||r.pendingMsg.type==="readonly")return _r.approve({id:r.pendingMsg.id,isApproved:t});r.setView(r.pendingMsg.type)}return[u0e(),(()=>{var t=f0e(),n=t.firstChild;return ce(n,()=>r.pendingMsg.message),t})(),D(We,{get when(){return r.pendingMsg.type==="readonly"},get children(){return h0e()}}),D(fs,{onApproveClick:()=>e(!0),onCancelClick:()=>e(!1),approveTitle:"Sign",get isApproveDisabled(){return r.pendingMsg.type==="readonly"}})]};var p0e=ye('<div class="bg-yellow-900/15 text-yellow-400 ring-1 ring-yellow-800 py-3 px-4 rounded-xl space-y-2"><div class="flex items-center gap-2"><div class="i-tabler:info-triangle size-5"></div><div class=font-semibold>Not Supported</div></div><div class=leading-5>Signing off-chain messages is not supported by Trezor yet. Please try again with a different wallet.');const g0e=r=>[p0e(),D(fs,{onApproveClick:()=>{},onCancelClick:()=>r.setView("message"),cancelTitle:"Back",approveTitle:"Sign",isApproveDisabled:!0})];var m0e=ye('<div class="flex-1 p-4 space-y-4 flex flex-col">');const y0e=()=>{const r=oV(),[e]=ET(r,i=>_r.getPendingMessage({id:i})),[t,n]=$e("message");return(()=>{var i=m0e();return ce(i,D(JR,{title:"Sign Message"}),null),ce(i,D(We,{get when(){return e.latest},children:s=>D(yr,{get children(){return[D(Ne,{get when(){return t()==="message"},get children(){return D(d0e,{setView:n,get pendingMsg(){return s()}})}}),D(Ne,{get when(){return t()==="ledger"},get children(){return D(l0e,{setView:n,get pendingMsg(){return s()}})}}),D(Ne,{get when(){return t()==="keystone"},get children(){return D(a0e,{setView:n,get pendingMsg(){return s()}})}}),D(Ne,{get when(){return t()==="trezor"},get children(){return D(g0e,{setView:n})}})]}})}),null),i})()};var v0e=ye('<div class="bg-red-900/15 text-red-400 ring-1 ring-red-800 py-3 px-4 rounded-xl space-y-2">Error: '),b0e=ye('<p class="leading-5 text-yellow-400">Facing issues? Ensure that your Keystone device is unlocked and in the main page, then re-connect and re-approve the connection.'),w0e=ye('<div class="bg-zinc-900 rounded-xl flex flex-col items-center justify-center gap-6 py-10"><div class="i-tabler:loader-2 animate-spin size-12 text-zinc-500"></div><div class=text-zinc-400>Approve with your Keystone device...');const x0e=r=>{const[e,t]=$e(null);async function n(){if(t(null),r.pendingTx.type==="keystone")try{const i=await jh.signTransaction(r.pendingTx.mfp,r.pendingTx.path,r.pendingTx.signerAddress,r.pendingTx.transaction);_r.approve({id:r.pendingTx.id,isApproved:!0,signature:Br.marshalBase64(i)})}catch(i){t(i instanceof Error?i.message:"Unknown error occurred.")}}return Dr(()=>n()),[D(We,{get when(){return e()},get fallback(){return w0e()},get children(){return[(()=>{var i=v0e();return i.firstChild,ce(i,e,null),i})(),b0e()]}}),D(fs,{onApproveClick:n,onCancelClick:()=>r.setView("simulation"),cancelTitle:"Back",get approveTitle(){return e()===null?"Sign":"Retry"},get isApproveDisabled(){return e()===null}})]};var L5={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var F5;function _0e(){if(F5)return L5;F5=1;var r;return function(e){(function(t){var n=typeof globalThis=="object"?globalThis:typeof gi=="object"?gi:typeof self=="object"?self:typeof this=="object"?this:c(),i=s(e);typeof n.Reflect<"u"&&(i=s(n.Reflect,i)),t(i,n),typeof n.Reflect>"u"&&(n.Reflect=e);function s(l,u){return function(f,h){Object.defineProperty(l,f,{configurable:!0,writable:!0,value:h}),u&&u(f,h)}}function o(){try{return Function("return this;")()}catch{}}function a(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return o()||a()}})(function(t,n){var i=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",o=s&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=s&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",l={__proto__:[]}instanceof Array,u=!c&&!l,f={create:c?function(){return M(Object.create(null))}:l?function(){return M({__proto__:null})}:function(){return M({})},has:u?function(P,ee){return i.call(P,ee)}:function(P,ee){return ee in P},get:u?function(P,ee){return i.call(P,ee)?P[ee]:void 0}:function(P,ee){return P[ee]}},h=Object.getPrototypeOf(Function),d=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:V(),g=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Q(),p=typeof WeakMap=="function"?WeakMap:K(),m=s?Symbol.for("@reflect-metadata:registry"):void 0,y=xe(),v=Ae(y);function b(P,ee,pe,be){if(A(pe)){if(!H(P))throw new TypeError;if(!le(ee))throw new TypeError;return L(P,ee)}else{if(!H(P))throw new TypeError;if(!U(ee))throw new TypeError;if(!U(be)&&!A(be)&&!O(be))throw new TypeError;return O(be)&&(be=void 0),pe=F(pe),w(P,ee,pe,be)}}t("decorate",b);function _(P,ee){function pe(be,fe){if(!U(be))throw new TypeError;if(!A(fe)&&!we(fe))throw new TypeError;G(P,ee,be,fe)}return pe}t("metadata",_);function x(P,ee,pe,be){if(!U(pe))throw new TypeError;return A(be)||(be=F(be)),G(P,ee,pe,be)}t("defineMetadata",x);function E(P,ee,pe){if(!U(ee))throw new TypeError;return A(pe)||(pe=F(pe)),R(P,ee,pe)}t("hasMetadata",E);function S(P,ee,pe){if(!U(ee))throw new TypeError;return A(pe)||(pe=F(pe)),N(P,ee,pe)}t("hasOwnMetadata",S);function C(P,ee,pe){if(!U(ee))throw new TypeError;return A(pe)||(pe=F(pe)),Y(P,ee,pe)}t("getMetadata",C);function k(P,ee,pe){if(!U(ee))throw new TypeError;return A(pe)||(pe=F(pe)),z(P,ee,pe)}t("getOwnMetadata",k);function $(P,ee){if(!U(P))throw new TypeError;return A(ee)||(ee=F(ee)),te(P,ee)}t("getMetadataKeys",$);function J(P,ee){if(!U(P))throw new TypeError;return A(ee)||(ee=F(ee)),X(P,ee)}t("getOwnMetadataKeys",J);function j(P,ee,pe){if(!U(ee))throw new TypeError;if(A(pe)||(pe=F(pe)),!U(ee))throw new TypeError;A(pe)||(pe=F(pe));var be=se(ee,pe,!1);return A(be)?!1:be.OrdinaryDeleteMetadata(P,ee,pe)}t("deleteMetadata",j);function L(P,ee){for(var pe=P.length-1;pe>=0;--pe){var be=P[pe],fe=be(ee);if(!A(fe)&&!O(fe)){if(!le(fe))throw new TypeError;ee=fe}}return ee}function w(P,ee,pe,be){for(var fe=P.length-1;fe>=0;--fe){var Ee=P[fe],Le=Ee(ee,pe,be);if(!A(Le)&&!O(Le)){if(!U(Le))throw new TypeError;be=Le}}return be}function R(P,ee,pe){var be=N(P,ee,pe);if(be)return!0;var fe=Ce(ee);return O(fe)?!1:R(P,fe,pe)}function N(P,ee,pe){var be=se(ee,pe,!1);return A(be)?!1:he(be.OrdinaryHasOwnMetadata(P,ee,pe))}function Y(P,ee,pe){var be=N(P,ee,pe);if(be)return z(P,ee,pe);var fe=Ce(ee);if(!O(fe))return Y(P,fe,pe)}function z(P,ee,pe){var be=se(ee,pe,!1);if(!A(be))return be.OrdinaryGetOwnMetadata(P,ee,pe)}function G(P,ee,pe,be){var fe=se(pe,be,!0);fe.OrdinaryDefineOwnMetadata(P,ee,pe,be)}function te(P,ee){var pe=X(P,ee),be=Ce(P);if(be===null)return pe;var fe=te(be,ee);if(fe.length<=0)return pe;if(pe.length<=0)return fe;for(var Ee=new g,Le=[],Ke=0,je=pe;Ke<je.length;Ke++){var Pe=je[Ke],tt=Ee.has(Pe);tt||(Ee.add(Pe),Le.push(Pe))}for(var gt=0,lt=fe;gt<lt.length;gt++){var Pe=lt[gt],tt=Ee.has(Pe);tt||(Ee.add(Pe),Le.push(Pe))}return Le}function X(P,ee){var pe=se(P,ee,!1);return pe?pe.OrdinaryOwnMetadataKeys(P,ee):[]}function T(P){if(P===null)return 1;switch(typeof P){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return P===null?1:6;default:return 6}}function A(P){return P===void 0}function O(P){return P===null}function I(P){return typeof P=="symbol"}function U(P){return typeof P=="object"?P!==null:typeof P=="function"}function Z(P,ee){switch(T(P)){case 0:return P;case 1:return P;case 2:return P;case 3:return P;case 4:return P;case 5:return P}var pe="string",be=B(P,o);if(be!==void 0){var fe=be.call(P,pe);if(U(fe))throw new TypeError;return fe}return oe(P)}function oe(P,ee){var pe,be,fe;{var Ee=P.toString;if(ue(Ee)){var be=Ee.call(P);if(!U(be))return be}var pe=P.valueOf;if(ue(pe)){var be=pe.call(P);if(!U(be))return be}}throw new TypeError}function he(P){return!!P}function re(P){return""+P}function F(P){var ee=Z(P);return I(ee)?ee:re(ee)}function H(P){return Array.isArray?Array.isArray(P):P instanceof Object?P instanceof Array:Object.prototype.toString.call(P)==="[object Array]"}function ue(P){return typeof P=="function"}function le(P){return typeof P=="function"}function we(P){switch(T(P)){case 3:return!0;case 4:return!0;default:return!1}}function ie(P,ee){return P===ee||P!==P&&ee!==ee}function B(P,ee){var pe=P[ee];if(pe!=null){if(!ue(pe))throw new TypeError;return pe}}function q(P){var ee=B(P,a);if(!ue(ee))throw new TypeError;var pe=ee.call(P);if(!U(pe))throw new TypeError;return pe}function ne(P){return P.value}function de(P){var ee=P.next();return ee.done?!1:ee}function _e(P){var ee=P.return;ee&&ee.call(P)}function Ce(P){var ee=Object.getPrototypeOf(P);if(typeof P!="function"||P===h||ee!==h)return ee;var pe=P.prototype,be=pe&&Object.getPrototypeOf(pe);if(be==null||be===Object.prototype)return ee;var fe=be.constructor;return typeof fe!="function"||fe===P?ee:fe}function Me(){var P;!A(m)&&typeof n.Reflect<"u"&&!(m in n.Reflect)&&typeof n.Reflect.defineMetadata=="function"&&(P=Oe(n.Reflect));var ee,pe,be,fe=new p,Ee={registerProvider:Le,getProvider:je,setProvider:tt};return Ee;function Le(gt){if(!Object.isExtensible(Ee))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case P===gt:break;case A(ee):ee=gt;break;case ee===gt:break;case A(pe):pe=gt;break;case pe===gt:break;default:be===void 0&&(be=new g),be.add(gt);break}}function Ke(gt,lt){if(!A(ee)){if(ee.isProviderFor(gt,lt))return ee;if(!A(pe)){if(pe.isProviderFor(gt,lt))return ee;if(!A(be))for(var Et=q(be);;){var Er=de(Et);if(!Er)return;var nr=ne(Er);if(nr.isProviderFor(gt,lt))return _e(Et),nr}}}if(!A(P)&&P.isProviderFor(gt,lt))return P}function je(gt,lt){var Et=fe.get(gt),Er;return A(Et)||(Er=Et.get(lt)),A(Er)&&(Er=Ke(gt,lt),A(Er)||(A(Et)&&(Et=new d,fe.set(gt,Et)),Et.set(lt,Er))),Er}function Pe(gt){if(A(gt))throw new TypeError;return ee===gt||pe===gt||!A(be)&&be.has(gt)}function tt(gt,lt,Et){if(!Pe(Et))throw new Error("Metadata provider not registered.");var Er=je(gt,lt);if(Er!==Et){if(!A(Er))return!1;var nr=fe.get(gt);A(nr)&&(nr=new d,fe.set(gt,nr)),nr.set(lt,Et)}return!0}}function xe(){var P;return!A(m)&&U(n.Reflect)&&Object.isExtensible(n.Reflect)&&(P=n.Reflect[m]),A(P)&&(P=Me()),!A(m)&&U(n.Reflect)&&Object.isExtensible(n.Reflect)&&Object.defineProperty(n.Reflect,m,{enumerable:!1,configurable:!1,writable:!1,value:P}),P}function Ae(P){var ee=new p,pe={isProviderFor:function(Pe,tt){var gt=ee.get(Pe);return A(gt)?!1:gt.has(tt)},OrdinaryDefineOwnMetadata:Le,OrdinaryHasOwnMetadata:fe,OrdinaryGetOwnMetadata:Ee,OrdinaryOwnMetadataKeys:Ke,OrdinaryDeleteMetadata:je};return y.registerProvider(pe),pe;function be(Pe,tt,gt){var lt=ee.get(Pe),Et=!1;if(A(lt)){if(!gt)return;lt=new d,ee.set(Pe,lt),Et=!0}var Er=lt.get(tt);if(A(Er)){if(!gt)return;if(Er=new d,lt.set(tt,Er),!P.setProvider(Pe,tt,pe))throw lt.delete(tt),Et&&ee.delete(Pe),new Error("Wrong provider for target.")}return Er}function fe(Pe,tt,gt){var lt=be(tt,gt,!1);return A(lt)?!1:he(lt.has(Pe))}function Ee(Pe,tt,gt){var lt=be(tt,gt,!1);if(!A(lt))return lt.get(Pe)}function Le(Pe,tt,gt,lt){var Et=be(gt,lt,!0);Et.set(Pe,tt)}function Ke(Pe,tt){var gt=[],lt=be(Pe,tt,!1);if(A(lt))return gt;for(var Et=lt.keys(),Er=q(Et),nr=0;;){var ar=de(Er);if(!ar)return gt.length=nr,gt;var hs=ne(ar);try{gt[nr]=hs}catch(Kr){try{_e(Er)}finally{throw Kr}}nr++}}function je(Pe,tt,gt){var lt=be(tt,gt,!1);if(A(lt)||!lt.delete(Pe))return!1;if(lt.size===0){var Et=ee.get(tt);A(Et)||(Et.delete(gt),Et.size===0&&ee.delete(Et))}return!0}}function Oe(P){var ee=P.defineMetadata,pe=P.hasOwnMetadata,be=P.getOwnMetadata,fe=P.getOwnMetadataKeys,Ee=P.deleteMetadata,Le=new p,Ke={isProviderFor:function(je,Pe){var tt=Le.get(je);return!A(tt)&&tt.has(Pe)?!0:fe(je,Pe).length?(A(tt)&&(tt=new g,Le.set(je,tt)),tt.add(Pe),!0):!1},OrdinaryDefineOwnMetadata:ee,OrdinaryHasOwnMetadata:pe,OrdinaryGetOwnMetadata:be,OrdinaryOwnMetadataKeys:fe,OrdinaryDeleteMetadata:Ee};return Ke}function se(P,ee,pe){var be=y.getProvider(P,ee);if(!A(be))return be;if(pe){if(y.setProvider(P,ee,v))return v;throw new Error("Illegal state.")}}function V(){var P={},ee=[],pe=function(){function Ke(je,Pe,tt){this._index=0,this._keys=je,this._values=Pe,this._selector=tt}return Ke.prototype["@@iterator"]=function(){return this},Ke.prototype[a]=function(){return this},Ke.prototype.next=function(){var je=this._index;if(je>=0&&je<this._keys.length){var Pe=this._selector(this._keys[je],this._values[je]);return je+1>=this._keys.length?(this._index=-1,this._keys=ee,this._values=ee):this._index++,{value:Pe,done:!1}}return{value:void 0,done:!0}},Ke.prototype.throw=function(je){throw this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),je},Ke.prototype.return=function(je){return this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),{value:je,done:!0}},Ke}(),be=function(){function Ke(){this._keys=[],this._values=[],this._cacheKey=P,this._cacheIndex=-2}return Object.defineProperty(Ke.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ke.prototype.has=function(je){return this._find(je,!1)>=0},Ke.prototype.get=function(je){var Pe=this._find(je,!1);return Pe>=0?this._values[Pe]:void 0},Ke.prototype.set=function(je,Pe){var tt=this._find(je,!0);return this._values[tt]=Pe,this},Ke.prototype.delete=function(je){var Pe=this._find(je,!1);if(Pe>=0){for(var tt=this._keys.length,gt=Pe+1;gt<tt;gt++)this._keys[gt-1]=this._keys[gt],this._values[gt-1]=this._values[gt];return this._keys.length--,this._values.length--,ie(je,this._cacheKey)&&(this._cacheKey=P,this._cacheIndex=-2),!0}return!1},Ke.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=P,this._cacheIndex=-2},Ke.prototype.keys=function(){return new pe(this._keys,this._values,fe)},Ke.prototype.values=function(){return new pe(this._keys,this._values,Ee)},Ke.prototype.entries=function(){return new pe(this._keys,this._values,Le)},Ke.prototype["@@iterator"]=function(){return this.entries()},Ke.prototype[a]=function(){return this.entries()},Ke.prototype._find=function(je,Pe){if(!ie(this._cacheKey,je)){this._cacheIndex=-1;for(var tt=0;tt<this._keys.length;tt++)if(ie(this._keys[tt],je)){this._cacheIndex=tt;break}}return this._cacheIndex<0&&Pe&&(this._cacheIndex=this._keys.length,this._keys.push(je),this._values.push(void 0)),this._cacheIndex},Ke}();return be;function fe(Ke,je){return Ke}function Ee(Ke,je){return je}function Le(Ke,je){return[Ke,je]}}function Q(){var P=function(){function ee(){this._map=new d}return Object.defineProperty(ee.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ee.prototype.has=function(pe){return this._map.has(pe)},ee.prototype.add=function(pe){return this._map.set(pe,pe),this},ee.prototype.delete=function(pe){return this._map.delete(pe)},ee.prototype.clear=function(){this._map.clear()},ee.prototype.keys=function(){return this._map.keys()},ee.prototype.values=function(){return this._map.keys()},ee.prototype.entries=function(){return this._map.entries()},ee.prototype["@@iterator"]=function(){return this.keys()},ee.prototype[a]=function(){return this.keys()},ee}();return P}function K(){var P=16,ee=f.create(),pe=be();return function(){function je(){this._key=be()}return je.prototype.has=function(Pe){var tt=fe(Pe,!1);return tt!==void 0?f.has(tt,this._key):!1},je.prototype.get=function(Pe){var tt=fe(Pe,!1);return tt!==void 0?f.get(tt,this._key):void 0},je.prototype.set=function(Pe,tt){var gt=fe(Pe,!0);return gt[this._key]=tt,this},je.prototype.delete=function(Pe){var tt=fe(Pe,!1);return tt!==void 0?delete tt[this._key]:!1},je.prototype.clear=function(){this._key=be()},je}();function be(){var je;do je="@@WeakMap@@"+Ke();while(f.has(ee,je));return ee[je]=!0,je}function fe(je,Pe){if(!i.call(je,pe)){if(!Pe)return;Object.defineProperty(je,pe,{value:f.create()})}return je[pe]}function Ee(je,Pe){for(var tt=0;tt<Pe;++tt)je[tt]=Math.random()*255|0;return je}function Le(je){if(typeof Uint8Array=="function"){var Pe=new Uint8Array(je);return typeof crypto<"u"?crypto.getRandomValues(Pe):typeof msCrypto<"u"?msCrypto.getRandomValues(Pe):Ee(Pe,je),Pe}return Ee(new Array(je),je)}function Ke(){var je=Le(P);je[6]=je[6]&79|64,je[8]=je[8]&191|128;for(var Pe="",tt=0;tt<P;++tt){var gt=je[tt];(tt===4||tt===6||tt===8)&&(Pe+="-"),gt<16&&(Pe+="0"),Pe+=gt.toString(16).toLowerCase()}return Pe}}function M(P){return P.__=void 0,delete P.__,P}})}(r||(r={})),L5}_0e();let S0e=class{cla;ins;p1;p2;data;constructor(e,t,n,i,s){this.cla=e,this.ins=t,this.p1=n,this.p2=i,this.data=s??new Uint8Array}getRawApdu(){const e=Uint8Array.from([this.cla,this.ins,this.p1,this.p2,this.data.length]),t=new Uint8Array(e.length+this.data.length);return t.set(e,0),this.data.length>0&&t.set(this.data,e.length),t}};function li(r){return typeof r=="string"&&/^0x[0-9a-fA-F]*$/.test(r)}function uf(r){if(r.startsWith("0x")&&(r=r.slice(2)),r.length===0)return new Uint8Array;if(r.length%2!==0&&(r="0"+r),/^[0-9a-fA-F]*$/.test(r)===!1)return null;const e=r.match(/.{1,2}/g)?.map(t=>parseInt(t,16));return!e||e.some(isNaN)?null:new Uint8Array(e)}function mg(r,e=!0){return`${e?"0x":""}${Array.from(r,t=>t.toString(16).padStart(2,"0")).join("")}`}let AS=class{_tag="ValueOverflow";originalError;message;constructor(e,t=nd){this.message=`Value overflow for ${e}, max is ${t}`}},Wm=class{_tag="DataOverflow";message;originalError;constructor(e,t=0){this.message=t===0?`this.data is already full (value: ${e})`:`this.data will overflow with "${e}", remaining bytes: ${t}`}},U5=class{_tag="HexaString";message;originalError;constructor(e){this.message=`Invalid encoded hexa string or length is null: ${e}`}};const E0e=4294967295;let Ed=class{constructor(e=E0e){this.maxPayloadSize=e}data=new Uint8Array;errors=[];build=()=>this.data;tryBuild=()=>this.hasErrors()?void 0:this.data;add8BitUIntToData=e=>this.addNumberToData(e,8n,!1,!1);add16BitUIntToData=(e,t=!0)=>this.addNumberToData(e,16n,!1,t);add32BitUIntToData=(e,t=!0)=>this.addNumberToData(e,32n,!1,t);add64BitUIntToData=(e,t=!0)=>this.addNumberToData(e,64n,!1,t);add128BitUIntToData=(e,t=!0)=>this.addNumberToData(e,128n,!1,t);add256BitUIntToData=(e,t=!0)=>this.addNumberToData(e,256n,!1,t);add16BitIntToData=(e,t=!0)=>this.addNumberToData(e,16n,!0,t);add32BitIntToData=(e,t=!0)=>this.addNumberToData(e,32n,!0,t);add64BitIntToData=(e,t=!0)=>this.addNumberToData(e,64n,!0,t);add128BitIntToData=(e,t=!0)=>this.addNumberToData(e,128n,!0,t);add256BitIntToData=(e,t=!0)=>this.addNumberToData(e,256n,!0,t);addBufferToData=e=>this.hasEnoughLengthRemaining(e)?(this.data=Uint8Array.from([...this.data,...e]),this):(this.errors.push(new Wm(e.toString())),this);addHexaStringToData=e=>{const t=uf(e);return t===null||t.length===0?(this.errors.push(new U5(e)),this):(this.addBufferToData(t),this)};addAsciiStringToData=e=>{const t=new TextEncoder().encode(e);return this.addBufferToData(t),this};encodeInLVFromHexa=e=>{const t=uf(e);return t===null||t.length===0?(this.errors.push(new U5(e)),this):this.hasEnoughLengthRemaining(t,!0)?(this.add8BitUIntToData(t.length),this.addBufferToData(t),this):(this.errors.push(new Wm(e)),this)};encodeInLVFromBuffer=e=>this.hasEnoughLengthRemaining(e,!0)?(this.add8BitUIntToData(e.length),this.addBufferToData(e),this):(this.errors.push(new Wm(e.toString())),this);encodeInLVFromAscii=e=>this.hasEnoughLengthRemaining(e,!0)?(this.add8BitUIntToData(e.length),this.addAsciiStringToData(e),this):(this.errors.push(new Wm(e)),this);encodeInTLVFromAscii=(e,t)=>(this.add8BitUIntToData(e),this.encodeInLVFromAscii(t));encodeInTLVFromHexa=(e,t)=>(this.add8BitUIntToData(e),this.encodeInLVFromHexa(t));encodeInTLVFromBuffer=(e,t)=>(this.add8BitUIntToData(e),this.encodeInLVFromBuffer(t));encodeInTLVFromUInt8=(e,t)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(1),this.add8BitUIntToData(t));encodeInTLVFromUInt16=(e,t,n=!0)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(2),this.add16BitUIntToData(t,n));encodeInTLVFromUInt32=(e,t,n=!0)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(4),this.add32BitUIntToData(t,n));encodeInTLVFromUInt64=(e,t,n=!0)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(8),this.add64BitUIntToData(t,n));getAvailablePayloadLength=()=>this.maxPayloadSize-this.data.length;getErrors=()=>this.errors;hasErrors=()=>this.errors.length!==0;hasEnoughLengthRemaining=(e,t=!1)=>this.data.length+e.length+(t?1:0)<=this.maxPayloadSize;addNumberToData(e,t,n,i){let s=this.checkBoundsAndConvert(e,t,n);if(s===void 0)return this;const o=Number(t)/8,a=new Uint8Array(o);if(i)for(let c=o-1;c>=0;c--)a[c]=Number(s&0xffn),s>>=8n;else for(let c=0;c<o;c++)a[c]=Number(s&0xffn),s>>=8n;return this.addBufferToData(a)}checkBoundsAndConvert(e,t,n){if(typeof e=="number"){if(!Number.isInteger(e)||e>Number.MAX_SAFE_INTEGER){this.errors.push(new AS(e.toString()));return}e=BigInt(e)}if(n){const i=1n<<t-1n;if(e>=i||e<-i){this.errors.push(new AS(e.toString(),i-1n));return}if(e<0n){const s=(1n<<t)-1n;e=-e,e=(~e&s)+1n}}else{const i=1n<<t;if(e<0||e>=i){this.errors.push(new AS(e.toString(),i-1n));return}}return e}};const nd=255;let Ma=class{_ins;_cla;_p1;p2;data=new Ed(nd);constructor({ins:e,cla:t,p1:n,p2:i}){this._cla=t&255,this._ins=e&255,this._p1=n&255,this.p2=i&255}build=()=>new S0e(this._cla,this._ins,this._p1,this.p2,this.data.build());add8BitUIntToData=e=>(this.data.add8BitUIntToData(e),this);add16BitUIntToData=e=>(this.data.add16BitUIntToData(e),this);add32BitUIntToData=e=>(this.data.add32BitUIntToData(e),this);addBufferToData=e=>(this.data.addBufferToData(e),this);addHexaStringToData=e=>(this.data.addHexaStringToData(e),this);addAsciiStringToData=e=>(this.data.addAsciiStringToData(e),this);encodeInLVFromHexa=e=>(this.data.encodeInLVFromHexa(e),this);encodeInLVFromBuffer=e=>(this.data.encodeInLVFromBuffer(e),this);encodeInLVFromAscii=e=>(this.data.encodeInLVFromAscii(e),this);getAvailablePayloadLength=()=>this.data.getAvailablePayloadLength();getErrors=()=>this.data.getErrors()},A0e=class{constructor(e){this.buffer=e}index=0;testMinimalLength(e){return e<=this.buffer.length-this.index}extract8BitUInt(){if(!this.outOfRange(1))return this.buffer[this.index++]}extract16BitUInt(e=!0){const t=this.extractNumber(16n,!1,e);return t===void 0?void 0:Number(t)}extract16BitInt(e=!0){const t=this.extractNumber(16n,!0,e);return t===void 0?void 0:Number(t)}extract32BitUInt(e=!0){const t=this.extractNumber(32n,!1,e);return t===void 0?void 0:Number(t)}extract32BitInt(e=!0){const t=this.extractNumber(32n,!0,e);return t===void 0?void 0:Number(t)}extract64BitUInt(e=!0){return this.extractNumber(64n,!1,e)}extract64BitInt(e=!0){return this.extractNumber(64n,!0,e)}extract128BitUInt(e=!0){return this.extractNumber(128n,!1,e)}extract128BitInt(e=!0){return this.extractNumber(128n,!0,e)}extract256BitUInt(e=!0){return this.extractNumber(256n,!1,e)}extract256BitInt(e=!0){return this.extractNumber(256n,!0,e)}extractFieldByLength(e){if(this.outOfRange(e))return;if(e===0)return new Uint8Array;const t=this.buffer.slice(this.index,this.index+e);return this.index+=e,t}extractFieldLVEncoded(){const e=this.extract8BitUInt();if(e===void 0)return;if(e===0)return new Uint8Array;const t=this.extractFieldByLength(e);return t===void 0&&this.index--,t}extractFieldTLVEncoded(){if(this.outOfRange(2))return;const e=this.index,t=this.extract8BitUInt(),n=this.extractFieldLVEncoded();if(t===void 0||n===void 0){this.index--;return}const i=this.index;return{tag:t,value:n,tlv:this.buffer.slice(e,i)}}encodeToHexaString(e,t=!1){if(e===void 0||e.length===0)return"";const n=mg(e);return t?n:n.slice(2)}encodeToString(e){let t="",n=0;if(!e)return t;for(;n<=e.length;){const i=e[n];i&&(t+=String.fromCharCode(i)),n++}return t}getCurrentIndex(){return this.index}resetIndex(){this.index=0}getUnparsedRemainingLength(){return this.buffer.length-this.index}outOfRange(e){return this.index+e>this.buffer.length}extractNumber(e,t,n){const i=Number(e)/8;if(this.outOfRange(i))return;let s=0n;if(n)for(let o=0;o<i;o++)s=s<<8n|BigInt(this.buffer[o+this.index]);else for(let o=i-1;o>=0;o--)s=s<<8n|BigInt(this.buffer[o+this.index]);if(t){const o=1n<<e-1n;s&o&&(s-=o<<1n)}return this.index+=i,s}},Sc=class{parser;constructor(e){this.parser=new A0e(e.data)}testMinimalLength=e=>this.parser.testMinimalLength(e);extract8BitUInt=()=>this.parser.extract8BitUInt();extract16BitUInt=()=>this.parser.extract16BitUInt();extract32BitUInt=()=>this.parser.extract32BitUInt();extractFieldByLength=e=>this.parser.extractFieldByLength(e);extractFieldLVEncoded=()=>this.parser.extractFieldLVEncoded();extractFieldTLVEncoded=()=>this.parser.extractFieldTLVEncoded();encodeToHexaString(e,t=!1){return t?this.parser.encodeToHexaString(e,!0):this.parser.encodeToHexaString(e,!1)}encodeToString=e=>this.parser.encodeToString(e);getUnparsedRemainingLength=()=>this.parser.getUnparsedRemainingLength()},Ns=class{_tag="InvalidStatusWordError";originalError;constructor(e){this.originalError=new Error(e??"Invalid status word.")}},I0e=class{_tag="InvalidResponseFormatError";originalError;constructor(e){this.originalError=new Error(e??"Invalid response format.")}};var C0e=(r=>(r.Error="ERROR",r.Success="SUCCESS",r))(C0e||{});function Ur({data:r,error:e}){return e?{status:"ERROR",error:e}:{status:"SUCCESS",data:r}}function js(r){return r.status==="SUCCESS"}let bu=class Bh{static isValidStatusCode(e){return e.length===2}static isSuccessResponse({statusCode:e}){return Bh.isValidStatusCode(e)?e[0]===144&&e[1]===0:!1}static isLockedDeviceResponse({statusCode:e}){return Bh.isValidStatusCode(e)?e[0]===85&&e[1]===21||e[0]===105&&e[1]===130||e[0]===83&&e[1]===3:!1}static isRefusedByUser({statusCode:e}){return Bh.isValidStatusCode(e)?e[0]===85&&e[1]===1||e[0]===105&&e[1]===133:!1}static isAppAlreadyInstalled({statusCode:e}){return Bh.isValidStatusCode(e)?e[0]===106&&e[1]===128||e[0]===106&&e[1]===129||e[0]===106&&e[1]===142||e[0]===106&&e[1]===143:!1}static isOutOfMemory({statusCode:e}){return Bh.isValidStatusCode(e)?e[0]===106&&e[1]===132||e[0]===106&&e[1]===133||e[0]===81&&e[1]===2||e[0]===81&&e[1]===3:!1}static isApduThatTriggersDisconnection(e){const t=new Map;return t.set("openApp",new Uint8Array([224,216,0,0])),t.set("closeApp",new Uint8Array([176,167,0,0])),Array.from(t.values()).some(n=>{for(let i=0;i<4;i++)if(n[i]!==e[i])return!1;return!0})}},g3=class{_tag;originalError;errorCode;message;constructor({tag:e,errorCode:t,originalError:n,message:i}){this._tag=e,this.originalError=n,this.errorCode=t,this.message=i??"An error occured during device exchange."}},m3=class{_tag="UnknownDeviceExchangeError";originalError;message;constructor(e){this.originalError=e,this.message="Unexpected device exchange error happened."}};const y3=(r,e)=>Object.keys(e).includes(r);let T0e=class extends g3{constructor(e){super({tag:"GlobalCommandError",...e})}};const z5={5515:{message:"Device is locked.",tag:"DeviceLockedError"},5501:{message:"Action refused on device.",tag:"ActionRefusedError"},5502:{message:"Pin is not set",tag:"PinNotSetError"},5223:{message:"Device internal error",tag:"DeviceInternalError"},"6e00":{message:"CLA not supported",tag:"DeviceInternalError"},"6d00":{message:"INS not supported",tag:"DeviceInternalError"}};let Jg=class{static handle(e){const t=new Sc(e).encodeToHexaString(e.statusCode);return y3(t,z5)?new T0e({...z5[t],errorCode:t}):new m3({message:"UnknownError",errorCode:t})}},R0e=class{args=void 0;triggersDisconnection=!0;getApdu(){const e={cla:176,ins:167,p1:0,p2:0};return new Ma(e).build()}parseResponse(e){return bu.isSuccessResponse(e)?Ur({data:void 0}):Ur({error:Jg.handle(e)})}},yg=class{args=void 0;getApdu(){const e={cla:176,ins:1,p1:0,p2:0};return new Ma(e).build()}parseResponse(e){if(!bu.isSuccessResponse(e))return Ur({error:Jg.handle(e)});const t=new Sc(e);if(t.extract8BitUInt()!==1)return Ur({error:new I0e("getAppAndVersion: format not supported")});const n=t.encodeToString(t.extractFieldLVEncoded()),i=t.encodeToString(t.extractFieldLVEncoded());if(t.getUnparsedRemainingLength()===0)return Ur({data:{name:n,version:i}});const s=t.extractFieldLVEncoded();return Ur({data:{name:n,version:i,flags:s}})}};var k0e=(r=>(r[r.BATTERY_PERCENTAGE=0]="BATTERY_PERCENTAGE",r[r.BATTERY_VOLTAGE=1]="BATTERY_VOLTAGE",r[r.BATTERY_TEMPERATURE=2]="BATTERY_TEMPERATURE",r[r.BATTERY_CURRENT=3]="BATTERY_CURRENT",r[r.BATTERY_FLAGS=4]="BATTERY_FLAGS",r))(k0e||{}),P0e=(r=>(r[r.NONE=0]="NONE",r[r.USB=1]="USB",r[r.QI=2]="QI",r))(P0e||{}),Gm={exports:{}},IS,q5;function cw(){if(q5)return IS;q5=1;const r="2.0.0",e=256,t=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,i=e-6;return IS={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:r,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},IS}var CS,j5;function lw(){if(j5)return CS;j5=1;var r={};return CS=typeof Kt=="object"&&r&&r.NODE_DEBUG&&/\bsemver\b/i.test(r.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},CS}var V5;function Qg(){return V5||(V5=1,function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=cw(),s=lw();e=r.exports={};const o=e.re=[],a=e.safeRe=[],c=e.src=[],l=e.safeSrc=[],u=e.t={};let f=0;const h="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[h,n]],g=m=>{for(const[y,v]of d)m=m.split(`${y}*`).join(`${y}{0,${v}}`).split(`${y}+`).join(`${y}{1,${v}}`);return m},p=(m,y,v)=>{const b=g(y),_=f++;s(m,_,y),u[m]=_,c[_]=y,l[_]=b,o[_]=new RegExp(y,v?"g":void 0),a[_]=new RegExp(b,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),p("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${h}+`),p("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),p("FULL",`^${c[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),p("LOOSE",`^${c[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),p("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),p("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?(?:${c[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",c[u.COERCE],!0),p("COERCERTLFULL",c[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",p("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",p("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Gm,Gm.exports)),Gm.exports}var TS,K5;function v3(){if(K5)return TS;K5=1;const r=Object.freeze({loose:!0}),e=Object.freeze({});return TS=n=>n?typeof n!="object"?r:n:e,TS}var RS,H5;function EK(){if(H5)return RS;H5=1;const r=/^[0-9]+$/,e=(n,i)=>{const s=r.test(n),o=r.test(i);return s&&o&&(n=+n,i=+i),n===i?0:s&&!o?-1:o&&!s?1:n<i?-1:1};return RS={compareIdentifiers:e,rcompareIdentifiers:(n,i)=>e(i,n)},RS}var kS,W5;function Cs(){if(W5)return kS;W5=1;const r=lw(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:t}=cw(),{safeRe:n,t:i}=Qg(),s=v3(),{compareIdentifiers:o}=EK();class a{constructor(l,u){if(u=s(u),l instanceof a){if(l.loose===!!u.loose&&l.includePrerelease===!!u.includePrerelease)return l;l=l.version}else if(typeof l!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof l}".`);if(l.length>e)throw new TypeError(`version is longer than ${e} characters`);r("SemVer",l,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const f=l.trim().match(u.loose?n[i.LOOSE]:n[i.FULL]);if(!f)throw new TypeError(`Invalid Version: ${l}`);if(this.raw=l,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>t||this.major<0)throw new TypeError("Invalid major version");if(this.minor>t||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>t||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const d=+h;if(d>=0&&d<t)return d}return h}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(l){if(r("SemVer.compare",this.version,this.options,l),!(l instanceof a)){if(typeof l=="string"&&l===this.version)return 0;l=new a(l,this.options)}return l.version===this.version?0:this.compareMain(l)||this.comparePre(l)}compareMain(l){return l instanceof a||(l=new a(l,this.options)),o(this.major,l.major)||o(this.minor,l.minor)||o(this.patch,l.patch)}comparePre(l){if(l instanceof a||(l=new a(l,this.options)),this.prerelease.length&&!l.prerelease.length)return-1;if(!this.prerelease.length&&l.prerelease.length)return 1;if(!this.prerelease.length&&!l.prerelease.length)return 0;let u=0;do{const f=this.prerelease[u],h=l.prerelease[u];if(r("prerelease compare",u,f,h),f===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(f===void 0)return-1;if(f===h)continue;return o(f,h)}while(++u)}compareBuild(l){l instanceof a||(l=new a(l,this.options));let u=0;do{const f=this.build[u],h=l.build[u];if(r("build compare",u,f,h),f===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(f===void 0)return-1;if(f===h)continue;return o(f,h)}while(++u)}inc(l,u,f){if(l.startsWith("pre")){if(!u&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(u){const h=`-${u}`.match(this.options.loose?n[i.PRERELEASELOOSE]:n[i.PRERELEASE]);if(!h||h[1]!==u)throw new Error(`invalid identifier: ${u}`)}}switch(l){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,f),this.inc("pre",u,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,f),this.inc("pre",u,f);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(f)?1:0;if(this.prerelease.length===0)this.prerelease=[h];else{let d=this.prerelease.length;for(;--d>=0;)typeof this.prerelease[d]=="number"&&(this.prerelease[d]++,d=-2);if(d===-1){if(u===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(u){let d=[u,h];f===!1&&(d=[u]),o(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=d):this.prerelease=d}break}default:throw new Error(`invalid increment argument: ${l}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return kS=a,kS}var PS,G5;function ip(){if(G5)return PS;G5=1;const r=Cs();return PS=(t,n,i=!1)=>{if(t instanceof r)return t;try{return new r(t,n)}catch(s){if(!i)return null;throw s}},PS}var OS,Y5;function O0e(){if(Y5)return OS;Y5=1;const r=ip();return OS=(t,n)=>{const i=r(t,n);return i?i.version:null},OS}var DS,X5;function D0e(){if(X5)return DS;X5=1;const r=ip();return DS=(t,n)=>{const i=r(t.trim().replace(/^[=v]+/,""),n);return i?i.version:null},DS}var $S,J5;function $0e(){if(J5)return $S;J5=1;const r=Cs();return $S=(t,n,i,s,o)=>{typeof i=="string"&&(o=s,s=i,i=void 0);try{return new r(t instanceof r?t.version:t,i).inc(n,s,o).version}catch{return null}},$S}var MS,Q5;function M0e(){if(Q5)return MS;Q5=1;const r=ip();return MS=(t,n)=>{const i=r(t,null,!0),s=r(n,null,!0),o=i.compare(s);if(o===0)return null;const a=o>0,c=a?i:s,l=a?s:i,u=!!c.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(l.compareMain(c)===0)return l.minor&&!l.patch?"minor":"patch"}const h=u?"pre":"";return i.major!==s.major?h+"major":i.minor!==s.minor?h+"minor":i.patch!==s.patch?h+"patch":"prerelease"},MS}var BS,Z5;function B0e(){if(Z5)return BS;Z5=1;const r=Cs();return BS=(t,n)=>new r(t,n).major,BS}var NS,e$;function N0e(){if(e$)return NS;e$=1;const r=Cs();return NS=(t,n)=>new r(t,n).minor,NS}var LS,t$;function L0e(){if(t$)return LS;t$=1;const r=Cs();return LS=(t,n)=>new r(t,n).patch,LS}var FS,r$;function F0e(){if(r$)return FS;r$=1;const r=ip();return FS=(t,n)=>{const i=r(t,n);return i&&i.prerelease.length?i.prerelease:null},FS}var US,n$;function Ba(){if(n$)return US;n$=1;const r=Cs();return US=(t,n,i)=>new r(t,i).compare(new r(n,i)),US}var zS,i$;function U0e(){if(i$)return zS;i$=1;const r=Ba();return zS=(t,n,i)=>r(n,t,i),zS}var qS,s$;function z0e(){if(s$)return qS;s$=1;const r=Ba();return qS=(t,n)=>r(t,n,!0),qS}var jS,o$;function b3(){if(o$)return jS;o$=1;const r=Cs();return jS=(t,n,i)=>{const s=new r(t,i),o=new r(n,i);return s.compare(o)||s.compareBuild(o)},jS}var VS,a$;function q0e(){if(a$)return VS;a$=1;const r=b3();return VS=(t,n)=>t.sort((i,s)=>r(i,s,n)),VS}var KS,c$;function j0e(){if(c$)return KS;c$=1;const r=b3();return KS=(t,n)=>t.sort((i,s)=>r(s,i,n)),KS}var HS,l$;function uw(){if(l$)return HS;l$=1;const r=Ba();return HS=(t,n,i)=>r(t,n,i)>0,HS}var WS,u$;function w3(){if(u$)return WS;u$=1;const r=Ba();return WS=(t,n,i)=>r(t,n,i)<0,WS}var GS,f$;function AK(){if(f$)return GS;f$=1;const r=Ba();return GS=(t,n,i)=>r(t,n,i)===0,GS}var YS,h$;function IK(){if(h$)return YS;h$=1;const r=Ba();return YS=(t,n,i)=>r(t,n,i)!==0,YS}var XS,d$;function x3(){if(d$)return XS;d$=1;const r=Ba();return XS=(t,n,i)=>r(t,n,i)>=0,XS}var JS,p$;function _3(){if(p$)return JS;p$=1;const r=Ba();return JS=(t,n,i)=>r(t,n,i)<=0,JS}var QS,g$;function CK(){if(g$)return QS;g$=1;const r=AK(),e=IK(),t=uw(),n=x3(),i=w3(),s=_3();return QS=(a,c,l,u)=>{switch(c){case"===":return typeof a=="object"&&(a=a.version),typeof l=="object"&&(l=l.version),a===l;case"!==":return typeof a=="object"&&(a=a.version),typeof l=="object"&&(l=l.version),a!==l;case"":case"=":case"==":return r(a,l,u);case"!=":return e(a,l,u);case">":return t(a,l,u);case">=":return n(a,l,u);case"<":return i(a,l,u);case"<=":return s(a,l,u);default:throw new TypeError(`Invalid operator: ${c}`)}},QS}var ZS,m$;function V0e(){if(m$)return ZS;m$=1;const r=Cs(),e=ip(),{safeRe:t,t:n}=Qg();return ZS=(s,o)=>{if(s instanceof r)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;o=o||{};let a=null;if(!o.rtl)a=s.match(o.includePrerelease?t[n.COERCEFULL]:t[n.COERCE]);else{const d=o.includePrerelease?t[n.COERCERTLFULL]:t[n.COERCERTL];let g;for(;(g=d.exec(s))&&(!a||a.index+a[0].length!==s.length);)(!a||g.index+g[0].length!==a.index+a[0].length)&&(a=g),d.lastIndex=g.index+g[1].length+g[2].length;d.lastIndex=-1}if(a===null)return null;const c=a[2],l=a[3]||"0",u=a[4]||"0",f=o.includePrerelease&&a[5]?`-${a[5]}`:"",h=o.includePrerelease&&a[6]?`+${a[6]}`:"";return e(`${c}.${l}.${u}${f}${h}`,o)},ZS}var eE,y$;function K0e(){if(y$)return eE;y$=1;class r{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(t,n)}return this}}return eE=r,eE}var tE,v$;function Na(){if(v$)return tE;v$=1;const r=/\s+/g;class e{constructor(R,N){if(N=i(N),R instanceof e)return R.loose===!!N.loose&&R.includePrerelease===!!N.includePrerelease?R:new e(R.raw,N);if(R instanceof s)return this.raw=R.value,this.set=[[R]],this.formatted=void 0,this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=R.trim().replace(r," "),this.set=this.raw.split("||").map(Y=>this.parseRange(Y.trim())).filter(Y=>Y.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const Y=this.set[0];if(this.set=this.set.filter(z=>!p(z[0])),this.set.length===0)this.set=[Y];else if(this.set.length>1){for(const z of this.set)if(z.length===1&&m(z[0])){this.set=[z];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let R=0;R<this.set.length;R++){R>0&&(this.formatted+="||");const N=this.set[R];for(let Y=0;Y<N.length;Y++)Y>0&&(this.formatted+=" "),this.formatted+=N[Y].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(R){const Y=((this.options.includePrerelease&&d)|(this.options.loose&&g))+":"+R,z=n.get(Y);if(z)return z;const G=this.options.loose,te=G?c[l.HYPHENRANGELOOSE]:c[l.HYPHENRANGE];R=R.replace(te,j(this.options.includePrerelease)),o("hyphen replace",R),R=R.replace(c[l.COMPARATORTRIM],u),o("comparator trim",R),R=R.replace(c[l.TILDETRIM],f),o("tilde trim",R),R=R.replace(c[l.CARETTRIM],h),o("caret trim",R);let X=R.split(" ").map(I=>v(I,this.options)).join(" ").split(/\s+/).map(I=>J(I,this.options));G&&(X=X.filter(I=>(o("loose invalid filter",I,this.options),!!I.match(c[l.COMPARATORLOOSE])))),o("range list",X);const T=new Map,A=X.map(I=>new s(I,this.options));for(const I of A){if(p(I))return[I];T.set(I.value,I)}T.size>1&&T.has("")&&T.delete("");const O=[...T.values()];return n.set(Y,O),O}intersects(R,N){if(!(R instanceof e))throw new TypeError("a Range is required");return this.set.some(Y=>y(Y,N)&&R.set.some(z=>y(z,N)&&Y.every(G=>z.every(te=>G.intersects(te,N)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new a(R,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(L(this.set[N],R,this.options))return!0;return!1}}tE=e;const t=K0e(),n=new t,i=v3(),s=fw(),o=lw(),a=Cs(),{safeRe:c,t:l,comparatorTrimReplace:u,tildeTrimReplace:f,caretTrimReplace:h}=Qg(),{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:g}=cw(),p=w=>w.value==="<0.0.0-0",m=w=>w.value==="",y=(w,R)=>{let N=!0;const Y=w.slice();let z=Y.pop();for(;N&&Y.length;)N=Y.every(G=>z.intersects(G,R)),z=Y.pop();return N},v=(w,R)=>(o("comp",w,R),w=E(w,R),o("caret",w),w=_(w,R),o("tildes",w),w=C(w,R),o("xrange",w),w=$(w,R),o("stars",w),w),b=w=>!w||w.toLowerCase()==="x"||w==="*",_=(w,R)=>w.trim().split(/\s+/).map(N=>x(N,R)).join(" "),x=(w,R)=>{const N=R.loose?c[l.TILDELOOSE]:c[l.TILDE];return w.replace(N,(Y,z,G,te,X)=>{o("tilde",w,Y,z,G,te,X);let T;return b(z)?T="":b(G)?T=`>=${z}.0.0 <${+z+1}.0.0-0`:b(te)?T=`>=${z}.${G}.0 <${z}.${+G+1}.0-0`:X?(o("replaceTilde pr",X),T=`>=${z}.${G}.${te}-${X} <${z}.${+G+1}.0-0`):T=`>=${z}.${G}.${te} <${z}.${+G+1}.0-0`,o("tilde return",T),T})},E=(w,R)=>w.trim().split(/\s+/).map(N=>S(N,R)).join(" "),S=(w,R)=>{o("caret",w,R);const N=R.loose?c[l.CARETLOOSE]:c[l.CARET],Y=R.includePrerelease?"-0":"";return w.replace(N,(z,G,te,X,T)=>{o("caret",w,z,G,te,X,T);let A;return b(G)?A="":b(te)?A=`>=${G}.0.0${Y} <${+G+1}.0.0-0`:b(X)?G==="0"?A=`>=${G}.${te}.0${Y} <${G}.${+te+1}.0-0`:A=`>=${G}.${te}.0${Y} <${+G+1}.0.0-0`:T?(o("replaceCaret pr",T),G==="0"?te==="0"?A=`>=${G}.${te}.${X}-${T} <${G}.${te}.${+X+1}-0`:A=`>=${G}.${te}.${X}-${T} <${G}.${+te+1}.0-0`:A=`>=${G}.${te}.${X}-${T} <${+G+1}.0.0-0`):(o("no pr"),G==="0"?te==="0"?A=`>=${G}.${te}.${X}${Y} <${G}.${te}.${+X+1}-0`:A=`>=${G}.${te}.${X}${Y} <${G}.${+te+1}.0-0`:A=`>=${G}.${te}.${X} <${+G+1}.0.0-0`),o("caret return",A),A})},C=(w,R)=>(o("replaceXRanges",w,R),w.split(/\s+/).map(N=>k(N,R)).join(" ")),k=(w,R)=>{w=w.trim();const N=R.loose?c[l.XRANGELOOSE]:c[l.XRANGE];return w.replace(N,(Y,z,G,te,X,T)=>{o("xRange",w,Y,z,G,te,X,T);const A=b(G),O=A||b(te),I=O||b(X),U=I;return z==="="&&U&&(z=""),T=R.includePrerelease?"-0":"",A?z===">"||z==="<"?Y="<0.0.0-0":Y="*":z&&U?(O&&(te=0),X=0,z===">"?(z=">=",O?(G=+G+1,te=0,X=0):(te=+te+1,X=0)):z==="<="&&(z="<",O?G=+G+1:te=+te+1),z==="<"&&(T="-0"),Y=`${z+G}.${te}.${X}${T}`):O?Y=`>=${G}.0.0${T} <${+G+1}.0.0-0`:I&&(Y=`>=${G}.${te}.0${T} <${G}.${+te+1}.0-0`),o("xRange return",Y),Y})},$=(w,R)=>(o("replaceStars",w,R),w.trim().replace(c[l.STAR],"")),J=(w,R)=>(o("replaceGTE0",w,R),w.trim().replace(c[R.includePrerelease?l.GTE0PRE:l.GTE0],"")),j=w=>(R,N,Y,z,G,te,X,T,A,O,I,U)=>(b(Y)?N="":b(z)?N=`>=${Y}.0.0${w?"-0":""}`:b(G)?N=`>=${Y}.${z}.0${w?"-0":""}`:te?N=`>=${N}`:N=`>=${N}${w?"-0":""}`,b(A)?T="":b(O)?T=`<${+A+1}.0.0-0`:b(I)?T=`<${A}.${+O+1}.0-0`:U?T=`<=${A}.${O}.${I}-${U}`:w?T=`<${A}.${O}.${+I+1}-0`:T=`<=${T}`,`${N} ${T}`.trim()),L=(w,R,N)=>{for(let Y=0;Y<w.length;Y++)if(!w[Y].test(R))return!1;if(R.prerelease.length&&!N.includePrerelease){for(let Y=0;Y<w.length;Y++)if(o(w[Y].semver),w[Y].semver!==s.ANY&&w[Y].semver.prerelease.length>0){const z=w[Y].semver;if(z.major===R.major&&z.minor===R.minor&&z.patch===R.patch)return!0}return!1}return!0};return tE}var rE,b$;function fw(){if(b$)return rE;b$=1;const r=Symbol("SemVer ANY");class e{static get ANY(){return r}constructor(u,f){if(f=t(f),u instanceof e){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),o("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===r?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(u){const f=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],h=u.match(f);if(!h)throw new TypeError(`Invalid comparator: ${u}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new a(h[2],this.options.loose):this.semver=r}toString(){return this.value}test(u){if(o("Comparator.test",u,this.options.loose),this.semver===r||u===r)return!0;if(typeof u=="string")try{u=new a(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,f).test(u.semver):(f=t(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}rE=e;const t=v3(),{safeRe:n,t:i}=Qg(),s=CK(),o=lw(),a=Cs(),c=Na();return rE}var nE,w$;function hw(){if(w$)return nE;w$=1;const r=Na();return nE=(t,n,i)=>{try{n=new r(n,i)}catch{return!1}return n.test(t)},nE}var iE,x$;function H0e(){if(x$)return iE;x$=1;const r=Na();return iE=(t,n)=>new r(t,n).set.map(i=>i.map(s=>s.value).join(" ").trim().split(" ")),iE}var sE,_$;function W0e(){if(_$)return sE;_$=1;const r=Cs(),e=Na();return sE=(n,i,s)=>{let o=null,a=null,c=null;try{c=new e(i,s)}catch{return null}return n.forEach(l=>{c.test(l)&&(!o||a.compare(l)===-1)&&(o=l,a=new r(o,s))}),o},sE}var oE,S$;function G0e(){if(S$)return oE;S$=1;const r=Cs(),e=Na();return oE=(n,i,s)=>{let o=null,a=null,c=null;try{c=new e(i,s)}catch{return null}return n.forEach(l=>{c.test(l)&&(!o||a.compare(l)===1)&&(o=l,a=new r(o,s))}),o},oE}var aE,E$;function Y0e(){if(E$)return aE;E$=1;const r=Cs(),e=Na(),t=uw();return aE=(i,s)=>{i=new e(i,s);let o=new r("0.0.0");if(i.test(o)||(o=new r("0.0.0-0"),i.test(o)))return o;o=null;for(let a=0;a<i.set.length;++a){const c=i.set[a];let l=null;c.forEach(u=>{const f=new r(u.semver.version);switch(u.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!l||t(f,l))&&(l=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${u.operator}`)}}),l&&(!o||t(o,l))&&(o=l)}return o&&i.test(o)?o:null},aE}var cE,A$;function X0e(){if(A$)return cE;A$=1;const r=Na();return cE=(t,n)=>{try{return new r(t,n).range||"*"}catch{return null}},cE}var lE,I$;function S3(){if(I$)return lE;I$=1;const r=Cs(),e=fw(),{ANY:t}=e,n=Na(),i=hw(),s=uw(),o=w3(),a=_3(),c=x3();return lE=(u,f,h,d)=>{u=new r(u,d),f=new n(f,d);let g,p,m,y,v;switch(h){case">":g=s,p=a,m=o,y=">",v=">=";break;case"<":g=o,p=c,m=s,y="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(u,f,d))return!1;for(let b=0;b<f.set.length;++b){const _=f.set[b];let x=null,E=null;if(_.forEach(S=>{S.semver===t&&(S=new e(">=0.0.0")),x=x||S,E=E||S,g(S.semver,x.semver,d)?x=S:m(S.semver,E.semver,d)&&(E=S)}),x.operator===y||x.operator===v||(!E.operator||E.operator===y)&&p(u,E.semver))return!1;if(E.operator===v&&m(u,E.semver))return!1}return!0},lE}var uE,C$;function J0e(){if(C$)return uE;C$=1;const r=S3();return uE=(t,n,i)=>r(t,n,">",i),uE}var fE,T$;function Q0e(){if(T$)return fE;T$=1;const r=S3();return fE=(t,n,i)=>r(t,n,"<",i),fE}var hE,R$;function Z0e(){if(R$)return hE;R$=1;const r=Na();return hE=(t,n,i)=>(t=new r(t,i),n=new r(n,i),t.intersects(n,i)),hE}var dE,k$;function ege(){if(k$)return dE;k$=1;const r=hw(),e=Ba();return dE=(t,n,i)=>{const s=[];let o=null,a=null;const c=t.sort((h,d)=>e(h,d,i));for(const h of c)r(h,n,i)?(a=h,o||(o=h)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);const l=[];for(const[h,d]of s)h===d?l.push(h):!d&&h===c[0]?l.push("*"):d?h===c[0]?l.push(`<=${d}`):l.push(`${h} - ${d}`):l.push(`>=${h}`);const u=l.join(" || "),f=typeof n.raw=="string"?n.raw:String(n);return u.length<f.length?u:n},dE}var pE,P$;function tge(){if(P$)return pE;P$=1;const r=Na(),e=fw(),{ANY:t}=e,n=hw(),i=Ba(),s=(f,h,d={})=>{if(f===h)return!0;f=new r(f,d),h=new r(h,d);let g=!1;e:for(const p of f.set){for(const m of h.set){const y=c(p,m,d);if(g=g||y!==null,y)continue e}if(g)return!1}return!0},o=[new e(">=0.0.0-0")],a=[new e(">=0.0.0")],c=(f,h,d)=>{if(f===h)return!0;if(f.length===1&&f[0].semver===t){if(h.length===1&&h[0].semver===t)return!0;d.includePrerelease?f=o:f=a}if(h.length===1&&h[0].semver===t){if(d.includePrerelease)return!0;h=a}const g=new Set;let p,m;for(const C of f)C.operator===">"||C.operator===">="?p=l(p,C,d):C.operator==="<"||C.operator==="<="?m=u(m,C,d):g.add(C.semver);if(g.size>1)return null;let y;if(p&&m){if(y=i(p.semver,m.semver,d),y>0)return null;if(y===0&&(p.operator!==">="||m.operator!=="<="))return null}for(const C of g){if(p&&!n(C,String(p),d)||m&&!n(C,String(m),d))return null;for(const k of h)if(!n(C,String(k),d))return!1;return!0}let v,b,_,x,E=m&&!d.includePrerelease&&m.semver.prerelease.length?m.semver:!1,S=p&&!d.includePrerelease&&p.semver.prerelease.length?p.semver:!1;E&&E.prerelease.length===1&&m.operator==="<"&&E.prerelease[0]===0&&(E=!1);for(const C of h){if(x=x||C.operator===">"||C.operator===">=",_=_||C.operator==="<"||C.operator==="<=",p){if(S&&C.semver.prerelease&&C.semver.prerelease.length&&C.semver.major===S.major&&C.semver.minor===S.minor&&C.semver.patch===S.patch&&(S=!1),C.operator===">"||C.operator===">="){if(v=l(p,C,d),v===C&&v!==p)return!1}else if(p.operator===">="&&!n(p.semver,String(C),d))return!1}if(m){if(E&&C.semver.prerelease&&C.semver.prerelease.length&&C.semver.major===E.major&&C.semver.minor===E.minor&&C.semver.patch===E.patch&&(E=!1),C.operator==="<"||C.operator==="<="){if(b=u(m,C,d),b===C&&b!==m)return!1}else if(m.operator==="<="&&!n(m.semver,String(C),d))return!1}if(!C.operator&&(m||p)&&y!==0)return!1}return!(p&&_&&!m&&y!==0||m&&x&&!p&&y!==0||S||E)},l=(f,h,d)=>{if(!f)return h;const g=i(f.semver,h.semver,d);return g>0?f:g<0||h.operator===">"&&f.operator===">="?h:f},u=(f,h,d)=>{if(!f)return h;const g=i(f.semver,h.semver,d);return g<0?f:g>0||h.operator==="<"&&f.operator==="<="?h:f};return pE=s,pE}var gE,O$;function rge(){if(O$)return gE;O$=1;const r=Qg(),e=cw(),t=Cs(),n=EK(),i=ip(),s=O0e(),o=D0e(),a=$0e(),c=M0e(),l=B0e(),u=N0e(),f=L0e(),h=F0e(),d=Ba(),g=U0e(),p=z0e(),m=b3(),y=q0e(),v=j0e(),b=uw(),_=w3(),x=AK(),E=IK(),S=x3(),C=_3(),k=CK(),$=V0e(),J=fw(),j=Na(),L=hw(),w=H0e(),R=W0e(),N=G0e(),Y=Y0e(),z=X0e(),G=S3(),te=J0e(),X=Q0e(),T=Z0e(),A=ege(),O=tge();return gE={parse:i,valid:s,clean:o,inc:a,diff:c,major:l,minor:u,patch:f,prerelease:h,compare:d,rcompare:g,compareLoose:p,compareBuild:m,sort:y,rsort:v,gt:b,lt:_,eq:x,neq:E,gte:S,lte:C,cmp:k,coerce:$,Comparator:J,Range:j,satisfies:L,toComparators:w,maxSatisfying:R,minSatisfying:N,minVersion:Y,validRange:z,outside:G,gtr:te,ltr:X,intersects:T,simplifyRange:A,subset:O,SemVer:t,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},gE}var gs=rge();const D$=Gs(gs);var Lr=(r=>(r.NANO_S="nanoS",r.NANO_SP="nanoSP",r.NANO_X="nanoX",r.STAX="stax",r.FLEX="flex",r.APEX="apexp",r))(Lr||{});let TK=class{id;model;name;constructor({id:e,model:t,name:n}){this.id=e,this.model=t,this.name=n}};const $$=11415;let nge=class{constructor(e){if(this.seFlags=e,this.seFlags.length!==4)throw new Error("Invalid secure element flags length")}generalDeviceState(){const e=this.seFlags[0]??0;return{isPinValidated:this._checkNthBitInByte(e,1),hasMcuSerialNumber:this._checkNthBitInByte(e,2),hasValidCertificate:this._checkNthBitInByte(e,3),isCustomAuthorityConnectionAllowed:this._checkNthBitInByte(e,4),isSecureConnectionAllowed:this._checkNthBitInByte(e,5),isOnboarded:this._checkNthBitInByte(e,6),isMcuCodeSigned:this._checkNthBitInByte(e,7),isInRecoveryMode:this._checkNthBitInByte(e,8)}}endorsementInformation(){throw new Error("Not implemented")}wordsInformation(){throw new Error("Not implemented")}onboardingStatus(){throw new Error("Not implemented")}_checkNthBitInByte(e,t){return(e>>8-t&1)===1}},ige=class{args=void 0;getApdu(){const e={cla:224,ins:1,p1:0,p2:0};return new Ma(e).build()}parseResponse(e,t){if(!bu.isSuccessResponse(e))return Ur({error:Jg.handle(e)});const n=new Sc(e),i=n.extract32BitUInt();if(i===void 0)return Ur({error:new Ns("Missing target ID in OS version")});let s=n.encodeToString(n.extractFieldLVEncoded()),o=n.extractFieldLVEncoded()??new Uint8Array(0);const a={...new nge(o).generalDeviceState()};s||(s="0.0.0",o=new Uint8Array);const c=(i&4026531840)!==805306368,l=s.includes("-osu");let u="",f="",h="",d="",g,p,m,y;if(c){h=s,g=i;const v=n.extractFieldLVEncoded();v&&(v.length>=5?(u=n.encodeToString(v),p=parseInt(n.encodeToHexaString(n.extractFieldLVEncoded()),16)):p=parseInt(n.encodeToHexaString(v),16))}else{if(u=s,p=i,f=n.encodeToString(n.extractFieldLVEncoded()),this.isBootloaderVersionSupported(u,t)&&(h=n.encodeToString(n.extractFieldLVEncoded())),this.isHardwareVersionSupported(u,t)?d=n.encodeToHexaString(n.extractFieldLVEncoded()):d="00",this.isLocalizationSupported(u,t)){const v=n.extractFieldLVEncoded();v!==void 0&&(m=parseInt(n.encodeToHexaString(v),16))}if(this.isRecoverSupported(u,t)){const v=n.extractFieldLVEncoded();v!==void 0&&(y=parseInt(n.encodeToHexaString(v),16))}}return Ur({data:{isBootloader:c,isOsu:l,targetId:i,seTargetId:p,mcuTargetId:g,seVersion:u,seFlags:o,mcuSephVersion:f,mcuBootloaderVersion:h,hwVersion:d,langId:m,recoverState:y,secureElementFlags:a}})}isBootloaderVersionSupported(e,t){const n=gs.coerce(e)??"";switch(t){case Lr.NANO_S:case Lr.NANO_X:return gs.gte(n,"2.0.0");default:return!0}}isHardwareVersionSupported(e,t){const n=gs.coerce(e)??"";switch(t){case Lr.NANO_X:return gs.gte(n,"2.0.0");default:return!1}}isLocalizationSupported(e,t){const n=gs.coerce(e)??"";switch(t){case Lr.NANO_S:return!1;case Lr.NANO_SP:return gs.gte(n,"1.1.0");case Lr.NANO_X:return gs.gte(n,"2.1.0");default:return!0}}isRecoverSupported(e,t){const n=gs.coerce(e)??"";switch(t){case Lr.NANO_S:return!1;case Lr.NANO_SP:return gs.gte(n,"1.1.2");case Lr.NANO_X:return gs.gte(n,"2.2.3");case Lr.STAX:return gs.gte(n,"1.4.0");case Lr.FLEX:return gs.gte(n,"1.0.1");default:return!0}}};const M$={"670a":{message:"No app name provided"},6807:{message:"Unknown application name"}};let sge=class extends g3{constructor({message:e,errorCode:t}){super({tag:"OpenAppCommandError",message:e,errorCode:t})}},oge=class{args;triggersDisconnection=!0;constructor(e){this.args=e}getApdu(){const e={cla:224,ins:216,p1:0,p2:0};return new Ma(e).addAsciiStringToData(this.args.appName).build()}parseResponse(e){if(bu.isSuccessResponse(e))return Ur({data:void 0});const t=new Sc(e).encodeToHexaString(e.statusCode);return y3(t,M$)?Ur({error:new sge({...M$[t],errorCode:t})}):Ur({error:Jg.handle(e)})}};var Xl=(r=>(r.LOCKED="LOCKED",r.BUSY="BUSY",r.CONNECTED="CONNECTED",r.NOT_CONNECTED="NOT CONNECTED",r))(Xl||{}),d0=(r=>(r.NotStarted="not-started",r.Pending="pending",r.Stopped="stopped",r.Completed="completed",r.Error="error",r))(d0||{}),cn=(r=>(r.None="none",r.UnlockDevice="unlock-device",r.AllowSecureConnection="allow-secure-connection",r.ConfirmOpenApp="confirm-open-app",r.SignTransaction="sign-transaction",r.SignTypedData="sign-typed-data",r.AllowListApps="allow-list-apps",r.VerifyAddress="verify-address",r.SignPersonalMessage="sign-personal-message",r.SignDelegationAuthorization="sign-delegation-authorization",r.Web3ChecksOptIn="web3-checks-opt-in",r))(cn||{});const an={of(r){return es(r)},empty(){return Fr},zero(){return Fr},fromNullable(r){return r==null?Fr:es(r)},fromFalsy(r){return r?es(r):Fr},fromPredicate(r,e){switch(arguments.length){case 1:return t=>an.fromPredicate(r,t);default:return r(e)?es(e):Fr}},mapMaybe(r,e){switch(arguments.length){case 1:return t=>an.mapMaybe(r,t);default:return an.catMaybes(e.map(r))}},catMaybes(r){let e=[];for(const t of r)t.isJust()&&e.push(t.extract());return e},encase(r){try{return es(r())}catch{return Fr}},isMaybe(r){return r instanceof E3||r instanceof A3},sequence(r){let e=[];for(const t of r)if(t.isJust())e.push(t.extract());else return Fr;return es(e)},"fantasy-land/of"(r){return this.of(r)},"fantasy-land/empty"(){return this.empty()},"fantasy-land/zero"(){return this.zero()}};class E3{constructor(e){this.__value=e,this["fantasy-land/equals"]=this.equals,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/alt"]=this.alt,this["fantasy-land/chain"]=this.chain,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend,this["fantasy-land/filter"]=this.filter}isJust(){return!0}isNothing(){return!1}inspect(){return`Just(${this.__value})`}toString(){return this.inspect()}toJSON(){const e=this.__value;return e instanceof Date?e.toJSON():e}equals(e){return this.extract()===e.extract()}map(e){return es(e(this.__value))}ap(e){return e.isJust()?this.map(e.extract()):Fr}alt(e){return this}altLazy(e){return this}chain(e){return e(this.__value)}chainNullable(e){return an.fromNullable(e(this.__value))}join(){return this.__value}reduce(e,t){return e(t,this.__value)}extend(e){return es(e(this))}unsafeCoerce(){return this.__value}caseOf(e){return"_"in e?e._():e.Just(this.__value)}orDefault(e){return this.__value}orDefaultLazy(e){return this.__value}toList(){return[this.__value]}mapOrDefault(e,t){return e(this.__value)}extract(){return this.__value}extractNullable(){return this.__value}toEither(e){return er(this.__value)}ifJust(e){return e(this.__value),this}ifNothing(e){return this}filter(e){return e(this.__value)?es(this.__value):Fr}}E3.prototype.constructor=an;class A3{constructor(){this["fantasy-land/equals"]=this.equals,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/alt"]=this.alt,this["fantasy-land/chain"]=this.chain,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend,this["fantasy-land/filter"]=this.filter}isJust(){return!1}isNothing(){return!0}inspect(){return"Nothing"}toString(){return this.inspect()}toJSON(){return this.__value}equals(e){return this.extract()===e.extract()}map(e){return Fr}ap(e){return Fr}alt(e){return e}altLazy(e){return e()}chain(e){return Fr}chainNullable(e){return Fr}join(){return Fr}reduce(e,t){return t}extend(e){return Fr}unsafeCoerce(){throw new Error("Maybe#unsafeCoerce was ran on a Nothing")}caseOf(e){return"_"in e?e._():e.Nothing()}orDefault(e){return e}orDefaultLazy(e){return e()}toList(){return[]}mapOrDefault(e,t){return t}extract(){}extractNullable(){return null}toEither(e){return ut(e)}ifJust(e){return this}ifNothing(e){return e(),this}filter(e){return Fr}}A3.prototype.constructor=an;const es=r=>new E3(r),Fr=new A3,xo={of(r){return er(r)},lefts(r){let e=[];for(const t of r)t.isLeft()&&e.push(t.extract());return e},rights(r){let e=[];for(const t of r)t.isRight()&&e.push(t.extract());return e},encase(r){try{return er(r())}catch(e){return ut(e)}},sequence(r){let e=[];for(const t of r){if(t.isLeft())return t;e.push(t.extract())}return er(e)},isEither(r){return r instanceof C3||r instanceof I3},"fantasy-land/of"(r){return xo.of(r)}};class I3{constructor(e){this.__value=e,this._="R",this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/equals"]=this.equals,this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend}isLeft(){return!1}isRight(){return!0}toJSON(){return this.__value}inspect(){return`Right(${this.__value})`}toString(){return this.inspect()}bimap(e,t){return er(t(this.__value))}map(e){return er(e(this.__value))}mapLeft(e){return this}ap(e){return e.isRight()?this.map(e.extract()):e}equals(e){return e.isRight()?this.__value===e.extract():!1}chain(e){return e(this.__value)}chainLeft(e){return this}join(){return this.__value}alt(e){return this}altLazy(e){return this}reduce(e,t){return e(t,this.__value)}extend(e){return er(e(this))}unsafeCoerce(){return this.__value}caseOf(e){return"_"in e?e._():e.Right(this.__value)}leftOrDefault(e){return e}orDefault(e){return this.__value}orDefaultLazy(e){return this.__value}leftOrDefaultLazy(e){return e()}ifLeft(e){return this}ifRight(e){return e(this.__value),this}toMaybe(){return es(this.__value)}leftToMaybe(){return Fr}extract(){return this.__value}swap(){return ut(this.__value)}}I3.prototype.constructor=xo;class C3{constructor(e){this.__value=e,this._="L",this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/equals"]=this.equals,this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend}isLeft(){return!0}isRight(){return!1}toJSON(){return this.__value}inspect(){return`Left(${JSON.stringify(this.__value)})`}toString(){return this.inspect()}bimap(e,t){return ut(e(this.__value))}map(e){return this}mapLeft(e){return ut(e(this.__value))}ap(e){return e.isLeft()?e:this}equals(e){return e.isLeft()?e.extract()===this.__value:!1}chain(e){return this}chainLeft(e){return e(this.__value)}join(){return this}alt(e){return e}altLazy(e){return e()}reduce(e,t){return t}extend(e){return this}unsafeCoerce(){throw this.__value instanceof Error?this.__value:new Error("Either#unsafeCoerce was ran on a Left")}caseOf(e){return"_"in e?e._():e.Left(this.__value)}leftOrDefault(e){return this.__value}orDefault(e){return e}orDefaultLazy(e){return e()}leftOrDefaultLazy(e){return this.__value}ifLeft(e){return e(this.__value),this}ifRight(e){return this}toMaybe(){return Fr}leftToMaybe(){return es(this.__value)}extract(){return this.__value}swap(){return er(this.__value)}}C3.prototype.constructor=xo;const ut=r=>new C3(r),er=r=>new I3(r);var RK;const kK={liftEither(r){if(r.isRight())return Promise.resolve(r.extract());throw r.extract()},fromPromise(r){return r.then(kK.liftEither)},throwE(r){throw r}};class PK{constructor(e){this.runPromise=e,this[RK]="EitherAsync",this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this.then=(t,n)=>this.run().then(t,n)}leftOrDefault(e){return this.run().then(t=>t.leftOrDefault(e))}orDefault(e){return this.run().then(t=>t.orDefault(e))}join(){return lr(async e=>{const t=await this;if(t.isRight()){const n=await t.extract();return e.liftEither(n)}return e.liftEither(t)})}ap(e){return lr(async t=>{const n=await e;if(n.isRight()){const i=await this.run();return i.isRight()?n.extract()(i.extract()):t.liftEither(i)}return t.liftEither(n)})}alt(e){return lr(async t=>{const n=await this.run();if(n.isRight())return n.extract();{const i=await e;return t.liftEither(i)}})}extend(e){return lr(async t=>{const n=await this.run();if(n.isRight()){const i=lr.liftEither(n);return t.liftEither(er(e(i)))}return t.liftEither(n)})}async run(){try{return er(await this.runPromise(kK))}catch(e){return ut(e)}}bimap(e,t){return lr(async n=>{const i=await this.run();try{return await n.liftEither(i.bimap(e,t))}catch(s){throw await s}})}map(e){return lr(t=>this.runPromise(t).then(e))}mapLeft(e){return lr(async t=>{try{return await this.runPromise(t)}catch(n){throw await e(n)}})}chain(e){return lr(async t=>{const n=await this.runPromise(t);return t.fromPromise(e(n))})}chainLeft(e){return lr(async t=>{try{return await this.runPromise(t)}catch(n){return t.fromPromise(e(n))}})}toMaybeAsync(){return Ci(async({liftMaybe:e})=>{const t=await this.run();return e(t.toMaybe())})}swap(){return lr(async e=>{const t=await this.run();return t.isRight()&&e.throwE(t.extract()),e.liftEither(er(t.extract()))})}ifLeft(e){return lr(async t=>{const n=await this.run();return n.ifLeft(e),t.liftEither(n)})}ifRight(e){return lr(async t=>{const n=await this.run();return n.ifRight(e),t.liftEither(n)})}void(){return this.map(e=>{})}caseOf(e){return this.run().then(t=>t.caseOf(e))}finally(e){return lr(({fromPromise:t})=>t(this.run().finally(e)))}}RK=Symbol.toStringTag;const lr=Object.assign(r=>new PK(r),{fromPromise:r=>lr(({fromPromise:e})=>e(r())),liftEither:r=>lr(({liftEither:e})=>e(r)),lefts:r=>Promise.all(r.map(e=>e.run())).then(xo.lefts),rights:r=>Promise.all(r.map(e=>e.run())).then(xo.rights),sequence:r=>lr(async e=>{let t=[];for await(const n of r){if(n.isLeft())return e.liftEither(n);t.push(n.extract())}return e.liftEither(er(t))}),all:r=>lr.fromPromise(async()=>Promise.all(r).then(xo.sequence))});PK.prototype.constructor=lr;var OK;const DK={liftMaybe(r){if(r.isJust())return Promise.resolve(r.extract());throw Fr},fromPromise(r){return r.then(DK.liftMaybe)}};class $K{constructor(e){this.runPromise=e,this[OK]="MaybeAsync",this["fantasy-land/chain"]=this.chain,this["fantasy-land/filter"]=this.filter,this["fantasy-land/alt"]=this.alt}orDefault(e){return this.run().then(t=>t.orDefault(e))}join(){return Ci(async e=>{const t=await this.run();if(t.isJust()){const n=await t.extract();return e.liftMaybe(n)}return e.liftMaybe(Fr)})}ap(e){return Ci(async t=>{const n=await e;if(n.isJust()){const i=await this.run();return i.isJust()?n.extract()(i.extract()):t.liftMaybe(Fr)}return t.liftMaybe(Fr)})}alt(e){return Ci(async t=>{const n=await this.run();if(n.isJust())return n.extract();{const i=await e;return t.liftMaybe(i)}})}extend(e){return Ci(async t=>{const n=await this.run();if(n.isJust()){const i=Ci.liftMaybe(n);return t.liftMaybe(es(e(i)))}return t.liftMaybe(Fr)})}filter(e){return Ci(async t=>{const n=await this.run();return t.liftMaybe(n.filter(e))})}async run(){try{return es(await this.runPromise(DK))}catch{return Fr}}map(e){return Ci(t=>this.runPromise(t).then(e))}chain(e){return Ci(async t=>{const n=await this.runPromise(t);return t.fromPromise(e(n))})}toEitherAsync(e){return lr(async({liftEither:t})=>{const n=await this.run();return t(n.toEither(e))})}ifJust(e){return Ci(async t=>{const n=await this.run();return n.ifJust(e),t.liftMaybe(n)})}ifNothing(e){return Ci(async t=>{const n=await this.run();return n.ifNothing(e),t.liftMaybe(n)})}void(){return this.map(e=>{})}caseOf(e){return this.run().then(t=>t.caseOf(e))}finally(e){return Ci(({fromPromise:t})=>t(this.run().finally(e)))}then(e,t){return this.run().then(e,t)}}OK=Symbol.toStringTag;const Ci=Object.assign(r=>new $K(r),{catMaybes:r=>Promise.all(r).then(an.catMaybes),fromPromise:r=>Ci(({fromPromise:e})=>e(r())),liftMaybe:r=>Ci(({liftMaybe:e})=>e(r))});$K.prototype.constructor=Ci;function age(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof pa<"u")return pa}function cge(){const r=age();if(r.__xstate__)return r.__xstate__}const lge=r=>{if(typeof window>"u")return;const e=cge();e&&e.register(r)};class B${constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const MK=".",uge="",BK="",fge="#",hge="*",NK="xstate.init",vg="xstate.stop";function dge(r,e){return{type:`xstate.after.${r}.${e}`}}function lI(r,e){return{type:`xstate.done.state.${r}`,output:e}}function pge(r,e){return{type:`xstate.done.actor.${r}`,output:e,actorId:r}}function gge(r,e){return{type:`xstate.error.actor.${r}`,error:e,actorId:r}}function LK(r){return{type:NK,input:r}}function $c(r){setTimeout(()=>{throw r})}const mge=typeof Symbol=="function"&&Symbol.observable||"@@observable";function FK(r,e){const t=N$(r),n=N$(e);return typeof n=="string"?typeof t=="string"?n===t:!1:typeof t=="string"?t in n:Object.keys(t).every(i=>i in n?FK(t[i],n[i]):!1)}function T3(r){if(zK(r))return r;const e=[];let t="";for(let n=0;n<r.length;n++){switch(r.charCodeAt(n)){case 92:t+=r[n+1],n++;continue;case 46:e.push(t),t="";continue}t+=r[n]}return e.push(t),e}function N$(r){if(Xge(r))return r.value;if(typeof r!="string")return r;const e=T3(r);return yge(e)}function yge(r){if(r.length===1)return r[0];const e={};let t=e;for(let n=0;n<r.length-1;n++)if(n===r.length-2)t[r[n]]=r[n+1];else{const i=t;t={},i[r[n]]=t}return e}function L$(r,e){const t={},n=Object.keys(r);for(let i=0;i<n.length;i++){const s=n[i];t[s]=e(r[s],s,r,i)}return t}function UK(r){return zK(r)?r:[r]}function Jl(r){return r===void 0?[]:UK(r)}function uI(r,e,t,n){return typeof r=="function"?r({context:e,event:t,self:n}):r}function zK(r){return Array.isArray(r)}function vge(r){return r.type.startsWith("xstate.error.actor")}function Nh(r){return UK(r).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function qK(r){if(!(r===void 0||r===uge))return Jl(r)}function fI(r,e,t){const n=typeof r=="object",i=n?r:void 0;return{next:(n?r.next:r)?.bind(i),error:(n?r.error:e)?.bind(i),complete:(n?r.complete:t)?.bind(i)}}function F$(r,e){return`${e}.${r}`}function R3(r,e){const t=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!t)return r.implementations.actors[e];const[,n,i]=t,o=r.getStateNodeById(i).config.invoke;return(Array.isArray(o)?o[n]:o).src}function U$(r,e){return`${r.sessionId}.${e}`}let bge=0;function wge(r,e){const t=new Map,n=new Map,i=new WeakMap,s=new Set,o={},{clock:a,logger:c}=e,l={schedule:(h,d,g,p,m=Math.random().toString(36).slice(2))=>{const y={source:h,target:d,event:g,delay:p,id:m,startedAt:Date.now()},v=U$(h,m);f._snapshot._scheduledEvents[v]=y;const b=a.setTimeout(()=>{delete o[v],delete f._snapshot._scheduledEvents[v],f._relay(h,d,g)},p);o[v]=b},cancel:(h,d)=>{const g=U$(h,d),p=o[g];delete o[g],delete f._snapshot._scheduledEvents[g],p!==void 0&&a.clearTimeout(p)},cancelAll:h=>{for(const d in f._snapshot._scheduledEvents){const g=f._snapshot._scheduledEvents[d];g.source===h&&l.cancel(h,g.id)}}},u=h=>{if(!s.size)return;const d={...h,rootId:r.sessionId};s.forEach(g=>g.next?.(d))},f={_snapshot:{_scheduledEvents:(e?.snapshot&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${bge++}`,_register:(h,d)=>(t.set(h,d),h),_unregister:h=>{t.delete(h.sessionId);const d=i.get(h);d!==void 0&&(n.delete(d),i.delete(h))},get:h=>n.get(h),_set:(h,d)=>{const g=n.get(h);if(g&&g!==d)throw new Error(`Actor with system ID '${h}' already exists.`);n.set(h,d),i.set(d,h)},inspect:h=>{const d=fI(h);return s.add(d),{unsubscribe(){s.delete(d)}}},_sendInspectionEvent:u,_relay:(h,d,g)=>{f._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:d,event:g}),d._send(g)},scheduler:l,getSnapshot:()=>({_scheduledEvents:{...f._snapshot._scheduledEvents}}),start:()=>{const h=f._snapshot._scheduledEvents;f._snapshot._scheduledEvents={};for(const d in h){const{source:g,target:p,event:m,delay:y,id:v}=h[d];l.schedule(g,p,m,y,v)}},_clock:a,_logger:c};return f}let mE=!1;const k3=1;let Ps=function(r){return r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r}({});const xge={clock:{setTimeout:(r,e)=>setTimeout(r,e),clearTimeout:r=>clearTimeout(r)},logger:console.log.bind(console),devTools:!1};class _ge{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new B$(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Ps.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const n={...xge,...t},{clock:i,logger:s,parent:o,syncSnapshot:a,id:c,systemId:l,inspect:u}=n;this.system=o?o.system:wge(this,{clock:i,logger:s}),u&&!o&&this.system.inspect(fI(u)),this.sessionId=this.system._bookId(),this.id=c??this.sessionId,this.logger=t?.logger??this.system._logger,this.clock=t?.clock??this.system._clock,this._parent=o,this._syncSnapshot=a,this.options=n,this.src=n.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:f=>{this._deferred.push(f)},system:this.system,stopChild:f=>{if(f._parent!==this)throw new Error(`Cannot stop child actor ${f.id} of ${this.id} because it is not a child`);f._stop()},emit:f=>{const h=this.eventListeners.get(f.type),d=this.eventListeners.get("*");if(!h&&!d)return;const g=[...h?h.values():[],...d?d.values():[]];for(const p of g)p(f)},actionExecutor:f=>{const h=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:f.type,params:f.params}}),!f.exec)return;const d=mE;try{mE=!0,f.exec(f.info,f.params)}finally{mE=d}};this._processingStatus===Ps.Running?h():this._deferred.push(h)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),l&&(this._systemId=l,this.system._set(l,this)),this._initState(t?.snapshot??t?.state),l&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(t){this._snapshot={status:"error",output:void 0,error:t}}}update(e,t){this._snapshot=e;let n;for(;n=this._deferred.shift();)try{n()}catch(i){this._deferred.length=0,this._snapshot={...e,status:"error",error:i}}switch(this._snapshot.status){case"active":for(const i of this.observers)try{i.next?.(e)}catch(s){$c(s)}break;case"done":for(const i of this.observers)try{i.next?.(e)}catch(s){$c(s)}this._stopProcedure(),this._complete(),this._doneEvent=pge(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,n){const i=fI(e,t,n);if(this._processingStatus!==Ps.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{i.complete?.()}catch(s){$c(s)}break;case"error":{const s=this._snapshot.error;if(!i.error)$c(s);else try{i.error(s)}catch(o){$c(o)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,t){let n=this.eventListeners.get(e);n||(n=new Set,this.eventListeners.set(e,n));const i=t.bind(void 0);return n.add(i),{unsubscribe:()=>{n.delete(i)}}}start(){if(this._processingStatus===Ps.Running)return this;this._syncSnapshot&&this.subscribe({next:n=>{n.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:n})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Ps.Running;const e=LK(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(n){return this._snapshot={...this._snapshot,status:"error",error:n},this._error(n),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,n;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){n={err:i}}if(n){const{err:i}=n;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(t,e),e.type===vg&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Ps.Stopped?this:(this.mailbox.clear(),this._processingStatus===Ps.NotStarted?(this._processingStatus=Ps.Stopped,this):(this.mailbox.enqueue({type:vg}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const e of this.observers)try{e.complete?.()}catch(t){$c(t)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||$c(e);return}let t=!1;for(const n of this.observers){const i=n.error;t||=!i;try{i?.(e)}catch(s){$c(s)}}this.observers.clear(),t&&$c(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,gge(this.id,e))}_stopProcedure(){return this._processingStatus!==Ps.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new B$(this._process.bind(this)),this._processingStatus=Ps.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Ps.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:lge)(this)}toJSON(){return{xstate$$type:k3,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[mge](){return this}getSnapshot(){return this._snapshot}}function Ad(r,...[e]){return new _ge(r,e)}function Sge(r,e,t,n,{sendId:i}){const s=typeof i=="function"?i(t,n):i;return[e,{sendId:s},void 0]}function Ege(r,e){r.defer(()=>{r.system.scheduler.cancel(r.self,e.sendId)})}function Age(r){function e(t,n){}return e.type="xstate.cancel",e.sendId=r,e.resolve=Sge,e.execute=Ege,e}function Ige(r,e,t,n,{id:i,systemId:s,src:o,input:a,syncSnapshot:c}){const l=typeof o=="string"?R3(e.machine,o):o,u=typeof i=="function"?i(t):i;let f,h;return l&&(h=typeof a=="function"?a({context:e.context,event:t.event,self:r.self}):a,f=Ad(l,{id:u,src:o,parent:r.self,syncSnapshot:c,systemId:s,input:h})),[If(e,{children:{...e.children,[u]:f}}),{id:i,systemId:s,actorRef:f,src:o,input:h},void 0]}function Cge(r,{actorRef:e}){e&&r.defer(()=>{e._processingStatus!==Ps.Stopped&&e.start()})}function Tge(...[r,{id:e,systemId:t,input:n,syncSnapshot:i=!1}={}]){function s(o,a){}return s.type="xstate.spawnChild",s.id=e,s.systemId=t,s.src=r,s.input=n,s.syncSnapshot=i,s.resolve=Ige,s.execute=Cge,s}function Rge(r,e,t,n,{actorRef:i}){const s=typeof i=="function"?i(t,n):i,o=typeof s=="string"?e.children[s]:s;let a=e.children;return o&&(a={...a},delete a[o.id]),[If(e,{children:a}),o,void 0]}function kge(r,e){if(e){if(r.system._unregister(e),e._processingStatus!==Ps.Running){r.stopChild(e);return}r.defer(()=>{r.stopChild(e)})}}function jK(r){function e(t,n){}return e.type="xstate.stopChild",e.actorRef=r,e.resolve=Rge,e.execute=kge,e}function P3(r,e,t,n){const{machine:i}=n,s=typeof r=="function",o=s?r:i.implementations.guards[typeof r=="string"?r:r.type];if(!s&&!o)throw new Error(`Guard '${typeof r=="string"?r:r.type}' is not implemented.'.`);if(typeof o!="function")return P3(o,e,t,n);const a={context:e,event:t},c=s||typeof r=="string"?void 0:"params"in r?typeof r.params=="function"?r.params({context:e,event:t}):r.params:void 0;return"check"in o?o.check(n,a,o):o(a,c)}const O3=r=>r.type==="atomic"||r.type==="final";function Id(r){return Object.values(r.states).filter(e=>e.type!=="history")}function Zg(r,e){const t=[];if(e===r)return t;let n=r.parent;for(;n&&n!==e;)t.push(n),n=n.parent;return t}function Rv(r){const e=new Set(r),t=KK(e);for(const n of e)if(n.type==="compound"&&(!t.get(n)||!t.get(n).length))z$(n).forEach(i=>e.add(i));else if(n.type==="parallel"){for(const i of Id(n))if(i.type!=="history"&&!e.has(i)){const s=z$(i);for(const o of s)e.add(o)}}for(const n of e){let i=n.parent;for(;i;)e.add(i),i=i.parent}return e}function VK(r,e){const t=e.get(r);if(!t)return{};if(r.type==="compound"){const i=t[0];if(i){if(O3(i))return i.key}else return{}}const n={};for(const i of t)n[i.key]=VK(i,e);return n}function KK(r){const e=new Map;for(const t of r)e.has(t)||e.set(t,[]),t.parent&&(e.has(t.parent)||e.set(t.parent,[]),e.get(t.parent).push(t));return e}function HK(r,e){const t=Rv(e);return VK(r,KK(t))}function D3(r,e){return e.type==="compound"?Id(e).some(t=>t.type==="final"&&r.has(t)):e.type==="parallel"?Id(e).every(t=>D3(r,t)):e.type==="final"}const dw=r=>r[0]===fge;function Pge(r,e){return r.transitions.get(e)||[...r.transitions.keys()].filter(n=>{if(n===hge)return!0;if(!n.endsWith(".*"))return!1;const i=n.split("."),s=e.split(".");for(let o=0;o<i.length;o++){const a=i[o],c=s[o];if(a==="*")return o===i.length-1;if(a!==c)return!1}return!0}).sort((n,i)=>i.length-n.length).flatMap(n=>r.transitions.get(n))}function Oge(r){const e=r.config.after;if(!e)return[];const t=i=>{const s=dge(i,r.id),o=s.type;return r.entry.push(sme(s,{id:o,delay:i})),r.exit.push(Age(o)),o};return Object.keys(e).flatMap(i=>{const s=e[i],o=typeof s=="string"?{target:s}:s,a=Number.isNaN(+i)?i:+i,c=t(a);return Jl(o).map(l=>({...l,event:c,delay:a}))}).map(i=>{const{delay:s}=i;return{...Xu(r,i.event,i),delay:s}})}function Xu(r,e,t){const n=qK(t.target),i=t.reenter??!1,s=Mge(r,n),o={...t,actions:Jl(t.actions),guard:t.guard,target:s,source:r,reenter:i,eventType:e,toJSON:()=>({...o,source:`#${r.id}`,target:s?s.map(a=>`#${a.id}`):void 0})};return o}function Dge(r){const e=new Map;if(r.config.on)for(const t of Object.keys(r.config.on)){if(t===BK)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const n=r.config.on[t];e.set(t,Nh(n).map(i=>Xu(r,t,i)))}if(r.config.onDone){const t=`xstate.done.state.${r.id}`;e.set(t,Nh(r.config.onDone).map(n=>Xu(r,t,n)))}for(const t of r.invoke){if(t.onDone){const n=`xstate.done.actor.${t.id}`;e.set(n,Nh(t.onDone).map(i=>Xu(r,n,i)))}if(t.onError){const n=`xstate.error.actor.${t.id}`;e.set(n,Nh(t.onError).map(i=>Xu(r,n,i)))}if(t.onSnapshot){const n=`xstate.snapshot.${t.id}`;e.set(n,Nh(t.onSnapshot).map(i=>Xu(r,n,i)))}}for(const t of r.after){let n=e.get(t.eventType);n||(n=[],e.set(t.eventType,n)),n.push(t)}return e}function $ge(r,e){const t=typeof e=="string"?r.states[e]:e?r.states[e.target]:void 0;if(!t&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${r.id}`);const n={source:r,actions:!e||typeof e=="string"?[]:Jl(e.actions),eventType:null,reenter:!1,target:t?[t]:[],toJSON:()=>({...n,source:`#${r.id}`,target:t?[`#${t.id}`]:[]})};return n}function Mge(r,e){if(e!==void 0)return e.map(t=>{if(typeof t!="string")return t;if(dw(t))return r.machine.getStateNodeById(t);const n=t[0]===MK;if(n&&!r.parent)return kv(r,t.slice(1));const i=n?r.key+t:t;if(r.parent)try{return kv(r.parent,i)}catch(s){throw new Error(`Invalid transition definition for state node '${r.id}':
${s.message}`)}else throw new Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}function WK(r){const e=qK(r.config.target);return e?{target:e.map(t=>typeof t=="string"?kv(r.parent,t):t)}:r.parent.initial}function sf(r){return r.type==="history"}function z$(r){const e=GK(r);for(const t of e)for(const n of Zg(t,r))e.add(n);return e}function GK(r){const e=new Set;function t(n){if(!e.has(n)){if(e.add(n),n.type==="compound")t(n.initial.target[0]);else if(n.type==="parallel")for(const i of Id(n))t(i)}}return t(r),e}function Cd(r,e){if(dw(e))return r.machine.getStateNodeById(e);if(!r.states)throw new Error(`Unable to retrieve child state '${e}' from '${r.id}'; no child states exist.`);const t=r.states[e];if(!t)throw new Error(`Child state '${e}' does not exist on '${r.id}'`);return t}function kv(r,e){if(typeof e=="string"&&dw(e))try{return r.machine.getStateNodeById(e)}catch{}const t=T3(e).slice();let n=r;for(;t.length;){const i=t.shift();if(!i.length)break;n=Cd(n,i)}return n}function Pv(r,e){if(typeof e=="string"){const i=r.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${r.id}'`);return[r,i]}const t=Object.keys(e),n=t.map(i=>Cd(r,i)).filter(Boolean);return[r.machine.root,r].concat(n,t.reduce((i,s)=>{const o=Cd(r,s);if(!o)return i;const a=Pv(o,e[s]);return i.concat(a)},[]))}function Bge(r,e,t,n){const s=Cd(r,e).next(t,n);return!s||!s.length?r.next(t,n):s}function Nge(r,e,t,n){const i=Object.keys(e),s=Cd(r,i[0]),o=$3(s,e[i[0]],t,n);return!o||!o.length?r.next(t,n):o}function Lge(r,e,t,n){const i=[];for(const s of Object.keys(e)){const o=e[s];if(!o)continue;const a=Cd(r,s),c=$3(a,o,t,n);c&&i.push(...c)}return i.length?i:r.next(t,n)}function $3(r,e,t,n){return typeof e=="string"?Bge(r,e,t,n):Object.keys(e).length===1?Nge(r,e,t,n):Lge(r,e,t,n)}function Fge(r){return Object.keys(r.states).map(e=>r.states[e]).filter(e=>e.type==="history")}function wu(r,e){let t=r;for(;t.parent&&t.parent!==e;)t=t.parent;return t.parent===e}function Uge(r,e){const t=new Set(r),n=new Set(e);for(const i of t)if(n.has(i))return!0;for(const i of n)if(t.has(i))return!0;return!1}function YK(r,e,t){const n=new Set;for(const i of r){let s=!1;const o=new Set;for(const a of n)if(Uge(hI([i],e,t),hI([a],e,t)))if(wu(i.source,a.source))o.add(a);else{s=!0;break}if(!s){for(const a of o)n.delete(a);n.add(i)}}return Array.from(n)}function zge(r){const[e,...t]=r;for(const n of Zg(e,void 0))if(t.every(i=>wu(i,n)))return n}function M3(r,e){if(!r.target)return[];const t=new Set;for(const n of r.target)if(sf(n))if(e[n.id])for(const i of e[n.id])t.add(i);else for(const i of M3(WK(n),e))t.add(i);else t.add(n);return[...t]}function XK(r,e){const t=M3(r,e);if(!t)return;if(!r.reenter&&t.every(i=>i===r.source||wu(i,r.source)))return r.source;const n=zge(t.concat(r.source));if(n)return n;if(!r.reenter)return r.source.machine.root}function hI(r,e,t){const n=new Set;for(const i of r)if(i.target?.length){const s=XK(i,t);i.reenter&&i.source===s&&n.add(s);for(const o of e)wu(o,s)&&n.add(o)}return[...n]}function qge(r,e){if(r.length!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;return!0}function dI(r,e,t,n,i,s){if(!r.length)return e;const o=new Set(e._nodes);let a=e.historyValue;const c=YK(r,o,a);let l=e;i||([l,a]=Hge(l,n,t,c,o,a,s,t.actionExecutor)),l=Td(l,n,t,c.flatMap(f=>f.actions),s,void 0),l=Vge(l,n,t,c,o,s,a,i);const u=[...o];l.status==="done"&&(l=Td(l,n,t,u.sort((f,h)=>h.order-f.order).flatMap(f=>f.exit),s,void 0));try{return a===e.historyValue&&qge(e._nodes,o)?l:If(l,{_nodes:u,historyValue:a})}catch(f){throw f}}function jge(r,e,t,n,i){if(n.output===void 0)return;const s=lI(i.id,i.output!==void 0&&i.parent?uI(i.output,r.context,e,t.self):void 0);return uI(n.output,r.context,s,t.self)}function Vge(r,e,t,n,i,s,o,a){let c=r;const l=new Set,u=new Set;Kge(n,o,u,l),a&&u.add(r.machine.root);const f=new Set;for(const h of[...l].sort((d,g)=>d.order-g.order)){i.add(h);const d=[];d.push(...h.entry);for(const g of h.invoke)d.push(Tge(g.src,{...g,syncSnapshot:!!g.onSnapshot}));if(u.has(h)){const g=h.initial.actions;d.push(...g)}if(c=Td(c,e,t,d,s,h.invoke.map(g=>g.id)),h.type==="final"){const g=h.parent;let p=g?.type==="parallel"?g:g?.parent,m=p||h;for(g?.type==="compound"&&s.push(lI(g.id,h.output!==void 0?uI(h.output,c.context,e,t.self):void 0));p?.type==="parallel"&&!f.has(p)&&D3(i,p);)f.add(p),s.push(lI(p.id)),m=p,p=p.parent;if(p)continue;c=If(c,{status:"done",output:jge(c,e,t,c.machine.root,m)})}}return c}function Kge(r,e,t,n){for(const i of r){const s=XK(i,e);for(const a of i.target||[])!sf(a)&&(i.source!==a||i.source!==s||i.reenter)&&(n.add(a),t.add(a)),Vh(a,e,t,n);const o=M3(i,e);for(const a of o){const c=Zg(a,s);s?.type==="parallel"&&c.push(s),JK(n,e,t,c,!i.source.parent&&i.reenter?void 0:s)}}}function Vh(r,e,t,n){if(sf(r))if(e[r.id]){const i=e[r.id];for(const s of i)n.add(s),Vh(s,e,t,n);for(const s of i)yE(s,r.parent,n,e,t)}else{const i=WK(r);for(const s of i.target)n.add(s),i===r.parent?.initial&&t.add(r.parent),Vh(s,e,t,n);for(const s of i.target)yE(s,r.parent,n,e,t)}else if(r.type==="compound"){const[i]=r.initial.target;sf(i)||(n.add(i),t.add(i)),Vh(i,e,t,n),yE(i,r,n,e,t)}else if(r.type==="parallel")for(const i of Id(r).filter(s=>!sf(s)))[...n].some(s=>wu(s,i))||(sf(i)||(n.add(i),t.add(i)),Vh(i,e,t,n))}function JK(r,e,t,n,i){for(const s of n)if((!i||wu(s,i))&&r.add(s),s.type==="parallel")for(const o of Id(s).filter(a=>!sf(a)))[...r].some(a=>wu(a,o))||(r.add(o),Vh(o,e,t,r))}function yE(r,e,t,n,i){JK(t,n,i,Zg(r,e))}function Hge(r,e,t,n,i,s,o,a){let c=r;const l=hI(n,i,s);l.sort((f,h)=>h.order-f.order);let u;for(const f of l)for(const h of Fge(f)){let d;h.history==="deep"?d=g=>O3(g)&&wu(g,f):d=g=>g.parent===f,u??={...s},u[h.id]=Array.from(i).filter(d)}for(const f of l)c=Td(c,e,t,[...f.exit,...f.invoke.map(h=>jK(h.id))],o,void 0),i.delete(f);return[c,u||s]}function Wge(r,e){return r.implementations.actions[e]}function QK(r,e,t,n,i,s){const{machine:o}=r;let a=r;for(const c of n){const l=typeof c=="function",u=l?c:Wge(o,typeof c=="string"?c:c.type),f={context:a.context,event:e,self:t.self,system:t.system},h=l||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:a.context,event:e}):c.params:void 0;if(!u||!("resolve"in u)){t.actionExecutor({type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",info:f,params:h,exec:u});continue}const d=u,[g,p,m]=d.resolve(t,a,f,h,u,i);a=g,"retryResolve"in d&&s?.push([d,p]),"execute"in d&&t.actionExecutor({type:d.type,info:f,params:p,exec:d.execute.bind(null,t,p)}),m&&(a=QK(a,e,t,m,i,s))}return a}function Td(r,e,t,n,i,s){const o=s?[]:void 0,a=QK(r,e,t,n,{internalQueue:i,deferredActorIds:s},o);return o?.forEach(([c,l])=>{c.retryResolve(t,a,l)}),a}function vE(r,e,t,n){let i=r;const s=[];function o(l,u,f){t.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:t.self,event:u,snapshot:l,_transitions:f}),s.push(l)}if(e.type===vg)return i=If(q$(i,e,t),{status:"stopped"}),o(i,e,[]),{snapshot:i,microstates:s};let a=e;if(a.type!==NK){const l=a,u=vge(l),f=j$(l,i);if(u&&!f.length)return i=If(r,{status:"error",error:l.error}),o(i,l,[]),{snapshot:i,microstates:s};i=dI(f,r,t,a,!1,n),o(i,l,f)}let c=!0;for(;i.status==="active";){let l=c?Gge(i,a):[];const u=l.length?i:void 0;if(!l.length){if(!n.length)break;a=n.shift(),l=j$(a,i)}i=dI(l,i,t,a,!1,n),c=i!==u,o(i,a,l)}return i.status!=="active"&&q$(i,a,t),{snapshot:i,microstates:s}}function q$(r,e,t){return Td(r,e,t,Object.values(r.children).map(n=>jK(n)),[],void 0)}function j$(r,e){return e.machine.getTransitionData(e,r)}function Gge(r,e){const t=new Set,n=r._nodes.filter(O3);for(const i of n)e:for(const s of[i].concat(Zg(i,void 0)))if(s.always){for(const o of s.always)if(o.guard===void 0||P3(o.guard,r.context,e,r)){t.add(o);break e}}return YK(Array.from(t),new Set(r._nodes),r.historyValue)}function Yge(r,e){const t=Rv(Pv(r,e));return HK(r,[...t])}function Xge(r){return!!r&&typeof r=="object"&&"machine"in r&&"value"in r}const Jge=function(e){return FK(e,this.value)},Qge=function(e){return this.tags.has(e)},Zge=function(e){const t=this.machine.getTransitionData(this,e);return!!t?.length&&t.some(n=>n.target!==void 0||n.actions.length)},eme=function(){const{_nodes:e,tags:t,machine:n,getMeta:i,toJSON:s,can:o,hasTag:a,matches:c,...l}=this;return{...l,tags:Array.from(t)}},tme=function(){return this._nodes.reduce((e,t)=>(t.meta!==void 0&&(e[t.id]=t.meta),e),{})};function $y(r,e){return{status:r.status,output:r.output,error:r.error,machine:e,context:r.context,_nodes:r._nodes,value:HK(e.root,r._nodes),tags:new Set(r._nodes.flatMap(t=>t.tags)),children:r.children,historyValue:r.historyValue||{},matches:Jge,hasTag:Qge,can:Zge,getMeta:tme,toJSON:eme}}function If(r,e={}){return $y({...r,...e},r.machine)}function rme(r,e){const{_nodes:t,tags:n,machine:i,children:s,context:o,can:a,hasTag:c,matches:l,getMeta:u,toJSON:f,...h}=r,d={};for(const p in s){const m=s[p];d[p]={snapshot:m.getPersistedSnapshot(e),src:m.src,systemId:m._systemId,syncSnapshot:m._syncSnapshot}}return{...h,context:ZK(o),children:d}}function ZK(r){let e;for(const t in r){const n=r[t];if(n&&typeof n=="object")if("sessionId"in n&&"send"in n&&"ref"in n)e??=Array.isArray(r)?r.slice():{...r},e[t]={xstate$$type:k3,id:n.id};else{const i=ZK(n);i!==n&&(e??=Array.isArray(r)?r.slice():{...r},e[t]=i)}}return e??r}function nme(r,e,t,n,{event:i,id:s,delay:o},{internalQueue:a}){const c=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const l=typeof i=="function"?i(t,n):i;let u;if(typeof o=="string"){const f=c&&c[o];u=typeof f=="function"?f(t,n):f}else u=typeof o=="function"?o(t,n):o;return typeof u!="number"&&a.push(l),[e,{event:l,id:s,delay:u},void 0]}function ime(r,e){const{event:t,delay:n,id:i}=e;if(typeof n=="number"){r.defer(()=>{const s=r.self;r.system.scheduler.schedule(s,s,t,n,i)});return}}function sme(r,e){function t(n,i){}return t.type="xstate.raise",t.event=r,t.id=e?.id,t.delay=e?.delay,t.resolve=nme,t.execute=ime,t}const V$="xstate.observable.next",K$="xstate.observable.error",H$="xstate.observable.complete";function ome(r){return{config:r,transition:(t,n)=>{if(t.status!=="active")return t;switch(n.type){case V$:return{...t,context:n.data};case K$:return{...t,status:"error",error:n.data,input:void 0,_subscription:void 0};case H$:return{...t,status:"done",input:void 0,_subscription:void 0};case vg:return t._subscription.unsubscribe(),{...t,status:"stopped",input:void 0,_subscription:void 0};default:return t}},getInitialSnapshot:(t,n)=>({status:"active",output:void 0,error:void 0,context:void 0,input:n,_subscription:void 0}),start:(t,{self:n,system:i,emit:s})=>{t.status!=="done"&&(t._subscription=r({input:t.input,system:i,self:n,emit:s}).subscribe({next:o=>{i._relay(n,n,{type:V$,data:o})},error:o=>{i._relay(n,n,{type:K$,data:o})},complete:()=>{i._relay(n,n,{type:H$})}}))},getPersistedSnapshot:({_subscription:t,...n})=>n,restoreSnapshot:t=>({...t,_subscription:void 0})}}const W$="xstate.promise.resolve",G$="xstate.promise.reject",Ym=new WeakMap;function Wo(r){return{config:r,transition:(t,n,i)=>{if(t.status!=="active")return t;switch(n.type){case W$:{const s=n.data;return{...t,status:"done",output:s,input:void 0}}case G$:return{...t,status:"error",error:n.data,input:void 0};case vg:return Ym.get(i.self)?.abort(),{...t,status:"stopped",input:void 0};default:return t}},start:(t,{self:n,system:i,emit:s})=>{if(t.status!=="active")return;const o=new AbortController;Ym.set(n,o),Promise.resolve(r({input:t.input,system:i,self:n,signal:o.signal,emit:s})).then(c=>{n.getSnapshot().status==="active"&&(Ym.delete(n),i._relay(n,n,{type:W$,data:c}))},c=>{n.getSnapshot().status==="active"&&(Ym.delete(n),i._relay(n,n,{type:G$,data:c}))})},getInitialSnapshot:(t,n)=>({status:"active",output:void 0,error:void 0,input:n}),getPersistedSnapshot:t=>t,restoreSnapshot:t=>t}}function ame(r,{machine:e,context:t},n,i){const s=(o,a)=>{if(typeof o=="string"){const c=R3(e,o);if(!c)throw new Error(`Actor logic '${o}' not implemented in machine '${e.id}'`);const l=Ad(c,{id:a?.id,parent:r.self,syncSnapshot:a?.syncSnapshot,input:typeof a?.input=="function"?a.input({context:t,event:n,self:r.self}):a?.input,src:o,systemId:a?.systemId});return i[l.id]=l,l}else return Ad(o,{id:a?.id,parent:r.self,syncSnapshot:a?.syncSnapshot,input:a?.input,src:o,systemId:a?.systemId})};return(o,a)=>{const c=s(o,a);return i[c.id]=c,r.defer(()=>{c._processingStatus!==Ps.Stopped&&c.start()}),c}}function cme(r,e,t,n,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},o={context:e.context,event:t.event,spawn:ame(r,e,t.event,s),self:r.self,system:r.system};let a={};if(typeof i=="function")a=i(o,n);else for(const l of Object.keys(i)){const u=i[l];a[l]=typeof u=="function"?u(o,n):u}const c=Object.assign({},e.context,a);return[If(e,{context:c,children:Object.keys(s).length?{...e.children,...s}:e.children}),void 0,void 0]}function qt(r){function e(t,n){}return e.type="xstate.assign",e.assignment=r,e.resolve=cme,e}function lme(r,e,t,n,{event:i}){const s=typeof i=="function"?i(t,n):i;return[e,{event:s},void 0]}function ume(r,{event:e}){r.defer(()=>r.emit(e))}function fme(r){function e(t,n){}return e.type="xstate.emit",e.event=r,e.resolve=lme,e.execute=ume,e}const Y$=new WeakMap;function Sh(r,e,t){let n=Y$.get(r);return n?e in n||(n[e]=t()):(n={[e]:t()},Y$.set(r,n)),n[e]}const hme={},Hp=r=>typeof r=="string"?{type:r}:typeof r=="function"?"resolve"in r?{type:r.type}:{type:r.name}:r;class B3{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(MK),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?L$(this.config.states,(n,i)=>new B3(n,{_parent:this,_key:i,_machine:this.machine})):hme,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Jl(this.config.entry).slice(),this.exit=Jl(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Jl(e.tags).slice()}_initialize(){this.transitions=Dge(this),this.config.always&&(this.always=Nh(this.config.always).map(e=>Xu(this,BK,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Hp),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Hp),eventType:null})}:void 0,history:this.history,states:L$(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(Hp)})),entry:this.entry.map(Hp),exit:this.exit.map(Hp),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Sh(this,"invoke",()=>Jl(this.config.invoke).map((e,t)=>{const{src:n,systemId:i}=e,s=e.id??F$(this.id,t),o=typeof n=="string"?n:`xstate.invoke.${F$(this.id,t)}`;return{...e,src:o,id:s,systemId:i,toJSON(){const{onDone:a,onError:c,...l}=e;return{...l,type:"xstate.invoke",src:o,id:s}}}}))}get on(){return Sh(this,"on",()=>[...this.transitions].flatMap(([t,n])=>n.map(i=>[t,i])).reduce((t,[n,i])=>(t[n]=t[n]||[],t[n].push(i),t),{}))}get after(){return Sh(this,"delayedTransitions",()=>Oge(this))}get initial(){return Sh(this,"initial",()=>$ge(this,this.config.initial))}next(e,t){const n=t.type,i=[];let s;const o=Sh(this,`candidates-${n}`,()=>Pge(this,n));for(const a of o){const{guard:c}=a,l=e.context;let u=!1;try{u=!c||P3(c,l,t,e)}catch(f){const h=typeof c=="string"?c:typeof c=="object"?c.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${n}' in state node '${this.id}':
${f.message}`)}if(u){i.push(...a.actions),s=a;break}}return s?[s]:void 0}get events(){return Sh(this,"events",()=>{const{states:e}=this,t=new Set(this.ownEvents);if(e)for(const n of Object.keys(e)){const i=e[n];if(i.states)for(const s of i.events)t.add(`${s}`)}return Array.from(t)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(n=>!(!n.target&&!n.actions.length&&!n.reenter))));return Array.from(e)}}const dme="#";class N3{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:t?.actors??{},actions:t?.actions??{},delays:t?.delays??{},guards:t?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new B3(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:t,guards:n,actors:i,delays:s}=this.implementations;return new N3(this.config,{actions:{...t,...e.actions},guards:{...n,...e.guards},actors:{...i,...e.actors},delays:{...s,...e.delays}})}resolveState(e){const t=Yge(this.root,e.value),n=Rv(Pv(this.root,t));return $y({_nodes:[...n],context:e.context||{},children:{},status:D3(n,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,n){return vE(e,t,n,[]).snapshot}microstep(e,t,n){return vE(e,t,n,[]).microstates}getTransitionData(e,t){return $3(this.root,e.value,e,t)||[]}getPreInitialState(e,t,n){const{context:i}=this.config,s=$y({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?Td(s,t,e,[qt(({spawn:a,event:c,self:l})=>i({spawn:a,input:c.input,self:l}))],n,void 0):s}getInitialSnapshot(e,t){const n=LK(t),i=[],s=this.getPreInitialState(e,n,i),o=dI([{target:[...GK(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,n,!0,i),{snapshot:a}=vE(o,n,e,i);return a}start(e){Object.values(e.children).forEach(t=>{t.getSnapshot().status==="active"&&t.start()})}getStateNodeById(e){const t=T3(e),n=t.slice(1),i=dw(t[0])?t[0].slice(dme.length):t[0],s=this.idMap.get(i);if(!s)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return kv(s,n)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){return rme(e,t)}restoreSnapshot(e,t){const n={},i=e.children;Object.keys(i).forEach(c=>{const l=i[c],u=l.snapshot,f=l.src,h=typeof f=="string"?R3(this,f):f;if(!h)return;const d=Ad(h,{id:c,parent:t.self,syncSnapshot:l.syncSnapshot,snapshot:u,src:f,systemId:l.systemId});n[c]=d});const s=$y({...e,children:n,_nodes:Array.from(Rv(Pv(this.root,e.value)))},this),o=new Set;function a(c,l){if(!o.has(c)){o.add(c);for(const u in c){const f=c[u];if(f&&typeof f=="object"){if("xstate$$type"in f&&f.xstate$$type===k3){c[u]=l[f.id];continue}a(f,l)}}}}return a(s.context,n),s}}function pme(r,e){return new N3(r,e)}function Yf({schemas:r,actors:e,actions:t,guards:n,delays:i}){return{createMachine:s=>pme({...s,schemas:r},{actors:e,actions:t,guards:n,delays:i})}}let eH=class{_tag="DeviceNotOnboardedError";originalError;constructor(e){this.originalError=new Error(e??"Device not onboarded.")}},gme=class{_tag="DeviceLockedError";originalError;constructor(e){this.originalError=new Error(e??"Device locked.")}},Yc=class{_tag="UnknownDAError";originalError;constructor(e){this.originalError=new Error(e??"Unknown error.")}};const tH=6e4;function fi(r){return typeof r=="function"}function L3(r){var e=function(n){Error.call(n),n.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var bE=L3(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Ov(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}var em=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,n,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=mu(o),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(p){e={error:p}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(fi(u))try{u()}catch(p){s=p instanceof bE?p.errors:[p]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var h=mu(f),d=h.next();!d.done;d=h.next()){var g=d.value;try{X$(g)}catch(p){s=s??[],p instanceof bE?s=Af(Af([],yu(s)),yu(p.errors)):s.push(p)}}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}if(s)throw new bE(s)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)X$(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Ov(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&Ov(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}(),rH=em.EMPTY;function nH(r){return r instanceof em||r&&"closed"in r&&fi(r.remove)&&fi(r.add)&&fi(r.unsubscribe)}function X$(r){fi(r)?r():r.unsubscribe()}var mme={Promise:void 0},yme={setTimeout:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,Af([r,e],yu(t)))},clearTimeout:function(r){return clearTimeout(r)},delegate:void 0};function iH(r){yme.setTimeout(function(){throw r})}function J$(){}function My(r){r()}var F3=function(r){ta(e,r);function e(t){var n=r.call(this)||this;return n.isStopped=!1,t?(n.destination=t,nH(t)&&t.add(n)):n.destination=wme,n}return e.create=function(t,n,i){return new bg(t,n,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(em),vme=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){Xm(n)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){Xm(n)}else Xm(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Xm(t)}},r}(),bg=function(r){ta(e,r);function e(t,n,i){var s=r.call(this)||this,o;return fi(t)||!t?o={next:t??void 0,error:n??void 0,complete:i??void 0}:o=t,s.destination=new vme(o),s}return e}(F3);function Xm(r){iH(r)}function bme(r){throw r}var wme={closed:!0,next:J$,error:bme,complete:J$},U3=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function sH(r){return r}function xme(r){return r.length===0?sH:r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}}var Vs=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this,s=Sme(e)?e:new bg(e,t,n);return My(function(){var o=i,a=o.operator,c=o.source;s.add(a?a.call(s,c):c?i._subscribe(s):i._trySubscribe(s))}),s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var n=this;return t=Q$(t),new t(function(i,s){var o=new bg({next:function(a){try{e(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});n.subscribe(o)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[U3]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return xme(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=Q$(e),new e(function(n,i){var s;t.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},r.create=function(e){return new r(e)},r}();function Q$(r){var e;return(e=r??mme.Promise)!==null&&e!==void 0?e:Promise}function _me(r){return r&&fi(r.next)&&fi(r.error)&&fi(r.complete)}function Sme(r){return r&&r instanceof F3||_me(r)&&nH(r)}function Eme(r){return fi(r?.lift)}function xl(r){return function(e){if(Eme(e))return e.lift(function(t){try{return r(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function ll(r,e,t,n,i){return new Ame(r,e,t,n,i)}var Ame=function(r){ta(e,r);function e(t,n,i,s,o,a){var c=r.call(this,t)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=n?function(l){try{n(l)}catch(u){t.error(u)}}:r.prototype._next,c._error=s?function(l){try{s(l)}catch(u){t.error(u)}finally{this.unsubscribe()}}:r.prototype._error,c._complete=i?function(){try{i()}catch(l){t.error(l)}finally{this.unsubscribe()}}:r.prototype._complete,c}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(F3),Ime=L3(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),tm=function(r){ta(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var n=new Z$(this,this);return n.operator=t,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new Ime},e.prototype.next=function(t){var n=this;My(function(){var i,s;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var o=mu(n.currentObservers),a=o.next();!a.done;a=o.next()){var c=a.value;c.next(t)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(t){var n=this;My(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var i=n.observers;i.length;)i.shift().error(t)}})},e.prototype.complete=function(){var t=this;My(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var n=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?rH:(this.currentObservers=null,a.push(t),new em(function(){n.currentObservers=null,Ov(a,t)}))},e.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,s=n.thrownError,o=n.isStopped;i?t.error(s):o&&t.complete()},e.prototype.asObservable=function(){var t=new Vs;return t.source=this,t},e.create=function(t,n){return new Z$(t,n)},e}(Vs),Z$=function(r){ta(e,r);function e(t,n){var i=r.call(this)||this;return i.destination=t,i.source=n,i}return e.prototype.next=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)},e.prototype.error=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)},e.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},e.prototype._subscribe=function(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:rH},e}(tm),oH=function(r){ta(e,r);function e(t){var n=r.call(this)||this;return n._value=t,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var n=r.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},e.prototype.getValue=function(){var t=this,n=t.hasError,i=t.thrownError,s=t._value;if(n)throw i;return this._throwIfClosed(),s},e.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},e}(tm),z3={now:function(){return(z3.delegate||Date).now()},delegate:void 0},aH=function(r){ta(e,r);function e(t,n,i){t===void 0&&(t=1/0),n===void 0&&(n=1/0),i===void 0&&(i=z3);var s=r.call(this)||this;return s._bufferSize=t,s._windowTime=n,s._timestampProvider=i,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=n===1/0,s._bufferSize=Math.max(1,t),s._windowTime=Math.max(1,n),s}return e.prototype.next=function(t){var n=this,i=n.isStopped,s=n._buffer,o=n._infiniteTimeWindow,a=n._timestampProvider,c=n._windowTime;i||(s.push(t),!o&&s.push(a.now()+c)),this._trimBuffer(),r.prototype.next.call(this,t)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),i=this,s=i._infiniteTimeWindow,o=i._buffer,a=o.slice(),c=0;c<a.length&&!t.closed;c+=s?1:2)t.next(a[c]);return this._checkFinalizedStatuses(t),n},e.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,i=t._timestampProvider,s=t._buffer,o=t._infiniteTimeWindow,a=(o?1:2)*n;if(n<1/0&&a<s.length&&s.splice(0,s.length-a),!o){for(var c=i.now(),l=0,u=1;u<s.length&&s[u]<=c;u+=2)l=u;l&&s.splice(0,l+1)}},e}(tm),Cme=function(r){ta(e,r);function e(t,n){return r.call(this)||this}return e.prototype.schedule=function(t,n){return this},e}(em),eM={setInterval:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setInterval.apply(void 0,Af([r,e],yu(t)))},clearInterval:function(r){return clearInterval(r)},delegate:void 0},Tme=function(r){ta(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(t,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this},e.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),eM.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&eM.clearInterval(n)},e.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,n){var i=!1,s;try{this.work(t)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,i=t.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Ov(s,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},e}(Cme),tM=function(){function r(e,t){t===void 0&&(t=r.now),this.schedulerActionCtor=e,this.now=t}return r.prototype.schedule=function(e,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},r.now=z3.now,r}(),Rme=function(r){ta(e,r);function e(t,n){n===void 0&&(n=tM.now);var i=r.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}},e}(tM),q3=new Rme(Tme),kme=q3,j3=new Vs(function(r){return r.complete()});function cH(r){return r&&fi(r.schedule)}function lH(r){return r[r.length-1]}function uH(r){return cH(lH(r))?r.pop():void 0}function Pme(r,e){return typeof lH(r)=="number"?r.pop():e}var fH=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function hH(r){return fi(r?.then)}function dH(r){return fi(r[U3])}function pH(r){return Symbol.asyncIterator&&fi(r?.[Symbol.asyncIterator])}function gH(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Ome(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mH=Ome();function yH(r){return fi(r?.[mH])}function vH(r){return ZR(this,arguments,function(){var t,n,i,s;return tw(this,function(o){switch(o.label){case 0:t=r.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,rl(t.read())];case 3:return n=o.sent(),i=n.value,s=n.done,s?[4,rl(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,rl(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function bH(r){return fi(r?.getReader)}function Ec(r){if(r instanceof Vs)return r;if(r!=null){if(dH(r))return Dme(r);if(fH(r))return $me(r);if(hH(r))return Mme(r);if(pH(r))return wH(r);if(yH(r))return Bme(r);if(bH(r))return Nme(r)}throw gH(r)}function Dme(r){return new Vs(function(e){var t=r[U3]();if(fi(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $me(r){return new Vs(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function Mme(r){return new Vs(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,iH)})}function Bme(r){return new Vs(function(e){var t,n;try{for(var i=mu(r),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}e.complete()})}function wH(r){return new Vs(function(e){Lme(r,e).catch(function(t){return e.error(t)})})}function Nme(r){return wH(vH(r))}function Lme(r,e){var t,n,i,s;return QR(this,void 0,void 0,function(){var o,a;return tw(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=e3(r),c.label=1;case 1:return[4,t.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(o=n.value,e.next(o),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function nu(r,e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var s=e.schedule(function(){t(),i?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(s),!i)return s}function xH(r,e){return e===void 0&&(e=0),xl(function(t,n){t.subscribe(ll(n,function(i){return nu(n,r,function(){return n.next(i)},e)},function(){return nu(n,r,function(){return n.complete()},e)},function(i){return nu(n,r,function(){return n.error(i)},e)}))})}function _H(r,e){return e===void 0&&(e=0),xl(function(t,n){n.add(r.schedule(function(){return t.subscribe(n)},e))})}function Fme(r,e){return Ec(r).pipe(_H(e),xH(e))}function Ume(r,e){return Ec(r).pipe(_H(e),xH(e))}function zme(r,e){return new Vs(function(t){var n=0;return e.schedule(function(){n===r.length?t.complete():(t.next(r[n++]),t.closed||this.schedule())})})}function qme(r,e){return new Vs(function(t){var n;return nu(t,e,function(){n=r[mH](),nu(t,e,function(){var i,s,o;try{i=n.next(),s=i.value,o=i.done}catch(a){t.error(a);return}o?t.complete():t.next(s)},0,!0)}),function(){return fi(n?.return)&&n.return()}})}function SH(r,e){if(!r)throw new Error("Iterable cannot be null");return new Vs(function(t){nu(t,e,function(){var n=r[Symbol.asyncIterator]();nu(t,e,function(){n.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function jme(r,e){return SH(vH(r),e)}function Vme(r,e){if(r!=null){if(dH(r))return Fme(r,e);if(fH(r))return zme(r,e);if(hH(r))return Ume(r,e);if(pH(r))return SH(r,e);if(yH(r))return qme(r,e);if(bH(r))return jme(r,e)}throw gH(r)}function Rd(r,e){return e?Vme(r,e):Ec(r)}function V3(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=uH(r);return Rd(r,t)}function EH(r){return r instanceof Date&&!isNaN(r)}var Kme=L3(function(r){return function(t){t===void 0&&(t=null),r(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function Hme(r,e){var t=EH(r)?{first:r}:typeof r=="number"?{each:r}:r,n=t.first,i=t.each,s=t.with,o=s===void 0?Wme:s,a=t.scheduler,c=a===void 0?q3:a,l=t.meta,u=l===void 0?null:l;if(n==null&&i==null)throw new TypeError("No timeout provided.");return xl(function(f,h){var d,g,p=null,m=0,y=function(v){g=nu(h,c,function(){try{d.unsubscribe(),Ec(o({meta:u,lastValue:p,seen:m})).subscribe(h)}catch(b){h.error(b)}},v)};d=f.subscribe(ll(h,function(v){g?.unsubscribe(),m++,h.next(p=v),i>0&&y(i)},void 0,void 0,function(){g?.closed||g?.unsubscribe(),p=null})),!m&&y(n!=null?typeof n=="number"?n:+n-c.now():i)})}function Wme(r){throw new Kme(r)}function iu(r,e){return xl(function(t,n){var i=0;t.subscribe(ll(n,function(s){n.next(r.call(e,s,i++))}))})}function Gme(r,e,t,n,i,s,o,a){var c=[],l=0,u=0,f=!1,h=function(){f&&!c.length&&!l&&e.complete()},d=function(p){return l<n?g(p):c.push(p)},g=function(p){l++;var m=!1;Ec(t(p,u++)).subscribe(ll(e,function(y){e.next(y)},function(){m=!0},void 0,function(){if(m)try{l--;for(var y=function(){var v=c.shift();o||g(v)};c.length&&l<n;)y();h()}catch(v){e.error(v)}}))};return r.subscribe(ll(e,d,function(){f=!0,h()})),function(){}}function pw(r,e,t){return t===void 0&&(t=1/0),fi(e)?pw(function(n,i){return iu(function(s,o){return e(n,s,i,o)})(Ec(r(n,i)))},t):(typeof e=="number"&&(t=e),xl(function(n,i){return Gme(n,i,r,t)}))}function Yme(r){return r===void 0&&(r=1/0),pw(sH,r)}function AH(r,e,t){r===void 0&&(r=0),t===void 0&&(t=kme);var n=-1;return e!=null&&(cH(e)?t=e:n=e),new Vs(function(i){var s=EH(r)?+r-t.now():r;s<0&&(s=0);var o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=n?this.schedule(void 0,n):i.complete())},s)})}function Xme(r,e){return e===void 0&&(e=q3),AH(r,r,e)}function Jme(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=uH(r),n=Pme(r,1/0),i=r;return i.length?i.length===1?Ec(i[0]):Yme(n)(Rd(i,t)):j3}function Qme(r,e,t,n,i){return function(s,o){var a=t,c=e,l=0;s.subscribe(ll(o,function(u){var f=l++;c=a?r(c,u,f):(a=!0,u),o.next(c)},i))}}function Zme(r){return r<=0?function(){return j3}:xl(function(e,t){var n=0;e.subscribe(ll(t,function(i){++n<=r&&(t.next(i),r<=n&&t.complete())}))})}function eye(r,e){return xl(Qme(r,e,arguments.length>=2,!0))}function tye(r){r===void 0&&(r={});var e=r.connector,t=e===void 0?function(){return new tm}:e,n=r.resetOnError,i=n===void 0?!0:n,s=r.resetOnComplete,o=s===void 0?!0:s,a=r.resetOnRefCountZero,c=a===void 0?!0:a;return function(l){var u,f,h,d=0,g=!1,p=!1,m=function(){f?.unsubscribe(),f=void 0},y=function(){m(),u=h=void 0,g=p=!1},v=function(){var b=u;y(),b?.unsubscribe()};return xl(function(b,_){d++,!p&&!g&&m();var x=h=h??t();_.add(function(){d--,d===0&&!p&&!g&&(f=wE(v,c))}),x.subscribe(_),!u&&d>0&&(u=new bg({next:function(E){return x.next(E)},error:function(E){p=!0,m(),f=wE(y,i,E),x.error(E)},complete:function(){g=!0,m(),f=wE(y,o),x.complete()}}),Ec(b).subscribe(u))})(l)}}function wE(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(e===!0){r();return}if(e!==!1){var i=new bg({next:function(){i.unsubscribe(),r()}});return Ec(e.apply(void 0,Af([],yu(t)))).subscribe(i)}}function IH(r,e){return xl(function(t,n){var i=null,s=0,o=!1,a=function(){return o&&!i&&n.complete()};t.subscribe(ll(n,function(c){i?.unsubscribe();var l=0,u=s++;Ec(r(c,u)).subscribe(i=ll(n,function(f){return n.next(e?e(c,f,u,l++):f)},function(){i=null,a()}))},function(){o=!0,a()}))})}let sp=class{input;inspect=!1;constructor(e){this.input=e.input,this.inspect=!!e.inspect}_execute(e){const t=this.makeStateMachine(e);return this._subscribeToStateMachine(t)}_subscribeToStateMachine(e){const t=Ad(e,{input:this.input}),n=new aH,i=a=>{const{context:c,status:l,output:u,error:f}=a;switch(l){case"active":n.next({status:d0.Pending,intermediateValue:c.intermediateValue});break;case"done":u.caseOf({Left:h=>{n.next({status:d0.Error,error:h})},Right:h=>{n.next({status:d0.Completed,output:h})}}),n.complete();break;case"error":n.error(f),n.complete();break;case"stopped":n.next({status:d0.Stopped}),n.complete();break;default:this._exhaustiveMatchingGuard(l)}},s=new Vs(a=>{const c=n.subscribe(a);return()=>{o.unsubscribe(),c.unsubscribe(),t.stop()}}),o=t.subscribe(i);return t.start(),{observable:s.pipe(tye()),cancel:()=>{t.stop(),o.unsubscribe(),i(t.getSnapshot())}}}_exhaustiveMatchingGuard(e){throw console.log("_exhaustiveMatchingGuard status",e),new Error(`Unhandled status: ${e}`)}};var xa=(r=>(r[r.Connected=0]="Connected",r[r.ReadyWithoutSecureChannel=1]="ReadyWithoutSecureChannel",r[r.ReadyWithSecureChannel=2]="ReadyWithSecureChannel",r))(xa||{});let rye=class extends sp{makeStateMachine(e){const{getAppAndVersion:t,getDeviceSessionState:n,setDeviceSessionState:i,waitForDeviceUnlock:s,isDeviceOnboarded:o}=this.extractDependencies(e),a=this.input.unlockTimeout??tH;return Yf({actors:{getAppAndVersion:Wo(t),waitForDeviceUnlock:ome(s)},guards:{isDeviceOnboarded:()=>o(),isDeviceLocked:({context:c})=>c._internalState.locked,hasError:({context:c})=>c._internalState.error!==null},actions:{assignErrorDeviceNotOnboarded:qt({_internalState:c=>({...c.context._internalState,error:new eH})}),assignErrorDeviceLocked:qt({_internalState:c=>({...c.context._internalState,error:new gme}),intermediateValue:{requiredUserInteraction:cn.UnlockDevice}}),assignErrorFromEvent:qt({_internalState:c=>({...c.context._internalState,error:c.event.error})}),assignNoUserActionNeeded:qt({intermediateValue:c=>({...c.context.intermediateValue,requiredUserInteraction:cn.None})}),assignUserActionUnlockNeeded:qt({intermediateValue:c=>({...c.context.intermediateValue,requiredUserInteraction:cn.UnlockDevice})})}}).createMachine({id:"GetDeviceStatusDeviceAction",initial:"DeviceReady",context:c=>{const l=n(),{sessionStateType:u}=l;return{input:{unlockTimeout:c.input.unlockTimeout},intermediateValue:{requiredUserInteraction:cn.None},_internalState:{onboarded:!1,locked:!1,currentApp:u===xa.ReadyWithoutSecureChannel?l.currentApp.name:null,currentAppVersion:null,error:null}}},states:{DeviceReady:{always:{target:"OnboardingCheck"}},OnboardingCheck:{always:[{guard:{type:"isDeviceOnboarded"},target:"AppAndVersionCheck",actions:qt({_internalState:c=>({...c.context._internalState,onboarded:!0})})},{target:"Error",actions:"assignErrorDeviceNotOnboarded"}]},UserActionUnlockDevice:{entry:"assignUserActionUnlockNeeded",exit:"assignNoUserActionNeeded",invoke:{id:"UserActionUnlockDevice",src:"waitForDeviceUnlock",input:c=>({unlockTimeout:a}),onDone:{target:"AppAndVersionCheck",actions:qt({_internalState:c=>({...c.context._internalState,locked:!1})})},onError:{target:"Error",actions:"assignErrorDeviceLocked"}}},AppAndVersionCheck:{invoke:{src:"getAppAndVersion",onDone:{target:"ApplicationAvailableResultCheck",actions:qt({_internalState:c=>{if(js(c.event.output)){const l=n();return l.sessionStateType!==xa.Connected?i({...l,currentApp:c.event.output.data}):i({deviceModelId:l.deviceModelId,sessionStateType:xa.ReadyWithoutSecureChannel,deviceStatus:Xl.CONNECTED,currentApp:c.event.output.data,installedApps:[],isSecureConnectionAllowed:!1}),{...c.context._internalState,locked:!1,currentApp:c.event.output.data.name,currentAppVersion:c.event.output.data.version}}if("errorCode"in c.event.output.error){if(c.event.output.error.errorCode==="5515")return{...c.context._internalState,locked:!0};if(c.event.output.error.errorCode==="6e00")return{...c.context._internalState,locked:!1,currentApp:"BOLOS",currentAppVersion:"0.0.0"}}return{...c.context._internalState,error:c.event.output.error}}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ApplicationAvailableResultCheck:{always:[{guard:"hasError",target:"Error"},{target:"UserActionUnlockDevice",guard:"isDeviceLocked"},{target:"Success"}]},Success:{type:"final"},Error:{type:"final"}},output:c=>{const{context:l}=c,{error:u,currentApp:f,currentAppVersion:h}=l._internalState;return u?ut(u):er({currentApp:f,currentAppVersion:h})}})}extractDependencies(e){return{getAppAndVersion:()=>e.sendCommand(new yg),waitForDeviceUnlock:({input:t})=>Xme(1e3).pipe(IH(()=>Rd(e.sendCommand(new yg))),pw(n=>!js(n)&&"errorCode"in n.error&&n.error.errorCode==="5515"?j3:V3(void 0)),Zme(1),Hme(t.unlockTimeout)),getDeviceSessionState:()=>e.getDeviceSessionState(),setDeviceSessionState:t=>e.setDeviceSessionState(t),isDeviceOnboarded:()=>!0}}},ko=class{_tag="GeneralDmkError";originalError;constructor(e){e instanceof Error?this.originalError=e:e!==void 0&&(this.originalError=new Error(String(e)))}},nye=class extends ko{constructor(e){super(e),this.err=e}_tag="DeviceNotRecognizedError"},xE=class extends ko{constructor(e){super(e),this.err=e}_tag="NoAccessibleDeviceError"},pI=class extends ko{_tag="ConnectionOpeningError";constructor(e){super(e)}},rM=class extends ko{constructor(e){super(e),this.err=e}_tag="UnknownDeviceError"},K3=class extends ko{constructor(e){super(e),this.err=e}_tag="TransportNotSupportedError"},iye=class extends ko{constructor(e){super(e),this.err=e}_tag="SendApduTimeoutError"},sye=class extends ko{constructor(e){super(e),this.err=e}_tag="TransportAlreadyExistsError"},By=class extends ko{constructor(e){super(e),this.err=e}_tag="DeviceDisconnectedWhileSendingError"},_E=class extends ko{constructor(e){super(e),this.err=e}_tag="AlreadySendingApduError"},oye=class extends ko{constructor(e){super(e),this.err=e}_tag="DeviceDisconnectedBeforeSendingApdu"},aye=class extends ko{constructor(e){super(e),this.err=e}_tag="NoTransportProvidedError"};const cye=["BOLOS","OLOS","OLOS\0"],lye=r=>cye.includes(r);let gw=class extends sp{makeStateMachine(e){const{closeApp:t,openApp:n,getDeviceSessionState:i,isDeviceOnboarded:s,setDeviceSessionState:o}=this.extractDependencies(e),a=this.input.unlockTimeout??tH,c=new rye({input:{unlockTimeout:a}}).makeStateMachine(e);return Yf({actors:{closeApp:Wo(t),openApp:Wo(n),getDeviceStatus:c},guards:{isDeviceOnboarded:()=>s(),isRequestedAppOpen:({context:l})=>l._internalState.currentlyRunningApp===null?!1:l._internalState.currentlyRunningApp===l.input.appName,isDashboardOpen:({context:l})=>{if(l._internalState.currentlyRunningApp===null)throw new Error("context.currentlyRunningApp === null");return lye(l._internalState.currentlyRunningApp)},hasDisconnectedWhileSending:({context:l})=>l._internalState.error!==null&&l._internalState.error instanceof By,hasError:({context:l})=>l._internalState.error!==null},actions:{assignErrorDeviceNotOnboarded:qt({_internalState:l=>({...l.context._internalState,error:new eH})}),assignUserActionNeededOpenApp:qt({intermediateValue:l=>({...l.context.intermediateValue,requiredUserInteraction:cn.ConfirmOpenApp})}),assignNoUserActionNeeded:qt({intermediateValue:l=>({...l.context.intermediateValue,requiredUserInteraction:cn.None})}),assignErrorFromEvent:qt({_internalState:l=>({...l.context._internalState,error:l.event.error})}),assignNoError:qt({_internalState:l=>({...l.context._internalState,error:null})})}}).createMachine({id:"OpenAppDeviceAction",initial:"DeviceReady",context:({input:l})=>{const u=i(),{sessionStateType:f}=u;return{input:l,intermediateValue:{requiredUserInteraction:cn.None},_internalState:{error:null,currentlyRunningApp:f===xa.ReadyWithoutSecureChannel?u.currentApp.name:null}}},states:{DeviceReady:{always:{target:"OnboardingCheck"}},OnboardingCheck:{always:[{target:"GetDeviceStatus",guard:{type:"isDeviceOnboarded"}},{target:"Error",actions:"assignErrorDeviceNotOnboarded"}]},GetDeviceStatus:{invoke:{id:"deviceStatus",src:"getDeviceStatus",input:l=>({unlockTimeout:l.context.input.unlockTimeout}),onSnapshot:{actions:qt({intermediateValue:l=>l.event.snapshot.context.intermediateValue})},onDone:{target:"CheckDeviceStatus",actions:qt({_internalState:l=>l.event.output.caseOf({Right:u=>{const f=i();return f.sessionStateType!==xa.Connected&&o({...f,currentApp:{name:u.currentApp,version:u.currentAppVersion}}),{...l.context._internalState,currentlyRunningApp:u.currentApp}},Left:u=>({...l.context._internalState,currentlyRunningApp:null,error:u})})})},onError:{target:"Error",actions:[qt({_internalState:l=>({...l.context._internalState,currentlyRunningApp:null})}),"assignErrorFromEvent"]}}},CheckDeviceStatus:{always:[{target:"ApplicationReady",guard:"isRequestedAppOpen",actions:"assignNoError"},{target:"Error",guard:"hasError"},{target:"DashboardCheck"}]},DashboardCheck:{always:[{target:"OpenApplication",guard:"isDashboardOpen"},"CloseApplication"]},OpenApplication:{entry:"assignUserActionNeededOpenApp",exit:"assignNoUserActionNeeded",invoke:{src:"openApp",input:({context:l})=>({appName:l.input.appName}),onDone:{target:"OpenApplicationResultCheck",actions:qt({_internalState:l=>js(l.event.output)?{...l.context._internalState,currentlyRunningApp:l.context.input.appName}:{...l.context._internalState,error:l.event.output.error}})},onError:{target:"OpenApplicationResultCheck",actions:"assignErrorFromEvent"}}},OpenApplicationResultCheck:{always:[{target:"GetDeviceStatus",guard:"hasDisconnectedWhileSending"},{target:"Error",guard:"hasError"},{target:"GetDeviceStatus"}]},CloseApplication:{invoke:{src:"closeApp",onDone:{target:"CloseApplicationResultCheck",actions:qt({_internalState:l=>js(l.event.output)?{...l.context._internalState,currentlyRunningApp:"BOLOS"}:{...l.context._internalState,error:l.event.output.error}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},CloseApplicationResultCheck:{always:[{target:"Error",guard:"hasError"},{target:"OpenApplication"}]},ApplicationReady:{always:"Success"},Success:{type:"final",actions:"assignNoError"},Error:{type:"final"}},output:({context:l})=>l._internalState.error?ut(l._internalState.error):er(void 0)})}extractDependencies(e){return{closeApp:async()=>e.sendCommand(new R0e),openApp:async t=>e.sendCommand(new oge({appName:t.input.appName})),getDeviceSessionState:()=>e.getDeviceSessionState(),setDeviceSessionState:t=>e.setDeviceSessionState(t),isDeviceOnboarded:()=>!0}}},uye=class extends sp{makeStateMachine(e){const{callTask:t}=this.extractDependencies(e);return Yf({actors:{callTask:Wo(t),openAppStateMachine:new gw({input:{appName:this.input.appName}}).makeStateMachine(e)},guards:{skipOpenApp:()=>this.input.skipOpenApp,noInternalError:({context:n})=>n._internalState.error===null},actions:{assignErrorFromEvent:qt({_internalState:n=>({...n.context._internalState,error:n.event.error})})}}).createMachine({id:"CallTaskInAppDeviceAction",initial:"InitialState",context:({input:n})=>({input:n,intermediateValue:{requiredUserInteraction:cn.None},_internalState:{taskResponse:null,error:null}}),states:{InitialState:{always:[{target:"CallTask",guard:"skipOpenApp"},"OpenAppDeviceAction"]},OpenAppDeviceAction:{invoke:{id:"openAppStateMachine",input:{appName:this.input.appName},src:"openAppStateMachine",onSnapshot:{actions:qt({intermediateValue:n=>n.event.snapshot.context.intermediateValue})},onDone:{actions:qt({_internalState:n=>n.event.output.caseOf({Right:()=>n.context._internalState,Left:i=>({...n.context._internalState,error:i})})}),target:"CheckOpenAppDeviceActionResult"}}},CheckOpenAppDeviceActionResult:{always:[{target:"CallTask",guard:"noInternalError"},"Error"]},CallTask:{entry:qt({intermediateValue:{requiredUserInteraction:this.input.requiredUserInteraction}}),exit:qt({intermediateValue:{requiredUserInteraction:cn.None}}),invoke:{id:"callTask",src:"callTask",input:n=>n.context.input.task,onDone:{target:"CallTaskResultCheck",actions:[qt({_internalState:({event:n,context:i})=>js(n.output)?{...i._internalState,taskResponse:n.output.data}:{...i._internalState,error:n.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},CallTaskResultCheck:{always:[{target:"Success",guard:"noInternalError"},"Error"]},Success:{type:"final"},Error:{type:"final"}},output:({context:n})=>n._internalState.taskResponse?er(n._internalState.taskResponse):ut(n._internalState.error||new Yc("No error in final state"))})}extractDependencies(e){return{callTask:t=>t.input(e)}}};var Lh=null;typeof WebSocket<"u"?Lh=WebSocket:typeof MozWebSocket<"u"?Lh=MozWebSocket:typeof pa<"u"?Lh=pa.WebSocket||pa.MozWebSocket:typeof window<"u"?Lh=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Lh=self.WebSocket||self.MozWebSocket);const fye=Lh;var hye=(r=>(r.GenuineCheck="GenuineCheck",r.ListInstalledApps="ListInstalledApps",r.UpdateMcu="UpdateMcu",r.UpdateFirmware="UpdateFirmware",r.InstallApp="InstallApp",r.UninstallApp="UninstallApp",r))(hye||{}),dye=(r=>(r.EXCHANGE="exchange",r.BULK="bulk",r.ERROR="error",r.WARNING="warning",r.SUCCESS="success",r))(dye||{}),pye=(r=>(r.SUCCESS="success",r.ERROR="error",r))(pye||{}),gye=(r=>(r.Opened="opened",r.Closed="closed",r.PermissionRequested="permission-requested",r.PermissionGranted="permission-granted",r.PreExchange="pre-exchange",r.Exchange="exchange",r.Progress="progress",r.Warning="warning",r.Error="error",r.Result="result",r))(gye||{}),mye=(r=>(r[r.AppAlreadyInstalled=0]="AppAlreadyInstalled",r[r.DeviceLocked=1]="DeviceLocked",r[r.OutOfMemory=2]="OutOfMemory",r[r.RefusedByUser=3]="RefusedByUser",r[r.Unknown=4]="Unknown",r))(mye||{});let yye=class{constructor(e){this.error=e,this.originalError=e}_tag="WebSocketConnectionError";originalError},nM=class extends sp{makeStateMachine(e){const{sendCommand:t}=this.extractDependencies(e);return Yf({actors:{sendCommand:Wo(t),openAppStateMachine:new gw({input:{appName:this.input.appName}}).makeStateMachine(e)},guards:{skipOpenApp:()=>this.input.skipOpenApp,noInternalError:({context:n})=>n._internalState.error===null},actions:{assignErrorFromEvent:qt({_internalState:n=>({...n.context._internalState,error:n.event.error})})}}).createMachine({id:"SendCommandInAppDeviceAction",initial:"InitialState",context:({input:n})=>({input:n,intermediateValue:{requiredUserInteraction:cn.None},_internalState:{commandResponse:null,error:null}}),states:{InitialState:{always:[{target:"SendCommand",guard:"skipOpenApp"},"OpenAppDeviceAction"]},OpenAppDeviceAction:{invoke:{id:"openAppStateMachine",input:{appName:this.input.appName},src:"openAppStateMachine",onSnapshot:{actions:qt({intermediateValue:n=>n.event.snapshot.context.intermediateValue})},onDone:{actions:qt({_internalState:n=>n.event.output.caseOf({Right:()=>n.context._internalState,Left:i=>({...n.context._internalState,error:i})})}),target:"CheckOpenAppDeviceActionResult"}}},CheckOpenAppDeviceActionResult:{always:[{target:"SendCommand",guard:"noInternalError"},"Error"]},SendCommand:{entry:qt({intermediateValue:{requiredUserInteraction:this.input.requiredUserInteraction}}),exit:qt({intermediateValue:{requiredUserInteraction:cn.None}}),invoke:{id:"sendCommand",src:"sendCommand",input:({context:n})=>n.input.command,onDone:{target:"SendCommandResultCheck",actions:[qt({_internalState:({event:n,context:i})=>js(n.output)?{...i._internalState,commandResponse:n.output.data}:{...i._internalState,error:n.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},SendCommandResultCheck:{always:[{target:"Success",guard:"noInternalError"},"Error"]},Success:{type:"final"},Error:{type:"final"}},output:({context:n})=>n._internalState.commandResponse?er(n._internalState.commandResponse):ut(n._internalState.error||new Yc("No error in final state"))})}extractDependencies(e){return{sendCommand:t=>e.sendCommand(t.input)}}};function hi(r){return(typeof r=="object"&&r!==null||typeof r=="function")&&typeof r.then=="function"}function $s(r){switch(typeof r){case"string":case"symbol":return r.toString();case"function":return r.name;default:throw new Error(`Unexpected ${typeof r} service id type`)}}const SE=Symbol.for("@inversifyjs/common/islazyServiceIdentifier");let H3=class{[SE];#e;constructor(e){this.#e=e,this[SE]=!0}static is(e){return typeof e=="object"&&e!==null&&e[SE]===!0}unwrap(){return this.#e()}};function Cf(r,e){return Reflect.getOwnMetadata(e,r)}function W3(r,e,t){Reflect.defineMetadata(e,t,r)}function ff(r,e,t,n){const i=n(Cf(r,e)??t());Reflect.defineMetadata(e,i,r)}const EE="@inversifyjs/container/bindingId";function Nl(){const r=Cf(Object,EE)??0;return r===Number.MAX_SAFE_INTEGER?W3(Object,EE,Number.MIN_SAFE_INTEGER):ff(Object,EE,()=>r,e=>e+1),r}const _a={Request:"Request",Singleton:"Singleton",Transient:"Transient"},Wn={ConstantValue:"ConstantValue",DynamicValue:"DynamicValue",Factory:"Factory",Instance:"Instance",Provider:"Provider",ResolvedValue:"ResolvedValue",ServiceRedirection:"ServiceRedirection"};function*CH(...r){for(const e of r)yield*e}let G3=class TH{#e;#t;#r;constructor(e){this.#e=new Map,this.#t={};for(const t of Reflect.ownKeys(e))this.#t[t]=new Map;this.#r=e}add(e,t){this.#n(e).push(t);for(const n of Reflect.ownKeys(t))this.#i(n,t[n]).push(e)}clone(){const e=Reflect.ownKeys(this.#r),t=new TH(this.#r);this.#o(this.#e,t.#e);for(const n of e)this.#o(this.#t[n],t.#t[n]);return t}get(e,t){return this.#t[e].get(t)}getAllKeys(e){return this.#t[e].keys()}removeByRelation(e,t){const n=this.get(e,t);if(n===void 0)return;const i=new Set(n);for(const s of i){const o=this.#e.get(s);if(o===void 0)throw new Error("Expecting model relation, none found");for(const a of o)a[e]===t&&this.#a(s,a);this.#e.delete(s)}}#n(e){let t=this.#e.get(e);return t===void 0&&(t=[],this.#e.set(e,t)),t}#i(e,t){let n=this.#t[e].get(t);return n===void 0&&(n=[],this.#t[e].set(t,n)),n}#o(e,t){for(const[n,i]of e)t.set(n,[...i])}#a(e,t){for(const n of Reflect.ownKeys(t))this.#s(e,n,t[n])}#s(e,t,n){const i=this.#t[t].get(n);if(i!==void 0){const s=i.indexOf(e);s!==-1&&i.splice(s,1),i.length===0&&this.#t[t].delete(n)}}};var $0,Vo,M0;(function(r){r.moduleId="moduleId",r.serviceId="serviceId"})($0||($0={}));let iM=class gI{#e;#t;constructor(e,t){this.#e=t??new G3({moduleId:{isOptional:!0},serviceId:{isOptional:!1}}),this.#t=e}static build(e){return new gI(e)}add(e,t){this.#e.add(e,t)}clone(){return new gI(this.#t,this.#e.clone())}get(e){const t=[],n=this.#e.get($0.serviceId,e);n!==void 0&&t.push(n);const i=this.#t?.get(e);if(i!==void 0&&t.push(i),t.length!==0)return CH(...t)}removeAllByModuleId(e){this.#e.removeByRelation($0.moduleId,e)}removeAllByServiceId(e){this.#e.removeByRelation($0.serviceId,e)}};(function(r){r.id="id",r.moduleId="moduleId",r.serviceId="serviceId"})(Vo||(Vo={}));let sM=class mI{#e;#t;constructor(e,t){this.#e=t??new G3({id:{isOptional:!1},moduleId:{isOptional:!0},serviceId:{isOptional:!1}}),this.#t=e}static build(e){return new mI(e)}clone(){return new mI(this.#t,this.#e.clone())}get(e){return this.getNonParentBindings(e)??this.#t?.get(e)}getById(e){return this.#e.get(Vo.id,e)??this.#t?.getById(e)}getByModuleId(e){return this.#e.get(Vo.moduleId,e)??this.#t?.getByModuleId(e)}getNonParentBindings(e){return this.#e.get(Vo.serviceId,e)}getNonParentBoundServices(){return this.#e.getAllKeys(Vo.serviceId)}removeById(e){this.#e.removeByRelation(Vo.id,e)}removeAllByModuleId(e){this.#e.removeByRelation(Vo.moduleId,e)}removeAllByServiceId(e){this.#e.removeByRelation(Vo.serviceId,e)}set(e){const t={[Vo.id]:e.id,[Vo.serviceId]:e.serviceIdentifier};e.moduleId!==void 0&&(t[Vo.moduleId]=e.moduleId),this.#e.add(e,t)}};(function(r){r.moduleId="moduleId",r.serviceId="serviceId"})(M0||(M0={}));let oM=class yI{#e;#t;constructor(e,t){this.#e=t??new G3({moduleId:{isOptional:!0},serviceId:{isOptional:!1}}),this.#t=e}static build(e){return new yI(e)}add(e,t){this.#e.add(e,t)}clone(){return new yI(this.#t,this.#e.clone())}get(e){const t=[],n=this.#e.get(M0.serviceId,e);n!==void 0&&t.push(n);const i=this.#t?.get(e);if(i!==void 0&&t.push(i),t.length!==0)return CH(...t)}removeAllByModuleId(e){this.#e.removeByRelation(M0.moduleId,e)}removeAllByServiceId(e){this.#e.removeByRelation(M0.serviceId,e)}};const B0="@inversifyjs/core/classMetadataReflectKey";function N0(){return{constructorArguments:[],lifecycle:{postConstructMethodName:void 0,preDestroyMethodName:void 0},properties:new Map,scope:void 0}}const RH="@inversifyjs/core/pendingClassMetadataCountReflectKey",AE=Symbol.for("@inversifyjs/core/InversifyCoreError");let Yn=class kH extends Error{[AE];kind;constructor(e,t,n){super(t,n),this[AE]=!0,this.kind=e}static is(e){return typeof e=="object"&&e!==null&&e[AE]===!0}static isErrorOfKind(e,t){return kH.is(e)&&e.kind===t}};var Tn,kd,xu;function Dv(r){const e=Cf(r,B0)??N0();if(!function(t){const n=Cf(t,RH);return n!==void 0&&n!==0}(r))return function(t,n){const i=[];if(n.length<t.length)throw new Yn(Tn.missingInjectionDecorator,`Found unexpected missing metadata on type "${t.name}". "${t.name}" constructor requires at least ${t.length.toString()} arguments, found ${n.length.toString()} instead.
Are you using @inject, @multiInject or @unmanaged decorators in every non optional constructor argument?

If you're using typescript and want to rely on auto injection, set "emitDecoratorMetadata" compiler option to true`);for(let s=0;s<n.length;++s)n[s]===void 0&&i.push(s);if(i.length>0)throw new Yn(Tn.missingInjectionDecorator,`Found unexpected missing metadata on type "${t.name}" at constructor indexes "${i.join('", "')}".

Are you using @inject, @multiInject or @unmanaged decorators at those indexes?

If you're using typescript and want to rely on auto injection, set "emitDecoratorMetadata" compiler option to true`)}(r,e.constructorArguments),e;(function(t,n){const i=[];for(let s=0;s<n.constructorArguments.length;++s){const o=n.constructorArguments[s];o!==void 0&&o.kind!==kd.unknown||i.push(`  - Missing or incomplete metadata for type "${t.name}" at constructor argument with index ${s.toString()}.
Every constructor parameter must be decorated either with @inject, @multiInject or @unmanaged decorator.`)}for(const[s,o]of n.properties)o.kind===kd.unknown&&i.push(`  - Missing or incomplete metadata for type "${t.name}" at property "${s.toString()}".
This property must be decorated either with @inject or @multiInject decorator.`);throw i.length===0?new Yn(Tn.unknown,`Unexpected class metadata for type "${t.name}" with uncompletion traces.
This might be caused by one of the following reasons:

1. A third party library is targeting inversify reflection metadata.
2. A bug is causing the issue. Consider submiting an issue to fix it.`):new Yn(Tn.missingInjectionDecorator,`Invalid class metadata at type ${t.name}:

${i.join(`

`)}`)})(r,e)}function vye(){return 0}function bye(r){return e=>{e!==void 0&&e.kind===kd.unknown&&ff(r,RH,vye,t=>t-1)}}function wye(r,e){return(...t)=>n=>{if(n===void 0)return r(...t);if(n.kind===xu.unmanaged)throw new Yn(Tn.injectionDecoratorConflict,"Unexpected injection found. Multiple @inject, @multiInject or @unmanaged decorators found");return e(n,...t)}}function xye(r){if(r.kind!==kd.unknown&&r.isFromTypescriptParamType!==!0)throw new Yn(Tn.injectionDecoratorConflict,"Unexpected injection found. Multiple @inject, @multiInject or @unmanaged decorators found")}(function(r){r[r.injectionDecoratorConflict=0]="injectionDecoratorConflict",r[r.missingInjectionDecorator=1]="missingInjectionDecorator",r[r.planning=2]="planning",r[r.resolution=3]="resolution",r[r.unknown=4]="unknown"})(Tn||(Tn={})),function(r){r[r.unknown=32]="unknown"}(kd||(kd={})),function(r){r[r.multipleInjection=0]="multipleInjection",r[r.singleInjection=1]="singleInjection",r[r.unmanaged=2]="unmanaged"}(xu||(xu={}));const _ye=wye(function(r,e){return{kind:r,name:void 0,optional:!1,tags:new Map,value:e}},function(r,e,t){return xye(r),{...r,kind:e,value:t}});function aM(r,e){return t=>{const n=t.properties.get(e);return t.properties.set(e,r(n)),t}}var Ul;function Sye(r,e,t,n){if(Yn.isErrorOfKind(n,Tn.injectionDecoratorConflict)){const i=function(s,o,a){if(a===void 0){if(o===void 0)throw new Yn(Tn.unknown,"Unexpected undefined property and index values");return{kind:Ul.property,property:o,targetClass:s.constructor}}return typeof a=="number"?{index:a,kind:Ul.parameter,targetClass:s}:{kind:Ul.method,method:o,targetClass:s}}(r,e,t);throw new Yn(Tn.injectionDecoratorConflict,`Unexpected injection error.

Cause:

${n.message}

Details

${function(s){switch(s.kind){case Ul.method:return`[class: "${s.targetClass.name}", method: "${s.method.toString()}"]`;case Ul.parameter:return`[class: "${s.targetClass.name}", index: "${s.index.toString()}"]`;case Ul.property:return`[class: "${s.targetClass.name}", property: "${s.property.toString()}"]`}}(i)}`,{cause:n})}throw n}function Eye(r,e){return(t,n,i)=>{try{i===void 0?function(s,o){const a=IE(s,o);return(c,l)=>{ff(c.constructor,B0,N0,aM(a(c),l))}}(r,e)(t,n):typeof i=="number"?function(s,o){const a=IE(s,o);return(c,l,u)=>{if(!function(f,h){return typeof f=="function"&&h===void 0}(c,l))throw new Yn(Tn.injectionDecoratorConflict,`Found an @inject decorator in a non constructor parameter.
Found @inject decorator at method "${l?.toString()??""}" at class "${c.constructor.name}"`);ff(c,B0,N0,function(f,h){return d=>{const g=d.constructorArguments[h];return d.constructorArguments[h]=f(g),d}}(a(c),u))}}(r,e)(t,n,i):function(s,o){const a=IE(s,o);return(c,l,u)=>{if(!function(f){return f.set!==void 0}(u))throw new Yn(Tn.injectionDecoratorConflict,`Found an @inject decorator in a non setter property method.
Found @inject decorator at method "${l.toString()}" at class "${c.constructor.name}"`);ff(c.constructor,B0,N0,aM(a(c),l))}}(r,e)(t,n,i)}catch(s){Sye(t,n,i,s)}}}function IE(r,e){return t=>{const n=e(t);return i=>(n(i),r(i))}}function Ze(r){return Eye(_ye(xu.singleInjection,r),bye)}(function(r){r[r.method=0]="method",r[r.parameter=1]="parameter",r[r.property=2]="property"})(Ul||(Ul={}));const cM="@inversifyjs/core/classIsInjectableFlagReflectKey",Aye=[Array,BigInt,Boolean,Function,Number,Object,String];function Iye(r){const e=Cf(r,"design:paramtypes");e!==void 0&&ff(r,B0,N0,function(t){return n=>(t.forEach((i,s)=>{var o;n.constructorArguments[s]!==void 0||(o=i,Aye.includes(o))||(n.constructorArguments[s]=function(a){return{isFromTypescriptParamType:!0,kind:xu.singleInjection,name:void 0,optional:!1,tags:new Map,value:a}}(i))}),n)}(e))}function Ct(r){return e=>{(function(t){if(Cf(t,cM)!==void 0)throw new Yn(Tn.injectionDecoratorConflict,`Cannot apply @injectable decorator multiple times at class "${t.name}"`);W3(t,cM,!0)})(e),Iye(e)}}var id;(function(r){r[r.multipleInjection=0]="multipleInjection",r[r.singleInjection=1]="singleInjection"})(id||(id={}));class op{#e;constructor(e){this.#e=e}get name(){return this.#e.elem.name}get serviceIdentifier(){return this.#e.elem.serviceIdentifier}get tags(){return this.#e.elem.tags}getAncestor(){if(this.#e.previous!==void 0)return new op(this.#e.previous)}}class Y3{last;constructor(e){this.last=e}concat(e){return new Y3({elem:e,previous:this.last})}[Symbol.iterator](){let e=this.last;return{next:()=>{if(e===void 0)return{done:!0,value:void 0};const t=e.elem;return e=e.previous,{done:!1,value:t}}}}}function mw(r,e,t){const n=t?.customServiceIdentifier??e.serviceIdentifier,i=[...r.getBindings(n)??[]].filter(s=>s.isSatisfiedBy(e));if(i.length===0&&r.autobindOptions!==void 0&&typeof n=="function"){const s=function(o,a){const c=Dv(a),l=c.scope??o.scope;return{cache:{isRight:!1,value:void 0},id:Nl(),implementationType:a,isSatisfiedBy:()=>!0,moduleId:void 0,onActivation:void 0,onDeactivation:void 0,scope:l,serviceIdentifier:a,type:Wn.Instance}}(r.autobindOptions,n);r.setBinding(s),i.push(s)}return i}function Tf(r){return r.redirections!==void 0}function PH(r,e,t,n){let i,s;Tf(t)?(i=t.binding.targetServiceIdentifier,s=t.binding.serviceIdentifier):(i=t.serviceIdentifier,s=t.parent?.binding.serviceIdentifier),Array.isArray(r)?function(o,a,c,l,u){if(o.length!==0){const f=`Ambiguous bindings found for service: "${$s(c)}".

Registered bindings:

${o.map(h=>function(d){switch(d.type){case Wn.Instance:return`[ type: "${d.type}", serviceIdentifier: "${$s(d.serviceIdentifier)}", scope: "${d.scope}", implementationType: "${d.implementationType.name}" ]`;case Wn.ServiceRedirection:return`[ type: "${d.type}", serviceIdentifier: "${$s(d.serviceIdentifier)}", redirection: "${$s(d.targetServiceIdentifier)}" ]`;default:return`[ type: "${d.type}", serviceIdentifier: "${$s(d.serviceIdentifier)}", scope: "${d.scope}" ]`}}(h.binding)).join(`
`)}

Trying to resolve bindings for "${OH(c,l)}".

${DH(u)}`;throw new Yn(Tn.planning,f)}a||lM(c,l,u)}(r,e,i,s,n):function(o,a,c,l,u){o!==void 0||a||lM(c,l,u)}(r,e,i,s,n)}function lM(r,e,t){const n=`No bindings found for service: "${$s(r)}".

Trying to resolve bindings for "${OH(r,e)}".

${DH(t)}`;throw new Yn(Tn.planning,n)}function OH(r,e){return e===void 0?`${$s(r)} (Root service)`:$s(e)}function DH(r){const e=r.tags.size===0?"":`
- tags:
  - ${[...r.tags.keys()].map(t=>t.toString()).join(`
  - `)}`;return`Binding constraints:
- service identifier: ${$s(r.serviceIdentifier)}
- name: ${r.name?.toString()??"-"}${e}`}function $H(r,e,t){if(r.redirections.length!==1)PH(r.redirections,e,r,t);else{const[n]=r.redirections;Tf(n)&&$H(n,e,t)}}function X3(r,e,t){if(Array.isArray(r.bindings)&&r.bindings.length===1){const[n]=r.bindings;Tf(n)&&$H(n,e,t)}else PH(r.bindings,e,r,t)}function Cye(r,e){if(function(t){return t instanceof Error&&(t instanceof RangeError&&/stack space|call stack|too much recursion/i.test(t.message)||t.name==="InternalError"&&/too much recursion/.test(t.message))}(e)){const t=function(n){const i=[...n];return i.length===0?"(No dependency trace)":i.map($s).join(" -> ")}(function(n){const i=new Set;for(const s of n.servicesBranch){if(i.has(s))return[...i,s];i.add(s)}return[...i]}(r));throw new Yn(Tn.planning,`Circular dependency found: ${t}`,{cause:e})}throw e}function Tye(r){try{const e=new Map;r.rootConstraints.tag!==void 0&&e.set(r.rootConstraints.tag.key,r.rootConstraints.tag.value);const t=new Y3({elem:{name:r.rootConstraints.name,serviceIdentifier:r.rootConstraints.serviceIdentifier,tags:e},previous:void 0}),n=new op(t.last),i=mw(r,n),s=[],o={bindings:s,parent:void 0,serviceIdentifier:r.rootConstraints.serviceIdentifier};if(s.push(...yw(r,t,i,o)),!r.rootConstraints.isMultiple){X3(o,r.rootConstraints.isOptional??!1,n);const[a]=s;o.bindings=a}return{tree:{root:o}}}catch(e){Cye(r,e)}}function Rye(r,e,t,n){const i={binding:e,classMetadata:r.getClassMetadata(e.implementationType),constructorParams:[],parent:n,propertyParams:new Map};return MH({autobindOptions:r.autobindOptions,getBindings:r.getBindings,getClassMetadata:r.getClassMetadata,node:i,servicesBranch:r.servicesBranch,setBinding:r.setBinding},t)}function uM(r,e,t){if(t.kind===xu.unmanaged)return;const n=H3.is(t.value)?t.value.unwrap():t.value,i=e.concat({name:t.name,serviceIdentifier:n,tags:t.tags}),s=new op(i.last),o=mw(r,s),a=[],c={bindings:a,parent:r.node,serviceIdentifier:n};if(a.push(...yw(r,i,o,c)),t.kind===xu.singleInjection){X3(c,t.optional,s);const[l]=a;c.bindings=l}return c}function kye(r,e,t){const n=H3.is(t.value)?t.value.unwrap():t.value,i=e.concat({name:t.name,serviceIdentifier:n,tags:t.tags}),s=new op(i.last),o=mw(r,s),a=[],c={bindings:a,parent:r.node,serviceIdentifier:n};if(a.push(...yw(r,i,o,c)),t.kind===id.singleInjection){X3(c,t.optional,s);const[l]=a;c.bindings=l}return c}function Pye(r,e,t,n){const i={binding:e,params:[],parent:n};return MH({autobindOptions:r.autobindOptions,getBindings:r.getBindings,getClassMetadata:r.getClassMetadata,node:i,servicesBranch:r.servicesBranch,setBinding:r.setBinding},t)}function yw(r,e,t,n){const i=Tf(n)?n.binding.targetServiceIdentifier:n.serviceIdentifier;r.servicesBranch.push(i);const s=[];for(const o of t)switch(o.type){case Wn.Instance:s.push(Rye(r,o,e,n));break;case Wn.ResolvedValue:s.push(Pye(r,o,e,n));break;case Wn.ServiceRedirection:{const a=Oye(r,e,o,n);s.push(a);break}default:s.push({binding:o,parent:n})}return r.servicesBranch.pop(),s}function Oye(r,e,t,n){const i={binding:t,parent:n,redirections:[]},s=mw(r,new op(e.last),{customServiceIdentifier:t.targetServiceIdentifier});return i.redirections.push(...yw(r,e,s,i)),i}function MH(r,e){return r.node.binding.type===Wn.Instance?function(t,n,i){const s=n.classMetadata;for(const[o,a]of s.constructorArguments.entries())n.constructorParams[o]=uM(t,i,a);for(const[o,a]of s.properties){const c=uM(t,i,a);c!==void 0&&n.propertyParams.set(o,c)}return t.node}(r,r.node,e):function(t,n,i){const s=n.binding.metadata;for(const[o,a]of s.arguments.entries())n.params[o]=kye(t,i,a);return t.node}(r,r.node,e)}var Ju;(function(r){r[r.singleMandatory=0]="singleMandatory",r[r.singleOptional=1]="singleOptional",r[r.multipleMandatory=2]="multipleMandatory",r[r.multipleOptional=3]="multipleOptional",r[r.length=4]="length"})(Ju||(Ju={}));class Dye{#e;#t;#r;#n;#i;constructor(){this.#e=this.#o(),this.#t=this.#o(),this.#n=this.#o(),this.#r=this.#o(),this.#i=[]}clearCache(){for(const e of this.#u())e.clear();for(const e of this.#i)e.clearCache()}get(e){return e.name===void 0?e.tag===void 0?this.#s(this.#e,e).get(e.serviceIdentifier):this.#s(this.#r,e).get(e.serviceIdentifier)?.get(e.tag.key)?.get(e.tag.value):e.tag===void 0?this.#s(this.#t,e).get(e.serviceIdentifier)?.get(e.name):this.#s(this.#n,e).get(e.serviceIdentifier)?.get(e.name)?.get(e.tag.key)?.get(e.tag.value)}set(e,t){e.name===void 0?e.tag===void 0?this.#s(this.#e,e).set(e.serviceIdentifier,t):this.#a(this.#a(this.#s(this.#r,e),e.serviceIdentifier),e.tag.key).set(e.tag.value,t):e.tag===void 0?this.#a(this.#s(this.#t,e),e.serviceIdentifier).set(e.name,t):this.#a(this.#a(this.#a(this.#s(this.#n,e),e.serviceIdentifier),e.name),e.tag.key).set(e.tag.value,t)}subscribe(e){this.#i.push(e)}#o(){const e=new Array(Ju.length);for(let t=0;t<e.length;++t)e[t]=new Map;return e}#a(e,t){let n=e.get(t);return n===void 0&&(n=new Map,e.set(t,n)),n}#s(e,t){return e[this.#c(t)]}#u(){return[...this.#e,...this.#t,...this.#n,...this.#r]}#c(e){return e.isMultiple?e.optional===!0?Ju.multipleOptional:Ju.multipleMandatory:e.optional===!0?Ju.singleOptional:Ju.singleMandatory}}function BH(r,e){return hi(e)?(r.cache={isRight:!0,value:e},e.then(t=>fM(r,t))):fM(r,e)}function fM(r,e){return r.cache={isRight:!0,value:e},e}function $ye(r,e,t){const n=r.getActivations(e);return n===void 0?t:hi(t)?hM(r,t,n[Symbol.iterator]()):function(i,s,o){let a=s,c=o.next();for(;c.done!==!0;){const l=c.value(i.context,a);if(hi(l))return hM(i,l,o);a=l,c=o.next()}return a}(r,t,n[Symbol.iterator]())}async function hM(r,e,t){let n=await e,i=t.next();for(;i.done!==!0;)n=await i.value(r.context,n),i=t.next();return n}function Ny(r,e,t){let n=t;if(e.onActivation!==void 0){const i=e.onActivation;n=hi(n)?n.then(s=>i(r.context,s)):i(r.context,n)}return $ye(r,e.serviceIdentifier,n)}function J3(r){return(e,t)=>t.cache.isRight?t.cache.value:BH(t,Ny(e,t,r(e,t)))}const Mye=J3(function(r,e){return e.value});function Bye(r){return r}function Q3(r,e){return(t,n)=>{const i=r(n);switch(i.scope){case _a.Singleton:return i.cache.isRight?i.cache.value:BH(i,Ny(t,i,e(t,n)));case _a.Request:{if(t.requestScopeCache.has(i.id))return t.requestScopeCache.get(i.id);const s=Ny(t,i,e(t,n));return t.requestScopeCache.set(i.id,s),s}case _a.Transient:return Ny(t,i,e(t,n))}}}const Nye=(r=>Q3(Bye,r))(function(r,e){return e.value(r.context)}),Lye=J3(function(r,e){return e.factory(r.context)});function dM(r,e,t){const n=function(i,s,o){if(o!==void 0){if(!(o in i))throw new Yn(Tn.resolution,`Expecting a "${o.toString()}" property when resolving "${s.implementationType.name}" class @postConstruct decorated method, none found.`);if(typeof i[o]!="function")throw new Yn(Tn.resolution,`Expecting a "${o.toString()}" method when resolving "${s.implementationType.name}" class @postConstruct decorated method, a non function property was found instead.`);{let a;try{a=i[o]()}catch(c){throw new Yn(Tn.resolution,`Unexpected error found when calling "${o.toString()}" @postConstruct decorated method on class "${s.implementationType.name}"`,{cause:c})}if(hi(a))return async function(c,l,u){try{await u}catch(f){throw new Yn(Tn.resolution,`Unexpected error found when calling "${l.toString()}" @postConstruct decorated method on class "${c.implementationType.name}"`,{cause:f})}}(s,o,a)}}}(r,e,t);return hi(n)?n.then(()=>r):r}function pM(r){return(e,t,n)=>{const i=new n.binding.implementationType(...e),s=r(t,i,n);return hi(s)?s.then(()=>dM(i,n.binding,n.classMetadata.lifecycle.postConstructMethodName)):dM(i,n.binding,n.classMetadata.lifecycle.postConstructMethodName)}}const Fye=J3(function(r,e){return e.provider(r.context)});function Uye(r){return r.binding}function zye(r){return r.binding}const gM=function(r){return(e,t,n)=>{const i=[];for(const[s,o]of n.propertyParams){const a=n.classMetadata.properties.get(s);if(a===void 0)throw new Yn(Tn.resolution,`Expecting metadata at property "${s.toString()}", none found`);a.kind!==xu.unmanaged&&o.bindings!==void 0&&(t[s]=r(e,o),hi(t[s])&&i.push((async()=>{t[s]=await t[s]})()))}if(i.length>0)return Promise.all(i).then(()=>{})}}(vw),mM=function(r){return function e(t,n){const i=[];for(const s of n.redirections)Tf(s)?i.push(...e(t,s)):i.push(r(t,s));return i}}(vI),qye=function(r,e,t){return(n,i)=>{const s=r(n,i);return hi(s)?e(s,n,i):t(s,n,i)}}(function(r){return(e,t)=>{const n=[];for(const i of t.constructorParams)i===void 0?n.push(void 0):n.push(r(e,i));return n.some(hi)?Promise.all(n):n}}(vw),function(r){return async(e,t,n)=>{const i=await e;return r(i,t,n)}}(pM(gM)),pM(gM)),jye=function(r){return(e,t)=>{const n=r(e,t);return hi(n)?n.then(i=>t.binding.factory(...i)):t.binding.factory(...n)}}(function(r){return(e,t)=>{const n=[];for(const i of t.params)n.push(r(e,i));return n.some(hi)?Promise.all(n):n}}(vw)),Vye=(r=>Q3(Uye,r))(qye),Kye=(r=>Q3(zye,r))(jye);function Hye(r){return vw(r,r.planResult.tree.root)}function vI(r,e){switch(e.binding.type){case Wn.ConstantValue:return Mye(r,e.binding);case Wn.DynamicValue:return Nye(r,e.binding);case Wn.Factory:return Lye(r,e.binding);case Wn.Instance:return Vye(r,e);case Wn.Provider:return Fye(r,e.binding);case Wn.ResolvedValue:return Kye(r,e)}}function vw(r,e){if(e.bindings!==void 0)return Array.isArray(e.bindings)?function(t,n){const i=[];for(const s of n)Tf(s)?i.push(...mM(t,s)):i.push(vI(t,s));return i.some(hi)?Promise.all(i):i}(r,e.bindings):function(t,n){if(Tf(n)){const i=mM(t,n);if(i.length===1)return i[0];throw new Yn(Tn.resolution,"Unexpected multiple resolved values on single injection")}return vI(t,n)}(r,e.bindings)}function Wye(r){return r.scope!==void 0}function yM(r,e){if(r.lifecycle.preDestroyMethodName!==void 0&&typeof e[r.lifecycle.preDestroyMethodName]=="function")return e[r.lifecycle.preDestroyMethodName]()}function vM(r,e,t){const n=r.getDeactivations(e);if(n!==void 0)return hi(t)?bM(t,n[Symbol.iterator]()):function(i,s){let o=s.next();for(;o.done!==!0;){const a=o.value(i);if(hi(a))return bM(i,s);o=s.next()}}(t,n[Symbol.iterator]())}async function bM(r,e){const t=await r;let n=e.next();for(;n.done!==!0;)await n.value(t),n=e.next()}function Gye(r,e){const t=function(n,i){if(i.type===Wn.Instance){const s=n.getClassMetadata(i.implementationType),o=i.cache.value;return hi(o)?o.then(a=>yM(s,a)):yM(s,o)}}(r,e);return t===void 0?wM(r,e):t.then(()=>wM(r,e))}function wM(r,e){const t=e.cache;return hi(t.value)?t.value.then(n=>xM(r,e,n)):xM(r,e,t.value)}function xM(r,e,t){let n;return e.onDeactivation!==void 0&&(n=(0,e.onDeactivation)(t)),n===void 0?vM(r,e.serviceIdentifier,t):n.then(()=>vM(r,e.serviceIdentifier,t))}function Z3(r,e){if(e===void 0)return;const t=function(i){const s=[];for(const o of i)Wye(o)&&o.scope===_a.Singleton&&o.cache.isRight&&s.push(o);return s}(e),n=[];for(const i of t){const s=Gye(r,i);s!==void 0&&n.push(s)}return n.length>0?Promise.all(n).then(()=>{}):void 0}function Yye(r,e){const t=r.getBindingsFromModule(e);return Z3(r,t)}function _M(r,e){const t=r.getBindings(e);return Z3(r,t)}const CE="@inversifyjs/container/bindingId";let pn=class{#e;#t;constructor(e){this.#e=function(){const t=Cf(Object,CE)??0;return t===Number.MAX_SAFE_INTEGER?W3(Object,CE,Number.MIN_SAFE_INTEGER):ff(Object,CE,()=>t,n=>n+1),t}(),this.#t=e}get id(){return this.#e}load(e){return this.#t(e)}};const NH=Symbol.for("@inversifyjs/container/bindingIdentifier");function SM(r){return typeof r=="object"&&r!==null&&r[NH]===!0}let zu=class{static always=e=>!0};function ek(r){return{[NH]:!0,id:r.id}}function p0(r){return e=>{for(let t=e.getAncestor();t!==void 0;t=t.getAncestor())if(r(t))return!0;return!1}}function Wp(r){return e=>e.name===r}function Jm(r){return e=>e.serviceIdentifier===r}function Gp(r,e){return t=>t.tags.has(r)&&t.tags.get(r)===e}function Xye(r){return r.name===void 0&&r.tags.size===0}function Qm(r){const e=p0(r);return t=>!e(t)}function Zm(r){return e=>{const t=e.getAncestor();return t===void 0||!r(t)}}function ey(r){return e=>{const t=e.getAncestor();return t!==void 0&&r(t)}}let Jye=class{#e;constructor(e){this.#e=e}getIdentifier(){return ek(this.#e)}inRequestScope(){return this.#e.scope=_a.Request,new hf(this.#e)}inSingletonScope(){return this.#e.scope=_a.Singleton,new hf(this.#e)}inTransientScope(){return this.#e.scope=_a.Transient,new hf(this.#e)}},EM=class{#e;#t;#r;#n;constructor(e,t,n,i){this.#e=e,this.#t=t,this.#r=n,this.#n=i}to(e){const t=Dv(e),n={cache:{isRight:!1,value:void 0},id:Nl(),implementationType:e,isSatisfiedBy:zu.always,moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,scope:t.scope??this.#r,serviceIdentifier:this.#n,type:Wn.Instance};return this.#e(n),new TE(n)}toSelf(){if(typeof this.#n!="function")throw new Error('"toSelf" function can only be applied when a newable function is used as service identifier');return this.to(this.#n)}toConstantValue(e){const t={cache:{isRight:!1,value:void 0},id:Nl(),isSatisfiedBy:zu.always,moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,scope:_a.Singleton,serviceIdentifier:this.#n,type:Wn.ConstantValue,value:e};return this.#e(t),new hf(t)}toDynamicValue(e){const t={cache:{isRight:!1,value:void 0},id:Nl(),isSatisfiedBy:zu.always,moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,scope:this.#r,serviceIdentifier:this.#n,type:Wn.DynamicValue,value:e};return this.#e(t),new TE(t)}toResolvedValue(e,t){const n={cache:{isRight:!1,value:void 0},factory:e,id:Nl(),isSatisfiedBy:zu.always,metadata:this.#i(t),moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,scope:this.#r,serviceIdentifier:this.#n,type:Wn.ResolvedValue};return this.#e(n),new TE(n)}toFactory(e){const t={cache:{isRight:!1,value:void 0},factory:e,id:Nl(),isSatisfiedBy:zu.always,moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,scope:_a.Singleton,serviceIdentifier:this.#n,type:Wn.Factory};return this.#e(t),new hf(t)}toProvider(e){const t={cache:{isRight:!1,value:void 0},id:Nl(),isSatisfiedBy:zu.always,moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,provider:e,scope:_a.Singleton,serviceIdentifier:this.#n,type:Wn.Provider};return this.#e(t),new hf(t)}toService(e){const t={id:Nl(),isSatisfiedBy:zu.always,moduleId:this.#t,serviceIdentifier:this.#n,targetServiceIdentifier:e,type:Wn.ServiceRedirection};this.#e(t)}#i(e){return{arguments:(e??[]).map(t=>function(n){return typeof n=="object"&&!H3.is(n)}(t)?{kind:t.isMultiple===!0?id.multipleInjection:id.singleInjection,name:t.name,optional:t.optional??!1,tags:new Map((t.tags??[]).map(n=>[n.key,n.value])),value:t.serviceIdentifier}:{kind:id.singleInjection,name:void 0,optional:!1,tags:new Map,value:t})}}},LH=class{#e;constructor(e){this.#e=e}getIdentifier(){return ek(this.#e)}onActivation(e){return this.#e.onActivation=e,new bI(this.#e)}onDeactivation(e){return this.#e.onDeactivation=e,new bI(this.#e)}},bI=class{#e;constructor(e){this.#e=e}getIdentifier(){return ek(this.#e)}when(e){return this.#e.isSatisfiedBy=e,new LH(this.#e)}whenAnyAncestor(e){return this.when(p0(e))}whenAnyAncestorIs(e){return this.when(p0(Jm(e)))}whenAnyAncestorNamed(e){return this.when(function(t){return p0(Wp(t))}(e))}whenAnyAncestorTagged(e,t){return this.when(function(n,i){return p0(Gp(n,i))}(e,t))}whenDefault(){return this.when(Xye)}whenNamed(e){return this.when(Wp(e))}whenNoParent(e){return this.when(Zm(e))}whenNoParentIs(e){return this.when(Zm(Jm(e)))}whenNoParentNamed(e){return this.when(function(t){return Zm(Wp(t))}(e))}whenNoParentTagged(e,t){return this.when(function(n,i){return Zm(Gp(n,i))}(e,t))}whenParent(e){return this.when(ey(e))}whenParentIs(e){return this.when(ey(Jm(e)))}whenParentNamed(e){return this.when(function(t){return ey(Wp(t))}(e))}whenParentTagged(e,t){return this.when(function(n,i){return ey(Gp(n,i))}(e,t))}whenTagged(e,t){return this.when(Gp(e,t))}whenNoAncestor(e){return this.when(Qm(e))}whenNoAncestorIs(e){return this.when(Qm(Jm(e)))}whenNoAncestorNamed(e){return this.when(function(t){return Qm(Wp(t))}(e))}whenNoAncestorTagged(e,t){return this.when(function(n,i){return Qm(Gp(n,i))}(e,t))}},hf=class extends bI{#e;constructor(e){super(e),this.#e=new LH(e)}onActivation(e){return this.#e.onActivation(e)}onDeactivation(e){return this.#e.onDeactivation(e)}},TE=class extends hf{#e;constructor(e){super(e),this.#e=new Jye(e)}inRequestScope(){return this.#e.inRequestScope()}inSingletonScope(){return this.#e.inSingletonScope()}inTransientScope(){return this.#e.inTransientScope()}};const RE=Symbol.for("@inversifyjs/container/InversifyContainerError");let Eh=class FH extends Error{[RE];kind;constructor(e,t,n){super(t,n),this[RE]=!0,this.kind=e}static is(e){return typeof e=="object"&&e!==null&&e[RE]===!0}static isErrorOfKind(e,t){return FH.is(e)&&e.kind===t}};var zl;(function(r){r[r.invalidOperation=0]="invalidOperation"})(zl||(zl={}));const Qye=_a.Transient;let tk=class{#e;#t;#r;#n;#i;#o;#a;#s;#u;#c;#f;constructor(e){this.#r=this.#g(),this.#i=t=>this.#e.get(t),this.#s=new Dye,this.#u=this.#v(),e?.parent===void 0?(this.#e=iM.build(void 0),this.#t=sM.build(void 0),this.#n=oM.build(void 0)):(this.#e=iM.build(e.parent.#e),this.#t=sM.build(e.parent.#t),this.#n=oM.build(e.parent.#n),e.parent.#s.subscribe(this.#s)),this.#o=this.#t.get.bind(this.#t),this.#c=this.#m.bind(this),this.#a={autobind:e?.autobind??!1,defaultScope:e?.defaultScope??Qye},this.#f=[]}bind(e){return new EM(t=>{this.#m(t)},void 0,this.#a.defaultScope,e)}get(e,t){const n=this.#l(!1,e,t),i=this.#d(n);if(hi(i))throw new Eh(zl.invalidOperation,`Unexpected asyncronous service when resolving service "${$s(e)}"`);return i}getAll(e,t){const n=this.#l(!0,e,t),i=this.#d(n);if(hi(i))throw new Eh(zl.invalidOperation,`Unexpected asyncronous service when resolving service "${$s(e)}"`);return i}async getAllAsync(e,t){const n=this.#l(!0,e,t);return this.#d(n)}async getAsync(e,t){const n=this.#l(!1,e,t);return this.#d(n)}isBound(e,t){const n=this.#t.get(e);return this.#b(e,n,t)}isCurrentBound(e,t){const n=this.#t.getNonParentBindings(e);return this.#b(e,n,t)}async load(...e){await Promise.all(this.#w(...e))}loadSync(...e){const t=this.#w(...e);for(const n of t)if(n!==void 0)throw new Eh(zl.invalidOperation,"Unexpected asyncronous module load. Consider using Container.load() instead.")}onActivation(e,t){this.#e.add(t,{serviceId:e})}onDeactivation(e,t){this.#n.add(t,{serviceId:e})}restore(){const e=this.#f.pop();if(e===void 0)throw new Eh(zl.invalidOperation,"No snapshot available to restore");this.#e=e.activationService,this.#t=e.bindingService,this.#n=e.deactivationService,this.#S()}async rebind(e){return await this.unbind(e),this.bind(e)}rebindSync(e){return this.unbindSync(e),this.bind(e)}snapshot(){this.#f.push({activationService:this.#e.clone(),bindingService:this.#t.clone(),deactivationService:this.#n.clone()})}async unbind(e){await this.#E(e)}async unbindAll(){const e=[...this.#t.getNonParentBoundServices()];await Promise.all(e.map(async t=>_M(this.#r,t)));for(const t of e)this.#e.removeAllByServiceId(t),this.#t.removeAllByServiceId(t),this.#n.removeAllByServiceId(t);this.#s.clearCache()}unbindSync(e){this.#E(e)!==void 0&&this.#T(e)}async unload(...e){await Promise.all(this.#x(...e)),this.#I(e)}unloadSync(...e){const t=this.#x(...e);for(const n of t)if(n!==void 0)throw new Eh(zl.invalidOperation,"Unexpected asyncronous module unload. Consider using Container.unload() instead.");this.#I(e)}#p(e){return{bind:t=>new EM(n=>{this.#m(n)},e,this.#a.defaultScope,t),isBound:this.isBound.bind(this),onActivation:(t,n)=>{this.#e.add(n,{moduleId:e,serviceId:t})},onDeactivation:(t,n)=>{this.#n.add(n,{moduleId:e,serviceId:t})},rebind:this.rebind.bind(this),rebindSync:this.rebindSync.bind(this),unbind:this.unbind.bind(this),unbindSync:this.unbindSync.bind(this)}}#g(){return{getBindings:e=>this.#t.get(e),getBindingsFromModule:e=>this.#t.getByModuleId(e),getClassMetadata:Dv,getDeactivations:e=>this.#n.get(e)}}#h(e,t,n){return{isMultiple:e,name:n?.name,optional:n?.optional,serviceIdentifier:t,tag:n?.tag}}#y(e,t,n){const i={autobindOptions:n?.autobind??this.#a.autobind?{scope:this.#a.defaultScope}:void 0,getBindings:this.#o,getClassMetadata:Dv,rootConstraints:{isMultiple:t,serviceIdentifier:e},servicesBranch:[],setBinding:this.#c};return this.#_(i,n),i}#l(e,t,n){const i=this.#h(e,t,n),s=this.#s.get(i);if(s!==void 0)return s;const o=Tye(this.#y(t,e,n));return this.#s.set(i,o),o}#v(){return{get:this.get.bind(this),getAll:this.getAll.bind(this),getAllAsync:this.getAllAsync.bind(this),getAsync:this.getAsync.bind(this)}}#d(e){return Hye({context:this.#u,getActivations:this.#i,planResult:e,requestScopeCache:new Map})}#_(e,t){t!==void 0&&(t.name!==void 0&&(e.rootConstraints.name=t.name),t.optional===!0&&(e.rootConstraints.isOptional=!0),t.tag!==void 0&&(e.rootConstraints.tag={key:t.tag.key,value:t.tag.value}))}#b(e,t,n){if(t===void 0)return!1;const i={getAncestor:()=>{},name:n?.name,serviceIdentifier:e,tags:new Map};n?.tag!==void 0&&i.tags.set(n.tag.key,n.tag.value);for(const s of t)if(s.isSatisfiedBy(i))return!0;return!1}#w(...e){return e.map(t=>t.load(this.#p(t.id)))}#x(...e){return e.map(t=>Yye(this.#r,t.id))}#S(){this.#s.clearCache(),this.#i=e=>this.#e.get(e),this.#o=this.#t.get.bind(this.#t),this.#u=this.#v(),this.#c=this.#m.bind(this)}#m(e){this.#t.set(e),this.#s.clearCache()}#T(e){let t;if(SM(e)){const i=this.#t.getById(e.id),s=(n=i,function(o){if(o===void 0)return;const a=o.next();return a.done!==!0?a.value:void 0}(n?.[Symbol.iterator]()))?.serviceIdentifier;t=s===void 0?"Unexpected asyncronous deactivation when unbinding binding identifier. Consider using Container.unbind() instead.":`Unexpected asyncronous deactivation when unbinding "${$s(s)}" binding. Consider using Container.unbind() instead.`}else t=`Unexpected asyncronous deactivation when unbinding "${$s(e)}" service. Consider using Container.unbind() instead.`;var n;throw new Eh(zl.invalidOperation,t)}#E(e){return SM(e)?this.#R(e):this.#k(e)}#R(e){const t=this.#t.getById(e.id),n=Z3(this.#r,t);if(n!==void 0)return n.then(()=>{this.#A(e)});this.#A(e)}#A(e){this.#t.removeById(e.id),this.#s.clearCache()}#I(e){for(const t of e)this.#e.removeAllByModuleId(t.id),this.#t.removeAllByModuleId(t.id),this.#n.removeAllByModuleId(t.id);this.#s.clearCache()}#k(e){const t=_M(this.#r,e);if(t!==void 0)return t.then(()=>{this.#C(e)});this.#C(e)}#C(e){this.#e.removeAllByServiceId(e),this.#t.removeAllByServiceId(e),this.#n.removeAllByServiceId(e),this.#s.clearCache()}},Zye=class{constructor(e,t,n,i,s){this.deviceModel=e,this.serviceUuid=t,this.writeUuid=n,this.writeCmdUuid=i,this.notifyUuid=s}},Ah=class{id;productName;usbProductId;bootloaderUsbProductId;usbOnly;memorySize;blockSize;masks;bluetoothSpec;constructor(e){this.id=e.id,this.productName=e.productName,this.usbProductId=e.usbProductId,this.bootloaderUsbProductId=e.bootloaderUsbProductId,this.usbOnly=e.usbOnly,this.memorySize=e.memorySize,this.blockSize=e.blockSize,this.masks=e.masks,this.bluetoothSpec=e.bluetoothSpec}getBlockSize(e){switch(this.id){case Lr.NANO_S:return D$.lt(D$.coerce(e)??"","2.0.0")?4*1024:2*1024;case Lr.NANO_X:return 4*1024;case Lr.NANO_SP:case Lr.STAX:case Lr.FLEX:case Lr.APEX:return 32}}};var eve=Object.defineProperty,tve=(r,e,t)=>e in r?eve(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,rve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},nve=(r,e,t)=>tve(r,e+"",t);let Ql=class{getAllDeviceModels(){return Object.values(Ql.deviceModelByIds)}getDeviceModel(e){return Ql.deviceModelByIds[e.id]}filterDeviceModels(e){return this.getAllDeviceModels().filter(t=>Object.entries(e).every(([n,i])=>t[n]===i))}getBluetoothServicesInfos(){return Object.values(Ql.deviceModelByIds).reduce((e,t)=>{const{bluetoothSpec:n}=t;return n?{...e,...n.reduce((i,s)=>({...i,[s.serviceUuid]:new Zye(t,s.serviceUuid,s.writeUuid,s.writeCmdUuid,s.notifyUuid)}),{})}:e},{})}getBluetoothServices(){return Object.values(Ql.deviceModelByIds).map(e=>(e.bluetoothSpec||[]).map(t=>t.serviceUuid)).flat().filter(e=>!!e)}};nve(Ql,"deviceModelByIds",{[Lr.NANO_S]:new Ah({id:Lr.NANO_S,productName:"Ledger Nano S",usbProductId:16,bootloaderUsbProductId:1,usbOnly:!0,memorySize:320*1024,blockSize:4*1024,masks:[823132160]}),[Lr.NANO_SP]:new Ah({id:Lr.NANO_SP,productName:"Ledger Nano S Plus",usbProductId:80,bootloaderUsbProductId:5,usbOnly:!0,memorySize:1533*1024,blockSize:32,masks:[856686592]}),[Lr.NANO_X]:new Ah({id:Lr.NANO_X,productName:"Ledger Nano X",usbProductId:64,bootloaderUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,blockSize:4*1024,masks:[855638016],bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]}),[Lr.STAX]:new Ah({id:Lr.STAX,productName:"Ledger Stax",usbProductId:96,bootloaderUsbProductId:6,usbOnly:!1,memorySize:1533*1024,blockSize:32,masks:[857735168],bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]}),[Lr.FLEX]:new Ah({id:Lr.FLEX,productName:"Ledger Flex",usbProductId:112,bootloaderUsbProductId:7,usbOnly:!1,memorySize:1533*1024,blockSize:32,masks:[858783744],bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]}),[Lr.APEX]:new Ah({id:Lr.APEX,productName:"Ledger Apex",usbProductId:128,bootloaderUsbProductId:8,usbOnly:!1,memorySize:1533*1024,blockSize:32,masks:[859832320],bluetoothSpec:[{serviceUuid:"13d63400-2c97-8004-0000-4c6564676572",notifyUuid:"13d63400-2c97-8004-0001-4c6564676572",writeUuid:"13d63400-2c97-8004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-8004-0003-4c6564676572"}]})}),Ql=rve([Ct()],Ql);let ive=class{statusCode;data;constructor({statusCode:e,data:t}){this.statusCode=e,this.data=t}};const sve=5,Hu=1,wI=2,Kh=2,xI=2,Si=[];for(let r=0;r<256;++r)Si.push((r+256).toString(16).slice(1));function ove(r,e=0){return(Si[r[e+0]]+Si[r[e+1]]+Si[r[e+2]]+Si[r[e+3]]+"-"+Si[r[e+4]]+Si[r[e+5]]+"-"+Si[r[e+6]]+Si[r[e+7]]+"-"+Si[r[e+8]]+Si[r[e+9]]+"-"+Si[r[e+10]]+Si[r[e+11]]+Si[r[e+12]]+Si[r[e+13]]+Si[r[e+14]]+Si[r[e+15]]).toLowerCase()}let kE;const ave=new Uint8Array(16);function cve(){if(!kE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");kE=crypto.getRandomValues.bind(crypto)}return kE(ave)}const lve=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),AM={randomUUID:lve};function rm(r,e,t){if(AM.randomUUID&&!r)return AM.randomUUID();r=r||{};const n=r.random||(r.rng||cve)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ove(n)}const su={getLastBytesFrom(r,e){return r.slice(-e)},getFirstBytesFrom(r,e){return r.slice(0,e)},bytesToNumber(r){return r.reduce((e,t,n)=>e+t*Math.pow(256,r.length-1-n),0)},numberToByteArray(r,e){return new Uint8Array(e).map((t,n)=>r>>8*(e-1-n)&255)}},IM=2,PE=800;let CM=class{_tag="FramerOverflowError";originalError;constructor(){this.originalError=new Error("Frame header length is greater than frame size")}},uve=class{_tag="FramerApduError";originalError;constructor(){this.originalError=new Error("Frame offset is greater than apdu length")}},TM=class{_tag="ReceiverApduError";originalError;constructor(e){this.originalError=new Error(e??"Unable to parse apdu")}},RM=class{_tag="DeviceSessionNotFound";originalError;constructor(e){this.originalError=e??new Error("Device session not found")}},UH=class{_header;_data;constructor({header:e,data:t}){this._header=e,this._data=t}toString(){return JSON.stringify({header:this._header.toString(),data:mg(this._data)},null,2)}getRawData(){const e=this._header.getRawData(),t=new Uint8Array(e.length+this._data.length);return t.set(e,0),t.set(this._data,e.length),t}getHeader(){return this._header}getData(){return this._data}},zH=class{_uuid;_channel;_headTag;_index;_length;_dataLength;constructor({uuid:e,dataSize:t,index:n,headTag:i,length:s,channel:o}){this._uuid=e,this._dataLength=t,this._index=n,this._headTag=i,this._length=s,this._channel=o}getDataLength(){return this._dataLength.map(e=>su.bytesToNumber(e))}setDataSize(e){return this._dataLength=e,this}getLength(){return this._length}toString(){return JSON.stringify({uuid:this._uuid.toString(),dataSize:this._dataLength.extract()?.toString(),index:this._index.toString(),headTag:this._headTag.toString(),length:this._length.toString(),channel:this._channel.extract()?.toString()})}getRawData(){return new Uint8Array([...this._channel.caseOf({Just:e=>[...e],Nothing:()=>[]}),...this._headTag,...this._index,...this._dataLength.caseOf({Just:e=>[...e],Nothing:()=>[]})])}};const ri={LoggerPublisherServiceFactory:Symbol.for("LoggerPublisherServiceFactory")};var fve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},hve=(r,e)=>(t,n)=>e(t,n,r);let _I=class{_channel;_logger;_pendingFrames;constructor({channel:e=an.zero()},t){this._channel=e,this._logger=t("ApduReceiverService"),this._pendingFrames=[]}handleFrame(e){return this.getFrameFromBytes(e).map(t=>{if(this._pendingFrames.push(t),!this._pendingFrames[0])return Fr;const n=this._pendingFrames[0].getHeader().getDataLength();return this.getCompleteFrame(n)})}getCompleteFrame(e){return e.chain(t=>{if(!this.isComplete(t))return this._logger.debug("frame is not complete, waiting for more"),Fr;const n=su.getFirstBytesFrom(this.concatFrames(this._pendingFrames),t),i=su.getFirstBytesFrom(n,n.length-IM),s=su.getLastBytesFrom(n,IM);return this._pendingFrames=[],es(new ive({data:i,statusCode:s}))})}getFrameFromBytes(e){const t=this._channel.caseOf({Just:()=>wI,Nothing:()=>0}),n=e.slice(t,t+Hu),i=e.slice(t+Hu,t+Hu+Kh),s=i.reduce((h,d)=>h+d,0)===0;if(!s&&this._pendingFrames.length===0)return ut(new TM);const o=t+Hu+Kh,a=s?xI:0;if(e.length<t+Hu+Kh+a)return ut(new TM("Unable to parse header from apdu"));const c=s?es(e.slice(o,o+a)):Fr,l=o+a,u=e.slice(l),f=new UH({header:new zH({uuid:rm(),channel:this._channel,dataSize:c,headTag:n,index:i,length:t+Hu+Kh+a}),data:u});return er(f)}isComplete(e){return this._pendingFrames.reduce((t,n)=>t+n.getData().length,0)>=e}concatFrames(e){return e.reduce((t,n)=>Uint8Array.from([...t,...n.getData()]),new Uint8Array(0))}};_I=fve([Ct(),hve(1,Ze(ri.LoggerPublisherServiceFactory))],_I);var dve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},pve=(r,e)=>(t,n)=>e(t,n,r);let SI=class{_frameSize;_channel;_padding;_logger;constructor({frameSize:e,channel:t=an.zero(),padding:n=!1},i){this._frameSize=e,this._channel=t,this._padding=n,this._logger=i("DefaultApduSenderService")}getFrames(e){const t=[];let n=0,i=this.getFrameAtIndex(e,n);for(;i.isRight();)t.push(i.extract()),n+=1,i=this.getFrameAtIndex(e,n).mapLeft(s=>(s instanceof CM||this._logger.error("Error while parsing frame",{data:{error:s}}),s));return t}getFrameAtIndex(e,t){const n=this.getFrameHeaderFrom(t,e.length),i=t===0?0:t*this._frameSize-this.getHeaderSizeSumFrom(t);if(i>=e.length)return ut(new CM);if(n.getLength()>this._frameSize)return ut(new uve);const s=this._frameSize-n.getLength(),o=e.slice(i,i+this._frameSize-n.getLength()),a=this._padding?new Uint8Array(s).fill(0):new Uint8Array(o.length<s?o.length:s);a.set(o,0);const c=new UH({header:n,data:a});return er(c)}getFrameHeaderFrom(e,t){const n=new zH({uuid:rm(),channel:this._channel.map(i=>su.getLastBytesFrom(i,wI)),headTag:new Uint8Array([sve]),index:su.numberToByteArray(e,Kh),length:this.getFrameHeaderSizeFromIndex(e),dataSize:an.zero()});return e===0&&n.setDataSize(an.of(su.numberToByteArray(t,xI))),n}getHeaderSizeSumFrom(e){let t=this.getFrameHeaderSizeFromIndex(0),n=1;for(;n<e;)t+=this.getFrameHeaderSizeFromIndex(n),n+=1;return t}getFrameHeaderSizeFromIndex(e){return this._channel.caseOf({Just:()=>wI,Nothing:()=>0})+Kh+Hu+(e===0?xI:0)}};SI=dve([Ct(),pve(1,Ze(ri.LoggerPublisherServiceFactory))],SI);const EI={SendCommandUseCase:Symbol.for("SendCommandUseCase")},rc={LocalConfigDataSource:Symbol.for("LocalConfigDataSource"),RemoteConfigDataSource:Symbol.for("RemoteConfigDataSource"),ConfigService:Symbol.for("ConfigService"),GetDmkVersionUseCase:Symbol.for("GetDmkVersionUseCase")},yn={ApduSenderServiceFactory:Symbol.for("ApduSenderServiceFactory"),ApduReceiverServiceFactory:Symbol.for("ApduReceiverServiceFactory"),DeviceSessionService:Symbol.for("DeviceSessionService"),GetDeviceSessionStateUseCase:Symbol.for("GetDeviceSessionStateUseCase"),DisableDeviceSessionRefresherUseCase:Symbol.for("DisableDeviceSessionRefresherUseCase"),CloseSessionsUseCase:Symbol.for("CloseSessionsUseCase")},xn={StartDiscoveringUseCase:Symbol.for("StartDiscoveringUseCase"),StopDiscoveringUseCase:Symbol.for("StopDiscoveringUseCase"),ConnectUseCase:Symbol.for("ConnectUseCase"),DisconnectUseCase:Symbol.for("DisconnectUseCase"),GetConnectedDeviceUseCase:Symbol.for("GetConnectedDeviceUseCase"),ListenToAvailableDevicesUseCase:Symbol.for("ListenToAvailableDevicesUseCase"),ListenToConnectedDeviceUseCase:Symbol.for("ListenToConnectedDeviceUseCase"),ListConnectedDevicesUseCase:Symbol.for("ListConnectedDevicesUseCase")},uo={ManagerApiService:Symbol.for("ManagerApiService"),ManagerApiDataSource:Symbol.for("ManagerApiDataSource"),DmkConfig:Symbol.for("ManagerApiDmkConfig"),SetProviderUseCase:Symbol.for("SetProviderUseCase")},AI={SendApduUseCase:Symbol.for("SendApduUseCase")},Xo={DmkConfig:Symbol.for("TransportDmkConfig"),TransportService:Symbol.for("TransportService"),TransportsInput:Symbol.for("TransportsInput")};var gve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},kM=(r,e)=>(t,n)=>e(t,n,r);let II=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("SendCommandUseCase")}async execute({sessionId:e,command:t,abortTimeout:n}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:async i=>await i.sendCommand(t,n),Left:i=>{throw this._logger.error("Error getting session",{data:{error:i}}),i}})}};II=gve([Ct(),kM(0,Ze(yn.DeviceSessionService)),kM(1,Ze(ri.LoggerPublisherServiceFactory))],II);var mve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let di=class{execute=vi.fn(()=>"stub")};di=mve([Ct()],di);const yve=({stub:r=!1}={})=>new pn(({bind:e,rebindSync:t})=>{e(EI.SendCommandUseCase).to(II),r&&t(EI.SendCommandUseCase).to(di)});var vve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},PM=(r,e)=>(t,n)=>e(t,n,r);let CI=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("ExecuteDeviceActionUseCase")}execute({sessionId:e,deviceAction:t}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:n=>n.executeDeviceAction(t),Left:n=>{throw this._logger.error("Error getting session",{data:{error:n}}),n}})}};CI=vve([Ct(),PM(0,Ze(yn.DeviceSessionService)),PM(1,Ze(ri.LoggerPublisherServiceFactory))],CI);const TI={ExecuteDeviceActionUseCase:Symbol.for("ExecuteDeviceActionUseCase")},bve=({stub:r=!1}={})=>new pn(({bind:e,rebindSync:t})=>{e(TI.ExecuteDeviceActionUseCase).to(CI),r&&t(TI.ExecuteDeviceActionUseCase).to(di)});function wve(r){return typeof r=="object"&&r!==null&&"version"in r&&"name"in r&&typeof r.version=="string"&&typeof r.name=="string"}let OM=class{constructor(e){this.err=e,this.originalError=e}_tag="ApiCallError";originalError},xve=class{constructor(e){this.err=e,this.originalError=e}_tag="ParseResponseError";originalError},qH=class{constructor(e){this.err=e,this.originalError=e}_tag="JSONParseError";originalError},_ve=class{constructor(e){this.err=e,this.originalError=e}_tag="ReadFileError";originalError};const Sve="@ledgerhq/device-management-kit",Eve="0.9.1",DM={name:Sve,version:Eve};var Ave=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};const Ive={name:DM.name,version:DM.version},Cve=()=>JSON.stringify(Ive);let RI=class{getConfig(){return xo.encase(()=>Cve()).mapLeft(e=>new _ve(e)).chain(e=>xo.encase(()=>{const t=JSON.parse(e);if(wve(t))return t;throw new Error("Invalid config file")}).mapLeft(t=>new qH(t)))}};RI=Ave([Ct()],RI);var Tve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let kI=class{getConfig(){return xo.of({name:"DeviceSDK",version:"0.0.0-stub.1"})}};kI=Tve([Ct()],kI);var Rve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let PI=class{async getConfig(){const e=await this._callApi();if(e.isLeft())return ut(new OM(e.extract()));if(!e.extract().ok)return ut(new OM(new Error("response not ok")));const t=await e.extract().json();return t.isLeft()?ut(new qH):t.chain(n=>this._parseResponse(n)).map(n=>n)}_parseResponse(e){const{name:t,version:n}=e;return!t||!n?ut(new xve):xo.of({name:t,version:n})}_callApi(){return new Promise(e=>{e(xo.of({ok:!0,json:async()=>new Promise(t=>{t(xo.of({name:"DeviceSDK",version:"0.0.0-fake.1",yolo:"yolo"}))})}))})}};PI=Rve([Ct()],PI);var kve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let OI=class{async getConfig(){return new Promise(e=>e(xo.of({name:"DeviceSDK",version:"0.0.0-fake.2"})))}};OI=kve([Ct()],OI);var Pve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},OE=(r,e)=>(t,n)=>e(t,n,r);let DI=class{_local;_remote;_logger;constructor(e,t,n){this._local=e,this._remote=t,this._logger=n("config")}async getDmkConfig(){const e=this._local.getConfig().ifLeft(t=>{this._logger.error("Local config not available",{data:{error:t}})});if(e.isRight()){const t=e.extract();return this._logger.info("Local config available",{data:{config:t}}),t}return this._remote.getConfig().then(t=>t.mapLeft(n=>(this._logger.error("Local config available",{data:{error:n}}),{name:"DeadDmk",version:"0.0.0-dead.1"})).extract())}};DI=Pve([Ct(),OE(0,Ze(rc.LocalConfigDataSource)),OE(1,Ze(rc.RemoteConfigDataSource)),OE(2,Ze(ri.LoggerPublisherServiceFactory))],DI);var Ove=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},Dve=(r,e)=>(t,n)=>e(t,n,r);let $I=class{_configService;constructor(e){this._configService=e}async getDmkVersion(){return(await this._configService.getDmkConfig()).version}};$I=Ove([Ct(),Dve(0,Ze(rc.ConfigService))],$I);const $ve=({stub:r})=>new pn(({bind:e,rebindSync:t})=>{e(rc.LocalConfigDataSource).to(RI),e(rc.RemoteConfigDataSource).to(PI),e(rc.GetDmkVersionUseCase).to($I),e(rc.ConfigService).to(DI),r&&(t(rc.LocalConfigDataSource).to(kI),t(rc.RemoteConfigDataSource).to(OI))}),jH={DeviceModelDataSource:Symbol.for("DeviceModelDataSource")},Mve=({stub:r})=>new pn(({bind:e})=>{e(jH.DeviceModelDataSource).to(Ql)});var Bve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},$M=(r,e)=>(t,n)=>e(t,n,r);let MI=class{constructor(e,t){this._sessionService=e,this._logger=t("DisableDeviceSessionRefresherUseCase")}_logger;execute({sessionId:e,blockerId:t}){return this._sessionService.getDeviceSessionById(e).caseOf({Left:n=>{throw this._logger.error("Error getting device session",{data:{error:n}}),n},Right:n=>n.disableRefresher(t)})}};MI=Bve([Ct(),$M(0,Ze(yn.DeviceSessionService)),$M(1,Ze(ri.LoggerPublisherServiceFactory))],MI);var Nve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},Lve=(r,e)=>(t,n)=>e(t,n,r);let BI=class{_sessions;_logger;_sessionsSubject;constructor(e){this._sessions=[],this._sessionsSubject=new aH,this._logger=e("DeviceSessionService")}get sessionsObs(){return this._sessionsSubject.asObservable()}addDeviceSession(e){return this._sessions.find(t=>t.id===e.id)?(this._logger.warn("DeviceSession already exists",{data:{deviceSession:e}}),this):(this._sessions.push(e),this._sessionsSubject.next(e),this._logger.info("DeviceSession added",{data:{deviceSession:e}}),this)}removeDeviceSession(e){const t=this._sessions.find(n=>n.id===e);return t?(t.close(),this._sessions=this._sessions.filter(n=>n.id!==e),this._logger.info("DeviceSession removed",{data:{sessionId:e}}),this):(this._logger.warn("DeviceSession not found",{data:{sessionId:e}}),this)}getDeviceSessionById(e){return an.fromNullable(this._sessions.find(t=>t.id===e)).toEither(new RM)}getDeviceSessionByDeviceId(e){return an.fromNullable(this._sessions.find(t=>t.connectedDevice.id===e)).toEither(new RM)}getDeviceSessions(){return this._sessions}};BI=Nve([Ct(),Lve(0,Ze(ri.LoggerPublisherServiceFactory))],BI);var Fve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},MM=(r,e)=>(t,n)=>e(t,n,r);let NI=class{_sessionService;_transportService;constructor(e,t){this._sessionService=e,this._transportService=t}execute(){const e=this._sessionService.getDeviceSessions();for(const t of e)this._transportService.closeConnection(t.connectedDevice),this._sessionService.removeDeviceSession(t.id)}};NI=Fve([Ct(),MM(0,Ze(yn.DeviceSessionService)),MM(1,Ze(Xo.TransportService))],NI);var Uve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},BM=(r,e)=>(t,n)=>e(t,n,r);let LI=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("GetDeviceSessionStateUseCase")}execute({sessionId:e}){return this._sessionService.getDeviceSessionById(e).caseOf({Left:t=>{throw this._logger.error("Error getting session device",{data:{error:t}}),t},Right:t=>t.state})}};LI=Uve([Ct(),BM(0,Ze(yn.DeviceSessionService)),BM(1,Ze(ri.LoggerPublisherServiceFactory))],LI);const zve=({stub:r}={stub:!1})=>new pn(({bind:e,rebindSync:t})=>{e(yn.ApduSenderServiceFactory).toFactory(n=>{const i=n.get(ri.LoggerPublisherServiceFactory);return s=>new SI(s,i)}),e(yn.ApduReceiverServiceFactory).toFactory(n=>{const i=n.get(ri.LoggerPublisherServiceFactory);return(s={})=>new _I(s,i)}),e(yn.DeviceSessionService).to(BI).inSingletonScope(),e(yn.GetDeviceSessionStateUseCase).to(LI),e(yn.CloseSessionsUseCase).to(NI),e(yn.DisableDeviceSessionRefresherUseCase).to(MI),r&&(t(yn.GetDeviceSessionStateUseCase).to(di),t(yn.DisableDeviceSessionRefresherUseCase).to(di))}),FI=1e3,DE=1e3,qve={isRefresherDisabled:!1,pollingInterval:1e3};let jve=class{_queue=[];_locked=!1;async lock(){return new Promise(e=>{const t=()=>{if(this._locked=!1,this._queue.length>0){const n=this._queue.shift();this._locked=!0,n()}};this._locked?this._queue.push(()=>e(t)):(this._locked=!0,e(t))})}},Vve=class{constructor(e,t){this._refresher=t,this._logger=e("refresher-service")}_refresherBlockers=new Set;_logger;disableRefresher(e){const t=`${e}-${rm()}`;this.addRefresherBlocker(t),this._logger.debug("Refresher disabled",{data:{blockerId:t,blockers:Array.from(this._refresherBlockers)}});let n=!1;return()=>{n||(n=!0,this.removeRefresherBlocker(t),this._logger.debug("Refresher re-enabled",{data:{blockerId:t,blockers:Array.from(this._refresherBlockers)}}))}}addRefresherBlocker(e){const t=this._refresherBlockers.size;this._refresherBlockers.add(e),t===0&&this._refresher.stop()}removeRefresherBlocker(e){const t=this._refresherBlockers.size;this._refresherBlockers.delete(e),t>0&&this._refresherBlockers.size===0&&this._refresher.start()}};var Ls=(r=>(r.NEW_STATE="NEW_STATE",r.REFRESH_NEEDED="REFRESH_NEEDED",r.COMMAND_SUCCEEDED="COMMAND_SUCCEEDED",r.DEVICE_STATE_UPDATE_BUSY="DEVICE_STATE_UPDATE_BUSY",r.DEVICE_STATE_UPDATE_LOCKED="DEVICE_STATE_UPDATE_LOCKED",r.DEVICE_STATE_UPDATE_CONNECTED="DEVICE_STATE_UPDATE_CONNECTED",r))(Ls||{});let Kve=class{_eventEmitter=new tm;listen(){return this._eventEmitter.asObservable()}dispatch(e){this._eventEmitter.next(e)}},Hve=class{constructor(e,t,n,i){this.connectedDevice=t,this._sessionEventDispatcher=n,this._sendCommandFunction=i,this._logger=e("device-pinger"),this._subscription=this._sessionEventDispatcher.listen().subscribe(async s=>await this.mapEventAction(s))}_sendCommandFunction;_subscription;_logger;async ping(){try{return await this.mapDevicePingAction(this.connectedDevice.deviceModel.id)}catch(e){throw this._logger.error("Error while pinging device",{data:{error:e}}),e}}mapEventAction=async e=>{switch(e.eventName){case Ls.REFRESH_NEEDED:return await this.ping();default:return null}};async mapDevicePingAction(e){switch(e){case Lr.NANO_S:{const t=async()=>{const s=await this._sendCommandFunction(new yg,PE);return this._sendCommandFunction(new ige,PE),s},n=new Promise(s=>{setTimeout(()=>s(null),FI*2+100)}),i=await Promise.race([t(),n]);return i?this._sessionEventDispatcher.dispatch({eventName:Ls.COMMAND_SUCCEEDED,eventData:i}):this._sessionEventDispatcher.dispatch({eventName:Ls.DEVICE_STATE_UPDATE_LOCKED}),i}default:{const t=await this._sendCommandFunction(new yg,PE);return this._sessionEventDispatcher.dispatch({eventName:Ls.COMMAND_SUCCEEDED,eventData:t}),t}}}unsubscribe(){this._subscription.unsubscribe()}},Wve=class{constructor(e,t,n,i){this._sessionEventDispatcher=n,this._refresherOptions=t,this._logger=e("device-session-refresher"),this._connectedDeviceID=i.deviceModel.id}_refresherSubscription;_refresherOptions;_logger;_connectedDeviceID;startRefresher(){if(this._refresherOptions.isRefresherDisabled)return;const e=this.getValidPollingInterval(this._refresherOptions,this._logger)*2;this._refresherSubscription=AH(0,e).subscribe(()=>{this._sessionEventDispatcher.dispatch({eventName:Ls.REFRESH_NEEDED})})}stopRefresher(){this._refresherSubscription&&(this._refresherSubscription.unsubscribe(),this._refresherSubscription=void 0,this._logger.info("Refresher stopped."))}restartRefresher(){this.stopRefresher(),this.startRefresher(),this._logger.info("Refresher restarted.")}destroy(){this.stopRefresher()}getValidPollingInterval=(e,t)=>{const{pollingInterval:n}=e;switch(this._connectedDeviceID){case Lr.NANO_S:{const i=FI*2;return n!==void 0&&n<i?(t.warn(`Polling interval of ${n} is too low, setting to minimum as ${i}`),i):n??i}default:return n!==void 0&&n<DE?(t.warn(`Polling interval of ${n} is too low, setting to minimum as ${DE}`),DE):n??FI}}},Gve=class{constructor(e,t,n,i,s){this._sessionEventDispatcher=t,this._connectedDevice=n,this._deviceState=i,this.setDeviceSessionState=s,this._subscription=this._sessionEventDispatcher.listen().subscribe(o=>this.mapEventAction(o)),this._logger=e("device-session-state-handler")}_subscription;_logger;_updateDeviceState(e){const t=this._parseDeviceStatus(e);if(t){const{sessionStateType:n,deviceStatus:i,currentApp:s}=t,o=this._deviceState.getValue();o.sessionStateType===xa.Connected?this.setDeviceSessionState({sessionStateType:n,deviceStatus:i,deviceModelId:this._connectedDevice.deviceModel.id,currentApp:s,installedApps:[],isSecureConnectionAllowed:!1}):this.setDeviceSessionState({...o,sessionStateType:n,deviceStatus:i,deviceModelId:this._connectedDevice.deviceModel.id,currentApp:s})}}mapEventAction=e=>{switch(e.eventName){case Ls.COMMAND_SUCCEEDED:return this._updateDeviceState(e.eventData);case Ls.DEVICE_STATE_UPDATE_BUSY:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:Xl.BUSY});case Ls.DEVICE_STATE_UPDATE_LOCKED:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:Xl.LOCKED});case Ls.DEVICE_STATE_UPDATE_CONNECTED:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:Xl.CONNECTED});default:return null}};_parseDeviceStatus(e){return js(e)?{sessionStateType:xa.ReadyWithoutSecureChannel,deviceStatus:Xl.CONNECTED,currentApp:{name:e.data.name,version:e.data.version}}:(this._logger.debug("Error while parsing APDU response",{data:{parsedResponse:e}}),null)}unsubscribe(){this._subscription.unsubscribe()}},Yve=class{_id;_connectedDevice;_deviceState;_managerApiService;_secureChannelService;_logger;_refresherOptions;_pinger;_deviceSessionRefresher;_refresherService;_commandMutex=new jve;_sessionEventDispatcher=new Kve;constructor({connectedDevice:e,id:t=rm()},n,i,s,o){this._id=t,this._connectedDevice=e,this._logger=n("device-session"),this._managerApiService=i,this._secureChannelService=s,this._refresherOptions={...qve,...o},this._deviceState=new oH({sessionStateType:xa.Connected,deviceStatus:Xl.CONNECTED,deviceModelId:this._connectedDevice.deviceModel.id}),this._pinger=new Hve(n,e,this._sessionEventDispatcher,(a,c)=>this.sendCommand(a,c)),this._deviceSessionRefresher=new Wve(n,this._refresherOptions,this._sessionEventDispatcher,this._connectedDevice),new Gve(n,this._sessionEventDispatcher,this._connectedDevice,this._deviceState,a=>this.setDeviceSessionState(a)),this._refresherService=new Vve(n,{start:()=>this._deviceSessionRefresher.restartRefresher(),stop:()=>this._deviceSessionRefresher.stopRefresher()})}async initialiseSession(){try{await this._pinger.ping()}catch(e){throw this._logger.error("Error while initialising session",{data:{error:e}}),e}finally{this._refresherOptions.isRefresherDisabled||this._deviceSessionRefresher.startRefresher()}}get id(){return this._id}get connectedDevice(){return this._connectedDevice}get state(){return this._deviceState.asObservable()}getDeviceSessionState(){return this._deviceState.getValue()}setDeviceSessionState(e){this._deviceState.next(e)}async sendApdu(e,t={isPolling:!1,triggersDisconnection:!1,abortTimeout:void 0}){const n=await this._commandMutex.lock();try{this._sessionEventDispatcher.dispatch({eventName:Ls.DEVICE_STATE_UPDATE_BUSY});const i=await this._connectedDevice.sendApdu(e,t.triggersDisconnection,t.abortTimeout);return i.ifRight(s=>{bu.isLockedDeviceResponse(s)?this._sessionEventDispatcher.dispatch({eventName:Ls.DEVICE_STATE_UPDATE_LOCKED}):this._sessionEventDispatcher.dispatch({eventName:Ls.DEVICE_STATE_UPDATE_CONNECTED})}).ifLeft(()=>{this._sessionEventDispatcher.dispatch({eventName:Ls.DEVICE_STATE_UPDATE_CONNECTED})}),i}finally{n()}}async sendCommand(e,t){const n=e.getApdu();return(await this.sendApdu(n.getRawApdu(),{isPolling:!1,triggersDisconnection:e.triggersDisconnection??!1,abortTimeout:t})).caseOf({Left:i=>{throw i},Right:i=>e.parseResponse(i,this._connectedDevice.deviceModel.id)})}executeDeviceAction(e){const{observable:t,cancel:n}=e._execute({sendApdu:async i=>this.sendApdu(i),sendCommand:async(i,s)=>this.sendCommand(i,s),getDeviceModel:()=>this._connectedDevice.deviceModel,getDeviceSessionState:()=>this._deviceState.getValue(),getDeviceSessionStateObservable:()=>this.state,setDeviceSessionState:i=>(this.setDeviceSessionState(i),this._deviceState.getValue()),disableRefresher:i=>this._refresherService.disableRefresher(i),getManagerApiService:()=>this._managerApiService,getSecureChannelService:()=>this._secureChannelService});return{observable:t,cancel:n}}close(){this._updateDeviceStatus(Xl.NOT_CONNECTED),this._deviceState.complete(),this._deviceSessionRefresher.stopRefresher()}disableRefresher(e){return this._refresherService.disableRefresher(e)}_updateDeviceStatus(e){const t=this._deviceState.getValue();this._deviceState.next({...t,deviceStatus:e})}};const sd={SecureChannelService:Symbol.for("SecureChannelService"),SecureChannelDataSource:Symbol.for("SecureChannelDataSource"),DmkConfig:Symbol.for("SecureChannelDmkConfig")};var Xve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},Yp=(r,e)=>(t,n)=>e(t,n,r);let UI=class{_transportService;_sessionService;_loggerFactory;_managerApi;_secureChannel;_logger;constructor(e,t,n,i,s){this._sessionService=t,this._transportService=e,this._loggerFactory=n,this._logger=n("ConnectUseCase"),this._managerApi=i,this._secureChannel=s}handleDeviceDisconnect(e){this._sessionService.getDeviceSessionByDeviceId(e).map(t=>{this._sessionService.removeDeviceSession(t.id)})}async execute({device:e,sessionRefresherOptions:t}){const n=this._transportService.getTransport(e.transport);return lr.liftEither(n.toEither(new K3(new Error("Unknown transport")))).chain(async i=>i.connect({deviceId:e.id,onDisconnect:s=>this.handleDeviceDisconnect(s)})).ifLeft(i=>{this._logger.error("Error connecting to device",{data:{deviceId:e.id,error:i}})}).map(async i=>{const s=new Yve({connectedDevice:i},this._loggerFactory,this._managerApi,this._secureChannel,t);return this._sessionService.addDeviceSession(s),await s.initialiseSession(),s.id}).caseOf({Left:i=>{throw i},Right:i=>i})}};UI=Xve([Ct(),Yp(0,Ze(Xo.TransportService)),Yp(1,Ze(yn.DeviceSessionService)),Yp(2,Ze(ri.LoggerPublisherServiceFactory)),Yp(3,Ze(uo.ManagerApiService)),Yp(4,Ze(sd.SecureChannelService))],UI);var Jve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},$E=(r,e)=>(t,n)=>e(t,n,r);let zI=class{_transportService;_sessionService;_logger;constructor(e,t,n){this._sessionService=t,this._transportService=e,this._logger=n("DisconnectUseCase")}async execute({sessionId:e}){return lr(async({liftEither:t})=>{const n=await t(this._sessionService.getDeviceSessionById(e).ifLeft(o=>{this._logger.error("Device session not found",{data:{sessionId:e,error:o}})})),i=n.connectedDevice.transport,s=await t(this._transportService.getTransport(i).toEither(new K3(new Error("Unknown transport"))));n.close(),this._sessionService.removeDeviceSession(e),await s.disconnect({connectedDevice:n.connectedDevice})}).caseOf({Left:t=>{throw this._logger.error("Error disconnecting from device",{data:{error:t}}),t},Right:()=>{}})}};zI=Jve([Ct(),$E(0,Ze(Xo.TransportService)),$E(1,Ze(yn.DeviceSessionService)),$E(2,Ze(ri.LoggerPublisherServiceFactory))],zI);let rk=class{id;sessionId;modelId;name;type;constructor({transportConnectedDevice:{id:e,deviceModel:{id:t,productName:n},type:i},sessionId:s}){this.id=e,this.sessionId=s,this.modelId=t,this.name=n,this.type=i}};var Qve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},NM=(r,e)=>(t,n)=>e(t,n,r);let qI=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("GetConnectedDeviceUseCase")}execute({sessionId:e}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:t=>new rk({sessionId:t.id,transportConnectedDevice:t.connectedDevice}),Left:t=>{throw this._logger.error("Error getting session",{data:{error:t}}),t}})}};qI=Qve([Ct(),NM(0,Ze(yn.DeviceSessionService)),NM(1,Ze(ri.LoggerPublisherServiceFactory))],qI);var Zve=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},LM=(r,e)=>(t,n)=>e(t,n,r);let jI=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("ListConnectedDeviceUseCase")}execute(){return this._logger.info("Listing connected devices"),this._sessionService.getDeviceSessions().map(e=>new rk({transportConnectedDevice:e.connectedDevice,sessionId:e.id}))}};jI=Zve([Ct(),LM(0,Ze(yn.DeviceSessionService)),LM(1,Ze(ri.LoggerPublisherServiceFactory))],jI);var ebe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},FM=(r,e)=>(t,n)=>e(t,n,r);let VI=class{_transports;_transportService;_logger;constructor(e,t){this._transports=e.getAllTransports(),this._transportService=e,this._logger=t("ListenToAvailableDevicesUseCase")}mapTransportDiscoveredDeviceToDiscoveredDevice(e){const t=new TK({id:e.id,model:e.deviceModel.id,name:e.deviceModel.productName});return{id:e.id,deviceModel:t,transport:e.transport,name:e.name||t.name,rssi:e.rssi}}execute({transport:e}={}){if(this._logger.info("Listening to available devices"),this._transports.length===0)return this._logger.warn("No transports available"),Rd([[]]);if(!e){this._logger.info("Discovering all available transports");const t=this._transports.map((n,i)=>n.listenToAvailableDevices().pipe(iu(s=>({index:i,arr:s}))));return Jme(...t).pipe(eye((n,{index:i,arr:s})=>(n[i]=s,n),{}),iu(n=>Object.values(n).flat().map(this.mapTransportDiscoveredDeviceToDiscoveredDevice)))}return this._logger.info(`Discovering devices on transport ${e}`),this._transportService.getTransport(e).caseOf({Nothing:()=>(this._logger.error(`Transport ${e} not found`),V3([])),Just:t=>t.listenToAvailableDevices().pipe(iu(n=>n.map(this.mapTransportDiscoveredDeviceToDiscoveredDevice)))})}};VI=ebe([Ct(),FM(0,Ze(Xo.TransportService)),FM(1,Ze(ri.LoggerPublisherServiceFactory))],VI);var tbe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},UM=(r,e)=>(t,n)=>e(t,n,r);let KI=class{constructor(e,t){this._sessionService=e,this._logger=t("ListenToConnectedDeviceUseCase")}_logger;execute(){return this._logger.info("Observe connected devices"),this._sessionService.sessionsObs.pipe(iu(e=>new rk({transportConnectedDevice:e.connectedDevice,sessionId:e.id})))}};KI=tbe([Ct(),UM(0,Ze(yn.DeviceSessionService)),UM(1,Ze(ri.LoggerPublisherServiceFactory))],KI);var rbe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},nbe=(r,e)=>(t,n)=>e(t,n,r);let HI=class{constructor(e){this._transportService=e}mapDiscoveredDevice(e){const t=new TK({id:e.id,model:e.deviceModel.id,name:e.deviceModel.productName});return{id:e.id,deviceModel:t,transport:e.transport,name:e.name||t.name,rssi:e.rssi}}execute({transport:e}={}){if(!e){const t=this._transportService.getAllTransports();return V3(...t).pipe(pw(n=>n.startDiscovering().pipe(iu(i=>this.mapDiscoveredDevice(i)))))}return this._transportService.getTransport(e).caseOf({Just:t=>t.startDiscovering().pipe(iu(n=>this.mapDiscoveredDevice(n))),Nothing:()=>{throw new K3(new Error("Unknown transport"))}})}};HI=rbe([Ct(),nbe(0,Ze(Xo.TransportService))],HI);var ibe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},zM=(r,e)=>(t,n)=>e(t,n,r);let WI=class{constructor(e,t){this.transportService=e,this._logger=t("StopDiscoveringUseCase")}_logger;async execute(){this._logger.debug("Stopping discovering devices");for(const e of this.transportService.getAllTransports())await e.stopDiscovering()}};WI=ibe([Ct(),zM(0,Ze(Xo.TransportService)),zM(1,Ze(ri.LoggerPublisherServiceFactory))],WI);const sbe=({stub:r=!1})=>new pn(({bind:e,rebindSync:t})=>{e(xn.ConnectUseCase).to(UI),e(xn.DisconnectUseCase).to(zI),e(xn.StartDiscoveringUseCase).to(HI),e(xn.StopDiscoveringUseCase).to(WI),e(xn.GetConnectedDeviceUseCase).to(qI),e(xn.ListenToAvailableDevicesUseCase).to(VI),e(xn.ListenToConnectedDeviceUseCase).to(KI),e(xn.ListConnectedDevicesUseCase).to(jI),r&&(t(xn.ConnectUseCase).to(di),t(xn.DisconnectUseCase).to(di),t(xn.StartDiscoveringUseCase).to(di),t(xn.StopDiscoveringUseCase).to(di),t(xn.GetConnectedDeviceUseCase).to(di),t(xn.ListenToAvailableDevicesUseCase).to(di),t(xn.ListenToConnectedDeviceUseCase).to(di),t(xn.ListConnectedDevicesUseCase).to(di))});var g0=(r=>(r[r.Fatal=0]="Fatal",r[r.Error=1]="Error",r[r.Warning=2]="Warning",r[r.Info=3]="Info",r[r.Debug=4]="Debug",r))(g0||{}),obe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let GI=class{subscribers;tag;constructor(e,t){this.subscribers=e,this.tag=t}_log(e,t,n){this.subscribers.forEach(i=>{const s={timestamp:Date.now(),tag:this.tag,...n};i.log(e,t,s)})}info(e,t){this._log(g0.Info,e,t)}warn(e,t){this._log(g0.Warning,e,t)}debug(e,t){this._log(g0.Debug,e,t)}error(e,t){this._log(g0.Error,e,t)}};GI=obe([Ct()],GI);const abe=({subscribers:r}={subscribers:[]})=>new pn(({bind:e})=>{e(ri.LoggerPublisherServiceFactory).toFactory(t=>n=>new GI(r,n))});function VH(r,e){return function(){return r.apply(e,arguments)}}const{toString:cbe}=Object.prototype,{getPrototypeOf:nk}=Object,bw=(r=>e=>{const t=cbe.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),La=r=>(r=r.toLowerCase(),e=>bw(e)===r),ww=r=>e=>typeof e===r,{isArray:ap}=Array,wg=ww("undefined");function lbe(r){return r!==null&&!wg(r)&&r.constructor!==null&&!wg(r.constructor)&&_o(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const KH=La("ArrayBuffer");function ube(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&KH(r.buffer),e}const fbe=ww("string"),_o=ww("function"),HH=ww("number"),xw=r=>r!==null&&typeof r=="object",hbe=r=>r===!0||r===!1,Ly=r=>{if(bw(r)!=="object")return!1;const e=nk(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},dbe=La("Date"),pbe=La("File"),gbe=La("Blob"),mbe=La("FileList"),ybe=r=>xw(r)&&_o(r.pipe),vbe=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||_o(r.append)&&((e=bw(r))==="formdata"||e==="object"&&_o(r.toString)&&r.toString()==="[object FormData]"))},bbe=La("URLSearchParams"),[wbe,xbe,_be,Sbe]=["ReadableStream","Request","Response","Headers"].map(La),Ebe=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nm(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),ap(r))for(n=0,i=r.length;n<i;n++)e.call(null,r[n],n,r);else{const s=t?Object.getOwnPropertyNames(r):Object.keys(r),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,r[a],a,r)}}function WH(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const of=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:pa,GH=r=>!wg(r)&&r!==of;function YI(){const{caseless:r}=GH(this)&&this||{},e={},t=(n,i)=>{const s=r&&WH(e,i)||i;Ly(e[s])&&Ly(n)?e[s]=YI(e[s],n):Ly(n)?e[s]=YI({},n):ap(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&nm(arguments[n],t);return e}const Abe=(r,e,t,{allOwnKeys:n}={})=>(nm(e,(i,s)=>{t&&_o(i)?r[s]=VH(i,t):r[s]=i},{allOwnKeys:n}),r),Ibe=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),Cbe=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},Tbe=(r,e,t,n)=>{let i,s,o;const a={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),s=i.length;s-- >0;)o=i[s],(!n||n(o,r,e))&&!a[o]&&(e[o]=r[o],a[o]=!0);r=t!==!1&&nk(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},Rbe=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},kbe=r=>{if(!r)return null;if(ap(r))return r;let e=r.length;if(!HH(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},Pbe=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&nk(Uint8Array)),Obe=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(r,s[0],s[1])}},Dbe=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},$be=La("HTMLFormElement"),Mbe=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),qM=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),Bbe=La("RegExp"),YH=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};nm(t,(i,s)=>{let o;(o=e(i,s,r))!==!1&&(n[s]=o||i)}),Object.defineProperties(r,n)},Nbe=r=>{YH(r,(e,t)=>{if(_o(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(_o(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Lbe=(r,e)=>{const t={},n=i=>{i.forEach(s=>{t[s]=!0})};return ap(r)?n(r):n(String(r).split(e)),t},Fbe=()=>{},Ube=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function zbe(r){return!!(r&&_o(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const qbe=r=>{const e=new Array(10),t=(n,i)=>{if(xw(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=ap(n)?[]:{};return nm(n,(o,a)=>{const c=t(o,i+1);!wg(c)&&(s[a]=c)}),e[i]=void 0,s}}return n};return t(r,0)},jbe=La("AsyncFunction"),Vbe=r=>r&&(xw(r)||_o(r))&&_o(r.then)&&_o(r.catch),XH=((r,e)=>r?setImmediate:e?((t,n)=>(of.addEventListener("message",({source:i,data:s})=>{i===of&&s===t&&n.length&&n.shift()()},!1),i=>{n.push(i),of.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",_o(of.postMessage)),Kbe=typeof queueMicrotask<"u"?queueMicrotask.bind(of):typeof Kt<"u"&&Kt.nextTick||XH,qe={isArray:ap,isArrayBuffer:KH,isBuffer:lbe,isFormData:vbe,isArrayBufferView:ube,isString:fbe,isNumber:HH,isBoolean:hbe,isObject:xw,isPlainObject:Ly,isReadableStream:wbe,isRequest:xbe,isResponse:_be,isHeaders:Sbe,isUndefined:wg,isDate:dbe,isFile:pbe,isBlob:gbe,isRegExp:Bbe,isFunction:_o,isStream:ybe,isURLSearchParams:bbe,isTypedArray:Pbe,isFileList:mbe,forEach:nm,merge:YI,extend:Abe,trim:Ebe,stripBOM:Ibe,inherits:Cbe,toFlatObject:Tbe,kindOf:bw,kindOfTest:La,endsWith:Rbe,toArray:kbe,forEachEntry:Obe,matchAll:Dbe,isHTMLForm:$be,hasOwnProperty:qM,hasOwnProp:qM,reduceDescriptors:YH,freezeMethods:Nbe,toObjectSet:Lbe,toCamelCase:Mbe,noop:Fbe,toFiniteNumber:Ube,findKey:WH,global:of,isContextDefined:GH,isSpecCompliantForm:zbe,toJSONObject:qbe,isAsyncFn:jbe,isThenable:Vbe,setImmediate:XH,asap:Kbe};function mr(r,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}qe.inherits(mr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:qe.toJSONObject(this.config),code:this.code,status:this.status}}});const JH=mr.prototype,QH={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{QH[r]={value:r}});Object.defineProperties(mr,QH);Object.defineProperty(JH,"isAxiosError",{value:!0});mr.from=(r,e,t,n,i,s)=>{const o=Object.create(JH);return qe.toFlatObject(r,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),mr.call(o,r.message,e,t,n,i),o.cause=r,o.name=r.name,s&&Object.assign(o,s),o};const Hbe=null;function XI(r){return qe.isPlainObject(r)||qe.isArray(r)}function ZH(r){return qe.endsWith(r,"[]")?r.slice(0,-2):r}function jM(r,e,t){return r?r.concat(e).map(function(i,s){return i=ZH(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function Wbe(r){return qe.isArray(r)&&!r.some(XI)}const Gbe=qe.toFlatObject(qe,{},null,function(e){return/^is[A-Z]/.test(e)});function _w(r,e,t){if(!qe.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=qe.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!qe.isUndefined(m[p])});const n=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&qe.isSpecCompliantForm(e);if(!qe.isFunction(i))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(qe.isDate(g))return g.toISOString();if(!c&&qe.isBlob(g))throw new mr("Blob is not supported. Use a Buffer instead.");return qe.isArrayBuffer(g)||qe.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Xe.from(g):g}function u(g,p,m){let y=g;if(g&&!m&&typeof g=="object"){if(qe.endsWith(p,"{}"))p=n?p:p.slice(0,-2),g=JSON.stringify(g);else if(qe.isArray(g)&&Wbe(g)||(qe.isFileList(g)||qe.endsWith(p,"[]"))&&(y=qe.toArray(g)))return p=ZH(p),y.forEach(function(b,_){!(qe.isUndefined(b)||b===null)&&e.append(o===!0?jM([p],_,s):o===null?p:p+"[]",l(b))}),!1}return XI(g)?!0:(e.append(jM(m,p,s),l(g)),!1)}const f=[],h=Object.assign(Gbe,{defaultVisitor:u,convertValue:l,isVisitable:XI});function d(g,p){if(!qe.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+p.join("."));f.push(g),qe.forEach(g,function(y,v){(!(qe.isUndefined(y)||y===null)&&i.call(e,y,qe.isString(v)?v.trim():v,p,h))===!0&&d(y,p?p.concat(v):[v])}),f.pop()}}if(!qe.isObject(r))throw new TypeError("data must be an object");return d(r),e}function VM(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function ik(r,e){this._pairs=[],r&&_w(r,this,e)}const eW=ik.prototype;eW.append=function(e,t){this._pairs.push([e,t])};eW.toString=function(e){const t=e?function(n){return e.call(this,n,VM)}:VM;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function Ybe(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tW(r,e,t){if(!e)return r;const n=t&&t.encode||Ybe;qe.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=qe.isURLSearchParams(e)?e.toString():new ik(e,t).toString(n),s){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}class KM{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){qe.forEach(this.handlers,function(n){n!==null&&e(n)})}}const rW={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xbe=typeof URLSearchParams<"u"?URLSearchParams:ik,Jbe=typeof FormData<"u"?FormData:null,Qbe=typeof Blob<"u"?Blob:null,Zbe={isBrowser:!0,classes:{URLSearchParams:Xbe,FormData:Jbe,Blob:Qbe},protocols:["http","https","file","blob","url","data"]},sk=typeof window<"u"&&typeof document<"u",JI=typeof navigator=="object"&&navigator||void 0,ewe=sk&&(!JI||["ReactNative","NativeScript","NS"].indexOf(JI.product)<0),twe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rwe=sk&&window.location.href||"http://localhost",nwe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sk,hasStandardBrowserEnv:ewe,hasStandardBrowserWebWorkerEnv:twe,navigator:JI,origin:rwe},Symbol.toStringTag,{value:"Module"})),rs={...nwe,...Zbe};function iwe(r,e){return _w(r,new rs.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,s){return rs.isNode&&qe.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function swe(r){return qe.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function owe(r){const e={},t=Object.keys(r);let n;const i=t.length;let s;for(n=0;n<i;n++)s=t[n],e[s]=r[s];return e}function nW(r){function e(t,n,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=t.length;return o=!o&&qe.isArray(i)?i.length:o,c?(qe.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!qe.isObject(i[o]))&&(i[o]=[]),e(t,n,i[o],s)&&qe.isArray(i[o])&&(i[o]=owe(i[o])),!a)}if(qe.isFormData(r)&&qe.isFunction(r.entries)){const t={};return qe.forEachEntry(r,(n,i)=>{e(swe(n),i,t,0)}),t}return null}function awe(r,e,t){if(qe.isString(r))try{return(e||JSON.parse)(r),qe.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const im={transitional:rW,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=qe.isObject(e);if(s&&qe.isHTMLForm(e)&&(e=new FormData(e)),qe.isFormData(e))return i?JSON.stringify(nW(e)):e;if(qe.isArrayBuffer(e)||qe.isBuffer(e)||qe.isStream(e)||qe.isFile(e)||qe.isBlob(e)||qe.isReadableStream(e))return e;if(qe.isArrayBufferView(e))return e.buffer;if(qe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return iwe(e,this.formSerializer).toString();if((a=qe.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return _w(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),awe(e)):e}],transformResponse:[function(e){const t=this.transitional||im.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(qe.isResponse(e)||qe.isReadableStream(e))return e;if(e&&qe.isString(e)&&(n&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?mr.from(a,mr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rs.classes.FormData,Blob:rs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};qe.forEach(["delete","get","head","post","put","patch"],r=>{im.headers[r]={}});const cwe=qe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lwe=r=>{const e={};let t,n,i;return r&&r.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!t||e[t]&&cwe[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},HM=Symbol("internals");function Xp(r){return r&&String(r).trim().toLowerCase()}function Fy(r){return r===!1||r==null?r:qe.isArray(r)?r.map(Fy):String(r)}function uwe(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const fwe=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function ME(r,e,t,n,i){if(qe.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!qe.isString(e)){if(qe.isString(n))return e.indexOf(n)!==-1;if(qe.isRegExp(n))return n.test(e)}}function hwe(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function dwe(r,e){const t=qe.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let Us=class{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function s(a,c,l){const u=Xp(c);if(!u)throw new Error("header name must be a non-empty string");const f=qe.findKey(i,u);(!f||i[f]===void 0||l===!0||l===void 0&&i[f]!==!1)&&(i[f||c]=Fy(a))}const o=(a,c)=>qe.forEach(a,(l,u)=>s(l,u,c));if(qe.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(qe.isString(e)&&(e=e.trim())&&!fwe(e))o(lwe(e),t);else if(qe.isHeaders(e))for(const[a,c]of e.entries())s(c,a,n);else e!=null&&s(t,e,n);return this}get(e,t){if(e=Xp(e),e){const n=qe.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return uwe(i);if(qe.isFunction(t))return t.call(this,i,n);if(qe.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Xp(e),e){const n=qe.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||ME(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function s(o){if(o=Xp(o),o){const a=qe.findKey(n,o);a&&(!t||ME(n,n[a],a,t))&&(delete n[a],i=!0)}}return qe.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const s=t[n];(!e||ME(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,n={};return qe.forEach(this,(i,s)=>{const o=qe.findKey(n,s);if(o){t[o]=Fy(i),delete t[s];return}const a=e?hwe(s):String(s).trim();a!==s&&delete t[s],t[a]=Fy(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return qe.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&qe.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[HM]=this[HM]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Xp(o);n[a]||(dwe(i,o),n[a]=!0)}return qe.isArray(e)?e.forEach(s):s(e),this}};Us.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);qe.reduceDescriptors(Us.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});qe.freezeMethods(Us);function BE(r,e){const t=this||im,n=e||t,i=Us.from(n.headers);let s=n.data;return qe.forEach(r,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function iW(r){return!!(r&&r.__CANCEL__)}function cp(r,e,t){mr.call(this,r??"canceled",mr.ERR_CANCELED,e,t),this.name="CanceledError"}qe.inherits(cp,mr,{__CANCEL__:!0});function sW(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new mr("Request failed with status code "+t.status,[mr.ERR_BAD_REQUEST,mr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function pwe(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function gwe(r,e){r=r||10;const t=new Array(r),n=new Array(r);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=n[s];o||(o=l),t[i]=c,n[i]=l;let f=s,h=0;for(;f!==i;)h+=t[f++],f=f%r;if(i=(i+1)%r,i===s&&(s=(s+1)%r),l-o<e)return;const d=u&&l-u;return d?Math.round(h*1e3/d):void 0}}function mwe(r,e){let t=0,n=1e3/e,i,s;const o=(l,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),r.apply(null,l)};return[(...l)=>{const u=Date.now(),f=u-t;f>=n?o(l,u):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},n-f)))},()=>i&&o(i)]}const $v=(r,e,t=3)=>{let n=0;const i=gwe(50,250);return mwe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-n,l=i(c),u=o<=a;n=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};r(f)},t)},WM=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},GM=r=>(...e)=>qe.asap(()=>r(...e)),ywe=rs.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,rs.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(rs.origin),rs.navigator&&/(msie|trident)/i.test(rs.navigator.userAgent)):()=>!0,vwe=rs.hasStandardBrowserEnv?{write(r,e,t,n,i,s){const o=[r+"="+encodeURIComponent(e)];qe.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),qe.isString(n)&&o.push("path="+n),qe.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bwe(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function wwe(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function oW(r,e,t){let n=!bwe(e);return r&&n||t==!1?wwe(r,e):e}const YM=r=>r instanceof Us?{...r}:r;function Rf(r,e){e=e||{};const t={};function n(l,u,f,h){return qe.isPlainObject(l)&&qe.isPlainObject(u)?qe.merge.call({caseless:h},l,u):qe.isPlainObject(u)?qe.merge({},u):qe.isArray(u)?u.slice():u}function i(l,u,f,h){if(qe.isUndefined(u)){if(!qe.isUndefined(l))return n(void 0,l,f,h)}else return n(l,u,f,h)}function s(l,u){if(!qe.isUndefined(u))return n(void 0,u)}function o(l,u){if(qe.isUndefined(u)){if(!qe.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function a(l,u,f){if(f in e)return n(l,u);if(f in r)return n(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u,f)=>i(YM(l),YM(u),f,!0)};return qe.forEach(Object.keys(Object.assign({},r,e)),function(u){const f=c[u]||i,h=f(r[u],e[u],u);qe.isUndefined(h)&&f!==a||(t[u]=h)}),t}const aW=r=>{const e=Rf({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Us.from(o),e.url=tW(oW(e.baseURL,e.url),r.params,r.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(qe.isFormData(t)){if(rs.hasStandardBrowserEnv||rs.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[l,...u]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(rs.hasStandardBrowserEnv&&(n&&qe.isFunction(n)&&(n=n(e)),n||n!==!1&&ywe(e.url))){const l=i&&s&&vwe.read(s);l&&o.set(i,l)}return e},xwe=typeof XMLHttpRequest<"u",_we=xwe&&function(r){return new Promise(function(t,n){const i=aW(r);let s=i.data;const o=Us.from(i.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:l}=i,u,f,h,d,g;function p(){d&&d(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let m=new XMLHttpRequest;m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout;function y(){if(!m)return;const b=Us.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),x={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:b,config:r,request:m};sW(function(S){t(S),p()},function(S){n(S),p()},x),m=null}"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(y)},m.onabort=function(){m&&(n(new mr("Request aborted",mr.ECONNABORTED,r,m)),m=null)},m.onerror=function(){n(new mr("Network Error",mr.ERR_NETWORK,r,m)),m=null},m.ontimeout=function(){let _=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const x=i.transitional||rW;i.timeoutErrorMessage&&(_=i.timeoutErrorMessage),n(new mr(_,x.clarifyTimeoutError?mr.ETIMEDOUT:mr.ECONNABORTED,r,m)),m=null},s===void 0&&o.setContentType(null),"setRequestHeader"in m&&qe.forEach(o.toJSON(),function(_,x){m.setRequestHeader(x,_)}),qe.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),a&&a!=="json"&&(m.responseType=i.responseType),l&&([h,g]=$v(l,!0),m.addEventListener("progress",h)),c&&m.upload&&([f,d]=$v(c),m.upload.addEventListener("progress",f),m.upload.addEventListener("loadend",d)),(i.cancelToken||i.signal)&&(u=b=>{m&&(n(!b||b.type?new cp(null,r,m):b),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const v=pwe(i.url);if(v&&rs.protocols.indexOf(v)===-1){n(new mr("Unsupported protocol "+v+":",mr.ERR_BAD_REQUEST,r));return}m.send(s||null)})},Swe=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,i;const s=function(l){if(!i){i=!0,a();const u=l instanceof Error?l:this.reason;n.abort(u instanceof mr?u:new cp(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new mr(`timeout ${e} of ms exceeded`,mr.ETIMEDOUT))},e);const a=()=>{r&&(o&&clearTimeout(o),o=null,r.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),r=null)};r.forEach(l=>l.addEventListener("abort",s));const{signal:c}=n;return c.unsubscribe=()=>qe.asap(a),c}},Ewe=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,i;for(;n<t;)i=n+e,yield r.slice(n,i),n=i},Awe=async function*(r,e){for await(const t of Iwe(r))yield*Ewe(t,e)},Iwe=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},XM=(r,e,t,n)=>{const i=Awe(r,e);let s=0,o,a=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){a(),c.close();return}let f=u.byteLength;if(t){let h=s+=f;t(h)}c.enqueue(new Uint8Array(u))}catch(l){throw a(l),l}},cancel(c){return a(c),i.return()}},{highWaterMark:2})},Sw=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",cW=Sw&&typeof ReadableStream=="function",Cwe=Sw&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),lW=(r,...e)=>{try{return!!r(...e)}catch{return!1}},Twe=cW&&lW(()=>{let r=!1;const e=new Request(rs.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),JM=64*1024,QI=cW&&lW(()=>qe.isReadableStream(new Response("").body)),Mv={stream:QI&&(r=>r.body)};Sw&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Mv[e]&&(Mv[e]=qe.isFunction(r[e])?t=>t[e]():(t,n)=>{throw new mr(`Response type '${e}' is not supported`,mr.ERR_NOT_SUPPORT,n)})})})(new Response);const Rwe=async r=>{if(r==null)return 0;if(qe.isBlob(r))return r.size;if(qe.isSpecCompliantForm(r))return(await new Request(rs.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(qe.isArrayBufferView(r)||qe.isArrayBuffer(r))return r.byteLength;if(qe.isURLSearchParams(r)&&(r=r+""),qe.isString(r))return(await Cwe(r)).byteLength},kwe=async(r,e)=>{const t=qe.toFiniteNumber(r.getContentLength());return t??Rwe(e)},Pwe=Sw&&(async r=>{let{url:e,method:t,data:n,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:f="same-origin",fetchOptions:h}=aW(r);l=l?(l+"").toLowerCase():"text";let d=Swe([i,s&&s.toAbortSignal()],o),g;const p=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let m;try{if(c&&Twe&&t!=="get"&&t!=="head"&&(m=await kwe(u,n))!==0){let x=new Request(e,{method:"POST",body:n,duplex:"half"}),E;if(qe.isFormData(n)&&(E=x.headers.get("content-type"))&&u.setContentType(E),x.body){const[S,C]=WM(m,$v(GM(c)));n=XM(x.body,JM,S,C)}}qe.isString(f)||(f=f?"include":"omit");const y="credentials"in Request.prototype;g=new Request(e,{...h,signal:d,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:y?f:void 0});let v=await fetch(g);const b=QI&&(l==="stream"||l==="response");if(QI&&(a||b&&p)){const x={};["status","statusText","headers"].forEach(k=>{x[k]=v[k]});const E=qe.toFiniteNumber(v.headers.get("content-length")),[S,C]=a&&WM(E,$v(GM(a),!0))||[];v=new Response(XM(v.body,JM,S,()=>{C&&C(),p&&p()}),x)}l=l||"text";let _=await Mv[qe.findKey(Mv,l)||"text"](v,r);return!b&&p&&p(),await new Promise((x,E)=>{sW(x,E,{data:_,headers:Us.from(v.headers),status:v.status,statusText:v.statusText,config:r,request:g})})}catch(y){throw p&&p(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new mr("Network Error",mr.ERR_NETWORK,r,g),{cause:y.cause||y}):mr.from(y,y&&y.code,r,g)}}),ZI={http:Hbe,xhr:_we,fetch:Pwe};qe.forEach(ZI,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const QM=r=>`- ${r}`,Owe=r=>qe.isFunction(r)||r===null||r===!1,uW={getAdapter:r=>{r=qe.isArray(r)?r:[r];const{length:e}=r;let t,n;const i={};for(let s=0;s<e;s++){t=r[s];let o;if(n=t,!Owe(t)&&(n=ZI[(o=String(t)).toLowerCase()],n===void 0))throw new mr(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+s]=n}if(!n){const s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(QM).join(`
`):" "+QM(s[0]):"as no adapter specified";throw new mr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:ZI};function NE(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new cp(null,r)}function ZM(r){return NE(r),r.headers=Us.from(r.headers),r.data=BE.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),uW.getAdapter(r.adapter||im.adapter)(r).then(function(n){return NE(r),n.data=BE.call(r,r.transformResponse,n),n.headers=Us.from(n.headers),n},function(n){return iW(n)||(NE(r),n&&n.response&&(n.response.data=BE.call(r,r.transformResponse,n.response),n.response.headers=Us.from(n.response.headers))),Promise.reject(n)})}const fW="1.8.2",Ew={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Ew[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const eB={};Ew.transitional=function(e,t,n){function i(s,o){return"[Axios v"+fW+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new mr(i(o," has been removed"+(t?" in "+t:"")),mr.ERR_DEPRECATED);return t&&!eB[o]&&(eB[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};Ew.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Dwe(r,e,t){if(typeof r!="object")throw new mr("options must be an object",mr.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=r[s],c=a===void 0||o(a,s,r);if(c!==!0)throw new mr("option "+s+" must be "+c,mr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new mr("Unknown option "+s,mr.ERR_BAD_OPTION)}}const Uy={assertOptions:Dwe,validators:Ew},ja=Uy.validators;let df=class{constructor(e){this.defaults=e,this.interceptors={request:new KM,response:new KM}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Rf(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:s}=t;n!==void 0&&Uy.assertOptions(n,{silentJSONParsing:ja.transitional(ja.boolean),forcedJSONParsing:ja.transitional(ja.boolean),clarifyTimeoutError:ja.transitional(ja.boolean)},!1),i!=null&&(qe.isFunction(i)?t.paramsSerializer={serialize:i}:Uy.assertOptions(i,{encode:ja.function,serialize:ja.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Uy.assertOptions(t,{baseUrl:ja.spelling("baseURL"),withXsrfToken:ja.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&qe.merge(s.common,s[t.method]);s&&qe.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=Us.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(c=c&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const l=[];this.interceptors.response.forEach(function(p){l.push(p.fulfilled,p.rejected)});let u,f=0,h;if(!c){const g=[ZM.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,l),h=g.length,u=Promise.resolve(t);f<h;)u=u.then(g[f++],g[f++]);return u}h=a.length;let d=t;for(f=0;f<h;){const g=a[f++],p=a[f++];try{d=g(d)}catch(m){p.call(this,m);break}}try{u=ZM.call(this,d)}catch(g){return Promise.reject(g)}for(f=0,h=l.length;f<h;)u=u.then(l[f++],l[f++]);return u}getUri(e){e=Rf(this.defaults,e);const t=oW(e.baseURL,e.url,e.allowAbsoluteUrls);return tW(t,e.params,e.paramsSerializer)}};qe.forEach(["delete","get","head","options"],function(e){df.prototype[e]=function(t,n){return this.request(Rf(n||{},{method:e,url:t,data:(n||{}).data}))}});qe.forEach(["post","put","patch"],function(e){function t(n){return function(s,o,a){return this.request(Rf(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}df.prototype[e]=t(),df.prototype[e+"Form"]=t(!0)});let $we=class hW{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new cp(s,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new hW(function(i){e=i}),cancel:e}}};function Mwe(r){return function(t){return r.apply(null,t)}}function Bwe(r){return qe.isObject(r)&&r.isAxiosError===!0}const eC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(eC).forEach(([r,e])=>{eC[e]=r});function dW(r){const e=new df(r),t=VH(df.prototype.request,e);return qe.extend(t,df.prototype,e,{allOwnKeys:!0}),qe.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return dW(Rf(r,i))},t}const ur=dW(im);ur.Axios=df;ur.CanceledError=cp;ur.CancelToken=$we;ur.isCancel=iW;ur.VERSION=fW;ur.toFormData=_w;ur.AxiosError=mr;ur.Cancel=ur.CanceledError;ur.all=function(e){return Promise.all(e)};ur.spread=Mwe;ur.isAxiosError=Bwe;ur.mergeConfig=Rf;ur.AxiosHeaders=Us;ur.formToJSON=r=>nW(qe.isHTMLForm(r)?new FormData(r):r);ur.getAdapter=uW.getAdapter;ur.HttpStatusCode=eC;ur.default=ur;const{Axios:GUe,AxiosError:YUe,CanceledError:XUe,isCancel:JUe,CancelToken:QUe,VERSION:ZUe,all:e7e,Cancel:t7e,isAxiosError:r7e,spread:n7e,toFormData:i7e,AxiosHeaders:s7e,HttpStatusCode:o7e,formToJSON:a7e,getAdapter:c7e,mergeConfig:l7e}=ur;var m0=(r=>(r.currency="currency",r.plugin="plugin",r.tool="tool",r.swap="swap",r))(m0||{});const pW="https://manager.api.live.ledger.com/api",gW="http://localhost:8080",ok=1,ak="0";let aa=class{constructor(e){this.error=e,this.originalError=e}_tag="FetchError";originalError};var y0=(r=>(r.currency="currency",r.plugin="plugin",r.tool="tool",r.swap="swap",r))(y0||{}),Nwe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},Lwe=(r,e)=>(t,n)=>e(t,n,r);let tC=class{_managerApiBaseUrl;_provider=ok;_firmwareDistributionSalt=ak;constructor({managerApiUrl:e,provider:t,firmwareDistributionSalt:n}){this._managerApiBaseUrl=e,this._provider=t,this._firmwareDistributionSalt=n}setProvider(e){this._provider===e||e<1||(this._provider=e)}getProvider(){return this._provider}getAppList(e){const{targetId:t,firmwareVersionName:n}=e;return lr(()=>ur.get(`${this._managerApiBaseUrl}/v2/apps/by-target`,{params:{target_id:t,provider:this._provider,firmware_version_name:n}})).map(i=>i.data).chain(i=>this.mapApplicationDtoToApplication(i)).mapLeft(i=>new aa(i))}getMcuList(){return lr(()=>ur.get(`${this._managerApiBaseUrl}/mcu_versions`,{})).map(e=>e.data).chain(e=>this.mapMcuDtoToMcu(e)).mapLeft(e=>new aa(e))}getDeviceVersion(e){const{targetId:t}=e;return lr(()=>ur.get(`${this._managerApiBaseUrl}/get_device_version`,{params:{target_id:t,provider:this._provider}})).map(n=>n.data).chain(n=>this.mapDeviceVersionDto(n)).mapLeft(n=>new aa(n))}getFirmwareVersion(e){const{deviceId:t,version:n}=e;return lr(()=>ur.get(`${this._managerApiBaseUrl}/get_firmware_version`,{params:{device_version:t,version_name:n,provider:this._provider}})).map(i=>i.data).chain(i=>this.mapFinalFirmwareDto(i)).mapLeft(i=>new aa(i))}getFirmwareVersionById(e){return lr(()=>ur.get(`${this._managerApiBaseUrl}/firmware_final_versions/${e}`,{})).map(t=>t.data).chain(t=>this.mapFinalFirmwareDto(t)).mapLeft(t=>new aa(t))}getOsuFirmwareVersion(e){const{deviceId:t,version:n}=e;return lr(()=>ur.get(`${this._managerApiBaseUrl}/get_osu_version`,{params:{device_version:t,version_name:n,provider:this._provider}})).map(i=>i.data).chain(i=>this.mapOsuFirmwareDto(i)).mapLeft(i=>new aa(i))}getLatestFirmwareVersion(e){const t="34.27.0",{currentFinalFirmwareId:n,deviceId:i}=e;return lr(()=>ur.get(`${this._managerApiBaseUrl}/get_latest_firmware`,{params:{current_se_firmware_final_version:n,device_version:i,provider:this._provider,salt:this._firmwareDistributionSalt,livecommonversion:t}})).map(s=>s.data).chain(s=>this.mapLatestFirmwareDto(s)).mapLeft(s=>new aa(s))}getAppsByHash(e){const{hashes:t}=e;return lr(()=>ur.post(`${this._managerApiBaseUrl}/v2/apps/hash`,t)).map(n=>n.data).chain(n=>this.mapNullableApplicationDtoToApplication(n)).mapLeft(n=>new aa(n))}getLanguagePackages(e){const{deviceId:t,currentFinalFirmwareId:n}=e;return lr(()=>ur.get(`${this._managerApiBaseUrl}/language-packages`,{params:{device_version:t,current_se_firmware_final_version:n}})).map(i=>i.data).chain(i=>this.mapLanguagesDtoToLanguages(i)).mapLeft(i=>new aa(i))}mapAppTypeDtoToAppType(e){if(e===null)return null;switch(e){case y0.currency:return m0.currency;case y0.plugin:return m0.plugin;case y0.tool:return m0.tool;case y0.swap:return m0.swap}}mapApplicationDtoToApplication(e){return lr(()=>Promise.resolve(e.map(t=>this.mapApplicationDto(t))))}mapNullableApplicationDtoToApplication(e){return lr(()=>Promise.resolve(e.map(t=>t===null?null:this.mapApplicationDto(t))))}mapApplicationDto(e){if(typeof e!="object"||typeof e.versionId!="number"||typeof e.versionName!="string"||e.versionDisplayName!==null&&typeof e.versionDisplayName!="string"||typeof e.version!="string"||e.currencyId!==null&&typeof e.currencyId!="string"||e.description!==null&&typeof e.description!="string"||e.applicationType!==null&&typeof e.applicationType!="string"||typeof e.dateModified!="string"||e.icon!==null&&typeof e.icon!="string"||e.authorName!==null&&typeof e.authorName!="string"||e.supportURL!==null&&typeof e.supportURL!="string"||e.contactURL!==null&&typeof e.contactURL!="string"||e.sourceURL!==null&&typeof e.sourceURL!="string"||e.compatibleWallets!==null&&typeof e.compatibleWallets!="string"||typeof e.hash!="string"||typeof e.perso!="string"||typeof e.firmware!="string"||typeof e.firmwareKey!="string"||typeof e.delete!="string"||typeof e.deleteKey!="string"||e.bytes!==null&&typeof e.bytes!="number"||e.warning!==null&&typeof e.warning!="string"||typeof e.isDevTools!="boolean"||e.category!==null&&typeof e.category!="number"||e.parent!==null&&typeof e.parent!="number"||e.parentName!==null&&typeof e.parentName!="string")throw new Error(`Incomplete application: ${JSON.stringify(e)}`);const{applicationType:t,hash:n,perso:i,firmware:s,firmwareKey:o,delete:a,deleteKey:c,...l}=e;return{...l,hash:n,perso:i,firmware:s,firmwareKey:o,delete:a,deleteKey:c,applicationType:this.mapAppTypeDtoToAppType(t)}}mapMcuDtoToMcu(e){return lr(()=>Promise.resolve(e.map(t=>{if(typeof t!="object"||typeof t.id!="number"||typeof t.name!="string")throw new Error(`Incomplete MCU version: ${JSON.stringify(t)}`);return{id:t.id,name:t.name}})))}mapDeviceVersionDto(e){return lr(()=>{if(typeof e!="object"||typeof e.id!="number")throw new Error(`Incomplete device version: ${JSON.stringify(e)}`);const t={id:e.id};return Promise.resolve(t)})}mapFinalFirmwareDto(e){return lr(()=>{if(typeof e!="object"||typeof e.id!="number"||typeof e.version!="string"||typeof e.perso!="string"||e.firmware!==null&&typeof e.firmware!="string"||e.firmware_key!==null&&typeof e.firmware_key!="string"||e.hash!==null&&typeof e.hash!="string"||e.bytes!==null&&typeof e.bytes!="number"||!Array.isArray(e.mcu_versions))throw new Error(`Incomplete final firmware: ${JSON.stringify(e)}`);const t={id:e.id,version:e.version,perso:e.perso,firmware:e.firmware,firmwareKey:e.firmware_key,hash:e.hash,bytes:e.bytes,mcuVersions:e.mcu_versions};return Promise.resolve(t)})}mapLatestFirmwareDto(e){return lr(()=>{if(e.result!=="success"||!e.se_firmware_osu_version)throw new Error(`Latest firmware could not be retrieved: ${e.result}`);const t=e.se_firmware_osu_version;return Promise.resolve(t)}).chain(t=>this.mapOsuFirmwareDto(t))}mapOsuFirmwareDto(e){return lr(()=>{if(typeof e!="object"||typeof e.id!="number"||typeof e.perso!="string"||typeof e.firmware!="string"||typeof e.firmware_key!="string"||e.hash!==null&&typeof e.hash!="string"||typeof e.next_se_firmware_final_version!="number")throw new Error(`Incomplete latest firmware: ${JSON.stringify(e)}`);const t={id:e.id,perso:e.perso,firmware:e.firmware,firmwareKey:e.firmware_key,hash:e.hash,nextFinalFirmware:e.next_se_firmware_final_version};return Promise.resolve(t)})}mapLanguagesDtoToLanguages(e){return lr(()=>Promise.resolve(e.map(t=>this.mapLanguageDto(t))))}mapLanguageDto(e){if(typeof e!="object"||typeof e.language!="string"||typeof e.languagePackageVersionId!="number"||typeof e.version!="string"||typeof e.language_package_id!="number"||typeof e.apdu_install_url!="string"||typeof e.apdu_uninstall_url!="string"||typeof e.bytes!="number"||typeof e.date_creation!="string"||typeof e.date_last_modified!="string")throw new Error(`Incomplete language version: ${JSON.stringify(e)}`);return{language:e.language,languagePackageVersionId:e.languagePackageVersionId,version:e.version,languagePackageId:e.language_package_id,apduInstallUrl:e.apdu_install_url,apduUninstallUrl:e.apdu_uninstall_url,bytes:e.bytes,dateCreation:e.date_creation,dateLastModified:e.date_last_modified}}};tC=Nwe([Ct(),Lwe(0,Ze(uo.DmkConfig))],tC);var Fwe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},Uwe=(r,e)=>(t,n)=>e(t,n,r);let rC=class{constructor(e){this.dataSource=e}getAppList(e){const t={targetId:e.targetId.toString(),firmwareVersionName:e.seVersion};return this.dataSource.getAppList(t)}getDeviceVersion(e){const t={targetId:e.targetId.toString()};return this.dataSource.getDeviceVersion(t)}getFirmwareVersion(e,t){const n={version:e.seVersion,deviceId:t.id};return this.dataSource.getFirmwareVersion(n)}getOsuFirmwareVersion(e,t){const n={version:e.seVersion,deviceId:t.id};return this.dataSource.getOsuFirmwareVersion(n)}getLatestFirmwareVersion(e,t){const n={currentFinalFirmwareId:e.id,deviceId:t.id};return this.dataSource.getLatestFirmwareVersion(n)}getNextFirmwareVersion(e){return this.dataSource.getFirmwareVersionById(e.nextFinalFirmware)}getLanguagePackages(e,t){const n={deviceId:e.id,currentFinalFirmwareId:t.id};return this.dataSource.getLanguagePackages(n)}getMcuList(){return this.dataSource.getMcuList()}getAppsByHash(e){const t={hashes:e};return lr(async({fromPromise:n,throwE:i})=>{if(t.hashes.length===0)return[];try{return await n(this.dataSource.getAppsByHash(t))}catch(s){return s instanceof aa?i(s):i(new aa(s))}})}};rC=Fwe([Ct(),Uwe(0,Ze(uo.ManagerApiDataSource))],rC);var zwe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},tB=(r,e)=>(t,n)=>e(t,n,r);let nC=class{constructor(e,t){this.sessionService=e,this.managerApiDataSource=t}execute(e){for(const t of this.sessionService.getDeviceSessions()){const n=t.getDeviceSessionState();n.sessionStateType!==xa.Connected&&t.setDeviceSessionState({...n,firmwareUpdateContext:void 0,installedApps:[],appsUpdates:void 0,catalog:void 0})}this.managerApiDataSource.setProvider(e)}};nC=zwe([Ct(),tB(0,Ze(yn.DeviceSessionService)),tB(1,Ze(uo.ManagerApiDataSource))],nC);const qwe=({stub:r,config:e})=>new pn(({bind:t,rebindSync:n})=>{t(uo.DmkConfig).toConstantValue(e),t(uo.ManagerApiDataSource).to(tC).inSingletonScope(),t(uo.ManagerApiService).to(rC).inSingletonScope(),t(uo.SetProviderUseCase).to(nC),r&&(n(uo.ManagerApiDataSource).to(di),n(uo.ManagerApiService).to(di),n(uo.SetProviderUseCase).to(di))});var qu={},v0={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var jwe=v0.exports,rB;function Vwe(){return rB||(rB=1,function(r,e){(function(t){var n=e&&!e.nodeType&&e,i=r&&!r.nodeType&&r,s=typeof gi=="object"&&gi;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,c=36,l=1,u=26,f=38,h=700,d=72,g=128,p="-",m=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=c-l,x=Math.floor,E=String.fromCharCode,S;function C(te){throw new RangeError(b[te])}function k(te,X){for(var T=te.length,A=[];T--;)A[T]=X(te[T]);return A}function $(te,X){var T=te.split("@"),A="";T.length>1&&(A=T[0]+"@",te=T[1]),te=te.replace(v,".");var O=te.split("."),I=k(O,X).join(".");return A+I}function J(te){for(var X=[],T=0,A=te.length,O,I;T<A;)O=te.charCodeAt(T++),O>=55296&&O<=56319&&T<A?(I=te.charCodeAt(T++),(I&64512)==56320?X.push(((O&1023)<<10)+(I&1023)+65536):(X.push(O),T--)):X.push(O);return X}function j(te){return k(te,function(X){var T="";return X>65535&&(X-=65536,T+=E(X>>>10&1023|55296),X=56320|X&1023),T+=E(X),T}).join("")}function L(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:c}function w(te,X){return te+22+75*(te<26)-((X!=0)<<5)}function R(te,X,T){var A=0;for(te=T?x(te/h):te>>1,te+=x(te/X);te>_*u>>1;A+=c)te=x(te/_);return x(A+(_+1)*te/(te+f))}function N(te){var X=[],T=te.length,A,O=0,I=g,U=d,Z,oe,he,re,F,H,ue,le,we;for(Z=te.lastIndexOf(p),Z<0&&(Z=0),oe=0;oe<Z;++oe)te.charCodeAt(oe)>=128&&C("not-basic"),X.push(te.charCodeAt(oe));for(he=Z>0?Z+1:0;he<T;){for(re=O,F=1,H=c;he>=T&&C("invalid-input"),ue=L(te.charCodeAt(he++)),(ue>=c||ue>x((a-O)/F))&&C("overflow"),O+=ue*F,le=H<=U?l:H>=U+u?u:H-U,!(ue<le);H+=c)we=c-le,F>x(a/we)&&C("overflow"),F*=we;A=X.length+1,U=R(O-re,A,re==0),x(O/A)>a-I&&C("overflow"),I+=x(O/A),O%=A,X.splice(O++,0,I)}return j(X)}function Y(te){var X,T,A,O,I,U,Z,oe,he,re,F,H=[],ue,le,we,ie;for(te=J(te),ue=te.length,X=g,T=0,I=d,U=0;U<ue;++U)F=te[U],F<128&&H.push(E(F));for(A=O=H.length,O&&H.push(p);A<ue;){for(Z=a,U=0;U<ue;++U)F=te[U],F>=X&&F<Z&&(Z=F);for(le=A+1,Z-X>x((a-T)/le)&&C("overflow"),T+=(Z-X)*le,X=Z,U=0;U<ue;++U)if(F=te[U],F<X&&++T>a&&C("overflow"),F==X){for(oe=T,he=c;re=he<=I?l:he>=I+u?u:he-I,!(oe<re);he+=c)ie=oe-re,we=c-re,H.push(E(w(re+ie%we,0))),oe=x(ie/we);H.push(E(w(oe,0))),I=R(T,le,A==O),T=0,++A}++T,++X}return H.join("")}function z(te){return $(te,function(X){return m.test(X)?N(X.slice(4).toLowerCase()):X})}function G(te){return $(te,function(X){return y.test(X)?"xn--"+Y(X):X})}if(o={version:"1.4.1",ucs2:{decode:J,encode:j},decode:N,encode:Y,toASCII:G,toUnicode:z},n&&i)if(r.exports==n)i.exports=o;else for(S in o)o.hasOwnProperty(S)&&(n[S]=o[S]);else t.punycode=o})(jwe)}(v0,v0.exports)),v0.exports}var LE,nB;function Aw(){if(nB)return LE;nB=1;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o=i&&s&&typeof s.get=="function"?s.get:null,a=i&&Set.prototype.forEach,c=typeof WeakMap=="function"&&WeakMap.prototype,l=c?WeakMap.prototype.has:null,u=typeof WeakSet=="function"&&WeakSet.prototype,f=u?WeakSet.prototype.has:null,h=typeof WeakRef=="function"&&WeakRef.prototype,d=h?WeakRef.prototype.deref:null,g=Boolean.prototype.valueOf,p=Object.prototype.toString,m=Function.prototype.toString,y=String.prototype.match,v=String.prototype.slice,b=String.prototype.replace,_=String.prototype.toUpperCase,x=String.prototype.toLowerCase,E=RegExp.prototype.test,S=Array.prototype.concat,C=Array.prototype.join,k=Array.prototype.slice,$=Math.floor,J=typeof BigInt=="function"?BigInt.prototype.valueOf:null,j=Object.getOwnPropertySymbols,L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,w=typeof Symbol=="function"&&typeof Symbol.iterator=="object",R=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===w||!0)?Symbol.toStringTag:null,N=Object.prototype.propertyIsEnumerable,Y=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(fe){return fe.__proto__}:null);function z(fe,Ee){if(fe===1/0||fe===-1/0||fe!==fe||fe&&fe>-1e3&&fe<1e3||E.call(/e/,Ee))return Ee;var Le=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof fe=="number"){var Ke=fe<0?-$(-fe):$(fe);if(Ke!==fe){var je=String(Ke),Pe=v.call(Ee,je.length+1);return b.call(je,Le,"$&_")+"."+b.call(b.call(Pe,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(Ee,Le,"$&_")}var G=Hf,te=G.custom,X=le(te)?te:null,T={__proto__:null,double:'"',single:"'"},A={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};LE=function fe(Ee,Le,Ke,je){var Pe=Le||{};if(B(Pe,"quoteStyle")&&!B(T,Pe.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(B(Pe,"maxStringLength")&&(typeof Pe.maxStringLength=="number"?Pe.maxStringLength<0&&Pe.maxStringLength!==1/0:Pe.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var tt=B(Pe,"customInspect")?Pe.customInspect:!0;if(typeof tt!="boolean"&&tt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(B(Pe,"indent")&&Pe.indent!==null&&Pe.indent!=="	"&&!(parseInt(Pe.indent,10)===Pe.indent&&Pe.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(B(Pe,"numericSeparator")&&typeof Pe.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var gt=Pe.numericSeparator;if(typeof Ee>"u")return"undefined";if(Ee===null)return"null";if(typeof Ee=="boolean")return Ee?"true":"false";if(typeof Ee=="string")return se(Ee,Pe);if(typeof Ee=="number"){if(Ee===0)return 1/0/Ee>0?"0":"-0";var lt=String(Ee);return gt?z(Ee,lt):lt}if(typeof Ee=="bigint"){var Et=String(Ee)+"n";return gt?z(Ee,Et):Et}var Er=typeof Pe.depth>"u"?5:Pe.depth;if(typeof Ke>"u"&&(Ke=0),Ke>=Er&&Er>0&&typeof Ee=="object")return Z(Ee)?"[Array]":"[Object]";var nr=ee(Pe,Ke);if(typeof je>"u")je=[];else if(de(je,Ee)>=0)return"[Circular]";function ar(dt,Bt,zt){if(Bt&&(je=k.call(je),je.push(Bt)),zt){var jt={depth:Pe.depth};return B(Pe,"quoteStyle")&&(jt.quoteStyle=Pe.quoteStyle),fe(dt,jt,Ke+1,je)}return fe(dt,Pe,Ke+1,je)}if(typeof Ee=="function"&&!he(Ee)){var hs=ne(Ee),Kr=be(Ee,ar);return"[Function"+(hs?": "+hs:" (anonymous)")+"]"+(Kr.length>0?" { "+C.call(Kr,", ")+" }":"")}if(le(Ee)){var hr=w?b.call(String(Ee),/^(Symbol\(.*\))_[^)]*$/,"$1"):L.call(Ee);return typeof Ee=="object"&&!w?Q(hr):hr}if(Oe(Ee)){for(var zi="<"+x.call(String(Ee.nodeName)),ae=Ee.attributes||[],ge=0;ge<ae.length;ge++)zi+=" "+ae[ge].name+"="+O(I(ae[ge].value),"double",Pe);return zi+=">",Ee.childNodes&&Ee.childNodes.length&&(zi+="..."),zi+="</"+x.call(String(Ee.nodeName))+">",zi}if(Z(Ee)){if(Ee.length===0)return"[]";var me=be(Ee,ar);return nr&&!P(me)?"["+pe(me,nr)+"]":"[ "+C.call(me,", ")+" ]"}if(re(Ee)){var W=be(Ee,ar);return!("cause"in Error.prototype)&&"cause"in Ee&&!N.call(Ee,"cause")?"{ ["+String(Ee)+"] "+C.call(S.call("[cause]: "+ar(Ee.cause),W),", ")+" }":W.length===0?"["+String(Ee)+"]":"{ ["+String(Ee)+"] "+C.call(W,", ")+" }"}if(typeof Ee=="object"&&tt){if(X&&typeof Ee[X]=="function"&&G)return G(Ee,{depth:Er-Ke});if(tt!=="symbol"&&typeof Ee.inspect=="function")return Ee.inspect()}if(_e(Ee)){var ve=[];return n&&n.call(Ee,function(dt,Bt){ve.push(ar(Bt,Ee,!0)+" => "+ar(dt,Ee))}),M("Map",t.call(Ee),ve,nr)}if(xe(Ee)){var Re=[];return a&&a.call(Ee,function(dt){Re.push(ar(dt,Ee))}),M("Set",o.call(Ee),Re,nr)}if(Ce(Ee))return K("WeakMap");if(Ae(Ee))return K("WeakSet");if(Me(Ee))return K("WeakRef");if(H(Ee))return Q(ar(Number(Ee)));if(we(Ee))return Q(ar(J.call(Ee)));if(ue(Ee))return Q(g.call(Ee));if(F(Ee))return Q(ar(String(Ee)));if(typeof window<"u"&&Ee===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Ee===globalThis||typeof gi<"u"&&Ee===gi)return"{ [object globalThis] }";if(!oe(Ee)&&!he(Ee)){var Te=be(Ee,ar),ze=Y?Y(Ee)===Object.prototype:Ee instanceof Object||Ee.constructor===Object,Qe=Ee instanceof Object?"":"null prototype",at=!ze&&R&&Object(Ee)===Ee&&R in Ee?v.call(q(Ee),8,-1):Qe?"Object":"",rt=ze||typeof Ee.constructor!="function"?"":Ee.constructor.name?Ee.constructor.name+" ":"",sr=rt+(at||Qe?"["+C.call(S.call([],at||[],Qe||[]),": ")+"] ":"");return Te.length===0?sr+"{}":nr?sr+"{"+pe(Te,nr)+"}":sr+"{ "+C.call(Te,", ")+" }"}return String(Ee)};function O(fe,Ee,Le){var Ke=Le.quoteStyle||Ee,je=T[Ke];return je+fe+je}function I(fe){return b.call(String(fe),/"/g,"&quot;")}function U(fe){return!R||!(typeof fe=="object"&&(R in fe||typeof fe[R]<"u"))}function Z(fe){return q(fe)==="[object Array]"&&U(fe)}function oe(fe){return q(fe)==="[object Date]"&&U(fe)}function he(fe){return q(fe)==="[object RegExp]"&&U(fe)}function re(fe){return q(fe)==="[object Error]"&&U(fe)}function F(fe){return q(fe)==="[object String]"&&U(fe)}function H(fe){return q(fe)==="[object Number]"&&U(fe)}function ue(fe){return q(fe)==="[object Boolean]"&&U(fe)}function le(fe){if(w)return fe&&typeof fe=="object"&&fe instanceof Symbol;if(typeof fe=="symbol")return!0;if(!fe||typeof fe!="object"||!L)return!1;try{return L.call(fe),!0}catch{}return!1}function we(fe){if(!fe||typeof fe!="object"||!J)return!1;try{return J.call(fe),!0}catch{}return!1}var ie=Object.prototype.hasOwnProperty||function(fe){return fe in this};function B(fe,Ee){return ie.call(fe,Ee)}function q(fe){return p.call(fe)}function ne(fe){if(fe.name)return fe.name;var Ee=y.call(m.call(fe),/^function\s*([\w$]+)/);return Ee?Ee[1]:null}function de(fe,Ee){if(fe.indexOf)return fe.indexOf(Ee);for(var Le=0,Ke=fe.length;Le<Ke;Le++)if(fe[Le]===Ee)return Le;return-1}function _e(fe){if(!t||!fe||typeof fe!="object")return!1;try{t.call(fe);try{o.call(fe)}catch{return!0}return fe instanceof Map}catch{}return!1}function Ce(fe){if(!l||!fe||typeof fe!="object")return!1;try{l.call(fe,l);try{f.call(fe,f)}catch{return!0}return fe instanceof WeakMap}catch{}return!1}function Me(fe){if(!d||!fe||typeof fe!="object")return!1;try{return d.call(fe),!0}catch{}return!1}function xe(fe){if(!o||!fe||typeof fe!="object")return!1;try{o.call(fe);try{t.call(fe)}catch{return!0}return fe instanceof Set}catch{}return!1}function Ae(fe){if(!f||!fe||typeof fe!="object")return!1;try{f.call(fe,f);try{l.call(fe,l)}catch{return!0}return fe instanceof WeakSet}catch{}return!1}function Oe(fe){return!fe||typeof fe!="object"?!1:typeof HTMLElement<"u"&&fe instanceof HTMLElement?!0:typeof fe.nodeName=="string"&&typeof fe.getAttribute=="function"}function se(fe,Ee){if(fe.length>Ee.maxStringLength){var Le=fe.length-Ee.maxStringLength,Ke="... "+Le+" more character"+(Le>1?"s":"");return se(v.call(fe,0,Ee.maxStringLength),Ee)+Ke}var je=A[Ee.quoteStyle||"single"];je.lastIndex=0;var Pe=b.call(b.call(fe,je,"\\$1"),/[\x00-\x1f]/g,V);return O(Pe,"single",Ee)}function V(fe){var Ee=fe.charCodeAt(0),Le={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ee];return Le?"\\"+Le:"\\x"+(Ee<16?"0":"")+_.call(Ee.toString(16))}function Q(fe){return"Object("+fe+")"}function K(fe){return fe+" { ? }"}function M(fe,Ee,Le,Ke){var je=Ke?pe(Le,Ke):C.call(Le,", ");return fe+" ("+Ee+") {"+je+"}"}function P(fe){for(var Ee=0;Ee<fe.length;Ee++)if(de(fe[Ee],`
`)>=0)return!1;return!0}function ee(fe,Ee){var Le;if(fe.indent==="	")Le="	";else if(typeof fe.indent=="number"&&fe.indent>0)Le=C.call(Array(fe.indent+1)," ");else return null;return{base:Le,prev:C.call(Array(Ee+1),Le)}}function pe(fe,Ee){if(fe.length===0)return"";var Le=`
`+Ee.prev+Ee.base;return Le+C.call(fe,","+Le)+`
`+Ee.prev}function be(fe,Ee){var Le=Z(fe),Ke=[];if(Le){Ke.length=fe.length;for(var je=0;je<fe.length;je++)Ke[je]=B(fe,je)?Ee(fe[je],fe):""}var Pe=typeof j=="function"?j(fe):[],tt;if(w){tt={};for(var gt=0;gt<Pe.length;gt++)tt["$"+Pe[gt]]=Pe[gt]}for(var lt in fe)B(fe,lt)&&(Le&&String(Number(lt))===lt&&lt<fe.length||w&&tt["$"+lt]instanceof Symbol||(E.call(/[^\w$]/,lt)?Ke.push(Ee(lt,fe)+": "+Ee(fe[lt],fe)):Ke.push(lt+": "+Ee(fe[lt],fe))));if(typeof j=="function")for(var Et=0;Et<Pe.length;Et++)N.call(fe,Pe[Et])&&Ke.push("["+Ee(Pe[Et])+"]: "+Ee(fe[Pe[Et]],fe));return Ke}return LE}var FE,iB;function Kwe(){if(iB)return FE;iB=1;var r=Aw(),e=_c(),t=function(a,c,l){for(var u=a,f;(f=u.next)!=null;u=f)if(f.key===c)return u.next=f.next,l||(f.next=a.next,a.next=f),f},n=function(a,c){if(a){var l=t(a,c);return l&&l.value}},i=function(a,c,l){var u=t(a,c);u?u.value=l:a.next={key:c,next:a.next,value:l}},s=function(a,c){return a?!!t(a,c):!1},o=function(a,c){if(a)return t(a,c,!0)};return FE=function(){var c,l={assert:function(u){if(!l.has(u))throw new e("Side channel does not contain "+r(u))},delete:function(u){var f=c&&c.next,h=o(c,u);return h&&f&&f===h&&(c=void 0),!!h},get:function(u){return n(c,u)},has:function(u){return s(c,u)},set:function(u,f){c||(c={next:void 0}),i(c,u,f)}};return l},FE}var UE,sB;function mW(){if(sB)return UE;sB=1;var r=Xg(),e=wl(),t=Aw(),n=_c(),i=r("%Map%",!0),s=e("Map.prototype.get",!0),o=e("Map.prototype.set",!0),a=e("Map.prototype.has",!0),c=e("Map.prototype.delete",!0),l=e("Map.prototype.size",!0);return UE=!!i&&function(){var f,h={assert:function(d){if(!h.has(d))throw new n("Side channel does not contain "+t(d))},delete:function(d){if(f){var g=c(f,d);return l(f)===0&&(f=void 0),g}return!1},get:function(d){if(f)return s(f,d)},has:function(d){return f?a(f,d):!1},set:function(d,g){f||(f=new i),o(f,d,g)}};return h},UE}var zE,oB;function Hwe(){if(oB)return zE;oB=1;var r=Xg(),e=wl(),t=Aw(),n=mW(),i=_c(),s=r("%WeakMap%",!0),o=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),c=e("WeakMap.prototype.has",!0),l=e("WeakMap.prototype.delete",!0);return zE=s?function(){var f,h,d={assert:function(g){if(!d.has(g))throw new i("Side channel does not contain "+t(g))},delete:function(g){if(s&&g&&(typeof g=="object"||typeof g=="function")){if(f)return l(f,g)}else if(n&&h)return h.delete(g);return!1},get:function(g){return s&&g&&(typeof g=="object"||typeof g=="function")&&f?o(f,g):h&&h.get(g)},has:function(g){return s&&g&&(typeof g=="object"||typeof g=="function")&&f?c(f,g):!!h&&h.has(g)},set:function(g,p){s&&g&&(typeof g=="object"||typeof g=="function")?(f||(f=new s),a(f,g,p)):n&&(h||(h=n()),h.set(g,p))}};return d}:n,zE}var qE,aB;function Wwe(){if(aB)return qE;aB=1;var r=_c(),e=Aw(),t=Kwe(),n=mW(),i=Hwe(),s=i||n||t;return qE=function(){var a,c={assert:function(l){if(!c.has(l))throw new r("Side channel does not contain "+e(l))},delete:function(l){return!!a&&a.delete(l)},get:function(l){return a&&a.get(l)},has:function(l){return!!a&&a.has(l)},set:function(l,u){a||(a=s()),a.set(l,u)}};return c},qE}var jE,cB;function ck(){if(cB)return jE;cB=1;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return jE={default:t.RFC3986,formatters:{RFC1738:function(n){return r.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},jE}var VE,lB;function yW(){if(lB)return VE;lB=1;var r=ck(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n=function(){for(var m=[],y=0;y<256;++y)m.push("%"+((y<16?"0":"")+y.toString(16)).toUpperCase());return m}(),i=function(y){for(;y.length>1;){var v=y.pop(),b=v.obj[v.prop];if(t(b)){for(var _=[],x=0;x<b.length;++x)typeof b[x]<"u"&&_.push(b[x]);v.obj[v.prop]=_}}},s=function(y,v){for(var b=v&&v.plainObjects?{__proto__:null}:{},_=0;_<y.length;++_)typeof y[_]<"u"&&(b[_]=y[_]);return b},o=function m(y,v,b){if(!v)return y;if(typeof v!="object"&&typeof v!="function"){if(t(y))y.push(v);else if(y&&typeof y=="object")(b&&(b.plainObjects||b.allowPrototypes)||!e.call(Object.prototype,v))&&(y[v]=!0);else return[y,v];return y}if(!y||typeof y!="object")return[y].concat(v);var _=y;return t(y)&&!t(v)&&(_=s(y,b)),t(y)&&t(v)?(v.forEach(function(x,E){if(e.call(y,E)){var S=y[E];S&&typeof S=="object"&&x&&typeof x=="object"?y[E]=m(S,x,b):y.push(x)}else y[E]=x}),y):Object.keys(v).reduce(function(x,E){var S=v[E];return e.call(x,E)?x[E]=m(x[E],S,b):x[E]=S,x},_)},a=function(y,v){return Object.keys(v).reduce(function(b,_){return b[_]=v[_],b},y)},c=function(m,y,v){var b=m.replace(/\+/g," ");if(v==="iso-8859-1")return b.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(b)}catch{return b}},l=1024,u=function(y,v,b,_,x){if(y.length===0)return y;var E=y;if(typeof y=="symbol"?E=Symbol.prototype.toString.call(y):typeof y!="string"&&(E=String(y)),b==="iso-8859-1")return escape(E).replace(/%u[0-9a-f]{4}/gi,function(L){return"%26%23"+parseInt(L.slice(2),16)+"%3B"});for(var S="",C=0;C<E.length;C+=l){for(var k=E.length>=l?E.slice(C,C+l):E,$=[],J=0;J<k.length;++J){var j=k.charCodeAt(J);if(j===45||j===46||j===95||j===126||j>=48&&j<=57||j>=65&&j<=90||j>=97&&j<=122||x===r.RFC1738&&(j===40||j===41)){$[$.length]=k.charAt(J);continue}if(j<128){$[$.length]=n[j];continue}if(j<2048){$[$.length]=n[192|j>>6]+n[128|j&63];continue}if(j<55296||j>=57344){$[$.length]=n[224|j>>12]+n[128|j>>6&63]+n[128|j&63];continue}J+=1,j=65536+((j&1023)<<10|k.charCodeAt(J)&1023),$[$.length]=n[240|j>>18]+n[128|j>>12&63]+n[128|j>>6&63]+n[128|j&63]}S+=$.join("")}return S},f=function(y){for(var v=[{obj:{o:y},prop:"o"}],b=[],_=0;_<v.length;++_)for(var x=v[_],E=x.obj[x.prop],S=Object.keys(E),C=0;C<S.length;++C){var k=S[C],$=E[k];typeof $=="object"&&$!==null&&b.indexOf($)===-1&&(v.push({obj:E,prop:k}),b.push($))}return i(v),y},h=function(y){return Object.prototype.toString.call(y)==="[object RegExp]"},d=function(y){return!y||typeof y!="object"?!1:!!(y.constructor&&y.constructor.isBuffer&&y.constructor.isBuffer(y))},g=function(y,v){return[].concat(y,v)},p=function(y,v){if(t(y)){for(var b=[],_=0;_<y.length;_+=1)b.push(v(y[_]));return b}return v(y)};return VE={arrayToObject:s,assign:a,combine:g,compact:f,decode:c,encode:u,isBuffer:d,isRegExp:h,maybeMap:p,merge:o},VE}var KE,uB;function Gwe(){if(uB)return KE;uB=1;var r=Wwe(),e=yW(),t=ck(),n=Object.prototype.hasOwnProperty,i={brackets:function(m){return m+"[]"},comma:"comma",indices:function(m,y){return m+"["+y+"]"},repeat:function(m){return m}},s=Array.isArray,o=Array.prototype.push,a=function(p,m){o.apply(p,s(m)?m:[m])},c=Date.prototype.toISOString,l=t.default,u={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:l,formatter:t.formatters[l],indices:!1,serializeDate:function(m){return c.call(m)},skipNulls:!1,strictNullHandling:!1},f=function(m){return typeof m=="string"||typeof m=="number"||typeof m=="boolean"||typeof m=="symbol"||typeof m=="bigint"},h={},d=function p(m,y,v,b,_,x,E,S,C,k,$,J,j,L,w,R,N,Y){for(var z=m,G=Y,te=0,X=!1;(G=G.get(h))!==void 0&&!X;){var T=G.get(m);if(te+=1,typeof T<"u"){if(T===te)throw new RangeError("Cyclic object value");X=!0}typeof G.get(h)>"u"&&(te=0)}if(typeof k=="function"?z=k(y,z):z instanceof Date?z=j(z):v==="comma"&&s(z)&&(z=e.maybeMap(z,function(we){return we instanceof Date?j(we):we})),z===null){if(x)return C&&!R?C(y,u.encoder,N,"key",L):y;z=""}if(f(z)||e.isBuffer(z)){if(C){var A=R?y:C(y,u.encoder,N,"key",L);return[w(A)+"="+w(C(z,u.encoder,N,"value",L))]}return[w(y)+"="+w(String(z))]}var O=[];if(typeof z>"u")return O;var I;if(v==="comma"&&s(z))R&&C&&(z=e.maybeMap(z,C)),I=[{value:z.length>0?z.join(",")||null:void 0}];else if(s(k))I=k;else{var U=Object.keys(z);I=$?U.sort($):U}var Z=S?String(y).replace(/\./g,"%2E"):String(y),oe=b&&s(z)&&z.length===1?Z+"[]":Z;if(_&&s(z)&&z.length===0)return oe+"[]";for(var he=0;he<I.length;++he){var re=I[he],F=typeof re=="object"&&re&&typeof re.value<"u"?re.value:z[re];if(!(E&&F===null)){var H=J&&S?String(re).replace(/\./g,"%2E"):String(re),ue=s(z)?typeof v=="function"?v(oe,H):oe:oe+(J?"."+H:"["+H+"]");Y.set(m,te);var le=r();le.set(h,Y),a(O,p(F,ue,v,b,_,x,E,S,v==="comma"&&R&&s(z)?null:C,k,$,J,j,L,w,R,N,le))}}return O},g=function(m){if(!m)return u;if(typeof m.allowEmptyArrays<"u"&&typeof m.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof m.encodeDotInKeys<"u"&&typeof m.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(m.encoder!==null&&typeof m.encoder<"u"&&typeof m.encoder!="function")throw new TypeError("Encoder has to be a function.");var y=m.charset||u.charset;if(typeof m.charset<"u"&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var v=t.default;if(typeof m.format<"u"){if(!n.call(t.formatters,m.format))throw new TypeError("Unknown format option provided.");v=m.format}var b=t.formatters[v],_=u.filter;(typeof m.filter=="function"||s(m.filter))&&(_=m.filter);var x;if(m.arrayFormat in i?x=m.arrayFormat:"indices"in m?x=m.indices?"indices":"repeat":x=u.arrayFormat,"commaRoundTrip"in m&&typeof m.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var E=typeof m.allowDots>"u"?m.encodeDotInKeys===!0?!0:u.allowDots:!!m.allowDots;return{addQueryPrefix:typeof m.addQueryPrefix=="boolean"?m.addQueryPrefix:u.addQueryPrefix,allowDots:E,allowEmptyArrays:typeof m.allowEmptyArrays=="boolean"?!!m.allowEmptyArrays:u.allowEmptyArrays,arrayFormat:x,charset:y,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:u.charsetSentinel,commaRoundTrip:!!m.commaRoundTrip,delimiter:typeof m.delimiter>"u"?u.delimiter:m.delimiter,encode:typeof m.encode=="boolean"?m.encode:u.encode,encodeDotInKeys:typeof m.encodeDotInKeys=="boolean"?m.encodeDotInKeys:u.encodeDotInKeys,encoder:typeof m.encoder=="function"?m.encoder:u.encoder,encodeValuesOnly:typeof m.encodeValuesOnly=="boolean"?m.encodeValuesOnly:u.encodeValuesOnly,filter:_,format:v,formatter:b,serializeDate:typeof m.serializeDate=="function"?m.serializeDate:u.serializeDate,skipNulls:typeof m.skipNulls=="boolean"?m.skipNulls:u.skipNulls,sort:typeof m.sort=="function"?m.sort:null,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:u.strictNullHandling}};return KE=function(p,m){var y=p,v=g(m),b,_;typeof v.filter=="function"?(_=v.filter,y=_("",y)):s(v.filter)&&(_=v.filter,b=_);var x=[];if(typeof y!="object"||y===null)return"";var E=i[v.arrayFormat],S=E==="comma"&&v.commaRoundTrip;b||(b=Object.keys(y)),v.sort&&b.sort(v.sort);for(var C=r(),k=0;k<b.length;++k){var $=b[k],J=y[$];v.skipNulls&&J===null||a(x,d(J,$,E,S,v.allowEmptyArrays,v.strictNullHandling,v.skipNulls,v.encodeDotInKeys,v.encode?v.encoder:null,v.filter,v.sort,v.allowDots,v.serializeDate,v.format,v.formatter,v.encodeValuesOnly,v.charset,C))}var j=x.join(v.delimiter),L=v.addQueryPrefix===!0?"?":"";return v.charsetSentinel&&(v.charset==="iso-8859-1"?L+="utf8=%26%2310003%3B&":L+="utf8=%E2%9C%93&"),j.length>0?L+j:""},KE}var HE,fB;function Ywe(){if(fB)return HE;fB=1;var r=yW(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},i=function(h){return h.replace(/&#(\d+);/g,function(d,g){return String.fromCharCode(parseInt(g,10))})},s=function(h,d,g){if(h&&typeof h=="string"&&d.comma&&h.indexOf(",")>-1)return h.split(",");if(d.throwOnLimitExceeded&&g>=d.arrayLimit)throw new RangeError("Array limit exceeded. Only "+d.arrayLimit+" element"+(d.arrayLimit===1?"":"s")+" allowed in an array.");return h},o="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",c=function(d,g){var p={__proto__:null},m=g.ignoreQueryPrefix?d.replace(/^\?/,""):d;m=m.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var y=g.parameterLimit===1/0?void 0:g.parameterLimit,v=m.split(g.delimiter,g.throwOnLimitExceeded?y+1:y);if(g.throwOnLimitExceeded&&v.length>y)throw new RangeError("Parameter limit exceeded. Only "+y+" parameter"+(y===1?"":"s")+" allowed.");var b=-1,_,x=g.charset;if(g.charsetSentinel)for(_=0;_<v.length;++_)v[_].indexOf("utf8=")===0&&(v[_]===a?x="utf-8":v[_]===o&&(x="iso-8859-1"),b=_,_=v.length);for(_=0;_<v.length;++_)if(_!==b){var E=v[_],S=E.indexOf("]="),C=S===-1?E.indexOf("="):S+1,k,$;C===-1?(k=g.decoder(E,n.decoder,x,"key"),$=g.strictNullHandling?null:""):(k=g.decoder(E.slice(0,C),n.decoder,x,"key"),$=r.maybeMap(s(E.slice(C+1),g,t(p[k])?p[k].length:0),function(j){return g.decoder(j,n.decoder,x,"value")})),$&&g.interpretNumericEntities&&x==="iso-8859-1"&&($=i(String($))),E.indexOf("[]=")>-1&&($=t($)?[$]:$);var J=e.call(p,k);J&&g.duplicates==="combine"?p[k]=r.combine(p[k],$):(!J||g.duplicates==="last")&&(p[k]=$)}return p},l=function(h,d,g,p){var m=0;if(h.length>0&&h[h.length-1]==="[]"){var y=h.slice(0,-1).join("");m=Array.isArray(d)&&d[y]?d[y].length:0}for(var v=p?d:s(d,g,m),b=h.length-1;b>=0;--b){var _,x=h[b];if(x==="[]"&&g.parseArrays)_=g.allowEmptyArrays&&(v===""||g.strictNullHandling&&v===null)?[]:r.combine([],v);else{_=g.plainObjects?{__proto__:null}:{};var E=x.charAt(0)==="["&&x.charAt(x.length-1)==="]"?x.slice(1,-1):x,S=g.decodeDotInKeys?E.replace(/%2E/g,"."):E,C=parseInt(S,10);!g.parseArrays&&S===""?_={0:v}:!isNaN(C)&&x!==S&&String(C)===S&&C>=0&&g.parseArrays&&C<=g.arrayLimit?(_=[],_[C]=v):S!=="__proto__"&&(_[S]=v)}v=_}return v},u=function(d,g,p,m){if(d){var y=p.allowDots?d.replace(/\.([^.[]+)/g,"[$1]"):d,v=/(\[[^[\]]*])/,b=/(\[[^[\]]*])/g,_=p.depth>0&&v.exec(y),x=_?y.slice(0,_.index):y,E=[];if(x){if(!p.plainObjects&&e.call(Object.prototype,x)&&!p.allowPrototypes)return;E.push(x)}for(var S=0;p.depth>0&&(_=b.exec(y))!==null&&S<p.depth;){if(S+=1,!p.plainObjects&&e.call(Object.prototype,_[1].slice(1,-1))&&!p.allowPrototypes)return;E.push(_[1])}if(_){if(p.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+p.depth+" and strictDepth is true");E.push("["+y.slice(_.index)+"]")}return l(E,g,p,m)}},f=function(d){if(!d)return n;if(typeof d.allowEmptyArrays<"u"&&typeof d.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof d.decodeDotInKeys<"u"&&typeof d.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(d.decoder!==null&&typeof d.decoder<"u"&&typeof d.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof d.charset<"u"&&d.charset!=="utf-8"&&d.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof d.throwOnLimitExceeded<"u"&&typeof d.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var g=typeof d.charset>"u"?n.charset:d.charset,p=typeof d.duplicates>"u"?n.duplicates:d.duplicates;if(p!=="combine"&&p!=="first"&&p!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var m=typeof d.allowDots>"u"?d.decodeDotInKeys===!0?!0:n.allowDots:!!d.allowDots;return{allowDots:m,allowEmptyArrays:typeof d.allowEmptyArrays=="boolean"?!!d.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof d.allowPrototypes=="boolean"?d.allowPrototypes:n.allowPrototypes,allowSparse:typeof d.allowSparse=="boolean"?d.allowSparse:n.allowSparse,arrayLimit:typeof d.arrayLimit=="number"?d.arrayLimit:n.arrayLimit,charset:g,charsetSentinel:typeof d.charsetSentinel=="boolean"?d.charsetSentinel:n.charsetSentinel,comma:typeof d.comma=="boolean"?d.comma:n.comma,decodeDotInKeys:typeof d.decodeDotInKeys=="boolean"?d.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof d.decoder=="function"?d.decoder:n.decoder,delimiter:typeof d.delimiter=="string"||r.isRegExp(d.delimiter)?d.delimiter:n.delimiter,depth:typeof d.depth=="number"||d.depth===!1?+d.depth:n.depth,duplicates:p,ignoreQueryPrefix:d.ignoreQueryPrefix===!0,interpretNumericEntities:typeof d.interpretNumericEntities=="boolean"?d.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof d.parameterLimit=="number"?d.parameterLimit:n.parameterLimit,parseArrays:d.parseArrays!==!1,plainObjects:typeof d.plainObjects=="boolean"?d.plainObjects:n.plainObjects,strictDepth:typeof d.strictDepth=="boolean"?!!d.strictDepth:n.strictDepth,strictNullHandling:typeof d.strictNullHandling=="boolean"?d.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:typeof d.throwOnLimitExceeded=="boolean"?d.throwOnLimitExceeded:!1}};return HE=function(h,d){var g=f(d);if(h===""||h===null||typeof h>"u")return g.plainObjects?{__proto__:null}:{};for(var p=typeof h=="string"?c(h,g):h,m=g.plainObjects?{__proto__:null}:{},y=Object.keys(p),v=0;v<y.length;++v){var b=y[v],_=u(b,p[b],g,typeof h=="string");m=r.merge(m,_,g)}return g.allowSparse===!0?m:r.compact(m)},HE}var WE,hB;function Xwe(){if(hB)return WE;hB=1;var r=Gwe(),e=Ywe(),t=ck();return WE={formats:t,parse:e,stringify:r},WE}var dB;function Jwe(){if(dB)return qu;dB=1;var r=Vwe();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],o=["{","}","|","\\","^","`"].concat(s),a=["'"].concat(o),c=["%","/","?",";","#"].concat(a),l=["/","?","#"],u=255,f=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},p={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=Xwe();function y(x,E,S){if(x&&typeof x=="object"&&x instanceof e)return x;var C=new e;return C.parse(x,E,S),C}e.prototype.parse=function(x,E,S){if(typeof x!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof x);var C=x.indexOf("?"),k=C!==-1&&C<x.indexOf("#")?"?":"#",$=x.split(k),J=/\\/g;$[0]=$[0].replace(J,"/"),x=$.join(k);var j=x;if(j=j.trim(),!S&&x.split("#").length===1){var L=i.exec(j);if(L)return this.path=j,this.href=j,this.pathname=L[1],L[2]?(this.search=L[2],E?this.query=m.parse(this.search.substr(1)):this.query=this.search.substr(1)):E&&(this.search="",this.query={}),this}var w=t.exec(j);if(w){w=w[0];var R=w.toLowerCase();this.protocol=R,j=j.substr(w.length)}if(S||w||j.match(/^\/\/[^@/]+@[^@/]+/)){var N=j.substr(0,2)==="//";N&&!(w&&g[w])&&(j=j.substr(2),this.slashes=!0)}if(!g[w]&&(N||w&&!p[w])){for(var Y=-1,z=0;z<l.length;z++){var G=j.indexOf(l[z]);G!==-1&&(Y===-1||G<Y)&&(Y=G)}var te,X;Y===-1?X=j.lastIndexOf("@"):X=j.lastIndexOf("@",Y),X!==-1&&(te=j.slice(0,X),j=j.slice(X+1),this.auth=decodeURIComponent(te)),Y=-1;for(var z=0;z<c.length;z++){var G=j.indexOf(c[z]);G!==-1&&(Y===-1||G<Y)&&(Y=G)}Y===-1&&(Y=j.length),this.host=j.slice(0,Y),j=j.slice(Y),this.parseHost(),this.hostname=this.hostname||"";var T=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!T)for(var A=this.hostname.split(/\./),z=0,O=A.length;z<O;z++){var I=A[z];if(I&&!I.match(f)){for(var U="",Z=0,oe=I.length;Z<oe;Z++)I.charCodeAt(Z)>127?U+="x":U+=I[Z];if(!U.match(f)){var he=A.slice(0,z),re=A.slice(z+1),F=I.match(h);F&&(he.push(F[1]),re.unshift(F[2])),re.length&&(j="/"+re.join(".")+j),this.hostname=he.join(".");break}}}this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=r.toASCII(this.hostname));var H=this.port?":"+this.port:"",ue=this.hostname||"";this.host=ue+H,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),j[0]!=="/"&&(j="/"+j))}if(!d[R])for(var z=0,O=a.length;z<O;z++){var le=a[z];if(j.indexOf(le)!==-1){var we=encodeURIComponent(le);we===le&&(we=escape(le)),j=j.split(le).join(we)}}var ie=j.indexOf("#");ie!==-1&&(this.hash=j.substr(ie),j=j.slice(0,ie));var B=j.indexOf("?");if(B!==-1?(this.search=j.substr(B),this.query=j.substr(B+1),E&&(this.query=m.parse(this.query)),j=j.slice(0,B)):E&&(this.search="",this.query={}),j&&(this.pathname=j),p[R]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var H=this.pathname||"",q=this.search||"";this.path=H+q}return this.href=this.format(),this};function v(x){return typeof x=="string"&&(x=y(x)),x instanceof e?x.format():e.prototype.format.call(x)}e.prototype.format=function(){var x=this.auth||"";x&&(x=encodeURIComponent(x),x=x.replace(/%3A/i,":"),x+="@");var E=this.protocol||"",S=this.pathname||"",C=this.hash||"",k=!1,$="";this.host?k=x+this.host:this.hostname&&(k=x+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(k+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&($=m.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var J=this.search||$&&"?"+$||"";return E&&E.substr(-1)!==":"&&(E+=":"),this.slashes||(!E||p[E])&&k!==!1?(k="//"+(k||""),S&&S.charAt(0)!=="/"&&(S="/"+S)):k||(k=""),C&&C.charAt(0)!=="#"&&(C="#"+C),J&&J.charAt(0)!=="?"&&(J="?"+J),S=S.replace(/[?#]/g,function(j){return encodeURIComponent(j)}),J=J.replace("#","%23"),E+k+S+J+C};function b(x,E){return y(x,!1,!0).resolve(E)}e.prototype.resolve=function(x){return this.resolveObject(y(x,!1,!0)).format()};function _(x,E){return x?y(x,!1,!0).resolveObject(E):E}return e.prototype.resolveObject=function(x){if(typeof x=="string"){var E=new e;E.parse(x,!1,!0),x=E}for(var S=new e,C=Object.keys(this),k=0;k<C.length;k++){var $=C[k];S[$]=this[$]}if(S.hash=x.hash,x.href==="")return S.href=S.format(),S;if(x.slashes&&!x.protocol){for(var J=Object.keys(x),j=0;j<J.length;j++){var L=J[j];L!=="protocol"&&(S[L]=x[L])}return p[S.protocol]&&S.hostname&&!S.pathname&&(S.pathname="/",S.path=S.pathname),S.href=S.format(),S}if(x.protocol&&x.protocol!==S.protocol){if(!p[x.protocol]){for(var w=Object.keys(x),R=0;R<w.length;R++){var N=w[R];S[N]=x[N]}return S.href=S.format(),S}if(S.protocol=x.protocol,!x.host&&!g[x.protocol]){for(var O=(x.pathname||"").split("/");O.length&&!(x.host=O.shift()););x.host||(x.host=""),x.hostname||(x.hostname=""),O[0]!==""&&O.unshift(""),O.length<2&&O.unshift(""),S.pathname=O.join("/")}else S.pathname=x.pathname;if(S.search=x.search,S.query=x.query,S.host=x.host||"",S.auth=x.auth,S.hostname=x.hostname||x.host,S.port=x.port,S.pathname||S.search){var Y=S.pathname||"",z=S.search||"";S.path=Y+z}return S.slashes=S.slashes||x.slashes,S.href=S.format(),S}var G=S.pathname&&S.pathname.charAt(0)==="/",te=x.host||x.pathname&&x.pathname.charAt(0)==="/",X=te||G||S.host&&x.pathname,T=X,A=S.pathname&&S.pathname.split("/")||[],O=x.pathname&&x.pathname.split("/")||[],I=S.protocol&&!p[S.protocol];if(I&&(S.hostname="",S.port=null,S.host&&(A[0]===""?A[0]=S.host:A.unshift(S.host)),S.host="",x.protocol&&(x.hostname=null,x.port=null,x.host&&(O[0]===""?O[0]=x.host:O.unshift(x.host)),x.host=null),X=X&&(O[0]===""||A[0]==="")),te)S.host=x.host||x.host===""?x.host:S.host,S.hostname=x.hostname||x.hostname===""?x.hostname:S.hostname,S.search=x.search,S.query=x.query,A=O;else if(O.length)A||(A=[]),A.pop(),A=A.concat(O),S.search=x.search,S.query=x.query;else if(x.search!=null){if(I){S.host=A.shift(),S.hostname=S.host;var U=S.host&&S.host.indexOf("@")>0?S.host.split("@"):!1;U&&(S.auth=U.shift(),S.hostname=U.shift(),S.host=S.hostname)}return S.search=x.search,S.query=x.query,(S.pathname!==null||S.search!==null)&&(S.path=(S.pathname?S.pathname:"")+(S.search?S.search:"")),S.href=S.format(),S}if(!A.length)return S.pathname=null,S.search?S.path="/"+S.search:S.path=null,S.href=S.format(),S;for(var Z=A.slice(-1)[0],oe=(S.host||x.host||A.length>1)&&(Z==="."||Z==="..")||Z==="",he=0,re=A.length;re>=0;re--)Z=A[re],Z==="."?A.splice(re,1):Z===".."?(A.splice(re,1),he++):he&&(A.splice(re,1),he--);if(!X&&!T)for(;he--;he)A.unshift("..");X&&A[0]!==""&&(!A[0]||A[0].charAt(0)!=="/")&&A.unshift(""),oe&&A.join("/").substr(-1)!=="/"&&A.push("");var F=A[0]===""||A[0]&&A[0].charAt(0)==="/";if(I){S.hostname=F?"":A.length?A.shift():"",S.host=S.hostname;var U=S.host&&S.host.indexOf("@")>0?S.host.split("@"):!1;U&&(S.auth=U.shift(),S.hostname=U.shift(),S.host=S.hostname)}return X=X||S.host&&A.length,X&&!F&&A.unshift(""),A.length>0?S.pathname=A.join("/"):(S.pathname=null,S.path=null),(S.pathname!==null||S.search!==null)&&(S.path=(S.pathname?S.pathname:"")+(S.search?S.search:"")),S.auth=x.auth||S.auth,S.slashes=S.slashes||x.slashes,S.href=S.format(),S},e.prototype.parseHost=function(){var x=this.host,E=n.exec(x);E&&(E=E[0],E!==":"&&(this.port=E.substr(1)),x=x.substr(0,x.length-E.length)),x&&(this.hostname=x)},qu.parse=y,qu.resolve=b,qu.resolveObject=_,qu.format=v,qu.Url=e,qu}var Qwe=Jwe();const Ih=Gs(Qwe);var Zwe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},e1e=(r,e)=>(t,n)=>e(t,n,r);let iC=class{webSocketBaseUrl;constructor({webSocketUrl:e}){this.webSocketBaseUrl=e}genuineCheck(e){const t=Ih.format({pathname:`${this.webSocketBaseUrl}/genuine`,query:e});return this._connectWebSocket(t)}installApp(e){const t=Ih.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}listInstalledApps(e){const t=Ih.format({pathname:`${this.webSocketBaseUrl}/apps/list`,query:e});return this._connectWebSocket(t)}uninstallApp(e){const t=Ih.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateFirmware(e){const t=Ih.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateMcu(e){const t=Ih.format({pathname:`${this.webSocketBaseUrl}/mcu`,query:e});return this._connectWebSocket(t)}_connectWebSocket(e){try{return er(new fye(e))}catch(t){return ut(new yye(t))}}};iC=Zwe([Ct(),e1e(0,Ze(sd.DmkConfig))],iC);var t1e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},r1e=(r,e)=>(t,n)=>e(t,n,r);let sC=class{constructor(e){this.dataSource=e}genuineCheck(e,t){const n={targetId:e.targetId.toString(),perso:t.perso};return this.dataSource.genuineCheck(n)}installApp(e,t){const{perso:n,firmware:i,firmwareKey:s,hash:o}=t,a={targetId:e.targetId.toString(),perso:n,firmware:i,firmwareKey:s,hash:o};return this.dataSource.installApp(a)}listInstalledApps(e,t){const n={targetId:e.targetId.toString(),perso:t.perso};return this.dataSource.listInstalledApps(n)}uninstallApp(e,t){const{perso:n,delete:i,deleteKey:s,hash:o}=t,a={targetId:e.targetId.toString(),perso:n,firmware:i,firmwareKey:s,hash:o};return this.dataSource.uninstallApp(a)}updateFirmware(e,t){const n={targetId:e.targetId.toString(),perso:t.perso,firmware:t.firmware,firmwareKey:t.firmwareKey};return this.dataSource.updateFirmware(n)}updateMcu(e,t){const n={targetId:e.targetId.toString(),version:t.version};return this.dataSource.updateMcu(n)}};sC=t1e([Ct(),r1e(0,Ze(sd.SecureChannelDataSource))],sC);const n1e=({stub:r,config:e})=>new pn(({bind:t})=>{t(sd.DmkConfig).toConstantValue(e),t(sd.SecureChannelDataSource).to(iC),t(sd.SecureChannelService).to(sC)}),vW="wss://scriptrunner.api.live.ledger.com/update";var i1e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},pB=(r,e)=>(t,n)=>e(t,n,r);let oC=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("SendApduUseCase")}async execute({sessionId:e,apdu:t,abortTimeout:n,triggersDisconnection:i}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:async s=>(await s.sendApdu(t,{abortTimeout:n,triggersDisconnection:i})).caseOf({Right:o=>o,Left:o=>{throw this._logger.error("Error sending APDU",{data:{sessionId:e,apdu:t,error:o}}),o}}),Left:s=>{throw this._logger.error("Error getting deviceSession",{data:{error:s}}),s}})}};oC=i1e([Ct(),pB(0,Ze(yn.DeviceSessionService)),pB(1,Ze(ri.LoggerPublisherServiceFactory))],oC);const s1e=({stub:r=!1})=>new pn(({bind:e,rebindSync:t})=>{e(AI.SendApduUseCase).to(oC),r&&t(AI.SendApduUseCase).to(di)});var o1e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},Ch=(r,e)=>(t,n)=>e(t,n,r);let aC=class{constructor(e,t,n,i,s,o){if(this._config=t,this._loggerModuleFactory=n,this._deviceModelDataSource=i,this._apduSenderServiceFactory=s,this._apduReceiverServiceFactory=o,this._logger=n("TransportService"),e.length===0)throw this._logger.warn("No transports provided, please check your configuration"),new aye("No transports provided, please check your configuration");for(const a of e){const c=this.addTransport(a);if(c.isLeft())throw c.extract()}}_transports=new Map;_logger;addTransport(e){const t=e({deviceModelDataSource:this._deviceModelDataSource,loggerServiceFactory:this._loggerModuleFactory,config:this._config,apduSenderServiceFactory:this._apduSenderServiceFactory,apduReceiverServiceFactory:this._apduReceiverServiceFactory});return this.addTransportInternal(t)}addTransportInternal(e){return this.getTransport(e.getIdentifier()).isJust()?(this._logger.warn(`Transport ${e.getIdentifier()} already exists, please check your configuration`),ut(new sye(`Transport ${e.getIdentifier()} already exists, please check your configuration`))):(this._transports.set(e.getIdentifier(),e),er(void 0))}getTransport(e){return an.fromNullable(this._transports.get(e))}getAllTransports(){return Array.from(this._transports.values())}closeConnection(e){this.getTransport(e.transport).map(t=>t.disconnect({connectedDevice:e}))}};aC=o1e([Ct(),Ch(0,Ze(Xo.TransportsInput)),Ch(1,Ze(Xo.DmkConfig)),Ch(2,Ze(ri.LoggerPublisherServiceFactory)),Ch(3,Ze(jH.DeviceModelDataSource)),Ch(4,Ze(yn.ApduSenderServiceFactory)),Ch(5,Ze(yn.ApduReceiverServiceFactory))],aC);const a1e=({stub:r=!1,transports:e=[],config:t}={})=>new pn(({bind:n})=>{n(Xo.TransportsInput).toConstantValue(e),n(Xo.TransportService).to(aC).inSingletonScope(),n(Xo.DmkConfig).toConstantValue(t)}),c1e=({stub:r=!1,transports:e=[],loggers:t=[],config:n={mockUrl:gW,managerApiUrl:pW,webSocketUrl:vW,provider:ok,firmwareDistributionSalt:ak}})=>{const i=new tk;return i.loadSync($ve({stub:r}),Mve({stub:r}),a1e({stub:r,transports:e,config:n}),qwe({stub:r,config:n}),n1e({stub:r,config:n}),sbe({stub:r}),abe({subscribers:t}),zve({stub:r}),s1e({stub:r}),yve({stub:r}),bve({stub:r})),i};let l1e=class{container;constructor({stub:e,transports:t,loggers:n,config:i}={}){this.container=c1e({stub:e,transports:t,loggers:n,config:i})}getVersion(){return this.container.get(rc.GetDmkVersionUseCase).getDmkVersion()}startDiscovering(e){return this.container.get(xn.StartDiscoveringUseCase).execute(e)}stopDiscovering(){return this.container.get(xn.StopDiscoveringUseCase).execute()}listenToAvailableDevices(e){return this.container.get(xn.ListenToAvailableDevicesUseCase).execute(e)}connect(e){return this.container.get(xn.ConnectUseCase).execute(e)}disconnect(e){return this.container.get(xn.DisconnectUseCase).execute(e)}sendApdu(e){return this.container.get(AI.SendApduUseCase).execute(e)}sendCommand(e){return this.container.get(EI.SendCommandUseCase).execute(e)}executeDeviceAction(e){return this.container.get(TI.ExecuteDeviceActionUseCase).execute(e)}getConnectedDevice(e){return this.container.get(xn.GetConnectedDeviceUseCase).execute(e)}getDeviceSessionState(e){return this.container.get(yn.GetDeviceSessionStateUseCase).execute(e)}close(){return this.container.get(yn.CloseSessionsUseCase).execute()}listConnectedDevices(){return this.container.get(xn.ListConnectedDevicesUseCase).execute()}listenToConnectedDevice(){return this.container.get(xn.ListenToConnectedDeviceUseCase).execute()}disableDeviceSessionRefresher(e){return this.container.get(yn.DisableDeviceSessionRefresherUseCase).execute(e)}setProvider(e){return this.container.get(uo.SetProviderUseCase).execute(e)}getProvider(){return this.container.get(uo.ManagerApiDataSource).getProvider()}isEnvironmentSupported(){return this.container.get(Xo.TransportService).getAllTransports().some(e=>e.isSupported())}},u1e=class{stub=!1;loggers=[];transports=[];config={managerApiUrl:pW,mockUrl:gW,webSocketUrl:vW,provider:ok,firmwareDistributionSalt:ak};build(){return new l1e({stub:this.stub,transports:this.transports,loggers:this.loggers,config:this.config})}setStub(e){return this.stub=e,this}addTransport(e){return this.transports.push(e),this}addLogger(e){return this.loggers.push(e),this}addConfig(e){return this.config={...this.config,...e},this}},f1e=class{deviceId;deviceAdpuSender;machineActor;timeoutDuration;timeout=null;startReconnectionTimeout(){this.timeout=setTimeout(()=>{this.machineActor.send({type:"ReconnectionTimedOut"})},this.timeoutDuration)}constructor(e){this.deviceId=e.deviceId,this.deviceAdpuSender=e.deviceApduSender,this.timeoutDuration=e.timeoutDuration,this.machineActor=Ad(h1e({sendApduFn:(t,n,i)=>this.sendApduToDeviceConnection(t,n,i),startReconnectionTimeout:()=>this.startReconnectionTimeout(),cancelReconnectionTimeout:()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},tryToReconnect:()=>{e.tryToReconnect(this.timeoutDuration)},onTerminated:e.onTerminated,closeConnection:()=>{this.deviceAdpuSender.closeConnection()}})),this.machineActor.start()}sendApduToDeviceConnection(e,t,n){this.deviceAdpuSender.sendApdu(e,t,n).then(i=>{i.caseOf({Left:s=>{this.machineActor.send({type:"ApduSendingError",error:s})},Right:s=>{this.machineActor.send({type:"ApduResponseReceived",apduResponse:s})}})}).catch(i=>{this.machineActor.send({type:"ApduSendingError",error:new m3(i)})})}getDependencies(){return this.deviceAdpuSender.getDependencies()}setDependencies(e){this.deviceAdpuSender.setDependencies(e)}getDeviceId(){return this.deviceId}sendApdu(e,t,n){return new Promise(i=>{this.machineActor.send({type:"SendApduCalled",apdu:e,triggersDisconnection:!!t,abortTimeout:n,responseCallback:i})})}async setupConnection(){await this.deviceAdpuSender.setupConnection()}eventDeviceConnected(){this.machineActor.send({type:"DeviceConnected"})}eventDeviceDisconnected(){this.machineActor.send({type:"DeviceDisconnected"})}closeConnection(){this.machineActor.send({type:"CloseConnectionCalled"})}};function h1e({sendApduFn:r,startReconnectionTimeout:e,cancelReconnectionTimeout:t,tryToReconnect:n,onTerminated:i,closeConnection:s}){return Yf({actions:{startTimer:()=>{e()},cancelTimer:()=>{t()},reconnectionTimeoutEvent:fme({type:"ReconnectionTimedOut"}),sendApdu:({context:o})=>{o.apduInProgress.map(({apdu:a,abortTimeout:c})=>{r(a,!1,c)})},sendApduResponse:({context:o},a)=>{o.apduInProgress.map(({responseCallback:c})=>c(a.response))},sendGetAppAndVersion:()=>{r(new yg().getApdu().getRawApdu(),!1)},tryToReconnect:()=>{n()},clearApduInProgress:qt({apduInProgress:Fr}),clearApduResponse:qt({apduResponse:Fr}),signalTermination:()=>{i()},closeConnection:()=>{s()}},guards:{isApduThatTriggersDisconnection:({context:o,event:a})=>a.type!=="ApduResponseReceived"?!1:o.apduInProgress.caseOf({Just:({triggersDisconnection:c,apdu:l})=>(c||bu.isApduThatTriggersDisconnection(l))&&bu.isSuccessResponse(a.apduResponse),Nothing:()=>!1}),isSendApduBusyError:({event:o})=>o.type!=="ApduResponseReceived"?!1:o.apduResponse.statusCode[0]===102&&o.apduResponse.statusCode[1]===1}}).createMachine({id:"deviceConnection",initial:"Connected",context:{apduInProgress:Fr,apduResponse:Fr},states:{Connected:{on:{DeviceDisconnected:{target:"WaitingForReconnection"},SendApduCalled:{target:"SendingApdu",actions:qt({apduInProgress:({event:o})=>an.of({apdu:o.apdu,triggersDisconnection:o.triggersDisconnection,abortTimeout:o.abortTimeout,responseCallback:o.responseCallback})})},CloseConnectionCalled:{target:"Terminated"}}},SendingApdu:{entry:"sendApdu",on:{ApduResponseReceived:[{guard:"isApduThatTriggersDisconnection",target:"WaitingForDisconnection",actions:[qt({apduResponse:({event:o})=>an.of(o.apduResponse)})]},{target:"Connected",actions:[{type:"sendApduResponse",params:({event:o})=>({response:er(o.apduResponse)})},{type:"clearApduInProgress"}]}],ApduSendingError:{target:"Connected",actions:[{type:"sendApduResponse",params:({event:o})=>({response:ut(o.error)})},"clearApduInProgress"]},DeviceDisconnected:{target:"WaitingForReconnection",actions:[{type:"sendApduResponse",params:{response:ut(new By)}},"clearApduInProgress"]},CloseConnectionCalled:{target:"Terminated",actions:[{type:"sendApduResponse",params:{response:ut(new By)}},"clearApduInProgress"]},SendApduCalled:{actions:({event:o})=>{o.responseCallback(ut(new _E))}}}},WaitingForDisconnection:{entry:["sendGetAppAndVersion"],exit:[{type:"sendApduResponse",params:({context:o})=>({response:o.apduResponse.caseOf({Just:a=>er(a),Nothing:()=>ut(new m3)})})},{type:"clearApduInProgress"},{type:"clearApduResponse"}],on:{ApduResponseReceived:[{guard:"isSendApduBusyError",actions:["sendGetAppAndVersion"],target:"WaitingForDisconnection"},{target:"Connected"}],ApduSendingError:[{target:"WaitingForReconnection"}],SendApduCalled:{actions:({event:o})=>{o.responseCallback(ut(new _E))}},DeviceDisconnected:{target:"WaitingForReconnection"},CloseConnectionCalled:{target:"Terminated"}}},WaitingForReconnection:{entry:["startTimer","tryToReconnect"],on:{DeviceConnected:{target:"Connected",actions:"cancelTimer"},SendApduCalled:{target:"WaitingForReconnectionWithQueuedSendApdu",actions:qt({apduInProgress:({event:o})=>an.of({apdu:o.apdu,triggersDisconnection:o.triggersDisconnection,abortTimeout:o.abortTimeout,responseCallback:o.responseCallback})})},ReconnectionTimedOut:{target:"Terminated"},CloseConnectionCalled:{target:"Terminated"}}},WaitingForReconnectionWithQueuedSendApdu:{on:{DeviceConnected:{target:"SendingApdu",actions:"cancelTimer"},ReconnectionTimedOut:{target:"Terminated",actions:[{type:"sendApduResponse",params:{response:ut(new oye)}},{type:"clearApduInProgress"}]},CloseConnectionCalled:{target:"Terminated",actions:[{type:"sendApduResponse",params:{response:ut(new By)}},"clearApduInProgress"]},SendApduCalled:{actions:({event:o})=>{o.responseCallback(ut(new _E))}}}},Terminated:{entry:["signalTermination","closeConnection"],type:"final"}}})}let gB=class{id;deviceModel;sendApdu;type;transport;constructor({id:e,deviceModel:t,type:n,transport:i,sendApdu:s}){this.id=e,this.deviceModel=t,this.sendApdu=s,this.type=n,this.transport=i}};const cs={Config:Symbol.for("config")},Io={PkiCertificateDataSource:Symbol.for("PkiCertificateDataSource"),PkiCertificateLoader:Symbol.for("PkiCertificateLoader")};var Iw=(r=>(r.Test="test",r.PersoV2="persov2",r.LedgerRootV3="ledger_root_v3",r.PluginSelectorKey="plugin_selector_key",r.NftMetadataKey="nft_metadata_key",r.PartnerMetadataKey="partner_metadata_key",r.Erc20MetadataKey="erc20_metadata_key",r.DomainMetadataKey="domain_metadata_key",r.CalCalldataKey="cal_calldata_key",r.CalTrustedNameKey="cal_trusted_name_key",r.CalNetwork="cal_network",r))(Iw||{}),oi=(r=>(r.GenuineCheck="genuine_check",r.ExchangePayload="exchange_payload",r.NftMeta="nft_meta",r.TrustedName="trusted_name",r.BackupProvider="backup_provider",r.ProtectOrchestrator="protect_orchestrator",r.PluginMeta="plugin_meta",r.CoinMeta="coin_meta",r.SeedIdAuth="seed_id_auth",r.TxSimulationSigner="tx_simu_signer",r.Calldata="calldata",r.Network="network",r))(oi||{});const Ss="X-Ledger-Client-Version",Ra="X-Ledger-Client-Origin";var Ft=(r=>(r.TOKEN="token",r.NFT="nft",r.TRUSTED_NAME="trustedName",r.PLUGIN="plugin",r.EXTERNAL_PLUGIN="externalPlugin",r.TRANSACTION_INFO="transactionInfo",r.PROXY_INFO="proxyInfo",r.ENUM="enum",r.TRANSACTION_FIELD_DESCRIPTION="transactionFieldDescription",r.WEB3_CHECK="web3Check",r.DYNAMIC_NETWORK="dynamicNetwork",r.DYNAMIC_NETWORK_ICON="dynamicNetworkIcon",r.ERROR="error",r))(Ft||{}),Ll=(r=>(r.TOKEN="token",r.NFT="nft",r.TRUSTED_NAME="trustedName",r.ENUM="enum",r.CALLDATA="calldata",r))(Ll||{});const d1e="15",mB="81ff";let Bv=class{static stringToHex(e){let t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n).toString(16);t+=i.padStart(2,"0")}return t}static appendSignatureToPayload(e,t,n){t.length%2!==0&&(t="0"+t);let i=(t.length/2).toString(16);return i.length%2!==0&&(i="0"+i),`${e}${n}${i}${t}`}};const p1e="@ledgerhq/context-module",g1e="1.8.0",m1e="Apache-2.0",y1e={".":{types:"./lib/types/index.d.ts",import:"./lib/esm/index.js",require:"./lib/cjs/index.js"},"./*":{types:"./lib/types/*",import:"./lib/esm/*",require:"./lib/cjs/*"}},v1e=["./lib"],b1e={prebuild:"rimraf lib",build:"pnpm ldmk-tool build --entryPoints index.ts,src/**/*.ts --tsconfig tsconfig.prod.json",dev:'concurrently "pnpm watch:builds" "pnpm watch:types"',"watch:builds":"pnpm ldmk-tool watch --entryPoints index.ts,src/**/*.ts --tsconfig tsconfig.prod.json","watch:types":'concurrently "tsc --watch -p tsconfig.prod.json" "tsc-alias --watch -p tsconfig.prod.json"',lint:"eslint","lint:fix":"pnpm lint --fix",postpack:"find . -name '*.tgz' -exec cp {} ../../../dist/ \\; ",prettier:"prettier . --check","prettier:fix":"prettier . --write",test:"vitest run","test:watch":"vitest","test:coverage":"vitest run --coverage",typecheck:"tsc --noEmit"},w1e={"@ledgerhq/device-management-kit":"workspace:*","@ledgerhq/ldmk-tool":"workspace:*","@ledgerhq/eslint-config-dsdk":"workspace:*","@ledgerhq/prettier-config-dsdk":"workspace:*","@ledgerhq/tsconfig-dsdk":"workspace:*","@ledgerhq/vitest-config-dmk":"workspace:*","@types/crypto-js":"catalog:","ts-node":"catalog:"},x1e={axios:"catalog:","crypto-js":"catalog:",ethers:"catalog:",inversify:"catalog:","purify-ts":"catalog:","reflect-metadata":"catalog:"},_1e={"@ledgerhq/device-management-kit":"^0.9.0"},Es={name:p1e,version:g1e,private:!1,license:m1e,exports:y1e,files:v1e,scripts:b1e,devDependencies:w1e,dependencies:x1e,peerDependencies:_1e};var S1e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},yB=(r,e)=>(t,n)=>e(t,n,r);let Nv=class{constructor(e,t,n){this.config=e,this._certificateLoader=t,this.endpoint=n}async getCalldataDescriptors({chainId:e,address:t,selector:n,deviceModelId:i}){let s;try{s=(await ur.request({method:"GET",url:`${this.config.cal.url}/${this.endpoint}`,params:{output:"descriptors_calldata",chain_id:e,contracts:t,contract_address:t,ref:`branch:${this.config.cal.branch}`},headers:{[Ss]:`context-module/${Es.version}`,[Ra]:this.config.originToken}})).data}catch(o){return ut(new Error(`[ContextModule] HttpCalldataDescriptorDataSource: Failed to fetch calldata descriptors: ${o}`))}if(!Array.isArray(s))return ut(new Error("[ContextModule] HttpCalldataDescriptorDataSource: Response is not an array"));if(s.length===0)return ut(new Error(`[ContextModule] HttpCalldataDescriptorDataSource: No data for contract ${t} and selector ${n}`));for(const o of s){t=t.toLowerCase(),n=`0x${n.slice(2).toLowerCase()}`;const a=o.descriptors_calldata?.[t]?.[n];if(!a||!this.isCalldataDescriptorV1(a,this.config.cal.mode))continue;const c=a.transaction_info.descriptor.data,l=a.transaction_info.descriptor.signatures[this.config.cal.mode],u={targetDevice:i,keyUsage:oi.Calldata,keyId:Iw.CalCalldataKey},f=await this._certificateLoader.loadCertificate(u),h={type:Ft.TRANSACTION_INFO,payload:Bv.appendSignatureToPayload(c,l,mB),certificate:f},d=[];for(const[p,m]of Object.entries(a.enums))for(const[y,{data:v,signatures:b}]of Object.entries(m))d.push({type:Ft.ENUM,id:Number(p),value:Number(y),payload:Bv.appendSignatureToPayload(v,b[this.config.cal.mode],mB),certificate:f});const g=a.fields.map(p=>({type:Ft.TRANSACTION_FIELD_DESCRIPTION,payload:p.descriptor,reference:this.getReference(p.param)}));return er([h,...d,...g])}return ut(new Error(`[ContextModule] HttpCalldataDescriptorDataSource: Invalid response for contract ${t} and selector ${n}`))}getReference(e){if(e.type==="TOKEN_AMOUNT"&&e.token!==void 0&&e.token.type==="path")return{type:Ll.TOKEN,valuePath:this.toGenericPath(e.token.binary_path)};if(e.type==="TOKEN_AMOUNT"&&e.token!==void 0&&e.token.type==="constant")return{type:Ll.TOKEN,value:e.token.value};if(e.type==="NFT"&&e.collection.type==="path")return{type:Ll.NFT,valuePath:this.toGenericPath(e.collection.binary_path)};if(e.type==="NFT"&&e.collection.type==="constant")return{type:Ll.NFT,value:e.collection.value};if(e.type==="TRUSTED_NAME"&&e.value.type==="path")return{type:Ll.TRUSTED_NAME,valuePath:this.toGenericPath(e.value.binary_path),types:e.types,sources:e.sources};if(e.type==="ENUM"&&e.value.type==="path")return{type:Ll.ENUM,valuePath:this.toGenericPath(e.value.binary_path),id:e.id};if(e.type==="CALLDATA"&&e.value.type==="path"&&e.callee.type==="path")return{type:Ll.CALLDATA,valuePath:this.toGenericPath(e.value.binary_path),callee:this.toGenericPath(e.callee.binary_path),selector:e.selector?.type==="path"?this.toGenericPath(e.selector.binary_path):void 0,amount:e.amount?.type==="path"?this.toGenericPath(e.amount.binary_path):void 0,spender:e.spender?.type==="path"?this.toGenericPath(e.spender.binary_path):void 0,chainId:e.chainId?.type==="path"?this.toGenericPath(e.chainId.binary_path):void 0}}toGenericPath(e){return e.type==="CONTAINER"?e.value:e.elements.map(t=>{if(t.type==="ARRAY"){const{weight:n,...i}=t;return{itemSize:n,...i}}else if(t.type==="LEAF"){const{leaf_type:n,...i}=t;return{leafType:n,...i}}return t})}isCalldataDescriptorV1(e,t){return typeof e=="object"&&e.type==="calldata"&&e.version==="v1"&&this.isTransactionInfoV1(e.transaction_info,t)&&this.isEnumV1(e.enums,t)&&Array.isArray(e.fields)&&e.fields.every(n=>this.isFieldV1(n))}isTransactionInfoV1(e,t){return typeof e=="object"&&typeof e.descriptor=="object"&&typeof e.descriptor.data=="string"&&typeof e.descriptor.signatures=="object"&&typeof e.descriptor.signatures[t]=="string"}isEnumV1(e,t){return typeof e=="object"&&Object.entries(e).every(([n,i])=>typeof n=="string"&&typeof i=="object"&&Object.entries(i).every(([s,o])=>typeof s=="string"&&typeof o=="object"&&typeof o.data=="string"&&o.signatures!==void 0&&this.isCalldataSignatures(o.signatures,t)))}isCalldataSignatures(e,t){return typeof e=="object"&&typeof e[t]=="string"}isFieldV1(e){return typeof e=="object"&&typeof e.descriptor=="string"&&typeof e.param=="object"&&typeof e.param.value=="object"&&this.isDescriptorValueV1(e.param.value)&&(e.param.type==="RAW"||e.param.type==="AMOUNT"||e.param.type==="DATETIME"||e.param.type==="DURATION"||e.param.type==="UNIT"||e.param.type==="ENUM"||e.param.type==="NFT"&&this.isDescriptorValueV1(e.param.collection)||e.param.type==="TOKEN_AMOUNT"&&(e.param.token===void 0||this.isDescriptorValueV1(e.param.token))||e.param.type==="TRUSTED_NAME"&&Array.isArray(e.param.types)&&Array.isArray(e.param.sources)&&e.param.types.every(t=>typeof t=="string")&&e.param.sources.every(t=>typeof t=="string")||e.param.type==="CALLDATA"&&this.isDescriptorValueV1(e.param.value)&&this.isDescriptorValueV1(e.param.callee)&&(e.param.selector===void 0||this.isDescriptorValueV1(e.param.selector))&&(e.param.amount===void 0||this.isDescriptorValueV1(e.param.amount))&&(e.param.spender===void 0||this.isDescriptorValueV1(e.param.spender))&&(e.param.chainId===void 0||this.isDescriptorValueV1(e.param.chainId)))}isDescriptorValueV1(e){return typeof e=="object"&&typeof e.type_family=="string"&&["UINT","INT","UFIXED","FIXED","ADDRESS","BOOL","BYTES","STRING"].includes(e.type_family)&&(typeof e.type_size>"u"||typeof e.type_size=="number")&&(e.type==="path"&&this.isCalldataDescriptorValueBinaryPathV1(e)||e.type==="constant"&&this.isCalldataDescriptorValueConstantV1(e))}isCalldataDescriptorValueConstantV1(e){return typeof e=="object"&&e.type==="constant"&&typeof e.value=="string"}isCalldataDescriptorValueBinaryPathV1(e){return typeof e=="object"&&(e.type==="path"&&e.binary_path.type==="CONTAINER"&&["FROM","TO","VALUE"].includes(e.binary_path.value)||e.binary_path.type==="DATA"&&Array.isArray(e.binary_path.elements)&&e.binary_path.elements.every(t=>this.isPathElementV1(t)))}isPathElementV1(e){return typeof e=="object"&&(e.type==="REF"||e.type==="TUPLE"&&typeof e.offset=="number"||e.type==="ARRAY"&&typeof e.weight=="number"&&(typeof e.start>"u"||typeof e.start=="number")&&(typeof e.end>"u"||typeof e.end=="number")||e.type==="LEAF"&&typeof e.leaf_type=="string"&&["ARRAY_LEAF","TUPLE_LEAF","STATIC_LEAF","DYNAMIC_LEAF"].includes(e.leaf_type)||e.type==="SLICE"&&(typeof e.start>"u"||typeof e.start=="number")&&(typeof e.end>"u"||typeof e.end=="number"))}};Nv=S1e([Ct(),yB(0,Ze(cs.Config)),yB(1,Ze(Io.PkiCertificateLoader))],Nv);const od={CalldataContextLoader:Symbol.for("CalldataContextLoader"),DappCalldataDescriptorDataSource:Symbol.for("DappCalldataDescriptorDataSource"),TokenCalldataDescriptorDataSource:Symbol.for("TokenCalldataDescriptorDataSource")},pf={ProxyDataSource:Symbol.for("ProxyDataSource"),ProxyContextFieldLoader:Symbol.for("ProxyContextFieldLoader")};var E1e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},GE=(r,e)=>(t,n)=>e(t,n,r);const A1e=[Ft.TRANSACTION_INFO,Ft.TRANSACTION_FIELD_DESCRIPTION,Ft.PROXY_INFO,Ft.ENUM];let cC=class{constructor(e,t,n){this.dappDataSource=e,this.tokenDataSource=t,this.proxyDataSource=n}canHandle(e,t){return typeof e=="object"&&e!==null&&"to"in e&&"data"in e&&"selector"in e&&"chainId"in e&&"deviceModelId"in e&&e.deviceModelId!==void 0&&e.deviceModelId!==Lr.NANO_S&&typeof e.chainId=="number"&&li(e.to)&&e.to!=="0x"&&li(e.data)&&li(e.selector)&&e.selector!=="0x"&&A1e.every(n=>t.includes(n))}async load(e){const{to:t,data:n,selector:i,chainId:s,deviceModelId:o}=e,a={address:t,chainId:s,selector:i,deviceModelId:o,data:n};return this._getContexts(a,this.dappDataSource).alt(this._getContexts(a,this.tokenDataSource)).alt(this._getContextsWithProxy(a,this.dappDataSource)).orDefault([{type:Ft.ERROR,error:new Error("[ContextModule] CalldataContextLoader: No calldata contexts found")}])}_getContexts({address:e,chainId:t,selector:n,deviceModelId:i},s){return Ci(async({liftMaybe:o})=>{const a=await s.getCalldataDescriptors({deviceModelId:i,address:e,chainId:t,selector:n});return o(a.toMaybe().filter(c=>c.length>0))})}_getContextsWithProxy({address:e,chainId:t,selector:n,deviceModelId:i,data:s},o){return Ci(async({liftMaybe:a})=>{const c=await this.proxyDataSource.getProxyImplementationAddress({calldata:s,proxyAddress:e,chainId:t,challenge:""});return a(c.toMaybe())}).map(({implementationAddress:a})=>{const c={address:a,chainId:t,selector:n,deviceModelId:i,data:s};return this._getContexts(c,o).map(l=>[{type:Ft.PROXY_INFO,payload:"0x"},...l])}).join()}};cC=E1e([Ct(),GE(0,Ze(od.DappCalldataDescriptorDataSource)),GE(1,Ze(od.TokenCalldataDescriptorDataSource)),GE(2,Ze(pf.ProxyDataSource))],cC);const Lv={DynamicNetworkDataSource:Symbol("DynamicNetworkDataSource"),DynamicNetworkContextLoader:Symbol("DynamicNetworkContextLoader")},gf={TrustedNameDataSource:Symbol.for("TrustedNameDataSource"),TrustedNameContextLoader:Symbol.for("TrustedNameContextLoader"),TrustedNameContextFieldLoader:Symbol.for("TrustedNameContextFieldLoader")},Fv={ExternalPluginDataSource:Symbol.for("externalPluginDataSource"),ExternalPluginContextLoader:Symbol.for("externalPluginContextLoader")},mf={NftDataSource:Symbol.for("nftDataSource"),NftContextLoader:Symbol.for("nftContextLoader"),NftContextFieldLoader:Symbol.for("nftContextFieldLoader")},Uv={SolanaDataSource:Symbol.for("SolanaDataSource"),SolanaContextLoader:Symbol.for("SolanaContextLoader")},cc={TokenDataSource:Symbol.for("TokenDataSource"),TokenContextLoader:Symbol.for("TokenContextLoader"),TokenContextFieldLoader:Symbol.for("TokenContextFieldLoader")},zv={TypedDataDataSource:Symbol.for("TypedDataDataSource"),TypedDataContextLoader:Symbol.for("TypedDataContextLoader")},ad={AbiDecoderDataSource:Symbol.for("AbiDecoderDataSource"),CommandDecoderDataSource:Symbol.for("CommandDecoderDataSource"),UniswapContextLoader:Symbol.for("UniswapContextLoader")},qv={Web3CheckDataSource:Symbol.for("Web3CheckDataSource"),Web3CheckContextLoader:Symbol.for("Web3CheckContextLoader")},I1e=()=>new pn(({bind:r})=>{r(od.DappCalldataDescriptorDataSource).toDynamicValue(e=>new Nv(e.get(cs.Config),e.get(Io.PkiCertificateLoader),"dapps")),r(od.TokenCalldataDescriptorDataSource).toDynamicValue(e=>new Nv(e.get(cs.Config),e.get(Io.PkiCertificateLoader),"tokens")),r(od.CalldataContextLoader).to(cC)}),C1e=r=>new pn(({bind:e})=>{e(cs.Config).toConstantValue(r)});var T1e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},R1e=(r,e)=>(t,n)=>e(t,n,r);let lC=class{constructor(e){this.config=e}async getDynamicNetworkConfiguration(e){let t;try{t=(await ur.get(`${this.config.cal.url}/networks?output=id,descriptors,icons&chain_id=${e}`,{headers:{[Ss]:`context-module/${Es.version}`}})).data}catch(s){return ut(s instanceof Error?s:new Error("Failed to fetch network configuration"))}const n=t?.[0];if(!n)return ut(new Error(`Network configuration not found for chain ID: ${e}`));if(!this.isValidNetworkData(n))return ut(new Error(`Invalid network configuration response for chain ID: ${e}`));const i=this.transformToNetworkConfiguration(n);return er(i)}isValidNetworkData(e){if(!e||typeof e!="object")return!1;const t=e;if(typeof t.id!="string"||!t.descriptors||typeof t.descriptors!="object")return!1;for(const n of Object.values(t.descriptors))if(!this.isValidDescriptor(n))return!1;return!(t.icons&&typeof t.icons!="object")}isValidDescriptor(e){if(!e||typeof e!="object")return!1;const t=e;if(typeof t.data!="string"||typeof t.descriptorType!="string"||typeof t.descriptorVersion!="string"||!t.signatures||typeof t.signatures!="object")return!1;const n=t.signatures;return!(typeof n.prod!="string"||typeof n.test!="string")}transformToNetworkConfiguration(e){const t=Object.entries(e.descriptors).reduce((n,[i,s])=>(n[i]={descriptorType:s.descriptorType,descriptorVersion:s.descriptorVersion,data:s.data,signatures:s.signatures,icon:e.icons?.[i]},n),{});return{id:e.id,descriptors:t}}};lC=T1e([Ct(),R1e(0,Ze(cs.Config))],lC);var k1e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},YE=(r,e)=>(t,n)=>e(t,n,r);const P1e="15",O1e=[Ft.DYNAMIC_NETWORK,Ft.DYNAMIC_NETWORK_ICON];let uC=class{_networkDataSource;_config;_certificateLoader;constructor(e,t,n){this._networkDataSource=e,this._config=t,this._certificateLoader=n}canHandle(e,t){return typeof e=="object"&&e!==null&&"chainId"in e&&"deviceModelId"in e&&e.deviceModelId!==void 0&&e.deviceModelId!==Lr.NANO_S&&typeof e.chainId=="number"&&O1e.every(n=>t.includes(n))}async load(e){const{chainId:t,deviceModelId:n}=e,i=await this._networkDataSource.getDynamicNetworkConfiguration(t),s=await this._certificateLoader.loadCertificate({keyId:Iw.CalNetwork,keyUsage:oi.Network,targetDevice:n});return i.caseOf({Left:()=>[],Right:o=>{const a=[],c=o.descriptors[n];if(!c)return[];const l=c.signatures[this._config.cal.mode];if(!l)return[];const u=Bv.appendSignatureToPayload(c.data,l,P1e);return a.push({type:Ft.DYNAMIC_NETWORK,payload:u,certificate:s}),c.icon&&a.push({type:Ft.DYNAMIC_NETWORK_ICON,payload:c.icon}),a}})}};uC=k1e([Ct(),YE(0,Ze(Lv.DynamicNetworkDataSource)),YE(1,Ze(cs.Config)),YE(2,Ze(Io.PkiCertificateLoader))],uC);const D1e=()=>new pn(({bind:r})=>{r(Lv.DynamicNetworkDataSource).to(lC),r(Lv.DynamicNetworkContextLoader).to(uC)});var $1e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},M1e=(r,e)=>(t,n)=>e(t,n,r);let fC=class{constructor(e){this.config=e}async getDappInfos({chainId:e,address:t,selector:n}){try{const i=await ur.request({method:"GET",url:`${this.config.cal.url}/dapps`,params:{output:"b2c,b2c_signatures,abis",chain_id:e,contracts:t},headers:{[Ss]:`context-module/${Es.version}`,[Ra]:this.config.originToken}});if(!i.data[0])return er(void 0);t=t.toLowerCase(),n=`0x${n.slice(2).toLowerCase()}`;const{erc20OfInterest:s,method:o,plugin:a}=i.data[0].b2c?.contracts?.find(f=>f.address===t)?.selectors?.[n]||{},{signature:c,serialized_data:l}=i.data[0].b2c_signatures?.[t]?.[n]||{};if(!s||!o||!a||!c||!l)return er(void 0);const u=i.data[0].abis?.[t];return er(u?{selectorDetails:{method:o,plugin:a,erc20OfInterest:s,signature:c,serializedData:l},abi:u}:void 0)}catch{return ut(new Error("[ContextModule] HttpExternalPluginDataSource: Error fetching dapp infos"))}}};fC=$1e([Ct(),M1e(0,Ze(cs.Config))],fC);const B1e="6.14.1";function N1e(r,e,t){const n=e.split("|").map(s=>s.trim());for(let s=0;s<n.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=r,i}function Sn(r,e,t){for(let n in e){let i=e[n];const s=t?t[n]:null;s&&N1e(i,s,n),Object.defineProperty(r,n,{enumerable:!0,value:i,writable:!1})}}function Hh(r){if(r==null)return"null";if(Array.isArray(r))return"[ "+r.map(Hh).join(", ")+" ]";if(r instanceof Uint8Array){const e="0123456789abcdef";let t="0x";for(let n=0;n<r.length;n++)t+=e[r[n]>>4],t+=e[r[n]&15];return t}if(typeof r=="object"&&typeof r.toJSON=="function")return Hh(r.toJSON());switch(typeof r){case"boolean":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"number":return r.toString();case"string":return JSON.stringify(r);case"object":{const e=Object.keys(r);return e.sort(),"{ "+e.map(t=>`${Hh(t)}: ${Hh(r[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function vB(r,e){return r&&r.code===e}function bW(r,e,t){let n=r;{const s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${Hh(t)}`);for(const o in t){if(o==="shortMessage")continue;const a=t[o];s.push(o+"="+Hh(a))}}s.push(`code=${e}`),s.push(`version=${B1e}`),s.length&&(r+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(r);break;default:i=new Error(r)}return Sn(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&Sn(i,{shortMessage:n}),i}function Un(r,e,t,n){if(!r)throw bW(e,t,n)}function kt(r,e,t,n){Un(r,e,"INVALID_ARGUMENT",{argument:t,value:n})}function wW(r,e,t){t==null&&(t=""),t&&(t=": "+t),Un(r>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:r,expectedCount:e}),Un(r<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");r.push(e)}catch{}return r},[]);function lk(r,e,t){if(t==null&&(t=""),r!==e){let n=t,i="new";t&&(n+=".",i+=" "+t),Un(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function xW(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let i=2;for(let s=0;s<n.length;s++)n[s]=parseInt(r.substring(i,i+2),16),i+=2;return n}kt(!1,"invalid BytesLike value",e||"value",r)}function ul(r,e){return xW(r,e,!1)}function lc(r,e){return xW(r,e,!0)}function ty(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}const bB="0123456789abcdef";function Pi(r){const e=ul(r);let t="0x";for(let n=0;n<e.length;n++){const i=e[n];t+=bB[(i&240)>>4]+bB[i&15]}return t}function cd(r){return"0x"+r.map(e=>Pi(e).substring(2)).join("")}function Th(r,e,t){const n=ul(r);return t!=null&&t>n.length&&Un(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:t}),Pi(n.slice(e??0,t??n.length))}function _W(r,e,t){const n=ul(r);Un(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(n,e-n.length):i.set(n,0),Pi(i)}function L1e(r,e){return _W(r,e,!0)}function F1e(r,e){return _W(r,e,!1)}const Cw=BigInt(0),ha=BigInt(1),hC=9007199254740991;function U1e(r,e){const t=Tw(r,"value"),n=BigInt(Iu(e,"width"));if(Un(t>>n===Cw,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),t>>n-ha){const i=(ha<<n)-ha;return-((~t&i)+ha)}return t}function z1e(r,e){let t=lp(r,"value");const n=BigInt(Iu(e,"width")),i=ha<<n-ha;if(t<Cw){t=-t,Un(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const s=(ha<<n)-ha;return(~t&s)+ha}else Un(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return t}function ry(r,e){const t=Tw(r,"value"),n=BigInt(Iu(e,"bits"));return t&(ha<<n)-ha}function lp(r,e){switch(typeof r){case"bigint":return r;case"number":return kt(Number.isInteger(r),"underflow",e||"value",r),kt(r>=-9007199254740991&&r<=hC,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){kt(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}kt(!1,"invalid BigNumberish value",e||"value",r)}function Tw(r,e){const t=lp(r,e);return Un(t>=Cw,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}const wB="0123456789abcdef";function SW(r){if(r instanceof Uint8Array){let e="0x0";for(const t of r)e+=wB[t>>4],e+=wB[t&15];return BigInt(e)}return lp(r)}function Iu(r,e){switch(typeof r){case"bigint":return kt(r>=-9007199254740991&&r<=hC,"overflow",e||"value",r),Number(r);case"number":return kt(Number.isInteger(r),"underflow",e||"value",r),kt(r>=-9007199254740991&&r<=hC,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return Iu(BigInt(r),e)}catch(t){kt(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}kt(!1,"invalid numeric value",e||"value",r)}function q1e(r){return Iu(SW(r))}function EW(r,e){let n=Tw(r,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const i=Iu(e,"width");for(Un(i*2>=n.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<i*2;)n="0"+n}return"0x"+n}function j1e(r){const e=Tw(r,"value");if(e===Cw)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const n=new Uint8Array(t.length/2);for(let i=0;i<n.length;i++){const s=i*2;n[i]=parseInt(t.substring(s,s+2),16)}return n}function V1e(r,e,t,n,i){kt(!1,`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function AW(r,e,t,n,i){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return r==="OVERRUN"?t.length-e-1:0}function K1e(r,e,t,n,i){return r==="OVERLONG"?(kt(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),AW(r,e,t))}const H1e=Object.freeze({error:V1e,ignore:AW,replace:K1e});function W1e(r,e){e==null&&(e=H1e.error);const t=ul(r,"bytes"),n=[];let i=0;for(;i<t.length;){const s=t[i++];if(s>>7===0){n.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,n):i+=e("BAD_PREFIX",i-1,t,n);continue}if(i-1+o>=t.length){i+=e("OVERRUN",i-1,t,n);continue}let c=s&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=t[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,t,n),c=null;break}c=c<<6|u&63,i++}if(c!==null){if(c>1114111){i+=e("OUT_OF_RANGE",i-1-o,t,n,c);continue}if(c>=55296&&c<=57343){i+=e("UTF16_SURROGATE",i-1-o,t,n,c);continue}if(c<=a){i+=e("OVERLONG",i-1-o,t,n,c);continue}n.push(c)}}return n}function IW(r,e){kt(typeof r=="string","invalid string value","str",r);let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);kt(n<r.length&&(s&64512)===56320,"invalid surrogate pair","str",r);const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function G1e(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Y1e(r,e){return G1e(W1e(r,e))}const vs=32,dC=new Uint8Array(vs),X1e=["then"],ny={},CW=new WeakMap;function Qu(r){return CW.get(r)}function xB(r,e){CW.set(r,e)}function Jp(r,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw t.error=e,t}function pC(r,e,t){return r.indexOf(null)>=0?e.map((n,i)=>n instanceof Xc?pC(Qu(n),n,t):n):r.reduce((n,i,s)=>{let o=e.getValue(i);return i in n||(t&&o instanceof Xc&&(o=pC(Qu(o),o,t)),n[i]=o),n},{})}class Xc extends Array{#e;constructor(...e){const t=e[0];let n=e[1],i=(e[2]||[]).slice(),s=!0;t!==ny&&(n=e,i=[],s=!1),super(n.length),n.forEach((c,l)=>{this[l]=c});const o=i.reduce((c,l)=>(typeof l=="string"&&c.set(l,(c.get(l)||0)+1),c),new Map);if(xB(this,Object.freeze(n.map((c,l)=>{const u=i[l];return u!=null&&o.get(u)===1?u:null}))),this.#e=[],this.#e==null&&this.#e,!s)return;Object.freeze(this);const a=new Proxy(this,{get:(c,l,u)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const h=Iu(l,"%index");if(h<0||h>=this.length)throw new RangeError("out of result range");const d=c[h];return d instanceof Error&&Jp(`index ${h}`,d),d}if(X1e.indexOf(l)>=0)return Reflect.get(c,l,u);const f=c[l];if(f instanceof Function)return function(...h){return f.apply(this===u?c:this,h)};if(!(l in c))return c.getValue.apply(this===u?c:this,[l])}return Reflect.get(c,l,u)}});return xB(a,Qu(this)),a}toArray(e){const t=[];return this.forEach((n,i)=>{n instanceof Error&&Jp(`index ${i}`,n),e&&n instanceof Xc&&(n=n.toArray(e)),t.push(n)}),t}toObject(e){const t=Qu(this);return t.reduce((n,i,s)=>(Un(i!=null,`value at index ${s} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),pC(t,this,e)),{})}slice(e,t){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),t==null&&(t=this.length),t<0&&(t+=this.length,t<0&&(t=0)),t>this.length&&(t=this.length);const n=Qu(this),i=[],s=[];for(let o=e;o<t;o++)i.push(this[o]),s.push(n[o]);return new Xc(ny,i,s)}filter(e,t){const n=Qu(this),i=[],s=[];for(let o=0;o<this.length;o++){const a=this[o];a instanceof Error&&Jp(`index ${o}`,a),e.call(t,a,o,this)&&(i.push(a),s.push(n[o]))}return new Xc(ny,i,s)}map(e,t){const n=[];for(let i=0;i<this.length;i++){const s=this[i];s instanceof Error&&Jp(`index ${i}`,s),n.push(e.call(t,s,i,this))}return n}getValue(e){const t=Qu(this).indexOf(e);if(t===-1)return;const n=this[t];return n instanceof Error&&Jp(`property ${JSON.stringify(e)}`,n.error),n}static fromItems(e,t){return new Xc(ny,e,t)}}function _B(r){let e=j1e(r);return Un(e.length<=vs,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:vs,offset:e.length}),e.length!==vs&&(e=lc(cd([dC.slice(e.length%vs),e]))),e}class _l{name;type;localName;dynamic;constructor(e,t,n,i){Sn(this,{name:e,type:t,localName:n,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){kt(!1,e,this.localName,t)}}class gC{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return cd(this.#e)}get length(){return this.#t}#r(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#r(lc(e.data))}writeBytes(e){let t=lc(e);const n=t.length%vs;return n&&(t=lc(cd([t,dC.slice(n)]))),this.#r(t)}writeValue(e){return this.#r(_B(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(dC),this.#t+=vs,t=>{this.#e[e]=_B(t)}}}class uk{allowLoose;#e;#t;#r;#n;#i;constructor(e,t,n){Sn(this,{allowLoose:!!t}),this.#e=lc(e),this.#r=0,this.#n=null,this.#i=n??1024,this.#t=0}get data(){return Pi(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#o(e){if(this.#n)return this.#n.#o(e);this.#r+=e,Un(this.#i<1||this.#r<=this.#i*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#i} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:lc(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#r,dataLength:this.dataLength}})}#a(e,t,n){let i=Math.ceil(t/vs)*vs;return this.#t+i>this.#e.length&&(this.allowLoose&&n&&this.#t+t<=this.#e.length?i=t:Un(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:lc(this.#e),length:this.#e.length,offset:this.#t+i})),this.#e.slice(this.#t,this.#t+i)}subReader(e){const t=new uk(this.#e.slice(this.#t+e),this.allowLoose,this.#i);return t.#n=this,t}readBytes(e,t){let n=this.#a(0,e,!!t);return this.#o(e),this.#t+=n.length,n.slice(0,e)}readValue(){return SW(this.readBytes(vs))}readIndex(){return q1e(this.readBytes(vs))}}function SB(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function TW(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function EB(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function J1e(r,e){TW(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Q1e=r=>r instanceof Uint8Array,Z1e=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),exe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!exe)throw new Error("Non little-endian hardware is not supported");function txe(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function RW(r){if(typeof r=="string"&&(r=txe(r)),!Q1e(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}let rxe=class{clone(){return this._cloneInto()}};function nxe(r){const e=n=>r().update(RW(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}const iy=BigInt(2**32-1),AB=BigInt(32);function ixe(r,e=!1){return e?{h:Number(r&iy),l:Number(r>>AB&iy)}:{h:Number(r>>AB&iy)|0,l:Number(r&iy)|0}}function sxe(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:o}=ixe(r[i],e);[t[i],n[i]]=[s,o]}return[t,n]}const oxe=(r,e,t)=>r<<t|e>>>32-t,axe=(r,e,t)=>e<<t|r>>>32-t,cxe=(r,e,t)=>e<<t-32|r>>>64-t,lxe=(r,e,t)=>r<<t-32|e>>>64-t,[kW,PW,OW]=[[],[],[]],uxe=BigInt(0),Qp=BigInt(1),fxe=BigInt(2),hxe=BigInt(7),dxe=BigInt(256),pxe=BigInt(113);for(let r=0,e=Qp,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],kW.push(2*(5*n+t)),PW.push((r+1)*(r+2)/2%64);let i=uxe;for(let s=0;s<7;s++)e=(e<<Qp^(e>>hxe)*pxe)%dxe,e&fxe&&(i^=Qp<<(Qp<<BigInt(s))-Qp);OW.push(i)}const[gxe,mxe]=sxe(OW,!0),IB=(r,e,t)=>t>32?cxe(r,e,t):oxe(r,e,t),CB=(r,e,t)=>t>32?lxe(r,e,t):axe(r,e,t);function yxe(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],f=IB(l,u,1)^t[a],h=CB(l,u,1)^t[a+1];for(let d=0;d<50;d+=10)r[o+d]^=f,r[o+d+1]^=h}let i=r[2],s=r[3];for(let o=0;o<24;o++){const a=PW[o],c=IB(i,s,a),l=CB(i,s,a),u=kW[o];i=r[u],s=r[u+1],r[u]=c,r[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=gxe[n],r[1]^=mxe[n]}t.fill(0)}class fk extends rxe{constructor(e,t,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,SB(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Z1e(this.state)}keccak(){yxe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){EB(this);const{blockLen:t,state:n}=this;e=RW(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,(t&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){EB(this,!1),TW(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return SB(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(J1e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new fk(t,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const vxe=(r,e,t)=>nxe(()=>new fk(e,r,t)),bxe=vxe(1,136,256/8);let DW=!1;const $W=function(r){return bxe(r)};let MW=$W;function _u(r){const e=ul(r,"data");return Pi(MW(e))}_u._=$W;_u.lock=function(){DW=!0};_u.register=function(r){if(DW)throw new TypeError("keccak256 is locked");MW=r};Object.freeze(_u);const wxe=BigInt(0),xxe=BigInt(36);function TB(r){r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=ul(_u(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const hk={};for(let r=0;r<10;r++)hk[String(r)]=String(r);for(let r=0;r<26;r++)hk[String.fromCharCode(65+r)]=String(10+r);const RB=15;function _xe(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>hk[n]).join("");for(;e.length>=RB;){let n=e.substring(0,RB);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const Sxe=function(){const r={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];r[t]=BigInt(e)}return r}();function Exe(r){r=r.toLowerCase();let e=wxe;for(let t=0;t<r.length;t++)e=e*xxe+Sxe[r[t]];return e}function jv(r){if(kt(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const e=TB(r);return kt(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===r,"bad address checksum","address",r),e}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){kt(r.substring(2,4)===_xe(r),"bad icap checksum","address",r);let e=Exe(r.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return TB("0x"+e)}kt(!1,"invalid address","address",r)}const Fc={};function Rt(r,e){let t=!1;return e<0&&(t=!0,e*=-1),new ti(Fc,`${t?"":"u"}int${e}`,r,{signed:t,width:e})}function Hr(r,e){return new ti(Fc,`bytes${e||""}`,r,{size:e})}const kB=Symbol.for("_ethers_typed");class ti{type;value;#e;_typedSymbol;constructor(e,t,n,i){i==null&&(i=null),lk(Fc,e,"Typed"),Sn(this,{_typedSymbol:kB,type:t,value:n}),this.#e=i,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,t){return new ti(Fc,e,t)}static uint8(e){return Rt(e,8)}static uint16(e){return Rt(e,16)}static uint24(e){return Rt(e,24)}static uint32(e){return Rt(e,32)}static uint40(e){return Rt(e,40)}static uint48(e){return Rt(e,48)}static uint56(e){return Rt(e,56)}static uint64(e){return Rt(e,64)}static uint72(e){return Rt(e,72)}static uint80(e){return Rt(e,80)}static uint88(e){return Rt(e,88)}static uint96(e){return Rt(e,96)}static uint104(e){return Rt(e,104)}static uint112(e){return Rt(e,112)}static uint120(e){return Rt(e,120)}static uint128(e){return Rt(e,128)}static uint136(e){return Rt(e,136)}static uint144(e){return Rt(e,144)}static uint152(e){return Rt(e,152)}static uint160(e){return Rt(e,160)}static uint168(e){return Rt(e,168)}static uint176(e){return Rt(e,176)}static uint184(e){return Rt(e,184)}static uint192(e){return Rt(e,192)}static uint200(e){return Rt(e,200)}static uint208(e){return Rt(e,208)}static uint216(e){return Rt(e,216)}static uint224(e){return Rt(e,224)}static uint232(e){return Rt(e,232)}static uint240(e){return Rt(e,240)}static uint248(e){return Rt(e,248)}static uint256(e){return Rt(e,256)}static uint(e){return Rt(e,256)}static int8(e){return Rt(e,-8)}static int16(e){return Rt(e,-16)}static int24(e){return Rt(e,-24)}static int32(e){return Rt(e,-32)}static int40(e){return Rt(e,-40)}static int48(e){return Rt(e,-48)}static int56(e){return Rt(e,-56)}static int64(e){return Rt(e,-64)}static int72(e){return Rt(e,-72)}static int80(e){return Rt(e,-80)}static int88(e){return Rt(e,-88)}static int96(e){return Rt(e,-96)}static int104(e){return Rt(e,-104)}static int112(e){return Rt(e,-112)}static int120(e){return Rt(e,-120)}static int128(e){return Rt(e,-128)}static int136(e){return Rt(e,-136)}static int144(e){return Rt(e,-144)}static int152(e){return Rt(e,-152)}static int160(e){return Rt(e,-160)}static int168(e){return Rt(e,-168)}static int176(e){return Rt(e,-176)}static int184(e){return Rt(e,-184)}static int192(e){return Rt(e,-192)}static int200(e){return Rt(e,-200)}static int208(e){return Rt(e,-208)}static int216(e){return Rt(e,-216)}static int224(e){return Rt(e,-224)}static int232(e){return Rt(e,-232)}static int240(e){return Rt(e,-240)}static int248(e){return Rt(e,-248)}static int256(e){return Rt(e,-256)}static int(e){return Rt(e,-256)}static bytes1(e){return Hr(e,1)}static bytes2(e){return Hr(e,2)}static bytes3(e){return Hr(e,3)}static bytes4(e){return Hr(e,4)}static bytes5(e){return Hr(e,5)}static bytes6(e){return Hr(e,6)}static bytes7(e){return Hr(e,7)}static bytes8(e){return Hr(e,8)}static bytes9(e){return Hr(e,9)}static bytes10(e){return Hr(e,10)}static bytes11(e){return Hr(e,11)}static bytes12(e){return Hr(e,12)}static bytes13(e){return Hr(e,13)}static bytes14(e){return Hr(e,14)}static bytes15(e){return Hr(e,15)}static bytes16(e){return Hr(e,16)}static bytes17(e){return Hr(e,17)}static bytes18(e){return Hr(e,18)}static bytes19(e){return Hr(e,19)}static bytes20(e){return Hr(e,20)}static bytes21(e){return Hr(e,21)}static bytes22(e){return Hr(e,22)}static bytes23(e){return Hr(e,23)}static bytes24(e){return Hr(e,24)}static bytes25(e){return Hr(e,25)}static bytes26(e){return Hr(e,26)}static bytes27(e){return Hr(e,27)}static bytes28(e){return Hr(e,28)}static bytes29(e){return Hr(e,29)}static bytes30(e){return Hr(e,30)}static bytes31(e){return Hr(e,31)}static bytes32(e){return Hr(e,32)}static address(e){return new ti(Fc,"address",e)}static bool(e){return new ti(Fc,"bool",!!e)}static bytes(e){return new ti(Fc,"bytes",e)}static string(e){return new ti(Fc,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new ti(Fc,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===kB}static dereference(e,t){if(ti.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class Axe extends _l{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=ti.dereference(t,"string");try{n=jv(n)}catch(i){return this._throwError(i.message,t)}return e.writeValue(n)}decode(e){return jv(EW(e.readValue(),20))}}class Ixe extends _l{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function BW(r,e,t){let n=[];if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let c={};n=e.map(l=>{const u=l.localName;return Un(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),Un(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),c[u]=!0,t[u]})}else kt(!1,"invalid tuple value","tuple",t);kt(e.length===n.length,"types/value length mismatch","tuple",t);let i=new gC,s=new gC,o=[];e.forEach((c,l)=>{let u=n[l];if(c.dynamic){let f=s.length;c.encode(s,u);let h=i.writeUpdatableValue();o.push(d=>{h(d+f)})}else c.encode(i,u)}),o.forEach(c=>{c(i.length)});let a=r.appendWriter(i);return a+=r.appendWriter(s),a}function NW(r,e){let t=[],n=[],i=r.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=r.readIndex(),c=i.subReader(a);try{o=s.decode(c)}catch(l){if(vB(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(r)}catch(a){if(vB(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");t.push(o),n.push(s.localName||null)}),Xc.fromItems(t,n)}class Cxe extends _l{coder;length;constructor(e,t,n){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,n,s),Sn(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){const n=ti.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);let i=this.length;i===-1&&(i=n.length,e.writeValue(n.length)),wW(n.length,i,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let o=0;o<n.length;o++)s.push(this.coder);return BW(e,s,n)}decode(e){let t=this.length;t===-1&&(t=e.readIndex(),Un(t*vs<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*vs,length:e.dataLength}));let n=[];for(let i=0;i<t;i++)n.push(new Ixe(this.coder));return NW(e,n)}}class Txe extends _l{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=ti.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class LW extends _l{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=lc(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class Rxe extends LW{constructor(e){super("bytes",e)}decode(e){return Pi(super.decode(e))}}class kxe extends _l{size;constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),Sn(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let n=lc(ti.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return Pi(e.readBytes(this.size))}}const Pxe=new Uint8Array([]);class Oxe extends _l{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(Pxe)}decode(e){return e.readBytes(0),null}}const Dxe=BigInt(0),$xe=BigInt(1),Mxe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Bxe extends _l{size;signed;constructor(e,t,n){const i=(t?"int":"uint")+e*8;super(i,i,n,!1),Sn(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let n=lp(ti.dereference(t,this.type)),i=ry(Mxe,vs*8);if(this.signed){let s=ry(i,this.size*8-1);(n>s||n<-(s+$xe))&&this._throwError("value out-of-bounds",t),n=z1e(n,8*vs)}else(n<Dxe||n>ry(i,this.size*8))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}decode(e){let t=ry(e.readValue(),this.size*8);return this.signed&&(t=U1e(t,this.size*8)),t}}class Nxe extends LW{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,IW(ti.dereference(t,"string")))}decode(e){return Y1e(super.decode(e))}}class sy extends _l{coders;constructor(e,t){let n=!1;const i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,n),Sn(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const t=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){const n=ti.dereference(t,"tuple");return BW(e,this.coders,n)}decode(e){return NW(e,this.coders)}}function xg(r){return _u(IW(r))}function bs(r){const e=new Set;return r.forEach(t=>e.add(t)),Object.freeze(e)}const Lxe="external public payable override",Fxe=bs(Lxe.split(" ")),FW="constant external internal payable private public pure view override",Uxe=bs(FW.split(" ")),UW="constructor error event fallback function receive struct",zW=bs(UW.split(" ")),qW="calldata memory storage payable indexed",zxe=bs(qW.split(" ")),qxe="tuple returns",jxe=[UW,qW,qxe,FW].join(" "),Vxe=bs(jxe.split(" ")),Kxe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Hxe=new RegExp("^(\\s*)"),Wxe=new RegExp("^([0-9]+)"),Gxe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),jW=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),VW=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Qo{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new Qo(this.#t)}reset(){this.#e=0}#r(e=0,t=0){return new Qo(this.#t.slice(e,t).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=this.#r(this.#e+1,e.match+1);return this.#e=e.match+1,t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;this.#e<e.match-1;){const n=this.peek().linkNext;t.push(this.#r(this.#e+1,n)),this.#e=n}return this.#e=e.match+1,t}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let t=this.#e;t<this.#t.length;t++){const n=this.#t[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}}function Cu(r){const e=[],t=o=>{const a=s<r.length?JSON.stringify(r[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let n=[],i=[],s=0;for(;s<r.length;){let o=r.substring(s),a=o.match(Hxe);a&&(s+=a[1].length,o=r.substring(s));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(c);let l=Kxe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],s++,l==="OPEN_PAREN")n.push(e.length-1),i.push(e.length-1);else if(l=="CLOSE_PAREN")n.length===0&&t("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;u=f+u,e[e.length-1].value=Iu(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(Gxe),a){if(c.text=a[1],s+=c.text.length,Vxe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(VW)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(Wxe),a){c.text=a[1],c.type="NUMBER",s+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new Qo(e.map(o=>Object.freeze(o)))}function PB(r,e){let t=[];for(const n in e.keys())r.has(n)&&t.push(n);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function Rw(r,e){if(e.peekKeyword(zW)){const t=e.pop().text;if(t!==r)throw new Error(`expected ${r}, got ${t}`)}return e.popType("ID")}function fl(r,e){const t=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(r.pop(),t.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);t.add(n)}return Object.freeze(t)}function KW(r){let e=fl(r,Uxe);return PB(e,bs("constant payable nonpayable".split(" "))),PB(e,bs("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function nl(r,e){return r.popParams().map(t=>hn.from(t,e))}function HW(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return lp(r.pop().text);throw new Error("invalid gas")}return null}function kf(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const Yxe=new RegExp(/^(.*)\[([0-9]*)\]$/);function OB(r){const e=r.match(VW);if(kt(e,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(e[2]){const t=parseInt(e[2]);kt(t!==0&&t<=32,"invalid bytes length","type",r)}else if(e[3]){const t=parseInt(e[3]);kt(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",r)}return r}const Cn={},Ks=Symbol.for("_ethers_internal"),DB="_ParamTypeInternal",$B="_ErrorInternal",MB="_EventInternal",BB="_ConstructorInternal",NB="_FallbackInternal",LB="_FunctionInternal",FB="_StructInternal";class hn{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,n,i,s,o,a,c){if(lk(e,Cn,"ParamType"),Object.defineProperty(this,Ks,{value:DB}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Sn(this,{name:t,type:n,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=n,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(i=>n.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((i,s)=>n.components[s].walk(i,t))}return t(this.type,e)}#e(e,t,n,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=t.slice();a.forEach((c,l)=>{o.#e(e,c,n,u=>{a[l]=u})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in t))throw new Error(`missing value for component ${c.name}`);return t[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{o[l].#e(e,c,n,u=>{a[l]=u})}),i(a);return}const s=n(this.type,t);s.then?e.push(async function(){i(await s)}()):i(s)}async walkAsync(e,t){const n=[],i=[e];return this.#e(n,e,t,s=>{i[0]=s}),n.length&&await Promise.all(n),i[0]}static from(e,t){if(hn.isParamType(e))return e;if(typeof e=="string")try{return hn.from(Cu(e),t)}catch{kt(!1,"invalid param type","obj",e)}else if(e instanceof Qo){let a="",c="",l=null;fl(e,bs(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(p=>hn.from(p)),a=`tuple(${l.map(p=>p.format()).join(",")})`):(a=OB(e.popType("TYPE")),c=a);let u=null,f=null;for(;e.length&&e.peekType("BRACKET");){const p=e.pop();u=new hn(Cn,"",a,c,null,l,f,u),f=p.value,a+=p.text,c="array",l=null}let h=null;if(fl(e,zxe).has("indexed")){if(!t)throw new Error("");h=!0}const g=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new hn(Cn,g,a,c,h,l,f,u)}const n=e.name;kt(!n||typeof n=="string"&&n.match(jW),"invalid name","obj.name",n);let i=e.indexed;i!=null&&(kt(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(Yxe);if(o){const a=parseInt(o[2]||"-1"),c=hn.from({type:o[1],components:e.components});return new hn(Cn,n||"",s,"array",i,null,a,c)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(l=>hn.from(l)):null;return new hn(Cn,n||"",s,"tuple",i,a,null,null)}return s=OB(e.type),new hn(Cn,n||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[Ks]===DB}}class Pf{type;inputs;constructor(e,t,n){lk(e,Cn,"Fragment"),n=Object.freeze(n.slice()),Sn(this,{type:t,inputs:n})}static from(e){if(typeof e=="string"){try{Pf.from(JSON.parse(e))}catch{}return Pf.from(Cu(e))}if(e instanceof Qo)switch(e.peekKeyword(zW)){case"constructor":return Jc.from(e);case"error":return Ds.from(e);case"event":return ic.from(e);case"fallback":case"receive":return qc.from(e);case"function":return sc.from(e);case"struct":return yf.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Jc.from(e);case"error":return Ds.from(e);case"event":return ic.from(e);case"fallback":case"receive":return qc.from(e);case"function":return sc.from(e);case"struct":return yf.from(e)}Un(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}kt(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Jc.isFragment(e)}static isError(e){return Ds.isFragment(e)}static isEvent(e){return ic.isFragment(e)}static isFunction(e){return sc.isFragment(e)}static isStruct(e){return yf.isFragment(e)}}class kw extends Pf{name;constructor(e,t,n,i){super(e,t,i),kt(typeof n=="string"&&n.match(jW),"invalid identifier","name",n),i=Object.freeze(i.slice()),Sn(this,{name:n})}}function _g(r,e){return"("+e.map(t=>t.format(r)).join(r==="full"?", ":",")+")"}class Ds extends kw{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,Ks,{value:$B})}get selector(){return xg(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+_g(e,this.inputs)),t.join(" ")}static from(e){if(Ds.isFragment(e))return e;if(typeof e=="string")return Ds.from(Cu(e));if(e instanceof Qo){const t=Rw("error",e),n=nl(e);return kf(e),new Ds(Cn,t,n)}return new Ds(Cn,e.name,e.inputs?e.inputs.map(hn.from):[])}static isFragment(e){return e&&e[Ks]===$B}}class ic extends kw{anonymous;constructor(e,t,n,i){super(e,"event",t,n),Object.defineProperty(this,Ks,{value:MB}),Sn(this,{anonymous:i})}get topicHash(){return xg(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("event"),t.push(this.name+_g(e,this.inputs)),e!=="sighash"&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map(i=>hn.from(i)),new ic(Cn,e,t,!1).topicHash}static from(e){if(ic.isFragment(e))return e;if(typeof e=="string")try{return ic.from(Cu(e))}catch{kt(!1,"invalid event fragment","obj",e)}else if(e instanceof Qo){const t=Rw("event",e),n=nl(e,!0),i=!!fl(e,bs(["anonymous"])).has("anonymous");return kf(e),new ic(Cn,t,n,i)}return new ic(Cn,e.name,e.inputs?e.inputs.map(t=>hn.from(t,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[Ks]===MB}}class Jc extends Pf{payable;gas;constructor(e,t,n,i,s){super(e,t,n),Object.defineProperty(this,Ks,{value:BB}),Sn(this,{payable:i,gas:s})}format(e){if(Un(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[`constructor${_g(e,this.inputs)}`];return this.payable&&t.push("payable"),this.gas!=null&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(Jc.isFragment(e))return e;if(typeof e=="string")try{return Jc.from(Cu(e))}catch{kt(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Qo){fl(e,bs(["constructor"]));const t=nl(e),n=!!fl(e,Fxe).has("payable"),i=HW(e);return kf(e),new Jc(Cn,"constructor",t,n,i)}return new Jc(Cn,"constructor",e.inputs?e.inputs.map(hn.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Ks]===BB}}class qc extends Pf{payable;constructor(e,t,n){super(e,"fallback",t),Object.defineProperty(this,Ks,{value:NB}),Sn(this,{payable:n})}format(e){const t=this.inputs.length===0?"receive":"fallback";if(e==="json"){const n=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:n})}return`${t}()${this.payable?" payable":""}`}static from(e){if(qc.isFragment(e))return e;if(typeof e=="string")try{return qc.from(Cu(e))}catch{kt(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Qo){const t=e.toString(),n=e.peekKeyword(bs(["fallback","receive"]));if(kt(n,"type must be fallback or receive","obj",t),e.popKeyword(bs(["fallback","receive"]))==="receive"){const a=nl(e);return kt(a.length===0,"receive cannot have arguments","obj.inputs",a),fl(e,bs(["payable"])),kf(e),new qc(Cn,[],!0)}let s=nl(e);s.length?kt(s.length===1&&s[0].type==="bytes","invalid fallback inputs","obj.inputs",s.map(a=>a.format("minimal")).join(", ")):s=[hn.from("bytes")];const o=KW(e);if(kt(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),fl(e,bs(["returns"])).has("returns")){const a=nl(e);kt(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(c=>c.format("minimal")).join(", "))}return kf(e),new qc(Cn,s,o==="payable")}if(e.type==="receive")return new qc(Cn,[],!0);if(e.type==="fallback"){const t=[hn.from("bytes")],n=e.stateMutability==="payable";return new qc(Cn,t,n)}kt(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[Ks]===NB}}class sc extends kw{constant;outputs;stateMutability;payable;gas;constructor(e,t,n,i,s,o){super(e,"function",t,i),Object.defineProperty(this,Ks,{value:LB}),s=Object.freeze(s.slice()),Sn(this,{constant:n==="view"||n==="pure",gas:o,outputs:s,payable:n==="payable",stateMutability:n})}get selector(){return xg(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("function"),t.push(this.name+_g(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(_g(e,this.outputs))),this.gas!=null&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map(i=>hn.from(i)),new sc(Cn,e,"view",t,[],null).selector}static from(e){if(sc.isFragment(e))return e;if(typeof e=="string")try{return sc.from(Cu(e))}catch{kt(!1,"invalid function fragment","obj",e)}else if(e instanceof Qo){const n=Rw("function",e),i=nl(e),s=KW(e);let o=[];fl(e,bs(["returns"])).has("returns")&&(o=nl(e));const a=HW(e);return kf(e),new sc(Cn,n,s,i,o,a)}let t=e.stateMutability;return t==null&&(t="payable",typeof e.constant=="boolean"?(t="view",e.constant||(t="payable",typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable")),new sc(Cn,e.name,t,e.inputs?e.inputs.map(hn.from):[],e.outputs?e.outputs.map(hn.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Ks]===LB}}class yf extends kw{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,Ks,{value:FB})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return yf.from(Cu(e))}catch{kt(!1,"invalid struct fragment","obj",e)}else if(e instanceof Qo){const t=Rw("struct",e),n=nl(e);return kf(e),new yf(Cn,t,n)}return new yf(Cn,e.name,e.inputs?e.inputs.map(hn.from):[])}static isFragment(e){return e&&e[Ks]===FB}}const Fa=new Map;Fa.set(0,"GENERIC_PANIC");Fa.set(1,"ASSERT_FALSE");Fa.set(17,"OVERFLOW");Fa.set(18,"DIVIDE_BY_ZERO");Fa.set(33,"ENUM_RANGE_ERROR");Fa.set(34,"BAD_STORAGE_DATA");Fa.set(49,"STACK_UNDERFLOW");Fa.set(50,"ARRAY_RANGE_ERROR");Fa.set(65,"OUT_OF_MEMORY");Fa.set(81,"UNINITIALIZED_FUNCTION_CALL");const Xxe=new RegExp(/^bytes([0-9]*)$/),Jxe=new RegExp(/^(u?int)([0-9]*)$/);let XE=null,UB=1024;function Qxe(r,e,t,n){let i="missing revert data",s=null;const o=null;let a=null;if(t){i="execution reverted";const l=ul(t);if(t=Pi(t),l.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(l.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Pi(l.slice(0,4))==="0x08c379a0")try{s=n.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Pi(l.slice(0,4))==="0x4e487b71")try{const u=Number(n.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${Fa.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const c={to:e.to?jv(e.to):null,data:e.data||"0x"};return e.from&&(c.from=jv(e.from)),bW(i,"CALL_EXCEPTION",{action:r,data:t,reason:s,transaction:c,invocation:o,revert:a})}class Pd{#e(e){if(e.isArray())return new Cxe(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new sy(e.components.map(n=>this.#e(n)),e.name);switch(e.baseType){case"address":return new Axe(e.name);case"bool":return new Txe(e.name);case"string":return new Nxe(e.name);case"bytes":return new Rxe(e.name);case"":return new Oxe(e.name)}let t=e.type.match(Jxe);if(t){let n=parseInt(t[2]||"256");return kt(n!==0&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new Bxe(n/8,t[1]==="int",e.name)}if(t=e.type.match(Xxe),t){let n=parseInt(t[1]);return kt(n!==0&&n<=32,"invalid bytes length","param",e),new kxe(n,e.name)}kt(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map(i=>this.#e(hn.from(i)));return new sy(t,"_").defaultValue()}encode(e,t){wW(t.length,e.length,"types/values length mismatch");const n=e.map(o=>this.#e(hn.from(o))),i=new sy(n,"_"),s=new gC;return i.encode(s,t),s.data}decode(e,t,n){const i=e.map(o=>this.#e(hn.from(o)));return new sy(i,"_").decode(new uk(t,n,UB))}static _setDefaultMaxInflation(e){kt(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),UB=e}static defaultAbiCoder(){return XE==null&&(XE=new Pd),XE}static getBuiltinCallException(e,t,n){return Qxe(e,t,n,Pd.defaultAbiCoder())}}class Zxe{fragment;name;signature;topic;args;constructor(e,t,n){const i=e.name,s=e.format();Sn(this,{fragment:e,name:i,signature:s,topic:t,args:n})}}class e_e{fragment;name;args;signature;selector;value;constructor(e,t,n,i){const s=e.name,o=e.format();Sn(this,{fragment:e,name:s,args:n,signature:o,selector:t,value:i})}}class t_e{fragment;name;args;signature;selector;constructor(e,t,n){const i=e.name,s=e.format();Sn(this,{fragment:e,name:i,args:n,signature:s,selector:t})}}class zB{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){Sn(this,{hash:e,_isIndexed:!0})}}const qB={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},jB={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let e="unknown panic code";return r>=0&&r<=255&&qB[r.toString()]&&(e=qB[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${e})`}}};class Hl{fragments;deploy;fallback;receive;#e;#t;#r;#n;constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,this.#r=new Map,this.#e=new Map,this.#t=new Map;const n=[];for(const o of t)try{n.push(Pf.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Sn(this,{fragments:Object.freeze(n)});let i=null,s=!1;this.#n=this.getAbiCoder(),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Sn(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(kt(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":c=this.#r;break;case"event":c=this.#t;break;case"error":c=this.#e;break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||Sn(this,{deploy:Jc.from("constructor()")}),Sn(this,{fallback:i,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return Pd.defaultAbiCoder()}#i(e,t,n){if(ty(e)){const s=e.toLowerCase();for(const o of this.#r.values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of this.#r)o.split("(")[0]===e&&s.push(a);if(t){const o=t.length>0?t[t.length-1]:null;let a=t.length,c=!0;ti.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=s.length-1;l>=0;l--){const u=s[l].inputs.length;u!==a&&(!c||u!==a-1)&&s.splice(l,1)}for(let l=s.length-1;l>=0;l--){const u=s[l].inputs;for(let f=0;f<t.length;f++)if(ti.isTyped(t[f])){if(f>=u.length){if(t[f].type==="overrides")continue;s.splice(l,1);break}if(t[f].type!==u[f].baseType){s.splice(l,1);break}}}}if(s.length===1&&t&&t.length!==s[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&n){const o=s.map(a=>JSON.stringify(a.format())).join(", ");kt(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=this.#r.get(sc.from(e).format());return i||null}getFunctionName(e){const t=this.#i(e,null,!1);return kt(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#i(e,null,!1)}getFunction(e,t){return this.#i(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#r.keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(this.#r.get(i),n)}}#o(e,t,n){if(ty(e)){const s=e.toLowerCase();for(const o of this.#t.values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of this.#t)o.split("(")[0]===e&&s.push(a);if(t){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<t.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let c=0;c<t.length;c++)if(ti.isTyped(t[c])&&t[c].type!==a[c].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&n){const o=s.map(a=>JSON.stringify(a.format())).join(", ");kt(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=this.#t.get(ic.from(e).format());return i||null}getEventName(e){const t=this.#o(e,null,!1);return kt(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,t){return this.#o(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#t.keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(this.#t.get(i),n)}}getError(e,t){if(ty(e)){const i=e.toLowerCase();if(jB[i])return Ds.from(jB[i].signature);for(const s of this.#e.values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of this.#e)s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?Ds.from("error Error(string)"):e==="Panic"?Ds.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");kt(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=Ds.from(e).format(),e==="Error(string)")return Ds.from("error Error(string)");if(e==="Panic(uint256)")return Ds.from("error Panic(uint256)");const n=this.#e.get(e);return n||null}forEachError(e){const t=Array.from(this.#e.keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(this.#e.get(i),n)}}_decodeParams(e,t){return this.#n.decode(e,t)}_encodeParams(e,t){return this.#n.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);kt(n,"unknown error","fragment",e),e=n}return kt(Th(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Th(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);kt(n,"unknown error","fragment",e),e=n}return cd([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);kt(n,"unknown function","fragment",e),e=n}return kt(Th(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Th(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);kt(n,"unknown function","fragment",e),e=n}return cd([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);kt(s,"unknown function","fragment",e),e=s}let n="invalid length for result data";const i=lc(t);if(i.length%32===0)try{return this.#n.decode(e.outputs,i)}catch{n="could not decode result data"}Un(!1,n,"BAD_DATA",{value:Pi(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=ul(e,"data"),i=Pd.getBuiltinCallException("call",t,n);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=Pi(n.slice(0,4)),c=this.getError(a);if(c)try{const l=this.#n.decode(c.inputs,n.slice(4));i.revert={name:c.name,signature:c.format(),args:l},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const n=this.getFunction(e);kt(n,"unknown function","fragment",e),e=n}return Pi(this.#n.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const s=this.getEvent(e);kt(s,"unknown event","eventFragment",e),e=s}Un(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const i=(s,o)=>s.type==="string"?xg(o):s.type==="bytes"?_u(Pi(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=EW(o):s.type.match(/^bytes/)?o=F1e(o,32):s.type==="address"&&this.#n.encode(["address"],[o]),L1e(Pi(o),32));for(t.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){kt(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?kt(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(c=>i(a,c))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);kt(o,"unknown event","eventFragment",e),e=o}const n=[],i=[],s=[];return e.anonymous||n.push(e.topicHash),kt(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const c=t[a];if(o.indexed)if(o.type==="string")n.push(xg(c));else if(o.type==="bytes")n.push(_u(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this.#n.encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:this.#n.encode(i,s),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"){const d=this.getEvent(e);kt(d,"unknown event","eventFragment",e),e=d}if(n!=null&&!e.anonymous){const d=e.topicHash;kt(ty(n[0],32)&&n[0].toLowerCase()===d,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((d,g)=>{d.indexed?d.type==="string"||d.type==="bytes"||d.baseType==="tuple"||d.baseType==="array"?(i.push(hn.from({type:"bytes32",name:d.name})),o.push(!0)):(i.push(d),o.push(!1)):(s.push(d),o.push(!1))});const a=n!=null?this.#n.decode(i,cd(n)):null,c=this.#n.decode(s,t,!0),l=[],u=[];let f=0,h=0;return e.inputs.forEach((d,g)=>{let p=null;if(d.indexed)if(a==null)p=new zB(null);else if(o[g])p=new zB(a[h++]);else try{p=a[h++]}catch(m){p=m}else try{p=c[f++]}catch(m){p=m}l.push(p),u.push(d.name||null)}),Xc.fromItems(l,u)}parseTransaction(e){const t=ul(e.data,"tx.data"),n=lp(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(Pi(t.slice(0,4)));if(!i)return null;const s=this.#n.decode(i.inputs,t.slice(4));return new e_e(i,i.selector,s,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Zxe(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Pi(e),n=this.getError(Th(t,0,4));if(!n)return null;const i=this.#n.decode(n.inputs,Th(t,4));return new t_e(n,n.selector,i)}static from(e){return e instanceof Hl?e:typeof e=="string"?new Hl(JSON.parse(e)):typeof e.formatJson=="function"?new Hl(e.formatJson()):typeof e.format=="function"?new Hl(e.format("json")):new Hl(e)}}var r_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},VB=(r,e)=>(t,n)=>e(t,n,r);const n_e=[Ft.EXTERNAL_PLUGIN,Ft.TOKEN];let mC=class{_externalPluginDataSource;_tokenDataSource;constructor(e,t){this._externalPluginDataSource=e,this._tokenDataSource=t}canHandle(e,t){return typeof e=="object"&&e!==null&&"to"in e&&"data"in e&&"selector"in e&&"chainId"in e&&typeof e.chainId=="number"&&li(e.to)&&e.to!=="0x"&&li(e.data)&&e.data!=="0x"&&li(e.selector)&&e.selector!=="0x"&&n_e.every(n=>t.includes(n))}async load(e){const{to:t,data:n,selector:i,chainId:s}=e,o=await this._externalPluginDataSource.getDappInfos({address:t,chainId:s,selector:i});return lr(async({liftEither:a})=>{const c=await a(o);if(!c)return[];const l={type:Ft.EXTERNAL_PLUGIN,payload:c.selectorDetails.serializedData.concat(c.selectorDetails.signature)},u=this.getDecodedCallData(c.abi,c.selectorDetails.method,n);if(u.isLeft())return[{type:Ft.ERROR,error:u.extract()},l];const f=u.extract(),h=c.selectorDetails.erc20OfInterest.map(async d=>this.getTokenPayload(e,d,f));return[...(await Promise.all(h)).map(d=>d.caseOf({Left:g=>({type:Ft.ERROR,error:g}),Right:g=>({type:Ft.TOKEN,payload:g})})),l]}).caseOf({Left:a=>[{type:Ft.ERROR,error:a}],Right:a=>a})}getTokenPayload(e,t,n){const i=this.getAddressFromPath(t,n);return lr(({fromPromise:s})=>s(this._tokenDataSource.getTokenInfosPayload({address:i,chainId:e.chainId})))}getDecodedCallData(e,t,n){try{const i=new Hl(e);return er(i.decodeFunctionData(t,n))}catch{return ut(new Error("[ContextModule] ExternalPluginContextLoader: Unable to parse abi"))}}getAddressFromPath(e,t){let n=t;for(const i of e.split("."))i==="-1"?n=n[n.length-1]:n=n[i];if(!li(n))throw new Error("[ContextModule] ExternalPluginContextLoader: Unable to get address");return n}};mC=r_e([Ct(),VB(0,Ze(Fv.ExternalPluginDataSource)),VB(1,Ze(cc.TokenDataSource))],mC);const i_e=()=>new pn(({bind:r})=>{r(Fv.ExternalPluginDataSource).to(fC),r(Fv.ExternalPluginContextLoader).to(mC)});var s_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},o_e=(r,e)=>(t,n)=>e(t,n,r);let yC=class{constructor(e){this.config=e}async getSetPluginPayload({chainId:e,address:t,selector:n}){try{const i=await ur.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v1/ethereum/${e}/contracts/${t}/plugin-selector/${n}`,headers:{[Ss]:`context-module/${Es.version}`,[Ra]:this.config.originToken}});return i.data.payload?er(i.data.payload):ut(new Error("[ContextModule] HttpNftDataSource: unexpected empty response"))}catch{return ut(new Error("[ContextModule] HttpNftDataSource: Failed to fetch set plugin payload"))}}async getNftInfosPayload({chainId:e,address:t}){try{const n=await ur.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v1/ethereum/${e}/contracts/${t}`,headers:{[Ss]:`context-module/${Es.version}`,[Ra]:this.config.originToken}});return n.data.payload?er(n.data.payload):ut(new Error("[ContextModule] HttpNftDataSource: no nft metadata"))}catch{return ut(new Error("[ContextModule] HttpNftDataSource: Failed to fetch nft informations"))}}};yC=s_e([Ct(),o_e(0,Ze(cs.Config))],yC);var a_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},c_e=(r,e)=>(t,n)=>e(t,n,r);let vC=class{constructor(e){this._dataSource=e}canHandle(e,t){return t===Ft.NFT&&typeof e=="object"&&e!==null&&"chainId"in e&&"address"in e}async loadField(e){return(await this._dataSource.getNftInfosPayload({address:e.address,chainId:e.chainId})).caseOf({Left:t=>({type:Ft.ERROR,error:t}),Right:t=>({type:Ft.NFT,payload:t})})}};vC=a_e([Ct(),c_e(0,Ze(mf.NftDataSource))],vC);var l_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},u_e=(r,e)=>(t,n)=>e(t,n,r),WW=(r=>(r.Approve="0x095ea7b3",r.SetApprovalForAll="0xa22cb465",r.TransferFrom="0x23b872dd",r.SafeTransferFrom="0x42842e0e",r.SafeTransferFromWithData="0xb88d4fde",r))(WW||{}),GW=(r=>(r.SetApprovalForAll="0xa22cb465",r.SafeTransferFrom="0xf242432a",r.SafeBatchTransferFrom="0x2eb2c2d6",r))(GW||{});const f_e=[...Object.values(WW),...Object.values(GW)],h_e=[Ft.PLUGIN,Ft.NFT];let bC=class{_dataSource;constructor(e){this._dataSource=e}canHandle(e,t){return typeof e=="object"&&e!==null&&"to"in e&&"selector"in e&&"chainId"in e&&typeof e.chainId=="number"&&li(e.to)&&e.to!=="0x"&&li(e.selector)&&this.isSelectorSupported(e.selector)&&h_e.every(n=>t.includes(n))}async load(e){const t=[],{to:n,selector:i,chainId:s}=e,o=(await this._dataSource.getSetPluginPayload({chainId:s,address:n,selector:i})).caseOf({Left:c=>({type:Ft.ERROR,error:c}),Right:c=>({type:Ft.PLUGIN,payload:c})});if(o.type===Ft.ERROR)return[o];t.push(o);const a=(await this._dataSource.getNftInfosPayload({chainId:s,address:n})).caseOf({Left:c=>({type:Ft.ERROR,error:c}),Right:c=>({type:Ft.NFT,payload:c})});return a.type===Ft.ERROR?[a]:(t.push(a),t)}isSelectorSupported(e){return Object.values(f_e).includes(e)}};bC=l_e([Ct(),u_e(0,Ze(mf.NftDataSource))],bC);const d_e=()=>new pn(({bind:r})=>{r(mf.NftDataSource).to(yC),r(mf.NftContextLoader).to(bC),r(mf.NftContextFieldLoader).to(vC)});let p_e=class{static keyUsageMap=new Map([[oi.GenuineCheck,1],[oi.ExchangePayload,2],[oi.NftMeta,3],[oi.TrustedName,4],[oi.BackupProvider,5],[oi.ProtectOrchestrator,6],[oi.PluginMeta,7],[oi.CoinMeta,8],[oi.SeedIdAuth,9],[oi.TxSimulationSigner,10],[oi.Calldata,11],[oi.Network,12]]);static mapKeyUsageForFirmware(e){return Object.values(oi).includes(e)?this.keyUsageMap.get(e)??-1:-1}};var g_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},m_e=(r,e)=>(t,n)=>e(t,n,r);let wC=class{constructor(e){this.config=e}async fetchCertificate(e){const t={output:"descriptor",target_device:e.targetDevice,latest:!0,public_key_id:e.keyId,public_key_usage:e.keyUsage};try{const n=await ur.request({method:"GET",url:`${this.config.cal.url}/certificates`,params:t,headers:{[Ss]:`context-module/${Es.version}`}});if(n.status==200&&n.data!==void 0&&n.data.length>0&&this.isValidPkiCertificateResponse(n.data[0],this.config.cal.mode)){const i=uf(Bv.appendSignatureToPayload(n.data[0].descriptor.data,n.data[0].descriptor.signatures[this.config.cal.mode],d1e));if(!i)return ut(Error("[ContextModule] HttpPkiCertificateDataSource: Cannot generate payload from fetched PKI Certificate"));const s={payload:i,keyUsageNumber:p_e.mapKeyUsageForFirmware(e.keyUsage)};return er(s)}else return ut(Error("[ContextModule] HttpPkiCertificateDataSource: failed to fetch PKI for given descriptor"))}catch{return ut(Error("[ContextModule] HttpPkiCertificateDataSource: failed to fetch PKI for given descriptor"))}}isValidPkiCertificateResponse(e,t){return typeof e=="object"&&e!==null&&"descriptor"in e&&typeof e.descriptor=="object"&&e.descriptor!==null&&"data"in e.descriptor&&typeof e.descriptor.data=="string"&&"signatures"in e.descriptor&&typeof e.descriptor.signatures=="object"&&e.descriptor.signatures!==null&&t in e.descriptor.signatures&&typeof e.descriptor.signatures[t]=="string"}};wC=g_e([Ct(),m_e(0,Ze(cs.Config))],wC);var y_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},v_e=(r,e)=>(t,n)=>e(t,n,r);let xC=class{_dataSource;constructor(e){this._dataSource=e}async loadCertificate(e){return(await this._dataSource.fetchCertificate(e)).orDefault(void 0)}};xC=y_e([Ct(),v_e(0,Ze(Io.PkiCertificateDataSource))],xC);const b_e=()=>new pn(({bind:r})=>{r(Io.PkiCertificateDataSource).to(wC),r(Io.PkiCertificateLoader).to(xC)});var w_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},x_e=(r,e)=>(t,n)=>e(t,n,r);let _C=class{constructor(e){this.config=e}async getProxyImplementationAddress({proxyAddress:e,chainId:t,challenge:n,calldata:i}){let s;try{s=(await ur.request({method:"POST",url:`${this.config.metadataServiceDomain.url}/v2/ethereum/${t}/contract/proxy/delegate`,headers:{[Ss]:`context-module/${Es.version}`,[Ra]:this.config.originToken},data:{proxy:e,data:i,challenge:n}})).data}catch{return ut(new Error("[ContextModule] HttpProxyDataSource: Failed to fetch delegate proxy"))}return s?this.isProxyDelegateCallDto(s)?s.addresses[0]?er({implementationAddress:s.addresses[0],signedDescriptor:s.signedDescriptor,keyId:Iw.DomainMetadataKey,keyUsage:oi.TrustedName}):ut(new Error(`[ContextModule] HttpProxyDataSource: No implementation address found for proxy ${e} on chain ${t}`)):ut(new Error(`[ContextModule] HttpProxyDataSource: Invalid proxy delegate call response format for proxy ${e} on chain ${t}`)):ut(new Error(`[ContextModule] HttpProxyDataSource: No data received for proxy ${e} on chain ${t}`))}isProxyDelegateCallDto(e){return typeof e=="object"&&e!==null&&"addresses"in e&&"signedDescriptor"in e&&Array.isArray(e.addresses)&&e.addresses.every(t=>typeof t=="string")&&typeof e.signedDescriptor=="string"}};_C=w_e([Ct(),x_e(0,Ze(cs.Config))],_C);var __e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},S_e=(r,e)=>(t,n)=>e(t,n,r);let SC=class{constructor(e){this.config=e}async getProxyImplementationAddress({proxyAddress:e,chainId:t,challenge:n}){let i;try{i=(await ur.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v3/ethereum/${t}/contract/proxy/${e}`,headers:{[Ss]:`context-module/${Es.version}`,[Ra]:this.config.originToken},params:{challenge:n,resolver:"SAFE_GATEWAY"}})).data}catch{return ut(new Error("[ContextModule] HttpSafeProxyDataSource: Failed to fetch safe proxy implementation"))}return i?this.isSafeProxyImplementationAddressDto(i)?er({implementationAddress:i.implementationAddress,signedDescriptor:i.signedDescriptor,keyId:i.keyId,keyUsage:i.keyUsage}):ut(new Error(`[ContextModule] HttpSafeProxyDataSource: Invalid safe proxy response format for proxy ${e} on chain ${t}`)):ut(new Error(`[ContextModule] HttpSafeProxyDataSource: No data received for proxy ${e} on chain ${t}`))}isSafeProxyImplementationAddressDto(e){return typeof e=="object"&&e!==null&&"proxyAddress"in e&&"implementationAddress"in e&&"standard"in e&&"signedDescriptor"in e&&"providedBy"in e&&"keyId"in e&&"keyUsage"in e&&typeof e.proxyAddress=="string"&&typeof e.implementationAddress=="string"&&typeof e.standard=="string"&&typeof e.signedDescriptor=="string"&&typeof e.providedBy=="string"&&typeof e.keyId=="string"&&typeof e.keyUsage=="string"}};SC=__e([Ct(),S_e(0,Ze(cs.Config))],SC);var E_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},KB=(r,e)=>(t,n)=>e(t,n,r);let EC=class{constructor(e,t){this._proxyDataSource=e,this._certificateLoader=t}canHandle(e,t){return t===Ft.PROXY_INFO&&typeof e=="object"&&e!==null&&"chainId"in e&&"proxyAddress"in e&&"calldata"in e&&"challenge"in e&&"deviceModelId"in e}async loadField(e){return(await this._proxyDataSource.getProxyImplementationAddress({calldata:e.calldata,proxyAddress:e.proxyAddress,chainId:e.chainId,challenge:e.challenge})).caseOf({Left:t=>Promise.resolve({type:Ft.ERROR,error:t}),Right:async({signedDescriptor:t,keyId:n,keyUsage:i})=>{const s=await this._certificateLoader.loadCertificate({keyId:n,keyUsage:i,targetDevice:e.deviceModelId});return{type:Ft.PROXY_INFO,payload:t,certificate:s}}})}};EC=E_e([Ct(),KB(0,Ze(pf.ProxyDataSource)),KB(1,Ze(Io.PkiCertificateLoader))],EC);const A_e=r=>new pn(({bind:e})=>{r?.datasource?.proxy==="safe"?e(pf.ProxyDataSource).to(SC):e(pf.ProxyDataSource).to(_C),e(pf.ProxyContextFieldLoader).to(EC)});var I_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},C_e=(r,e)=>(t,n)=>e(t,n,r);let AC=class{constructor(e){if(this.config=e,!this.config.originToken)throw new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: origin token is required")}isSolanaSPLOwnerInfo(e){return typeof e!="object"||e===null?!1:typeof e.tokenAccount=="string"&&typeof e.owner=="string"&&typeof e.contract=="string"&&typeof e.signedDescriptor=="string"}async fetchAddressMetadata(e,t){return await ur.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/solana/owner/${e}?challenge=${t}`,headers:{[Ss]:`context-module/${Es.version}`,[Ra]:this.config.originToken}}).then(n=>this.isSolanaSPLOwnerInfo(n.data)?er(n.data):ut(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: invalid fetchAddressMetadata response shape"))).catch(()=>ut(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: Failed to fetch address metadata")))}async computeAddressMetadata(e,t,n){return await ur.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/solana/computed-token-account/${e}/${t}?challenge=${n}`,headers:{[Ss]:`context-module/${Es.version}`,"X-Ledger-Client-Origin":this.config.originToken}}).then(i=>this.isSolanaSPLOwnerInfo(i.data)?er(i.data):ut(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: invalid computeAddressMetadata response shape"))).catch(()=>ut(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: Failed to compute address metadata")))}async getOwnerInfo(e){const{tokenAddress:t,challenge:n,createATA:i}=e;if(!n)return ut(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: challenge is required"));let s;if(t)s=await this.fetchAddressMetadata(t,n);else if(i?.address&&i?.mintAddress)s=await this.computeAddressMetadata(i.address,i.mintAddress,n);else return ut(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: either tokenAddress or valid createATA must be provided"));return s.chain(o=>{const a=uf(o.signedDescriptor);return a?er({descriptor:a,tokenAccount:o.tokenAccount,owner:o.owner,contract:o.contract}):ut(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: invalid base64 descriptor received"))})}};AC=I_e([Ct(),C_e(0,Ze(cs.Config))],AC);var T_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},HB=(r,e)=>(t,n)=>e(t,n,r);let IC=class{constructor(e,t){this._certificateLoader=t,this._dataSource=e}_dataSource;async load(e){const t=await this._certificateLoader.loadCertificate({keyId:"domain_metadata_key",keyUsage:oi.TrustedName,targetDevice:e.deviceModelId});return t?(await this._dataSource.getOwnerInfo(e)).map(({descriptor:n,tokenAccount:i,owner:s,contract:o})=>({descriptor:n,tokenAccount:i,owner:s,contract:o,certificate:t})):ut(new Error("[ContextModule] - DefaultSolanaContextLoader: CAL certificate is undefined"))}};IC=T_e([Ct(),HB(0,Ze(Uv.SolanaDataSource)),HB(1,Ze(Io.PkiCertificateLoader))],IC);const R_e=()=>new pn(({bind:r})=>{r(Uv.SolanaDataSource).to(AC),r(Uv.SolanaContextLoader).to(IC)});var k_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},P_e=(r,e)=>(t,n)=>e(t,n,r);let CC=class{constructor(e){this.config=e}async getTokenInfosPayload({chainId:e,address:t}){try{const n=(await ur.request({method:"GET",url:`${this.config.cal.url}/tokens`,params:{contract_address:t,chain_id:e,output:"descriptor,ticker",ref:`branch:${this.config.cal.branch}`},headers:{[Ss]:`context-module/${Es.version}`}})).data?.[0];if(!n||!n.ticker||!n.descriptor||!n.descriptor.data||!n.descriptor.signatures||typeof n.descriptor.signatures[this.config.cal.mode]!="string")return ut(new Error(`[ContextModule] HttpTokenDataSource: no token metadata for address ${t} on chain ${e}`));const i=n.ticker.length.toString(16).padStart(2,"0");return er([i,n.descriptor.data,n.descriptor.signatures[this.config.cal.mode]].join(""))}catch{return ut(new Error("[ContextModule] HttpTokenDataSource: Failed to fetch token informations"))}}};CC=k_e([Ct(),P_e(0,Ze(cs.Config))],CC);var O_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},D_e=(r,e)=>(t,n)=>e(t,n,r);let TC=class{constructor(e){this._dataSource=e}canHandle(e,t){return t===Ft.TOKEN&&typeof e=="object"&&e!==null&&"chainId"in e&&"address"in e}async loadField(e){return(await this._dataSource.getTokenInfosPayload({address:e.address,chainId:e.chainId})).caseOf({Left:t=>({type:Ft.ERROR,error:t}),Right:t=>({type:Ft.TOKEN,payload:t})})}};TC=O_e([Ct(),D_e(0,Ze(cc.TokenDataSource))],TC);var $_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},M_e=(r,e)=>(t,n)=>e(t,n,r),YW=(r=>(r.Approve="0x095ea7b3",r.Transfer="0xa9059cbb",r))(YW||{});const B_e=Object.values(YW),N_e=[Ft.TOKEN];let RC=class{_dataSource;constructor(e){this._dataSource=e}canHandle(e,t){return typeof e=="object"&&e!==null&&"to"in e&&"selector"in e&&"chainId"in e&&typeof e.chainId=="number"&&li(e.to)&&e.to!=="0x"&&li(e.selector)&&this.isSelectorSupported(e.selector)&&N_e.every(n=>t.includes(n))}async load(e){const{to:t,chainId:n}=e;return[(await this._dataSource.getTokenInfosPayload({address:t,chainId:n})).caseOf({Left:i=>({type:Ft.ERROR,error:i}),Right:i=>({type:Ft.TOKEN,payload:i})})]}isSelectorSupported(e){return Object.values(B_e).includes(e)}};RC=$_e([Ct(),M_e(0,Ze(cc.TokenDataSource))],RC);const L_e=()=>new pn(({bind:r})=>{r(cc.TokenDataSource).to(CC),r(cc.TokenContextLoader).to(RC),r(cc.TokenContextFieldLoader).to(TC)});var F_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},U_e=(r,e)=>(t,n)=>e(t,n,r);let kC=class{constructor(e){this.config=e}async getDomainNamePayload({chainId:e,domain:t,challenge:n}){let i;try{i=(await ur.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/names/ethereum/${e}/forward/${t}?types=eoa&sources=ens&challenge=${n}`,headers:{[Ss]:`context-module/${Es.version}`,[Ra]:this.config.originToken}})).data}catch{return ut(new Error("[ContextModule] HttpTrustedNameDataSource: Failed to fetch domain name"))}return i?this.isTrustedNameDto(i)?er({data:i.signedDescriptor.data,keyId:i.keyId,keyUsage:i.keyUsage}):ut(new Error(`[ContextModule] HttpTrustedNameDataSource: Invalid trusted name response format for domain ${t} on chain ${e}`)):ut(new Error(`[ContextModule] HttpTrustedNameDataSource: No data received for domain ${t} on chain ${e}`))}async getTrustedNamePayload({chainId:e,address:t,challenge:n,sources:i,types:s}){let o;try{i=i.filter(c=>c==="ens"||c==="crypto_asset_list"),o=(await ur.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/names/ethereum/${e}/reverse/${t}?types=${s.join(",")}&sources=${i.join(",")}&challenge=${n}`,headers:{[Ss]:`context-module/${Es.version}`,[Ra]:this.config.originToken}})).data}catch{return ut(new Error("[ContextModule] HttpTrustedNameDataSource: Failed to fetch trusted name"))}if(!o)return ut(new Error(`[ContextModule] HttpTrustedNameDataSource: No data received for address ${t} on chain ${e}`));if(!this.isTrustedNameDto(o))return ut(new Error(`[ContextModule] HttpTrustedNameDataSource: Invalid trusted name response format for address ${t} on chain ${e}`));if(typeof o.signedDescriptor.signatures[this.config.cal.mode]!="string")return er({data:o.signedDescriptor.data,keyId:o.keyId,keyUsage:o.keyUsage});const a=o.signedDescriptor.signatures[this.config.cal.mode];return er({data:this.formatTrustedName(o.signedDescriptor.data,a),keyId:o.keyId,keyUsage:o.keyUsage})}formatTrustedName(e,t){t.length%2!==0&&(t="0"+t);const n="15",i=(t.length/2).toString(16);return`${e}${n}${i}${t}`}isTrustedNameDto(e){return typeof e=="object"&&e!==null&&"signedDescriptor"in e&&"keyId"in e&&"keyUsage"in e&&typeof e.keyId=="string"&&typeof e.keyUsage=="string"&&typeof e.signedDescriptor=="object"&&e.signedDescriptor!==null&&"data"in e.signedDescriptor&&"signatures"in e.signedDescriptor&&typeof e.signedDescriptor.data=="string"&&typeof e.signedDescriptor.signatures=="object"}};kC=F_e([Ct(),U_e(0,Ze(cs.Config))],kC);var z_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},WB=(r,e)=>(t,n)=>e(t,n,r);let PC=class{constructor(e,t){this._dataSource=e,this._certificateLoader=t}canHandle(e,t){return t===Ft.TRUSTED_NAME&&typeof e=="object"&&e!==null&&"chainId"in e&&"address"in e&&"challenge"in e&&"types"in e&&"sources"in e&&"deviceModelId"in e&&e.deviceModelId!==void 0}async loadField(e){return await(await this._dataSource.getTrustedNamePayload({chainId:e.chainId,address:e.address,challenge:e.challenge,types:e.types,sources:e.sources})).caseOf({Left:t=>Promise.resolve({type:Ft.ERROR,error:t}),Right:async({data:t,keyId:n,keyUsage:i})=>{const s=await this._certificateLoader.loadCertificate({keyId:n,keyUsage:i,targetDevice:e.deviceModelId});return{type:Ft.TRUSTED_NAME,payload:t,certificate:s}}})}};PC=z_e([Ct(),WB(0,Ze(gf.TrustedNameDataSource)),WB(1,Ze(Io.PkiCertificateLoader))],PC);var q_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},GB=(r,e)=>(t,n)=>e(t,n,r);const j_e=[Ft.TRUSTED_NAME];let OC=class{constructor(e,t){this.certificateLoader=t,this._dataSource=e}_dataSource;canHandle(e,t){return typeof e=="object"&&e!==null&&"chainId"in e&&"domain"in e&&"challenge"in e&&"deviceModelId"in e&&e.deviceModelId!==void 0&&typeof e.chainId=="number"&&typeof e.domain=="string"&&e.domain.length>0&&typeof e.challenge=="string"&&e.challenge.length>0&&j_e.every(n=>t.includes(n))}async load(e){const{chainId:t,domain:n,challenge:i,deviceModelId:s}=e;return this.isDomainValid(n)?[await(await this._dataSource.getDomainNamePayload({chainId:t,domain:n,challenge:i})).caseOf({Left:o=>Promise.resolve({type:Ft.ERROR,error:o}),Right:async({data:o,keyId:a,keyUsage:c})=>{const l=await this.certificateLoader.loadCertificate({keyId:a,keyUsage:c,targetDevice:s});return{type:Ft.TRUSTED_NAME,payload:o,certificate:l}}})]:[{type:Ft.ERROR,error:new Error("[ContextModule] TrustedNameLoader: invalid domain")}]}isDomainValid(e){const t=e.length>0&&Number(e.length)<30,n=new RegExp("^[a-zA-Z0-9\\-\\_\\.]+$").test(e);return t&&n}};OC=q_e([Ct(),GB(0,Ze(gf.TrustedNameDataSource)),GB(1,Ze(Io.PkiCertificateLoader))],OC);const V_e=()=>new pn(({bind:r})=>{r(gf.TrustedNameDataSource).to(kC),r(gf.TrustedNameContextLoader).to(OC),r(gf.TrustedNameContextFieldLoader).to(PC)});var zy={exports:{}};function XW(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qy={exports:{}},K_e=qy.exports,YB;function JW(){return YB||(YB=1,function(r,e){(function(t,n){r.exports=n()})(K_e,function(){var t=t||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof gi<"u"&&gi.crypto&&(s=gi.crypto),!s&&typeof XW=="function")try{s=Hf}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(b){var _;return v.prototype=b,_=new v,v.prototype=null,_}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(v){var b=a(this);return v&&b.mixIn(v),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var b in v)v.hasOwnProperty(b)&&(this[b]=v[b]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=u.extend({init:function(v,b){v=this.words=v||[],b!=i?this.sigBytes=b:this.sigBytes=v.length*4},toString:function(v){return(v||d).stringify(this)},concat:function(v){var b=this.words,_=v.words,x=this.sigBytes,E=v.sigBytes;if(this.clamp(),x%4)for(var S=0;S<E;S++){var C=_[S>>>2]>>>24-S%4*8&255;b[x+S>>>2]|=C<<24-(x+S)%4*8}else for(var k=0;k<E;k+=4)b[x+k>>>2]=_[k>>>2];return this.sigBytes+=E,this},clamp:function(){var v=this.words,b=this.sigBytes;v[b>>>2]&=4294967295<<32-b%4*8,v.length=n.ceil(b/4)},clone:function(){var v=u.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var b=[],_=0;_<v;_+=4)b.push(o());return new f.init(b,v)}}),h=c.enc={},d=h.Hex={stringify:function(v){for(var b=v.words,_=v.sigBytes,x=[],E=0;E<_;E++){var S=b[E>>>2]>>>24-E%4*8&255;x.push((S>>>4).toString(16)),x.push((S&15).toString(16))}return x.join("")},parse:function(v){for(var b=v.length,_=[],x=0;x<b;x+=2)_[x>>>3]|=parseInt(v.substr(x,2),16)<<24-x%8*4;return new f.init(_,b/2)}},g=h.Latin1={stringify:function(v){for(var b=v.words,_=v.sigBytes,x=[],E=0;E<_;E++){var S=b[E>>>2]>>>24-E%4*8&255;x.push(String.fromCharCode(S))}return x.join("")},parse:function(v){for(var b=v.length,_=[],x=0;x<b;x++)_[x>>>2]|=(v.charCodeAt(x)&255)<<24-x%4*8;return new f.init(_,b)}},p=h.Utf8={stringify:function(v){try{return decodeURIComponent(escape(g.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return g.parse(unescape(encodeURIComponent(v)))}},m=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=p.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var b,_=this._data,x=_.words,E=_.sigBytes,S=this.blockSize,C=S*4,k=E/C;v?k=n.ceil(k):k=n.max((k|0)-this._minBufferSize,0);var $=k*S,J=n.min($*4,E);if($){for(var j=0;j<$;j+=S)this._doProcessBlock(x,j);b=x.splice(0,$),_.sigBytes-=J}return new f.init(b,J)},clone:function(){var v=u.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});l.Hasher=m.extend({cfg:u.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(v){return function(b,_){return new v.init(_).finalize(b)}},_createHmacHelper:function(v){return function(b,_){return new y.HMAC.init(v,_).finalize(b)}}});var y=c.algo={};return c}(Math);return t})}(qy)),qy.exports}var jy={exports:{}},H_e=jy.exports,XB;function W_e(){return XB||(XB=1,function(r,e){(function(t,n){r.exports=n(JW())})(H_e,function(t){return function(n){var i=t,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,l=[],u=[];(function(){function d(y){for(var v=n.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}function g(y){return(y-(y|0))*4294967296|0}for(var p=2,m=0;m<64;)d(p)&&(m<8&&(l[m]=g(n.pow(p,1/2))),u[m]=g(n.pow(p,1/3)),m++),p++})();var f=[],h=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(d,g){for(var p=this._hash.words,m=p[0],y=p[1],v=p[2],b=p[3],_=p[4],x=p[5],E=p[6],S=p[7],C=0;C<64;C++){if(C<16)f[C]=d[g+C]|0;else{var k=f[C-15],$=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,J=f[C-2],j=(J<<15|J>>>17)^(J<<13|J>>>19)^J>>>10;f[C]=$+f[C-7]+j+f[C-16]}var L=_&x^~_&E,w=m&y^m&v^y&v,R=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),N=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),Y=S+N+L+u[C]+f[C],z=R+w;S=E,E=x,x=_,_=b+Y|0,b=v,v=y,y=m,m=Y+z|0}p[0]=p[0]+m|0,p[1]=p[1]+y|0,p[2]=p[2]+v|0,p[3]=p[3]+b|0,p[4]=p[4]+_|0,p[5]=p[5]+x|0,p[6]=p[6]+E|0,p[7]=p[7]+S|0},_doFinalize:function(){var d=this._data,g=d.words,p=this._nDataBytes*8,m=d.sigBytes*8;return g[m>>>5]|=128<<24-m%32,g[(m+64>>>9<<4)+14]=n.floor(p/4294967296),g[(m+64>>>9<<4)+15]=p,d.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var d=a.clone.call(this);return d._hash=this._hash.clone(),d}});i.SHA256=a._createHelper(h),i.HmacSHA256=a._createHmacHelper(h)}(Math),t.SHA256})}(jy)),jy.exports}var G_e=zy.exports,JB;function Y_e(){return JB||(JB=1,function(r,e){(function(t,n,i){r.exports=n(JW(),W_e())})(G_e,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,o=n.algo,a=o.SHA256,c=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});n.SHA224=a._createHelper(c),n.HmacSHA224=a._createHmacHelper(c)}(),t.SHA224})}(zy)),zy.exports}var X_e=Y_e();const J_e=Gs(X_e),Q_e=255;var L0=(r=>(r.None="none",r.Present="present",r.VerifyingContract="verifying_contract",r))(L0||{}),Z_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},eSe=(r,e)=>(t,n)=>e(t,n,r);let DC=class{constructor(e){this.config=e}async getTypedDataFilters({chainId:e,address:t,schema:n,version:i}){let s;try{const o=await ur.request({method:"GET",url:`${this.config.cal.url}/dapps`,params:{contracts:t,chain_id:e,output:"descriptors_eip712",descriptors_eip712_version:i,descriptors_eip712:"<set>",ref:`branch:${this.config.cal.branch}`},headers:{[Ss]:`context-module/${Es.version}`,[Ra]:this.config.originToken}}),a=J_e(JSON.stringify(this.sortTypes(n)).replace(" ","")).toString();t=t.toLowerCase();const c=o.data?.[0]?.descriptors_eip712?.[t]?.[a];if(!c)return ut(new Error(`[ContextModule] HttpTypedDataDataSource: no typed data filters for address ${t} on chain ${e} for schema ${a}`));if(!c.schema||!Array.isArray(c.instructions))return ut(new Error(`[ContextModule] HttpTypedDataDataSource: no message info for address ${t} on chain ${e} for schema ${a}`));const l=[],u={};for(const f of c.instructions)if(this.isInstructionContractInfo(f,this.config.cal.mode))s={displayName:f.display_name,signature:f.signatures[this.config.cal.mode],filtersCount:f.field_mappers_count};else if(i==="v1"&&this.isInstructionFieldV1(f,this.config.cal.mode))l.push({type:"raw",displayName:f.display_name,path:f.field_path,signature:f.signatures[this.config.cal.mode]});else if(this.isInstructionFieldV2(f,this.config.cal.mode))l.push({type:f.format,displayName:f.display_name,path:f.field_path,signature:f.signatures[this.config.cal.mode]});else if(this.isInstructionFieldV2WithCoinRef(f,this.config.cal.mode))l.push({type:f.format,displayName:f.display_name,path:f.field_path,signature:f.signatures[this.config.cal.mode],tokenIndex:f.coin_ref});else if(this.isInstructionFieldV2WithName(f,this.config.cal.mode))l.push({type:f.format,displayName:f.display_name,path:f.field_path,signature:f.signatures[this.config.cal.mode],types:f.name_types,sources:f.name_sources,typesAndSourcesPayload:this.formatTrustedNameTypesAndSources(f)});else if(this.isInstructionCalldataInfo(f,this.config.cal.mode))u[f.calldata_index]={displayName:f.display_name,calldataIndex:f.calldata_index,valueFlag:f.value_filter_flag,calleeFlag:this.convertCalldataPresenceFlag(f.callee_filter_flag),amountFlag:f.amount_filter_flag,spenderFlag:this.convertCalldataPresenceFlag(f.spender_filter_flag),chainIdFlag:f.chain_id_filter_flag,selectorFlag:f.selector_filter_flag,signature:f.signatures[this.config.cal.mode]};else if(this.isInstructionFieldV2Calldata(f,this.config.cal.mode))l.push({type:f.format,displayName:f.display_name,path:f.field_path,signature:f.signatures[this.config.cal.mode],calldataIndex:f.calldata_index});else return ut(new Error(`[ContextModule] HttpTypedDataDataSource: invalid typed data field for address ${t} on chain ${e} for schema ${a}`));return s?er({messageInfo:s,filters:l,calldatasInfos:u}):ut(new Error(`[ContextModule] HttpTypedDataDataSource: no message info for address ${t} on chain ${e} for schema ${a}`))}catch{return ut(new Error("[ContextModule] HttpTypedDataDataSource: Failed to fetch typed data informations"))}}convertCalldataPresenceFlag(e){switch(e){case"none":return L0.None;case"present":return L0.Present;case"verifying_contract":return L0.VerifyingContract;default:{const t=e;throw new Error(`Unhandled flag: ${t}`)}}}formatTrustedNameTypesAndSources(e){const t=e.name_types.length,n=e.name_sources.length,i=e.descriptor.slice((t+n)*2*-1,n*2*-1),s=e.descriptor.slice(n*2*-1),o=t.toString(16).padStart(2,"0"),a=n.toString(16).padStart(2,"0");return o+i+a+s}isInstructionFieldV1(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_path=="string"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"}isInstructionFieldV2(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_path=="string"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"&&typeof e.format=="string"&&["raw","datetime"].includes(e.format)&&e.coin_ref===void 0}isInstructionFieldV2WithCoinRef(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_path=="string"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"&&typeof e.format=="string"&&["token","amount"].includes(e.format)&&typeof e.coin_ref=="number"}isInstructionFieldV2WithName(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_path=="string"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"&&typeof e.format=="string"&&e.format==="trusted-name"&&e.coin_ref===void 0&&Array.isArray(e.name_types)&&Array.isArray(e.name_sources)&&e.name_types.every(n=>typeof n=="string")&&e.name_sources.every(n=>typeof n=="string")}isInstructionContractInfo(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_mappers_count=="number"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"&&e.field_path===void 0}isInstructionCalldataInfo(e,t){return typeof e=="object"&&typeof e.type=="string"&&e.type==="calldata"&&typeof e.display_name=="string"&&typeof e.calldata_index=="number"&&typeof e.value_filter_flag=="boolean"&&typeof e.chain_id_filter_flag=="boolean"&&typeof e.selector_filter_flag=="boolean"&&typeof e.amount_filter_flag=="boolean"&&["none","present","verifying_contract"].includes(e.callee_filter_flag)&&["none","present","verifying_contract"].includes(e.spender_filter_flag)&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"}isInstructionFieldV2Calldata(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_path=="string"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"&&typeof e.format=="string"&&["calldata-value","calldata-callee","calldata-chain-id","calldata-selector","calldata-amount","calldata-spender"].includes(e.format)&&typeof e.calldata_index=="number"}sortTypes(e){return Object.fromEntries(Object.entries(e).sort(([t],[n])=>t.localeCompare(n)).map(([t,n])=>[t,n.map(i=>({name:i.name,type:i.type}))]))}};DC=Z_e([Ct(),eSe(0,Ze(cs.Config))],DC);var tSe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},oy=(r,e)=>(t,n)=>e(t,n,r);let $C=class{constructor(e,t,n,i){this.dataSource=e,this.tokenDataSource=t,this.proxyDataSource=n,this._certificateLoader=i}async load(e){let t,n=await this.dataSource.getTypedDataFilters({address:e.verifyingContract,chainId:e.chainId,version:e.version,schema:e.schema});if(n.isLeft()){const{resolvedAddress:c,context:l}=await this.resolveProxy(e);if(l!==void 0&&(t=l,n=await this.dataSource.getTypedDataFilters({address:c,chainId:e.chainId,version:e.version,schema:e.schema})),n.isLeft())return{type:"error",error:n.extract()}}const{messageInfo:i,filters:s,calldatasInfos:o}=n.unsafeCoerce(),a=s.reduce((c,l)=>(c[l.path]=l,c),{});return{type:"success",messageInfo:i,filters:a,trustedNamesAddresses:this.extractTrustedNames(s,e),tokens:await this.extractTokens(s,e),calldatas:this.extractCalldatas(s,o,e),proxy:t}}async resolveProxy(e){const t=await this.proxyDataSource.getProxyImplementationAddress({calldata:"0x",proxyAddress:e.verifyingContract,chainId:e.chainId,challenge:e.challenge??""});if(t.isLeft())return{resolvedAddress:e.verifyingContract,context:void 0};const n=t.unsafeCoerce(),i=await this._certificateLoader.loadCertificate({keyId:n.keyId,keyUsage:n.keyUsage,targetDevice:e.deviceModelId});return{resolvedAddress:n.implementationAddress,context:{type:Ft.PROXY_INFO,payload:n.signedDescriptor,certificate:i}}}extractTrustedNames(e,t){return e.filter(n=>n.type==="trusted-name").reduce((n,i)=>{const s=t.fieldsValues.filter(o=>o.path===i.path);if(s.length!==0){const o=s[0],a=this.convertAddressToHexaString(o.value);n[i.path]=a}return n},{})}async extractTokens(e,t){const n={};for(const i of e){if(i.type!=="token"&&i.type!=="amount")continue;const s=i.tokenIndex;if(n[s]===void 0){if(i.type==="token"){const o=t.fieldsValues.filter(l=>l.path===i.path);if(o.length===0)continue;const a=o[0],c=this.convertAddressToHexaString(a.value);if(o.every(l=>this.convertAddressToHexaString(l.value)===c)){const l=t.chainId;(await this.tokenDataSource.getTokenInfosPayload({address:c,chainId:l})).ifRight(u=>{n[s]=u})}}else if(i.type==="amount"&&s===Q_e){const o=t.verifyingContract,a=t.chainId;(await this.tokenDataSource.getTokenInfosPayload({address:o,chainId:a})).ifRight(c=>{n[s]=c})}}}return n}extractCalldatas(e,t,n){const i=e.reduce((o,a)=>{if(a.type==="calldata-value"||a.type==="calldata-callee"||a.type==="calldata-chain-id"||a.type==="calldata-selector"||a.type==="calldata-amount"||a.type==="calldata-spender"){const c=o[a.calldataIndex];c===void 0?o[a.calldataIndex]=[a]:c.push(a)}return o},{}),s={};for(const o in t){const a=t[o],c=i[o];if(!c)continue;const l=this.extractHexaString(c.find(m=>m.type==="calldata-value"),n,"0x"),u=this.extractHexaString(c.find(m=>m.type==="calldata-selector"),n,l.slice(0,10)),f=this.extractAddress(c.find(m=>m.type==="calldata-callee"),n,a.calleeFlag),h=this.extractAddress(c.find(m=>m.type==="calldata-spender"),n,a.spenderFlag),d=this.extractBigint(c.find(m=>m.type==="calldata-amount"),n,void 0),g=this.extractBigint(c.find(m=>m.type==="calldata-chain-id"),n,void 0),p=g!==void 0&&g<Number.MAX_SAFE_INTEGER?Number(g):n.chainId;s[o]={filter:a,subset:{chainId:p,data:l,selector:u,to:f,value:d,from:h}}}return s}extractHexaString(e,t,n){if(e!==void 0){const i=t.fieldsValues.filter(s=>s.path===e.path);if(i.length!==0)return mg(i[0].value)}return n}extractAddress(e,t,n,i){if(n===L0.VerifyingContract)return t.verifyingContract;if(e!==void 0){const s=t.fieldsValues.filter(o=>o.path===e.path);if(s.length!==0)return this.convertAddressToHexaString(s[0].value)}return i}extractBigint(e,t,n){if(e!==void 0){const i=t.fieldsValues.filter(s=>s.path===e.path);if(i.length!==0)return BigInt(mg(i[0].value))}return n}convertAddressToHexaString(e){return`0x${Array.from(e,t=>t.toString(16).padStart(2,"0")).join("").padStart(40,"0")}`}};$C=tSe([Ct(),oy(0,Ze(zv.TypedDataDataSource)),oy(1,Ze(cc.TokenDataSource)),oy(2,Ze(pf.ProxyDataSource)),oy(3,Ze(Io.PkiCertificateLoader))],$C);const rSe=()=>new pn(({bind:r})=>{r(zv.TypedDataDataSource).to(DC),r(zv.TypedDataContextLoader).to($C)}),nSe=["function execute(bytes calldata commands, bytes[] calldata inputs, uint256 deadline) external payable"],QB="0x3fc91a3afd70395cd496c647d5a6cc9d4b2b7fad",ZB="0x3593564c";var io=(r=>(r.V2_SWAP_EXACT_IN="V2_SWAP_EXACT_IN",r.V2_SWAP_EXACT_OUT="V2_SWAP_EXACT_OUT",r.V3_SWAP_EXACT_IN="V3_SWAP_EXACT_IN",r.V3_SWAP_EXACT_OUT="V3_SWAP_EXACT_OUT",r.WRAP_ETH="WRAP_ETH",r.UNWRAP_ETH="UNWRAP_ETH",r.PERMIT2_PERMIT="PERMIT2_PERMIT",r.PERMIT2_TRANSFER_FROM="PERMIT2_TRANSFER_FROM",r.PERMIT2_PERMIT_BATCH="PERMIT2_PERMIT_BATCH",r.PERMIT2_TRANSFER_FROM_BATCH="PERMIT2_TRANSFER_FROM_BATCH",r.PAY_PORTION="PAY_PORTION",r.SWEEP="SWEEP",r))(io||{});const iSe={"0x08":"V2_SWAP_EXACT_IN","0x09":"V2_SWAP_EXACT_OUT","0x00":"V3_SWAP_EXACT_IN","0x01":"V3_SWAP_EXACT_OUT","0x0b":"WRAP_ETH","0x0c":"UNWRAP_ETH","0x0a":"PERMIT2_PERMIT","0x0d":"PERMIT2_TRANSFER_FROM","0x02":"PERMIT2_PERMIT_BATCH","0x03":"PERMIT2_TRANSFER_FROM_BATCH","0x06":"PAY_PORTION","0x04":"SWEEP"},sSe=["V2_SWAP_EXACT_IN","V2_SWAP_EXACT_OUT","V3_SWAP_EXACT_IN","V3_SWAP_EXACT_OUT"];var QW=(r=>(r[r.ETHEREUM_MAINNET=1]="ETHEREUM_MAINNET",r[r.ETHEREUM_GOERLI=5]="ETHEREUM_GOERLI",r[r.ETHEREUM_SEPOLIA=11155111]="ETHEREUM_SEPOLIA",r[r.ARBITRUM_ONE=42161]="ARBITRUM_ONE",r[r.ARBITRUM_GOERLI=421613]="ARBITRUM_GOERLI",r[r.AVALANCHE_C_CHAIN=43114]="AVALANCHE_C_CHAIN",r[r.BSC=56]="BSC",r[r.BASE=8453]="BASE",r[r.BASE_GOERLI=84531]="BASE_GOERLI",r[r.BLAST=23888]="BLAST",r[r.OPTIMISM=10]="OPTIMISM",r[r.OPTIMISM_GOERLI=420]="OPTIMISM_GOERLI",r[r.POLYGON=137]="POLYGON",r[r.POLYGON_MUMBAI=80001]="POLYGON_MUMBAI",r))(QW||{});const oSe={1:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",5:"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",11155111:"0xfFf9976782d46CC05630D1f6eBAb18b2324d6B14",42161:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",421613:"0xe39Ab88f8A4777030A534146A9Ca3B52bd5D43A3",43114:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",56:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",8453:"0x4200000000000000000000000000000000000006",84531:"0x44D627f900da8AdaC7561bD73aA745F132450798",23888:"0x4300000000000000000000000000000000000004",10:"0x4200000000000000000000000000000000000006",420:"0x4200000000000000000000000000000000000006",137:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",80001:"0x9c3C9283D3e44854697Cd22D3Faa240Cfb032889"};var aSe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},cSe=(r,e)=>(t,n)=>e(t,n,r);const JE=20*2,eN=3*2;let MC=class{constructor(e){this.abiDecoder=e}decode(e,t,n){switch(e){case io.V2_SWAP_EXACT_IN:return this._decodeSwapV2(t);case io.V2_SWAP_EXACT_OUT:return this._decodeSwapV2(t);case io.V3_SWAP_EXACT_IN:return this._decodeSwapV3(t);case io.V3_SWAP_EXACT_OUT:return this._decodeSwapV3(t);case io.WRAP_ETH:return this._decodeWrappedEth(t,n);case io.UNWRAP_ETH:return this._decodeWrappedEth(t,n);case io.SWEEP:return this._decodeSweep(t);case io.PERMIT2_PERMIT:case io.PERMIT2_TRANSFER_FROM:case io.PERMIT2_PERMIT_BATCH:case io.PERMIT2_TRANSFER_FROM_BATCH:case io.PAY_PORTION:return[];default:return[]}}_decodeSwapV2(e){const[,,,t]=this.abiDecoder.decode(["address","uint256","uint256","address[]","bool"],e);return!Array.isArray(t)||!t.every(li)?[]:t.map(n=>n.toLowerCase())}_decodeSwapV3(e){const[,,,t]=this.abiDecoder.decode(["address","uint256","uint256","bytes","bool"],e);if(typeof t!="string"||!li(t)||t.length<2+JE*2+eN)return[];const n=[];for(let i=2;i<t.length;i+=JE+eN)n.push(t.slice(i,i+JE));return n.map(i=>i.toLowerCase()).map(i=>`0x${i}`)}_isSupportedChainId(e){return Object.values(QW).includes(e)}_decodeWrappedEth(e,t){return this._isSupportedChainId(t)?[oSe[t].toLowerCase()]:[]}_decodeSweep=e=>{const[t]=this.abiDecoder.decode(["address","address","uint256"],e);return typeof t!="string"||!li(t)?[]:[t.toLowerCase()]}};MC=aSe([Ct(),cSe(0,Ze(ad.AbiDecoderDataSource))],MC);var lSe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let BC=class{decode(e,t){try{return Pd.defaultAbiCoder().decode(e,t)}catch{return[]}}};BC=lSe([Ct()],BC);const uSe="0x3044022014391e8f355867a57fe88f6a5a4dbcb8bf8f888a9db3ff3449caf72d120396bd02200c13d9c3f79400fe0aa0434ac54d59b79503c9964a4abc3e8cd22763e0242935",tN="Uniswap";var fSe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},rN=(r,e)=>(t,n)=>e(t,n,r);const hSe=[Ft.EXTERNAL_PLUGIN,Ft.TOKEN];let NC=class{constructor(e,t){this.commandDecoderDataSource=e,this.tokenDataSource=t}canHandle(e,t){return typeof e=="object"&&e!==null&&"to"in e&&"data"in e&&"selector"in e&&"chainId"in e&&typeof e.chainId=="number"&&li(e.data)&&e.data!=="0x"&&li(e.selector)&&e.selector===ZB&&li(e.to)&&e.to===QB&&hSe.every(n=>t.includes(n))}async load(e){const{data:t,chainId:n}=e,i=this._buildUniswapPluginCommandData(),s=await this._extractClearSignContexts(t,n);return s.length>0?[i,...s]:[]}_buildUniswapPluginCommandData(){const e=new Ed().add8BitUIntToData(tN.length).addAsciiStringToData(tN).addBufferToData(uf(QB)).addBufferToData(uf(ZB)).addBufferToData(uf(uSe)).build();return{type:Ft.EXTERNAL_PLUGIN,payload:mg(e,!1)}}async _extractClearSignContexts(e,t){try{const n=new Hl(nSe).parseTransaction({data:e}),i=n?.args[0],s=n?.args[1];if(!li(i)||!this._isHexaStringArray(s))return[];const o=this._extractCommands(i).orDefault([]);if(i.length===0||s.length!==o.length)return[];const a=o.reduce((l,u,f)=>{const h=s[f],d=this.commandDecoderDataSource.decode(u,h,t);return l.push([u,d]),l},[]);if(!this._isChainingSwapSupported(a))return[];const c=[...new Set(a.flatMap(([,l])=>l))];return(await Promise.all(c.map(l=>this.tokenDataSource.getTokenInfosPayload({address:l,chainId:t})))).map(l=>l.caseOf({Left:u=>({type:Ft.ERROR,error:u}),Right:u=>({type:Ft.TOKEN,payload:u})}))}catch{return[]}}_extractCommands(e){return an.fromNullable(e.slice(2).match(/../g)).map(t=>t.map(n=>`0x${n}`)).map(t=>t.map(n=>iSe[n])).chain(t=>t.every(n=>n!==void 0)?an.of(t):Fr)}_isChainingSwapSupported(e){let t,n;for(const[i,s]of e){if(!sSe.includes(i))continue;const o=i.slice(0,2);if(t&&(t!==s[0]||n!==o))return!1;t=s[s.length-1],n=o}return!0}_isHexaStringArray(e){return Array.isArray(e)&&e.every(t=>typeof t=="string"&&li(t))}};NC=fSe([Ct(),rN(0,Ze(ad.CommandDecoderDataSource)),rN(1,Ze(cc.TokenDataSource))],NC);const dSe=()=>new pn(({bind:r})=>{r(ad.AbiDecoderDataSource).to(BC),r(ad.CommandDecoderDataSource).to(MC),r(ad.UniswapContextLoader).to(NC)});var pSe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},nN=(r,e)=>(t,n)=>e(t,n,r);let LC=class{constructor(e,t){if(this.config=e,this._certificateLoader=t,!this.config.originToken)throw new Error("Origin token is required")}async getWeb3Checks(e){const{from:t,deviceModelId:n}=e;let i,s,o;this.isTypedDataContext(e)?(s={msg:{from:t,data:e.data}},o=`${this.config.web3checks.url}/ethereum/scan/eip-712`):(s={tx:{from:t,raw:e.rawTx},chain:e.chainId},o=`${this.config.web3checks.url}/ethereum/scan/tx`);try{i=(await ur.request({method:"POST",url:o,data:s,headers:{[Ss]:`context-module/${Es.version}`,[Ra]:this.config.originToken}})).data}catch{return ut(new Error("[ContextModule] HttpWeb3CheckDataSource: Failed to fetch web3 checks informations"))}if(!this.isWeb3CheckDto(i))return ut(new Error("[ContextModule] HttpWeb3CheckDataSource: Cannot exploit Web3 checks data received"));const a=await this._certificateLoader.loadCertificate({keyId:i.public_key_id,keyUsage:oi.TxSimulationSigner,targetDevice:n}),c={publicKeyId:i.public_key_id,descriptor:i.descriptor,certificate:a};return er(c)}isTypedDataContext(e){return"data"in e}isWeb3CheckDto(e){return e!=null&&typeof e=="object"&&"public_key_id"in e&&e.public_key_id!=null&&typeof e.public_key_id=="string"&&"descriptor"in e&&e.descriptor!=null&&typeof e.descriptor=="string"}};LC=pSe([Ct(),nN(0,Ze(cs.Config)),nN(1,Ze(Io.PkiCertificateLoader))],LC);var gSe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},mSe=(r,e)=>(t,n)=>e(t,n,r);let FC=class{_dataSource;constructor(e){this._dataSource=e}async load(e){return await this._dataSource.getWeb3Checks(e)}};FC=gSe([Ct(),mSe(0,Ze(qv.Web3CheckDataSource))],FC);const ySe=()=>new pn(({bind:r})=>{r(qv.Web3CheckDataSource).to(LC),r(qv.Web3CheckContextLoader).to(FC)}),vSe=({config:r})=>{const e=new tk;return e.loadSync(C1e(r),i_e(),D1e(),d_e(),A_e(r),L_e(),I1e(),V_e(),rSe(),b_e(),dSe(),ySe(),R_e()),e};let bSe=class{_container;_loaders;_typedDataLoader;_web3CheckLoader;_solanaLoader;_fieldLoaders;constructor(e){this._container=vSe({config:e}),this._loaders=e.defaultLoaders?this._getDefaultLoaders():[],this._loaders.push(...e.customLoaders),this._fieldLoaders=e.defaultFieldLoaders?this._getDefaultFieldLoaders():[],this._fieldLoaders.push(...e.customFieldLoaders),this._typedDataLoader=e.customTypedDataLoader??this._getDefaultTypedDataLoader(),this._web3CheckLoader=e.customWeb3CheckLoader??this._getWeb3CheckLoader(),this._solanaLoader=e.customSolanaLoader??this._getSolanaLoader()}_getDefaultFieldLoaders(){return[this._container.get(mf.NftContextFieldLoader),this._container.get(cc.TokenContextFieldLoader),this._container.get(gf.TrustedNameContextFieldLoader),this._container.get(pf.ProxyContextFieldLoader)]}_getDefaultLoaders(){return[this._container.get(Fv.ExternalPluginContextLoader),this._container.get(gf.TrustedNameContextLoader),this._container.get(mf.NftContextLoader),this._container.get(cc.TokenContextLoader),this._container.get(od.CalldataContextLoader),this._container.get(ad.UniswapContextLoader),this._container.get(Lv.DynamicNetworkContextLoader)]}_getDefaultTypedDataLoader(){return this._container.get(zv.TypedDataContextLoader)}_getWeb3CheckLoader(){return this._container.get(qv.Web3CheckContextLoader)}_getSolanaLoader(){try{return this._container.get(Uv.SolanaContextLoader)}catch{return{load:async e=>ut(new Error("[ContextModule] - DefaultContextModule: no SolanaContextLoader bound"))}}}async getContexts(e,t){const n=Object.values(Ft),i=this._loaders.filter(s=>s.canHandle(e,t??n)).map(s=>s.load(e));return(await Promise.all(i)).flat()}async getFieldContext(e,t){const n=this._fieldLoaders.filter(i=>i.canHandle(e,t));if(n.length===0)return Promise.resolve({type:Ft.ERROR,error:new Error(`Loader not found for field: ${e} and expected type: ${t}`)});for(const i of n){const s=await i.loadField(e);if(s.type!==Ft.ERROR)return s}return{type:Ft.ERROR,error:new Error(`Loader not found for field: ${e} and expected type: ${t}`)}}async getTypedDataFilters(e){return this._typedDataLoader.load(e)}async getWeb3Checks(e){return(await this._web3CheckLoader.load(e)).caseOf({Right:t=>({type:Ft.WEB3_CHECK,payload:t.descriptor,certificate:t.certificate}),Left:()=>null})}async getSolanaContext(e){return await this._solanaLoader.load(e)}};const wSe="https://crypto-assets-service.api.ledger.com/v1",xSe="https://web3checks-backend.api.ledger.com/v3",_Se="https://nft.api.live.ledger.com",SSe={cal:{url:wSe,mode:"prod",branch:"main"},web3checks:{url:xSe},metadataServiceDomain:{url:_Se},defaultLoaders:!0,customLoaders:[],defaultFieldLoaders:!0,customFieldLoaders:[],customTypedDataLoader:void 0,customSolanaLoader:void 0};let ESe=class{config=SSe;needOriginToken=!0;originToken;constructor({originToken:e}={}){this.originToken=e}removeDefaultLoaders(){return this.config.defaultLoaders=!1,this}addLoader(e){return this.config.customLoaders.push(e),this}addTypedDataLoader(e){return this.config.customTypedDataLoader=e,this}addWeb3CheckLoader(e){return this.needOriginToken=!1,this.config.customWeb3CheckLoader=e,this}addSolanaLoader(e){return this.config.customSolanaLoader=e,this}setCalConfig(e){return this.config.cal=e,this}setMetadataServiceConfig(e){return this.config.metadataServiceDomain=e,this}setWeb3ChecksConfig(e){return this.config.web3checks=e,this}setDatasourceConfig(e){return this.config.datasource=e,this}build(){if(this.needOriginToken&&!this.originToken)throw new Error("Origin token is required");const e={...this.config,originToken:this.originToken};return new bSe(e)}};var ASe=(r=>(r.FROM="FROM",r.TO="TO",r.VALUE="VALUE",r))(ASe||{}),ISe=(r=>(r.TUPLE="TUPLE",r.ARRAY="ARRAY",r.REF="REF",r.LEAF="LEAF",r.SLICE="SLICE",r))(ISe||{}),CSe=(r=>(r.STATIC_LEAF="STATIC_LEAF",r.DYNAMIC_LEAF="DYNAMIC_LEAF",r.TUPLE_LEAF="TUPLE_LEAF",r.ARRAY_LEAF="ARRAY_LEAF",r))(CSe||{});const jc={GetAddressUseCase:Symbol.for("GetAddressUseCase"),GetAppConfigurationUseCase:Symbol.for("GetAppConfigurationUseCase"),SignTransactionUseCase:Symbol.for("SignTransactionUseCase"),GenerateTransactionUseCase:Symbol.for("GenerateTransactionUseCase"),SignMessageUseCase:Symbol.for("SignMessageUseCase")},up={AppBinder:Symbol.for("AppBinder")};let Xf=class{constructor(e,t,n=bu.isSuccessResponse){this._errors=e,this._errorFactory=t,this._isSuccessResponse=n}getError(e){const t=new Sc(e).encodeToHexaString(e.statusCode);if(y3(t,this._errors))return Ur({error:this._errorFactory({...this._errors[t],errorCode:t})});if(!this._isSuccessResponse(e))return Ur({error:Jg.handle(e)})}},dk=class{static PADDING=2147483648;static splitPath(e){const t=[];return e.split("/").forEach(n=>{let i=parseInt(n,10);if(isNaN(i))throw new Error("invalid number provided");n.length>1&&n[n.length-1]==="'"&&(i+=this.PADDING),t.push(i)}),t}};function TSe(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<r.length;l++){const u=r.charAt(l),f=u.charCodeAt(0);if(e[f]!==255)throw new TypeError(u+" is ambiguous");e[f]=l}const t=r.length,n=r.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,f=0,h=0;const d=l.length;for(;h!==d&&l[h]===0;)h++,u++;const g=(d-h)*s+1>>>0,p=new Uint8Array(g);for(;h!==d;){let v=l[h],b=0;for(let _=g-1;(v!==0||b<f)&&_!==-1;_--,b++)v+=256*p[_]>>>0,p[_]=v%t>>>0,v=v/t>>>0;if(v!==0)throw new Error("Non-zero carry");f=b,h++}let m=g-f;for(;m!==g&&p[m]===0;)m++;let y=n.repeat(u);for(;m<g;++m)y+=r.charAt(p[m]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,f=0,h=0;for(;l[u]===n;)f++,u++;const d=(l.length-u)*i+1>>>0,g=new Uint8Array(d);for(;u<l.length;){const v=l.charCodeAt(u);if(v>255)return;let b=e[v];if(b===255)return;let _=0;for(let x=d-1;(b!==0||_<h)&&x!==-1;x--,_++)b+=t*g[x]>>>0,g[x]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");h=_,u++}let p=d-h;for(;p!==d&&g[p]===0;)p++;const m=new Uint8Array(f+(d-p));let y=f;for(;p!==d;)m[y++]=g[p++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var RSe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const iN=TSe(RSe);let pk=class{static encode(e){return iN.encode(e)}static decode(e){return iN.decode(e)}};const Jf={6700:{message:"Incorrect length"},6982:{message:"Security status not satisfied (Canceled by user)"},"6a80":{message:"Invalid data"},"6a81":{message:"Invalid off-chain message header"},"6a82":{message:"Invalid off-chain message format"},"6b00":{message:"Incorrect parameter P1 or P2"}};let kSe=class extends g3{constructor(e){super({tag:"SolanaAppCommandError",...e})}};const Qf=r=>new kSe(r),sN=32;let gk=class{constructor(e,t=pk){this.bs58Encoder=t,this.args=e}errorHelper=new Xf(Jf,Qf);args;getApdu(){const e={cla:224,ins:5,p1:this.args.checkOnDevice?1:0,p2:0},t=new Ma(e),n=this.args.derivationPath,i=dk.splitPath(n);return t.add8BitUIntToData(i.length),i.forEach(s=>{t.add32BitUIntToData(s)}),t.build()}parseResponse(e){return an.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{const t=new Sc(e);if(t.testMinimalLength(sN)===!1)return Ur({error:new Ns("Public key is missing")});const n=t.extractFieldByLength(sN);return Ur(n===void 0?{error:new Ns("Unable to extract public key")}:{data:this.bs58Encoder.encode(n)})})}};const oN=64;let PSe=class{constructor(e,t=pk){this.bs58Encoder=t,this.args=e}errorHelper=new Xf(Jf,Qf);args;getApdu(){return new Ma({cla:224,ins:7,p1:1,p2:0}).addBufferToData(this.args.message).build()}parseResponse(e){return an.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{const t=new Sc(e).extractFieldByLength(oN);if(!t||t.length!==oN)return Ur({error:new Ns("Signature extraction failed")});const n=Uint8Array.of(1),i=this.args.message,s=new Uint8Array(n.length+t.length+i.length);s.set(n,0),s.set(t,n.length),s.set(i,n.length+t.length);const o=this.bs58Encoder.encode(s);return Ur({data:{signature:o}})})}};const OSe=65535;let DSe=class{constructor(e,t,n=pk){this.api=e,this.args=t,this.bs58Encoder=n}async run(){const{sendingData:e,derivationPath:t}=this.args;if(e.length===0)return Ur({error:new Ns("Message cannot be empty")});if(e.length>OSe)return Ur({error:new Ns(`Message too long: ${e.length} bytes (max is 65535)`)});const n=dk.splitPath(t),i=await this.api.sendCommand(new gk({derivationPath:t,checkOnDevice:!1}));if(!("data"in i))return Ur({error:new Ns("Error getting public key from device")});const s=this.bs58Encoder.decode(i.data),o=this._buildFullMessage(e,s),a=this._buildApduCommand(o,n);return a.length>nd?Ur({error:new Ns("The APDU command exceeds the maximum allowable size (255 bytes)")}):this.api.sendCommand(new PSe({message:a}))}_buildFullMessage(e,t){return new Ed().add8BitUIntToData(255).addAsciiStringToData("solana offchain").add8BitUIntToData(0).addBufferToData(new Uint8Array(32)).add8BitUIntToData(0).add8BitUIntToData(1).addBufferToData(t).add8BitUIntToData(e.length&255).add8BitUIntToData(e.length>>8&255).addBufferToData(e).build()}_buildApduCommand(e,t){const n=t.length*4,i=new Ed(e.length+1+1+n);return i.add8BitUIntToData(1),i.add8BitUIntToData(t.length),t.forEach(s=>{const o=new Uint8Array(4);new DataView(o.buffer).setUint32(0,s,!1),i.addBufferToData(o)}),i.addBufferToData(e),i.build()}};const ld={Dmk:Symbol.for("Dmk"),SessionId:Symbol.for("SessionId"),ContextModule:Symbol.for("ContextModule")};var UC=(r=>(r.LONG="long",r.SHORT="short",r))(UC||{});let ZW=class{errorHelper=new Xf(Jf,Qf);args;constructor(e){this.args=e}getApdu(){return new Ma({cla:224,ins:4,p1:0,p2:0}).build()}parseResponse(e){return an.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{const t=new Sc(e).extractFieldByLength(5);if(!t||t.length!==5||t.some(i=>i===void 0))return Ur({error:new Ns("Invalid response")});const n={blindSigningEnabled:!!t[0],pubKeyDisplayMode:t[1]===0?UC.LONG:UC.SHORT,version:`${t[2]}.${t[3]}.${t[4]}`};return Ur({data:n})})}};var gr=xc();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xa=BigInt(0),ds=BigInt(1),QE=BigInt(2),$Se=BigInt(8),MSe={zip215:!0};function BSe(r,e,t,n){const i=r.sqr(t),s=r.sqr(n),o=r.add(r.mul(e.a,i),s),a=r.add(r.ONE,r.mul(e.d,r.mul(i,s)));return r.eql(o,a)}function NSe(r,e={}){const{Fp:t,Fn:n}=eq("edwards",r,e),{h:i,n:s}=r;Fg(e,{},{uvRatio:"function"});const o=QE<<BigInt(n.BYTES*8)-ds,a=p=>t.create(p),c=e.uvRatio||((p,m)=>{try{return{isValid:!0,value:t.sqrt(t.div(p,m))}}catch{return{isValid:!1,value:Xa}}});if(!BSe(t,r,r.Gx,r.Gy))throw new Error("bad curve params: generator point");function l(p,m,y=!1){const v=y?ds:Xa;return zh("coordinate "+p,m,v,o),m}function u(p){if(!(p instanceof d))throw new Error("ExtendedPoint expected")}const f=fv((p,m)=>{const{ex:y,ey:v,ez:b}=p,_=p.is0();m==null&&(m=_?$Se:t.inv(b));const x=a(y*m),E=a(v*m),S=a(b*m);if(_)return{x:Xa,y:ds};if(S!==ds)throw new Error("invZ was invalid");return{x,y:E}}),h=fv(p=>{const{a:m,d:y}=r;if(p.is0())throw new Error("bad point: ZERO");const{ex:v,ey:b,ez:_,et:x}=p,E=a(v*v),S=a(b*b),C=a(_*_),k=a(C*C),$=a(E*m),J=a(C*a($+S)),j=a(k+a(y*a(E*S)));if(J!==j)throw new Error("bad point: equation left != right (1)");const L=a(v*b),w=a(_*x);if(L!==w)throw new Error("bad point: equation left != right (2)");return!0});class d{constructor(m,y,v,b){this.ex=l("x",m),this.ey=l("y",y),this.ez=l("z",v,!0),this.et=l("t",b),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof d)throw new Error("extended point not allowed");const{x:y,y:v}=m||{};return l("x",y),l("y",v),new d(y,v,ds,a(y*v))}static normalizeZ(m){return Yz(d,"ez",m)}static msm(m,y){return Zz(d,n,m,y)}_setWindowSize(m){this.precompute(m)}precompute(m=8,y=!0){return g.setWindowSize(this,m),y||this.multiply(QE),this}assertValidity(){h(this)}equals(m){u(m);const{ex:y,ey:v,ez:b}=this,{ex:_,ey:x,ez:E}=m,S=a(y*E),C=a(_*b),k=a(v*E),$=a(x*b);return S===C&&k===$}is0(){return this.equals(d.ZERO)}negate(){return new d(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:m}=r,{ex:y,ey:v,ez:b}=this,_=a(y*y),x=a(v*v),E=a(QE*a(b*b)),S=a(m*_),C=y+v,k=a(a(C*C)-_-x),$=S+x,J=$-E,j=S-x,L=a(k*J),w=a($*j),R=a(k*j),N=a(J*$);return new d(L,w,N,R)}add(m){u(m);const{a:y,d:v}=r,{ex:b,ey:_,ez:x,et:E}=this,{ex:S,ey:C,ez:k,et:$}=m,J=a(b*S),j=a(_*C),L=a(E*v*$),w=a(x*k),R=a((b+_)*(S+C)-J-j),N=w-L,Y=w+L,z=a(j-y*J),G=a(R*N),te=a(Y*z),X=a(R*z),T=a(N*Y);return new d(G,te,T,X)}subtract(m){return this.add(m.negate())}multiply(m){const y=m;zh("scalar",y,ds,s);const{p:v,f:b}=g.wNAFCached(this,y,d.normalizeZ);return d.normalizeZ([v,b])[0]}multiplyUnsafe(m,y=d.ZERO){const v=m;return zh("scalar",v,Xa,s),v===Xa?d.ZERO:this.is0()||v===ds?this:g.wNAFCachedUnsafe(this,v,d.normalizeZ,y)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return g.wNAFCachedUnsafe(this,s).is0()}toAffine(m){return f(this,m)}clearCofactor(){return i===ds?this:this.multiplyUnsafe(i)}static fromBytes(m,y=!1){return Ao(m),this.fromHex(m,y)}static fromHex(m,y=!1){const{d:v,a:b}=r,_=t.BYTES;m=jn("pointHex",m,_),Sf("zip215",y);const x=m.slice(),E=m[_-1];x[_-1]=E&-129;const S=sg(x),C=y?o:t.ORDER;zh("pointHex.y",S,Xa,C);const k=a(S*S),$=a(k-ds),J=a(v*k-b);let{isValid:j,value:L}=c($,J);if(!j)throw new Error("Point.fromHex: invalid y coordinate");const w=(L&ds)===ds,R=(E&128)!==0;if(!y&&L===Xa&&R)throw new Error("Point.fromHex: x=0 and x_0=1");return R!==w&&(L=a(-L)),d.fromAffine({x:L,y:S})}static fromPrivateScalar(m){return d.BASE.multiply(m)}toBytes(){const{x:m,y}=this.toAffine(),v=Mb(y,t.BYTES);return v[v.length-1]|=m&ds?128:0,v}toRawBytes(){return this.toBytes()}toHex(){return pu(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}d.BASE=new d(r.Gx,r.Gy,ds,a(r.Gx*r.Gy)),d.ZERO=new d(Xa,ds,ds,Xa),d.Fp=t,d.Fn=n;const g=Qz(d,n.BYTES*8);return d}function LSe(r,e){Fg(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t,hash:n}=e,{BASE:i,Fp:s,Fn:o}=r,a=o.ORDER,c=e.randomBytes||Ob,l=e.adjustScalarBytes||(x=>x),u=e.domain||((x,E,S)=>{if(Sf("phflag",S),E.length||S)throw new Error("Contexts/pre-hash are not supported");return x});function f(x){return o.create(x)}function h(x){return f(sg(x))}function d(x){const E=s.BYTES;x=jn("private key",x,E);const S=jn("hashed private key",n(x),2*E),C=l(S.slice(0,E)),k=S.slice(E,2*E),$=h(C);return{head:C,prefix:k,scalar:$}}function g(x){const{head:E,prefix:S,scalar:C}=d(x),k=i.multiply(C),$=k.toBytes();return{head:E,prefix:S,scalar:C,point:k,pointBytes:$}}function p(x){return g(x).pointBytes}function m(x=Uint8Array.of(),...E){const S=da(...E);return h(n(u(S,jn("context",x),!!t)))}function y(x,E,S={}){x=jn("message",x),t&&(x=t(x));const{prefix:C,scalar:k,pointBytes:$}=g(E),J=m(S.context,C,x),j=i.multiply(J).toBytes(),L=m(S.context,j,$,x),w=f(J+L*k);zh("signature.s",w,Xa,a);const R=s.BYTES,N=da(j,Mb(w,R));return jn("result",N,R*2)}const v=MSe;function b(x,E,S,C=v){const{context:k,zip215:$}=C,J=s.BYTES;x=jn("signature",x,2*J),E=jn("message",E),S=jn("publicKey",S,J),$!==void 0&&Sf("zip215",$),t&&(E=t(E));const j=sg(x.slice(J,2*J));let L,w,R;try{L=r.fromHex(S,$),w=r.fromHex(x.slice(0,J),$),R=i.multiplyUnsafe(j)}catch{return!1}if(!$&&L.isSmallOrder())return!1;const N=m(k,w.toBytes(),L.toBytes(),E);return w.add(L.multiplyUnsafe(N)).subtract(R).clearCofactor().is0()}return i.precompute(8),{getPublicKey:p,sign:y,verify:b,utils:{getExtendedPublicKey:g,randomPrivateKey:()=>c(s.BYTES),precompute(x=8,E=r.BASE){return E.precompute(x,!1)}},Point:r}}function FSe(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Jd(e.n,r.nBitLength,!0),i={Fp:t,Fn:n,uvRatio:r.uvRatio},s={hash:r.hash,randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:i,eddsaOpts:s}}function USe(r,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:r})}function zSe(r){const{CURVE:e,curveOpts:t,eddsaOpts:n}=FSe(r),i=NSe(e,t),s=LSe(i,n);return USe(r,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const qSe=BigInt(1),aN=BigInt(2);BigInt(3);const jSe=BigInt(5),VSe=BigInt(8),Pw={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:VSe,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function KSe(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),s=Pw.p,a=r*r%s*r%s,c=Nn(a,aN,s)*a%s,l=Nn(c,qSe,s)*r%s,u=Nn(l,jSe,s)*l%s,f=Nn(u,e,s)*u%s,h=Nn(f,t,s)*f%s,d=Nn(h,n,s)*h%s,g=Nn(d,i,s)*d%s,p=Nn(g,i,s)*d%s,m=Nn(p,e,s)*u%s;return{pow_p_5_8:Nn(m,aN,s)*r%s,b2:a}}function HSe(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const cN=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function WSe(r,e){const t=Pw.p,n=Vn(e*e*e,t),i=Vn(n*n*e,t),s=KSe(r*i).pow_p_5_8;let o=Vn(r*n*s,t);const a=Vn(e*o*o,t),c=o,l=Vn(o*cN,t),u=a===r,f=a===Vn(-r,t),h=a===Vn(-r*cN,t);return u&&(o=c),(f||h)&&(o=l),$ie(o,t)&&(o=Vn(-o,t)),{isValid:u||f,value:o}}const GSe=Jd(Pw.p,void 0,!0),YSe={...Pw,Fp:GSe,hash:ig,adjustScalarBytes:HSe,uvRatio:WSe},sm=zSe(YSe);var XSe=u3();const Mi=Gs(XSe);var tn={};function Vc(r,e,t){return e<=r&&r<=t}function Ow(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function JSe(r){for(var e=String(r),t=e.length,n=0,i=[];n<t;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===t-1)i.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=s&1023,c=o&1023;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function QSe(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Vv=-1;function mk(r){this.tokens=[].slice.call(r)}mk.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Vv},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var Od=-1;function ZE(r,e){if(r)throw TypeError("Decoder error");return e||65533}var Kv="utf-8";function Hv(r,e){if(!(this instanceof Hv))return new Hv(r,e);if(r=r!==void 0?String(r).toLowerCase():Kv,r!==Kv)throw new Error("Encoding not supported. Only utf-8 is supported");e=Ow(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Hv.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=Ow(t),this._streaming||(this._decoder=new ZSe({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new mk(n),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Od);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Od)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),QSe(s)}};function Wv(r,e){if(!(this instanceof Wv))return new Wv(r,e);if(r=r!==void 0?String(r).toLowerCase():Kv,r!==Kv)throw new Error("Encoding not supported. Only utf-8 is supported");e=Ow(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Wv.prototype={encode:function(e,t){e=e?String(e):"",t=Ow(t),this._streaming||(this._encoder=new eEe(this._options)),this._streaming=!!t.stream;for(var n=[],i=new mk(JSe(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Od);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Od;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function ZSe(r){var e=r.fatal,t=0,n=0,i=0,s=128,o=191;this.handler=function(a,c){if(c===Vv&&i!==0)return i=0,ZE(e);if(c===Vv)return Od;if(i===0){if(Vc(c,0,127))return c;if(Vc(c,194,223))i=1,t=c-192;else if(Vc(c,224,239))c===224&&(s=160),c===237&&(o=159),i=2,t=c-224;else if(Vc(c,240,244))c===240&&(s=144),c===244&&(o=143),i=3,t=c-240;else return ZE(e);return t=t<<6*i,null}if(!Vc(c,s,o))return t=i=n=0,s=128,o=191,a.prepend(c),ZE(e);if(s=128,o=191,n+=1,t+=c-128<<6*(i-n),n!==i)return null;var l=t;return t=i=n=0,l}}function eEe(r){r.fatal,this.handler=function(e,t){if(t===Vv)return Od;if(Vc(t,0,127))return t;var n,i;Vc(t,128,2047)?(n=1,i=192):Vc(t,2048,65535)?(n=2,i=224):Vc(t,65536,1114111)&&(n=3,i=240);for(var s=[(t>>6*n)+i];n>0;){var o=t>>6*(n-1);s.push(128|o&63),n-=1}return s}}const tEe=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Hv,TextEncoder:Wv},Symbol.toStringTag,{value:"Module"})),rEe=Xd(tEe);var lN;function nEe(){if(lN)return tn;lN=1;var r=tn&&tn.__createBinding||(Object.create?function(k,$,J,j){j===void 0&&(j=J),Object.defineProperty(k,j,{enumerable:!0,get:function(){return $[J]}})}:function(k,$,J,j){j===void 0&&(j=J),k[j]=$[J]}),e=tn&&tn.__setModuleDefault||(Object.create?function(k,$){Object.defineProperty(k,"default",{enumerable:!0,value:$})}:function(k,$){k.default=$}),t=tn&&tn.__decorate||function(k,$,J,j){var L=arguments.length,w=L<3?$:j===null?j=Object.getOwnPropertyDescriptor($,J):j,R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(k,$,J,j);else for(var N=k.length-1;N>=0;N--)(R=k[N])&&(w=(L<3?R(w):L>3?R($,J,w):R($,J))||w);return L>3&&w&&Object.defineProperty($,J,w),w},n=tn&&tn.__importStar||function(k){if(k&&k.__esModule)return k;var $={};if(k!=null)for(var J in k)J!=="default"&&Object.hasOwnProperty.call(k,J)&&r($,k,J);return e($,k),$},i=tn&&tn.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(tn,"__esModule",{value:!0}),tn.deserializeUnchecked=tn.deserialize=tn.serialize=tn.BinaryReader=tn.BinaryWriter=tn.BorshError=tn.baseDecode=tn.baseEncode=void 0;const s=i(gq()),o=i(u3()),a=n(rEe),c=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,l=new c("utf-8",{fatal:!0});function u(k){return typeof k=="string"&&(k=Xe.from(k,"utf8")),o.default.encode(Xe.from(k))}tn.baseEncode=u;function f(k){return Xe.from(o.default.decode(k))}tn.baseDecode=f;const h=1024;class d extends Error{constructor($){super($),this.fieldPath=[],this.originalMessage=$}addToFieldPath($){this.fieldPath.splice(0,0,$),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}tn.BorshError=d;class g{constructor(){this.buf=Xe.alloc(h),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Xe.concat([this.buf,Xe.alloc(h)]))}writeU8($){this.maybeResize(),this.buf.writeUInt8($,this.length),this.length+=1}writeU16($){this.maybeResize(),this.buf.writeUInt16LE($,this.length),this.length+=2}writeU32($){this.maybeResize(),this.buf.writeUInt32LE($,this.length),this.length+=4}writeU64($){this.maybeResize(),this.writeBuffer(Xe.from(new s.default($).toArray("le",8)))}writeU128($){this.maybeResize(),this.writeBuffer(Xe.from(new s.default($).toArray("le",16)))}writeU256($){this.maybeResize(),this.writeBuffer(Xe.from(new s.default($).toArray("le",32)))}writeU512($){this.maybeResize(),this.writeBuffer(Xe.from(new s.default($).toArray("le",64)))}writeBuffer($){this.buf=Xe.concat([Xe.from(this.buf.subarray(0,this.length)),$,Xe.alloc(h)]),this.length+=$.length}writeString($){this.maybeResize();const J=Xe.from($,"utf8");this.writeU32(J.length),this.writeBuffer(J)}writeFixedArray($){this.writeBuffer(Xe.from($))}writeArray($,J){this.maybeResize(),this.writeU32($.length);for(const j of $)this.maybeResize(),J(j)}toArray(){return this.buf.subarray(0,this.length)}}tn.BinaryWriter=g;function p(k,$,J){const j=J.value;J.value=function(...L){try{return j.apply(this,L)}catch(w){if(w instanceof RangeError){const R=w.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(R)>=0)throw new d("Reached the end of buffer when deserializing")}throw w}}}class m{constructor($){this.buf=$,this.offset=0}readU8(){const $=this.buf.readUInt8(this.offset);return this.offset+=1,$}readU16(){const $=this.buf.readUInt16LE(this.offset);return this.offset+=2,$}readU32(){const $=this.buf.readUInt32LE(this.offset);return this.offset+=4,$}readU64(){const $=this.readBuffer(8);return new s.default($,"le")}readU128(){const $=this.readBuffer(16);return new s.default($,"le")}readU256(){const $=this.readBuffer(32);return new s.default($,"le")}readU512(){const $=this.readBuffer(64);return new s.default($,"le")}readBuffer($){if(this.offset+$>this.buf.length)throw new d(`Expected buffer length ${$} isn't within bounds`);const J=this.buf.slice(this.offset,this.offset+$);return this.offset+=$,J}readString(){const $=this.readU32(),J=this.readBuffer($);try{return l.decode(J)}catch(j){throw new d(`Error decoding UTF-8 string: ${j}`)}}readFixedArray($){return new Uint8Array(this.readBuffer($))}readArray($){const J=this.readU32(),j=Array();for(let L=0;L<J;++L)j.push($());return j}}t([p],m.prototype,"readU8",null),t([p],m.prototype,"readU16",null),t([p],m.prototype,"readU32",null),t([p],m.prototype,"readU64",null),t([p],m.prototype,"readU128",null),t([p],m.prototype,"readU256",null),t([p],m.prototype,"readU512",null),t([p],m.prototype,"readString",null),t([p],m.prototype,"readFixedArray",null),t([p],m.prototype,"readArray",null),tn.BinaryReader=m;function y(k){return k.charAt(0).toUpperCase()+k.slice(1)}function v(k,$,J,j,L){try{if(typeof j=="string")L[`write${y(j)}`](J);else if(j instanceof Array)if(typeof j[0]=="number"){if(J.length!==j[0])throw new d(`Expecting byte array of length ${j[0]}, but got ${J.length} bytes`);L.writeFixedArray(J)}else if(j.length===2&&typeof j[1]=="number"){if(J.length!==j[1])throw new d(`Expecting byte array of length ${j[1]}, but got ${J.length} bytes`);for(let w=0;w<j[1];w++)v(k,null,J[w],j[0],L)}else L.writeArray(J,w=>{v(k,$,w,j[0],L)});else if(j.kind!==void 0)switch(j.kind){case"option":{J==null?L.writeU8(0):(L.writeU8(1),v(k,$,J,j.type,L));break}case"map":{L.writeU32(J.size),J.forEach((w,R)=>{v(k,$,R,j.key,L),v(k,$,w,j.value,L)});break}default:throw new d(`FieldType ${j} unrecognized`)}else b(k,J,L)}catch(w){throw w instanceof d&&w.addToFieldPath($),w}}function b(k,$,J){if(typeof $.borshSerialize=="function"){$.borshSerialize(J);return}const j=k.get($.constructor);if(!j)throw new d(`Class ${$.constructor.name} is missing in schema`);if(j.kind==="struct")j.fields.map(([L,w])=>{v(k,L,$[L],w,J)});else if(j.kind==="enum"){const L=$[j.field];for(let w=0;w<j.values.length;++w){const[R,N]=j.values[w];if(R===L){J.writeU8(w),v(k,R,$[R],N,J);break}}}else throw new d(`Unexpected schema kind: ${j.kind} for ${$.constructor.name}`)}function _(k,$,J=g){const j=new J;return b(k,$,j),j.toArray()}tn.serialize=_;function x(k,$,J,j){try{if(typeof J=="string")return j[`read${y(J)}`]();if(J instanceof Array){if(typeof J[0]=="number")return j.readFixedArray(J[0]);if(typeof J[1]=="number"){const L=[];for(let w=0;w<J[1];w++)L.push(x(k,null,J[0],j));return L}else return j.readArray(()=>x(k,$,J[0],j))}if(J.kind==="option")return j.readU8()?x(k,$,J.type,j):void 0;if(J.kind==="map"){let L=new Map;const w=j.readU32();for(let R=0;R<w;R++){const N=x(k,$,J.key,j),Y=x(k,$,J.value,j);L.set(N,Y)}return L}return E(k,J,j)}catch(L){throw L instanceof d&&L.addToFieldPath($),L}}function E(k,$,J){if(typeof $.borshDeserialize=="function")return $.borshDeserialize(J);const j=k.get($);if(!j)throw new d(`Class ${$.name} is missing in schema`);if(j.kind==="struct"){const L={};for(const[w,R]of k.get($).fields)L[w]=x(k,w,R,J);return new $(L)}if(j.kind==="enum"){const L=J.readU8();if(L>=j.values.length)throw new d(`Enum index: ${L} is out of range`);const[w,R]=j.values[L],N=x(k,w,R,J);return new $({[w]:N})}throw new d(`Unexpected schema kind: ${j.kind} for ${$.constructor.name}`)}function S(k,$,J,j=m){const L=new j(J),w=E(k,$,L);if(L.offset<J.length)throw new d(`Unexpected ${J.length-L.offset} bytes after deserialized data`);return w}tn.deserialize=S;function C(k,$,J,j=m){const L=new j(J);return E(k,$,L)}return tn.deserializeUnchecked=C,tn}var e2=nEe(),Be={},uN;function iEe(){if(uN)return Be;uN=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.s16=Be.s8=Be.nu64be=Be.u48be=Be.u40be=Be.u32be=Be.u24be=Be.u16be=Be.nu64=Be.u48=Be.u40=Be.u32=Be.u24=Be.u16=Be.u8=Be.offset=Be.greedy=Be.Constant=Be.UTF8=Be.CString=Be.Blob=Be.Boolean=Be.BitField=Be.BitStructure=Be.VariantLayout=Be.Union=Be.UnionLayoutDiscriminator=Be.UnionDiscriminator=Be.Structure=Be.Sequence=Be.DoubleBE=Be.Double=Be.FloatBE=Be.Float=Be.NearInt64BE=Be.NearInt64=Be.NearUInt64BE=Be.NearUInt64=Be.IntBE=Be.Int=Be.UIntBE=Be.UInt=Be.OffsetLayout=Be.GreedyCount=Be.ExternalLayout=Be.bindConstructorLayout=Be.nameWithProperty=Be.Layout=Be.uint8ArrayToBuffer=Be.checkUint8Array=void 0,Be.constant=Be.utf8=Be.cstr=Be.blob=Be.unionLayoutDiscriminator=Be.union=Be.seq=Be.bits=Be.struct=Be.f64be=Be.f64=Be.f32be=Be.f32=Be.ns64be=Be.s48be=Be.s40be=Be.s32be=Be.s24be=Be.s16be=Be.ns64=Be.s48=Be.s40=Be.s32=Be.s24=void 0;const r=xc();function e(T){if(!(T instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Be.checkUint8Array=e;function t(T){return e(T),r.Buffer.from(T.buffer,T.byteOffset,T.length)}Be.uint8ArrayToBuffer=t;let n=class{constructor(A,O){if(!Number.isInteger(A))throw new TypeError("span must be an integer");this.span=A,this.property=O}makeDestinationObject(){return{}}getSpan(A,O){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(A){const O=Object.create(this.constructor.prototype);return Object.assign(O,this),O.property=A,O}fromArray(A){}};Be.Layout=n;function i(T,A){return A.property?T+"["+A.property+"]":T}Be.nameWithProperty=i;function s(T,A){if(typeof T!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(T,"layout_"))throw new Error("Class is already bound to a layout");if(!(A&&A instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(A,"boundConstructor_"))throw new Error("layout is already bound to a constructor");T.layout_=A,A.boundConstructor_=T,A.makeDestinationObject=()=>new T,Object.defineProperty(T.prototype,"encode",{value(O,I){return A.encode(this,O,I)},writable:!0}),Object.defineProperty(T,"decode",{value(O,I){return A.decode(O,I)},writable:!0})}Be.bindConstructorLayout=s;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}Be.ExternalLayout=o;class a extends o{constructor(A=1,O){if(!Number.isInteger(A)||0>=A)throw new TypeError("elementSpan must be a (positive) integer");super(-1,O),this.elementSpan=A}isCount(){return!0}decode(A,O=0){e(A);const I=A.length-O;return Math.floor(I/this.elementSpan)}encode(A,O,I){return 0}}Be.GreedyCount=a;class c extends o{constructor(A,O=0,I){if(!(A instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(O))throw new TypeError("offset must be integer or undefined");super(A.span,I||A.property),this.layout=A,this.offset=O}isCount(){return this.layout instanceof l||this.layout instanceof u}decode(A,O=0){return this.layout.decode(A,O+this.offset)}encode(A,O,I=0){return this.layout.encode(A,O,I+this.offset)}}Be.OffsetLayout=c;class l extends n{constructor(A,O){if(super(A,O),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(A,O=0){return t(A).readUIntLE(O,this.span)}encode(A,O,I=0){return t(O).writeUIntLE(A,I,this.span),this.span}}Be.UInt=l;class u extends n{constructor(A,O){if(super(A,O),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(A,O=0){return t(A).readUIntBE(O,this.span)}encode(A,O,I=0){return t(O).writeUIntBE(A,I,this.span),this.span}}Be.UIntBE=u;class f extends n{constructor(A,O){if(super(A,O),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(A,O=0){return t(A).readIntLE(O,this.span)}encode(A,O,I=0){return t(O).writeIntLE(A,I,this.span),this.span}}Be.Int=f;class h extends n{constructor(A,O){if(super(A,O),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(A,O=0){return t(A).readIntBE(O,this.span)}encode(A,O,I=0){return t(O).writeIntBE(A,I,this.span),this.span}}Be.IntBE=h;const d=Math.pow(2,32);function g(T){const A=Math.floor(T/d),O=T-A*d;return{hi32:A,lo32:O}}function p(T,A){return T*d+A}class m extends n{constructor(A){super(8,A)}decode(A,O=0){const I=t(A),U=I.readUInt32LE(O),Z=I.readUInt32LE(O+4);return p(Z,U)}encode(A,O,I=0){const U=g(A),Z=t(O);return Z.writeUInt32LE(U.lo32,I),Z.writeUInt32LE(U.hi32,I+4),8}}Be.NearUInt64=m;class y extends n{constructor(A){super(8,A)}decode(A,O=0){const I=t(A),U=I.readUInt32BE(O),Z=I.readUInt32BE(O+4);return p(U,Z)}encode(A,O,I=0){const U=g(A),Z=t(O);return Z.writeUInt32BE(U.hi32,I),Z.writeUInt32BE(U.lo32,I+4),8}}Be.NearUInt64BE=y;class v extends n{constructor(A){super(8,A)}decode(A,O=0){const I=t(A),U=I.readUInt32LE(O),Z=I.readInt32LE(O+4);return p(Z,U)}encode(A,O,I=0){const U=g(A),Z=t(O);return Z.writeUInt32LE(U.lo32,I),Z.writeInt32LE(U.hi32,I+4),8}}Be.NearInt64=v;class b extends n{constructor(A){super(8,A)}decode(A,O=0){const I=t(A),U=I.readInt32BE(O),Z=I.readUInt32BE(O+4);return p(U,Z)}encode(A,O,I=0){const U=g(A),Z=t(O);return Z.writeInt32BE(U.hi32,I),Z.writeUInt32BE(U.lo32,I+4),8}}Be.NearInt64BE=b;class _ extends n{constructor(A){super(4,A)}decode(A,O=0){return t(A).readFloatLE(O)}encode(A,O,I=0){return t(O).writeFloatLE(A,I),4}}Be.Float=_;class x extends n{constructor(A){super(4,A)}decode(A,O=0){return t(A).readFloatBE(O)}encode(A,O,I=0){return t(O).writeFloatBE(A,I),4}}Be.FloatBE=x;class E extends n{constructor(A){super(8,A)}decode(A,O=0){return t(A).readDoubleLE(O)}encode(A,O,I=0){return t(O).writeDoubleLE(A,I),8}}Be.Double=E;class S extends n{constructor(A){super(8,A)}decode(A,O=0){return t(A).readDoubleBE(O)}encode(A,O,I=0){return t(O).writeDoubleBE(A,I),8}}Be.DoubleBE=S;class C extends n{constructor(A,O,I){if(!(A instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(O instanceof o&&O.isCount()||Number.isInteger(O)&&0<=O))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let U=-1;!(O instanceof o)&&0<A.span&&(U=O*A.span),super(U,I),this.elementLayout=A,this.count=O}getSpan(A,O=0){if(0<=this.span)return this.span;let I=0,U=this.count;if(U instanceof o&&(U=U.decode(A,O)),0<this.elementLayout.span)I=U*this.elementLayout.span;else{let Z=0;for(;Z<U;)I+=this.elementLayout.getSpan(A,O+I),++Z}return I}decode(A,O=0){const I=[];let U=0,Z=this.count;for(Z instanceof o&&(Z=Z.decode(A,O));U<Z;)I.push(this.elementLayout.decode(A,O)),O+=this.elementLayout.getSpan(A,O),U+=1;return I}encode(A,O,I=0){const U=this.elementLayout,Z=A.reduce((oe,he)=>oe+U.encode(he,O,I+oe),0);return this.count instanceof o&&this.count.encode(A.length,O,I),Z}}Be.Sequence=C;class k extends n{constructor(A,O,I){if(!(Array.isArray(A)&&A.reduce((Z,oe)=>Z&&oe instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof O=="boolean"&&I===void 0&&(I=O,O=void 0);for(const Z of A)if(0>Z.span&&Z.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let U=-1;try{U=A.reduce((Z,oe)=>Z+oe.getSpan(),0)}catch{}super(U,O),this.fields=A,this.decodePrefixes=!!I}getSpan(A,O=0){if(0<=this.span)return this.span;let I=0;try{I=this.fields.reduce((U,Z)=>{const oe=Z.getSpan(A,O);return O+=oe,U+oe},0)}catch{throw new RangeError("indeterminate span")}return I}decode(A,O=0){e(A);const I=this.makeDestinationObject();for(const U of this.fields)if(U.property!==void 0&&(I[U.property]=U.decode(A,O)),O+=U.getSpan(A,O),this.decodePrefixes&&A.length===O)break;return I}encode(A,O,I=0){const U=I;let Z=0,oe=0;for(const he of this.fields){let re=he.span;if(oe=0<re?re:0,he.property!==void 0){const F=A[he.property];F!==void 0&&(oe=he.encode(F,O,I),0>re&&(re=he.getSpan(O,I)))}Z=I,I+=re}return Z+oe-U}fromArray(A){const O=this.makeDestinationObject();for(const I of this.fields)I.property!==void 0&&0<A.length&&(O[I.property]=A.shift());return O}layoutFor(A){if(typeof A!="string")throw new TypeError("property must be string");for(const O of this.fields)if(O.property===A)return O}offsetOf(A){if(typeof A!="string")throw new TypeError("property must be string");let O=0;for(const I of this.fields){if(I.property===A)return O;0>I.span?O=-1:0<=O&&(O+=I.span)}}}Be.Structure=k;class ${constructor(A){this.property=A}decode(A,O){throw new Error("UnionDiscriminator is abstract")}encode(A,O,I){throw new Error("UnionDiscriminator is abstract")}}Be.UnionDiscriminator=$;class J extends ${constructor(A,O){if(!(A instanceof o&&A.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(O||A.property||"variant"),this.layout=A}decode(A,O){return this.layout.decode(A,O)}encode(A,O,I){return this.layout.encode(A,O,I)}}Be.UnionLayoutDiscriminator=J;class j extends n{constructor(A,O,I){let U;if(A instanceof l||A instanceof u)U=new J(new c(A));else if(A instanceof o&&A.isCount())U=new J(A);else if(A instanceof $)U=A;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(O===void 0&&(O=null),!(O===null||O instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(O!==null){if(0>O.span)throw new Error("defaultLayout must have constant span");O.property===void 0&&(O=O.replicate("content"))}let Z=-1;O&&(Z=O.span,0<=Z&&(A instanceof l||A instanceof u)&&(Z+=U.layout.span)),super(Z,I),this.discriminator=U,this.usesPrefixDiscriminator=A instanceof l||A instanceof u,this.defaultLayout=O,this.registry={};let oe=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(he){return oe(he)},this.configGetSourceVariant=function(he){oe=he.bind(this)}}getSpan(A,O=0){if(0<=this.span)return this.span;const I=this.getVariant(A,O);if(!I)throw new Error("unable to determine span for unrecognized variant");return I.getSpan(A,O)}defaultGetSourceVariant(A){if(Object.prototype.hasOwnProperty.call(A,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(A,this.defaultLayout.property))return;const O=this.registry[A[this.discriminator.property]];if(O&&(!O.layout||O.property&&Object.prototype.hasOwnProperty.call(A,O.property)))return O}else for(const O in this.registry){const I=this.registry[O];if(I.property&&Object.prototype.hasOwnProperty.call(A,I.property))return I}throw new Error("unable to infer src variant")}decode(A,O=0){let I;const U=this.discriminator,Z=U.decode(A,O),oe=this.registry[Z];if(oe===void 0){const he=this.defaultLayout;let re=0;this.usesPrefixDiscriminator&&(re=U.layout.span),I=this.makeDestinationObject(),I[U.property]=Z,I[he.property]=he.decode(A,O+re)}else I=oe.decode(A,O);return I}encode(A,O,I=0){const U=this.getSourceVariant(A);if(U===void 0){const Z=this.discriminator,oe=this.defaultLayout;let he=0;return this.usesPrefixDiscriminator&&(he=Z.layout.span),Z.encode(A[Z.property],O,I),he+oe.encode(A[oe.property],O,I+he)}return U.encode(A,O,I)}addVariant(A,O,I){const U=new L(this,A,O,I);return this.registry[A]=U,U}getVariant(A,O=0){let I;return A instanceof Uint8Array?I=this.discriminator.decode(A,O):I=A,this.registry[I]}}Be.Union=j;class L extends n{constructor(A,O,I,U){if(!(A instanceof j))throw new TypeError("union must be a Union");if(!Number.isInteger(O)||0>O)throw new TypeError("variant must be a (non-negative) integer");if(typeof I=="string"&&U===void 0&&(U=I,I=null),I){if(!(I instanceof n))throw new TypeError("layout must be a Layout");if(A.defaultLayout!==null&&0<=I.span&&I.span>A.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof U!="string")throw new TypeError("variant must have a String property")}let Z=A.span;0>A.span&&(Z=I?I.span:0,0<=Z&&A.usesPrefixDiscriminator&&(Z+=A.discriminator.layout.span)),super(Z,U),this.union=A,this.variant=O,this.layout=I||null}getSpan(A,O=0){if(0<=this.span)return this.span;let I=0;this.union.usesPrefixDiscriminator&&(I=this.union.discriminator.layout.span);let U=0;return this.layout&&(U=this.layout.getSpan(A,O+I)),I+U}decode(A,O=0){const I=this.makeDestinationObject();if(this!==this.union.getVariant(A,O))throw new Error("variant mismatch");let U=0;return this.union.usesPrefixDiscriminator&&(U=this.union.discriminator.layout.span),this.layout?I[this.property]=this.layout.decode(A,O+U):this.property?I[this.property]=!0:this.union.usesPrefixDiscriminator&&(I[this.union.discriminator.property]=this.variant),I}encode(A,O,I=0){let U=0;if(this.union.usesPrefixDiscriminator&&(U=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(A,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,O,I);let Z=U;if(this.layout&&(this.layout.encode(A[this.property],O,I+U),Z+=this.layout.getSpan(O,I+U),0<=this.union.span&&Z>this.union.span))throw new Error("encoded variant overruns containing union");return Z}fromArray(A){if(this.layout)return this.layout.fromArray(A)}}Be.VariantLayout=L;function w(T){return 0>T&&(T+=4294967296),T}class R extends n{constructor(A,O,I){if(!(A instanceof l||A instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof O=="string"&&I===void 0&&(I=O,O=!1),4<A.span)throw new RangeError("word cannot exceed 32 bits");super(A.span,I),this.word=A,this.msb=!!O,this.fields=[];let U=0;this._packedSetValue=function(Z){return U=w(Z),this},this._packedGetValue=function(){return U}}decode(A,O=0){const I=this.makeDestinationObject(),U=this.word.decode(A,O);this._packedSetValue(U);for(const Z of this.fields)Z.property!==void 0&&(I[Z.property]=Z.decode(A));return I}encode(A,O,I=0){const U=this.word.decode(O,I);this._packedSetValue(U);for(const Z of this.fields)if(Z.property!==void 0){const oe=A[Z.property];oe!==void 0&&Z.encode(oe)}return this.word.encode(this._packedGetValue(),O,I)}addField(A,O){const I=new N(this,A,O);return this.fields.push(I),I}addBoolean(A){const O=new Y(this,A);return this.fields.push(O),O}fieldFor(A){if(typeof A!="string")throw new TypeError("property must be string");for(const O of this.fields)if(O.property===A)return O}}Be.BitStructure=R;class N{constructor(A,O,I){if(!(A instanceof R))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(O)||0>=O)throw new TypeError("bits must be positive integer");const U=8*A.span,Z=A.fields.reduce((oe,he)=>oe+he.bits,0);if(O+Z>U)throw new Error("bits too long for span remainder ("+(U-Z)+" of "+U+" remain)");this.container=A,this.bits=O,this.valueMask=(1<<O)-1,O===32&&(this.valueMask=4294967295),this.start=Z,this.container.msb&&(this.start=U-Z-O),this.wordMask=w(this.valueMask<<this.start),this.property=I}decode(A,O){const I=this.container._packedGetValue();return w(I&this.wordMask)>>>this.start}encode(A){if(typeof A!="number"||!Number.isInteger(A)||A!==w(A&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const O=this.container._packedGetValue(),I=w(A<<this.start);this.container._packedSetValue(w(O&~this.wordMask)|I)}}Be.BitField=N;class Y extends N{constructor(A,O){super(A,1,O)}decode(A,O){return!!super.decode(A,O)}encode(A){typeof A=="boolean"&&(A=+A),super.encode(A)}}Be.Boolean=Y;class z extends n{constructor(A,O){if(!(A instanceof o&&A.isCount()||Number.isInteger(A)&&0<=A))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let I=-1;A instanceof o||(I=A),super(I,O),this.length=A}getSpan(A,O){let I=this.span;return 0>I&&(I=this.length.decode(A,O)),I}decode(A,O=0){let I=this.span;return 0>I&&(I=this.length.decode(A,O)),t(A).slice(O,O+I)}encode(A,O,I){let U=this.length;if(this.length instanceof o&&(U=A.length),!(A instanceof Uint8Array&&U===A.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+U+") Uint8Array as src");if(I+U>O.length)throw new RangeError("encoding overruns Uint8Array");const Z=t(A);return t(O).write(Z.toString("hex"),I,U,"hex"),this.length instanceof o&&this.length.encode(U,O,I),U}}Be.Blob=z;class G extends n{constructor(A){super(-1,A)}getSpan(A,O=0){e(A);let I=O;for(;I<A.length&&A[I]!==0;)I+=1;return 1+I-O}decode(A,O=0){const I=this.getSpan(A,O);return t(A).slice(O,O+I-1).toString("utf-8")}encode(A,O,I=0){typeof A!="string"&&(A=String(A));const U=r.Buffer.from(A,"utf8"),Z=U.length;if(I+Z>O.length)throw new RangeError("encoding overruns Buffer");const oe=t(O);return U.copy(oe,I),oe[I+Z]=0,Z+1}}Be.CString=G;class te extends n{constructor(A,O){if(typeof A=="string"&&O===void 0&&(O=A,A=void 0),A===void 0)A=-1;else if(!Number.isInteger(A))throw new TypeError("maxSpan must be an integer");super(-1,O),this.maxSpan=A}getSpan(A,O=0){return e(A),A.length-O}decode(A,O=0){const I=this.getSpan(A,O);if(0<=this.maxSpan&&this.maxSpan<I)throw new RangeError("text length exceeds maxSpan");return t(A).slice(O,O+I).toString("utf-8")}encode(A,O,I=0){typeof A!="string"&&(A=String(A));const U=r.Buffer.from(A,"utf8"),Z=U.length;if(0<=this.maxSpan&&this.maxSpan<Z)throw new RangeError("text length exceeds maxSpan");if(I+Z>O.length)throw new RangeError("encoding overruns Buffer");return U.copy(t(O),I),Z}}Be.UTF8=te;class X extends n{constructor(A,O){super(0,O),this.value=A}decode(A,O){return this.value}encode(A,O,I){return 0}}return Be.Constant=X,Be.greedy=(T,A)=>new a(T,A),Be.offset=(T,A,O)=>new c(T,A,O),Be.u8=T=>new l(1,T),Be.u16=T=>new l(2,T),Be.u24=T=>new l(3,T),Be.u32=T=>new l(4,T),Be.u40=T=>new l(5,T),Be.u48=T=>new l(6,T),Be.nu64=T=>new m(T),Be.u16be=T=>new u(2,T),Be.u24be=T=>new u(3,T),Be.u32be=T=>new u(4,T),Be.u40be=T=>new u(5,T),Be.u48be=T=>new u(6,T),Be.nu64be=T=>new y(T),Be.s8=T=>new f(1,T),Be.s16=T=>new f(2,T),Be.s24=T=>new f(3,T),Be.s32=T=>new f(4,T),Be.s40=T=>new f(5,T),Be.s48=T=>new f(6,T),Be.ns64=T=>new v(T),Be.s16be=T=>new h(2,T),Be.s24be=T=>new h(3,T),Be.s32be=T=>new h(4,T),Be.s40be=T=>new h(5,T),Be.s48be=T=>new h(6,T),Be.ns64be=T=>new b(T),Be.f32=T=>new _(T),Be.f32be=T=>new x(T),Be.f64=T=>new E(T),Be.f64be=T=>new S(T),Be.struct=(T,A,O)=>new k(T,A,O),Be.bits=(T,A,O)=>new R(T,A,O),Be.seq=(T,A,O)=>new C(T,A,O),Be.union=(T,A,O)=>new j(T,A,O),Be.unionLayoutDiscriminator=(T,A)=>new J(T,A),Be.blob=(T,A)=>new z(T,A),Be.cstr=T=>new G(T),Be.utf8=(T,A)=>new te(T,A),Be.constant=(T,A)=>new X(T,A),Be}var Se=iEe();class sEe extends TypeError{constructor(e,t){let n;const{message:i,explanation:s,...o}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function oEe(r){return om(r)&&typeof r[Symbol.iterator]=="function"}function om(r){return typeof r=="object"&&r!=null}function Gv(r){return om(r)&&!Array.isArray(r)}function ka(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function aEe(r){const{done:e,value:t}=r.next();return e?void 0:t}function cEe(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:o}=t,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${ka(n)}\``}=r;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...r,message:c}}function*fN(r,e,t,n){oEe(r)||(r=[r]);for(const i of r){const s=cEe(i,e,t,n);s&&(yield s)}}function*yk(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:o=!1}=t,a={path:n,branch:i,mask:o};s&&(r=e.coercer(r,a));let c="valid";for(const l of e.validator(r,a))l.explanation=t.message,c="not_valid",yield[l,void 0];for(let[l,u,f]of e.entries(r,a)){const h=yk(u,f,{path:l===void 0?n:[...n,l],branch:l===void 0?i:[...i,u],coerce:s,mask:o,message:t.message});for(const d of h)d[0]?(c=d[0].refinement!=null?"not_refined":"not_valid",yield[d[0],void 0]):s&&(u=d[1],l===void 0?r=u:r instanceof Map?r.set(l,u):r instanceof Set?r.add(u):om(r)&&(u!==void 0||l in r)&&(r[l]=u))}if(c!=="not_valid")for(const l of e.refiner(r,a))l.explanation=t.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,r])}let Ac=class{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=o,i?this.validator=(c,l)=>{const u=i(c,l);return fN(u,l,this,c)}:this.validator=()=>[],s?this.refiner=(c,l)=>{const u=s(c,l);return fN(u,l,this,c)}:this.refiner=()=>[]}assert(e,t){return lEe(e,this,t)}create(e,t){return pt(e,this,t)}is(e){return eG(e,this)}mask(e,t){return uEe(e,this,t)}validate(e,t={}){return am(e,this,t)}};function lEe(r,e,t){const n=am(r,e,{message:t});if(n[0])throw n[0]}function pt(r,e,t){const n=am(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function uEe(r,e,t){const n=am(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function eG(r,e){return!am(r,e)[0]}function am(r,e,t={}){const n=yk(r,e,t),i=aEe(n);return i[0]?[new sEe(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Zf(r,e){return new Ac({type:r,schema:null,validator:e})}function fEe(){return Zf("any",()=>!0)}function bt(r){return new Ac({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${ka(e)}`}})}function hc(){return Zf("boolean",r=>typeof r=="boolean")}function vk(r){return Zf("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${ka(e)}`)}function In(r){const e=ka(r),t=typeof r;return new Ac({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${ka(n)}`}})}function hEe(){return Zf("never",()=>!1)}function _t(r){return new Ac({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function De(){return Zf("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${ka(r)}`)}function Gt(r){return new Ac({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function tG(r,e){return new Ac({type:"record",schema:null,*entries(t){if(om(t))for(const n in t){const i=t[n];yield[n,n,r],yield[n,i,e]}},validator(t){return Gv(t)||`Expected an object, but received: ${ka(t)}`},coercer(t){return Gv(t)?{...t}:t}})}function ft(){return Zf("string",r=>typeof r=="string"||`Expected a string, but received: ${ka(r)}`)}function bk(r){const e=hEe();return new Ac({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let i=0;i<n;i++)yield[i,t[i],r[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${ka(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function et(r){const e=Object.keys(r);return new Ac({type:"type",schema:r,*entries(t){if(om(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return Gv(t)||`Expected an object, but received: ${ka(t)}`},coercer(t){return Gv(t)?{...t}:t}})}function As(r){const e=r.map(t=>t.type).join(" | ");return new Ac({type:"union",schema:null,coercer(t,n){for(const i of r){const[s,o]=i.validate(t,{coerce:!0,mask:n.mask});if(!s)return o}return t},validator(t,n){const i=[];for(const s of r){const[...o]=yk(t,s,n),[a]=o;if(a[0])for(const[c]of o)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${ka(t)}`,...i]}})}function fp(){return Zf("unknown",()=>!0)}function cm(r,e,t){return new Ac({...r,coercer:(n,i)=>eG(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}var t2,hN;function dEe(){if(hN)return t2;hN=1;const r=ew.v4;return t2=function(t,n,i,s){if(typeof t!="string")throw new TypeError(t+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:t};if(o===2&&(a.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");a.params=n}if(typeof i>"u"){const c=typeof s.generator=="function"?s.generator:function(){return r()};a.id=c(a,s)}else o===2&&i===null?s.notificationIdNull&&(a.id=null):a.id=i;return a},t2}var r2,dN;function pEe(){if(dN)return r2;dN=1;const r=ew.v4,e=dEe(),t=function(n,i){if(!(this instanceof t))return new t(n,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return r()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=n};return r2=t,t.prototype.request=function(n,i,s,o){const a=this;let c=null;const l=Array.isArray(n)&&typeof i=="function";if(this.options.version===1&&l)throw new TypeError("JSON-RPC 1.0 does not support batching");if(l||!l&&n&&typeof n=="object"&&typeof i=="function")o=i,c=n;else{typeof s=="function"&&(o=s,s=void 0);const h=typeof o=="function";try{c=e(n,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(d){if(h)return o(d);throw d}if(!h)return c}let f;try{f=JSON.stringify(c,this.options.replacer)}catch(h){return o(h)}return this.callServer(f,function(h,d){a._parseResponse(h,d,o)}),c},t.prototype._parseResponse=function(n,i,s){if(n){s(n);return}if(!i)return s();let o;try{o=JSON.parse(i,this.options.reviver)}catch(a){return s(a)}if(s.length===3)if(Array.isArray(o)){const a=function(l){return typeof l.error<"u"},c=function(l){return!a(l)};return s(null,o.filter(a),o.filter(c))}else return s(null,o.error,o.result);s(null,o)},r2}var gEe=pEe();const mEe=Gs(gEe);var yEe=class extends Vg{socket;constructor(r,e,t){super(),this.socket=new window.WebSocket(r,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(r,e,t){const n=t||e;try{this.socket.send(r),n()}catch(i){n(i)}}close(r,e){this.socket.close(r,e)}addEventListener(r,e,t){this.socket.addEventListener(r,e,t)}};function vEe(r,e){return new yEe(r,e)}var bEe=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},wEe=class extends Vg{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(r,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:s=5,...o}={},a,c){super(),this.webSocketFactory=r,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=s,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new bEe,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(r,e,t,n){return!n&&typeof t=="object"&&(n=t,t=null),new Promise((i,s)=>{if(!this.ready)return s(new Error("socket not ready"));const o=this.generate_request_id(r,e),a={jsonrpc:"2.0",method:r,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,c=>{if(c)return s(c);this.queue[o]={promise:[i,s]},t&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],s(new Error("reply timeout"))},t))})})}async login(r){const e=await this.call("rpc.login",r);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(r,e){return new Promise((t,n)=>{if(!this.ready)return n(new Error("socket not ready"));const i={jsonrpc:"2.0",method:r,params:e};this.socket.send(this.dataPack.encode(i),s=>{if(s)return n(s);t()})})}async subscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.on",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed subscribing to an event '"+r+"' with: "+e[r]);return e}async unsubscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.off",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(r,e){this.socket.close(r||1e3,e)}setAutoReconnect(r){this.reconnect=r}setReconnectInterval(r){this.reconnect_interval=r}setMaxReconnects(r){this.max_reconnects=r}_connect(r,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(r,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=gr.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const n=[t.notification];if(t.params.constructor===Object)n.push(t.params);else for(let i=0;i<t.params.length;i++)n.push(t.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",t,n),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(r,e),this.reconnect_interval)))})}};sm.utils.randomPrivateKey;sm.getPublicKey;function pN(r){try{return sm.ExtendedPoint.fromHex(r),!0}catch{return!1}}const rG=(r,e)=>sm.sign(r,e.slice(0,32)),xEe=sm.verify,Ti=r=>gr.Buffer.isBuffer(r)?r:r instanceof Uint8Array?gr.Buffer.from(r.buffer,r.byteOffset,r.byteLength):gr.Buffer.from(r);class _Ee{constructor(e){Object.assign(this,e)}encode(){return gr.Buffer.from(e2.serialize(Vy,this))}static decode(e){return e2.deserialize(Vy,this,e)}static decodeUnchecked(e){return e2.deserializeUnchecked(Vy,this,e)}}const Vy=new Map;var nG;const SEe=32,ou=32;function EEe(r){return r._bn!==void 0}let gN=1;class $t extends _Ee{constructor(e){if(super({}),this._bn=void 0,EEe(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Mi.decode(e);if(t.length!=ou)throw new Error("Invalid public key input");this._bn=new rr(t)}else this._bn=new rr(e);if(this._bn.byteLength()>ou)throw new Error("Invalid public key input")}}static unique(){const e=new $t(gN);return gN+=1,new $t(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Mi.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(gr.Buffer);if(e.length===ou)return e;const t=gr.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=gr.Buffer.concat([e.toBuffer(),gr.Buffer.from(t),n.toBuffer()]),s=_P(i);return new $t(s)}static createProgramAddressSync(e,t){let n=gr.Buffer.alloc(0);e.forEach(function(s){if(s.length>SEe)throw new TypeError("Max seed length exceeded");n=gr.Buffer.concat([n,Ti(s)])}),n=gr.Buffer.concat([n,t.toBuffer(),gr.Buffer.from("ProgramDerivedAddress")]);const i=_P(n);if(pN(i))throw new Error("Invalid seeds, address must fall off the curve");return new $t(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(gr.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new $t(e);return pN(t.toBytes())}}nG=$t;$t.default=new nG("11111111111111111111111111111111");Vy.set($t,{kind:"struct",fields:[["_bn","u256"]]});new $t("BPFLoader1111111111111111111111111111111111");const ud=1232,wk=127,Yv=64;class iG extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(iG.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class sG extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(sG.prototype,"name",{value:"TransactionExpiredTimeoutError"});class b0 extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(b0.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Xv{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const Pr=(r="publicKey")=>Se.blob(32,r),AEe=(r="signature")=>Se.blob(64,r),Wh=(r="string")=>{const e=Se.struct([Se.u32("length"),Se.u32("lengthPadding"),Se.blob(Se.offset(Se.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,a)=>{const c={chars:gr.Buffer.from(s,"utf8")};return n(c,o,a)},i.alloc=s=>Se.u32().span+Se.u32().span+gr.Buffer.from(s,"utf8").length,i},IEe=(r="authorized")=>Se.struct([Pr("staker"),Pr("withdrawer")],r),CEe=(r="lockup")=>Se.struct([Se.ns64("unixTimestamp"),Se.ns64("epoch"),Pr("custodian")],r),TEe=(r="voteInit")=>Se.struct([Pr("nodePubkey"),Pr("authorizedVoter"),Pr("authorizedWithdrawer"),Se.u8("commission")],r),REe=(r="voteAuthorizeWithSeedArgs")=>Se.struct([Se.u32("voteAuthorizationType"),Pr("currentAuthorityDerivedKeyOwnerPubkey"),Wh("currentAuthorityDerivedKeySeed"),Pr("newAuthorized")],r);function oG(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return oG({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function fo(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function ho(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function _n(r,e){if(!r)throw new Error(e||"Assertion failed")}class Dw{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=o=>{const a=o.toBase58();let c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const c=i(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new Dw(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];_n(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),s=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{_n(t.length>0,"Expected at least one writable signer key");const[c]=t[0];_n(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([c])=>new $t(c)),...n.map(([c])=>new $t(c)),...i.map(([c])=>new $t(c)),...s.map(([c])=>new $t(c))];return[o,a]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const a=new $t(s),c=e.findIndex(l=>l.equals(a));c>=0&&(_n(c<256,"Max lookup table index exceeded"),n.push(c),i.push(a),this.keyMetaMap.delete(s))}return[n,i]}}const aG="Reached end of buffer unexpectedly";function Kc(r){if(r.length===0)throw new Error(aG);return r.shift()}function po(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(aG);return r.splice(...e)}class hl{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new $t(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Mi.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Xv(this.staticAccountKeys)}static compile(e){const t=Dw.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),o=new Xv(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Mi.encode(a.data)}));return new hl({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];ho(t,e);const n=this.instructions.map(f=>{const{accounts:h,programIdIndex:d}=f,g=Array.from(Mi.decode(f.data));let p=[];ho(p,h.length);let m=[];return ho(m,g.length),{programIdIndex:d,keyIndicesCount:gr.Buffer.from(p),keyIndices:h,dataLength:gr.Buffer.from(m),data:g}});let i=[];ho(i,n.length);let s=gr.Buffer.alloc(ud);gr.Buffer.from(i).copy(s);let o=i.length;n.forEach(f=>{const d=Se.struct([Se.u8("programIdIndex"),Se.blob(f.keyIndicesCount.length,"keyIndicesCount"),Se.seq(Se.u8("keyIndex"),f.keyIndices.length,"keyIndices"),Se.blob(f.dataLength.length,"dataLength"),Se.seq(Se.u8("userdatum"),f.data.length,"data")]).encode(f,s,o);o+=d}),s=s.slice(0,o);const a=Se.struct([Se.blob(1,"numRequiredSignatures"),Se.blob(1,"numReadonlySignedAccounts"),Se.blob(1,"numReadonlyUnsignedAccounts"),Se.blob(t.length,"keyCount"),Se.seq(Pr("key"),e,"keys"),Pr("recentBlockhash")]),c={numRequiredSignatures:gr.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:gr.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:gr.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:gr.Buffer.from(t),keys:this.accountKeys.map(f=>Ti(f.toBytes())),recentBlockhash:Mi.decode(this.recentBlockhash)};let l=gr.Buffer.alloc(2048);const u=a.encode(c,l);return s.copy(l,u),l.slice(0,u+s.length)}static from(e){let t=[...e];const n=Kc(t);if(n!==(n&wk))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Kc(t),s=Kc(t),o=fo(t);let a=[];for(let h=0;h<o;h++){const d=po(t,0,ou);a.push(new $t(gr.Buffer.from(d)))}const c=po(t,0,ou),l=fo(t);let u=[];for(let h=0;h<l;h++){const d=Kc(t),g=fo(t),p=po(t,0,g),m=fo(t),y=po(t,0,m),v=Mi.encode(gr.Buffer.from(y));u.push({programIdIndex:d,accounts:p,data:v})}const f={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Mi.encode(gr.Buffer.from(c)),accountKeys:a,instructions:u};return new hl(f)}}class Sg{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Xv(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Dw.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const f=t.extractTableLookup(u);if(f!==void 0){const[h,{writable:d,readonly:g}]=f;n.push(h),i.writable.push(...d),i.readonly.push(...g)}}const[o,a]=t.getMessageComponents(),l=new Xv(a,i).compileInstructions(e.instructions);return new Sg({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:l,addressTableLookups:n})}serialize(){const e=Array();ho(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();ho(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();ho(s,this.addressTableLookups.length);const o=Se.struct([Se.u8("prefix"),Se.struct([Se.u8("numRequiredSignatures"),Se.u8("numReadonlySignedAccounts"),Se.u8("numReadonlyUnsignedAccounts")],"header"),Se.blob(e.length,"staticAccountKeysLength"),Se.seq(Pr(),this.staticAccountKeys.length,"staticAccountKeys"),Pr("recentBlockhash"),Se.blob(n.length,"instructionsLength"),Se.blob(t.length,"serializedInstructions"),Se.blob(s.length,"addressTableLookupsLength"),Se.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(ud),l=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:Mi.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,l)}serializeInstructions(){let e=0;const t=new Uint8Array(ud);for(const n of this.compiledInstructions){const i=Array();ho(i,n.accountKeyIndexes.length);const s=Array();ho(s,n.data.length);const o=Se.struct([Se.u8("programIdIndex"),Se.blob(i.length,"encodedAccountKeyIndexesLength"),Se.seq(Se.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),Se.blob(s.length,"encodedDataLength"),Se.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(ud);for(const n of this.addressTableLookups){const i=Array();ho(i,n.writableIndexes.length);const s=Array();ho(s,n.readonlyIndexes.length);const o=Se.struct([Pr("accountKey"),Se.blob(i.length,"encodedWritableIndexesLength"),Se.seq(Se.u8(),n.writableIndexes.length,"writableIndexes"),Se.blob(s.length,"encodedReadonlyIndexesLength"),Se.seq(Se.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=Kc(t),i=n&wk;_n(n!==i,"Expected versioned message but received legacy message");const s=i;_n(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:Kc(t),numReadonlySignedAccounts:Kc(t),numReadonlyUnsignedAccounts:Kc(t)},a=[],c=fo(t);for(let g=0;g<c;g++)a.push(new $t(po(t,0,ou)));const l=Mi.encode(po(t,0,ou)),u=fo(t),f=[];for(let g=0;g<u;g++){const p=Kc(t),m=fo(t),y=po(t,0,m),v=fo(t),b=new Uint8Array(po(t,0,v));f.push({programIdIndex:p,accountKeyIndexes:y,data:b})}const h=fo(t),d=[];for(let g=0;g<h;g++){const p=new $t(po(t,0,ou)),m=fo(t),y=po(t,0,m),v=fo(t),b=po(t,0,v);d.push({accountKey:p,writableIndexes:y,readonlyIndexes:b})}return new Sg({header:o,staticAccountKeys:a,recentBlockhash:l,compiledInstructions:f,addressTableLookups:d})}}const xk={deserializeMessageVersion(r){const e=r[0],t=e&wk;return t===e?"legacy":t},deserialize:r=>{const e=xk.deserializeMessageVersion(r);if(e==="legacy")return hl.from(r);if(e===0)return Sg.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Ml=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const kEe=gr.Buffer.alloc(Yv).fill(0);class oo{constructor(e){this.keys=void 0,this.programId=void 0,this.data=gr.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Go{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new oo(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let p=0;p<t.length;p++)if(t[p].programId===void 0)throw new Error(`Transaction instruction index ${p} has undefined program id`);const i=[],s=[];t.forEach(p=>{p.keys.forEach(y=>{s.push({...y})});const m=p.programId.toString();i.includes(m)||i.push(m)}),i.forEach(p=>{s.push({pubkey:new $t(p),isSigner:!1,isWritable:!1})});const o=[];s.forEach(p=>{const m=p.pubkey.toString(),y=o.findIndex(v=>v.pubkey.toString()===m);y>-1?(o[y].isWritable=o[y].isWritable||p.isWritable,o[y].isSigner=o[y].isSigner||p.isSigner):o.push(p)}),o.sort(function(p,m){if(p.isSigner!==m.isSigner)return p.isSigner?-1:1;if(p.isWritable!==m.isWritable)return p.isWritable?-1:1;const y={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return p.pubkey.toBase58().localeCompare(m.pubkey.toBase58(),"en",y)});const a=o.findIndex(p=>p.pubkey.equals(n));if(a>-1){const[p]=o.splice(a,1);p.isSigner=!0,p.isWritable=!0,o.unshift(p)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const p of this.signatures){const m=o.findIndex(y=>y.pubkey.equals(p.publicKey));if(m>-1)o[m].isSigner||(o[m].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${p.publicKey.toString()}`)}let c=0,l=0,u=0;const f=[],h=[];o.forEach(({pubkey:p,isSigner:m,isWritable:y})=>{m?(f.push(p.toString()),c+=1,y||(l+=1)):(h.push(p.toString()),y||(u+=1))});const d=f.concat(h),g=t.map(p=>{const{data:m,programId:y}=p;return{programIdIndex:d.indexOf(y.toString()),accounts:p.keys.map(v=>d.indexOf(v.pubkey.toString())),data:Mi.encode(m)}});return g.forEach(p=>{_n(p.programIdIndex>=0),p.accounts.forEach(m=>_n(m>=0))}),new hl({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:d,recentBlockhash:e,instructions:g})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=rG(n,i.secretKey);this._addSignature(i.publicKey,Ti(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){_n(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=gr.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?t&&(n.missing||=[]).push(s):xEe(i,e,s.toBytes())||(n.invalid||=[]).push(s);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,t);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];ho(n,t.length);const i=n.length+t.length*64+e.length,s=gr.Buffer.alloc(i);return _n(t.length<256),gr.Buffer.from(n).copy(s,0),t.forEach(({signature:o},a)=>{o!==null&&(_n(o.length===64,"signature has invalid length"),gr.Buffer.from(o).copy(s,n.length+a*64))}),e.copy(s,n.length+t.length*64),_n(s.length<=ud,`Transaction too large: ${s.length} > ${ud}`),s}get keys(){return _n(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return _n(this.instructions.length===1),this.instructions[0].programId}get data(){return _n(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=fo(t);let i=[];for(let s=0;s<n;s++){const o=po(t,0,Yv);i.push(Mi.encode(gr.Buffer.from(o)))}return Go.populate(hl.from(t),i)}static populate(e,t=[]){const n=new Go;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==Mi.encode(kEe)?null:Mi.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new oo({keys:s,programId:e.accountKeys[i.programIdIndex],data:Mi.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class _k{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)_n(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Yv));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();ho(t,this.signatures.length);const n=Se.struct([Se.blob(t.length,"encodedSignaturesLength"),Se.seq(AEe(),this.signatures.length,"signatures"),Se.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=fo(t);for(let o=0;o<i;o++)n.push(new Uint8Array(po(t,0,Yv)));const s=xk.deserialize(new Uint8Array(t));return new _k(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(o=>o.equals(i.publicKey));_n(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=rG(t,i.secretKey)}}addSignature(e,t){_n(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));_n(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const PEe=160,OEe=64,DEe=PEe/OEe,$Ee=1e3/DEe;new $t("SysvarC1ock11111111111111111111111111111111");new $t("SysvarEpochSchedu1e111111111111111111111111");new $t("Sysvar1nstructions1111111111111111111111111");const n2=new $t("SysvarRecentB1ockHashes11111111111111111111"),zC=new $t("SysvarRent111111111111111111111111111111111");new $t("SysvarRewards111111111111111111111111111111");new $t("SysvarS1otHashes111111111111111111111111111");new $t("SysvarS1otHistory11111111111111111111111111");new $t("SysvarStakeHistory1111111111111111111111111");class mN extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${n}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+s+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,t(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class Ut extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}function Fh(r){return new Promise(e=>setTimeout(e,r))}function Fo(r,e){const t=r.layout.span>=0?r.layout.span:oG(r,e),n=gr.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}const MEe=Se.nu64("lamportsPerSignature"),cG=Se.struct([Se.u32("version"),Se.u32("state"),Pr("authorizedPubkey"),Pr("nonce"),Se.struct([MEe],"feeCalculator")]),yN=cG.span;class Sk{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=cG.decode(Ti(e),0);return new Sk({authorizedPubkey:new $t(t.authorizedPubkey),nonce:new $t(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function Dd(r){const e=Se.blob(8,r),t=e.decode.bind(e),n=e.encode.bind(e),i=e,s=Xue();return i.decode=(o,a)=>{const c=t(o,a);return s.decode(c)},i.encode=(o,a,c)=>{const l=s.encode(o);return n(l,a,c)},i}const Uo=Object.freeze({Create:{index:0,layout:Se.struct([Se.u32("instruction"),Se.ns64("lamports"),Se.ns64("space"),Pr("programId")])},Assign:{index:1,layout:Se.struct([Se.u32("instruction"),Pr("programId")])},Transfer:{index:2,layout:Se.struct([Se.u32("instruction"),Dd("lamports")])},CreateWithSeed:{index:3,layout:Se.struct([Se.u32("instruction"),Pr("base"),Wh("seed"),Se.ns64("lamports"),Se.ns64("space"),Pr("programId")])},AdvanceNonceAccount:{index:4,layout:Se.struct([Se.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:Se.struct([Se.u32("instruction"),Se.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:Se.struct([Se.u32("instruction"),Pr("authorized")])},AuthorizeNonceAccount:{index:7,layout:Se.struct([Se.u32("instruction"),Pr("authorized")])},Allocate:{index:8,layout:Se.struct([Se.u32("instruction"),Se.ns64("space")])},AllocateWithSeed:{index:9,layout:Se.struct([Se.u32("instruction"),Pr("base"),Wh("seed"),Se.ns64("space"),Pr("programId")])},AssignWithSeed:{index:10,layout:Se.struct([Se.u32("instruction"),Pr("base"),Wh("seed"),Pr("programId")])},TransferWithSeed:{index:11,layout:Se.struct([Se.u32("instruction"),Dd("lamports"),Wh("seed"),Pr("programId")])},UpgradeNonceAccount:{index:12,layout:Se.struct([Se.u32("instruction")])}});class $d{constructor(){}static createAccount(e){const t=Uo.Create,n=Fo(t,{lamports:e.lamports,space:e.space,programId:Ti(e.programId.toBuffer())});return new oo({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Uo.TransferWithSeed;t=Fo(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ti(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Uo.Transfer;t=Fo(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new oo({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Uo.AssignWithSeed;t=Fo(i,{base:Ti(e.basePubkey.toBuffer()),seed:e.seed,programId:Ti(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Uo.Assign;t=Fo(i,{programId:Ti(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new oo({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Uo.CreateWithSeed,n=Fo(t,{base:Ti(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ti(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new oo({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Go;"basePubkey"in e&&"seed"in e?t.add($d.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:yN,programId:this.programId})):t.add($d.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:yN,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Uo.InitializeNonceAccount,n=Fo(t,{authorized:Ti(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:n2,isSigner:!1,isWritable:!1},{pubkey:zC,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new oo(i)}static nonceAdvance(e){const t=Uo.AdvanceNonceAccount,n=Fo(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:n2,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new oo(i)}static nonceWithdraw(e){const t=Uo.WithdrawNonceAccount,n=Fo(t,{lamports:e.lamports});return new oo({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:n2,isSigner:!1,isWritable:!1},{pubkey:zC,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Uo.AuthorizeNonceAccount,n=Fo(t,{authorized:Ti(e.newAuthorizedPubkey.toBuffer())});return new oo({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Uo.AllocateWithSeed;t=Fo(i,{base:Ti(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ti(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Uo.Allocate;t=Fo(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new oo({keys:n,programId:this.programId,data:t})}}$d.programId=new $t("11111111111111111111111111111111");new $t("BPFLoader2111111111111111111111111111111111");function BEe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var i2,vN;function NEe(){if(vN)return i2;vN=1;var r=Object.prototype.toString,e=Object.keys||function(n){var i=[];for(var s in n)i.push(s);return i};function t(n,i){var s,o,a,c,l,u,f;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),i);if(f=r.call(n),f==="[object Array]"){for(a="[",o=n.length-1,s=0;s<o;s++)a+=t(n[s],!0)+",";return o>-1&&(a+=t(n[s],!0)),a+"]"}else if(f==="[object Object]"){for(c=e(n).sort(),o=c.length,a="",s=0;s<o;)l=c[s],u=t(n[l],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return i2=function(n){var i=t(n,!1);if(i!==void 0)return""+i},i2}var LEe=NEe(),bN=BEe(LEe);const Zp=32;function s2(r){let e=0;for(;r>1;)r/=2,e++;return e}function FEe(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class UEe{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=s2(FEe(e+Zp+1))-s2(Zp)-1,n=this.getSlotsInEpoch(t),i=e-(n-Zp);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Zp:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+s2(Zp)):this.slotsPerEpoch}}var zEe=globalThis.fetch;class qEe extends wEe{constructor(e,t,n){const i=s=>{const o=vEe(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function jEe(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const wN=56;class xN{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=jEe(VEe,e),n=e.length-wN;_n(n>=0,"lookup table is invalid"),_n(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=Se.struct([Se.seq(Pr(),i,"addresses")]).decode(e.slice(wN));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new $t(t.authority[0]):void 0,addresses:s.map(o=>new $t(o))}}}const VEe={index:1,layout:Se.struct([Se.u32("typeIndex"),Dd("deactivationSlot"),Se.nu64("lastExtendedSlot"),Se.u8("lastExtendedStartIndex"),Se.u8(),Se.seq(Pr(),Se.offset(Se.u8(),-1),"authority")])},KEe=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function HEe(r){const e=r.match(KEe);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,o=r.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${n}${c}${s}`}const Pn=cm(vk($t),ft(),r=>new $t(r)),lG=bk([ft(),In("base64")]),Ek=cm(vk(gr.Buffer),lG,r=>gr.Buffer.from(r[0],"base64")),WEe=30*1e3;function GEe(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function fn(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function _N(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function uG(r){return As([et({jsonrpc:In("2.0"),id:ft(),result:r}),et({jsonrpc:In("2.0"),id:ft(),error:et({code:fp(),message:ft(),data:Gt(fEe())})})])}const YEe=uG(fp());function Ir(r){return cm(uG(r),YEe,e=>"error"in e?e:{...e,result:pt(e.result,r)})}function qn(r){return Ir(et({context:et({slot:De()}),value:r}))}function $w(r){return et({context:et({slot:De()}),value:r})}function o2(r,e){return r===0?new Sg({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new $t(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Mi.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new hl(e)}const XEe=et({foundation:De(),foundationTerm:De(),initial:De(),taper:De(),terminal:De()}),JEe=Ir(bt(_t(et({epoch:De(),effectiveSlot:De(),amount:De(),postBalance:De(),commission:Gt(_t(De()))})))),QEe=bt(et({slot:De(),prioritizationFee:De()})),ZEe=et({total:De(),validator:De(),foundation:De(),epoch:De()}),e2e=et({epoch:De(),slotIndex:De(),slotsInEpoch:De(),absoluteSlot:De(),blockHeight:Gt(De()),transactionCount:Gt(De())}),t2e=et({slotsPerEpoch:De(),leaderScheduleSlotOffset:De(),warmup:hc(),firstNormalEpoch:De(),firstNormalSlot:De()}),r2e=tG(ft(),bt(De())),eh=_t(As([et({}),ft()])),n2e=et({err:eh}),i2e=In("receivedSignature"),s2e=et({"solana-core":ft(),"feature-set":Gt(De())}),o2e=et({program:ft(),programId:Pn,parsed:fp()}),a2e=et({programId:Pn,accounts:bt(Pn),data:ft()}),SN=qn(et({err:_t(As([et({}),ft()])),logs:_t(bt(ft())),accounts:Gt(_t(bt(_t(et({executable:hc(),owner:ft(),lamports:De(),data:bt(ft()),rentEpoch:Gt(De())}))))),unitsConsumed:Gt(De()),returnData:Gt(_t(et({programId:ft(),data:bk([ft(),In("base64")])}))),innerInstructions:Gt(_t(bt(et({index:De(),instructions:bt(As([o2e,a2e]))}))))})),c2e=qn(et({byIdentity:tG(ft(),bt(De())),range:et({firstSlot:De(),lastSlot:De()})}));function l2e(r,e,t,n,i,s){const o=t||zEe;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(u,f)=>{const h=await new Promise((d,g)=>{try{n(u,f,(p,m)=>d([p,m]))}catch(p){g(p)}});return await o(...h)}),new mEe(async(u,f)=>{const h={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},lAe)};try{let d=5,g,p=500;for(;c?g=await c(r,h):g=await o(r,h),!(g.status!==429||i===!0||(d-=1,d===0));)console.error(`Server responded with ${g.status} ${g.statusText}.  Retrying after ${p}ms delay...`),await Fh(p),p*=2;const m=await g.text();g.ok?f(null,m):f(new Error(`${g.status} ${g.statusText}: ${m}`))}catch(d){d instanceof Error&&f(d)}},{})}function u2e(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,o)=>{if(s){i(s);return}n(o)})})}function f2e(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,o)=>{if(s){n(s);return}t(o)})})}const h2e=Ir(XEe),d2e=Ir(ZEe),p2e=Ir(QEe),g2e=Ir(e2e),m2e=Ir(t2e),y2e=Ir(r2e),v2e=Ir(De()),b2e=qn(et({total:De(),circulating:De(),nonCirculating:De(),nonCirculatingAccounts:bt(Pn)})),qC=et({amount:ft(),uiAmount:_t(De()),decimals:De(),uiAmountString:Gt(ft())}),w2e=qn(bt(et({address:Pn,amount:ft(),uiAmount:_t(De()),decimals:De(),uiAmountString:Gt(ft())}))),x2e=qn(bt(et({pubkey:Pn,account:et({executable:hc(),owner:Pn,lamports:De(),data:Ek,rentEpoch:De()})}))),jC=et({program:ft(),parsed:fp(),space:De()}),_2e=qn(bt(et({pubkey:Pn,account:et({executable:hc(),owner:Pn,lamports:De(),data:jC,rentEpoch:De()})}))),S2e=qn(bt(et({lamports:De(),address:Pn}))),Eg=et({executable:hc(),owner:Pn,lamports:De(),data:Ek,rentEpoch:De()}),E2e=et({pubkey:Pn,account:Eg}),A2e=cm(As([vk(gr.Buffer),jC]),As([lG,jC]),r=>Array.isArray(r)?pt(r,Ek):r),VC=et({executable:hc(),owner:Pn,lamports:De(),data:A2e,rentEpoch:De()}),I2e=et({pubkey:Pn,account:VC}),C2e=et({state:As([In("active"),In("inactive"),In("activating"),In("deactivating")]),active:De(),inactive:De()}),T2e=Ir(bt(et({signature:ft(),slot:De(),err:eh,memo:_t(ft()),blockTime:Gt(_t(De()))}))),R2e=Ir(bt(et({signature:ft(),slot:De(),err:eh,memo:_t(ft()),blockTime:Gt(_t(De()))}))),k2e=et({subscription:De(),result:$w(Eg)}),P2e=et({pubkey:Pn,account:Eg}),O2e=et({subscription:De(),result:$w(P2e)}),D2e=et({parent:De(),slot:De(),root:De()}),$2e=et({subscription:De(),result:D2e}),M2e=As([et({type:As([In("firstShredReceived"),In("completed"),In("optimisticConfirmation"),In("root")]),slot:De(),timestamp:De()}),et({type:In("createdBank"),parent:De(),slot:De(),timestamp:De()}),et({type:In("frozen"),slot:De(),timestamp:De(),stats:et({numTransactionEntries:De(),numSuccessfulTransactions:De(),numFailedTransactions:De(),maxTransactionsPerEntry:De()})}),et({type:In("dead"),slot:De(),timestamp:De(),err:ft()})]),B2e=et({subscription:De(),result:M2e}),N2e=et({subscription:De(),result:$w(As([n2e,i2e]))}),L2e=et({subscription:De(),result:De()}),F2e=et({pubkey:ft(),gossip:_t(ft()),tpu:_t(ft()),rpc:_t(ft()),version:_t(ft())}),EN=et({votePubkey:ft(),nodePubkey:ft(),activatedStake:De(),epochVoteAccount:hc(),epochCredits:bt(bk([De(),De(),De()])),commission:De(),lastVote:De(),rootSlot:_t(De())}),U2e=Ir(et({current:bt(EN),delinquent:bt(EN)})),z2e=As([In("processed"),In("confirmed"),In("finalized")]),q2e=et({slot:De(),confirmations:_t(De()),err:eh,confirmationStatus:Gt(z2e)}),j2e=qn(bt(_t(q2e))),V2e=Ir(De()),fG=et({accountKey:Pn,writableIndexes:bt(De()),readonlyIndexes:bt(De())}),Ak=et({signatures:bt(ft()),message:et({accountKeys:bt(ft()),header:et({numRequiredSignatures:De(),numReadonlySignedAccounts:De(),numReadonlyUnsignedAccounts:De()}),instructions:bt(et({accounts:bt(De()),data:ft(),programIdIndex:De()})),recentBlockhash:ft(),addressTableLookups:Gt(bt(fG))})}),hG=et({pubkey:Pn,signer:hc(),writable:hc(),source:Gt(As([In("transaction"),In("lookupTable")]))}),dG=et({accountKeys:bt(hG),signatures:bt(ft())}),pG=et({parsed:fp(),program:ft(),programId:Pn}),gG=et({accounts:bt(Pn),data:ft(),programId:Pn}),K2e=As([gG,pG]),H2e=As([et({parsed:fp(),program:ft(),programId:ft()}),et({accounts:bt(ft()),data:ft(),programId:ft()})]),mG=cm(K2e,H2e,r=>"accounts"in r?pt(r,gG):pt(r,pG)),yG=et({signatures:bt(ft()),message:et({accountKeys:bt(hG),instructions:bt(mG),recentBlockhash:ft(),addressTableLookups:Gt(_t(bt(fG)))})}),Jv=et({accountIndex:De(),mint:ft(),owner:Gt(ft()),programId:Gt(ft()),uiTokenAmount:qC}),vG=et({writable:bt(Pn),readonly:bt(Pn)}),Mw=et({err:eh,fee:De(),innerInstructions:Gt(_t(bt(et({index:De(),instructions:bt(et({accounts:bt(De()),data:ft(),programIdIndex:De()}))})))),preBalances:bt(De()),postBalances:bt(De()),logMessages:Gt(_t(bt(ft()))),preTokenBalances:Gt(_t(bt(Jv))),postTokenBalances:Gt(_t(bt(Jv))),loadedAddresses:Gt(vG),computeUnitsConsumed:Gt(De())}),Ik=et({err:eh,fee:De(),innerInstructions:Gt(_t(bt(et({index:De(),instructions:bt(mG)})))),preBalances:bt(De()),postBalances:bt(De()),logMessages:Gt(_t(bt(ft()))),preTokenBalances:Gt(_t(bt(Jv))),postTokenBalances:Gt(_t(bt(Jv))),loadedAddresses:Gt(vG),computeUnitsConsumed:Gt(De())}),hp=As([In(0),In("legacy")]),th=et({pubkey:ft(),lamports:De(),postBalance:_t(De()),rewardType:_t(ft()),commission:Gt(_t(De()))}),W2e=Ir(_t(et({blockhash:ft(),previousBlockhash:ft(),parentSlot:De(),transactions:bt(et({transaction:Ak,meta:_t(Mw),version:Gt(hp)})),rewards:Gt(bt(th)),blockTime:_t(De()),blockHeight:_t(De())}))),G2e=Ir(_t(et({blockhash:ft(),previousBlockhash:ft(),parentSlot:De(),rewards:Gt(bt(th)),blockTime:_t(De()),blockHeight:_t(De())}))),Y2e=Ir(_t(et({blockhash:ft(),previousBlockhash:ft(),parentSlot:De(),transactions:bt(et({transaction:dG,meta:_t(Mw),version:Gt(hp)})),rewards:Gt(bt(th)),blockTime:_t(De()),blockHeight:_t(De())}))),X2e=Ir(_t(et({blockhash:ft(),previousBlockhash:ft(),parentSlot:De(),transactions:bt(et({transaction:yG,meta:_t(Ik),version:Gt(hp)})),rewards:Gt(bt(th)),blockTime:_t(De()),blockHeight:_t(De())}))),J2e=Ir(_t(et({blockhash:ft(),previousBlockhash:ft(),parentSlot:De(),transactions:bt(et({transaction:dG,meta:_t(Ik),version:Gt(hp)})),rewards:Gt(bt(th)),blockTime:_t(De()),blockHeight:_t(De())}))),Q2e=Ir(_t(et({blockhash:ft(),previousBlockhash:ft(),parentSlot:De(),rewards:Gt(bt(th)),blockTime:_t(De()),blockHeight:_t(De())}))),Z2e=Ir(_t(et({blockhash:ft(),previousBlockhash:ft(),parentSlot:De(),transactions:bt(et({transaction:Ak,meta:_t(Mw)})),rewards:Gt(bt(th)),blockTime:_t(De())}))),AN=Ir(_t(et({blockhash:ft(),previousBlockhash:ft(),parentSlot:De(),signatures:bt(ft()),blockTime:_t(De())}))),a2=Ir(_t(et({slot:De(),meta:_t(Mw),blockTime:Gt(_t(De())),transaction:Ak,version:Gt(hp)}))),ay=Ir(_t(et({slot:De(),transaction:yG,meta:_t(Ik),blockTime:Gt(_t(De())),version:Gt(hp)}))),eAe=qn(et({blockhash:ft(),lastValidBlockHeight:De()})),tAe=qn(hc()),rAe=et({slot:De(),numTransactions:De(),numSlots:De(),samplePeriodSecs:De()}),nAe=Ir(bt(rAe)),iAe=qn(_t(et({feeCalculator:et({lamportsPerSignature:De()})}))),sAe=Ir(ft()),oAe=Ir(ft()),aAe=et({err:eh,logs:bt(ft()),signature:ft()}),cAe=et({result:$w(aAe),subscription:De()}),lAe={"solana-client":"js/1.0.0-maintenance"};class uAe{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const l={};return async u=>{const{commitment:f,config:h}=fn(u),d=this._buildArgs([],f,void 0,h),g=bN(d);return l[g]=l[g]??(async()=>{try{const p=await this._rpcRequest("getBlockHeight",d),m=pt(p,Ir(De()));if("error"in m)throw new Ut(m.error,"failed to get block height information");return m.result}finally{delete l[g]}})(),await l[g]}})();let n,i,s,o,a,c;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=GEe(e),this._rpcWsEndpoint=n||HEe(e),this._rpcClient=l2e(e,i,s,o,a,c),this._rpcRequest=u2e(this._rpcClient),this._rpcBatchRequest=f2e(this._rpcClient),this._rpcWebSocket=new qEe(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=fn(t),s=this._buildArgs([e.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),a=pt(o,qn(De()));if("error"in a)throw new Ut(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=pt(t,Ir(_t(De())));if("error"in n)throw new Ut(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=pt(e,Ir(De()));if("error"in t)throw new Ut(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=pt(e,v2e);if("error"in t)throw new Ut(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=pt(n,b2e);if("error"in i)throw new Ut(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=pt(i,qn(qC));if("error"in s)throw new Ut(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=pt(i,qn(qC));if("error"in s)throw new Ut(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=fn(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),c=await this._rpcRequest("getTokenAccountsByOwner",a),l=pt(c,x2e);if("error"in l)throw new Ut(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=pt(o,_2e);if("error"in a)throw new Ut(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=pt(i,S2e);if("error"in s)throw new Ut(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=pt(i,w2e);if("error"in s)throw new Ut(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=fn(t),s=this._buildArgs([e.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=pt(o,qn(_t(Eg)));if("error"in a)throw new Ut(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=fn(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=pt(o,qn(_t(VC)));if("error"in a)throw new Ut(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=fn(t),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),c=pt(a,qn(bt(_t(VC))));if("error"in c)throw new Ut(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=fn(t),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),c=pt(a,qn(bt(_t(Eg))));if("error"in c)throw new Ut(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=fn(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??s?.epoch}),a=await this._rpcRequest("getStakeActivation",o),c=pt(a,Ir(C2e));if("error"in c)throw new Ut(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=fn(t),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],n,s||"base64",{...o,...o.filters?{filters:_N(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),l=bt(E2e),u=o.withContext===!0?pt(c,qn(l)):pt(c,Ir(l));if("error"in u)throw new Ut(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=fn(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=pt(o,Ir(bt(I2e)));if("error"in a)throw new Ut(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{const s=e;if(s.abortSignal?.aborted)return Promise.reject(s.abortSignal.reason);n=s.signature}let i;try{i=Mi.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return _n(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const o=new Promise((c,l)=>{try{n=this.onSignature(t,(f,h)=>{n=void 0;const d={context:h,value:f};c({__type:Ml.PROCESSED,response:d})},e);const u=new Promise(f=>{n==null?f():i=this._onSubscriptionStateChange(n,h=>{h==="subscribed"&&f()})});(async()=>{if(await u,s)return;const f=await this.getSignatureStatus(t);if(s||f==null)return;const{context:h,value:d}=f;if(d!=null)if(d?.err)l(d.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(d.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(d.confirmationStatus==="processed"||d.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,c({__type:Ml.PROCESSED,response:{context:h,value:d}})}})()}catch(u){l(u)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(f=>{const h=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let d=await h();if(!s){for(;d<=n;)if(await Fh(1e3),s||(d=await h(),s))return;f({__type:Ml.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),l=this.getCancellationPromise(t);let u;try{const f=await Promise.race([l,c,o]);if(f.__type===Ml.PROCESSED)u=f.response;else throw new iG(i)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const c=new Promise(d=>{let g=s,p=null;const m=async()=>{try{const{context:y,value:v}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return p=y.slot,v?.nonce}catch{return g}};(async()=>{if(g=await m(),!a)for(;;){if(s!==g){d({__type:Ml.NONCE_INVALID,slotInWhichNonceDidAdvance:p});return}if(await Fh(2e3),a||(g=await m(),a))return}})()}),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),f=this.getCancellationPromise(t);let h;try{const d=await Promise.race([f,u,c]);if(d.__type===Ml.PROCESSED)h=d.response;else{let g;for(;;){const p=await this.getSignatureStatus(o);if(p==null)break;if(p.context.slot<(d.slotInWhichNonceDidAdvance??n)){await Fh(400);continue}g=p;break}if(g?.value){const p=e||"finalized",{confirmationStatus:m}=g.value;switch(p){case"processed":case"recent":if(m!=="processed"&&m!=="confirmed"&&m!=="finalized")throw new b0(o);break;case"confirmed":case"single":case"singleGossip":if(m!=="confirmed"&&m!=="finalized")throw new b0(o);break;case"finalized":case"max":case"root":if(m!=="finalized")throw new b0(o);break;default:}h={context:g.context,value:{err:g.value.err}}}else throw new b0(o)}}finally{a=!0,l()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(c=>{let l=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{l=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:Ml.TIMED_OUT,timeoutMs:l}),l)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const c=await Promise.race([o,i]);if(c.__type===Ml.PROCESSED)a=c.response;else throw new sG(t,c.timeoutMs/1e3)}finally{clearTimeout(n),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=pt(e,Ir(bt(F2e)));if("error"in t)throw new Ut(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=pt(n,U2e);if("error"in i)throw new Ut(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=fn(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),o=pt(s,Ir(De()));if("error"in o)throw new Ut(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=fn(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=pt(s,Ir(ft()));if("error"in o)throw new Ut(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=pt(i,Ir(bt(Pn)));if("error"in s)throw new Ut(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);_n(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=pt(i,j2e);if("error"in s)throw new Ut(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=fn(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=pt(s,Ir(De()));if("error"in o)throw new Ut(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=pt(n,h2e);if("error"in i)throw new Ut(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=fn(n),o=this._buildArgs([e.map(l=>l.toBase58())],i,void 0,{...s,epoch:t??s?.epoch}),a=await this._rpcRequest("getInflationReward",o),c=pt(a,JEe);if("error"in c)throw new Ut(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=pt(e,d2e);if("error"in t)throw new Ut(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=fn(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=pt(s,g2e);if("error"in o)throw new Ut(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=pt(e,m2e);if("error"in t)throw new Ut(t.error,"failed to get epoch schedule");const n=t.result;return new UEe(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=pt(e,y2e);if("error"in t)throw new Ut(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=pt(i,V2e);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=pt(t,nAe);if("error"in n)throw new Ut(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=pt(i,iAe);if("error"in s)throw new Ut(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const n=Ti(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),o=pt(s,qn(_t(De())));if("error"in o)throw new Ut(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(o=>o.toBase58()),n=t?.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=pt(i,p2e);if("error"in s)throw new Ut(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=fn(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=pt(s,eAe);if("error"in o)throw new Ut(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=fn(t),s=this._buildArgs([e],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=pt(o,tAe);if("error"in a)throw new Ut(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=pt(e,Ir(s2e));if("error"in t)throw new Ut(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=pt(e,Ir(ft()));if("error"in t)throw new Ut(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=fn(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const a=pt(o,Y2e);if("error"in a)throw a.error;return a.result}case"none":{const a=pt(o,G2e);if("error"in a)throw a.error;return a.result}default:{const a=pt(o,W2e);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:l,meta:u,version:f})=>({meta:u,transaction:{...l,message:o2(f,l.message)},version:f}))}:null}}}catch(a){throw new Ut(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=fn(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const a=pt(o,J2e);if("error"in a)throw a.error;return a.result}case"none":{const a=pt(o,Q2e);if("error"in a)throw a.error;return a.result}default:{const a=pt(o,X2e);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Ut(a,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...c}=e;n=a,t=c}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=pt(s,c2e);if("error"in o)throw new Ut(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:i}=fn(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getTransaction",s),a=pt(o,a2);if("error"in a)throw new Ut(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:o2(c.version,c.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=fn(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=pt(o,ay);if("error"in a)throw new Ut(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=fn(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=pt(c,ay);if("error"in l)throw new Ut(l.error,"failed to get transactions");return l.result})}async getTransactions(e,t){const{commitment:n,config:i}=fn(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=pt(c,a2);if("error"in l)throw new Ut(l.error,"failed to get transactions");const u=l.result;return u&&{...u,transaction:{...u.transaction,message:o2(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",n),s=pt(i,Z2e);if("error"in s)throw new Ut(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:l})=>{const u=new hl(c.message);return{meta:l,transaction:{...c,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:l})=>({meta:l,transaction:Go.populate(c.message,c.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),o=pt(s,Ir(bt(De())));if("error"in o)throw new Ut(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=pt(i,AN);if("error"in s)throw new Ut(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=pt(i,AN);if("error"in s)throw new Ut(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",n),s=pt(i,a2);if("error"in s)throw new Ut(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new hl(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:Go.populate(a,c)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),s=pt(i,ay);if("error"in s)throw new Ut(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=pt(o,ay);if("error"in a)throw new Ut(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const c=await this.getConfirmedBlockSignatures(t,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=pt(s,T2e);if("error"in o)throw new Ut(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=pt(s,R2e);if("error"in o)throw new Ut(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new xN({key:e,state:xN.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=Sk.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=pt(n,sAe);if("error"in i)throw new Ut(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Fh(100);const n=Date.now()-this._blockhashInfo.lastFetch>=WEe;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Fh($Ee/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=fn(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=pt(s,qn(De()));if("error"in o)throw new Ut(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const p=e.serialize(),m=gr.Buffer.from(p).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const y=t||{};y.encoding="base64","commitment"in y||(y.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(y.innerInstructions=t.innerInstructions);const v=[m,y],b=await this._rpcRequest("simulateTransaction",v),_=pt(b,SN);if("error"in _)throw new Error("failed to simulate transaction: "+_.error.message);return _.result}let i;if(e instanceof Go){let g=e;i=new Go,i.feePayer=g.feePayer,i.instructions=e.instructions,i.nonceInfo=g.nonceInfo,i.signatures=g.signatures}else i=Go.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let g=this._disableBlockhashCaching;for(;;){const p=await this._blockhashWithExpiryBlockHeight(g);if(i.lastValidBlockHeight=p.lastValidBlockHeight,i.recentBlockhash=p.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const m=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(m)&&!this._blockhashInfo.transactionSignatures.includes(m)){this._blockhashInfo.simulatedSignatures.push(m);break}else g=!0}}const o=i._compile(),a=o.serialize(),l=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(n){const g=(Array.isArray(n)?n:o.nonProgramIds()).map(p=>p.toBase58());u.accounts={encoding:"base64",addresses:g}}s&&(u.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(u.innerInstructions=t.innerInstructions);const f=[l,u],h=await this._rpcRequest("simulateTransaction",f),d=pt(h,SN);if("error"in d){let g;if("data"in d.error&&(g=d.error.data.logs,g&&Array.isArray(g))){const p=`
    `,m=p+g.join(p);console.error(d.error.message,m)}throw new mN({action:"simulate",signature:"",transactionMessage:d.error.message,logs:g})}return d.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=Ti(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),c=pt(a,oAe);if("error"in c){let l;throw"data"in c.error&&(l=c.error.data.logs),new mN({action:i?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:l})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(s=>{try{s(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=pt(e,k2e);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=bN([e.method,t]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];_n(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:i,config:s}=fn(n),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=pt(e,O2e);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const{commitment:s,config:o}=fn(n),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:_N(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=pt(e,cAe);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=pt(e,$2e);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=pt(e,B2e);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=pt(e,N2e);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(c,l)=>{t(c,l);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=pt(e,L2e);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Se.struct([Se.u32("instruction"),Dd("recentSlot"),Se.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Se.struct([Se.u32("instruction")])},ExtendLookupTable:{index:2,layout:Se.struct([Se.u32("instruction"),Dd(),Se.seq(Pr(),Se.offset(Se.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Se.struct([Se.u32("instruction")])},CloseLookupTable:{index:4,layout:Se.struct([Se.u32("instruction")])}});new $t("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Se.struct([Se.u8("instruction"),Se.u32("units"),Se.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:Se.struct([Se.u8("instruction"),Se.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:Se.struct([Se.u8("instruction"),Se.u32("units")])},SetComputeUnitPrice:{index:3,layout:Se.struct([Se.u8("instruction"),Dd("microLamports")])}});new $t("ComputeBudget111111111111111111111111111111");Se.struct([Se.u8("numSignatures"),Se.u8("padding"),Se.u16("signatureOffset"),Se.u16("signatureInstructionIndex"),Se.u16("publicKeyOffset"),Se.u16("publicKeyInstructionIndex"),Se.u16("messageDataOffset"),Se.u16("messageDataSize"),Se.u16("messageInstructionIndex")]);new $t("Ed25519SigVerify111111111111111111111111111");rse.utils.isValidPrivateKey;Se.struct([Se.u8("numSignatures"),Se.u16("signatureOffset"),Se.u8("signatureInstructionIndex"),Se.u16("ethAddressOffset"),Se.u8("ethAddressInstructionIndex"),Se.u16("messageDataOffset"),Se.u16("messageDataSize"),Se.u8("messageInstructionIndex"),Se.blob(20,"ethAddress"),Se.blob(64,"signature"),Se.u8("recoveryId")]);new $t("KeccakSecp256k11111111111111111111111111111");var bG;new $t("StakeConfig11111111111111111111111111111111");class wG{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}bG=wG;wG.default=new bG(0,0,$t.default);Object.freeze({Initialize:{index:0,layout:Se.struct([Se.u32("instruction"),IEe(),CEe()])},Authorize:{index:1,layout:Se.struct([Se.u32("instruction"),Pr("newAuthorized"),Se.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:Se.struct([Se.u32("instruction")])},Split:{index:3,layout:Se.struct([Se.u32("instruction"),Se.ns64("lamports")])},Withdraw:{index:4,layout:Se.struct([Se.u32("instruction"),Se.ns64("lamports")])},Deactivate:{index:5,layout:Se.struct([Se.u32("instruction")])},Merge:{index:7,layout:Se.struct([Se.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:Se.struct([Se.u32("instruction"),Pr("newAuthorized"),Se.u32("stakeAuthorizationType"),Wh("authoritySeed"),Pr("authorityOwner")])}});new $t("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Se.struct([Se.u32("instruction"),TEe()])},Authorize:{index:1,layout:Se.struct([Se.u32("instruction"),Pr("newAuthorized"),Se.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:Se.struct([Se.u32("instruction"),Se.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:Se.struct([Se.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:Se.struct([Se.u32("instruction"),REe()])}});new $t("Vote111111111111111111111111111111111111111");new $t("Va1idator1nfo111111111111111111111111111111");et({name:ft(),website:Gt(ft()),details:Gt(ft()),iconUrl:Gt(ft()),keybaseUsername:Gt(ft())});new $t("Vote111111111111111111111111111111111111111");Se.struct([Pr("nodePubkey"),Pr("authorizedWithdrawer"),Se.u8("commission"),Se.nu64(),Se.seq(Se.struct([Se.nu64("slot"),Se.u32("confirmationCount")]),Se.offset(Se.u32(),-8),"votes"),Se.u8("rootSlotValid"),Se.nu64("rootSlot"),Se.nu64(),Se.seq(Se.struct([Se.nu64("epoch"),Pr("authorizedVoter")]),Se.offset(Se.u32(),-8),"authorizedVoters"),Se.struct([Se.seq(Se.struct([Pr("authorizedPubkey"),Se.nu64("epochOfLastAuthorizedSwitch"),Se.nu64("targetEpoch")]),32,"buf"),Se.nu64("idx"),Se.u8("isEmpty")],"priorVoters"),Se.nu64(),Se.seq(Se.struct([Se.nu64("epoch"),Se.nu64("credits"),Se.nu64("prevCredits")]),Se.offset(Se.u32(),-8),"epochCredits"),Se.struct([Se.nu64("slot"),Se.nu64("timestamp")],"lastTimestamp")]);const Xn=new $t("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Zu=new $t("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),Zl=new $t("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new $t("So11111111111111111111111111111111111111112");new $t("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const Ck=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}};var ju={},IN;function fAe(){if(IN)return ju;IN=1,Object.defineProperty(ju,"__esModule",{value:!0});function r(i){{const s=Xe.from(i);s.reverse();const o=s.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}ju.toBigIntLE=r;function e(i){{const s=i.toString("hex");return s.length===0?BigInt(0):BigInt(`0x${s}`)}}ju.toBigIntBE=e;function t(i,s){{const o=i.toString(16),a=Xe.from(o.padStart(s*2,"0").slice(0,s*2),"hex");return a.reverse(),a}}ju.toBufferLE=t;function n(i,s){{const o=i.toString(16);return Xe.from(o.padStart(s*2,"0").slice(0,s*2),"hex")}}return ju.toBufferBE=n,ju}var CN=fAe();const hAe=r=>e=>{const t=Se.blob(r,e),{encode:n,decode:i}=Ck(t),s=t;return s.decode=(o,a)=>{const c=i(o,a);return CN.toBigIntLE(Xe.from(c))},s.encode=(o,a,c)=>{const l=CN.toBufferLE(o,r);return n(l,a,c)},s},dl=hAe(8),dAe=r=>{const e=Se.u8(r),{encode:t,decode:n}=Ck(e),i=e;return i.decode=(s,o)=>!!n(s,o),i.encode=(s,o,a)=>{const c=Number(s);return t(c,o,a)},i},Ag=r=>{const e=Se.blob(32,r),{encode:t,decode:n}=Ck(e),i=e;return i.decode=(s,o)=>{const a=n(s,o);return new $t(a)},i.encode=(s,o,a)=>{const c=s.toBuffer();return t(c,o,a)},i};class lm extends Error{constructor(e){super(e)}}class pAe extends lm{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}class Po extends lm{constructor(){super(...arguments),this.name="TokenInvalidInstructionProgramError"}}class Oo extends lm{constructor(){super(...arguments),this.name="TokenInvalidInstructionKeysError"}}class Do extends lm{constructor(){super(...arguments),this.name="TokenInvalidInstructionDataError"}}class $o extends lm{constructor(){super(...arguments),this.name="TokenInvalidInstructionTypeError"}}var ls;(function(r){r[r.InitializeMint=0]="InitializeMint",r[r.InitializeAccount=1]="InitializeAccount",r[r.InitializeMultisig=2]="InitializeMultisig",r[r.Transfer=3]="Transfer",r[r.Approve=4]="Approve",r[r.Revoke=5]="Revoke",r[r.SetAuthority=6]="SetAuthority",r[r.MintTo=7]="MintTo",r[r.Burn=8]="Burn",r[r.CloseAccount=9]="CloseAccount",r[r.FreezeAccount=10]="FreezeAccount",r[r.ThawAccount=11]="ThawAccount",r[r.TransferChecked=12]="TransferChecked",r[r.ApproveChecked=13]="ApproveChecked",r[r.MintToChecked=14]="MintToChecked",r[r.BurnChecked=15]="BurnChecked",r[r.InitializeAccount2=16]="InitializeAccount2",r[r.SyncNative=17]="SyncNative",r[r.InitializeAccount3=18]="InitializeAccount3",r[r.InitializeMultisig2=19]="InitializeMultisig2",r[r.InitializeMint2=20]="InitializeMint2",r[r.GetAccountDataSize=21]="GetAccountDataSize",r[r.InitializeImmutableOwner=22]="InitializeImmutableOwner",r[r.AmountToUiAmount=23]="AmountToUiAmount",r[r.UiAmountToAmount=24]="UiAmountToAmount",r[r.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",r[r.TransferFeeExtension=26]="TransferFeeExtension",r[r.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",r[r.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",r[r.Reallocate=29]="Reallocate",r[r.MemoTransferExtension=30]="MemoTransferExtension",r[r.CreateNativeMint=31]="CreateNativeMint",r[r.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",r[r.InterestBearingMintExtension=33]="InterestBearingMintExtension",r[r.CpiGuardExtension=34]="CpiGuardExtension",r[r.InitializePermanentDelegate=35]="InitializePermanentDelegate",r[r.TransferHookExtension=36]="TransferHookExtension",r[r.MetadataPointerExtension=39]="MetadataPointerExtension",r[r.GroupPointerExtension=40]="GroupPointerExtension",r[r.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",r[r.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",r[r.PausableExtension=44]="PausableExtension"})(ls||(ls={}));function gAe(r,e,t){if(t.length){r.push({pubkey:e,isSigner:!1,isWritable:!1});for(const n of t)r.push({pubkey:n instanceof $t?n:n.publicKey,isSigner:!0,isWritable:!1})}else r.push({pubkey:e,isSigner:!0,isWritable:!1});return r}class TN extends Se.Layout{constructor(e){super(-1,e),this.publicKeyLayout=Ag()}decode(e,t=0){return e[t]===0?null:this.publicKeyLayout.decode(e,t+1)}encode(e,t,n=0){return e===null?(t[n]=0,1):(t[n]=1,this.publicKeyLayout.encode(e,t,n+1),33)}getSpan(e,t=0){if(e)return e[t]===0?1:1+this.publicKeyLayout.span;throw new RangeError("Buffer must be provided")}}var KC;(function(r){r[r.InitializeTransferFeeConfig=0]="InitializeTransferFeeConfig",r[r.TransferCheckedWithFee=1]="TransferCheckedWithFee",r[r.WithdrawWithheldTokensFromMint=2]="WithdrawWithheldTokensFromMint",r[r.WithdrawWithheldTokensFromAccounts=3]="WithdrawWithheldTokensFromAccounts",r[r.HarvestWithheldTokensToMint=4]="HarvestWithheldTokensToMint",r[r.SetTransferFee=5]="SetTransferFee"})(KC||(KC={}));Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction"),new TN("transferFeeConfigAuthority"),new TN("withdrawWithheldAuthority"),Se.u16("transferFeeBasisPoints"),dl("maximumFee")]);const xG=Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction"),dl("amount"),Se.u8("decimals"),dl("fee")]);function mAe(r,e){if(!r.programId.equals(e))throw new Po;if(r.data.length!==xG.span)throw new Do;const{keys:{source:t,mint:n,destination:i,authority:s,signers:o},data:a}=yAe(r);if(a.instruction!==ls.TransferFeeExtension||a.transferFeeInstruction!==KC.TransferCheckedWithFee)throw new $o;if(!n)throw new Oo;return{programId:e,keys:{source:t,mint:n,destination:i,authority:s,signers:o||null},data:a}}function yAe({programId:r,keys:[e,t,n,i,...s],data:o}){const{instruction:a,transferFeeInstruction:c,amount:l,decimals:u,fee:f}=xG.decode(o);return{programId:r,keys:{source:e,mint:t,destination:n,authority:i,signers:s},data:{instruction:a,transferFeeInstruction:c,amount:l,decimals:u,fee:f}}}Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction")]);Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction"),Se.u8("numTokenAccounts")]);Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction")]);Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction"),Se.u16("transferFeeBasisPoints"),dl("maximumFee")]);const Qv=Se.struct([Se.u8("instruction"),dl("amount"),Se.u8("decimals")]);function vAe(r,e,t,n,i,s,o=[],a=Xn){const c=gAe([{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0}],n,o),l=Xe.alloc(Qv.span);return Qv.encode({instruction:ls.TransferChecked,amount:BigInt(i),decimals:s},l),new oo({keys:c,programId:a,data:l})}function bAe(r,e=Xn){if(!r.programId.equals(e))throw new Po;if(r.data.length!==Qv.span)throw new Do;const{keys:{source:t,mint:n,destination:i,owner:s,multiSigners:o},data:a}=wAe(r);if(a.instruction!==ls.TransferChecked)throw new $o;if(!t||!n||!i||!s)throw new Oo;return{programId:e,keys:{source:t,mint:n,destination:i,owner:s,multiSigners:o},data:a}}function wAe({programId:r,keys:[e,t,n,i,...s],data:o}){return{programId:r,keys:{source:e,mint:t,destination:n,owner:i,multiSigners:s},data:Qv.decode(o)}}const xAe=Se.struct([Se.u32("mintAuthorityOption"),Ag("mintAuthority"),dl("supply"),Se.u8("decimals"),dAe("isInitialized"),Se.u32("freezeAuthorityOption"),Ag("freezeAuthority")]);xAe.span;function HC(r,e,t=!1,n=Xn,i=Zl){if(!t&&!$t.isOnCurve(e.toBuffer()))throw new pAe;const[s]=$t.findProgramAddressSync([e.toBuffer(),n.toBuffer(),r.toBuffer()],i);return s}const _G=Se.struct([Se.u8("instruction"),dl("amount")]);function _Ae(r,e=Xn){if(!r.programId.equals(e))throw new Po;if(r.data.length!==_G.span)throw new Do;const{keys:{account:t,mint:n,owner:i,multiSigners:s},data:o}=SAe(r);if(o.instruction!==ls.Burn)throw new $o;if(!t||!n||!i)throw new Oo;return{programId:e,keys:{account:t,mint:n,owner:i,multiSigners:s},data:o}}function SAe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{account:e,mint:t,owner:n,multiSigners:i},data:_G.decode(s)}}const SG=Se.struct([Se.u8("instruction"),dl("amount"),Se.u8("decimals")]);function EAe(r,e=Xn){if(!r.programId.equals(e))throw new Po;if(r.data.length!==SG.span)throw new Do;const{keys:{account:t,mint:n,owner:i,multiSigners:s},data:o}=AAe(r);if(o.instruction!==ls.BurnChecked)throw new $o;if(!t||!n||!i)throw new Oo;return{programId:e,keys:{account:t,mint:n,owner:i,multiSigners:s},data:o}}function AAe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{account:e,mint:t,owner:n,multiSigners:i},data:SG.decode(s)}}const EG=Se.struct([Se.u8("instruction")]);function IAe(r,e=Xn){if(!r.programId.equals(e))throw new Po;if(r.data.length!==EG.span)throw new Do;const{keys:{account:t,destination:n,authority:i,multiSigners:s},data:o}=CAe(r);if(o.instruction!==ls.CloseAccount)throw new $o;if(!t||!n||!i)throw new Oo;return{programId:e,keys:{account:t,destination:n,authority:i,multiSigners:s},data:o}}function CAe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{account:e,destination:t,authority:n,multiSigners:i},data:EG.decode(s)}}const AG=Se.struct([Se.u8("instruction")]);function TAe(r,e=Xn){if(!r.programId.equals(e))throw new Po;if(r.data.length!==AG.span)throw new Do;const{keys:{account:t,mint:n,owner:i,rent:s},data:o}=RAe(r);if(o.instruction!==ls.InitializeAccount)throw new $o;if(!t||!n||!i||!s)throw new Oo;return{programId:e,keys:{account:t,mint:n,owner:i,rent:s},data:o}}function RAe({programId:r,keys:[e,t,n,i],data:s}){return{programId:r,keys:{account:e,mint:t,owner:n,rent:i},data:AG.decode(s)}}const IG=Se.struct([Se.u8("instruction")]);function kAe(r,e=Xn){if(!r.programId.equals(e))throw new Po;if(r.data.length!==IG.span)throw new Do;const{keys:{account:t},data:n}=PAe(r);if(n.instruction!==ls.SyncNative)throw new $o;if(!t)throw new Oo;return{programId:e,keys:{account:t},data:n}}function PAe({programId:r,keys:[e],data:t}){return{programId:r,keys:{account:e},data:IG.decode(t)}}const CG=Se.struct([Se.u8("instruction")]);function OAe(r,e=Xn){if(!r.programId.equals(e))throw new Po;if(r.data.length!==CG.span)throw new Do;const{keys:{account:t,mint:n,authority:i,multiSigners:s},data:o}=DAe(r);if(o.instruction!==ls.FreezeAccount)throw new $o;if(!t||!n||!i)throw new Oo;return{programId:e,keys:{account:t,mint:n,authority:i,multiSigners:s},data:o}}function DAe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{account:e,mint:t,authority:n,multiSigners:i},data:CG.decode(s)}}const TG=Se.struct([Se.u8("instruction")]);function $Ae(r,e=Xn){if(!r.programId.equals(e))throw new Po;if(r.data.length!==TG.span)throw new Do;const{keys:{account:t,mint:n,authority:i,multiSigners:s},data:o}=MAe(r);if(o.instruction!==ls.ThawAccount)throw new $o;if(!t||!n||!i)throw new Oo;return{programId:e,keys:{account:t,mint:n,authority:i,multiSigners:s},data:o}}function MAe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{account:e,mint:t,authority:n,multiSigners:i},data:TG.decode(s)}}const RG=Se.struct([Se.u8("instruction"),dl("amount")]);function BAe(r,e=Xn){if(!r.programId.equals(e))throw new Po;if(r.data.length!==RG.span)throw new Do;const{keys:{source:t,destination:n,owner:i,multiSigners:s},data:o}=NAe(r);if(o.instruction!==ls.Transfer)throw new $o;if(!t||!n||!i)throw new Oo;return{programId:e,keys:{source:t,destination:n,owner:i,multiSigners:s},data:o}}function NAe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{source:e,destination:t,owner:n,multiSigners:i},data:RG.decode(s)}}const kG=Se.struct([Se.u8("instruction"),Ag("owner")]);function LAe(r,e=Xn){if(!r.programId.equals(e))throw new Po;if(r.data.length!==kG.span)throw new Do;const{keys:{account:t,mint:n,rent:i},data:s}=FAe(r);if(s.instruction!==ls.InitializeAccount2)throw new $o;if(!t||!n||!i)throw new Oo;return{programId:e,keys:{account:t,mint:n,rent:i},data:s}}function FAe({programId:r,keys:[e,t,n],data:i}){return{programId:r,keys:{account:e,mint:t,rent:n},data:kG.decode(i)}}const PG=Se.struct([Se.u8("instruction"),Ag("owner")]);function UAe(r,e=Xn){if(!r.programId.equals(e))throw new Po;if(r.data.length!==PG.span)throw new Do;const{keys:{account:t,mint:n},data:i}=zAe(r);if(i.instruction!==ls.InitializeAccount3)throw new $o;if(!t||!n)throw new Oo;return{programId:e,keys:{account:t,mint:n},data:i}}function zAe({programId:r,keys:[e,t],data:n}){return{programId:r,keys:{account:e,mint:t},data:PG.decode(n)}}const OG=Se.struct([Se.u8("instruction")]);function qAe(r,e){if(!r.programId.equals(e))throw new Po;if(r.data.length!==OG.span)throw new Do;const{keys:{account:t},data:n}=jAe(r);if(n.instruction!==ls.InitializeImmutableOwner)throw new $o;if(!t)throw new Oo;return{programId:e,keys:{account:t},data:n}}function jAe({programId:r,keys:[e],data:t}){const{instruction:n}=OG.decode(t);return{programId:r,keys:{account:e},data:{instruction:n}}}const RN={USDC:{mint:new $t("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),decimals:6}};let VAe=class{generateUsdcTransaction(e,t,n,i=1){return this.generateSplTokenTransaction(e,t,RN.USDC.mint.toBase58(),n,RN.USDC.decimals,i)}generateSplTokenTransaction(e,t,n,i,s,o=1){const a=new $t(e),c=new $t(t),l=new $t(n),u=HC(l,a,!1,Xn,Zl),f=HC(l,c,!1,Xn,Zl),h=BigInt(Math.round(i*10**s)),d=new Go({recentBlockhash:"a3PD566oU2nE9JHwuC897aaT7ispdqaQ63Si6jzyKAg",feePayer:a});for(let g=0;g<o;g++)d.add(vAe(u,l,f,a,h,s,[]));return d.signatures=[{publicKey:a,signature:null}],this.toBase64(d.serializeMessage())}generatePlainSolanaTransaction(e,t,n,i=1){const s=new $t(e),o=new $t(t),a=new Go({recentBlockhash:"a3PD566oU2nE9JHwuC897aaT7ispdqaQ63Si6jzyKAg",feePayer:s});for(let c=0;c<i;c++)a.add($d.transfer({fromPubkey:s,toPubkey:o,lamports:n}));return a.signatures=[{publicKey:s,signature:null}],this.toBase64(a.serializeMessage())}toBase64(e){let t="";for(const n of e){if(typeof n!="number")throw new Error("Invalid byte value");t+=String.fromCharCode(n)}try{return btoa(t)}catch{return Xe.from(e).toString("base64")}}},KAe=class extends sp{makeStateMachine(e){const{getPublicKey:t,generatePlainSolanaTransaction:n}=this.extractDependencies(e);return Yf({actors:{openAppStateMachine:new gw({input:{appName:"Solana"}}).makeStateMachine(e),getPublicKey:Wo(t),generatePlainSolanaTransaction:Wo(n)},guards:{noInternalError:({context:i})=>i._internalState.error===null,skipOpenApp:({context:i})=>i.input.skipOpenApp},actions:{assignErrorFromEvent:qt({_internalState:i=>({...i.context._internalState,error:new Yc(i.event.error instanceof Error?i.event.error.message:String(i.event.error))})})}}).createMachine({id:"GenerateTransactionDeviceAction",initial:"InitialState",context:({input:i})=>({input:i,intermediateValue:{requiredUserInteraction:cn.None},_internalState:{error:null,publicKey:null,serialisedTransaction:null}}),states:{InitialState:{always:[{target:"GetPublicKey",guard:"skipOpenApp"},{target:"OpenAppDeviceAction"}]},OpenAppDeviceAction:{exit:qt({intermediateValue:()=>({requiredUserInteraction:cn.None})}),invoke:{id:"openAppStateMachine",src:"openAppStateMachine",input:()=>({appName:"Solana"}),onSnapshot:{actions:qt({intermediateValue:({event:i})=>i.snapshot.context.intermediateValue})},onDone:{target:"CheckOpenAppDeviceActionResult",actions:qt({_internalState:({event:i,context:s})=>i.output.caseOf({Right:()=>s._internalState,Left:o=>({...s._internalState,error:o})})})}}},CheckOpenAppDeviceActionResult:{always:[{target:"GetPublicKey",guard:"noInternalError"},{target:"Error"}]},GetPublicKey:{entry:qt({intermediateValue:()=>({requiredUserInteraction:cn.None})}),invoke:{id:"getPublicKey",src:"getPublicKey",input:i=>({derivationPath:i.context.input.derivationPath,checkOnDevice:!1}),onDone:{target:"GetPublicKeyResultCheck",actions:qt({_internalState:({event:i,context:s})=>js(i.output)?{...s._internalState,publicKey:i.output.data}:{...s._internalState,error:i.output.error}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GetPublicKeyResultCheck:{always:[{target:"GenerateTransaction",guard:"noInternalError"},{target:"Error"}]},GenerateTransaction:{entry:qt({intermediateValue:()=>({requiredUserInteraction:cn.None})}),invoke:{id:"generatePlainSolanaTransaction",src:"generatePlainSolanaTransaction",input:i=>({publicKey:i.context._internalState.publicKey}),onDone:{target:"GenerateTransactionResultCheck",actions:qt({_internalState:({event:i,context:s})=>i.output?{...s._internalState,serialisedTransaction:i.output}:{...s._internalState,error:new Yc("Failed to generate transaction")}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GenerateTransactionResultCheck:{always:[{guard:"noInternalError",target:"Success"},{target:"Error"}]},Success:{type:"final"},Error:{type:"final"}},output:({context:i})=>i._internalState.serialisedTransaction?er(i._internalState.serialisedTransaction):ut(i._internalState.error||new Yc("No error or signature available"))})}extractDependencies(e){return{getPublicKey:async t=>e.sendCommand(new gk(t.input)),generatePlainSolanaTransaction:async t=>Promise.resolve(new VAe().generatePlainSolanaTransaction(t.input.publicKey,t.input.publicKey,1e6,1))}}};const HAe=64;let WAe=class{errorHelper=new Xf(Jf,Qf);args;constructor(e){this.args=e}getApdu(){const{more:e,extend:t,serializedTransaction:n}=this.args;let i=0;e&&(i|=2),t&&(i|=1);const s={cla:224,ins:6,p1:1,p2:i};return new Ma(s).addBufferToData(n).build()}parseResponse(e){return an.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{const t=new Sc(e);if(t.getUnparsedRemainingLength()===0)return Ur({data:Fr});const n=t.extractFieldByLength(HAe);return Ur(n?{data:es(n)}:{error:new Ns("Signature is missing")})})}},GAe=class{isCompatible=!0;version="0.0.1";modelId;constructor(e,t){if(this.modelId=e.deviceModelId,e.sessionStateType===xa.Connected){this.isCompatible=!1;return}if(e.currentApp.name!=="Solana"){this.isCompatible=!1;return}e.currentApp.name==="Solana"?this.version=e.currentApp.version:this.version=t.version}withMinVersionInclusive(e){return gs.gte(this.version,e)||(this.isCompatible=!1),this}withMinVersionExclusive(e){return gs.gt(this.version,e)||(this.isCompatible=!1),this}excludeDeviceModel(e){return this.modelId===e&&(this.isCompatible=!1),this}check(){return this.isCompatible}};const zo=r=>r.equals(Xn)||r.equals(Zu),to=r=>{try{return r()}catch{return null}},YAe=[{when:({programId:r})=>r.equals(Zl),decode:({ixMeta:r,message:e})=>{const t=r.accountKeyIndexes??[],n=f=>t[f]!==void 0?e.allKeys[t[f]]??null:null,i=n(1),s=n(3);if(!i||!s)return null;const o=t.map(f=>e.allKeys[f]).filter(f=>!!f),a=o.find(f=>f.equals(Zu))??o.find(f=>f.equals(Xn))??null,c=f=>f.equals($d.programId)||f.equals(Xn)||f.equals(Zu)||f.equals(Zl)||f.equals(zC),l=o.filter(f=>!c(f)&&!f.equals(i)&&!f.equals(s)),u=(f,h)=>HC(s,f,!0,h,Zl);if(a){for(const f of l)if(u(f,a).equals(i))return{createATA:{address:f.toBase58(),mintAddress:s.toBase58()}}}for(const f of l){if(u(f,Xn).equals(i))return{createATA:{address:f.toBase58(),mintAddress:s.toBase58()}};if(u(f,Zu).equals(i))return{createATA:{address:f.toBase58(),mintAddress:s.toBase58()}}}return null}},{when:({programId:r})=>r.equals(Zu),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{destination:t}}=mAe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{destination:t}}=BAe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{destination:t}}=bAe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{account:t,mint:n}}=TAe(r,e);return{createATA:{address:t.pubkey.toBase58(),mintAddress:n.pubkey.toBase58()}}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{account:t,mint:n}}=LAe(r,e);return{createATA:{address:t.pubkey.toBase58(),mintAddress:n.pubkey.toBase58()}}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{account:t,mint:n}}=UAe(r,e);return{createATA:{address:t.pubkey.toBase58(),mintAddress:n.pubkey.toBase58()}}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{account:t}}=qAe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{account:t}}=IAe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{account:t}}=kAe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{account:t}}=EAe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{account:t}}=_Ae(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{account:t}}=OAe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>zo(r),decode:({instruction:r,programId:e})=>to(()=>{const{keys:{account:t}}=$Ae(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>r.equals(Zl)||r.equals(Xn)||r.equals(Zu),decode:()=>null}];var DG=(r=>(r.STANDARD="Standard",r.SPL="SPL",r))(DG||{});const XAe="https://api.mainnet-beta.solana.com/",JAe=r=>new uAe(r,{commitment:"confirmed"}),kN=r=>!!r&&(r.equals(Zl)||r.equals(Xn)||r.equals(Zu));let QAe=class{constructor(e,t,n,i){this.rawTransactionBytes=e,this.tokenAddress=t,this.createATA=n,this.injectedRPCURL=i}async inspectTransactionType(){try{const e=await this.normaliseMessage(this.rawTransactionBytes);if(this.tokenAddress||this.createATA)return{transactionType:e.compiledInstructions.some(i=>kN(e.allKeys[i.programIdIndex]))?"SPL":"Standard",data:{...this.tokenAddress?{tokenAddress:this.tokenAddress}:{},...this.createATA?{createATA:this.createATA}:{}}};let t=!1,n={};for(const i of e.compiledInstructions){const s=e.allKeys[i.programIdIndex];if(!s)continue;kN(s)&&(t=!0);const o=i.accountKeyIndexes.map(l=>e.allKeys[l]).filter(l=>!!l),a=new oo({programId:s,keys:o.map(l=>({pubkey:l,isSigner:!1,isWritable:!1})),data:gr.Buffer.from(i.data)}),c={programId:s,ixMeta:i,message:e,instruction:a};for(const l of YAe){if(!l.when(c))continue;const u=l.decode(c);u&&(u.createATA&&!n.createATA?n={...n,createATA:u.createATA}:u.tokenAddress&&!n.tokenAddress&&!n.createATA&&(n={...n,tokenAddress:u.tokenAddress}))}}return n.createATA?{transactionType:"SPL",data:n}:n.tokenAddress?{transactionType:"SPL",data:n}:t?{transactionType:"SPL",data:{}}:{transactionType:"Standard",data:{}}}catch{return{transactionType:"Standard",data:{}}}}async normaliseMessage(e){const t=this.tryDeserialiseVersioned(e);if(t){const c=t.message,l=await this.resolveLookedUpAddressesFromMessage(c),u=[...c.staticAccountKeys,...l?.writable??[],...l?.readonly??[]];return{compiledInstructions:c.compiledInstructions.map(f=>{const h=f,d=Array.from(h.accounts??f.accountKeyIndexes??[]);let g;return f.data instanceof Uint8Array?g=f.data:typeof f.data=="string"?g=gr.Buffer.from(f.data,"base64"):g=Uint8Array.from(f.data??[]),{programIdIndex:f.programIdIndex,accountKeyIndexes:d,data:g}}),allKeys:u}}const n=Go.from(e),i=new Map,s=c=>{if(!c)return;const l=c.toBase58();i.has(l)||i.set(l,c)};s(n.feePayer??null);for(const c of n.instructions){s(c.programId);for(const l of c.keys)s(l.pubkey)}const o=Array.from(i.values()),a=new Map(o.map((c,l)=>[c.toBase58(),l]));return{compiledInstructions:n.instructions.map(c=>({programIdIndex:a.get(c.programId.toBase58())??-1,accountKeyIndexes:c.keys.map(l=>a.get(l.pubkey.toBase58())??-1),data:c.data})),allKeys:o}}tryDeserialiseVersioned(e){try{return _k.deserialize(e)}catch{try{return{message:xk.deserialize(e)}}catch{return null}}}async resolveLookedUpAddressesFromMessage(e){const t=e.addressTableLookups??[];if(!t.length)return;const n=[],i=[];for(const s of t){const o=(await JAe(this.injectedRPCURL||XAe).getAddressLookupTable(s.accountKey)).value;if(!o)continue;const a=o.state.addresses;for(const c of s.writableIndexes??[]){const l=a[c];l&&n.push(l)}for(const c of s.readonlyIndexes??[]){const l=a[c];l&&i.push(l)}}return{writable:n,readonly:i}}};const ZAe=224,eIe=32,tIe=0,rIe=0,PN=4;let nIe=class{errorHelper=new Xf(Jf,Qf);getApdu(){return new Ma({cla:ZAe,ins:eIe,p1:tIe,p2:rIe}).build()}parseResponse(e){return an.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{const t=new Sc(e);if(t.testMinimalLength(PN)===!1)return Ur({error:new Ns("Challenge key is missing")});const n=t.encodeToHexaString(t.extractFieldByLength(PN));return Ur({data:{challenge:n}})})}},iIe=class{constructor(e,t){this.api=e,this.args=t}async run(){const{contextModule:e,options:t}=this.args,n=this.api.getDeviceSessionState();let i;const s=await this.api.sendCommand(new nIe);return js(s)&&(i=s.data.challenge),(await e.getSolanaContext({deviceModelId:n.deviceModelId,tokenAddress:t.tokenAddress,challenge:i,createATA:t.createATA})).caseOf({Left:o=>{throw o},Right:o=>({challenge:i,descriptor:o.descriptor,addressResult:{tokenAccount:o.tokenAccount,owner:o.owner,contract:o.contract},calCertificate:o.certificate})})}};const sIe=224,oIe=33,aIe=0,cIe=0;let lIe=class{constructor(e){this.args=e}errorHelper=new Xf(Jf,Qf);getApdu(){const e={cla:sIe,ins:oIe,p1:aIe,p2:cIe};return new Ma(e).addBufferToData(this.args.payload).build()}parseResponse(e){return this.errorHelper.getError(e)||(e.data.length!==0?Ur({error:new Ns("Unexpected data in response")}):Ur({data:void 0}))}};const uIe=176,fIe=6,hIe=4,dIe=0;let pIe=class{constructor(e){this.args=e}errorHelper=new Xf(Jf,Qf);getApdu(){const e={cla:uIe,ins:fIe,p1:hIe,p2:dIe};return new Ma(e).addBufferToData(this.args.pkiBlob).build()}parseResponse(e){return this.errorHelper.getError(e)||(e.data.length!==0?Ur({error:new Ns("Unexpected data in response")}):Ur({data:void 0}))}},gIe=class{constructor(e,t){this.api=e,this.context=t}async run(){const{descriptor:e,certificate:t}=this.context,{payload:n}=t,i=await this.api.sendCommand(new pIe({pkiBlob:n}));if(!js(i))throw i;const s=await this.api.sendCommand(new lIe({payload:e}));if(!js(s))throw s;return Fr}};class mIe{constructor(e,t){this.api=e,this.args=t}async run(){const{data:e,commandFactory:t}=this.args,n=new Ed(e.length).addBufferToData(e).build();for(let i=0;i<n.length;i+=nd){const s=i+nd>=n.length,o=await this.api.sendCommand(t({more:!s,extend:i>0,chunkedData:n.slice(i,i+nd)}));if(!js(o))return o;if(s)return Ur({data:o.data})}throw new Ns("No result after processing all chunks")}}const yIe=4;let vIe=class{constructor(e,t){this.api=e,this.args=t}async run(){const{sendingData:e,derivationPath:t,commandFactory:n}=this.args,i=dk.splitPath(t),s=new Ed(e.length+2+i.length*yIe);s.add8BitUIntToData(1),s.add8BitUIntToData(i.length),i.forEach(a=>s.add32BitUIntToData(a)),s.addBufferToData(e);const o=s.build();return await new mIe(this.api,{data:o,commandFactory:n}).run()}},bIe=class extends sp{makeStateMachine(e){const{signTransaction:t,getAppConfig:n,buildContext:i,provideContext:s,inspectTransaction:o}=this.extractDependencies(e);return Yf({actors:{openAppStateMachine:new gw({input:{appName:"Solana"}}).makeStateMachine(e),getAppConfig:Wo(n),inspectTransaction:Wo(({input:a})=>o({serializedTransaction:a.serializedTransaction,resolutionContext:a.resolutionContext,rpcUrl:a.rpcUrl})),buildContext:Wo(i),provideContext:Wo(s),signTransaction:Wo(t)},guards:{noInternalError:({context:a})=>a._internalState.error===null,skipOpenApp:({context:a})=>a.input.transactionOptions?.skipOpenApp||!1,isSPLSupported:({context:a})=>new GAe(e.getDeviceSessionState(),a._internalState.appConfig).withMinVersionExclusive("1.4.0").excludeDeviceModel(Lr.NANO_S).check(),isAnSPLTransaction:({context:a})=>a._internalState.inspectorResult?.transactionType===DG.SPL,shouldSkipInspection:({context:a})=>a._internalState.error===null&&!!a.input.transactionOptions?.transactionResolutionContext},actions:{assignErrorFromEvent:qt({_internalState:a=>({...a.context._internalState,error:new Yc(a.event.error instanceof Error?a.event.error.message:String(a.event.error))})})}}).createMachine({id:"SignTransactionDeviceAction",initial:"InitialState",context:({input:a})=>({input:a,intermediateValue:{requiredUserInteraction:cn.None},_internalState:{error:null,signature:null,appConfig:null,solanaTransactionContext:null,inspectorResult:null}}),states:{InitialState:{always:[{target:"GetAppConfig",guard:"skipOpenApp"},{target:"OpenAppDeviceAction"}]},OpenAppDeviceAction:{exit:qt({intermediateValue:()=>({requiredUserInteraction:cn.None})}),invoke:{id:"openAppStateMachine",src:"openAppStateMachine",input:()=>({appName:"Solana"}),onSnapshot:{actions:qt({intermediateValue:({event:a})=>a.snapshot.context.intermediateValue})},onDone:{target:"CheckOpenAppDeviceActionResult",actions:qt({_internalState:({event:a,context:c})=>a.output.caseOf({Right:()=>c._internalState,Left:l=>({...c._internalState,error:l})})})}}},CheckOpenAppDeviceActionResult:{always:[{target:"GetAppConfig",guard:"noInternalError"},{target:"Error"}]},GetAppConfig:{entry:qt({intermediateValue:()=>({requiredUserInteraction:cn.None})}),invoke:{id:"getAppConfig",src:"getAppConfig",onDone:{target:"GetAppConfigResultCheck",actions:qt({_internalState:({event:a,context:c})=>js(a.output)?{...c._internalState,appConfig:a.output.data}:{...c._internalState,error:a.output.error}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GetAppConfigResultCheck:{always:[{target:"InspectTransaction",guard:"noInternalError"},{target:"Error"}]},InspectTransaction:{invoke:{id:"inspectTransaction",src:"inspectTransaction",input:({context:a})=>({serializedTransaction:a.input.transaction,resolutionContext:a.input.transactionOptions?.transactionResolutionContext,rpcUrl:a.input.transactionOptions?.solanaRPCURL}),onDone:{target:"AfterInspect",actions:qt({_internalState:({context:a,event:c})=>({...a._internalState,inspectorResult:c.output})})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},AfterInspect:{always:[{target:"BuildContext",guard:"isAnSPLTransaction"},{target:"SignTransaction",guard:"noInternalError"},{target:"Error"}]},BuildContext:{entry:qt({intermediateValue:()=>({requiredUserInteraction:cn.None})}),invoke:{id:"buildContext",src:"buildContext",input:({context:a})=>{const c=a._internalState.inspectorResult?.data;return{contextModule:a.input.contextModule,options:{tokenAddress:c?.tokenAddress,createATA:c?.createATA}}},onDone:{target:"ProvideContext",actions:[qt({_internalState:({event:a,context:c})=>({...c._internalState,solanaTransactionContext:{descriptor:a.output.descriptor,certificate:a.output.calCertificate,tokenAccount:a.output.addressResult.tokenAccount,owner:a.output.addressResult.owner,contract:a.output.addressResult.contract}})})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ProvideContext:{entry:qt({intermediateValue:()=>({requiredUserInteraction:cn.None})}),invoke:{id:"provideContext",src:"provideContext",input:({context:a})=>{if(!a._internalState.solanaTransactionContext)throw new Yc("Solana transaction context is not available");return a._internalState.solanaTransactionContext},onDone:{target:"ProvideContextResultCheck"},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ProvideContextResultCheck:{always:[{target:"SignTransaction",guard:"noInternalError"},{target:"Error"}]},SignTransaction:{entry:qt({intermediateValue:{requiredUserInteraction:cn.SignTransaction}}),exit:qt({intermediateValue:{requiredUserInteraction:cn.None}}),invoke:{id:"signTransaction",src:"signTransaction",input:({context:a})=>({derivationPath:a.input.derivationPath,serializedTransaction:a.input.transaction}),onDone:{target:"SignTransactionResultCheck",actions:[qt({_internalState:({event:a,context:c})=>{if(!js(a.output))return{...c._internalState,error:a.output.error};const l=a.output.data.extract();return a.output.data.isJust()&&l instanceof Uint8Array?{...c._internalState,signature:l}:{...c._internalState,error:new Yc("No Signature available")}}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},SignTransactionResultCheck:{always:[{guard:"noInternalError",target:"Success"},{target:"Error"}]},Success:{type:"final"},Error:{type:"final"}},output:({context:a})=>a._internalState.signature?er(a._internalState.signature):ut(a._internalState.error||new Yc("No error or signature available"))})}extractDependencies(e){return{getAppConfig:async()=>e.sendCommand(new ZW),buildContext:async t=>new iIe(e,t.input).run(),provideContext:async t=>new gIe(e,t.input).run(),signTransaction:async t=>new vIe(e,{commandFactory:n=>new WAe({serializedTransaction:n.chunkedData,more:n.more,extend:n.extend}),derivationPath:t.input.derivationPath,sendingData:t.input.serializedTransaction}).run(),inspectTransaction:async t=>Promise.resolve(new QAe(t.serializedTransaction,t.resolutionContext?.tokenAddress,t.resolutionContext?.createATA,t.rpcUrl).inspectTransactionType())}}};var wIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},c2=(r,e)=>(t,n)=>e(t,n,r);let WC=class{constructor(e,t,n){this.dmk=e,this.sessionId=t,this.contextModule=n}getAddress(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new nM({input:{command:new gk(e),appName:"Solana",requiredUserInteraction:e.checkOnDevice?cn.VerifyAddress:cn.None,skipOpenApp:e.skipOpenApp}})})}signTransaction(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new bIe({input:{derivationPath:e.derivationPath,transaction:e.transaction,transactionOptions:e.solanaTransactionOptionalConfig,contextModule:this.contextModule}})})}generateTransaction(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new KAe({input:{derivationPath:e.derivationPath,skipOpenApp:e.skipOpenApp,contextModule:this.contextModule}})})}signMessage(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new uye({input:{task:async t=>new DSe(t,{derivationPath:e.derivationPath,sendingData:new TextEncoder().encode(e.message)}).run(),appName:"Solana",requiredUserInteraction:cn.SignPersonalMessage,skipOpenApp:e.skipOpenApp}})})}getAppConfiguration(){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new nM({input:{command:new ZW,appName:"Solana",requiredUserInteraction:cn.None,skipOpenApp:!1}})})}};WC=wIe([Ct(),c2(0,Ze(ld.Dmk)),c2(1,Ze(ld.SessionId)),c2(2,Ze(ld.ContextModule))],WC);const xIe=()=>new pn(({bind:r})=>{r(up.AppBinder).to(WC)});var _Ie=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},SIe=(r,e)=>(t,n)=>e(t,n,r);let GC=class{constructor(e){this.appBinder=e}execute(e,t){return this.appBinder.getAddress({derivationPath:e,checkOnDevice:t?.checkOnDevice??!1,skipOpenApp:t?.skipOpenApp??!1})}};GC=_Ie([Ct(),SIe(0,Ze(up.AppBinder))],GC);var EIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},AIe=(r,e)=>(t,n)=>e(t,n,r);let YC=class{constructor(r){this.appBinder=r}execute(){return this.appBinder.getAppConfiguration()}};YC=EIe([Ct(),AIe(0,Ze(up.AppBinder))],YC);var IIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},CIe=(r,e)=>(t,n)=>e(t,n,r);let XC=class{constructor(e){this.appBinder=e}execute(e,t){return this.appBinder.generateTransaction({derivationPath:e,skipOpenApp:t?.skipOpenApp??!1})}};XC=IIe([Ct(),CIe(0,Ze(up.AppBinder))],XC);var TIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},RIe=(r,e)=>(t,n)=>e(t,n,r);let JC=class{_appBinder;constructor(e){this._appBinder=e}execute(e,t,n){return this._appBinder.signMessage({derivationPath:e,message:t,skipOpenApp:n?.skipOpenApp??!1})}};JC=TIe([Ct(),RIe(0,Ze(up.AppBinder))],JC);var kIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},PIe=(r,e)=>(t,n)=>e(t,n,r);let QC=class{constructor(r){this.appBinder=r}execute(r,e,t){return this.appBinder.signTransaction({derivationPath:r,transaction:e,solanaTransactionOptionalConfig:t})}};QC=kIe([Ct(),PIe(0,Ze(up.AppBinder))],QC);const OIe=()=>new pn(({bind:r})=>{r(jc.GetAddressUseCase).to(GC),r(jc.GetAppConfigurationUseCase).to(YC),r(jc.SignTransactionUseCase).to(QC),r(jc.SignMessageUseCase).to(JC),r(jc.GenerateTransactionUseCase).to(XC)}),DIe=({dmk:r,sessionId:e,contextModule:t})=>{const n=new tk;return n.bind(ld.Dmk).toConstantValue(r),n.bind(ld.SessionId).toConstantValue(e),n.bind(ld.ContextModule).toConstantValue(t),n.loadSync(xIe(),OIe()),n};let $Ie=class{_container;constructor({dmk:e,sessionId:t,contextModule:n}){this._container=DIe({dmk:e,sessionId:t,contextModule:n})}signTransaction(e,t,n){return this._container.get(jc.SignTransactionUseCase).execute(e,t,n)}signMessage(e,t,n){return this._container.get(jc.SignMessageUseCase).execute(e,t,n)}getAddress(e,t){return this._container.get(jc.GetAddressUseCase).execute(e,t)}getAppConfiguration(){return this._container.get(jc.GetAppConfigurationUseCase).execute()}},MIe=class{_dmk;_sessionId;_customContextModule;_originToken;constructor({dmk:e,sessionId:t,originToken:n}){this._dmk=e,this._sessionId=t,this._originToken=n}withContextModule(e){return this._customContextModule=e,this}build(){return new $Ie({dmk:this._dmk,sessionId:this._sessionId,contextModule:this._customContextModule??new ESe({originToken:this._originToken}).build()})}},BIe=class extends ko{constructor(e){super(e),this.err=e}_tag="WebHidTransportNotSupportedError"},NIe=class extends ko{constructor(e){super(e),this.err=e}_tag="WebHidSendReportError"};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jt=function(){return Jt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Jt.apply(this,arguments)};function LIe(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function FIe(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function Wl(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(FIe(arguments[e]));return r}function UIe(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Tk(){return!UIe()&&Object.prototype.toString.call(typeof Kt<"u"?Kt:0)==="[object process]"}function zIe(r,e){return r.require(e)}var qIe={};function Tu(){return Tk()?pa:typeof window<"u"?window:typeof self<"u"?self:qIe}function Rk(r,e,t){var n=t||Tu(),i=n.__SENTRY__=n.__SENTRY__||{},s=i[r]||(i[r]=e());return s}var jIe=Object.prototype.toString;function VIe(r,e){return jIe.call(r)==="[object "+e+"]"}function $G(r){return VIe(r,"Object")}function MG(r){return!!(r&&r.then&&typeof r.then=="function")}var BG=typeof __SENTRY_DEBUG__>"u"?!0:__SENTRY_DEBUG__,KIe=Tu(),HIe="Sentry Logger ",ZC=["debug","info","warn","error","log","assert"];function NG(r){var e=Tu();if(!("console"in e))return r();var t=e.console,n={};ZC.forEach(function(i){var s=t[i]&&t[i].__sentry_original__;i in e.console&&s&&(n[i]=t[i],t[i]=s)});try{return r()}finally{Object.keys(n).forEach(function(i){t[i]=n[i]})}}function ON(){var r=!1,e={enable:function(){r=!0},disable:function(){r=!1}};return BG?ZC.forEach(function(t){e[t]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];r&&NG(function(){var s;(s=KIe.console)[t].apply(s,Wl([HIe+"["+t+"]:"],n))})}}):ZC.forEach(function(t){e[t]=function(){}}),e}var Zv;BG?Zv=Rk("logger",ON):Zv=ON();function eT(r){var e,t;if($G(r)){var n={};try{for(var i=LIe(Object.keys(r)),s=i.next();!s.done;s=i.next()){var o=s.value;typeof r[o]<"u"&&(n[o]=eT(r[o]))}}catch(a){e={error:a}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}return Array.isArray(r)?r.map(eT):r}function F0(){var r=Tu(),e=r.crypto||r.msCrypto;if(e!==void 0&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t),t[3]=t[3]&4095|16384,t[4]=t[4]&16383|32768;var n=function(i){for(var s=i.toString(16);s.length<4;)s="0"+s;return s};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(i){var s=Math.random()*16|0,o=i==="x"?s:s&3|8;return o.toString(16)})}var WIe=function(){function r(e){var t=this;this._state=0,this._handlers=[],this._resolve=function(n){t._setResult(1,n)},this._reject=function(n){t._setResult(2,n)},this._setResult=function(n,i){if(t._state===0){if(MG(i)){i.then(t._resolve,t._reject);return}t._state=n,t._value=i,t._executeHandlers()}},this._executeHandlers=function(){if(t._state!==0){var n=t._handlers.slice();t._handlers=[],n.forEach(function(i){i[0]||(t._state===1&&i[1](t._value),t._state===2&&i[2](t._value),i[0]=!0)})}};try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}return r.prototype.then=function(e,t){var n=this;return new r(function(i,s){n._handlers.push([!1,function(o){if(!e)i(o);else try{i(e(o))}catch(a){s(a)}},function(o){if(!t)s(o);else try{i(t(o))}catch(a){s(a)}}]),n._executeHandlers()})},r.prototype.catch=function(e){return this.then(function(t){return t},e)},r.prototype.finally=function(e){var t=this;return new r(function(n,i){var s,o;return t.then(function(a){o=!1,s=a,e&&e()},function(a){o=!0,s=a,e&&e()}).then(function(){if(o){i(s);return}n(s)})})},r}(),tT={nowSeconds:function(){return Date.now()/1e3}};function GIe(){var r=Tu().performance;if(!(!r||!r.now)){var e=Date.now()-r.now();return{now:function(){return r.now()},timeOrigin:e}}}function YIe(){try{var r=zIe(module,"perf_hooks");return r.performance}catch{return}}var l2=Tk()?YIe():GIe(),DN=l2===void 0?tT:{nowSeconds:function(){return(l2.timeOrigin+l2.now())/1e3}},LG=tT.nowSeconds.bind(tT),$N=DN.nowSeconds.bind(DN);(function(){var r=Tu().performance;if(!(!r||!r.now)){var e=3600*1e3,t=r.now(),n=Date.now(),i=r.timeOrigin?Math.abs(r.timeOrigin+t-n):e,s=i<e,o=r.timing&&r.timing.navigationStart,a=typeof o=="number",c=a?Math.abs(o+t-n):e,l=c<e;return s||l?i<=c?r.timeOrigin:o:n}})();var MN=100,rT=function(){function r(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return r.clone=function(e){var t=new r;return e&&(t._breadcrumbs=Wl(e._breadcrumbs),t._tags=Jt({},e._tags),t._extra=Jt({},e._extra),t._contexts=Jt({},e._contexts),t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=Wl(e._eventProcessors),t._requestSession=e._requestSession),t},r.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},r.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},r.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},r.prototype.getUser=function(){return this._user},r.prototype.getRequestSession=function(){return this._requestSession},r.prototype.setRequestSession=function(e){return this._requestSession=e,this},r.prototype.setTags=function(e){return this._tags=Jt(Jt({},this._tags),e),this._notifyScopeListeners(),this},r.prototype.setTag=function(e,t){var n;return this._tags=Jt(Jt({},this._tags),(n={},n[e]=t,n)),this._notifyScopeListeners(),this},r.prototype.setExtras=function(e){return this._extra=Jt(Jt({},this._extra),e),this._notifyScopeListeners(),this},r.prototype.setExtra=function(e,t){var n;return this._extra=Jt(Jt({},this._extra),(n={},n[e]=t,n)),this._notifyScopeListeners(),this},r.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},r.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},r.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},r.prototype.setTransaction=function(e){return this.setTransactionName(e)},r.prototype.setContext=function(e,t){var n;return t===null?delete this._contexts[e]:this._contexts=Jt(Jt({},this._contexts),(n={},n[e]=t,n)),this._notifyScopeListeners(),this},r.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},r.prototype.getSpan=function(){return this._span},r.prototype.getTransaction=function(){var e=this.getSpan();return e&&e.transaction},r.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},r.prototype.getSession=function(){return this._session},r.prototype.update=function(e){if(!e)return this;if(typeof e=="function"){var t=e(this);return t instanceof r?t:this}return e instanceof r?(this._tags=Jt(Jt({},this._tags),e._tags),this._extra=Jt(Jt({},this._extra),e._extra),this._contexts=Jt(Jt({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):$G(e)&&(e=e,this._tags=Jt(Jt({},this._tags),e.tags),this._extra=Jt(Jt({},this._extra),e.extra),this._contexts=Jt(Jt({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},r.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},r.prototype.addBreadcrumb=function(e,t){var n=typeof t=="number"?Math.min(t,MN):MN;if(n<=0)return this;var i=Jt({timestamp:LG()},e);return this._breadcrumbs=Wl(this._breadcrumbs,[i]).slice(-n),this._notifyScopeListeners(),this},r.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},r.prototype.applyToEvent=function(e,t){if(this._extra&&Object.keys(this._extra).length&&(e.extra=Jt(Jt({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=Jt(Jt({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=Jt(Jt({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=Jt(Jt({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=Jt({trace:this._span.getTraceContext()},e.contexts);var n=this._span.transaction&&this._span.transaction.name;n&&(e.tags=Jt({transaction:n},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=Wl(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors(Wl(XIe(),this._eventProcessors),e,t)},r.prototype.setSDKProcessingMetadata=function(e){return this._sdkProcessingMetadata=Jt(Jt({},this._sdkProcessingMetadata),e),this},r.prototype._notifyEventProcessors=function(e,t,n,i){var s=this;return i===void 0&&(i=0),new WIe(function(o,a){var c=e[i];if(t===null||typeof c!="function")o(t);else{var l=c(Jt({},t),n);MG(l)?l.then(function(u){return s._notifyEventProcessors(e,u,n,i+1).then(o)}).then(null,a):s._notifyEventProcessors(e,l,n,i+1).then(o).then(null,a)}})},r.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(t){t(e)}),this._notifyingListeners=!1)},r.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},r}();function XIe(){return Rk("globalEventProcessors",function(){return[]})}var JIe=function(){function r(e){this.errors=0,this.sid=F0(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var t=$N();this.timestamp=t,this.started=t,e&&this.update(e)}return r.prototype.update=function(e){if(e===void 0&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),!this.did&&!e.did&&(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||$N(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=e.sid.length===32?e.sid:F0()),e.init!==void 0&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),typeof e.started=="number"&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if(typeof e.duration=="number")this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),typeof e.errors=="number"&&(this.errors=e.errors),e.status&&(this.status=e.status)},r.prototype.close=function(e){e?this.update({status:e}):this.status==="ok"?this.update({status:"exited"}):this.update()},r.prototype.toJSON=function(){return eT({sid:""+this.sid,init:this.init,started:new Date(this.started*1e3).toISOString(),timestamp:new Date(this.timestamp*1e3).toISOString(),status:this.status,errors:this.errors,did:typeof this.did=="number"||typeof this.did=="string"?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},r}(),BN=typeof __SENTRY_DEBUG__>"u"?!0:__SENTRY_DEBUG__,kk=4,QIe=100,Pk=function(){function r(e,t,n){t===void 0&&(t=new rT),n===void 0&&(n=kk),this._version=n,this._stack=[{}],this.getStackTop().scope=t,e&&this.bindClient(e)}return r.prototype.isOlderThan=function(e){return this._version<e},r.prototype.bindClient=function(e){var t=this.getStackTop();t.client=e,e&&e.setupIntegrations&&e.setupIntegrations()},r.prototype.pushScope=function(){var e=rT.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},r.prototype.popScope=function(){return this.getStack().length<=1?!1:!!this.getStack().pop()},r.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},r.prototype.getClient=function(){return this.getStackTop().client},r.prototype.getScope=function(){return this.getStackTop().scope},r.prototype.getStack=function(){return this._stack},r.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},r.prototype.captureException=function(e,t){var n=this._lastEventId=t&&t.event_id?t.event_id:F0(),i=t;if(!t){var s=void 0;try{throw new Error("Sentry syntheticException")}catch(o){s=o}i={originalException:e,syntheticException:s}}return this._invokeClient("captureException",e,Jt(Jt({},i),{event_id:n})),n},r.prototype.captureMessage=function(e,t,n){var i=this._lastEventId=n&&n.event_id?n.event_id:F0(),s=n;if(!n){var o=void 0;try{throw new Error(e)}catch(a){o=a}s={originalException:e,syntheticException:o}}return this._invokeClient("captureMessage",e,t,Jt(Jt({},s),{event_id:i})),i},r.prototype.captureEvent=function(e,t){var n=t&&t.event_id?t.event_id:F0();return e.type!=="transaction"&&(this._lastEventId=n),this._invokeClient("captureEvent",e,Jt(Jt({},t),{event_id:n})),n},r.prototype.lastEventId=function(){return this._lastEventId},r.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),i=n.scope,s=n.client;if(!(!i||!s)){var o=s.getOptions&&s.getOptions()||{},a=o.beforeBreadcrumb,c=a===void 0?null:a,l=o.maxBreadcrumbs,u=l===void 0?QIe:l;if(!(u<=0)){var f=LG(),h=Jt({timestamp:f},e),d=c?NG(function(){return c(h,t)}):h;d!==null&&i.addBreadcrumb(d,u)}}},r.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},r.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},r.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},r.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},r.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},r.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},r.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,i=t.client;n&&i&&e(n)},r.prototype.run=function(e){var t=NN(this);try{e(this)}finally{NN(t)}},r.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch{return BN&&Zv.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},r.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},r.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},r.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},r.prototype.captureSession=function(e){if(e===void 0&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},r.prototype.endSession=function(){var e=this.getStackTop(),t=e&&e.scope,n=t&&t.getSession();n&&n.close(),this._sendSessionUpdate(),t&&t.setSession()},r.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,i=t.client,s=i&&i.getOptions()||{},o=s.release,a=s.environment,c=Tu(),l=(c.navigator||{}).userAgent,u=new JIe(Jt(Jt(Jt({release:o,environment:a},n&&{user:n.getUser()}),l&&{userAgent:l}),e));if(n){var f=n.getSession&&n.getSession();f&&f.status==="ok"&&f.update({status:"exited"}),this.endSession(),n.setSession(u)}return u},r.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var i=t.getSession&&t.getSession();i&&n&&n.captureSession&&n.captureSession(i)}},r.prototype._invokeClient=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var s=this.getStackTop(),o=s.scope,a=s.client;a&&a[e]&&(t=a)[e].apply(t,Wl(n,[o]))},r.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Bw(),s=i.__SENTRY__;if(s&&s.extensions&&typeof s.extensions[e]=="function")return s.extensions[e].apply(this,t);BN&&Zv.warn("Extension method "+e+" couldn't be found, doing nothing.")},r}();function Bw(){var r=Tu();return r.__SENTRY__=r.__SENTRY__||{extensions:{},hub:void 0},r}function NN(r){var e=Bw(),t=Gl(e);return Ok(e,r),t}function ZIe(){var r=Bw();return(!FG(r)||Gl(r).isOlderThan(kk))&&Ok(r,new Pk),Tk()?eCe(r):Gl(r)}function eCe(r){try{var e=Bw().__SENTRY__,t=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!t)return Gl(r);if(!FG(t)||Gl(t).isOlderThan(kk)){var n=Gl(r).getStackTop();Ok(t,new Pk(n.client,rT.clone(n.scope)))}return Gl(t)}catch{return Gl(r)}}function FG(r){return!!(r&&r.__SENTRY__&&r.__SENTRY__.hub)}function Gl(r){return Rk("hub",function(){return new Pk},r)}function Ok(r,e){if(!r)return!1;var t=r.__SENTRY__=r.__SENTRY__||{};return t.hub=e,!0}function tCe(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var n=ZIe();if(n&&n[r])return n[r].apply(n,Wl(e));throw new Error("No hub defined or "+r+" was not found on the hub, please open a bug report.")}function w0(r,e){var t=new Error("Sentry syntheticException");return tCe("captureException",r,{captureContext:e,originalException:r,syntheticException:t})}const rCe=64,nCe=6e3;let iCe=class{dependencies;apduSender;apduReceiver;sendApduPromiseResolver;logger;constructor({dependencies:e,apduSenderFactory:t,apduReceiverFactory:n},i){const s=an.of(su.numberToByteArray(Math.floor(Math.random()*65535),2));this.logger=i("WebHidApduSender"),this.apduSender=t({frameSize:rCe,channel:s,padding:!0}),this.apduReceiver=n({channel:s}),this.sendApduPromiseResolver=Fr,this.dependencies=e,this.logger.info(" Connected to device")}async sendApdu(e,t,n){this.logger.debug("[sendApdu]",{data:{apdu:e,abortTimeout:n}});let i;const s=new Promise(o=>{this.sendApduPromiseResolver=an.of((...a)=>(i&&clearTimeout(i),o(...a)))});for(const o of this.apduSender.getFrames(e))try{await this.dependencies.device.sendReport(0,o.getRawData())}catch(a){return this.logger.info("Error sending frame",{data:{error:a}}),Promise.resolve(ut(new NIe(a)))}return n&&(i=setTimeout(()=>{this.logger.debug("[sendApdu] Abort timeout",{data:{abortTimeout:n}}),this.sendApduPromiseResolver.map(o=>o(ut(new iye("Abort timeout"))))},n)),s}receiveHidInputReport(e){const t=new Uint8Array(e.data.buffer);this.apduReceiver.handleFrame(t).map(n=>{n.map(i=>{this.logger.debug("Received APDU Response",{data:{response:i}}),this.sendApduPromiseResolver.map(s=>s(er(i)))})}).mapLeft(n=>{this.sendApduPromiseResolver.map(i=>i(ut(n)))})}getDependencies(){return this.dependencies}setDependencies(e){this.dependencies=e}async setupConnection(){try{this.dependencies.device.oninputreport=e=>this.receiveHidInputReport(e),await this.dependencies.device.open()}catch(e){if(e instanceof DOMException&&e.name==="InvalidStateError")this.logger.info("Device is already opened");else{const t=new pI(e);throw this.logger.error("Error while opening device",{data:{error:e}}),w0(t),e}}}closeConnection(){this.logger.info(" Disconnect");try{this.dependencies.device.close()}catch(e){this.logger.error("Error while closing device",{data:{device:this.dependencies.device,error:e}})}}};const sCe="WEB-HID";let oCe=class{constructor(e,t,n,i,s=a=>new f1e(a),o=(a,c)=>new iCe(a,c)){this._deviceModelDataSource=e,this._loggerServiceFactory=t,this._apduSenderFactory=n,this._apduReceiverFactory=i,this._deviceConnectionStateMachineFactory=s,this._deviceApduSenderFactory=o,this._logger=t("WebWebHidTransport"),this.startListeningToConnectionEvents()}_transportDiscoveredDevices=new oH([]);_deviceConnectionsByHidDevice=new Map;_deviceConnectionsPendingReconnection=new Set;_connectionListenersAbortController=new AbortController;_logger;connectionType="USB";identifier=sCe;get hidApi(){return this.isSupported()?er(navigator.hid):ut(new BIe("WebHID not supported"))}isSupported(){try{const e=!!navigator?.hid;return this._logger.debug(`isSupported: ${e}`),e}catch(e){return this._logger.error("isSupported: error",{data:{error:e}}),!1}}getIdentifier(){return this.identifier}async getDevices(){return lr.liftEither(this.hidApi).map(async e=>{try{return(await e.getDevices()).filter(t=>t.vendorId===$$)}catch(t){const n=new xE(t);throw this._logger.error("getDevices: error getting devices",{data:{error:t}}),w0(n),n}})}mapHIDDeviceToTransportDiscoveredDevice(e){const t=this._transportDiscoveredDevices.getValue().find(i=>i.hidDevice===e);if(t)return t;const n=this._deviceConnectionsByHidDevice.get(e);return this.getDeviceModel(e).caseOf({Just:i=>{const s=n?.getDeviceId()??rm(),o={id:s,deviceModel:i,hidDevice:e,transport:this.identifier};return this._logger.debug(`Discovered device ${s} ${o.deviceModel.productName}`),o},Nothing:()=>{throw this._logger.warn(`Device not recognized: hidDevice.productId: 0x${e.productId.toString(16)}`),new nye(`Device not recognized: hidDevice.productId: 0x${e.productId.toString(16)}`)}})}listenToAvailableDevices(){return this.updateTransportDiscoveredDevices(),this._transportDiscoveredDevices.pipe(iu(e=>e.map(({hidDevice:t,...n})=>n)))}async updateTransportDiscoveredDevices(){(await this.getDevices()).caseOf({Left:e=>{this._logger.error("Error while getting accessible device",{data:{error:e}}),w0(e)},Right:e=>{this._transportDiscoveredDevices.next(e.map(t=>this.mapHIDDeviceToTransportDiscoveredDevice(t)))}})}async promptDeviceAccess(){return lr.liftEither(this.hidApi).map(async e=>{let t=[];try{t=await e.requestDevice({filters:[{vendorId:$$}]}),await this.updateTransportDiscoveredDevices()}catch(i){const s=new xE(i);throw this._logger.error("promptDeviceAccess: error requesting device",{data:{error:i}}),w0(s),s}if(this._logger.debug(`promptDeviceAccess: hidDevices len ${t.length}`),t.length===0)throw this._logger.warn("No device was selected"),new xE("No selected device");const n=[];for(const i of t)n.push(i),this._logger.debug("promptDeviceAccess: selected device",{data:{hidDevice:i}});return n}).run()}startDiscovering(){return this._logger.debug("startDiscovering"),Rd(this.promptDeviceAccess()).pipe(IH(e=>e.caseOf({Left:t=>{throw this._logger.error("Error while getting accessible device",{data:{error:t}}),w0(t),t},Right:t=>{this._logger.info(`Got access to ${t.length} HID devices`);const n=t.map(i=>this.mapHIDDeviceToTransportDiscoveredDevice(i));return Rd(n)}})))}stopDiscovering(){}startListeningToConnectionEvents(){this._logger.debug("startListeningToConnectionEvents"),this.hidApi.map(e=>{e.addEventListener("connect",t=>this.handleDeviceConnectionEvent(t),{signal:this._connectionListenersAbortController.signal}),e.addEventListener("disconnect",t=>this.handleDeviceDisconnectionEvent(t),{signal:this._connectionListenersAbortController.signal})})}stopListeningToConnectionEvents(){this._logger.debug("stopListeningToConnectionEvents"),this._connectionListenersAbortController.abort()}async connect({deviceId:e,onDisconnect:t}){this._logger.debug("connect",{data:{deviceId:e}});const n=this._transportDiscoveredDevices.getValue().find(l=>l.id===e);if(!n)return this._logger.error(`Unknown device ${e}`),ut(new rM(`Unknown device ${e}`));const{deviceModel:i}=n,s=this._deviceConnectionsByHidDevice.get(n.hidDevice);if(s)return er(new gB({id:e,deviceModel:i,type:this.connectionType,sendApdu:(...l)=>s.sendApdu(...l),transport:this.identifier}));const o=this._deviceApduSenderFactory({apduSenderFactory:this._apduSenderFactory,apduReceiverFactory:this._apduReceiverFactory,dependencies:{device:n.hidDevice}},this._loggerServiceFactory),a=this._deviceConnectionStateMachineFactory({deviceId:e,deviceApduSender:o,timeoutDuration:nCe,tryToReconnect:()=>{this._deviceConnectionsByHidDevice.forEach((l,u)=>{l.getDeviceId()===e&&(this._deviceConnectionsPendingReconnection.add(l),this._deviceConnectionsByHidDevice.delete(u))})},onTerminated:()=>{this._deviceConnectionsPendingReconnection.forEach(l=>{l.getDeviceId()===e&&(this._deviceConnectionsPendingReconnection.delete(l),t(l.getDeviceId()))}),this._deviceConnectionsByHidDevice.forEach((l,u)=>{l.getDeviceId()===e&&(this._deviceConnectionsByHidDevice.delete(u),t(l.getDeviceId()))})}});try{await o.setupConnection()}catch(l){return l instanceof pI?ut(l):ut(new pI(l))}this._deviceConnectionsByHidDevice.set(n.hidDevice,a);const c=new gB({sendApdu:(...l)=>a.sendApdu(...l),deviceModel:i,id:e,type:this.connectionType,transport:this.identifier});return er(c)}getDeviceModel(e){const{productId:t}=e,n=this._deviceModelDataSource.getAllDeviceModels().find(i=>i.usbProductId===t>>8||i.bootloaderUsbProductId===t);return n?an.of(n):an.zero()}getHidUsbProductId(e){return this.getDeviceModel(e).caseOf({Just:t=>t.usbProductId,Nothing:()=>e.productId>>8})}async disconnect(e){this._logger.debug("disconnect",{data:{connectedDevice:e}});const t=Array.from(this._deviceConnectionsByHidDevice.values()).find(n=>n.getDeviceId()===e.connectedDevice.id);return t?(t.closeConnection(),Promise.resolve(er(void 0))):(this._logger.error("No matching device connection found",{data:{connectedDevice:e}}),Promise.resolve(ut(new rM(`Unknown device ${e.connectedDevice.id}`))))}isHIDConnectionEvent(e){return"device"in e&&typeof e.device=="object"&&e.device!==null&&"productId"in e.device&&typeof e.device.productId=="number"}async handleDeviceDisconnectionEvent(e){if(!this.isHIDConnectionEvent(e)){this._logger.error("Invalid event",{data:{event:e}});return}this._logger.info("[handleDeviceDisconnectionEvent] Device disconnected",{data:{event:e}}),this.updateTransportDiscoveredDevices();try{await e.device.close()}catch(n){this._logger.error("Error while closing device ",{data:{event:e,error:n}})}const t=this._deviceConnectionsByHidDevice.get(e.device);t&&t.eventDeviceDisconnected()}async handleDeviceReconnection(e,t){this._deviceConnectionsPendingReconnection.delete(e),this._deviceConnectionsByHidDevice.set(t,e);try{e.setDependencies({device:t}),await e.setupConnection(),e.eventDeviceConnected()}catch(n){this._logger.error("Error while reconnecting to device",{data:{event,error:n}}),e.closeConnection()}}async handleDeviceConnectionEvent(e){if(!this.isHIDConnectionEvent(e)){this._logger.error("Invalid event",{data:{event:e}});return}this._logger.info("[handleDeviceConnectionEvent] Device connected",{data:{event:e}});const t=Array.from(this._deviceConnectionsPendingReconnection).find(n=>this.getHidUsbProductId(n.getDependencies().device)===this.getHidUsbProductId(e.device));t&&await this.handleDeviceReconnection(t,e.device),this.updateTransportDiscoveredDevices()}destroy(){this.stopListeningToConnectionEvents(),this._deviceConnectionsByHidDevice.forEach(e=>{e.closeConnection()}),this._deviceConnectionsPendingReconnection.clear()}};const aCe=({deviceModelDataSource:r,loggerServiceFactory:e,apduSenderServiceFactory:t,apduReceiverServiceFactory:n})=>new oCe(r,e,t,n);class x0{static#e=new u1e().addTransport(aCe).build();static getDerivationPath(e){return e.type==="root"?"44'/501'":e.type==="legacy"?`44'/501'/${e.index}'`:`44'/501'/${e.index}'/0'`}static unsubscribe(e){e.closed||e.unsubscribe()}static async pairDevice(){return new Promise((e,t)=>{const n=this.#e.startDiscovering({}).subscribe({next:i=>{this.unsubscribe(n),e(i)},error:i=>{t(i)}})})}static async getConnectedDevice(){const e=this.#e.listConnectedDevices().at(0);if(e)return e;let t=!0;return new Promise((n,i)=>{const s=this.#e.listenToAvailableDevices({}).subscribe({next:async o=>{if(t){t=!1;return}const a=o.at(0);if(!a){i("Ledger device not connected");return}const c=await this.#e.connect({device:a});this.unsubscribe(s),n(this.#e.getConnectedDevice({sessionId:c}))}})})}static async getConnectedSignerSolana(){const{sessionId:e}=await this.getConnectedDevice();return new MIe({dmk:this.#e,sessionId:e,originToken:"NA"}).build()}static async getAddress(e){const t=await this.getConnectedSignerSolana(),n=this.getDerivationPath(e),{observable:i}=t.getAddress(n,{checkOnDevice:!1});return new Promise((s,o)=>{const a=i.subscribe({next:c=>{c.status==="error"&&(this.unsubscribe(a),o(c.error)),c.status==="completed"&&(this.unsubscribe(a),s({address:c.output,path:n}))}})})}static async signTransaction(e,t,n){const{messageBytes:i,signatures:s}=_d.unmarshalTransaction(n),o=await this.getConnectedSignerSolana(),{observable:a}=o.signTransaction(e,new Uint8Array(i));return new Promise((c,l)=>{const u=a.subscribe({next:f=>{if(f.status==="error"&&(this.unsubscribe(u),l(f.error)),f.status==="completed"){this.unsubscribe(u);const h=_d.marshalTransaction(i,{...s,[t]:f.output});c(h)}}})})}static async signMessage(e,t){const n=await this.getConnectedSignerSolana(),{observable:i}=n.signMessage(e,t);return new Promise((s,o)=>{const a=i.subscribe({next:c=>{c.status==="error"&&(this.unsubscribe(a),o(c.error)),c.status==="completed"&&(this.unsubscribe(a),s(Br.unmarshalBase58(c.output.signature)))}})})}}var cCe=ye('<div class="bg-red-900/15 text-red-400 ring-1 ring-red-800 py-3 px-4 rounded-xl space-y-2">Error: '),lCe=ye('<p class="leading-5 text-yellow-400">Facing issues? Ensure that your Ledger device is unlocked and in the Solana app, then re-connect and re-approve the connection.'),uCe=ye('<div class="bg-zinc-900 rounded-xl flex flex-col items-center justify-center gap-6 py-10"><div class="i-tabler:loader-2 animate-spin size-12 text-zinc-500"></div><div class=text-zinc-400>Approve with your Ledger device...');const fCe=r=>{const[e,t]=$e(null);async function n(){if(t(null),r.pendingTx.type==="ledger")try{const i=await x0.signTransaction(r.pendingTx.path,r.pendingTx.signerAddress,r.pendingTx.transaction);_r.approve({id:r.pendingTx.id,isApproved:!0,signature:Br.marshalBase64(i)})}catch(i){t(i instanceof Error?i.message:"Unknown error occurred.")}}return Dr(()=>n()),[D(We,{get when(){return e()},get fallback(){return uCe()},get children(){return[(()=>{var i=cCe();return i.firstChild,ce(i,e,null),i})(),lCe()]}}),D(fs,{onApproveClick:n,onCancelClick:()=>r.setView("simulation"),cancelTitle:"Back",get approveTitle(){return e()===null?"Sign":"Retry"},get isApproveDisabled(){return e()===null}})]},us={MINUS:"",DASH:"",STAR:""};var hCe=ye("<span>0.00"),LN=ye("<span>");const vn=r=>{const e=ke(()=>r.override?r.value.toLocaleString("en-US",r.override):r.value<10?r.value.toLocaleString("en-US",{minimumSignificantDigits:5,maximumSignificantDigits:5}):r.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}));return D(yr,{get children(){return[D(Ne,{get when(){return r.value===0&&r.showZero},get children(){var t=hCe(),n=t.firstChild;return bn(t,r,!1,!0),ce(t,()=>r.prefix,n),ce(t,()=>r.suffix,null),t}}),D(Ne,{get when(){return r.value===0&&!r.showZero},get children(){var t=LN();return bn(t,r,!1,!0),ce(t,()=>us.DASH),t}}),D(Ne,{get when(){return r.value!==0},get children(){var t=LN();return bn(t,r,!1,!0),ce(t,()=>r.prefix,null),ce(t,e,null),ce(t,()=>r.suffix,null),t}})]}})};var dCe=ye("<span>");const Dk=r=>{const e=()=>{const t=Math.abs(r.value);return`${r.value>=0?"+":us.MINUS}${r.prefix??""}${t.toLocaleString("en-US",r.override??{minimumFractionDigits:2,maximumFractionDigits:2})}${r.suffix??""}`};return(()=>{var t=dCe();return bn(t,st(r,{get class(){return Xr({"text-green-400":r.value>0},{"text-red-400":r.value<0},r.class)}}),!1,!0),ce(t,e),t})()};var pCe=ye('<div><div class="i-tabler:question-mark size-full text-zinc-300">'),gCe=ye("<img>");const mCe=["https://gateway.irys.xyz/"],Rn=r=>{const[e,t]=$e(!0),n=ke(()=>r.src?mCe.some(i=>r.src?.startsWith(i))?r.src:r.hd?`https://wsrv.nl/?w=384&h=384&url=${encodeURIComponent(r.src)}&n=-1`:`https://wsrv.nl/?w=48&h=48&url=${encodeURIComponent(r.src)}`:null);return D(We,{get when(){return Or(()=>!!e())()&&n()},get fallback(){return D(We,{get when(){return r.fallback},get fallback(){return(()=>{var i=pCe();return ht(()=>ui(i,Xr("size-8 rounded-full p-1 bg-zinc-700 ring-1 ring-zinc-800",r.class))),i})()},children:i=>i()})},children:i=>(()=>{var s=gCe();return bn(s,st(r,{get src(){return i()},get class(){return Xr("size-8 rounded-full ring-1 ring-zinc-800",r.class)},onError:()=>t(!1)}),!1,!1),s})()})};var yCe=ye('<div class="text-zinc-400 leading-5">Balance changes are estimated. Amounts shown are not guaranteed on execution.'),vCe=ye('<div class="text-red-400 ring-1 ring-red-800 bg-red-900/15 py-3 px-4 rounded-xl">Simulation failed. This transaction will likely fail even if submitted on-chain.'),bCe=ye('<div class="py-3 px-4 bg-zinc-900 rounded-xl space-y-3"><div class=text-zinc-400>Balance Changes'),wCe=ye('<div class="flex items-center gap-1 text-zinc-400"><div class="i-tabler:gas-station-off size-5"></div><div class=font-medium>Gasless'),xCe=ye('<div class="bg-zinc-900 rounded-xl divide-y divide-zinc-800"><div class="py-3 px-4 flex justify-between items-center"><div class=text-zinc-400>Signer</div><div class=font-medium></div></div><div class="py-3 px-4 flex justify-between items-center"><div class=text-zinc-400>Network Fee'),_Ce=ye('<div class="flex-1 flex items-end"><div class="flex-1 text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">This wallet is read-only and cannot perform any actions.'),SCe=ye('<div class="flex items-center gap-3"><div class="rounded-full size-8 bg-zinc-800 animate-pulse"></div><div class="h-5 w-12 bg-zinc-800 animate-pulse rounded"></div><div class=flex-1></div><div class="flex flex-col items-end gap-1"><div class="h-5 w-26 bg-zinc-800 animate-pulse rounded"></div><div class="h-3 w-12 bg-zinc-800 animate-pulse rounded">'),ECe=ye('<div class="flex items-center gap-3 py-0.5"><div class=font-semibold></div><div class=flex-1></div><div class="flex flex-col items-end gap-0.5"><div class="font-medium leading-none"></div><div class="text-sm leading-none text-zinc-400">'),ACe=ye('<div class="font-medium text-zinc-500">'),ICe=ye("<div class=font-medium>"),CCe=ye('<div class="bg-zinc-900 rounded-xl"><div class="flex justify-between py-3 px-4 "><div class=text-zinc-400>Transaction</div><div class=font-medium> Bytes</div></div><div class="pb-3 px-4 flex justify-between items-center break-all select-all text-zinc-300 text-sm font-mono">');const TCe=r=>{const{selectedAccount:e}=Jr(),t=ke(()=>e()?.address),n=qs(()=>({queryKey:["simulate",r.pendingTx],queryFn:async()=>r.pendingTx?ss.simulateTransaction({tx:r.pendingTx.transaction,accounts:[r.pendingTx.signerAddress].join(",")}):null,enabled:!!r.pendingTx,refetchInterval:5e3}));async function i(s){if(!s||r.pendingTx.type==="standalone"||r.pendingTx.type==="mnemonic"||r.pendingTx.type==="privy"||r.pendingTx.type==="readonly")return _r.approve({id:r.pendingTx.id,isApproved:s});r.setView(r.pendingTx.type)}return[yCe(),(()=>{var s=bCe();return s.firstChild,ce(s,D(yr,{get children(){return[D(Ne,{get when(){return!t()||n.data==null},get children(){return D(Lt,{get each(){return new Array(2).fill(void 0)},children:()=>SCe()})}}),D(Ne,{get when(){return n.data&&"status"in n.data&&n.data.status==="revert"},get children(){return vCe()}}),D(Ne,{get when(){return Or(()=>!!(n.data&&"status"in n.data&&n.data.status==="success"))()&&n.data.balanceChanges[t()]},children:o=>D(Lt,{get each(){return o()},children:({icon:a,symbol:c,amount:l,value:u})=>(()=>{var f=ECe(),h=f.firstChild,d=h.nextSibling,g=d.nextSibling,p=g.firstChild,m=p.nextSibling;return ce(f,D(Rn,{src:a}),h),ce(h,c),p.classList.toggle("text-red-400",l<0),p.classList.toggle("text-green-400",l>0),ce(p,D(Dk,{value:l,override:{minimumFractionDigits:2,maximumFractionDigits:9}})),ce(m,D(vn,{value:u,prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),f})()})})]}}),null),s})(),(()=>{var s=xCe(),o=s.firstChild,a=o.firstChild,c=a.nextSibling,l=o.nextSibling;return l.firstChild,ce(c,D(Yo,{get address(){return r.pendingTx.signerAddress}})),ce(l,D(yr,{get fallback(){return ACe()},get children(){return[D(Ne,{get when(){return Or(()=>!!(n.data&&"status"in n.data&&n.data.status==="success"))()&&n.data.networkFee.payer!==t()},get children(){return wCe()}}),D(Ne,{get when(){return n.data&&"status"in n.data&&n.data.status==="success"&&n.data.networkFee},children:u=>(()=>{var f=ICe();return ce(f,D(vn,{get value(){return u().amount},suffix:" SOL",override:{minimumFractionDigits:2,maximumFractionDigits:6},showZero:!0})),f})()})]}}),null),s})(),Or(()=>Or(()=>!1)()&&(()=>{var s=CCe(),o=s.firstChild,a=o.firstChild,c=a.nextSibling,l=c.firstChild,u=o.nextSibling;return ce(c,()=>Br.unmarshalBase64(r.pendingTx.transaction).length,l),ce(u,()=>r.pendingTx.transaction),s})()),D(We,{get when(){return r.pendingTx.type==="readonly"},get children(){return _Ce()}}),D(fs,{onCancelClick:()=>i(!1),onApproveClick:()=>i(!0),approveTitle:"Confirm",get isApproveDisabled(){return r.pendingTx.type==="readonly"}})]};var RCe=ye('<div class="bg-red-900/15 text-red-400 ring-1 ring-red-800 py-3 px-4 rounded-xl space-y-2">Error: '),kCe=ye('<div class="bg-zinc-900 rounded-xl flex flex-col items-center justify-center gap-6 py-10"><div class="i-tabler:loader-2 animate-spin size-12 text-zinc-500"></div><div class=text-zinc-400>Approve with your Trezor device...');const PCe=r=>{const[e,t]=$e(null);async function n(){if(r.pendingTx.type==="trezor")try{t(null);const{signature:i}=await _r.trezorSignTransaction({signerAddress:r.pendingTx.signerAddress,path:r.pendingTx.path,transaction:r.pendingTx.transaction});_r.approve({id:r.pendingTx.id,isApproved:!0,signature:i})}catch(i){t(i instanceof Error?i.message:"Unknown error occurred.")}}return Dr(()=>n()),[D(We,{get when(){return e()},get fallback(){return kCe()},get children(){var i=RCe();return i.firstChild,ce(i,e,null),i}}),D(fs,{onApproveClick:n,onCancelClick:()=>r.setView("simulation"),cancelTitle:"Back",get approveTitle(){return e()===null?"Sign":"Retry"},get isApproveDisabled(){return e()===null}})]};var OCe=ye('<div class="relative flex-1 p-4 space-y-4 flex flex-col">');const DCe=()=>{const r=oV(),[e]=ET(r,i=>_r.getPendingTransaction({id:i})),[t,n]=$e("simulation");return(()=>{var i=OCe();return ce(i,D(JR,{title:"Confirm Transaction"}),null),ce(i,D(We,{get when(){return e.latest},children:s=>D(yr,{get children(){return[D(Ne,{get when(){return t()==="simulation"},get children(){return D(TCe,{setView:n,get pendingTx(){return s()}})}}),D(Ne,{get when(){return t()==="ledger"},get children(){return D(fCe,{setView:n,get pendingTx(){return s()}})}}),D(Ne,{get when(){return t()==="keystone"},get children(){return D(x0e,{setView:n,get pendingTx(){return s()}})}}),D(Ne,{get when(){return t()==="trezor"},get children(){return D(PCe,{setView:n,get pendingTx(){return s()}})}})]}})}),null),i})()};class um{static#e="https://datapi.jup.ag";static async search(e){return Bn.get(`${this.#e}/v1/assets/search`,{searchParams:e,throwHttpErrors:!1}).json()}static async getChart(e,t){const{mint:n,...i}=e;return Bn.get(`${this.#e}/v2/charts/${n}`,{searchParams:i,throwHttpErrors:!1,signal:t}).json()}static async getDescription(e){return Bn.get(`${this.#e}/v1/assets/${e}/description`).json()}static async getPnl(e){return Bn.get(`${this.#e}/v1/pnl?addresses=${e.addresses.join(",")}&assetIds=${e.assetIds.join(",")}`).json()}}function $Ce(r,e,t){let n,i;const s=typeof window<"u"&&"MutationObserver"in window;typeof e=="function"?(n={},i=e):(n=e,i=t);const o=s?new MutationObserver(i):void 0,a=(u,f)=>o?.observe(u,Z0(f)??n),c=()=>{dA(Z0(r)).forEach(u=>{u instanceof Node?a(u,n):a(u[0],u[1])})},l=()=>o?.disconnect();return Dr(c),yt(l),[a,{start:c,stop:l,instance:o,isSupported:s}]}var MCe=ye("<span>");const ya=r=>{let e;const[t,n]=$e(!1);function i(){return setTimeout(()=>n(!1),1e3)}let s=i();return $Ce(()=>e,{subtree:!0,characterData:!0},()=>{clearTimeout(s),n(!0),s=i()}),yt(()=>clearTimeout(s)),(()=>{var o=MCe(),a=e;return typeof a=="function"?qd(a,o):e=o,bn(o,st(r,{get class(){return Xr(r.class,{"animate-[flash-background_1s_ease-out_forwards]":t()})}}),!1,!0),ce(o,()=>r.children),o})()};var BCe=ye("<span>");const fm=r=>{const e=()=>{const t=Math.abs(r.value),n=r.value>=0?"+":us.MINUS;if(t<1e3)return`${r.prefix??""}${n}${t.toFixed(2)}%${r.suffix??""}`;const i=Math.round(t/100);return`${r.prefix??""}${n}${i}x${r.suffix??""}`};return(()=>{var t=BCe();return bn(t,st(r,{get class(){return Xr("px-1 rounded",{hidden:r.value===0},{"text-green-400 bg-green-400/5":r.value>0},{"text-red-400 bg-red-400/5":r.value<0},{"bg-transparent px-0":r.hideBackground},r.class)}}),!1,!0),ce(t,e),t})()},UG=()=>".",Ic=()=>{const r=UG();function e(s){if(s.length===0)return"";if(Number(s)===0)return"0";let o=0;for(;o<s.length&&s[o]==="0"&&s[o+1]!==r;)o++;let a=s.length-1;if(s.includes(r)){for(;a>=0&&(s[a]==="0"||s[a]===r);)if(a--,s[a]===r){a--;break}}return s.substring(o,a+1)}function t(s,o){const a=s.toString();if(a.length<=o){const c="0".repeat(o-a.length);return e(`0${r}${c}${a}`)}else{const c=a.length-o,l=a.substring(0,c),u=a.substring(c);return e(`${l}${r}${u}`)}}function n(s,o){const[a,c]=s.split(/[.,]/);return e((a??"")+(c??"").padEnd(o,"0").slice(0,o))}function i(s,o,a){const c=s<0,l=Math.abs(s);if(l<.01)return us.DASH;const u=o==="currency"?"$":"",[f,h]=l<1e3?["",1]:l<1e6?["K",1e3]:l<1e9?["M",1e6]:l<1e12?["B",1e9]:l<1e15?["T",1e12]:["Q",1e15],d=(l/h).toLocaleString("en-US",o==="currency"||o==="float"||l>=1e3?{minimumSignificantDigits:3,maximumSignificantDigits:3}:{maximumFractionDigits:0});return`${a?c?us.DASH:"+":""}${u}${d}${f}`}return{removeInsignificantZeros:e,fromChainAmount:t,toChainAmount:n,formatLargeNumbers:i}};var NCe=ye("<sub>"),LCe=ye("<span>0.00"),FN=ye("<span>");function UN(r,e){const t=r.toLocaleString("en-US",{minimumSignificantDigits:1,maximumSignificantDigits:e});let n=0;for(let i=2;i<t.length&&t.at(i)==="0";i++)n++;return["0.0",(()=>{var i=NCe();return i.classList.toggle("hidden",n<=1),ce(i,n),i})(),Or(()=>t.slice(2+n))]}const pi=r=>{const{formatLargeNumbers:e}=Ic(),t=ke(()=>{const n=Math.abs(r.value);return r.style==="long"?n<.01?UN(n,5):n<10?n.toLocaleString("en-US",{minimumSignificantDigits:3,maximumSignificantDigits:5}):n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):n<.01?UN(n,3):e(n,"float")});return D(yr,{get children(){return[D(Ne,{get when(){return r.value===0&&r.showZero},get children(){var n=LCe(),i=n.firstChild;return bn(n,r,!1,!0),ce(n,()=>r.prefix,i),ce(n,()=>r.suffix,null),n}}),D(Ne,{get when(){return r.value===0&&!r.showZero},get children(){var n=FN();return bn(n,r,!1,!0),ce(n,()=>us.DASH),n}}),D(Ne,{get when(){return r.value!==0},get children(){var n=FN();return bn(n,r,!1,!0),ce(n,()=>r.prefix,null),ce(n,t,null),ce(n,()=>r.suffix,null),n}})]}})},Sa={LANDING:"https://jup.ag?connect=jupiter-extension",SWAP:"https://jup.ag/swap?connect=jupiter-extension",ONBOARD:"https://jup.ag/onboard?connect=jupiter-extension",PORTFOLIO:r=>`https://jup.ag/portfolio/${r}?connect=jupiter-extension`,TOKENS:r=>`https://jup.ag/tokens/${r}?connect=jupiter-extension`,FEEDBACK:"https://feedback.jup.ag",TERMS:"https://dev.jup.ag/docs/misc/terms-of-use",PRIVACY:"https://dev.jup.ag/docs/misc/privacy-policy",SUPPORT:"https://support.jup.ag/",LEND:"https://jup.ag/lend/earn?connect=jupiter-extension"},vf={SOL:{id:"So11111111111111111111111111111111111111112",symbol:"SOL",icon:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9,amount:0,rawAmount:"0",value:0,price:0,priceChange:0},USDC:{id:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"}},zN=[],ra=()=>{const{selectedAccount:r}=Jr(),e=ke(()=>r()?.address),t=qs(()=>({queryKey:["portfolio-holdings",e()],queryFn:async()=>{const n=`portfolio-holdings:${e()}`;if(!zN.includes(n)){zN.push(n);const{value:s}=await _r.getPopupCache({key:n});if(s&&Array.isArray(s.tokens))return requestAnimationFrame(()=>t.refetch()),s}const i=await ss.getHoldings(e());return await _r.setPopupCache({key:n,value:i}),i},enabled:!!e(),staleTime:3e4,refetchInterval:3e4}));return t},zG=r=>qs(()=>({queryKey:["asset",r],queryFn:async()=>(await um.search({query:r})).at(0),refetchInterval:15e3}));function un(r){var e=r.width,t=r.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(t<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:t}}function bf(r,e){return r.width===e.width&&r.height===e.height}var FCe=function(){function r(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return r.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(r.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),r.prototype.subscribe=function(e){var t=this,n={next:e};return this._observers.push(n),{unsubscribe:function(){t._observers=t._observers.filter(function(i){return i!==n})}}},r.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},r.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},r.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},r.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},r}();function UCe(r){return new FCe(r)}var zCe=function(){function r(e,t,n){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=un({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=t??function(s){return s},this._allowResizeObserver=(i=n?.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return r.prototype.dispose=function(){var e,t;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(t=this._devicePixelRatioObservable)===null||t===void 0||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(r.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bitmapSize",{get:function(){return un({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),r.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=un(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},r.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},r.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(r.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),r.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},r.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},r.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},r.prototype._resizeBitmap=function(e){var t=this.bitmapSize;bf(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},r.prototype._emitBitmapSizeChanged=function(e,t){var n=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,t)})},r.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,n=un(this._transformBitmapSize(e,this._canvasElementClientSize)),i=bf(this.bitmapSize,n)?null:n;t===null&&i===null||t!==null&&i!==null&&bf(t,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(t,i))},r.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,t)})},r.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}jCe().then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})},r.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var t=qN(this._canvasElement);if(t===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=UCe(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},r.prototype._invalidateBitmapSize=function(){var e,t;if(this._canvasElement!==null){var n=qN(this._canvasElement);if(n!==null){var i=(t=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:n.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?VCe(s[0],i):un({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(o)}}},r.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var n=t.find(function(o){return o.target===e._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var i=n.devicePixelContentBoxSize[0],s=un({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},r}();function qCe(r,e){return new zCe(r,e.transform,e.options)}function qN(r){return r.ownerDocument.defaultView}function jCe(){return new Promise(function(r){var e=new ResizeObserver(function(t){r(t.every(function(n){return"devicePixelContentBoxSize"in n})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function VCe(r,e){return un({width:Math.round(r.left*e+r.width*e)-Math.round(r.left*e),height:Math.round(r.top*e+r.height*e)-Math.round(r.top*e)})}var KCe=function(){function r(e,t,n){if(t.width===0||t.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=e}return r.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},r.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(r.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),r}();function Of(r,e){var t=r.canvasElementClientSize;if(t.width===0||t.height===0)return null;var n=r.bitmapSize;if(n.width===0||n.height===0)return null;var i=r.canvasElement.getContext("2d",e);return i===null?null:new KCe(i,t,n)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.8
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const qG={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var jN,VN;function Df(r,e){const t={0:[],1:[r.lineWidth,r.lineWidth],2:[2*r.lineWidth,2*r.lineWidth],3:[6*r.lineWidth,6*r.lineWidth],4:[r.lineWidth,4*r.lineWidth]}[e];r.setLineDash(t)}function jG(r,e,t,n){r.beginPath();const i=r.lineWidth%2?.5:0;r.moveTo(t,e+i),r.lineTo(n,e+i),r.stroke()}function Oi(r,e){if(!r)throw new Error("Assertion failed"+(e?": "+e:""))}function Hs(r){if(r===void 0)throw new Error("Value is undefined");return r}function ct(r){if(r===null)throw new Error("Value is null");return r}function eu(r){return ct(Hs(r))}(function(r){r[r.Simple=0]="Simple",r[r.WithSteps=1]="WithSteps",r[r.Curved=2]="Curved"})(jN||(jN={})),function(r){r[r.Solid=0]="Solid",r[r.Dotted=1]="Dotted",r[r.Dashed=2]="Dashed",r[r.LargeDashed=3]="LargeDashed",r[r.SparseDotted=4]="SparseDotted"}(VN||(VN={}));class Jn{constructor(){this.t=[]}i(e,t,n){const i={h:e,l:t,o:n===!0};this.t.push(i)}_(e){const t=this.t.findIndex(n=>e===n.h);t>-1&&this.t.splice(t,1)}u(e){this.t=this.t.filter(t=>t.l!==e)}p(e,t,n){const i=[...this.t];this.t=this.t.filter(s=>!s.o),i.forEach(s=>s.h(e,t,n))}v(){return this.t.length>0}m(){this.t=[]}}function So(r,...e){for(const t of e)for(const n in t)t[n]!==void 0&&Object.prototype.hasOwnProperty.call(t,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof t[n]!="object"||r[n]===void 0||Array.isArray(t[n])?r[n]=t[n]:So(r[n],t[n]));return r}function Md(r){return typeof r=="number"&&isFinite(r)}function Ig(r){return typeof r=="number"&&r%1==0}function hm(r){return typeof r=="string"}function cy(r){return typeof r=="boolean"}function Qc(r){const e=r;if(!e||typeof e!="object")return e;let t,n,i;for(n in t=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(i=e[n],t[n]=i&&typeof i=="object"?Qc(i):i);return t}function HCe(r){return r!==null}function nT(r){return r===null?void 0:r}const VG="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function eb(r,e,t){return e===void 0&&(e=VG),`${t=t!==void 0?`${t} `:""}${r}px ${e}`}class WCe{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,t=this.F(),n=this.W();return e.P===t&&e.T===n||(e.P=t,e.T=n,e.k=eb(t,n),e.A=2.5/12*t,e.V=e.A,e.I=t/12*e.C,e.B=t/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function u2(r){return r<0?0:r>255?255:Math.round(r)||0}function KN(r){return .199*r[0]+.687*r[1]+.114*r[2]}class GCe{constructor(e,t){this.q=new Map,this.Y=e,t&&(this.q=t)}j(e,t){if(e==="transparent")return e;const n=this.K(e),i=n[3];return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${t*i})`}X(e){const t=this.K(e);return{Z:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,G:KN(t)>160?"black":"white"}}J(e){return KN(this.K(e))}tt(e,t,n){const[i,s,o,a]=this.K(e),[c,l,u,f]=this.K(t),h=[u2(i+n*(c-i)),u2(s+n*(l-s)),u2(o+n*(u-o)),(d=a+n*(f-a),d<=0||d>1?Math.min(Math.max(d,0),1):Math.round(1e4*d)/1e4)];var d;return`rgba(${h[0]}, ${h[1]}, ${h[2]}, ${h[3]})`}K(e){const t=this.q.get(e);if(t)return t;const n=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const c=window.getComputedStyle(a).color;return document.body.removeChild(a),c}(e),i=n.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!i){if(this.Y.length)for(const o of this.Y){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const s=[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),i[4]?parseFloat(i[4]):1];return this.q.set(e,s),s}}class KG{constructor(){this.it=[]}st(e){this.it=e}nt(e,t,n){this.it.forEach(i=>{i.nt(e,t,n)})}}class rh{nt(e,t,n){e.useBitmapCoordinateSpace(i=>this.et(i,t,n))}}class YCe extends rh{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:n}){if(this.rt===null||this.rt.lt===null)return;const i=this.rt.lt,s=this.rt,o=Math.max(1,Math.floor(t))%2/2,a=c=>{e.beginPath();for(let l=i.to-1;l>=i.from;--l){const u=s.ot[l],f=Math.round(u._t*t)+o,h=u.ut*n,d=c*n+o;e.moveTo(f,h),e.arc(f,h,d,0,2*Math.PI)}e.fill()};s.ct>0&&(e.fillStyle=s.dt,a(s.ft+s.ct)),e.fillStyle=s.vt,a(s.ft)}}function XCe(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const JCe={from:0,to:1};class QCe{constructor(e,t,n){this.Mt=new KG,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=t,this.Pt=n,this.Mt.st(this.bt)}kt(e){this.yt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}yt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(XCe),this.bt=this.St.map(t=>{const n=new YCe;return n.ht(t),n}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),t=this.Pt.It(),n=this.Ct.Bt(),i=this.O.Et();this.yt(),t.forEach((s,o)=>{const a=this.St[o],c=s.At(n),l=s.zt();!e&&c!==null&&s.Vt()&&l!==null?(a.vt=c.Lt,a.ft=c.ft,a.ct=c.Ot,a.ot[0].gt=c.gt,a.ot[0].ut=s.Ft().Nt(c.gt,l.Wt),a.dt=c.Ht??this.O.Ut(a.ot[0].ut/s.Ft().$t()),a.ot[0].wt=n,a.ot[0]._t=i.qt(n),a.lt=JCe):a.lt=null})}}class ZCe extends rh{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.Yt===null)return;const s=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!s&&!o)return;const a=Math.round(this.Yt._t*n),c=Math.round(this.Yt.ut*i);e.lineCap="butt",s&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*n),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Df(e,this.Yt.jt.Xt),function(l,u,f,h){l.beginPath();const d=l.lineWidth%2?.5:0;l.moveTo(u+d,f),l.lineTo(u+d,h),l.stroke()}(e,a,0,t.height)),o&&c>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*i),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,Df(e,this.Yt.Kt.Xt),jG(e,c,0,t.width))}}class eTe{constructor(e,t){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new ZCe(this.Zt),this.Jt=e,this.Pt=t}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),t=this.Pt.Qt().N().crosshair,n=this.Zt;if(t.mode===2)return n.Kt.Vt=!1,void(n.jt.Vt=!1);n.Kt.Vt=e&&this.Jt.ti(this.Pt),n.jt.Vt=e&&this.Jt.ii(),n.Kt.ct=t.horzLine.width,n.Kt.Xt=t.horzLine.style,n.Kt.R=t.horzLine.color,n.jt.ct=t.vertLine.width,n.jt.Xt=t.vertLine.style,n.jt.R=t.vertLine.color,n._t=this.Jt.si(),n.ut=this.Jt.ni()}}function Nw(r,e,t,n,i,s){r.save(),r.globalCompositeOperation="copy",r.fillStyle=s,r.fillRect(e,t,n,i),r.restore()}function HN(r,e,t,n,i,s){r.beginPath(),r.roundRect?r.roundRect(e,t,n,i,s):(r.lineTo(e+n-s[1],t),s[1]!==0&&r.arcTo(e+n,t,e+n,t+s[1],s[1]),r.lineTo(e+n,t+i-s[2]),s[2]!==0&&r.arcTo(e+n,t+i,e+n-s[2],t+i,s[2]),r.lineTo(e+s[3],t+i),s[3]!==0&&r.arcTo(e,t+i,e,t+i-s[3],s[3]),r.lineTo(e,t+s[0]),s[0]!==0&&r.arcTo(e,t,e+s[0],t,s[0]))}function WN(r,e,t,n,i,s,o=0,a=[0,0,0,0],c=""){if(r.save(),!o||!c||c===s)return HN(r,e,t,n,i,a),r.fillStyle=s,r.fill(),void r.restore();const l=o/2;var u;HN(r,e+l,t+l,n-o,i-o,(u=-l,a.map(f=>f===0?f:f+u))),s!=="transparent"&&(r.fillStyle=s,r.fill()),c!=="transparent"&&(r.lineWidth=o,r.strokeStyle=c,r.closePath(),r.stroke()),r.restore()}function HG(r,e,t,n,i,s,o){r.save(),r.globalCompositeOperation="copy";const a=r.createLinearGradient(0,0,0,i);a.addColorStop(0,s),a.addColorStop(1,o),r.fillStyle=a,r.fillRect(e,t,n,i),r.restore()}class GN{constructor(e,t){this.ht(e,t)}ht(e,t){this.Yt=e,this.ei=t}$t(e,t){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,t,n,i){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const s=this.Yt.R,o=this.ei.Z,a=e.useBitmapCoordinateSpace(c=>{const l=c.context;l.font=t.k;const u=this.hi(c,t,n,i),f=u.ai;return u.li?WN(l,f.oi,f._i,f.ui,f.ci,o,f.di,[f.ft,0,0,f.ft],o):WN(l,f.fi,f._i,f.ui,f.ci,o,f.di,[0,f.ft,f.ft,0],o),this.Yt.pi&&(l.fillStyle=s,l.fillRect(f.fi,f.mi,f.wi-f.fi,f.gi)),this.Yt.Mi&&(l.fillStyle=t.D,l.fillRect(u.li?f.bi-f.di:0,f._i,f.di,f.Si-f._i)),u});e.useMediaCoordinateSpace(({context:c})=>{const l=a.xi;c.font=t.k,c.textAlign=a.li?"right":"left",c.textBaseline="middle",c.fillStyle=s,c.fillText(this.Yt.ri,l.Ci,(l._i+l.Si)/2+l.Pi)})}hi(e,t,n,i){const{context:s,bitmapSize:o,mediaSize:a,horizontalPixelRatio:c,verticalPixelRatio:l}=e,u=this.Yt.pi||!this.Yt.ki?t.C:0,f=this.Yt.yi?t.S:0,h=t.A+this.ei.Ti,d=t.V+this.ei.Ri,g=t.I,p=t.B,m=this.Yt.ri,y=t.P,v=n.Di(s,m),b=Math.ceil(n.Vi(s,m)),_=y+h+d,x=t.S+g+p+b+u,E=Math.max(1,Math.floor(l));let S=Math.round(_*l);S%2!=E%2&&(S+=1);const C=f>0?Math.max(1,Math.floor(f*c)):0,k=Math.round(x*c),$=Math.round(u*c),J=this.ei.Ii??this.ei.Bi,j=Math.round(J*l)-Math.floor(.5*l),L=Math.floor(j+E/2-S/2),w=L+S,R=i==="right",N=R?a.width-f:f,Y=R?o.width-C:C;let z,G,te;return R?(z=Y-k,G=Y-$,te=N-u-g-f):(z=Y+k,G=Y+$,te=N+u+g),{li:R,ai:{_i:L,mi:j,Si:w,ui:k,ci:S,ft:2*c,di:C,oi:z,fi:Y,wi:G,gi:E,bi:o.width},xi:{_i:L/l,Si:w/l,Ci:te,Pi:v}}}}class Lw{constructor(e){this.Ei={Bi:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,yi:!1},this.zi={ri:"",Vt:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,yi:!0},this.xt=!0,this.Li=new(e||GN)(this.Ai,this.Ei),this.Oi=new(e||GN)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Bi(){return this.Ni(),this.Ei.Bi}kt(){this.xt=!0}$t(e,t=!1){return Math.max(this.Li.$t(e,t),this.Oi.$t(e,t))}Fi(){return this.Ei.Ii||0}Wi(e){this.Ei.Ii=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class tTe extends Lw{constructor(e,t,n){super(),this.Jt=e,this.Yi=t,this.ji=n}qi(e,t,n){if(e.Vt=!1,this.Jt.N().mode===2)return;const i=this.Jt.N().horzLine;if(!i.labelVisible)return;const s=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||s===null)return;const o=this.Yi.Xi().X(i.labelBackgroundColor);n.Z=o.Z,e.R=o.G;const a=2/12*this.Yi.P();n.Ti=a,n.Ri=a;const c=this.ji(this.Yi);n.Bi=c.Bi,e.ri=this.Yi.Zi(c.gt,s),e.Vt=!0}}const rTe=/[1-9]/g;class WG{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,t){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const n=e.useMediaCoordinateSpace(({context:h})=>(h.font=t.k,Math.round(t.Gi.Vi(h,ct(this.Yt).ri,rTe))));if(n<=0)return;const i=t.Ji,s=n+2*i,o=s/2,a=this.Yt.Qi;let c=this.Yt.Bi,l=Math.floor(c-o)+.5;l<0?(c+=Math.abs(0-l),l=Math.floor(c-o)+.5):l+s>a&&(c-=Math.abs(a-(l+s)),l=Math.floor(c-o)+.5);const u=l+s,f=Math.ceil(0+t.S+t.C+t.A+t.P+t.V);e.useBitmapCoordinateSpace(({context:h,horizontalPixelRatio:d,verticalPixelRatio:g})=>{const p=ct(this.Yt);h.fillStyle=p.Z;const m=Math.round(l*d),y=Math.round(0*g),v=Math.round(u*d),b=Math.round(f*g),_=Math.round(2*d);if(h.beginPath(),h.moveTo(m,y),h.lineTo(m,b-_),h.arcTo(m,b,m+_,b,_),h.lineTo(v-_,b),h.arcTo(v,b,v,b-_,_),h.lineTo(v,y),h.fill(),p.pi){const x=Math.round(p.Bi*d),E=y,S=Math.round((E+t.C)*g);h.fillStyle=p.R;const C=Math.max(1,Math.floor(d)),k=Math.floor(.5*d);h.fillRect(x-k,E,C,S-E)}}),e.useMediaCoordinateSpace(({context:h})=>{const d=ct(this.Yt),g=0+t.S+t.C+t.A+t.P/2;h.font=t.k,h.textAlign="left",h.textBaseline="middle",h.fillStyle=d.R;const p=t.Gi.Di(h,"Apr0");h.translate(l+i,g+p),h.fillText(d.ri,0,0)})}}class nTe{constructor(e,t,n){this.xt=!0,this.Gt=new WG,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=e,this.ts=t,this.ji=n}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const t=this.Ct.N().vertLine;if(!t.labelVisible)return;const n=this.ts.Et();if(n.Ki())return;e.Qi=n.Qi();const i=this.ji();if(i===null)return;e.Bi=i.Bi;const s=n.ss(this.Ct.Bt());e.ri=n.ns(ct(s)),e.Vt=!0;const o=this.ts.Xi().X(t.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=n.N().ticksVisible}}class GG{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var YN;(function(r){r[r.Normal=0]="Normal",r[r.Magnet=1]="Magnet",r[r.Hidden=2]="Hidden",r[r.MagnetOHLC=3]="MagnetOHLC"})(YN||(YN={}));class iTe extends GG{constructor(e,t){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=t,this.ks=((i,s)=>o=>{const a=s(),c=i();if(o===ct(this.Pt).ys())return{gt:c,Bi:a};{const l=ct(o.zt());return{gt:o.Ts(a,l),Bi:a}}})(()=>this.ds,()=>this.Ss);const n=((i,s)=>()=>{const o=this.ts.Et().Rs(i()),a=s();return o&&Number.isFinite(a)?{wt:o,Bi:a}:null})(()=>this.fs,()=>this.si());this.Ds=new nTe(this,e,n)}N(){return this.Ps}Vs(e,t){this.xs=e,this.Cs=t}Is(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}Es(){return this.Cs}As(e,t,n){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,t,n)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Is(),this.Ns()}Fs(e){let t=this.gs.get(e);t||(t=new eTe(this,e),this.gs.set(e,t));let n=this.Ms.get(e);return n||(n=new QCe(this.ts,this,e),this.Ms.set(e,n)),[t,n]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,t){this.ps&&this.Pt===e||this.vs.clear();const n=[];return this.Pt===e&&n.push(this.Hs(this.vs,t,this.ks)),n}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{this.gs.get(e)?.kt(),this.Ms.get(e)?.kt()}),this.vs.forEach(e=>e.kt()),this.Ds.kt()}qs(e){return e&&!e.ys().Ki()?e.ys():null}zs(e,t,n){this.Ys(e,t,n)&&this.Ns()}Ys(e,t,n){const i=this.bs,s=this.Ss,o=this.ds,a=this.fs,c=this.Pt,l=this.qs(n);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=n;const u=l!==null?l.zt():null;return l!==null&&u!==null?(this.ds=t,this.Ss=l.Nt(t,u)):(this.ds=NaN,this.Ss=NaN),i!==this.bs||s!==this.Ss||a!==this.fs||o!==this.ds||c!==this.Pt}Os(){const e=this.ts.js().map(n=>n.Xs().Ks()).filter(HCe),t=e.length===0?null:Math.max(...e);this.fs=t!==null?t:NaN}Hs(e,t,n){let i=e.get(t);return i===void 0&&(i=new tTe(this,t,n),e.set(t,i)),i}}function Fw(r){return r==="left"||r==="right"}class Ii{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,t){const n=function(i,s){return i===void 0?s:{tn:Math.max(i.tn,s.tn),sn:i.sn||s.sn}}(this.Zs.get(e),t);this.Zs.set(e,n)}nn(){return this.Js}en(e){const t=this.Zs.get(e);return t===void 0?{tn:this.Js}:{tn:Math.max(this.Js,t.tn),sn:t.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const t of e.Gs)this.mn(t);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((t,n)=>{this.Qs(n,t)})}static wn(){return new Ii(2)}static gn(){return new Ii(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(t=>t.an===5);e!==-1&&this.Gs.splice(e,1)}}class YG{formatTickmarks(e){return e.map(t=>this.format(t))}}const XN=".";function Zc(r,e){if(!Md(r))return"n/a";if(!Ig(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?r.toString():("0000000000000000"+r.toString()).slice(-e)}class Uw extends YG{constructor(e,t){if(super(),t||(t=1),Md(e)&&Ig(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=t,this.bn()}format(e){const t=e<0?"":"";return e=Math.abs(e),t+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const t=this.Yi/this.Mn;let n=Math.floor(e),i="";const s=this.xn!==void 0?this.xn:NaN;if(t>1){let o=+(Math.round(e*t)-n*t).toFixed(this.xn);o>=t&&(o-=t,n+=1),i=XN+Zc(+o.toFixed(this.xn)*this.Mn,s)}else n=Math.round(n*t)/t,s>0&&(i=XN+Zc(0,s));return n.toFixed(0)+i}}class XG extends Uw{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class sTe extends YG{constructor(e){super(),this.Cn=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.Pn(e):e<999995?t+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.Pn(e/1e9)+"B")}Pn(e){let t;const n=Math.pow(10,this.Cn);return t=(e=Math.round(e*n)/n)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,(i,s)=>s)}}const oTe=/[2-9]/g;class tb{constructor(e=50){this.kn=0,this.yn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}In(){this.kn=0,this.Dn.clear(),this.yn=1,this.Tn=1,this.Rn={}}Vi(e,t,n){return this.Bn(e,t,n).width}Di(e,t,n){const i=this.Bn(e,t,n);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}Bn(e,t,n){const i=n||oTe,s=String(t).replace(i,"0");if(this.Dn.has(s))return Hs(this.Dn.get(s)).En;if(this.kn===this.Vn){const a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.kn--}e.save(),e.textBaseline="middle";const o=e.measureText(s);return e.restore(),o.width===0&&t.length||(this.Dn.set(s,{En:o,An:this.yn}),this.Rn[this.yn]=s,this.kn++,this.yn++),o}}class aTe{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,t,n){this.zn=e,this.M=t,this.Ln=n}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class JG{constructor(e,t,n){this.Fn=e,this.On=new tb(50),this.Wn=t,this.O=n,this.F=-1,this.Gt=new aTe(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const t=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(t===null)return null;const n=e.qn(t);if(n==="overlay")return null;const i=this.O.Yn();return i.P!==this.F&&(this.F=i.P,this.On.In()),this.Gt.Nn(this.Fn.$i(),i,n),this.Gt}}class cTe extends rh{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,t){if(!this.Yt?.Vt)return null;const{ut:n,ct:i,Kn:s}=this.Yt;return t>=n-i-7&&t<=n+i+7?{Xn:this.Yt,Kn:s}:null}et({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.Yt===null||this.Yt.Vt===!1)return;const s=Math.round(this.Yt.ut*i);s<0||s>t.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*n),Df(e,this.Yt.Xt),jG(e,s,0,t.width))}}class $k{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new cTe,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}kt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class lTe extends $k{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),t=e.ie().ie;if(t!==2&&t!==3)return;const n=this.Jn.N();if(!n.baseLineVisible||!this.Jn.Vt())return;const i=this.Jn.zt();i!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(i.Wt,i.Wt),this.Zn.R=n.baseLineColor,this.Zn.ct=n.baseLineWidth,this.Zn.Xt=n.baseLineStyle)}}class uTe extends rh{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:n}){const i=this.Yt;if(i===null)return;const s=Math.max(1,Math.floor(t)),o=s%2/2,a=Math.round(i.ne.x*t)+o,c=i.ne.y*n;e.fillStyle=i.ee,e.beginPath();const l=Math.max(2,1.5*i.re)*t;e.arc(a,c,l,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.he,e.beginPath(),e.arc(a,c,i.ft*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=s,e.strokeStyle=i.ae,e.beginPath(),e.arc(a,c,i.ft*t+s/2,0,2*Math.PI,!1),e.stroke()}}const fTe=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class hTe{constructor(e){this.Gt=new uTe,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.kt()}be(){if(this.kt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),t=this.we-e;if(t>0)return void(t<650&&(this.we+=2600));this.me=e,this.we=e+2600}}kt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),t=e.Pe(),n=this.ge.zt();if(t===null||n===null)return;const i=this.ge.ke(!0);if(i.ye||!t.Te(i.Re))return;const s={x:e.qt(i.Re),y:this.ge.Ft().Nt(i.gt,n.Wt)},o=i.R,a=this.ge.N().lineWidth,c=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:c.he,ae:c.ae,ft:c.ft,ne:s})}Ce(){const e=this.Gt.se();if(e!==null){const t=this.De(this.Ve(),e.ee);e.he=t.he,e.ae=t.ae,e.ft=t.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Ie(e,t,n,i){const s=n+(i-n)*t;return this.ge.Qt().Xi().j(e,s)}De(e,t){const n=e%2600/2600;let i;for(const l of fTe)if(n>=l.le&&n<=l.oe){i=l;break}Oi(i!==void 0,"Last price animation internal logic error");const s=(n-i.le)/(i.oe-i.le);return{he:this.Ie(t,s,i.ce,i.de),ae:this.Ie(t,s,i.fe,i.pe),ft:(o=s,a=i._e,c=i.ue,a+(c-a)*o)};var o,a,c}}class dTe extends $k{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const t=this.Jn.N();if(!t.priceLineVisible||!this.Jn.Vt())return;const n=this.Jn.ke(t.priceLineSource===0);n.ye||(e.Vt=!0,e.ut=n.Bi,e.R=this.Jn.Be(n.R),e.ct=t.priceLineWidth,e.Xt=t.priceLineStyle)}}class pTe extends Lw{constructor(e){super(),this.Jt=e}qi(e,t,n){e.Vt=!1,t.Vt=!1;const i=this.Jt;if(!i.Vt())return;const s=i.N(),o=s.lastValueVisible,a=i.Ee()!=="",c=s.seriesLastValueMode===0,l=i.ke(!1);if(l.ye)return;o&&(e.ri=this.Ae(l,o,c),e.Vt=e.ri.length!==0),(a||c)&&(t.ri=this.ze(l,o,a,c),t.Vt=t.ri.length>0);const u=i.Be(l.R),f=this.Jt.Qt().Xi().X(u);n.Z=f.Z,n.Bi=l.Bi,t.Ht=i.Qt().Ut(l.Bi/i.Ft().$t()),e.Ht=u,e.R=f.G,t.R=f.G}ze(e,t,n,i){let s="";const o=this.Jt.Ee();return n&&o.length!==0&&(s+=`${o} `),t&&i&&(s+=this.Jt.Ft().Le()?e.Oe:e.Ne),s.trim()}Ae(e,t,n){return t?n?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function JN(r,e,t,n){const i=Number.isFinite(e),s=Number.isFinite(t);return i&&s?r(e,t):i||s?i?e:t:n}class ws{constructor(e,t){this.Fe=e,this.We=t}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new ws(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new ws(JN(Math.min,this.$e(),e.$e(),-1/0),JN(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!Md(e)||this.We-this.Fe===0)return;const t=.5*(this.We+this.Fe);let n=this.We-t,i=this.Fe-t;n*=e,i*=e,this.We=t+n,this.Fe=t+i}Ke(e){Md(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new ws(e.minValue,e.maxValue)}}class rb{constructor(e,t){this.Ge=e,this.Je=t||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new rb(ws.Ze(e.priceRange),e.margins)}}class gTe extends $k{constructor(e,t){super(e),this.ir=t}te(){const e=this.Zn;e.Vt=!1;const t=this.ir.N();if(!this.Jn.Vt()||!t.lineVisible)return;const n=this.ir.sr();n!==null&&(e.Vt=!0,e.ut=n,e.R=t.color,e.ct=t.lineWidth,e.Xt=t.lineStyle,e.Kn=this.ir.N().id)}}class mTe extends Lw{constructor(e,t){super(),this.ge=e,this.ir=t}qi(e,t,n){e.Vt=!1,t.Vt=!1;const i=this.ir.N(),s=i.axisLabelVisible,o=i.title!=="",a=this.ge;if(!s||!a.Vt())return;const c=this.ir.sr();if(c===null)return;o&&(t.ri=i.title,t.Vt=!0),t.Ht=a.Qt().Ut(c/a.Ft().$t()),e.ri=this.nr(i.price),e.Vt=!0;const l=this.ge.Qt().Xi().X(i.axisLabelColor||i.color);n.Z=l.Z;const u=i.axisLabelTextColor||l.G;e.R=u,t.R=u,n.Bi=c}nr(e){const t=this.ge.zt();return t===null?"":this.ge.Ft().Zi(e,t.Wt)}}class yTe{constructor(e,t){this.ge=e,this.Ps=t,this.er=new gTe(e,this),this.Fn=new mTe(e,this),this.rr=new JG(this.Fn,e,e.Qt())}hr(e){So(this.Ps,e),this.kt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}kt(){this.er.kt(),this.Fn.kt()}sr(){const e=this.ge,t=e.Ft();if(e.Qt().Et().Ki()||t.Ki())return null;const n=e.zt();return n===null?null:t.Nt(this.Ps.price,n.Wt)}}class vTe extends GG{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const bTe={Bar:(r,e,t,n)=>{const i=e.upColor,s=e.downColor,o=ct(r(t,n)),a=eu(o.Wt[0])<=eu(o.Wt[3]);return{cr:o.R??(a?i:s)}},Candlestick:(r,e,t,n)=>{const i=e.upColor,s=e.downColor,o=e.borderUpColor,a=e.borderDownColor,c=e.wickUpColor,l=e.wickDownColor,u=ct(r(t,n)),f=eu(u.Wt[0])<=eu(u.Wt[3]);return{cr:u.R??(f?i:s),dr:u.Ht??(f?o:a),pr:u.vr??(f?c:l)}},Custom:(r,e,t,n)=>({cr:ct(r(t,n)).R??e.color}),Area:(r,e,t,n)=>{const i=ct(r(t,n));return{cr:i.vt??e.lineColor,vt:i.vt??e.lineColor,mr:i.mr??e.topColor,wr:i.wr??e.bottomColor}},Baseline:(r,e,t,n)=>{const i=ct(r(t,n));return{cr:i.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:i.gr??e.topLineColor,Mr:i.Mr??e.bottomLineColor,br:i.br??e.topFillColor1,Sr:i.Sr??e.topFillColor2,Cr:i.Cr??e.bottomFillColor1,Pr:i.Pr??e.bottomFillColor2}},Line:(r,e,t,n)=>{const i=ct(r(t,n));return{cr:i.R??e.color,vt:i.R??e.color}},Histogram:(r,e,t,n)=>({cr:ct(r(t,n)).R??e.color})};class wTe{constructor(e){this.kr=(t,n)=>n!==void 0?n.Wt:this.ge.Xs().yr(t),this.ge=e,this.Tr=bTe[e.Rr()]}Dr(e,t){return this.Tr(this.kr,this.ge.N(),e,t)}}function QG(r,e,t,n,i=0,s=e.length){let o=s-i;for(;0<o;){const a=o>>1,c=i+a;n(e[c],t)===r?(i=c+1,o-=a+1):o=a}return i}const Bd=QG.bind(null,!0),ZG=QG.bind(null,!1);var QN;(function(r){r[r.NearestLeft=-1]="NearestLeft",r[r.None=0]="None",r[r.NearestRight=1]="NearestRight"})(QN||(QN={}));const Bl=30;class xTe{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}yr(e){return this.Fr(e)}Fr(e,t=0){const n=this.Nr(e,t);return n===null?null:{...this.Wr(n),Re:this.Or(n)}}Hr(){return this.Vr}Ur(e,t,n){if(this.Ki())return null;let i=null;for(const s of n)i=ly(i,this.$r(e,t,s));return i}ht(e){this.Br.clear(),this.Ir.clear(),this.Vr=e,this.Er=e.map(t=>t.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,t){const n=this.Yr(e);if(n===null&&t!==0)switch(t){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return n}jr(e){let t=this.Xr(e);return t>0&&(t-=1),t!==this.Vr.length&&this.Or(t)<e?t:null}Kr(e){const t=this.Zr(e);return t!==this.Vr.length&&e<this.Or(t)?t:null}Yr(e){const t=this.Xr(e);return t===this.Vr.length||e<this.Vr[t].Re?null:t}Xr(e){return Bd(this.Vr,e,(t,n)=>t.Re<n)}Zr(e){return ZG(this.Vr,e,(t,n)=>t.Re>n)}Gr(e,t,n){let i=null;for(let s=e;s<t;s++){const o=this.Vr[s].Wt[n];Number.isNaN(o)||(i===null?i={Jr:o,Qr:o}:(o<i.Jr&&(i.Jr=o),o>i.Qr&&(i.Qr=o)))}return i}$r(e,t,n){if(this.Ki())return null;let i=null;const s=ct(this.Lr()),o=ct(this.Ks()),a=Math.max(e,s),c=Math.min(t,o),l=Math.ceil(a/Bl)*Bl,u=Math.max(l,Math.floor(c/Bl)*Bl);{const h=this.Xr(a),d=this.Zr(Math.min(c,l,t));i=ly(i,this.Gr(h,d,n))}let f=this.Ir.get(n);f===void 0&&(f=new Map,this.Ir.set(n,f));for(let h=Math.max(l+1,a);h<u;h+=Bl){const d=Math.floor(h/Bl);let g=f.get(d);if(g===void 0){const p=this.Xr(d*Bl),m=this.Zr((d+1)*Bl-1);g=this.Gr(p,m,n),f.set(d,g)}i=ly(i,g)}{const h=this.Xr(u),d=this.Zr(c);i=ly(i,this.Gr(h,d,n))}return i}}function ly(r,e){return r===null?e:e===null?r:{Jr:Math.min(r.Jr,e.Jr),Qr:Math.max(r.Qr,e.Qr)}}class _Te{constructor(e){this.th=e}nt(e,t,n){this.th.draw(e)}ih(e,t,n){this.th.drawBackground?.(e)}}class STe{constructor(e){this.Dn=null,this.sh=e}Tt(){const e=this.sh.renderer();if(e===null)return null;if(this.Dn?.nh===e)return this.Dn.eh;const t=new _Te(e);return this.Dn={nh:e,eh:t},t}rh(){return this.sh.zOrder?.()??"normal"}}class eY{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){this.ah.updateAllViews?.()}Fs(){const e=this.ah.paneViews?.()??[];if(this.hh?.nh===e)return this.hh.eh;const t=e.map(n=>new STe(n));return this.hh={nh:e,eh:t},t}jn(e,t){return this.ah.hitTest?.(e,t)??null}}let ETe=class extends eY{us(){return[]}};class ATe{constructor(e){this.th=e}nt(e,t,n){this.th.draw(e)}ih(e,t,n){this.th.drawBackground?.(e)}}class ZN{constructor(e){this.Dn=null,this.sh=e}Tt(){const e=this.sh.renderer();if(e===null)return null;if(this.Dn?.nh===e)return this.Dn.eh;const t=new ATe(e);return this.Dn={nh:e,eh:t},t}rh(){return this.sh.zOrder?.()??"normal"}}function tY(r){return{ri:r.text(),Bi:r.coordinate(),Ii:r.fixedCoordinate?.(),R:r.textColor(),Z:r.backColor(),Vt:r.visible?.()??!0,pi:r.tickVisible?.()??!0}}class ITe{constructor(e,t){this.Gt=new WG,this._h=e,this.uh=t}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...tY(this._h)}),this.Gt}}class CTe extends Lw{constructor(e,t){super(),this._h=e,this.Yi=t}qi(e,t,n){const i=tY(this._h);n.Z=i.Z,e.R=i.R;const s=2/12*this.Yi.P();n.Ti=s,n.Ri=s,n.Bi=i.Bi,n.Ii=i.Ii,e.ri=i.ri,e.Vt=i.Vt,e.pi=i.pi}}class TTe extends eY{constructor(e,t){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=t}cs(){const e=this.ah.timeAxisViews?.()??[];if(this.dh?.nh===e)return this.dh.eh;const t=this.ge.Qt().Et(),n=e.map(i=>new ITe(i,t));return this.dh={nh:e,eh:n},n}Ws(){const e=this.ah.priceAxisViews?.()??[];if(this.fh?.nh===e)return this.fh.eh;const t=this.ge.Ft(),n=e.map(i=>new CTe(i,t));return this.fh={nh:e,eh:n},n}wh(){const e=this.ah.priceAxisPaneViews?.()??[];if(this.ph?.nh===e)return this.ph.eh;const t=e.map(n=>new ZN(n));return this.ph={nh:e,eh:t},t}gh(){const e=this.ah.timeAxisPaneViews?.()??[];if(this.mh?.nh===e)return this.mh.eh;const t=e.map(n=>new ZN(n));return this.mh={nh:e,eh:t},t}Mh(e,t){return this.ah.autoscaleInfo?.(e,t)??null}}function f2(r,e,t,n){r.forEach(i=>{e(i).forEach(s=>{s.rh()===t&&n.push(s)})})}function h2(r){return r.Fs()}function RTe(r){return r.wh()}function kTe(r){return r.gh()}const PTe=["Area","Line","Baseline"];class zw extends vTe{constructor(e,t,n,i,s){super(e),this.Yt=new xTe,this.er=new dTe(this),this.bh=[],this.Sh=new lTe(this),this.xh=null,this.Ch=null,this.Ph=null,this.kh=[],this.Ps=n,this.yh=t;const o=new pTe(this);this.vs=[o],this.rr=new JG(o,this,e),PTe.includes(this.yh)&&(this.xh=new hTe(this)),this.Th(),this.sh=i(this,this.Qt(),s)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Be(e){return this.Ps.priceLineColor||e}ke(e){const t={ye:!0},n=this.Ft();if(this.Qt().Et().Ki()||n.Ki()||this.Yt.Ki())return t;const i=this.Qt().Et().Pe(),s=this.zt();if(i===null||s===null)return t;let o,a;if(e){const f=this.Yt.Ar();if(f===null)return t;o=f,a=f.Re}else{const f=this.Yt.Fr(i.bi(),-1);if(f===null||(o=this.Yt.yr(f.Re),o===null))return t;a=f.Re}const c=o.Wt[3],l=this.Rh().Dr(a,{Wt:o}),u=n.Nt(c,s.Wt);return{ye:!1,gt:c,ri:n.Zi(c,s.Wt),Oe:n.Dh(c),Ne:n.Vh(c,s.Wt),R:l.cr,Bi:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new wTe(this)),this.Ch}N(){return this.Ps}hr(e){const t=e.priceScaleId;t!==void 0&&t!==this.Ps.priceScaleId&&this.Qt().Ih(this,t),So(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.kt("options")}ht(e,t){this.Yt.ht(e),this.sh.kt("data"),this.xh!==null&&(t&&t.zh?this.xh.be():e.length===0&&this.xh.Me());const n=this.Qt().Hn(this);this.Qt().Lh(n),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const t=new yTe(this,e);return this.bh.push(t),this.Qt().Eh(this),t}Nh(e){const t=this.bh.indexOf(e);t!==-1&&this.bh.splice(t,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.yh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const t=e.Uh();return this.Yt.Fr(t,1)}Xs(){return this.Yt}$h(e){const t=this.Yt.yr(e);return t===null?null:this.yh==="Bar"||this.yh==="Candlestick"||this.yh==="Custom"?{qh:t.Wt[0],Yh:t.Wt[1],jh:t.Wt[2],Kh:t.Wt[3]}:t.Wt[3]}Xh(e){const t=[];f2(this.kh,h2,"top",t);const n=this.xh;return n!==null&&n.Vt()&&(this.Ph===null&&n.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),n.Se(),t.unshift(n)),t}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const t=this.bh.map(n=>n.lr());return e.push(...t),f2(this.kh,h2,"normal",e),e}Jh(){return this.Qh(h2,"bottom")}ta(e){return this.Qh(RTe,e)}ia(e){return this.Qh(kTe,e)}sa(e,t){return this.kh.map(n=>n.jn(e,t)).filter(n=>n!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,t){if(t!==this.es&&!this.Gh())return[];const n=[...this.vs];for(const i of this.bh)n.push(i.ur());return this.kh.forEach(i=>{n.push(...i.Ws())}),n}cs(){const e=[];return this.kh.forEach(t=>{e.push(...t.cs())}),e}Mh(e,t){if(this.Ps.autoscaleInfoProvider!==void 0){const n=this.Ps.autoscaleInfoProvider(()=>{const i=this.na(e,t);return i===null?null:i.Xe()});return rb.Ze(n)}return this.na(e,t)}ea(){return this.Ps.priceFormat.minMove}ra(){return this.ha}Ns(){this.sh.kt();for(const e of this.vs)e.kt();for(const e of this.bh)e.kt();this.er.kt(),this.Sh.kt(),this.xh?.kt(),this.kh.forEach(e=>e.Ns())}Ft(){return ct(super.Ft())}At(e){if(!((this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const t=this.Yt.yr(e);return t===null?null:{gt:t.Wt[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}ua(e){this.kh.push(new TTe(e,this))}ca(e){this.kh=this.kh.filter(t=>t.oh()!==e)}da(){if(this.yh==="Custom")return e=>this.sh.fa(e)}pa(){if(this.yh==="Custom")return e=>this.sh.va(e)}ma(){return this.Yt.qr()}Gh(){return!Fw(this.Ft().wa())}na(e,t){if(!Ig(e)||!Ig(t)||this.Yt.Ki())return null;const n=this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline"||this.yh==="Histogram"?[3]:[2,1],i=this.Yt.Ur(e,t,n);let s=i!==null?new ws(i.Jr,i.Qr):null,o=null;if(this.Rr()==="Histogram"){const a=this.Ps.base,c=new ws(a,a);s=s!==null?s.vn(c):c}return this.kh.forEach(a=>{const c=a.Mh(e,t);if(c?.priceRange){const l=new ws(c.priceRange.minValue,c.priceRange.maxValue);s=s!==null?s.vn(l):l}c?.margins&&(o=c.margins)}),new rb(s,o)}aa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}la(){switch(this.yh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}oa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}_a(e){switch(this.yh){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBackgroundColor;if(t.length!==0)return t}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ha={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(t=>t.map(e))};break}case"volume":this.ha=new sTe(this.Ps.priceFormat.precision);break;case"percent":this.ha=new XG(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ha=new Uw(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.ga()}Qh(e,t){const n=[];return f2(this.kh,e,t,n),n}}const OTe=[3],DTe=[0,1,2,3];class $Te{constructor(e){this.Ps=e}Ma(e,t,n){let i=e;if(this.Ps.mode===0)return i;const s=n.ys(),o=s.zt();if(o===null)return i;const a=s.Nt(e,o),c=n.ba().filter(u=>u instanceof zw).reduce((u,f)=>{if(n.Un(f)||!f.Vt())return u;const h=f.Ft(),d=f.Xs();if(h.Ki()||!d.Te(t))return u;const g=d.yr(t);if(g===null)return u;const p=eu(f.zt()),m=this.Ps.mode===3?DTe:OTe;return u.concat(m.map(y=>h.Nt(g.Wt[y],p.Wt)))},[]);if(c.length===0)return i;c.sort((u,f)=>Math.abs(u-a)-Math.abs(f-a));const l=c[0];return i=s.Ts(l,o),i}}function fd(r,e,t){return Math.min(Math.max(r,e),t)}function uy(r,e,t){return e-r<=t}class MTe extends rh{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.Yt===null)return;const s=Math.max(1,Math.floor(n));e.lineWidth=s,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=ct(this.Yt);if(o.Sa){e.strokeStyle=o.xa,Df(e,o.Ca),e.beginPath();for(const a of o.Pa){const c=Math.round(a.ka*n);e.moveTo(c,-s),e.lineTo(c,t.height+s)}e.stroke()}if(o.ya){e.strokeStyle=o.Ta,Df(e,o.Ra),e.beginPath();for(const a of o.Da){const c=Math.round(a.ka*i);e.moveTo(-s,c),e.lineTo(t.width+s,c)}e.stroke()}})}}class BTe{constructor(e){this.Gt=new MTe,this.xt=!0,this.Pt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,t={ya:e.horzLines.visible,Sa:e.vertLines.visible,Ta:e.horzLines.color,xa:e.vertLines.color,Ra:e.horzLines.style,Ca:e.vertLines.style,Da:this.Pt.ys().Va(),Pa:(this.Pt.Qt().Et().Va()||[]).map(n=>({ka:n.coord}))};this.Gt.ht(t),this.xt=!1}return this.Gt}}class NTe{constructor(e){this.sh=new BTe(e)}lr(){return this.sh}}const d2={Ia:4,Ba:1e-4};function Gh(r,e){const t=100*(r-e)/e;return e<0?-t:t}function LTe(r,e){const t=Gh(r.$e(),e),n=Gh(r.qe(),e);return new ws(t,n)}function U0(r,e){const t=100*(r-e)/e+100;return e<0?-t:t}function FTe(r,e){const t=U0(r.$e(),e),n=U0(r.qe(),e);return new ws(t,n)}function nb(r,e){const t=Math.abs(r);if(t<1e-15)return 0;const n=Math.log10(t+e.Ba)+e.Ia;return r<0?-n:n}function z0(r,e){const t=Math.abs(r);if(t<1e-15)return 0;const n=Math.pow(10,t-e.Ia)-e.Ba;return r<0?-n:n}function e0(r,e){if(r===null)return null;const t=nb(r.$e(),e),n=nb(r.qe(),e);return new ws(t,n)}function _0(r,e){if(r===null)return null;const t=z0(r.$e(),e),n=z0(r.qe(),e);return new ws(t,n)}function p2(r){if(r===null)return d2;const e=Math.abs(r.qe()-r.$e());if(e>=1||e<1e-15)return d2;const t=Math.ceil(Math.abs(Math.log10(e))),n=d2.Ia+t;return{Ia:n,Ba:1/Math.pow(10,n)}}class g2{constructor(e,t){if(this.Ea=e,this.Aa=t,function(n){if(n<0)return!1;for(let i=n;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Ea))this.za=[2,2.5,2];else{this.za=[];for(let n=this.Ea;n!==1;){if(n%2==0)this.za.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),n/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(e,t,n){const i=this.Ea===0?0:1/this.Ea;let s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),o=0,a=this.Aa[0];for(;;){const f=uy(s,i,1e-14)&&s>i+1e-14,h=uy(s,n*a,1e-14),d=uy(s,1,1e-14);if(!(f&&h&&d))break;s/=a,a=this.Aa[++o%this.Aa.length]}if(s<=i+1e-14&&(s=i),s=Math.max(1,s),this.za.length>0&&(c=s,l=1,u=1e-14,Math.abs(c-l)<u))for(o=0,a=this.za[0];uy(s,n*a,1e-14)&&s>i+1e-14;)s/=a,a=this.za[++o%this.za.length];var c,l,u;return s}}class eL{constructor(e,t,n,i){this.Oa=[],this.Yi=e,this.Ea=t,this.Na=n,this.Fa=i}La(e,t){if(e<t)throw new Error("high < low");const n=this.Yi.$t(),i=(e-t)*this.Wa()/n,s=new g2(this.Ea,[2,2.5,2]),o=new g2(this.Ea,[2,2,2.5]),a=new g2(this.Ea,[2.5,2,2]),c=[];return c.push(s.La(e,t,i),o.La(e,t,i),a.La(e,t,i)),function(l){if(l.length<1)throw Error("array is empty");let u=l[0];for(let f=1;f<l.length;++f)l[f]<u&&(u=l[f]);return u}(c)}Ha(){const e=this.Yi,t=e.zt();if(t===null)return void(this.Oa=[]);const n=e.$t(),i=this.Na(n-1,t),s=this.Na(0,t),o=this.Yi.N().entireTextOnly?this.Ua()/2:0,a=o,c=n-1-o,l=Math.max(i,s),u=Math.min(i,s);if(l===u)return void(this.Oa=[]);const f=this.La(l,u);if(this.$a(t,f,l,u,a,c),e.qa()&&this.Ya(f,u,l)){const g=this.Yi.ja();this.Ka(t,f,a,c,g,2*g)}const h=this.Oa.map(g=>g.Xa),d=this.Yi.Za(h);for(let g=0;g<this.Oa.length;g++)this.Oa[g].Ga=d[g]}Va(){return this.Oa}Ua(){return this.Yi.P()}Wa(){return Math.ceil(2.5*this.Ua())}$a(e,t,n,i,s,o){const a=this.Oa,c=this.Yi;let l=n%t;l+=l<0?t:0;const u=n>=i?1:-1;let f=null,h=0;for(let d=n-l;d>i;d-=t){const g=this.Fa(d,e,!0);f!==null&&Math.abs(g-f)<this.Wa()||g<s||g>o||(h<a.length?(a[h].ka=g,a[h].Ga=c.Ja(d),a[h].Xa=d):a.push({ka:g,Ga:c.Ja(d),Xa:d}),h++,f=g,c.Qa()&&(t=this.La(d*u,i)))}a.length=h}Ka(e,t,n,i,s,o){const a=this.Oa,c=this.tl(e,n,s,o),l=this.tl(e,i,-o,-s),u=this.Fa(0,e,!0)-this.Fa(t,e,!0);a.length>0&&a[0].ka-c.ka<u/2&&a.shift(),a.length>0&&l.ka-a[a.length-1].ka<u/2&&a.pop(),a.unshift(c),a.push(l)}tl(e,t,n,i){const s=(n+i)/2,o=this.Na(t+n,e),a=this.Na(t+i,e),c=Math.min(o,a),l=Math.max(o,a),u=Math.max(.1,this.La(l,c)),f=this.Na(t+s,e),h=f-f%u,d=this.Fa(h,e,!0);return{Ga:this.Yi.Ja(h),ka:d,Xa:h}}Ya(e,t,n){let i=eu(this.Yi.Qe());return this.Yi.Qa()&&(i=_0(i,this.Yi.il())),i.$e()-t<e&&n-i.qe()<e}}function rY(r){return r.slice().sort((e,t)=>ct(e.hs())-ct(t.hs()))}var tL;(function(r){r[r.Normal=0]="Normal",r[r.Logarithmic=1]="Logarithmic",r[r.Percentage=2]="Percentage",r[r.IndexedTo100=3]="IndexedTo100"})(tL||(tL={}));const rL=new XG,nL=new Uw(100,1);class UTe{constructor(e,t,n,i,s){this.sl=0,this.nl=null,this.Ge=null,this.el=null,this.rl={hl:!1,al:null},this.ll=!1,this.ol=0,this._l=0,this.ul=new Jn,this.cl=new Jn,this.dl=[],this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.wl=null,this.ha=nL,this.gl=p2(null),this.Ml=e,this.Ps=t,this.bl=n,this.Sl=i,this.xl=s,this.Cl=new eL(this,100,this.Pl.bind(this),this.kl.bind(this))}wa(){return this.Ml}N(){return this.Ps}hr(e){if(So(this.Ps,e),this.ga(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const t=Hs(e.scaleMargins.top),n=Hs(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(t+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+n}`);this.Tl(),this.vl=null}}Rl(){return this.Ps.autoScale}Dl(){return this.ll}Qa(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Vl(){return this.Ps.mode===3}il(){return this.gl}ie(){return{sn:this.Ps.autoScale,Il:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const t=this.ie();let n=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.rl.hl=!1),t.ie===1&&e.ie!==t.ie&&(function(s,o){if(s===null)return!1;const a=z0(s.$e(),o),c=z0(s.qe(),o);return isFinite(a)&&isFinite(c)}(this.Ge,this.gl)?(n=_0(this.Ge,this.gl),n!==null&&this.Bl(n)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==t.ie&&(n=e0(this.Ge,this.gl),n!==null&&this.Bl(n));const i=t.ie!==this.Ps.mode;i&&(t.ie===2||this.Le())&&this.ga(),i&&(t.ie===3||this.Vl())&&this.ga(),e.Il!==void 0&&t.Il!==e.Il&&(this.Ps.invertScale=e.Il,this.El()),this.cl.p(t,this.ie())}Al(){return this.cl}P(){return this.bl.fontSize}$t(){return this.sl}zl(e){this.sl!==e&&(this.sl=e,this.Tl(),this.vl=null)}Ll(){if(this.nl)return this.nl;const e=this.$t()-this.Ol()-this.Nl();return this.nl=e,e}Qe(){return this.Fl(),this.Ge}Bl(e,t){const n=this.Ge;(t||n===null&&e!==null||n!==null&&!n.He(e))&&(this.vl=null,this.Ge=e)}Wl(e){this.Bl(e),this.Hl(e!==null)}Ki(){return this.Fl(),this.sl===0||!this.Ge||this.Ge.Ki()}Ul(e){return this.Il()?e:this.$t()-1-e}Nt(e,t){return this.Le()?e=Gh(e,t):this.Vl()&&(e=U0(e,t)),this.kl(e,t)}$l(e,t,n){this.Fl();const i=this.Nl(),s=ct(this.Qe()),o=s.$e(),a=s.qe(),c=this.Ll()-1,l=this.Il(),u=c/(a-o),f=n===void 0?0:n.from,h=n===void 0?e.length:n.to,d=this.ql();for(let g=f;g<h;g++){const p=e[g],m=p.gt;if(isNaN(m))continue;let y=m;d!==null&&(y=d(p.gt,t));const v=i+u*(y-o),b=l?v:this.sl-1-v;p.ut=b}}Yl(e,t,n){this.Fl();const i=this.Nl(),s=ct(this.Qe()),o=s.$e(),a=s.qe(),c=this.Ll()-1,l=this.Il(),u=c/(a-o),f=n===void 0?0:n.from,h=n===void 0?e.length:n.to,d=this.ql();for(let g=f;g<h;g++){const p=e[g];let m=p.qh,y=p.Yh,v=p.jh,b=p.Kh;d!==null&&(m=d(p.qh,t),y=d(p.Yh,t),v=d(p.jh,t),b=d(p.Kh,t));let _=i+u*(m-o),x=l?_:this.sl-1-_;p.jl=x,_=i+u*(y-o),x=l?_:this.sl-1-_,p.Kl=x,_=i+u*(v-o),x=l?_:this.sl-1-_,p.Xl=x,_=i+u*(b-o),x=l?_:this.sl-1-_,p.Zl=x}}Ts(e,t){const n=this.Pl(e,t);return this.Gl(n,t)}Gl(e,t){let n=e;return this.Le()?n=function(i,s){return s<0&&(i=-i),i/100*s+s}(n,t):this.Vl()&&(n=function(i,s){return i-=100,s<0&&(i=-i),i/100*s+s}(n,t)),n}ba(){return this.dl}Dt(){return this.pl||(this.pl=rY(this.dl)),this.pl}Jl(e){this.dl.indexOf(e)===-1&&(this.dl.push(e),this.ga(),this.Ql())}io(e){const t=this.dl.indexOf(e);if(t===-1)throw new Error("source is not attached to scale");this.dl.splice(t,1),this.dl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.ga(),this.Ql()}zt(){let e=null;for(const t of this.dl){const n=t.zt();n!==null&&(e===null||n.Hh<e.Hh)&&(e=n)}return e===null?null:e.Wt}Il(){return this.Ps.invertScale}Va(){const e=this.zt()===null;if(this.vl!==null&&(e||this.vl.so===e))return this.vl.Va;this.Cl.Ha();const t=this.Cl.Va();return this.vl={Va:t,so:e},this.ul.p(),t}no(){return this.ul}eo(e){this.Le()||this.Vl()||this.ml===null&&this.el===null&&(this.Ki()||(this.ml=this.sl-e,this.el=ct(this.Qe()).Ue()))}ro(e){if(this.Le()||this.Vl()||this.ml===null)return;this.yl({sn:!1}),(e=this.sl-e)<0&&(e=0);let t=(this.ml+.2*(this.sl-1))/(e+.2*(this.sl-1));const n=ct(this.el).Ue();t=Math.max(t,.1),n.je(t),this.Bl(n)}ho(){this.Le()||this.Vl()||(this.ml=null,this.el=null)}ao(e){this.Rl()||this.wl===null&&this.el===null&&(this.Ki()||(this.wl=e,this.el=ct(this.Qe()).Ue()))}lo(e){if(this.Rl()||this.wl===null)return;const t=ct(this.Qe()).Ye()/(this.Ll()-1);let n=e-this.wl;this.Il()&&(n*=-1);const i=n*t,s=ct(this.el).Ue();s.Ke(i),this.Bl(s,!0),this.vl=null}oo(){this.Rl()||this.wl!==null&&(this.wl=null,this.el=null)}ra(){return this.ha||this.ga(),this.ha}Zi(e,t){switch(this.Ps.mode){case 2:return this._o(Gh(e,t));case 3:return this.ra().format(U0(e,t));default:return this.nr(e)}}Ja(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ra().format(e);default:return this.nr(e)}}Za(e){switch(this.Ps.mode){case 2:return this.uo(e);case 3:return this.ra().formatTickmarks(e);default:return this.co(e)}}Dh(e){return this.nr(e,ct(this.fl).ra())}Vh(e,t){return e=Gh(e,t),this._o(e,rL)}do(){return this.dl}fo(e){this.rl={al:e,hl:!1}}Ns(){this.dl.forEach(e=>e.Ns())}qa(){return this.Ps.ensureEdgeTickMarksVisible&&this.Rl()}ja(){return this.P()/2}ga(){this.vl=null;let e=1/0;this.fl=null;for(const n of this.dl)n.hs()<e&&(e=n.hs(),this.fl=n);let t=100;this.fl!==null&&(t=Math.round(1/this.fl.ea())),this.ha=nL,this.Le()?(this.ha=rL,t=100):this.Vl()?(this.ha=new Uw(100,1),t=100):this.fl!==null&&(this.ha=this.fl.ra()),this.Cl=new eL(this,t,this.Pl.bind(this),this.kl.bind(this)),this.Cl.Ha()}Ql(){this.pl=null}Xi(){return this.xl}Hl(e){this.ll=e}Ol(){return this.Il()?this.Ps.scaleMargins.bottom*this.$t()+this._l:this.Ps.scaleMargins.top*this.$t()+this.ol}Nl(){return this.Il()?this.Ps.scaleMargins.top*this.$t()+this.ol:this.Ps.scaleMargins.bottom*this.$t()+this._l}Fl(){this.rl.hl||(this.rl.hl=!0,this.po())}Tl(){this.nl=null}kl(e,t){if(this.Fl(),this.Ki())return 0;e=this.Qa()&&e?nb(e,this.gl):e;const n=ct(this.Qe()),i=this.Nl()+(this.Ll()-1)*(e-n.$e())/n.Ye();return this.Ul(i)}Pl(e,t){if(this.Fl(),this.Ki())return 0;const n=this.Ul(e),i=ct(this.Qe()),s=i.$e()+i.Ye()*((n-this.Nl())/(this.Ll()-1));return this.Qa()?z0(s,this.gl):s}El(){this.vl=null,this.Cl.Ha()}po(){if(this.Dl()&&!this.Rl())return;const e=this.rl.al;if(e===null)return;let t=null;const n=this.do();let i=0,s=0;for(const c of n){if(!c.Vt())continue;const l=c.zt();if(l===null)continue;const u=c.Mh(e.Uh(),e.bi());let f=u&&u.Qe();if(f!==null){switch(this.Ps.mode){case 1:f=e0(f,this.gl);break;case 2:f=LTe(f,l.Wt);break;case 3:f=FTe(f,l.Wt)}if(t=t===null?f:t.vn(ct(f)),u!==null){const h=u.tr();h!==null&&(i=Math.max(i,h.above),s=Math.max(s,h.below))}}}if(this.qa()&&(i=Math.max(i,this.ja()),s=Math.max(s,this.ja())),i===this.ol&&s===this._l||(this.ol=i,this._l=s,this.vl=null,this.Tl()),t!==null){if(t.$e()===t.qe()){const c=this.fl,l=5*(c===null||this.Le()||this.Vl()?1:c.ea());this.Qa()&&(t=_0(t,this.gl)),t=new ws(t.$e()-l,t.qe()+l),this.Qa()&&(t=e0(t,this.gl))}if(this.Qa()){const c=_0(t,this.gl),l=p2(c);if(o=l,a=this.gl,o.Ia!==a.Ia||o.Ba!==a.Ba){const u=this.el!==null?_0(this.el,this.gl):null;this.gl=l,t=e0(c,l),u!==null&&(this.el=e0(u,l))}}this.Bl(t)}else this.Ge===null&&(this.Bl(new ws(-.5,.5)),this.gl=p2(null));var o,a}ql(){return this.Le()?Gh:this.Vl()?U0:this.Qa()?e=>nb(e,this.gl):null}vo(e,t,n){return t===void 0?(n===void 0&&(n=this.ra()),n.format(e)):t(e)}mo(e,t,n){return t===void 0?(n===void 0&&(n=this.ra()),n.formatTickmarks(e)):t(e)}nr(e,t){return this.vo(e,this.Sl.priceFormatter,t)}co(e,t){const n=this.Sl.priceFormatter;return this.mo(e,this.Sl.tickmarksPriceFormatter??(n?i=>i.map(n):void 0),t)}_o(e,t){return this.vo(e,this.Sl.percentageFormatter,t)}uo(e,t){const n=this.Sl.percentageFormatter;return this.mo(e,this.Sl.tickmarksPercentageFormatter??(n?i=>i.map(n):void 0),t)}}function iL(r){return r instanceof zw}class sL{constructor(e,t){this.dl=[],this.wo=new Map,this.sl=0,this.Mo=0,this.bo=1,this.pl=null,this.So=!1,this.xo=new Jn,this.kh=[],this.uh=e,this.ts=t,this.Co=new NTe(this);const n=t.N();this.Po=this.ko("left",n.leftPriceScale),this.yo=this.ko("right",n.rightPriceScale),this.Po.Al().i(this.To.bind(this,this.Po),this),this.yo.Al().i(this.To.bind(this,this.yo),this),this.Ro(n)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.yo.hr(e.rightPriceScale),e.localization&&(this.Po.ga(),this.yo.ga()),e.overlayPriceScales){const t=Array.from(this.wo.values());for(const n of t){const i=ct(n[0].Ft());i.hr(e.overlayPriceScales),e.localization&&i.ga()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.yo}return this.wo.has(e)?Hs(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.Al().u(this),this.yo.Al().u(this),this.dl.forEach(e=>{e.m&&e.m()}),this.kh=this.kh.filter(e=>{const t=e.oh();return t.detached&&t.detached(),!1}),this.xo.p()}Io(){return this.bo}Bo(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.sl}Eo(e){this.Mo=e,this.Ao()}zl(e){this.sl=e,this.Po.zl(e),this.yo.zl(e),this.dl.forEach(t=>{if(this.Un(t)){const n=t.Ft();n!==null&&n.zl(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.dl.filter(iL)}ba(){return this.dl}Un(e){const t=e.Ft();return t===null||this.Po!==t&&this.yo!==t}Jl(e,t,n){this.No(e,t,n?e.hs():this.dl.length)}io(e,t){const n=this.dl.indexOf(e);Oi(n!==-1,"removeDataSource: invalid data source"),this.dl.splice(n,1),t||this.dl.forEach((o,a)=>o.ls(a));const i=ct(e.Ft()).wa();if(this.wo.has(i)){const o=Hs(this.wo.get(i)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.wo.delete(i))}const s=e.Ft();s&&s.ba().indexOf(e)>=0&&(s.io(e),this.Fo(s)),this.pl=null}qn(e){return e===this.Po?"left":e===this.yo?"right":"overlay"}Wo(){return this.Po}Ho(){return this.yo}Uo(e,t){e.eo(t)}$o(e,t){e.ro(t),this.Ao()}qo(e){e.ho()}Yo(e,t){e.ao(t)}jo(e,t){e.lo(t),this.Ao()}Ko(e){e.oo()}Ao(){this.dl.forEach(e=>{e.Ns()})}ys(){let e=null;return this.ts.N().rightPriceScale.visible&&this.yo.ba().length!==0?e=this.yo:this.ts.N().leftPriceScale.visible&&this.Po.ba().length!==0?e=this.Po:this.dl.length!==0&&(e=this.dl[0].Ft()),e===null&&(e=this.yo),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.yo:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Rl()&&this.Xo(e)}Zo(e){const t=this.uh.Pe();e.yl({sn:!0}),t!==null&&e.fo(t),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.yo)}Jo(){this.Fo(this.Po),this.Fo(this.yo),this.dl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.pl===null&&(this.pl=rY(this.dl)),this.pl}Qo(e,t){t=fd(t,0,this.dl.length-1);const n=this.dl.indexOf(e);Oi(n!==-1,"setSeriesOrder: invalid data source"),this.dl.splice(n,1),this.dl.splice(t,0,e),this.dl.forEach((i,s)=>i.ls(s)),this.pl=null;for(const i of[this.Po,this.yo])i.Ql(),i.ga();this.ts.ar()}It(){return this.Dt().filter(iL)}t_(){return this.xo}i_(){return this.Co}ua(e){this.kh.push(new ETe(e))}ca(e){this.kh=this.kh.filter(t=>t.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.kh}sa(e,t){return this.kh.map(n=>n.jn(e,t)).filter(n=>n!==null)}Xo(e){const t=e.do();if(t&&t.length>0&&!this.uh.Ki()){const n=this.uh.Pe();n!==null&&e.fo(n)}e.Ns()}No(e,t,n){let i=this.Do(t);if(i===null&&(i=this.ko(t,this.ts.N().overlayPriceScales)),this.dl.splice(n,0,e),!Fw(t)){const s=this.wo.get(t)||[];s.push(e),this.wo.set(t,s)}e.ls(n),i.Jl(e),e._s(i),this.Fo(i),this.pl=null}To(e,t,n){t.ie!==n.ie&&this.Xo(e)}ko(e,t){const n={visible:!0,autoScale:!0,...Qc(t)},i=new UTe(e,n,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return i.zl(this.$t()),i}}function fy(r){return{n_:r.n_,e_:{Kn:r.r_.externalId},h_:r.r_.cursorStyle}}function zTe(r,e,t,n){for(const i of r){const s=i.Tt(n);if(s!==null&&s.jn){const o=s.jn(e,t);if(o!==null)return{a_:i,e_:o}}}return null}function qTe(r){return r.Fs!==void 0}function nY(r,e,t){const n=[r,...r.Dt()],i=function(s,o,a){let c,l;for(const h of s){const d=h.sa?.(o,a)??[];for(const g of d)u=g.zOrder,f=c?.zOrder,(!f||u==="top"&&f!=="top"||u==="normal"&&f==="bottom")&&(c=g,l=h)}var u,f;return c&&l?{r_:c,n_:l}:null}(n,e,t);if(i?.r_.zOrder==="top")return fy(i);for(const s of n){if(i&&i.n_===s&&i.r_.zOrder!=="bottom"&&!i.r_.isBackground)return fy(i);if(qTe(s)){const o=zTe(s.Fs(r),e,t,r);if(o!==null)return{n_:s,a_:o.a_,e_:o.e_}}if(i&&i.n_===s&&i.r_.zOrder!=="bottom"&&i.r_.isBackground)return fy(i)}return i?.r_?fy(i):null}class jTe{constructor(e,t,n=50){this.kn=0,this.yn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=t,this.Vn=n}__(e){const t=e.time,n=this.o_.cacheKey(t),i=this.Dn.get(n);if(i!==void 0)return i.u_;if(this.kn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Hs(o)),this.Tn++,this.kn--}const s=this.l_(e);return this.Dn.set(n,{u_:s,An:this.yn}),this.Rn.set(this.yn,n),this.kn++,this.yn++,s}}class q0{constructor(e,t){Oi(e<=t,"right should be >= left"),this.c_=e,this.d_=t}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function oL(r,e){return r===null||e===null?r===e:r.He(e)}class VTe{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,t){this.g_(t),this.Dn=null;for(let n=t;n<e.length;++n){const i=e[n];let s=this.p_.get(i.timeWeight);s===void 0&&(s=[],this.p_.set(i.timeWeight,s)),s.push({index:n,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}M_(e,t,n,i,s){const o=Math.ceil(t/e);return this.Dn!==null&&this.Dn.b_===o&&s===this.Dn.S_&&n===this.Dn.x_||(this.Dn={S_:s,x_:n,Va:this.C_(o,n,i),b_:o}),this.Dn.Va}g_(e){if(e===0)return void this.p_.clear();const t=[];this.p_.forEach((n,i)=>{e<=n[0].index?t.push(i):n.splice(Bd(n,e,s=>s.index<e),1/0)});for(const n of t)this.p_.delete(n)}C_(e,t,n){let i=[];const s=o=>!t||n.has(o.index);for(const o of Array.from(this.p_.keys()).sort((a,c)=>c-a)){if(!this.p_.get(o))continue;const a=i;i=[];const c=a.length;let l=0;const u=Hs(this.p_.get(o)),f=u.length;let h=1/0,d=-1/0;for(let g=0;g<f;g++){const p=u[g],m=p.index;for(;l<c;){const y=a[l],v=y.index;if(!(v<m&&s(y))){h=v;break}l++,i.push(y),d=v,h=1/0}if(h-m>=e&&m-d>=e&&s(p))i.push(p),d=m;else if(this.v_)return a}for(;l<c;l++)s(a[l])&&i.push(a[l])}return i}}class hd{constructor(e){this.P_=e}k_(){return this.P_===null?null:new q0(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}y_(){return this.P_}static T_(){return new hd(null)}}function KTe(r,e){return r.weight>e.weight?r:e}class HTe{constructor(e,t,n,i){this.Mo=0,this.R_=null,this.D_=[],this.wl=null,this.ml=null,this.V_=new VTe,this.I_=new Map,this.B_=hd.T_(),this.E_=!0,this.A_=new Jn,this.z_=new Jn,this.L_=new Jn,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=t,this.Sl=n,this.U_=t.rightOffset,this.q_=t.barSpacing,this.ts=e,this.o_=i,this.Y_(),this.V_.m_(t.uniformDistribution),this.j_()}N(){return this.Ps}K_(e){So(this.Sl,e),this.X_(),this.Y_()}hr(e,t){So(this.Ps,e),this.Ps.fixLeftEdge&&this.Z_(),this.Ps.fixRightEdge&&this.G_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.j_(),this.X_(),this.Y_(),this.L_.p()}Rs(e){return this.D_[e]?.time??null}ss(e){return this.D_[e]??null}J_(e,t){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return t?this.D_.length-1:null;const n=Bd(this.D_,this.o_.key(e),(i,s)=>this.o_.key(i.time)<s);return this.o_.key(e)<this.o_.key(this.D_[n].time)?t?n:null:n}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}Q_(){return this.D_.length>0}Pe(){return this.tu(),this.B_.k_()}iu(){return this.tu(),this.B_.y_()}su(){const e=this.Pe();if(e===null)return null;const t={from:e.Uh(),to:e.bi()};return this.nu(t)}nu(e){const t=Math.round(e.from),n=Math.round(e.to),i=ct(this.eu()),s=ct(this.ru());return{from:ct(this.ss(Math.max(i,t))),to:ct(this.ss(Math.min(s,n)))}}hu(e){return{from:ct(this.J_(e.from,!0)),to:ct(this.J_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const t=this.iu(),n=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&n!==0){const i=this.q_*e/n;this.q_=i}if(this.Ps.fixLeftEdge&&t!==null&&t.Uh()<=0){const i=n-e;this.U_-=Math.round(i/this.q_)+1,this.E_=!0}this.au(),this.lu()}qt(e){if(this.Ki()||!Ig(e))return 0;const t=this.ou()+this.U_-e;return this.Mo-(t+.5)*this.q_-1}_u(e,t){const n=this.ou(),i=t===void 0?0:t.from,s=t===void 0?e.length:t.to;for(let o=i;o<s;o++){const a=e[o].wt,c=n+this.U_-a,l=this.Mo-(c+.5)*this.q_-1;e[o]._t=l}}uu(e,t){const n=Math.ceil(this.cu(e));return t&&this.Ps.ignoreWhitespaceIndices&&!this.du(n)?this.fu(n):n}fn(e){this.E_=!0,this.U_=e,this.lu(),this.ts.pu(),this.ts.ar()}vu(){return this.q_}dn(e){this.mu(e),this.lu(),this.ts.pu(),this.ts.ar()}wu(){return this.U_}Va(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,t=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),n=Math.round(t/e),i=ct(this.Pe()),s=Math.max(i.Uh(),i.Uh()-n),o=Math.max(i.bi(),i.bi()-n),a=this.V_.M_(e,t,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),c=this.eu()+n,l=this.ru()-n,u=this.gu(),f=this.Ps.fixLeftEdge||u,h=this.Ps.fixRightEdge||u;let d=0;for(const g of a){if(!(s<=g.index&&g.index<=o))continue;let p;d<this.H_.length?(p=this.H_[d],p.coord=this.qt(g.index),p.label=this.Mu(g),p.weight=g.weight):(p={needAlignCoordinate:!1,coord:this.qt(g.index),label:this.Mu(g),weight:g.weight},this.H_.push(p)),this.q_>t/2&&!u?p.needAlignCoordinate=!1:p.needAlignCoordinate=f&&g.index<=c||h&&g.index>=l,d++}return this.H_.length=d,this.N_=this.H_,this.H_}bu(){this.E_=!0,this.dn(this.Ps.barSpacing),this.fn(this.Ps.rightOffset)}Su(e){this.E_=!0,this.R_=e,this.lu(),this.Z_()}xu(e,t){const n=this.cu(e),i=this.vu(),s=i+t*(i/10);this.dn(s),this.Ps.rightBarStaysOnScroll||this.fn(this.wu()+(n-this.cu(e)))}eo(e){this.wl&&this.oo(),this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Cu()))}ro(e){if(this.O_===null)return;const t=fd(this.Mo-e,0,this.Mo),n=fd(this.Mo-ct(this.ml),0,this.Mo);t!==0&&n!==0&&this.dn(this.O_.vu*t/n)}ho(){this.ml!==null&&(this.ml=null,this.Pu())}ao(e){this.wl===null&&this.O_===null&&(this.Ki()||(this.wl=e,this.Cu()))}lo(e){if(this.wl===null)return;const t=(this.wl-e)/this.vu();this.U_=ct(this.O_).wu+t,this.E_=!0,this.lu()}oo(){this.wl!==null&&(this.wl=null,this.Pu())}ku(){this.yu(this.Ps.rightOffset)}yu(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.U_,i=performance.now();this.ts._n({Tu:s=>(s-i)/t>=1,Ru:s=>{const o=(s-i)/t;return o>=1?e:n+(e-n)*o}})}kt(e,t){this.E_=!0,this.D_=e,this.V_.w_(e,t),this.lu()}Du(){return this.A_}Vu(){return this.z_}Iu(){return this.L_}ou(){return this.R_||0}Bu(e){const t=e.f_();this.mu(this.Mo/t),this.U_=e.bi()-this.ou(),this.lu(),this.E_=!0,this.ts.pu(),this.ts.ar()}Eu(){const e=this.eu(),t=this.ru();e!==null&&t!==null&&this.Bu(new q0(e,t+this.Ps.rightOffset))}Au(e){const t=new q0(e.from,e.to);this.Bu(t)}ns(e){return this.Sl.timeFormatter!==void 0?this.Sl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}j_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const t of e)for(const n of t.ma())this.F_.set(n,!0);this.W_++}gu(){const e=this.ts.N().handleScroll,t=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}eu(){return this.D_.length===0?null:0}ru(){return this.D_.length===0?null:this.D_.length-1}zu(e){return(this.Mo-1-e)/this.q_}cu(e){const t=this.zu(e),n=this.ou()+this.U_-t;return Math.round(1e6*n)/1e6}mu(e){const t=this.q_;this.q_=e,this.au(),t!==this.q_&&(this.E_=!0,this.Lu())}tu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Ou(hd.T_());const e=this.ou(),t=this.Mo/this.q_,n=this.U_+e,i=new q0(n-t+1,n);this.Ou(new hd(i))}au(){const e=fd(this.q_,this.Nu(),this.Fu());this.q_!==e&&(this.q_=e,this.E_=!0)}Fu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Nu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}lu(){const e=this.Wu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const t=this.Hu();this.U_>t&&(this.U_=t,this.E_=!0)}Wu(){const e=this.eu(),t=this.R_;return e===null||t===null?null:e-t-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Hu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Cu(){this.O_={vu:this.vu(),wu:this.wu()}}Pu(){this.O_=null}Mu(e){let t=this.I_.get(e.weight);return t===void 0&&(t=new jTe(n=>this.Uu(n),this.o_),this.I_.set(e.weight,t)),t.__(e)}Uu(e){return this.o_.formatTickmark(e,this.Sl)}Ou(e){const t=this.B_;this.B_=e,oL(t.k_(),this.B_.k_())||this.A_.p(),oL(t.y_(),this.B_.y_())||this.z_.p(),this.Lu()}Lu(){this.N_=null}X_(){this.Lu(),this.I_.clear()}Y_(){this.o_.updateFormatter(this.Sl)}Z_(){if(!this.Ps.fixLeftEdge)return;const e=this.eu();if(e===null)return;const t=this.Pe();if(t===null)return;const n=t.Uh()-e;if(n<0){const i=this.U_-n-1;this.fn(i)}this.au()}G_(){this.lu(),this.au()}du(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}fu(e){const t=function*(i){const s=Math.round(i),o=s<i;let a=1;for(;;)o?(yield s+a,yield s-a):(yield s-a,yield s+a),a++}(e),n=this.ru();for(;n;){const i=t.next().value;if(this.F_.get(i))return i;if(i<0||i>n)break}return e}}var aL,cL,lL,uL,fL;(function(r){r[r.OnTouchEnd=0]="OnTouchEnd",r[r.OnNextTap=1]="OnNextTap"})(aL||(aL={}));class WTe{constructor(e,t,n){this.$u=[],this.qu=[],this.Mo=0,this.Yu=null,this.ju=new Jn,this.Ku=new Jn,this.Xu=null,this.Zu=e,this.Ps=t,this.o_=n,this.xl=new GCe(this.Ps.layout.colorParsers),this.Gu=new WCe(this),this.uh=new HTe(this,t.timeScale,this.Ps.localization,n),this.Ct=new iTe(this,t.crosshair),this.Ju=new $Te(t.crosshair),t.addDefaultPane&&(this.Qu(0),this.$u[0].Bo(2)),this.tc=this.sc(0),this.nc=this.sc(1)}Bh(){this.ec(Ii.gn())}ar(){this.ec(Ii.wn())}Zh(){this.ec(new Ii(1))}Eh(e){const t=this.rc(e);this.ec(t)}hc(){return this.Yu}ac(e){if(this.Yu?.n_===e?.n_&&this.Yu?.e_?.Kn===e?.e_?.Kn)return;const t=this.Yu;this.Yu=e,t!==null&&this.Eh(t.n_),e!==null&&e.n_!==t?.n_&&this.Eh(e.n_)}N(){return this.Ps}hr(e){So(this.Ps,e),this.$u.forEach(t=>t.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.K_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.ju.p(),this.tc=this.sc(0),this.nc=this.sc(1),this.Bh()}lc(e,t,n=0){const i=this.$u[n];if(i===void 0)return;if(e==="left")return So(this.Ps,{leftPriceScale:t}),i.Ro({leftPriceScale:t}),this.ju.p(),void this.Bh();if(e==="right")return So(this.Ps,{rightPriceScale:t}),i.Ro({rightPriceScale:t}),this.ju.p(),void this.Bh();const s=this.oc(e,n);s!==null&&(s.Ft.hr(t),this.ju.p())}oc(e,t){const n=this.$u[t];if(n===void 0)return null;const i=n.Do(e);return i!==null?{Us:n,Ft:i}:null}Et(){return this.uh}$s(){return this.$u}_c(){return this.Ct}uc(){return this.Ku}cc(e,t){e.zl(t),this.pu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.$u.forEach(t=>t.Eo(e)),this.pu()}dc(e){this.$u.length!==1&&(Oi(e>=0&&e<this.$u.length,"Invalid pane index"),this.$u.splice(e,1),this.Bh())}fc(e,t){if(this.$u.length<2)return;Oi(e>=0&&e<this.$u.length,"Invalid pane index");const n=this.$u[e],i=this.$u.reduce((f,h)=>f+h.Io(),0),s=this.$u.reduce((f,h)=>f+h.$t(),0),o=s-30*(this.$u.length-1);t=Math.min(o,Math.max(30,t));const a=i/s,c=n.$t();n.Bo(t*a);let l=t-c,u=this.$u.length-1;for(const f of this.$u)if(f!==n){const h=Math.min(o,Math.max(30,f.$t()-l/u));l-=f.$t()-h,u-=1;const d=h*a;f.Bo(d)}this.Bh()}vc(e,t){Oi(e>=0&&e<this.$u.length&&t>=0&&t<this.$u.length,"Invalid pane index");const n=this.$u[e],i=this.$u[t];this.$u[e]=i,this.$u[t]=n,this.Bh()}mc(e,t){if(Oi(e>=0&&e<this.$u.length&&t>=0&&t<this.$u.length,"Invalid pane index"),e===t)return;const[n]=this.$u.splice(e,1);this.$u.splice(t,0,n),this.Bh()}Uo(e,t,n){e.Uo(t,n)}$o(e,t,n){e.$o(t,n),this.Ah(),this.ec(this.wc(e,2))}qo(e,t){e.qo(t),this.ec(this.wc(e,2))}Yo(e,t,n){t.Rl()||e.Yo(t,n)}jo(e,t,n){t.Rl()||(e.jo(t,n),this.Ah(),this.ec(this.wc(e,2)))}Ko(e,t){t.Rl()||(e.Ko(t),this.ec(this.wc(e,2)))}Zo(e,t){e.Zo(t),this.ec(this.wc(e,2))}gc(e){this.uh.eo(e)}Mc(e,t){const n=this.Et();if(n.Ki()||t===0)return;const i=n.Qi();e=Math.max(1,Math.min(e,i)),n.xu(e,t),this.pu()}bc(e){this.Sc(0),this.xc(e),this.Cc()}Pc(e){this.uh.ro(e),this.pu()}kc(){this.uh.ho(),this.ar()}Sc(e){this.uh.ao(e)}xc(e){this.uh.lo(e),this.pu()}Cc(){this.uh.oo(),this.ar()}js(){return this.qu}yc(e,t,n,i,s){this.Ct.Vs(e,t);let o=NaN,a=this.uh.uu(e,!0);const c=this.uh.Pe();c!==null&&(a=Math.min(Math.max(c.Uh(),a),c.bi()));const l=i.ys(),u=l.zt();if(u!==null&&(o=l.Ts(t,u)),o=this.Ju.Ma(o,a,i),this.Ct.As(a,o,i),this.Zh(),!s){const f=nY(i,e,t);this.ac(f&&{n_:f.n_,e_:f.e_,h_:f.h_||null}),this.Ku.p(this.Ct.Bt(),{x:e,y:t},n)}}Tc(e,t,n){const i=n.ys(),s=i.zt(),o=i.Nt(e,ct(s)),a=this.uh.J_(t,!0),c=this.uh.qt(ct(a));this.yc(c,o,null,n,!0)}Rc(e){this._c().Ls(),this.Zh(),e||this.Ku.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const t=this.Ct.Bs(),n=this.Ct.Es();this.yc(t,n,null,e)}this.Ct.Ns()}Dc(e,t,n){const i=this.uh.Rs(0);t!==void 0&&n!==void 0&&this.uh.kt(t,n);const s=this.uh.Rs(0),o=this.uh.ou(),a=this.uh.Pe();if(a!==null&&i!==null&&s!==null){const c=a.Te(o),l=this.o_.key(i)>this.o_.key(s),u=e!==null&&e>o&&!l,f=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,h=c&&(n!==void 0||f)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!h){const d=e-o;this.uh.fn(this.uh.wu()-d)}}this.uh.Su(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(n){return n instanceof sL}(e))return e;const t=this.$u.find(n=>n.Dt().includes(e));return t===void 0?null:t}pu(){this.$u.forEach(e=>e.Jo()),this.Ah()}m(){this.$u.forEach(e=>e.m()),this.$u.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Vc(){return this.Gu}Yn(){return this.Gu.N()}Vo(){return this.ju}Ic(e,t){const n=this.Qu(t);this.Bc(e,n),this.qu.push(e),this.qu.length===1?this.Bh():this.ar()}Ec(e){const t=this.Hn(e),n=this.qu.indexOf(e);Oi(n!==-1,"Series not found");const i=ct(t);this.qu.splice(n,1),i.io(e),e.m&&e.m(),this.uh.j_(),this.Ac(i)}Ih(e,t){const n=ct(this.Hn(e));n.io(e,!0),n.Jl(e,t,!0)}Eu(){const e=Ii.wn();e.rn(),this.ec(e)}zc(e){const t=Ii.wn();t.ln(e),this.ec(t)}cn(){const e=Ii.wn();e.cn(),this.ec(e)}dn(e){const t=Ii.wn();t.dn(e),this.ec(t)}fn(e){const t=Ii.wn();t.fn(e),this.ec(t)}_n(e){const t=Ii.wn();t._n(e),this.ec(t)}hn(){const e=Ii.wn();e.hn(),this.ec(e)}Lc(){return this.Ps.rightPriceScale.visible?"right":"left"}Oc(e,t){if(Oi(t>=0,"Index should be greater or equal to 0"),t===this.Nc(e))return;const n=ct(this.Hn(e));n.io(e);const i=this.Qu(t);this.Bc(e,i),n.ba().length===0&&this.Ac(n),this.Bh()}Fc(){return this.nc}$(){return this.tc}Ut(e){const t=this.nc,n=this.tc;if(t===n)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Xu===null||this.Xu.mr!==n||this.Xu.wr!==t)this.Xu={mr:n,wr:t,Wc:new Map};else{const s=this.Xu.Wc.get(e);if(s!==void 0)return s}const i=this.xl.tt(n,t,e/100);return this.Xu.Wc.set(e,i),i}Hc(e){return this.$u.indexOf(e)}Xi(){return this.xl}Uc(){return this.$c()}$c(e){const t=new sL(this.uh,this);this.$u.push(t);const n=e??this.$u.length-1,i=Ii.gn();return i.Qs(n,{tn:0,sn:!0}),this.ec(i),t}Qu(e){return Oi(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.$u.length,e))<this.$u.length?this.$u[e]:this.$c(e)}Nc(e){return this.$u.findIndex(t=>t.Oo().includes(e))}wc(e,t){const n=new Ii(t);if(e!==null){const i=this.$u.indexOf(e);n.Qs(i,{tn:t})}return n}rc(e,t){return t===void 0&&(t=2),this.wc(this.Hn(e),t)}ec(e){this.Zu&&this.Zu(e),this.$u.forEach(t=>t.i_().lr().kt())}Bc(e,t){const n=e.N().priceScaleId,i=n!==void 0?n:this.Lc();t.Jl(e,i),Fw(i)||e.hr(e.N())}sc(e){const t=this.Ps.layout;return t.background.type==="gradient"?e===0?t.background.topColor:t.background.bottomColor:t.background.color}Ac(e){!e.Lo()&&e.ba().length===0&&this.$u.length>1&&this.$u.splice(this.Hc(e),1)}}function iT(r){return!Md(r)&&!hm(r)}function iY(r){return Md(r)}(function(r){r[r.Disabled=0]="Disabled",r[r.Continuous=1]="Continuous",r[r.OnDataUpdate=2]="OnDataUpdate"})(cL||(cL={})),function(r){r[r.LastBar=0]="LastBar",r[r.LastVisible=1]="LastVisible"}(lL||(lL={})),function(r){r.Solid="solid",r.VerticalGradient="gradient"}(uL||(uL={})),function(r){r[r.Year=0]="Year",r[r.Month=1]="Month",r[r.DayOfMonth=2]="DayOfMonth",r[r.Time=3]="Time",r[r.TimeWithSeconds=4]="TimeWithSeconds"}(fL||(fL={}));const hL=r=>r.getUTCFullYear();function GTe(r,e,t){return e.replace(/yyyy/g,(n=>Zc(hL(n),4))(r)).replace(/yy/g,(n=>Zc(hL(n)%100,2))(r)).replace(/MMMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(r,t)).replace(/MMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(r,t)).replace(/MM/g,(n=>Zc((i=>i.getUTCMonth()+1)(n),2))(r)).replace(/dd/g,(n=>Zc((i=>i.getUTCDate())(n),2))(r))}class sY{constructor(e="yyyy-MM-dd",t="default"){this.qc=e,this.Yc=t}__(e){return GTe(e,this.qc,this.Yc)}}class YTe{constructor(e){this.jc=e||"%h:%m:%s"}__(e){return this.jc.replace("%h",Zc(e.getUTCHours(),2)).replace("%m",Zc(e.getUTCMinutes(),2)).replace("%s",Zc(e.getUTCSeconds(),2))}}const XTe={Kc:"yyyy-MM-dd",Xc:"%h:%m:%s",Zc:" ",Gc:"default"};class JTe{constructor(e={}){const t={...XTe,...e};this.Jc=new sY(t.Kc,t.Gc),this.Qc=new YTe(t.Xc),this.td=t.Zc}__(e){return`${this.Jc.__(e)}${this.td}${this.Qc.__(e)}`}}function hy(r){return 60*r*60*1e3}function m2(r){return 60*r*1e3}const dy=[{sd:(dL=1,1e3*dL),nd:10},{sd:m2(1),nd:20},{sd:m2(5),nd:21},{sd:m2(30),nd:22},{sd:hy(1),nd:30},{sd:hy(3),nd:31},{sd:hy(6),nd:32},{sd:hy(12),nd:33}];var dL;function pL(r,e){if(r.getUTCFullYear()!==e.getUTCFullYear())return 70;if(r.getUTCMonth()!==e.getUTCMonth())return 60;if(r.getUTCDate()!==e.getUTCDate())return 50;for(let t=dy.length-1;t>=0;--t)if(Math.floor(e.getTime()/dy[t].sd)!==Math.floor(r.getTime()/dy[t].sd))return dy[t].nd;return 0}function y2(r){let e=r;if(hm(r)&&(e=Mk(r)),!iT(e))throw new Error("time must be of type BusinessDay");const t=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{ed:Math.round(t.getTime()/1e3),rd:e}}function gL(r){if(!iY(r))throw new Error("time must be of type isUTCTimestamp");return{ed:r}}function Mk(r){const e=new Date(r);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${r}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function mL(r){hm(r.time)&&(r.time=Mk(r.time))}class yL{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(t){t.forEach(mL)}(e):mL(e)}createConverterToInternalObj(e){return ct(function(t){return t.length===0?null:iT(t[0].time)||hm(t[0].time)?y2:gL}(e))}key(e){return typeof e=="object"&&"ed"in e?e.ed:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const t=e;return t.rd===void 0?new Date(1e3*t.ed).getTime():new Date(Date.UTC(t.rd.year,t.rd.month-1,t.rd.day)).getTime()}convertHorzItemToInternal(e){return iY(t=e)?gL(t):iT(t)?y2(t):y2(Mk(t));var t}updateFormatter(e){if(!this.Ps)return;const t=e.dateFormat;this.Ps.timeScale.timeVisible?this.hd=new JTe({Kc:t,Xc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Zc:"   ",Gc:e.locale}):this.hd=new sY(t,e.locale)}formatHorzItem(e){const t=e;return this.hd.__(new Date(1e3*t.ed))}formatTickmark(e,t){const n=function(s,o,a){switch(s){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),i=this.Ps.timeScale;if(i.tickMarkFormatter!==void 0){const s=i.tickMarkFormatter(e.originalTime,n,t.locale);if(s!==null)return s}return function(s,o,a){const c={};switch(o){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const l=s.rd===void 0?new Date(1e3*s.ed):new Date(Date.UTC(s.rd.year,s.rd.month-1,s.rd.day));return new Date(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()).toLocaleString(a,c)}(e.time,n,t.locale)}maxTickMarkWeight(e){let t=e.reduce(KTe,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){(function(n,i=0){if(n.length===0)return;let s=i===0?null:n[i-1].time.ed,o=s!==null?new Date(1e3*s):null,a=0;for(let c=i;c<n.length;++c){const l=n[c],u=new Date(1e3*l.time.ed);o!==null&&(l.timeWeight=pL(u,o)),a+=l.time.ed-(s||l.time.ed),s=l.time.ed,o=u}if(i===0&&n.length>1){const c=Math.ceil(a/(n.length-1)),l=new Date(1e3*(n[0].time.ed-c));n[0].timeWeight=pL(new Date(1e3*n[0].time.ed),l)}})(e,t)}static ad(e){return So({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Nd=typeof window<"u";function vL(){return!!Nd&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function v2(){return!!Nd&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function sT(r){return r+r%2}function QTe(r){Nd&&window.chrome!==void 0&&r.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class qw{constructor(e,t,n){this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.pd=null,this.vd=!1,this.md=null,this.wd=null,this.gd=!1,this.Md=!1,this.bd=!1,this.Sd=null,this.xd=null,this.Cd=null,this.Pd=null,this.kd=null,this.yd=null,this.Td=null,this.Rd=0,this.Dd=!1,this.Vd=!1,this.Id=!1,this.Bd=0,this.Ed=null,this.Ad=!v2(),this.zd=i=>{this.Ld(i)},this.Od=i=>{if(this.Nd(i)){const s=this.Fd(i);if(++this.ud,this.dd&&this.ud>1){const{Wd:o}=this.Hd(Va(i),this.fd);o<30&&!this.bd&&this.Ud(s,this.qd.$d),this.Yd()}}else{const s=this.Fd(i);if(++this.ld,this.od&&this.ld>1){const{Wd:o}=this.Hd(Va(i),this._d);o<5&&!this.Md&&this.jd(s,this.qd.Kd),this.Xd()}}},this.Zd=e,this.qd=t,this.Ps=n,this.Gd()}m(){this.Sd!==null&&(this.Sd(),this.Sd=null),this.xd!==null&&(this.xd(),this.xd=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.kd!==null&&(this.kd(),this.kd=null),this.yd!==null&&(this.yd(),this.yd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.Jd(),this.Xd()}Qd(e){this.Pd&&this.Pd();const t=this.tf.bind(this);if(this.Pd=()=>{this.Zd.removeEventListener("mousemove",t)},this.Zd.addEventListener("mousemove",t),this.Nd(e))return;const n=this.Fd(e);this.jd(n,this.qd.if),this.Ad=!0}Xd(){this.od!==null&&clearTimeout(this.od),this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Yd(){this.dd!==null&&clearTimeout(this.dd),this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}tf(e){if(this.Id||this.wd!==null||this.Nd(e))return;const t=this.Fd(e);this.jd(t,this.qd.sf),this.Ad=!0}nf(e){const t=b2(e.changedTouches,ct(this.Ed));if(t===null||(this.Bd=py(e),this.Td!==null)||this.Vd)return;this.Dd=!0;const n=this.Hd(Va(t),ct(this.wd)),{ef:i,rf:s,Wd:o}=n;if(this.gd||!(o<5)){if(!this.gd){const a=.5*i,c=s>=a&&!this.Ps.hf(),l=a>s&&!this.Ps.af();c||l||(this.Vd=!0),this.gd=!0,this.bd=!0,this.Jd(),this.Yd()}if(!this.Vd){const a=this.Fd(e,t);this.Ud(a,this.qd.lf),Rh(e)}}}_f(e){if(e.button!==0)return;const t=this.Hd(Va(e),ct(this.md)),{Wd:n}=t;if(n>=5&&(this.Md=!0,this.Xd()),this.Md){const i=this.Fd(e);this.jd(i,this.qd.uf)}}Hd(e,t){const n=Math.abs(t._t-e._t),i=Math.abs(t.ut-e.ut);return{ef:n,rf:i,Wd:n+i}}cf(e){let t=b2(e.changedTouches,ct(this.Ed));if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t===null)return;this.Ed=null,this.Bd=py(e),this.Jd(),this.wd=null,this.yd&&(this.yd(),this.yd=null);const n=this.Fd(e,t);if(this.Ud(n,this.qd.df),++this.ud,this.dd&&this.ud>1){const{Wd:i}=this.Hd(Va(t),this.fd);i<30&&!this.bd&&this.Ud(n,this.qd.$d),this.Yd()}else this.bd||(this.Ud(n,this.qd.ff),this.qd.ff&&Rh(e));this.ud===0&&Rh(e),e.touches.length===0&&this.vd&&(this.vd=!1,Rh(e))}Ld(e){if(e.button!==0)return;const t=this.Fd(e);if(this.md=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),vL()&&this.Zd.ownerDocument.documentElement.removeEventListener("mouseleave",this.zd),!this.Nd(e))if(this.jd(t,this.qd.pf),++this.ld,this.od&&this.ld>1){const{Wd:n}=this.Hd(Va(e),this._d);n<5&&!this.Md&&this.jd(t,this.qd.Kd),this.Xd()}else this.Md||this.jd(t,this.qd.vf)}Jd(){this.pd!==null&&(clearTimeout(this.pd),this.pd=null)}mf(e){if(this.Ed!==null)return;const t=e.changedTouches[0];this.Ed=t.identifier,this.Bd=py(e);const n=this.Zd.ownerDocument.documentElement;this.bd=!1,this.gd=!1,this.Vd=!1,this.wd=Va(t),this.yd&&(this.yd(),this.yd=null);{const s=this.nf.bind(this),o=this.cf.bind(this);this.yd=()=>{n.removeEventListener("touchmove",s),n.removeEventListener("touchend",o)},n.addEventListener("touchmove",s,{passive:!1}),n.addEventListener("touchend",o,{passive:!1}),this.Jd(),this.pd=setTimeout(this.wf.bind(this,e),240)}const i=this.Fd(e,t);this.Ud(i,this.qd.gf),this.dd||(this.ud=0,this.dd=setTimeout(this.Yd.bind(this),500),this.fd=Va(t))}Mf(e){if(e.button!==0)return;const t=this.Zd.ownerDocument.documentElement;vL()&&t.addEventListener("mouseleave",this.zd),this.Md=!1,this.md=Va(e),this.kd&&(this.kd(),this.kd=null);{const i=this._f.bind(this),s=this.Ld.bind(this);this.kd=()=>{t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",s)},t.addEventListener("mousemove",i),t.addEventListener("mouseup",s)}if(this.Id=!0,this.Nd(e))return;const n=this.Fd(e);this.jd(n,this.qd.bf),this.od||(this.ld=0,this.od=setTimeout(this.Xd.bind(this),500),this._d=Va(e))}Gd(){this.Zd.addEventListener("mouseenter",this.Qd.bind(this)),this.Zd.addEventListener("touchcancel",this.Jd.bind(this));{const e=this.Zd.ownerDocument,t=n=>{this.qd.Sf&&(n.composed&&this.Zd.contains(n.composedPath()[0])||n.target&&this.Zd.contains(n.target)||this.qd.Sf())};this.xd=()=>{e.removeEventListener("touchstart",t)},this.Sd=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}v2()&&(this.Cd=()=>{this.Zd.removeEventListener("dblclick",this.Od)},this.Zd.addEventListener("dblclick",this.Od)),this.Zd.addEventListener("mouseleave",this.xf.bind(this)),this.Zd.addEventListener("touchstart",this.mf.bind(this),{passive:!0}),QTe(this.Zd),this.Zd.addEventListener("mousedown",this.Mf.bind(this)),this.Cf(),this.Zd.addEventListener("touchmove",()=>{},{passive:!1})}Cf(){this.qd.Pf===void 0&&this.qd.kf===void 0&&this.qd.yf===void 0||(this.Zd.addEventListener("touchstart",e=>this.Tf(e.touches),{passive:!0}),this.Zd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Td!==null&&this.qd.kf!==void 0){const t=bL(e.touches[0],e.touches[1])/this.Rd;this.qd.kf(this.Td,t),Rh(e)}},{passive:!1}),this.Zd.addEventListener("touchend",e=>{this.Tf(e.touches)}))}Tf(e){e.length===1&&(this.Dd=!1),e.length!==2||this.Dd||this.vd?this.Rf():this.Df(e)}Df(e){const t=this.Zd.getBoundingClientRect()||{left:0,top:0};this.Td={_t:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,ut:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.Rd=bL(e[0],e[1]),this.qd.Pf!==void 0&&this.qd.Pf(),this.Jd()}Rf(){this.Td!==null&&(this.Td=null,this.qd.yf!==void 0&&this.qd.yf())}xf(e){if(this.Pd&&this.Pd(),this.Nd(e)||!this.Ad)return;const t=this.Fd(e);this.jd(t,this.qd.Vf),this.Ad=!v2()}wf(e){const t=b2(e.touches,ct(this.Ed));if(t===null)return;const n=this.Fd(e,t);this.Ud(n,this.qd.If),this.bd=!0,this.vd=!0}Nd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:py(e)<this.Bd+500}Ud(e,t){t&&t.call(this.qd,e)}jd(e,t){t&&t.call(this.qd,e)}Fd(e,t){const n=t||e,i=this.Zd.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-i.left,localY:n.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Bf:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Ef:e.type,Af:n.target,a_:e.view,zf:()=>{e.type!=="touchstart"&&Rh(e)}}}}function bL(r,e){const t=r.clientX-e.clientX,n=r.clientY-e.clientY;return Math.sqrt(t*t+n*n)}function Rh(r){r.cancelable&&r.preventDefault()}function Va(r){return{_t:r.pageX,ut:r.pageY}}function py(r){return r.timeStamp||performance.now()}function b2(r,e){for(let t=0;t<r.length;++t)if(r[t].identifier===e)return r[t];return null}class ZTe{constructor(e,t,n){this.Lf=null,this.Of=null,this.Nf=!0,this.Ff=null,this.Wf=e,this.Hf=e.Uf()[t],this.$f=e.Uf()[n],this.qf=document.createElement("tr"),this.qf.style.height="1px",this.Yf=document.createElement("td"),this.Yf.style.position="relative",this.Yf.style.padding="0",this.Yf.style.margin="0",this.Yf.setAttribute("colspan","3"),this.jf(),this.qf.appendChild(this.Yf),this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf=null,this.Of=null)}m(){this.Of!==null&&this.Of.m()}Xf(){return this.qf}Zf(){return un({width:this.Hf.Zf().width,height:1})}Gf(){return un({width:this.Hf.Gf().width,height:1*window.devicePixelRatio})}Jf(e,t,n){const i=this.Gf();e.fillStyle=this.Wf.N().layout.panes.separatorColor,e.fillRect(t,n,i.width,i.height)}kt(){this.jf(),this.Wf.N().layout.panes.enableResize!==this.Nf&&(this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf!==null&&(this.Yf.removeChild(this.Lf.Qf),this.Yf.removeChild(this.Lf.tp),this.Lf=null),this.Of!==null&&(this.Of.m(),this.Of=null)))}Kf(){const e=document.createElement("div"),t=e.style;t.position="fixed",t.display="none",t.zIndex="49",t.top="0",t.left="0",t.width="100%",t.height="100%",t.cursor="row-resize",this.Yf.appendChild(e);const n=document.createElement("div"),i=n.style;i.position="absolute",i.zIndex="50",i.top="-4px",i.height="9px",i.width="100%",i.backgroundColor="",i.cursor="row-resize",this.Yf.appendChild(n);const s={if:this.ip.bind(this),Vf:this.sp.bind(this),bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this)};this.Of=new qw(n,s,{hf:()=>!1,af:()=>!0}),this.Lf={tp:n,Qf:e}}jf(){this.Yf.style.background=this.Wf.N().layout.panes.separatorColor}ip(e){this.Lf!==null&&(this.Lf.tp.style.backgroundColor=this.Wf.N().layout.panes.separatorHoverColor)}sp(e){this.Lf!==null&&this.Ff===null&&(this.Lf.tp.style.backgroundColor="")}np(e){if(this.Lf===null)return;const t=this.Hf.hp().Io()+this.$f.hp().Io(),n=t/(this.Hf.Zf().height+this.$f.Zf().height),i=30*n;t<=2*i||(this.Ff={ap:e.pageY,lp:this.Hf.hp().Io(),op:t-i,_p:t,up:n,cp:i},this.Lf.Qf.style.display="block")}ep(e){const t=this.Ff;if(t===null)return;const n=(e.pageY-t.ap)*t.up,i=fd(t.lp+n,t.cp,t.op);this.Hf.hp().Bo(i),this.$f.hp().Bo(t._p-i),this.Wf.Qt().Bh()}rp(e){this.Ff!==null&&this.Lf!==null&&(this.Ff=null,this.Lf.Qf.style.display="none")}}function w2(r,e){return r.dp-e.dp}function x2(r,e,t){const n=(r.dp-e.dp)/(r.wt-e.wt);return Math.sign(n)*Math.min(Math.abs(n),t)}class eRe{constructor(e,t,n,i){this.fp=null,this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=0,this.Mp=0,this.bp=e,this.Sp=t,this.xp=n,this.Mn=i}Cp(e,t){if(this.fp!==null){if(this.fp.wt===t)return void(this.fp.dp=e);if(Math.abs(this.fp.dp-e)<this.Mn)return}this.mp=this.vp,this.vp=this.pp,this.pp=this.fp,this.fp={wt:t,dp:e}}le(e,t){if(this.fp===null||this.pp===null||t-this.fp.wt>50)return;let n=0;const i=x2(this.fp,this.pp,this.Sp),s=w2(this.fp,this.pp),o=[i],a=[s];if(n+=s,this.vp!==null){const l=x2(this.pp,this.vp,this.Sp);if(Math.sign(l)===Math.sign(i)){const u=w2(this.pp,this.vp);if(o.push(l),a.push(u),n+=u,this.mp!==null){const f=x2(this.vp,this.mp,this.Sp);if(Math.sign(f)===Math.sign(i)){const h=w2(this.vp,this.mp);o.push(f),a.push(h),n+=h}}}}let c=0;for(let l=0;l<o.length;++l)c+=a[l]/n*o[l];Math.abs(c)<this.bp||(this.wp={dp:e,wt:t},this.Mp=c,this.gp=function(l,u){const f=Math.log(u);return Math.log(1*f/-l)/f}(Math.abs(c),this.xp))}Ru(e){const t=ct(this.wp),n=e-t.wt;return t.dp+this.Mp*(Math.pow(this.xp,n)-1)/Math.log(this.xp)}Tu(e){return this.wp===null||this.Pp(e)===this.gp}Pp(e){const t=e-ct(this.wp).wt;return Math.min(t,this.gp)}}class tRe{constructor(e,t){this.kp=void 0,this.yp=void 0,this.Tp=void 0,this.ps=!1,this.Rp=e,this.Dp=t,this.Vp()}kt(){this.Vp()}Ip(){this.kp&&this.Rp.removeChild(this.kp),this.yp&&this.Rp.removeChild(this.yp),this.kp=void 0,this.yp=void 0}Bp(){return this.ps!==this.Ep()||this.Tp!==this.Ap()}Ap(){return this.Dp.Qt().Xi().J(this.Dp.N().layout.textColor)>160?"dark":"light"}Ep(){return this.Dp.N().layout.attributionLogo}zp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Vp(){this.Bp()&&(this.Ip(),this.ps=this.Ep(),this.ps&&(this.Tp=this.Ap(),this.yp=document.createElement("style"),this.yp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.zp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Tp==="dark"),this.Rp.appendChild(this.yp),this.Rp.appendChild(this.kp)))}}function $f(r,e){const t=ct(r.ownerDocument).createElement("canvas");r.appendChild(t);const n=qCe(t,{options:{allowResizeObserver:!0},transform:(i,s)=>({width:Math.max(i.width,s.width),height:Math.max(i.height,s.height)})});return n.resizeCanvasElement(e),n}function Mf(r){r.width=1,r.height=1,r.getContext("2d")?.clearRect(0,0,1,1)}function oT(r,e,t,n){r.ih&&r.ih(e,t,n)}function Ky(r,e,t,n){r.nt(e,t,n)}function aT(r,e,t,n){const i=r(t,n);for(const s of i){const o=s.Tt(n);o!==null&&e(o)}}function _2(r,e){return t=>function(n){return n.Ft!==void 0}(t)?(t.Ft()?.wa()??"")!==e?[]:t.ta?.(r)??[]:[]}function wL(r,e,t,n){if(!r.length)return;let i=0;const s=r[0].$t(n,!0);let o=e===1?t/2-(r[0].Fi()-s/2):r[0].Fi()-s/2-t/2;o=Math.max(0,o);for(let a=1;a<r.length;a++){const c=r[a],l=r[a-1],u=l.$t(n,!1),f=c.Fi(),h=l.Fi();if(e===1?f>h-u:f<h+u){const d=h-u*e;c.Wi(d);const g=d-e*u/2;if((e===1?g<0:g>t)&&o>0){const p=e===1?-1-g:g-t,m=Math.min(p,o);for(let y=i;y<r.length;y++)r[y].Wi(r[y].Fi()+e*m);o-=m}}else i=a,o=e===1?h-u-f:f-(h+u)}}class xL{constructor(e,t,n,i){this.Yi=null,this.Lp=null,this.Op=!1,this.Np=new tb(200),this.Fp=null,this.Wp=0,this.Hp=!1,this.Up=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.qp=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.Pt=e,this.Ps=t,this.bl=t.layout,this.Gu=n,this.Yp=i==="left",this.jp=_2("normal",i),this.Kp=_2("top",i),this.Xp=_2("bottom",i),this.Yf=document.createElement("div"),this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Yf.style.width="25px",this.Yf.style.left="0",this.Yf.style.position="relative",this.Zp=$f(this.Yf,un({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const s=this.Zp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Gp=$f(this.Yf,un({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const o=this.Gp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),Sf:this.Jp.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this),Kd:this.Qp.bind(this),$d:this.Qp.bind(this),if:this.tv.bind(this),Vf:this.sp.bind(this)};this.Of=new qw(this.Gp.canvasElement,a,{hf:()=>!this.Ps.handleScroll.vertTouchDrag,af:()=>!0})}m(){this.Of.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Mf(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Mf(this.Zp.canvasElement),this.Zp.dispose(),this.Yi!==null&&this.Yi.no().u(this),this.Yi=null}Xf(){return this.Yf}P(){return this.bl.fontSize}iv(){const e=this.Gu.N();return this.Fp!==e.k&&(this.Np.In(),this.Fp=e.k),e}sv(){if(this.Yi===null)return 0;let e=0;const t=this.iv(),n=ct(this.Zp.canvasElement.getContext("2d",{colorSpace:this.Pt.$p().N().layout.colorSpace}));n.save();const i=this.Yi.Va();n.font=this.nv(),i.length>0&&(e=Math.max(this.Np.Vi(n,i[0].Ga),this.Np.Vi(n,i[i.length-1].Ga)));const s=this.ev();for(let l=s.length;l--;){const u=this.Np.Vi(n,s[l].ri());u>e&&(e=u)}const o=this.Yi.zt();if(o!==null&&this.Lp!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const l=this.Yi.Ts(1,o),u=this.Yi.Ts(this.Lp.height-2,o);e=Math.max(e,this.Np.Vi(n,this.Yi.Zi(Math.floor(Math.min(l,u))+.11111111111111,o)),this.Np.Vi(n,this.Yi.Zi(Math.ceil(Math.max(l,u))-.11111111111111,o)))}var a;n.restore();const c=e||34;return sT(Math.ceil(t.S+t.C+t.I+t.B+5+c))}rv(e){this.Lp!==null&&bf(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`)}hv(){return ct(this.Lp).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.no().u(this),this.Yi=e,e.no().i(this.ul.bind(this),this))}Ft(){return this.Yi}In(){const e=this.Pt.hp();this.Pt.$p().Qt().Zo(e,ct(this.Ft()))}av(e){if(this.Lp===null)return;const t={colorSpace:this.Pt.$p().N().layout.colorSpace};if(e!==1){this.lv(),this.Zp.applySuggestedBitmapSize();const i=Of(this.Zp,t);i!==null&&(i.useBitmapCoordinateSpace(s=>{this.ov(s),this._v(s)}),this.Pt.uv(i,this.Xp),this.cv(i),this.Pt.uv(i,this.jp),this.dv(i))}this.Gp.applySuggestedBitmapSize();const n=Of(this.Gp,t);n!==null&&(n.useBitmapCoordinateSpace(({context:i,bitmapSize:s})=>{i.clearRect(0,0,s.width,s.height)}),this.fv(n),this.Pt.uv(n,this.Kp))}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}kt(){this.Yi?.Va()}np(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),n=this.Pt.hp();this.Op=!0,t.Uo(n,this.Yi,e.localY)}ep(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),n=this.Pt.hp(),i=this.Yi;t.$o(n,i,e.localY)}Jp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.$p().Qt(),t=this.Pt.hp(),n=this.Yi;this.Op&&(this.Op=!1,e.qo(t,n))}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),n=this.Pt.hp();this.Op=!1,t.qo(n,this.Yi)}Qp(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.In()}tv(e){this.Yi!==null&&(!this.Pt.$p().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Vl()||this.pv(1))}sp(e){this.pv(0)}ev(){const e=[],t=this.Yi===null?void 0:this.Yi;return(n=>{for(let i=0;i<n.length;++i){const s=n[i].Ws(this.Pt.hp(),t);for(let o=0;o<s.length;o++)e.push(s[o])}})(this.Pt.hp().Dt()),e}ov({context:e,bitmapSize:t}){const{width:n,height:i}=t,s=this.Pt.hp().Qt(),o=s.$(),a=s.Fc();o===a?Nw(e,0,0,n,i,o):HG(e,0,0,n,i,o,a)}_v({context:e,bitmapSize:t,horizontalPixelRatio:n}){if(this.Lp===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const i=Math.max(1,Math.floor(this.iv().S*n));let s;s=this.Yp?t.width-i:0,e.fillRect(s,0,i,t.height)}cv(e){if(this.Lp===null||this.Yi===null)return;const t=this.Yi.Va(),n=this.Yi.N(),i=this.iv(),s=this.Yp?this.Lp.width-i.C:0;n.borderVisible&&n.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:c})=>{o.fillStyle=n.borderColor;const l=Math.max(1,Math.floor(c)),u=Math.floor(.5*c),f=Math.round(i.C*a);o.beginPath();for(const h of t)o.rect(Math.floor(s*a),Math.round(h.ka*c)-u,f,l);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.nv(),o.fillStyle=n.textColor??this.bl.textColor,o.textAlign=this.Yp?"right":"left",o.textBaseline="middle";const a=this.Yp?Math.round(s-i.I):Math.round(s+i.C+i.I),c=t.map(l=>this.Np.Di(o,l.Ga));for(let l=t.length;l--;){const u=t[l];o.fillText(u.Ga,a,u.ka+c[l])}})}lv(){if(this.Lp===null||this.Yi===null)return;let e=this.Lp.height/2;const t=[],n=this.Yi.Dt().slice(),i=this.Pt.hp(),s=this.iv();this.Yi===i.$n()&&this.Pt.hp().Dt().forEach(c=>{i.Un(c)&&n.push(c)});const o=this.Yi.ba()[0],a=this.Yi;n.forEach(c=>{const l=c.Ws(i,a);l.forEach(u=>{u.Wi(null),u.Hi()&&t.push(u)}),o===c&&l.length>0&&(e=l[0].Bi())}),t.forEach(c=>c.Wi(c.Bi())),this.Yi.N().alignLabels&&this.vv(t,s,e)}vv(e,t,n){if(this.Lp===null)return;const i=e.filter(o=>o.Bi()<=n),s=e.filter(o=>o.Bi()>n);i.sort((o,a)=>a.Bi()-o.Bi()),i.length&&s.length&&s.push(i[0]),s.sort((o,a)=>o.Bi()-a.Bi());for(const o of e){const a=Math.floor(o.$t(t)/2),c=o.Bi();c>-a&&c<a&&o.Wi(a),c>this.Lp.height-a&&c<this.Lp.height+a&&o.Wi(this.Lp.height-a)}wL(i,1,this.Lp.height,t),wL(s,-1,this.Lp.height,t)}dv(e){if(this.Lp===null)return;const t=this.ev(),n=this.iv(),i=this.Yp?"right":"left";t.forEach(s=>{s.Ui()&&s.Tt(ct(this.Yi)).nt(e,n,this.Np,i)})}fv(e){if(this.Lp===null||this.Yi===null)return;const t=this.Pt.$p().Qt(),n=[],i=this.Pt.hp(),s=t._c().Ws(i,this.Yi);s.length&&n.push(s);const o=this.iv(),a=this.Yp?"right":"left";n.forEach(c=>{c.forEach(l=>{l.Tt(ct(this.Yi)).nt(e,o,this.Np,a)})})}pv(e){this.Yf.style.cursor=e===1?"ns-resize":"default"}ul(){const e=this.sv();this.Wp<e&&this.Pt.$p().Qt().Bh(),this.Wp=e}nv(){return eb(this.bl.fontSize,this.bl.fontFamily)}}function rRe(r,e){return r.Jh?.(e)??[]}function _L(r,e){return r.Fs?.(e)??[]}function SL(r,e){return r.us?.(e)??[]}function nRe(r,e){return r.Xh?.(e)??[]}class Bk{constructor(e,t){this.Lp=un({width:0,height:0}),this.mv=null,this.wv=null,this.gv=null,this.Mv=null,this.bv=!1,this.Sv=new Jn,this.xv=new Jn,this.Cv=0,this.Pv=!1,this.kv=null,this.yv=!1,this.Tv=null,this.Rv=null,this.Hp=!1,this.Up=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.qp=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.Dp=e,this.Dv=t,this.Dv.t_().i(this.Vv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.Bv=document.createElement("td"),this.Bv.style.padding="0",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Iv.appendChild(n),this.Zp=$f(n,un({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const i=this.Zp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Gp=$f(n,un({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.qf=document.createElement("tr"),this.qf.appendChild(this.Bv),this.qf.appendChild(this.Iv),this.qf.appendChild(this.Ev),this.Av(),this.Of=new qw(this.Gp.canvasElement,this,{hf:()=>this.kv===null&&!this.Dp.N().handleScroll.vertTouchDrag,af:()=>this.kv===null&&!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.mv!==null&&this.mv.m(),this.wv!==null&&this.wv.m(),this.gv=null,this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Mf(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Mf(this.Zp.canvasElement),this.Zp.dispose(),this.Dv!==null&&(this.Dv.t_().u(this),this.Dv.m()),this.Of.m()}hp(){return ct(this.Dv)}zv(e){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=e,this.Dv!==null&&this.Dv.t_().i(Bk.prototype.Vv.bind(this),this,!0),this.Av(),this.Dp.Uf().indexOf(this)===this.Dp.Uf().length-1?(this.gv=this.gv??new tRe(this.Iv,this.Dp),this.gv.kt()):(this.gv?.Ip(),this.gv=null)}$p(){return this.Dp}Xf(){return this.qf}Av(){if(this.Dv!==null&&(this.Lv(),this.ts().js().length!==0)){if(this.mv!==null){const e=this.Dv.Wo();this.mv._s(ct(e))}if(this.wv!==null){const e=this.Dv.Ho();this.wv._s(ct(e))}}}Ov(){this.mv!==null&&this.mv.kt(),this.wv!==null&&this.wv.kt()}Io(){return this.Dv!==null?this.Dv.Io():0}Bo(e){this.Dv&&this.Dv.Bo(e)}if(e){if(!this.Dv)return;this.Nv();const t=e.localX,n=e.localY;this.Fv(t,n,e)}bf(e){this.Nv(),this.Wv(),this.Fv(e.localX,e.localY,e)}sf(e){if(!this.Dv)return;this.Nv();const t=e.localX,n=e.localY;this.Fv(t,n,e)}vf(e){this.Dv!==null&&(this.Nv(),this.Hv(e))}Kd(e){this.Dv!==null&&this.Uv(this.xv,e)}$d(e){this.Kd(e)}uf(e){this.Nv(),this.$v(e),this.Fv(e.localX,e.localY,e)}pf(e){this.Dv!==null&&(this.Nv(),this.Pv=!1,this.qv(e))}ff(e){this.Dv!==null&&this.Hv(e)}If(e){if(this.Pv=!0,this.kv===null){const t={x:e.localX,y:e.localY};this.Yv(t,t,e)}}Vf(e){this.Dv!==null&&(this.Nv(),this.Dv.Qt().ac(null),this.jv())}Kv(){return this.Sv}Xv(){return this.xv}Pf(){this.Cv=1,this.ts().hn()}kf(e,t){if(!this.Dp.N().handleScale.pinch)return;const n=5*(t-this.Cv);this.Cv=t,this.ts().Mc(e._t,n)}gf(e){this.Pv=!1,this.yv=this.kv!==null,this.Wv();const t=this.ts()._c();this.kv!==null&&t.Vt()&&(this.Tv={x:t.si(),y:t.ni()},this.kv={x:e.localX,y:e.localY})}lf(e){if(this.Dv===null)return;const t=e.localX,n=e.localY;if(this.kv===null)this.$v(e);else{this.yv=!1;const i=ct(this.Tv),s=i.x+(t-this.kv.x),o=i.y+(n-this.kv.y);this.Fv(s,o,e)}}df(e){this.$p().N().trackingMode.exitMode===0&&(this.yv=!0),this.Zv(),this.qv(e)}jn(e,t){const n=this.Dv;return n===null?null:nY(n,e,t)}Gv(e,t){ct(t==="left"?this.mv:this.wv).rv(un({width:e,height:this.Lp.height}))}Zf(){return this.Lp}rv(e){bf(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Jv(){const e=ct(this.Dv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const t of e.ba())if(e.Un(t)){const n=t.Ft();n!==null&&e.Fo(n),t.Ns()}for(const t of e.s_())t.Ns()}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}av(e){if(e===0||this.Dv===null)return;e>1&&this.Jv(),this.mv!==null&&this.mv.av(e),this.wv!==null&&this.wv.av(e);const t={colorSpace:this.Dp.N().layout.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const i=Of(this.Zp,t);i!==null&&(i.useBitmapCoordinateSpace(s=>{this.ov(s)}),this.Dv&&(this.Qv(i,rRe),this.tm(i),this.Qv(i,_L),this.Qv(i,SL)))}this.Gp.applySuggestedBitmapSize();const n=Of(this.Gp,t);n!==null&&(n.useBitmapCoordinateSpace(({context:i,bitmapSize:s})=>{i.clearRect(0,0,s.width,s.height)}),this.im(n),this.Qv(n,nRe),this.Qv(n,SL))}sm(){return this.mv}nm(){return this.wv}uv(e,t){this.Qv(e,t)}Vv(){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=null}Hv(e){this.Uv(this.Sv,e)}Uv(e,t){const n=t.localX,i=t.localY;e.v()&&e.p(this.ts().Et().uu(n),{x:n,y:i},t)}ov({context:e,bitmapSize:t}){const{width:n,height:i}=t,s=this.ts(),o=s.$(),a=s.Fc();o===a?Nw(e,0,0,n,i,a):HG(e,0,0,n,i,o,a)}tm(e){const t=ct(this.Dv),n=t.i_().lr().Tt(t);n!==null&&n.nt(e,!1)}im(e){this.rm(e,_L,Ky,this.ts()._c())}Qv(e,t){const n=ct(this.Dv),i=n.Dt(),s=n.s_();for(const o of s)this.rm(e,t,oT,o);for(const o of i)this.rm(e,t,oT,o);for(const o of s)this.rm(e,t,Ky,o);for(const o of i)this.rm(e,t,Ky,o)}rm(e,t,n,i){const s=ct(this.Dv),o=s.Qt().hc(),a=o!==null&&o.n_===i,c=o!==null&&a&&o.e_!==void 0?o.e_.Xn:void 0;aT(t,l=>n(l,e,a,c),i,s)}Lv(){if(this.Dv===null)return;const e=this.Dp,t=this.Dv.Wo().N().visible,n=this.Dv.Ho().N().visible;t||this.mv===null||(this.Bv.removeChild(this.mv.Xf()),this.mv.m(),this.mv=null),n||this.wv===null||(this.Ev.removeChild(this.wv.Xf()),this.wv.m(),this.wv=null);const i=e.Qt().Vc();t&&this.mv===null&&(this.mv=new xL(this,e.N(),i,"left"),this.Bv.appendChild(this.mv.Xf())),n&&this.wv===null&&(this.wv=new xL(this,e.N(),i,"right"),this.Ev.appendChild(this.wv.Xf()))}hm(e){return e.Bf&&this.Pv||this.kv!==null}am(e){return Math.max(0,Math.min(e,this.Lp.width-1))}lm(e){return Math.max(0,Math.min(e,this.Lp.height-1))}Fv(e,t,n){this.ts().yc(this.am(e),this.lm(t),n,ct(this.Dv))}jv(){this.ts().Rc()}Zv(){this.yv&&(this.kv=null,this.jv())}Yv(e,t,n){this.kv=e,this.yv=!1,this.Fv(t.x,t.y,n);const i=this.ts()._c();this.Tv={x:i.si(),y:i.ni()}}ts(){return this.Dp.Qt()}qv(e){if(!this.bv)return;const t=this.ts(),n=this.hp();if(t.Ko(n,n.ys()),this.Mv=null,this.bv=!1,t.Cc(),this.Rv!==null){const i=performance.now(),s=t.Et();this.Rv.le(s.wu(),i),this.Rv.Tu(i)||t._n(this.Rv)}}Nv(){this.kv=null}Wv(){if(this.Dv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ct(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Dv.ys().Ki()&&this.ts().Et().Ki()}}$v(e){if(this.Dv===null)return;const t=this.ts(),n=t.Et();if(n.Ki())return;const i=this.Dp.N(),s=i.handleScroll,o=i.kineticScroll;if((!s.pressedMouseMove||e.Bf)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!e.Bf))return;const a=this.Dv.ys(),c=performance.now();if(this.Mv!==null||this.hm(e)||(this.Mv={x:e.clientX,y:e.clientY,ed:c,om:e.localX,_m:e.localY}),this.Mv!==null&&!this.bv&&(this.Mv.x!==e.clientX||this.Mv.y!==e.clientY)){if(e.Bf&&o.touch||!e.Bf&&o.mouse){const l=n.vu();this.Rv=new eRe(.2/l,7/l,.997,15/l),this.Rv.Cp(n.wu(),this.Mv.ed)}else this.Rv=null;a.Ki()||t.Yo(this.Dv,a,e.localY),t.Sc(e.localX),this.bv=!0}this.bv&&(a.Ki()||t.jo(this.Dv,a,e.localY),t.xc(e.localX),this.Rv!==null&&this.Rv.Cp(n.wu(),c))}}class EL{constructor(e,t,n,i,s){this.xt=!0,this.Lp=un({width:0,height:0}),this.Up=()=>this.av(3),this.Yp=e==="left",this.Gu=n.Vc,this.Ps=t,this.um=i,this.dm=s,this.Yf=document.createElement("div"),this.Yf.style.width="25px",this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Zp=$f(this.Yf,un({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up)}m(){this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Mf(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.Yf}Zf(){return this.Lp}rv(e){bf(this.Lp,e)||(this.Lp=e,this.Zp.resizeCanvasElement(e),this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.xt=!0)}av(e){if(e<3&&!this.xt||this.Lp.width===0||this.Lp.height===0)return;this.xt=!1,this.Zp.applySuggestedBitmapSize();const t=Of(this.Zp,{colorSpace:this.Ps.layout.colorSpace});t!==null&&t.useBitmapCoordinateSpace(n=>{this.ov(n),this._v(n)})}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}_v({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(!this.um())return;e.fillStyle=this.Ps.timeScale.borderColor;const s=Math.floor(this.Gu.N().S*n),o=Math.floor(this.Gu.N().S*i),a=this.Yp?t.width-s:0;e.fillRect(a,0,s,o)}ov({context:e,bitmapSize:t}){Nw(e,0,0,t.width,t.height,this.dm())}}function Nk(r){return e=>e.ia?.(r)??[]}const iRe=Nk("normal"),sRe=Nk("top"),oRe=Nk("bottom");class aRe{constructor(e,t){this.fm=null,this.pm=null,this.M=null,this.vm=!1,this.Lp=un({width:0,height:0}),this.wm=new Jn,this.Np=new tb(5),this.Hp=!1,this.Up=()=>{this.Hp||this.Dp.Qt().ar()},this.qp=()=>{this.Hp||this.Dp.Qt().ar()},this.Dp=e,this.o_=t,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.gm=document.createElement("td"),this.gm.style.padding="0",this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.Yf=document.createElement("td"),this.Yf.style.height="25px",this.Yf.style.padding="0",this.bm=document.createElement("div"),this.bm.style.width="100%",this.bm.style.height="100%",this.bm.style.position="relative",this.bm.style.overflow="hidden",this.Yf.appendChild(this.bm),this.Zp=$f(this.bm,un({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const n=this.Zp.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Gp=$f(this.bm,un({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.kp.appendChild(this.gm),this.kp.appendChild(this.Yf),this.kp.appendChild(this.Mm),this.Sm(),this.Dp.Qt().Vo().i(this.Sm.bind(this),this),this.Of=new qw(this.Gp.canvasElement,this,{hf:()=>!0,af:()=>!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.Of.m(),this.fm!==null&&this.fm.m(),this.pm!==null&&this.pm.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Mf(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Mf(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.kp}xm(){return this.fm}Cm(){return this.pm}bf(e){if(this.vm)return;this.vm=!0;const t=this.Dp.Qt();!t.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&t.gc(e.localX)}gf(e){this.bf(e)}Sf(){const e=this.Dp.Qt();!e.Et().Ki()&&this.vm&&(this.vm=!1,this.Dp.N().handleScale.axisPressedMouseMove.time&&e.kc())}uf(e){const t=this.Dp.Qt();!t.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&t.Pc(e.localX)}lf(e){this.uf(e)}pf(){this.vm=!1;const e=this.Dp.Qt();e.Et().Ki()&&!this.Dp.N().handleScale.axisPressedMouseMove.time||e.kc()}df(){this.pf()}Kd(){this.Dp.N().handleScale.axisDoubleClickReset.time&&this.Dp.Qt().cn()}$d(){this.Kd()}if(){this.Dp.Qt().N().handleScale.axisPressedMouseMove.time&&this.pv(1)}Vf(){this.pv(0)}Zf(){return this.Lp}Pm(){return this.wm}km(e,t,n){bf(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.wm.p(e)),this.fm!==null&&this.fm.rv(un({width:t,height:e.height})),this.pm!==null&&this.pm.rv(un({width:n,height:e.height}))}ym(){const e=this.Tm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Rm)}kt(){this.Dp.Qt().Et().Va()}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}av(e){if(e===0)return;const t={colorSpace:this.Ps.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const i=Of(this.Zp,t);i!==null&&(i.useBitmapCoordinateSpace(s=>{this.ov(s),this._v(s),this.Dm(i,oRe)}),this.cv(i),this.Dm(i,iRe)),this.fm!==null&&this.fm.av(e),this.pm!==null&&this.pm.av(e)}this.Gp.applySuggestedBitmapSize();const n=Of(this.Gp,t);n!==null&&(n.useBitmapCoordinateSpace(({context:i,bitmapSize:s})=>{i.clearRect(0,0,s.width,s.height)}),this.Vm([...this.Dp.Qt().js(),this.Dp.Qt()._c()],n),this.Dm(n,sRe))}Dm(e,t){const n=this.Dp.Qt().js();for(const i of n)aT(t,s=>oT(s,e,!1,void 0),i,void 0);for(const i of n)aT(t,s=>Ky(s,e,!1,void 0),i,void 0)}ov({context:e,bitmapSize:t}){Nw(e,0,0,t.width,t.height,this.Dp.Qt().Fc())}_v({context:e,bitmapSize:t,verticalPixelRatio:n}){if(this.Dp.N().timeScale.borderVisible){e.fillStyle=this.Im();const i=Math.max(1,Math.floor(this.Tm().S*n));e.fillRect(0,0,t.width,i)}}cv(e){const t=this.Dp.Qt().Et(),n=t.Va();if(!n||n.length===0)return;const i=this.o_.maxTickMarkWeight(n),s=this.Tm(),o=t.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:c,verticalPixelRatio:l})=>{a.strokeStyle=this.Im(),a.fillStyle=this.Im();const u=Math.max(1,Math.floor(c)),f=Math.floor(.5*c);a.beginPath();const h=Math.round(s.C*l);for(let d=n.length;d--;){const g=Math.round(n[d].coord*c);a.rect(g-f,0,u,h)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const c=s.S+s.C+s.A+s.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.nv();for(const l of n)if(l.weight<i){const u=l.needAlignCoordinate?this.Bm(a,l.coord,l.label):l.coord;a.fillText(l.label,u,c)}this.Dp.N().timeScale.allowBoldLabels&&(a.font=this.Em());for(const l of n)if(l.weight>=i){const u=l.needAlignCoordinate?this.Bm(a,l.coord,l.label):l.coord;a.fillText(l.label,u,c)}})}Bm(e,t,n){const i=this.Np.Vi(e,n),s=i/2,o=Math.floor(t-s)+.5;return o<0?t+=Math.abs(0-o):o+i>this.Lp.width&&(t-=Math.abs(this.Lp.width-(o+i))),t}Vm(e,t){const n=this.Tm();for(const i of e)for(const s of i.cs())s.Tt().nt(t,n)}Im(){return this.Dp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}nv(){return eb(this.F(),this.Ps.fontFamily)}Em(){return eb(this.F(),this.Ps.fontFamily,"bold")}Tm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new tb,Rm:0});const e=this.M,t=this.nv();if(e.k!==t){const n=this.F();e.P=n,e.k=t,e.A=3*n/12,e.V=3*n/12,e.Ji=9*n/12,e.L=0,e.Rm=4*n/12,e.Gi.In()}return this.M}pv(e){this.Yf.style.cursor=e===1?"ew-resize":"default"}Sm(){const e=this.Dp.Qt(),t=e.N();t.leftPriceScale.visible||this.fm===null||(this.gm.removeChild(this.fm.Xf()),this.fm.m(),this.fm=null),t.rightPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Xf()),this.pm.m(),this.pm=null);const n={Vc:this.Dp.Qt().Vc()},i=()=>t.leftPriceScale.borderVisible&&e.Et().N().borderVisible,s=()=>e.Fc();t.leftPriceScale.visible&&this.fm===null&&(this.fm=new EL("left",t,n,i,s),this.gm.appendChild(this.fm.Xf())),t.rightPriceScale.visible&&this.pm===null&&(this.pm=new EL("right",t,n,i,s),this.Mm.appendChild(this.pm.Xf()))}}const cRe=!!Nd&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(r=>r.brand.includes("Chromium"))&&!!Nd&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class lRe{constructor(e,t,n){var i;this.Am=[],this.zm=[],this.Lm=0,this.sl=0,this.Mo=0,this.Om=0,this.Nm=0,this.Fm=null,this.Wm=!1,this.Sv=new Jn,this.xv=new Jn,this.Ku=new Jn,this.Hm=null,this.Um=null,this.Rp=e,this.Ps=t,this.o_=n,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(i=this.kp).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.$m=document.createElement("table"),this.$m.setAttribute("cellspacing","0"),this.kp.appendChild(this.$m),this.qm=this.Ym.bind(this),S2(this.Ps)&&this.jm(!0),this.ts=new WTe(this.Zu.bind(this),this.Ps,n),this.Qt().uc().i(this.Km.bind(this),this),this.Xm=new aRe(this,this.o_),this.$m.appendChild(this.Xm.Xf());const s=t.autoSize&&this.Zm();let o=this.Ps.width,a=this.Ps.height;if(s||o===0||a===0){const c=e.getBoundingClientRect();o=o||c.width,a=a||c.height}this.Gm(o,a),this.Jm(),e.appendChild(this.kp),this.Qm(),this.ts.Et().Iu().i(this.ts.Bh.bind(this.ts),this),this.ts.Vo().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}Uf(){return this.Am}tw(){return this.Xm}m(){this.jm(!1),this.Lm!==0&&window.cancelAnimationFrame(this.Lm),this.ts.uc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.Am)this.$m.removeChild(e.Xf()),e.Kv().u(this),e.Xv().u(this),e.m();this.Am=[];for(const e of this.zm)this.iw(e);this.zm=[],ct(this.Xm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Ku.m(),this.Sv.m(),this.xv.m(),this.sw()}Gm(e,t,n=!1){if(this.sl===t&&this.Mo===e)return;const i=function(a){const c=Math.floor(a.width),l=Math.floor(a.height);return un({width:c-c%2,height:l-l%2})}(un({width:e,height:t}));this.sl=i.height,this.Mo=i.width;const s=this.sl+"px",o=this.Mo+"px";ct(this.kp).style.height=s,ct(this.kp).style.width=o,this.$m.style.height=s,this.$m.style.width=o,n?this.nw(Ii.gn(),performance.now()):this.ts.Bh()}av(e){e===void 0&&(e=Ii.gn());for(let t=0;t<this.Am.length;t++)this.Am[t].av(e.en(t).tn);this.Ps.timeScale.visible&&this.Xm.av(e.nn())}hr(e){const t=S2(this.Ps);this.ts.hr(e);const n=S2(this.Ps);n!==t&&this.jm(n),e.layout?.panes&&this.ew(),this.Qm(),this.rw(e)}Kv(){return this.Sv}Xv(){return this.xv}uc(){return this.Ku}hw(){this.Fm!==null&&(this.nw(this.Fm,performance.now()),this.Fm=null);const e=this.aw(null),t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=ct(t.getContext("2d"));return this.aw(n),t}lw(e){return e==="left"&&!this.ow()||e==="right"&&!this._w()||this.Am.length===0?0:ct(e==="left"?this.Am[0].sm():this.Am[0].nm()).hv()}uw(){return this.Ps.autoSize&&this.Hm!==null}tp(){return this.kp}cw(e){this.Um=e,this.Um?this.tp().style.setProperty("cursor",e):this.tp().style.removeProperty("cursor")}dw(){return this.Um}fw(e){return Hs(this.Am[e]).Zf()}ew(){this.zm.forEach(e=>{e.kt()})}rw(e){(e.autoSize!==void 0||!this.Hm||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Hm&&this.Zm(),e.autoSize===!1&&this.Hm!==null&&this.sw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Gm(e.width||this.Mo,e.height||this.sl))}aw(e){let t=0,n=0;const i=this.Am[0],s=(a,c)=>{let l=0;for(let u=0;u<this.Am.length;u++){const f=this.Am[u],h=ct(a==="left"?f.sm():f.nm()),d=h.Gf();if(e!==null&&h.Jf(e,c,l),l+=d.height,u<this.Am.length-1){const g=this.zm[u],p=g.Gf();e!==null&&g.Jf(e,c,l),l+=p.height}}};this.ow()&&(s("left",0),t+=ct(i.sm()).Gf().width);for(let a=0;a<this.Am.length;a++){const c=this.Am[a],l=c.Gf();if(e!==null&&c.Jf(e,t,n),n+=l.height,a<this.Am.length-1){const u=this.zm[a],f=u.Gf();e!==null&&u.Jf(e,t,n),n+=f.height}}t+=i.Gf().width,this._w()&&(s("right",t),t+=ct(i.nm()).Gf().width);const o=(a,c,l)=>{ct(a==="left"?this.Xm.xm():this.Xm.Cm()).Jf(ct(e),c,l)};if(this.Ps.timeScale.visible){const a=this.Xm.Gf();if(e!==null){let c=0;this.ow()&&(o("left",c,n),c=ct(i.sm()).Gf().width),this.Xm.Jf(e,c,n),c+=a.width,this._w()&&o("right",c,n)}n+=a.height}return un({width:t,height:n})}pw(){let e=0,t=0,n=0;for(const m of this.Am)this.ow()&&(t=Math.max(t,ct(m.sm()).sv(),this.Ps.leftPriceScale.minimumWidth)),this._w()&&(n=Math.max(n,ct(m.nm()).sv(),this.Ps.rightPriceScale.minimumWidth)),e+=m.Io();t=sT(t),n=sT(n);const i=this.Mo,s=this.sl,o=Math.max(i-t-n,0),a=1*this.zm.length,c=this.Ps.timeScale.visible;let l=c?Math.max(this.Xm.ym(),this.Ps.timeScale.minimumHeight):0;var u;l=(u=l)+u%2;const f=a+l,h=s<f?0:s-f,d=h/e;let g=0;const p=window.devicePixelRatio||1;for(let m=0;m<this.Am.length;++m){const y=this.Am[m];y.zv(this.ts.$s()[m]);let v=0,b=0;b=m===this.Am.length-1?Math.ceil((h-g)*p)/p:Math.round(y.Io()*d*p)/p,v=Math.max(b,2),g+=v,y.rv(un({width:o,height:v})),this.ow()&&y.Gv(t,"left"),this._w()&&y.Gv(n,"right"),y.hp()&&this.ts.cc(y.hp(),v)}this.Xm.km(un({width:c?o:0,height:l}),c?t:0,c?n:0),this.ts.Eo(o),this.Om!==t&&(this.Om=t),this.Nm!==n&&(this.Nm=n)}jm(e){e?this.kp.addEventListener("wheel",this.qm,{passive:!1}):this.kp.removeEventListener("wheel",this.qm)}mw(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return cRe?1/window.devicePixelRatio:1}Ym(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const t=this.mw(e),n=t*e.deltaX/100,i=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.Ps.handleScale.mouseWheel){const s=Math.sign(i)*Math.min(1,Math.abs(i)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().Mc(o,s)}n!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().bc(-80*n)}nw(e,t){const n=e.nn();n===3&&this.ww(),n!==3&&n!==2||(this.gw(e),this.Mw(e,t),this.Xm.kt(),this.Am.forEach(i=>{i.Ov()}),this.Fm?.nn()===3&&(this.Fm.vn(e),this.ww(),this.gw(this.Fm),this.Mw(this.Fm,t),e=this.Fm,this.Fm=null)),this.av(e)}Mw(e,t){for(const n of e.pn())this.mn(n,t)}gw(e){const t=this.ts.$s();for(let n=0;n<t.length;n++)e.en(n).sn&&t[n].Go()}mn(e,t){const n=this.ts.Et();switch(e.an){case 0:n.Eu();break;case 1:n.Au(e.Wt);break;case 2:n.dn(e.Wt);break;case 3:n.fn(e.Wt);break;case 4:n.bu();break;case 5:e.Wt.Tu(t)||n.fn(e.Wt.Ru(t))}}Zu(e){this.Fm!==null?this.Fm.vn(e):this.Fm=e,this.Wm||(this.Wm=!0,this.Lm=window.requestAnimationFrame(t=>{if(this.Wm=!1,this.Lm=0,this.Fm!==null){const n=this.Fm;this.Fm=null,this.nw(n,t);for(const i of n.pn())if(i.an===5&&!i.Wt.Tu(t)){this.Qt()._n(i.Wt);break}}}))}ww(){this.Jm()}iw(e){this.$m.removeChild(e.Xf()),e.m()}Jm(){const e=this.ts.$s(),t=e.length,n=this.Am.length;for(let i=t;i<n;i++){const s=Hs(this.Am.pop());this.$m.removeChild(s.Xf()),s.Kv().u(this),s.Xv().u(this),s.m();const o=this.zm.pop();o!==void 0&&this.iw(o)}for(let i=n;i<t;i++){const s=new Bk(this,e[i]);if(s.Kv().i(this.bw.bind(this,s),this),s.Xv().i(this.Sw.bind(this,s),this),this.Am.push(s),i>0){const o=new ZTe(this,i-1,i);this.zm.push(o),this.$m.insertBefore(o.Xf(),this.Xm.Xf())}this.$m.insertBefore(s.Xf(),this.Xm.Xf())}for(let i=0;i<t;i++){const s=e[i],o=this.Am[i];o.hp()!==s?o.zv(s):o.Av()}this.Qm(),this.pw()}xw(e,t,n,i){const s=new Map;e!==null&&this.ts.js().forEach(f=>{const h=f.Xs().Fr(e);h!==null&&s.set(f,h)});let o;if(e!==null){const f=this.ts.Et().ss(e)?.originalTime;f!==void 0&&(o=f)}const a=this.Qt().hc(),c=a!==null&&a.n_ instanceof zw?a.n_:void 0,l=a!==null&&a.e_!==void 0?a.e_.Kn:void 0,u=this.Cw(i);return{Pw:o,Re:e??void 0,kw:t??void 0,yw:u!==-1?u:void 0,Tw:c,Rw:s,Dw:l,Vw:n??void 0}}Cw(e){let t=-1;if(e)t=this.Am.indexOf(e);else{const n=this.Qt()._c().Us();n!==null&&(t=this.Qt().$s().indexOf(n))}return t}bw(e,t,n,i){this.Sv.p(()=>this.xw(t,n,i,e))}Sw(e,t,n,i){this.xv.p(()=>this.xw(t,n,i,e))}Km(e,t,n){this.cw(this.Qt().hc()?.h_??null),this.Ku.p(()=>this.xw(e,t,n))}Qm(){const e=this.Ps.timeScale.visible?"":"none";this.Xm.Xf().style.display=e}ow(){return this.Am[0].hp().Wo().N().visible}_w(){return this.Am[0].hp().Ho().N().visible}Zm(){return"ResizeObserver"in window&&(this.Hm=new ResizeObserver(e=>{const t=e[e.length-1];t&&this.Gm(t.contentRect.width,t.contentRect.height)}),this.Hm.observe(this.Rp,{box:"border-box"}),!0)}sw(){this.Hm!==null&&this.Hm.disconnect(),this.Hm=null}}function S2(r){return!!(r.handleScroll.mouseWheel||r.handleScale.mouseWheel)}function uRe(r){return r.open===void 0&&r.value===void 0}function fRe(r){return function(e){return e.open!==void 0}(r)||function(e){return e.value!==void 0}(r)}function AL(r,e,t,n){const i=t.value,s={Re:e,wt:r,Wt:[i,i,i,i],Pw:n};return t.color!==void 0&&(s.R=t.color),s}function hRe(r,e,t,n){const i=t.value,s={Re:e,wt:r,Wt:[i,i,i,i],Pw:n};return t.lineColor!==void 0&&(s.vt=t.lineColor),t.topColor!==void 0&&(s.mr=t.topColor),t.bottomColor!==void 0&&(s.wr=t.bottomColor),s}function dRe(r,e,t,n){const i=t.value,s={Re:e,wt:r,Wt:[i,i,i,i],Pw:n};return t.topLineColor!==void 0&&(s.gr=t.topLineColor),t.bottomLineColor!==void 0&&(s.Mr=t.bottomLineColor),t.topFillColor1!==void 0&&(s.br=t.topFillColor1),t.topFillColor2!==void 0&&(s.Sr=t.topFillColor2),t.bottomFillColor1!==void 0&&(s.Cr=t.bottomFillColor1),t.bottomFillColor2!==void 0&&(s.Pr=t.bottomFillColor2),s}function pRe(r,e,t,n){const i={Re:e,wt:r,Wt:[t.open,t.high,t.low,t.close],Pw:n};return t.color!==void 0&&(i.R=t.color),i}function gRe(r,e,t,n){const i={Re:e,wt:r,Wt:[t.open,t.high,t.low,t.close],Pw:n};return t.color!==void 0&&(i.R=t.color),t.borderColor!==void 0&&(i.Ht=t.borderColor),t.wickColor!==void 0&&(i.vr=t.wickColor),i}function mRe(r,e,t,n,i){const s=Hs(i)(t),o=Math.max(...s),a=Math.min(...s),c=s[s.length-1],l=[c,o,a,c],{time:u,color:f,...h}=t;return{Re:e,wt:r,Wt:l,Pw:n,se:h,R:f}}function t0(r){return r.Wt!==void 0}function IL(r,e){return e.customValues!==void 0&&(r.Iw=e.customValues),r}function Vu(r){return(e,t,n,i,s,o)=>function(a,c){return c?c(a):uRe(a)}(n,o)?IL({wt:e,Re:t,Pw:i},n):IL(r(e,t,n,i,s),n)}function CL(r){return{Candlestick:Vu(gRe),Bar:Vu(pRe),Area:Vu(hRe),Baseline:Vu(dRe),Histogram:Vu(AL),Line:Vu(AL),Custom:Vu(mRe)}[r]}function TL(r){return{Re:0,Bw:new Map,Hh:r}}function RL(r,e){if(r!==void 0&&r.length!==0)return{Ew:e.key(r[0].wt),Aw:e.key(r[r.length-1].wt)}}function kL(r){let e;return r.forEach(t=>{e===void 0&&(e=t.Pw)}),Hs(e)}class yRe{constructor(e){this.zw=new Map,this.Lw=new Map,this.Ow=new Map,this.Nw=[],this.o_=e}m(){this.zw.clear(),this.Lw.clear(),this.Ow.clear(),this.Nw=[]}Fw(e,t){let n=this.zw.size!==0,i=!1;const s=this.Lw.get(e);if(s!==void 0)if(this.Lw.size===1)n=!1,i=!0,this.zw.clear();else for(const c of this.Nw)c.pointData.Bw.delete(e)&&(i=!0);let o=[];if(t.length!==0){const c=t.map(d=>d.time),l=this.o_.createConverterToInternalObj(t),u=CL(e.Rr()),f=e.da(),h=e.pa();o=t.map((d,g)=>{const p=l(d.time),m=this.o_.key(p);let y=this.zw.get(m);y===void 0&&(y=TL(p),this.zw.set(m,y),i=!0);const v=u(p,y.Re,d,c[g],f,h);return y.Bw.set(e,v),v})}n&&this.Ww(),this.Hw(e,o);let a=-1;if(i){const c=[];this.zw.forEach(l=>{c.push({timeWeight:0,time:l.Hh,pointData:l,originalTime:kL(l.Bw)})}),c.sort((l,u)=>this.o_.key(l.time)-this.o_.key(u.time)),a=this.Uw(c)}return this.$w(e,a,function(c,l,u){const f=RL(c,u),h=RL(l,u);if(f!==void 0&&h!==void 0)return{qw:!1,zh:f.Aw>=h.Aw&&f.Ew>=h.Ew}}(this.Lw.get(e),s,this.o_))}Ec(e){return this.Fw(e,[])}Yw(e,t,n){const i=t;(function(m){m.Pw===void 0&&(m.Pw=m.time)})(i),this.o_.preprocessData(t);const s=this.o_.createConverterToInternalObj([t])(t.time),o=this.Ow.get(e);if(!n&&o!==void 0&&this.o_.key(s)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${s}`);let a=this.zw.get(this.o_.key(s));if(n&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const c=a===void 0;a===void 0&&(a=TL(s),this.zw.set(this.o_.key(s),a));const l=CL(e.Rr()),u=e.da(),f=e.pa(),h=l(s,a.Re,t,i.Pw,u,f);a.Bw.set(e,h),n?this.jw(e,h,a.Re):this.Kw(e,h);const d={zh:t0(h),qw:n};if(!c)return this.$w(e,-1,d);const g={timeWeight:0,time:a.Hh,pointData:a,originalTime:kL(a.Bw)},p=Bd(this.Nw,this.o_.key(g.time),(m,y)=>this.o_.key(m.time)<y);this.Nw.splice(p,0,g);for(let m=p;m<this.Nw.length;++m)E2(this.Nw[m].pointData,m);return this.o_.fillWeightsForPoints(this.Nw,p),this.$w(e,p,d)}Kw(e,t){let n=this.Lw.get(e);n===void 0&&(n=[],this.Lw.set(e,n));const i=n.length!==0?n[n.length-1]:null;i===null||this.o_.key(t.wt)>this.o_.key(i.wt)?t0(t)&&n.push(t):t0(t)?n[n.length-1]=t:n.splice(-1,1),this.Ow.set(e,t.wt)}jw(e,t,n){const i=this.Lw.get(e);if(i===void 0)return;const s=Bd(i,n,(o,a)=>o.Re<a);t0(t)?i[s]=t:i.splice(s,1)}Hw(e,t){t.length!==0?(this.Lw.set(e,t.filter(t0)),this.Ow.set(e,t[t.length-1].wt)):(this.Lw.delete(e),this.Ow.delete(e))}Ww(){for(const e of this.Nw)e.pointData.Bw.size===0&&this.zw.delete(this.o_.key(e.time))}Uw(e){let t=-1;for(let n=0;n<this.Nw.length&&n<e.length;++n){const i=this.Nw[n],s=e[n];if(this.o_.key(i.time)!==this.o_.key(s.time)){t=n;break}s.timeWeight=i.timeWeight,E2(s.pointData,n)}if(t===-1&&this.Nw.length!==e.length&&(t=Math.min(this.Nw.length,e.length)),t===-1)return-1;for(let n=t;n<e.length;++n)E2(e[n].pointData,n);return this.o_.fillWeightsForPoints(e,t),this.Nw=e,t}Xw(){if(this.Lw.size===0)return null;let e=0;return this.Lw.forEach(t=>{t.length!==0&&(e=Math.max(e,t[t.length-1].Re))}),e}$w(e,t,n){const i={Oo:new Map,Et:{ou:this.Xw()}};if(t!==-1)this.Lw.forEach((s,o)=>{i.Oo.set(o,{se:s,Zw:o===e?n:void 0})}),this.Lw.has(e)||i.Oo.set(e,{se:[],Zw:n}),i.Et.Gw=this.Nw,i.Et.Jw=t;else{const s=this.Lw.get(e);i.Oo.set(e,{se:s||[],Zw:n})}return i}}function E2(r,e){r.Re=e,r.Bw.forEach(t=>{t.Re=e})}function vRe(r,e){return r.wt<e}function bRe(r,e){return e<r.wt}function wRe(r,e,t){const n=e.Uh(),i=e.bi(),s=Bd(r,n,vRe),o=ZG(r,i,bRe);if(!t)return{from:s,to:o};let a=s,c=o;return s>0&&s<r.length&&r[s].wt>=n&&(a=s-1),o>0&&o<r.length&&r[o-1].wt<=i&&(c=o+1),{from:a,to:c}}class oY{constructor(e,t,n){this.Qw=!0,this.tg=!0,this.ig=!0,this.sg=[],this.ng=null,this.Jn=e,this.Qn=t,this.eg=n}kt(e){this.Qw=!0,e==="data"&&(this.tg=!0),e==="options"&&(this.ig=!0)}Tt(){return this.Jn.Vt()?(this.rg(),this.ng===null?null:this.hg):null}ag(){this.sg=this.sg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}lg(){this.ng=null}rg(){this.tg&&(this.og(),this.tg=!1),this.ig&&(this.ag(),this.ig=!1),this.Qw&&(this._g(),this.Qw=!1)}_g(){const e=this.Jn.Ft(),t=this.Qn.Et();if(this.lg(),t.Ki()||e.Ki())return;const n=t.Pe();if(n===null||this.Jn.Xs().zr()===0)return;const i=this.Jn.zt();i!==null&&(this.ng=wRe(this.sg,n,this.eg),this.ug(e,t,i.Wt),this.cg())}}class xRe{constructor(e,t){this.dg=e,this.Yi=t}nt(e,t,n){this.dg.draw(e,this.Yi,t,n)}}class _Re extends oY{constructor(e,t,n){super(e,t,!1),this.sh=n,this.hg=new xRe(this.sh.renderer(),i=>{const s=e.zt();return s===null?null:e.Ft().Nt(i,s.Wt)})}fa(e){return this.sh.priceValueBuilder(e)}va(e){return this.sh.isWhitespace(e)}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>({wt:t.Re,_t:NaN,...e.Dr(t.Re),fg:t.se}))}ug(e,t){t._u(this.sg,nT(this.ng))}cg(){this.sh.update({bars:this.sg.map(SRe),barSpacing:this.Qn.Et().vu(),visibleRange:this.ng},this.Jn.N())}}function SRe(r){return{x:r._t,time:r.wt,originalData:r.fg,barColor:r.cr}}const ERe={color:"#2196f3"},ARe=(r,e,t)=>{const n=eu(t);return new _Re(r,e,n)};function Lk(r){const e={value:r.Wt[3],time:r.Pw};return r.Iw!==void 0&&(e.customValues=r.Iw),e}function PL(r){const e=Lk(r);return r.R!==void 0&&(e.color=r.R),e}function IRe(r){const e=Lk(r);return r.vt!==void 0&&(e.lineColor=r.vt),r.mr!==void 0&&(e.topColor=r.mr),r.wr!==void 0&&(e.bottomColor=r.wr),e}function CRe(r){const e=Lk(r);return r.gr!==void 0&&(e.topLineColor=r.gr),r.Mr!==void 0&&(e.bottomLineColor=r.Mr),r.br!==void 0&&(e.topFillColor1=r.br),r.Sr!==void 0&&(e.topFillColor2=r.Sr),r.Cr!==void 0&&(e.bottomFillColor1=r.Cr),r.Pr!==void 0&&(e.bottomFillColor2=r.Pr),e}function aY(r){const e={open:r.Wt[0],high:r.Wt[1],low:r.Wt[2],close:r.Wt[3],time:r.Pw};return r.Iw!==void 0&&(e.customValues=r.Iw),e}function TRe(r){const e=aY(r);return r.R!==void 0&&(e.color=r.R),e}function RRe(r){const e=aY(r),{R:t,Ht:n,vr:i}=r;return t!==void 0&&(e.color=t),n!==void 0&&(e.borderColor=n),i!==void 0&&(e.wickColor=i),e}function cT(r){return{Area:IRe,Line:PL,Baseline:CRe,Histogram:PL,Bar:TRe,Candlestick:RRe,Custom:kRe}[r]}function kRe(r){const e=r.Pw;return{...r.se,time:e}}const PRe={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},ORe={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},DRe={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:VG,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},A2={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},$Re={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function OL(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:DRe,crosshair:PRe,grid:ORe,overlayPriceScales:{...A2},leftPriceScale:{...A2,visible:!1},rightPriceScale:{...A2,visible:!0},timeScale:$Re,localization:{locale:Nd?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class cY{constructor(e,t,n){this.Wf=e,this.pg=t,this.vg=n??0}applyOptions(e){this.Wf.Qt().lc(this.pg,e,this.vg)}options(){return this.Yi().N()}width(){return Fw(this.pg)?this.Wf.lw(this.pg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Wl(new ws(e.from,e.to))}getVisibleRange(){const e=this.Yi().Qe();return e===null?null:{from:e.$e(),to:e.qe()}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return ct(this.Wf.Qt().oc(this.pg,this.vg)).Ft}}class MRe{constructor(e,t,n,i){this.Wf=e,this.Pt=n,this.mg=t,this.wg=i}getHeight(){return this.Pt.$t()}setHeight(e){const t=this.Wf.Qt(),n=t.Hc(this.Pt);t.fc(n,e)}getStretchFactor(){return this.Pt.Io()}setStretchFactor(e){this.Pt.Bo(e),this.Wf.Qt().Bh()}paneIndex(){return this.Wf.Qt().Hc(this.Pt)}moveTo(e){const t=this.paneIndex();t!==e&&(Oi(e>=0&&e<this.Wf.Uf().length,"Invalid pane index"),this.Wf.Qt().mc(t,e))}getSeries(){return this.Pt.Oo().map(e=>this.mg(e))??[]}getHTMLElement(){const e=this.Wf.Uf();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Xf():null}attachPrimitive(e){this.Pt.ua(e),e.attached&&e.attached({chart:this.wg,requestUpdate:()=>this.Pt.Qt().Bh()})}detachPrimitive(e){this.Pt.ca(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new cY(this.Wf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,t={},n=0){return this.wg.addCustomSeries(e,t,n)}addSeries(e,t={}){return this.wg.addSeries(e,t,this.paneIndex())}}const BRe={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class DL{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}gg(){return this.ir}}class NRe{constructor(e,t,n,i,s,o){this.Mg=new Jn,this.Jn=e,this.bg=t,this.Sg=n,this.o_=s,this.wg=i,this.xg=o}m(){this.Mg.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(e){const t=this.Jn.zt();return t===null?null:this.Jn.Ft().Nt(e,t.Wt)}coordinateToPrice(e){const t=this.Jn.zt();return t===null?null:this.Jn.Ft().Ts(e,t.Wt)}barsInLogicalRange(e){if(e===null)return null;const t=new hd(new q0(e.from,e.to)).k_(),n=this.Jn.Xs();if(n.Ki())return null;const i=n.Fr(t.Uh(),1),s=n.Fr(t.bi(),-1),o=ct(n.Lr()),a=ct(n.Ks());if(i!==null&&s!==null&&i.Re>s.Re)return{barsBefore:e.from-o,barsAfter:a-e.to};const c={barsBefore:i===null||i.Re===o?e.from-o:i.Re-o,barsAfter:s===null||s.Re===a?a-e.to:a-s.Re};return i!==null&&s!==null&&(c.from=i.Pw,c.to=s.Pw),c}setData(e){this.o_,this.Jn.Rr(),this.bg.Cg(this.Jn,e),this.Pg("full")}update(e,t=!1){this.Jn.Rr(),this.bg.kg(this.Jn,e,t),this.Pg("update")}dataByIndex(e,t){const n=this.Jn.Xs().Fr(e,t);return n===null?null:cT(this.seriesType())(n)}data(){const e=cT(this.seriesType());return this.Jn.Xs().Hr().map(t=>e(t))}subscribeDataChanged(e){this.Mg.i(e)}unsubscribeDataChanged(e){this.Mg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return Qc(this.Jn.N())}priceScale(){return this.Sg.priceScale(this.Jn.Ft().wa(),this.getPane().paneIndex())}createPriceLine(e){const t=So(Qc(BRe),e),n=this.Jn.Oh(t);return new DL(n)}removePriceLine(e){this.Jn.Nh(e.gg())}priceLines(){return this.Jn.Fh().map(e=>new DL(e))}seriesType(){return this.Jn.Rr()}attachPrimitive(e){this.Jn.ua(e),e.attached&&e.attached({chart:this.wg,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ca(e),e.detached&&e.detached(),this.Jn.Qt().Bh()}getPane(){const e=this.Jn,t=ct(this.Jn.Qt().Hn(e));return this.xg(t)}moveToPane(e){this.Jn.Qt().Oc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const t=this.Jn.Qt().Hn(this.Jn);t!==null&&t.Qo(this.Jn,e)}Pg(e){this.Mg.v()&&this.Mg.p(e)}}class LRe{constructor(e,t,n){this.yg=new Jn,this.z_=new Jn,this.wm=new Jn,this.ts=e,this.uh=e.Et(),this.Xm=t,this.uh.Du().i(this.Tg.bind(this)),this.uh.Vu().i(this.Rg.bind(this)),this.Xm.Pm().i(this.Dg.bind(this)),this.o_=n}m(){this.uh.Du().u(this),this.uh.Vu().u(this),this.Xm.Pm().u(this),this.yg.m(),this.z_.m(),this.wm.m()}scrollPosition(){return this.uh.wu()}scrollToPosition(e,t){t?this.uh.yu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.su();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const t={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},n=this.uh.hu(t);this.ts.zc(n)}getVisibleLogicalRange(){const e=this.uh.iu();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){Oi(e.from<=e.to,"The from index cannot be after the to index."),this.ts.zc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Eu()}logicalToCoordinate(e){const t=this.ts.Et();return t.Ki()?null:t.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.uu(e)}timeToIndex(e,t){const n=this.o_.convertHorzItemToInternal(e);return this.uh.J_(n,t)}timeToCoordinate(e){const t=this.timeToIndex(e,!1);return t===null?null:this.uh.qt(t)}coordinateToTime(e){const t=this.ts.Et(),n=t.uu(e),i=t.ss(n);return i===null?null:i.originalTime}width(){return this.Xm.Zf().width}height(){return this.Xm.Zf().height}subscribeVisibleTimeRangeChange(e){this.yg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.yg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.wm.i(e)}unsubscribeSizeChange(e){this.wm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...Qc(this.uh.N()),barSpacing:this.uh.vu()}}Tg(){this.yg.v()&&this.yg.p(this.getVisibleRange())}Rg(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Dg(e){this.wm.p(e.width,e.height)}}function FRe(r){if(r===void 0||r.type==="custom")return;const e=r;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(t){if(t>=1)return 0;let n=0;for(;n<8;n++){const i=Math.round(t);if(Math.abs(i-t)<1e-8)return n;t*=10}return n}(e.minMove))}function $L(r){return function(e){if(cy(e.handleScale)){const n=e.handleScale;e.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:i}=e.handleScale;cy(n)&&(e.handleScale.axisPressedMouseMove={time:n,price:n}),cy(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const t=e.handleScroll;cy(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})}(r),r}class URe{constructor(e,t,n){this.Vg=new Map,this.Ig=new Map,this.Bg=new Jn,this.Eg=new Jn,this.Ag=new Jn,this.$u=new WeakMap,this.zg=new yRe(t);const i=n===void 0?Qc(OL()):So(Qc(OL()),$L(n));this.Lg=t,this.Wf=new lRe(e,i,t),this.Wf.Kv().i(o=>{this.Bg.v()&&this.Bg.p(this.Og(o()))},this),this.Wf.Xv().i(o=>{this.Eg.v()&&this.Eg.p(this.Og(o()))},this),this.Wf.uc().i(o=>{this.Ag.v()&&this.Ag.p(this.Og(o()))},this);const s=this.Wf.Qt();this.Ng=new LRe(s,this.Wf.tw(),this.Lg)}remove(){this.Wf.Kv().u(this),this.Wf.Xv().u(this),this.Wf.uc().u(this),this.Ng.m(),this.Wf.m(),this.Vg.clear(),this.Ig.clear(),this.Bg.m(),this.Eg.m(),this.Ag.m(),this.zg.m()}resize(e,t,n){this.autoSizeActive()||this.Wf.Gm(e,t,n)}addCustomSeries(e,t={},n=0){const i=(s=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...ERe,...s.defaultOptions()},Fg:ARe,Wg:s}))(eu(e));return this.Hg(i,t,n)}addSeries(e,t={},n=0){return this.Hg(e,t,n)}removeSeries(e){const t=Hs(this.Vg.get(e)),n=this.zg.Ec(t);this.Wf.Qt().Ec(t),this.Ug(n),this.Vg.delete(e),this.Ig.delete(t)}Cg(e,t){this.Ug(this.zg.Fw(e,t))}kg(e,t,n){this.Ug(this.zg.Yw(e,t,n))}subscribeClick(e){this.Bg.i(e)}unsubscribeClick(e){this.Bg._(e)}subscribeCrosshairMove(e){this.Ag.i(e)}unsubscribeCrosshairMove(e){this.Ag._(e)}subscribeDblClick(e){this.Eg.i(e)}unsubscribeDblClick(e){this.Eg._(e)}priceScale(e,t=0){return new cY(this.Wf,e,t)}timeScale(){return this.Ng}applyOptions(e){this.Wf.hr($L(e))}options(){return this.Wf.N()}takeScreenshot(){return this.Wf.hw()}addPane(e=!1){const t=this.Wf.Qt().Uc();return t.zo(e),this.$g(t)}removePane(e){this.Wf.Qt().dc(e)}swapPanes(e,t){this.Wf.Qt().vc(e,t)}autoSizeActive(){return this.Wf.uw()}chartElement(){return this.Wf.tp()}panes(){return this.Wf.Qt().$s().map(e=>this.$g(e))}paneSize(e=0){const t=this.Wf.fw(e);return{height:t.height,width:t.width}}setCrosshairPosition(e,t,n){const i=this.Vg.get(n);if(i===void 0)return;const s=this.Wf.Qt().Hn(i);s!==null&&this.Wf.Qt().Tc(e,t,s)}clearCrosshairPosition(){this.Wf.Qt().Rc(!0)}horzBehaviour(){return this.Lg}Hg(e,t={},n=0){Oi(e.Fg!==void 0),FRe(t.priceFormat),e.type==="Candlestick"&&function(c){c.borderColor!==void 0&&(c.borderUpColor=c.borderColor,c.borderDownColor=c.borderColor),c.wickColor!==void 0&&(c.wickUpColor=c.wickColor,c.wickDownColor=c.wickColor)}(t);const i=So(Qc(qG),Qc(e.defaultOptions),t),s=e.Fg,o=new zw(this.Wf.Qt(),e.type,i,s,e.Wg);this.Wf.Qt().Ic(o,n);const a=new NRe(o,this,this,this,this.Lg,c=>this.$g(c));return this.Vg.set(a,o),this.Ig.set(o,a),a}Ug(e){const t=this.Wf.Qt();t.Dc(e.Et.ou,e.Et.Gw,e.Et.Jw),e.Oo.forEach((n,i)=>i.ht(n.se,n.Zw)),t.Et().j_(),t.pu()}qg(e){return Hs(this.Ig.get(e))}Og(e){const t=new Map;e.Rw.forEach((i,s)=>{const o=s.Rr(),a=cT(o)(i);if(o!=="Custom")Oi(fRe(a));else{const c=s.pa();Oi(!c||c(a)===!1)}t.set(this.qg(s),a)});const n=e.Tw!==void 0&&this.Ig.has(e.Tw)?this.qg(e.Tw):void 0;return{time:e.Pw,logical:e.Re,point:e.kw,paneIndex:e.yw,hoveredSeries:n,hoveredObjectId:e.Dw,seriesData:t,sourceEvent:e.Vw}}$g(e){let t=this.$u.get(e);return t||(t=new MRe(this.Wf,n=>this.qg(n),e,this),this.$u.set(e,t)),t}}function zRe(r){if(hm(r)){const e=document.getElementById(r);return Oi(e!==null,`Cannot find element in DOM with id=${r}`),e}return r}function qRe(r,e,t){const n=zRe(r),i=new URe(n,e,t);return e.setOptions(i.options()),i}function jRe(r,e){return qRe(r,new yL,yL.ad(e))}class VRe extends oY{constructor(e,t){super(e,t,!0)}ug(e,t,n){t._u(this.sg,nT(this.ng)),e.$l(this.sg,n,nT(this.ng))}Yg(e,t){return{wt:e,gt:t,_t:NaN,ut:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>{const n=t.Wt[3];return this.jg(t.Re,n,e)})}}function lY(r,e,t,n,i,s,o){if(e.length===0||n.from>=e.length||n.to<=0)return;const{context:a,horizontalPixelRatio:c,verticalPixelRatio:l}=r,u=e[n.from];let f=s(r,u),h=u;if(n.to-n.from<2){const d=i/2;a.beginPath();const g={_t:u._t-d,ut:u.ut},p={_t:u._t+d,ut:u.ut};a.moveTo(g._t*c,g.ut*l),a.lineTo(p._t*c,p.ut*l),o(r,f,g,p)}else{const d=(p,m)=>{o(r,f,h,m),a.beginPath(),f=p,h=m};let g=h;a.beginPath(),a.moveTo(u._t*c,u.ut*l);for(let p=n.from+1;p<n.to;++p){g=e[p];const m=s(r,g);switch(t){case 0:a.lineTo(g._t*c,g.ut*l);break;case 1:a.lineTo(g._t*c,e[p-1].ut*l),m!==f&&(d(m,g),a.lineTo(g._t*c,e[p-1].ut*l)),a.lineTo(g._t*c,g.ut*l);break;case 2:{const[y,v]=KRe(e,p-1,p);a.bezierCurveTo(y._t*c,y.ut*l,v._t*c,v.ut*l,g._t*c,g.ut*l);break}}t!==1&&m!==f&&(d(m,g),a.moveTo(g._t*c,g.ut*l))}(h!==g||h===g&&t===1)&&o(r,f,h,g)}}const ML=6;function I2(r,e){return{_t:r._t-e._t,ut:r.ut-e.ut}}function BL(r,e){return{_t:r._t/e,ut:r.ut/e}}function KRe(r,e,t){const n=Math.max(0,e-1),i=Math.min(r.length-1,t+1);var s,o;return[(s=r[e],o=BL(I2(r[t],r[n]),ML),{_t:s._t+o._t,ut:s.ut+o.ut}),I2(r[t],BL(I2(r[i],r[e]),ML))]}function HRe(r,e){const t=r.context;t.strokeStyle=e,t.stroke()}class WRe extends rh{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:t,lt:n,Kg:i,Xg:s,ct:o,Xt:a,Zg:c}=this.rt;if(n===null)return;const l=e.context;l.lineCap="butt",l.lineWidth=o*e.verticalPixelRatio,Df(l,a),l.lineJoin="round";const u=this.Gg.bind(this);s!==void 0&&lY(e,t,s,n,i,u,HRe),c&&function(f,h,d,g,p){if(g.to-g.from<=0)return;const{horizontalPixelRatio:m,verticalPixelRatio:y,context:v}=f;let b=null;const _=Math.max(1,Math.floor(m))%2/2,x=d*y+_;for(let E=g.to-1;E>=g.from;--E){const S=h[E];if(S){const C=p(f,S);C!==b&&(v.beginPath(),b!==null&&v.fill(),v.fillStyle=C,b=C);const k=Math.round(S._t*m)+_,$=S.ut*y;v.moveTo(k,$),v.arc(k,$,x,0,2*Math.PI)}}v.fill()}(e,t,c,n,u)}}class GRe extends WRe{Gg(e,t){return t.vt}}function YRe(r,e,t,n,i){const{context:s,horizontalPixelRatio:o,verticalPixelRatio:a}=e;s.lineTo(i._t*o,r*a),s.lineTo(n._t*o,r*a),s.closePath(),s.fillStyle=t,s.fill()}class XRe extends rh{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:t,lt:n,Kg:i,ct:s,Xt:o,Xg:a}=this.rt,c=this.rt.eM??(this.rt.rM?0:e.mediaSize.height);if(n===null)return;const l=e.context;l.lineCap="butt",l.lineJoin="round",l.lineWidth=s,Df(l,o),l.lineWidth=1,lY(e,t,a,n,i,this.hM.bind(this),YRe.bind(null,c))}}class JRe{aM(e,t){const n=this.lM,{oM:i,_M:s,uM:o,cM:a,eM:c,dM:l,fM:u}=t;if(this.pM===void 0||n===void 0||n.oM!==i||n._M!==s||n.uM!==o||n.cM!==a||n.eM!==c||n.dM!==l||n.fM!==u){const{verticalPixelRatio:f}=e,h=c||l>0?f:1,d=l*h,g=u===e.bitmapSize.height?u:u*h,p=(c??0)*h,m=e.context.createLinearGradient(0,d,0,g);if(m.addColorStop(0,i),c!=null){const y=fd((p-d)/(g-d),0,1);m.addColorStop(y,s),m.addColorStop(y,o)}m.addColorStop(1,a),this.pM=m,this.lM=t}return this.pM}}class QRe extends XRe{constructor(){super(...arguments),this.vM=new JRe}hM(e,t){return this.vM.aM(e,{oM:t.mr,_M:"",uM:"",cM:t.wr,dM:this.rt?.dM??0,fM:e.bitmapSize.height})}}class ZRe extends VRe{constructor(e,t){super(e,t),this.hg=new KG,this.MM=new QRe,this.bM=new GRe,this.hg.st([this.MM,this.bM])}jg(e,t,n){return{...this.Yg(e,t),...n.Dr(e)}}cg(){const e=this.Jn.N();if(this.ng===null||this.sg.length===0)return;let t;if(e.relativeGradient){t=this.sg[this.ng.from].ut;for(let n=this.ng.from;n<this.ng.to;n++){const i=this.sg[n];i.ut<t&&(t=i.ut)}}this.MM.ht({Xg:e.lineType,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,eM:null,dM:t,rM:e.invertFilledArea,lt:this.ng,Kg:this.Qn.Et().vu()}),this.bM.ht({Xg:e.lineVisible?e.lineType:void 0,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,lt:this.ng,Kg:this.Qn.Et().vu(),Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}const e3e={type:"Area",isBuiltIn:!0,defaultOptions:{topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,relativeGradient:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(r,e)=>new ZRe(r,e)};({...qG});var t3e=ye('<div class="absolute z-10 inset-0 bg-zinc-950 w-full h-48 flex items-center justify-center"><div class="size-10 i-tabler:loader-2 animate-spin bg-zinc-500">'),r3e=ye('<div class="absolute z-10 inset-0 bg-zinc-950 w-full h-48 flex items-center justify-center text-zinc-500 text-sm font-semibold tracking-wider">NO DATA'),n3e=ye('<div class="relative mt-2"><div class="w-full h-48"><div class=size-full id=price-chart></div><div class="absolute z-10 top-0 leading-none text-sm p-2 text-zinc-400 ml-2"><div class="flex items-center gap-1.5"><div>/USD</div><div class="bg-zinc-600 size-1 rounded-full"></div><div></div></div><div></div></div></div><div class="grid grid-cols-6 p-1">'),i3e=ye('<button class="text-sm text-gray-500 text-center py-1 font-medium hover:text-zinc-300 cursor-pointer transition-100">');const uY="price-chart",kh={LOADING:"loading",NO_DATA:"no-data",READY:"ready"};function s3e(){return jRe(document.getElementById(uY),{layout:{background:{color:"#09090b"},attributionLogo:!1,fontFamily:"Inter Variable",fontSize:11},timeScale:{visible:!1},leftPriceScale:{visible:!1},rightPriceScale:{visible:!1},grid:{horzLines:{visible:!1},vertLines:{visible:!1}},crosshair:{horzLine:{visible:!1},vertLine:{labelVisible:!0,color:"#52525b"}},handleScroll:{vertTouchDrag:!1,horzTouchDrag:!1,mouseWheel:!1,pressedMouseMove:!1},handleScale:{mouseWheel:!1,axisDoubleClickReset:!1,axisPressedMouseMove:!1,pinch:!1}})}function o3e(r){return r.addSeries(e3e,{lineColor:"#c7f284",topColor:"#c7f284aa",bottomColor:"#c7f28400",priceLineVisible:!1,lineWidth:2})}function a3e(r){switch(r){case"1H":return{interval:"30_SECOND",candles:120};case"24H":return{interval:"5_MINUTE",candles:288};case"7D":return{interval:"1_HOUR",candles:168};case"1M":return{interval:"4_HOUR",candles:180};case"3M":return{interval:"12_HOUR",candles:180};case"1Y":return{interval:"1_DAY",candles:365}}}const c3e=r=>{const[e,t]=$e("1H"),[n,i]=$e(kh.LOADING),[s,o]=$e(null),a=zG(r.mint);let c,l;Dr(()=>{c=s3e(),l=o3e(c),c.subscribeCrosshairMove(f=>{const h=document.getElementById(uY),d=f.seriesData.get(l);f.point===void 0||!f.time||f.point.x<0||f.point.x>h.clientWidth||f.point.y<0||f.point.y>h.clientHeight||!d||!("value"in d)?o(null):o({time:new Date(d.time*1e3),value:d.value})})});let u=new AbortController;return it(kn([()=>r.mint,e],async([f,h])=>{if(!c||!l||!f)return;i(kh.LOADING),u.abort(),u=new AbortController;const{candles:d}=await um.getChart({mint:f,to:new Date().valueOf(),type:"price",...a3e(h)},u.signal);if(d.length===0){i(kh.NO_DATA);return}const g=d.map(({open:p,close:m,time:y})=>({time:y,value:(p+m)/2}));l.setData(g),c.timeScale().fitContent(),i(kh.READY)})),(()=>{var f=n3e(),h=f.firstChild,d=h.firstChild,g=d.nextSibling,p=g.firstChild,m=p.firstChild,y=m.firstChild,v=m.nextSibling,b=v.nextSibling,_=p.nextSibling,x=h.nextSibling;return ce(m,()=>r.symbol,y),ce(b,(()=>{var E=Or(()=>!!["1H","24H","7D","1M"].includes(e()));return()=>E()?(s()?.time??new Date).toLocaleDateString(void 0,{day:"numeric",month:"short"})+" "+(s()?.time??new Date).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):(s()?.time??new Date).toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})})()),ce(_,D(vn,{get value(){return s()?.value??a.data?.usdPrice??0},prefix:"$"})),ce(h,D(yr,{get children(){return[D(Ne,{get when(){return n()===kh.LOADING},get children(){return t3e()}}),D(Ne,{get when(){return n()===kh.NO_DATA},get children(){return r3e()}})]}}),null),ce(x,D(Lt,{each:["1H","24H","7D","1M","3M","1Y"],children:E=>(()=>{var S=i3e();return S.$$click=()=>t(E),ce(S,E),ht(C=>Gr(S,{"bg-zinc-900 rounded text-zinc-50":E===e()},C)),S})()})),f})()};Yt(["click"]);const C2=(r,e,t)=>{const n=t(r,e);return yt(()=>clearInterval(n))},l3e=(r,e,t)=>{if(typeof e=="number"){C2(r,e,t);return}let n=!1,i=performance.now(),s=0,o=!1;const a=()=>{br(r),i=performance.now(),n=t===setTimeout};it(c=>{if(n)return;const l=e();if(l===!1)return c&&(s+=(performance.now()-i)/c),l;if(c===!1&&(i=performance.now()),o){if(c&&(s+=(performance.now()-i)/c),i=performance.now(),s>=1)s=0,a();else if(s>0){const[u,f]=$e(void 0,{equals:!1});return u(),C2(()=>{s=0,o=!1,f(),a()},(1-s)*l,setTimeout),l}}return o=!0,C2(a,l,t),l})};function u3e(r,e,t,n){const i=ke(()=>$e(r(t),n));return l3e(()=>i()[1](r),e,setInterval),()=>i()[0]()}const fY=6e4,NL=36e5,LL=r=>r instanceof Date?r:new Date(r),f3e=(r,e)=>e.getTime()-r.getTime(),hY=(r,e)=>{let t;const n=()=>clearTimeout(t);return Nf()&&yt(n),Object.assign((...s)=>{t!==void 0&&n(),t=setTimeout(()=>r(...s),e)},{clear:n})},h3e=(r,e)=>r.length>0?()=>r(br(e)):r;function d3e(r,e){let t=0;const n=r.map((i,s)=>ke(()=>(t=s,i()),void 0,hA));return ke(()=>n.map(i=>i())[t],void 0,e)}function p3e(r,e,t){let n=()=>e;const[i,s]=$e(e,hA),o=ke(h3e(r,()=>n()),e,hA);return[n=d3e([i,o],t),a=>s(()=>typeof a=="function"?a(br(n)):a)]}const FL=r=>{const[e,t]=p3e(()=>LL(Z0(r)));return[e,i=>t(s=>LL(zQ(i,s)))]};function g3e(r=fY/2){const[e,t]=$e(void 0,{equals:!1});return[u3e(()=>(e(),new Date),r,void 0,{equals:(i,s)=>i.getTime()===s.getTime()}),t]}function m3e(r,e){const[t]=FL(r),[n]=FL(e);return[ke(()=>f3e(t(),n())),{from:t,to:n}]}function y3e(r,e=t=>Math.abs(t)<=NL?fY/2:NL/2){const t=typeof e=="function"?()=>e(s()):e,[n,i]=g3e(t),[s,{to:o}]=m3e(n,r);return[s,{update:i,target:o,now:n}]}var v3e=ye("<time> ");const dY=1e3,pY=60*dY,gY=60*pY,b3e=24*gY,mY=r=>{const[e]=y3e(()=>r.date.valueOf(),n=>n>12e4?2e4:1e3),t=ke(()=>{const n=Math.abs(e()),i=Math.round(n/b3e);if(i>120)return`${Math.round(i/30)}mo`;if(i>0)return`${i}d`;const s=Math.round(n/gY);if(s)return`${s}h`;const o=Math.round(n/pY);return o?`${o}m`:`${Math.round(n/dY)}s`});return(()=>{var n=v3e(),i=n.firstChild;return bn(n,st({get dateTime(){return r.date.toISOString()}},r),!1,!0),ce(n,t,i),ce(n,D(We,{get when(){return!r.withoutSuffix},children:"ago"}),null),n})()};var w3e=ye('<tr><td class="w-full h-45 text-center text-zinc-500 text-sm font-semibold tracking-wider"colspan=4>NO TRADES YET'),x3e=ye('<div><h3 class="font-medium p-4 underline underline-offset-8 decoration-primary-200">Your Trades</h3><table class=w-full><thead><tr class="border-b border-zinc-800"><th class="font-normal text-zinc-400 flex items-center justify-start px-4 py-2 text-sm gap-0.5">Age</th><th class="font-normal text-zinc-400 text-right py-2 pr-4 text-sm">Price</th><th class="font-normal text-zinc-400 text-right py-2 text-sm">Volume</th><th class="font-normal text-zinc-400 flex items-center justify-end px-4 py-2 text-sm gap-0.5">Tx</th></tr></thead><tbody class="divide-y divide-zinc-900 border-b border-zinc-800">'),_3e=ye('<tr><td class="h-15 px-4"><div class="space-y-1 flex flex-col items-start"><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded"></div></div></td><td class="h-15 pr-4"><div class="space-y-1 flex flex-col items-end"><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded"></div></div></td><td class=h-15><div class="space-y-1 flex flex-col items-end"><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded"></div><div class="h-3 w-12 bg-zinc-800 animate-pulse rounded"></div></div></td><td class="h-15 px-4"><div class="space-y-1 flex flex-col items-end"><div class="size-4 bg-zinc-800 animate-pulse rounded">'),S3e=ye('<tr><td class="h-15 px-4 flex items-center gap-1"><div class="text-sm py-0.5 px-1.5 rounded capitalize font-medium"></div><div class=text-sm></div></td><td class="h-15 pr-4 text-right text-sm"></td><td class="h-15 text-right text-sm space-y--0.25"><div></div><div class="text-xs text-zinc-400"></div></td><td class="h-15 text-right"><button class="p-4 cursor-pointer text-zinc-500 hover:text-primary-200 transition-100"><div class=i-tabler:external-link>');const E3e=()=>{const r=db(),{selectedAccount:e}=Jr(),t=qs(()=>({queryKey:["pnl-activity",e()?.address,r.address],queryFn:async()=>ss.getPnlActivity(e()?.address,r.address),enabled:!!e()?.address}));return(()=>{var n=x3e(),i=n.firstChild,s=i.nextSibling,o=s.firstChild,a=o.nextSibling;return ce(a,D(yr,{get children(){return[D(Ne,{get when(){return t.isLoading},get children(){return D(Lt,{get each(){return new Array(5).fill(0)},children:()=>_3e()})}}),D(Ne,{get when(){return t.data?.activity.length===0},get children(){return w3e()}}),D(Ne,{when:!0,get children(){return D(Lt,{get each(){return t.data?.activity},children:c=>(()=>{var l=S3e(),u=l.firstChild,f=u.firstChild,h=f.nextSibling,d=u.nextSibling,g=d.nextSibling,p=g.firstChild,m=p.nextSibling,y=g.nextSibling,v=y.firstChild;return ce(f,()=>c.type),ce(h,D(mY,{get date(){return new Date(c.timestamp)},withoutSuffix:!0})),ce(d,D(pi,{style:"compact",get value(){return c.price},prefix:"$"})),ce(p,D(pi,{style:"long",get value(){return c.volume},prefix:"$"})),ce(m,D(pi,{style:"long",get value(){return c.amount}})),v.$$click=()=>window.open(`https://solscan.io/tx/${c.signature}`,"_blank"),ht(b=>{var _={"text-green-400 bg-green-900/15":c.type==="buy","text-red-400 bg-red-900/15":c.type==="sell"},x=c.type==="buy",E=c.type==="sell";return b.e=Gr(f,_,b.e),x!==b.t&&h.classList.toggle("text-green-400",b.t=x),E!==b.a&&h.classList.toggle("text-red-400",b.a=E),b},{e:void 0,t:void 0,a:void 0}),l})()})}})]}})),n})()};Yt(["click"]);var Ph=ye('<div class="h-4 w-12 bg-zinc-800 animate-pulse rounded">'),T2=ye("<div>"),A3e=ye('<div class="size-5 i-tabler:rosette-discount-check text-primary-200">'),I3e=ye('<div><div class="flex justify-between items-center gap-2 bg-zinc-900 pt-4 px-4"><button class="cursor-pointer text-zinc-400 hover:text-zinc-100 flex items-center justify-center transition-100 p-1.5 -m-1.5 gap-2"><div class="i-tabler:arrow-left size-5.5"></div></button><div><div class="flex items-center gap-1"><h1 class="font-semibold text-lg leading-5"></h1></div><button class="text-sm text-zinc-400 leading-4 flex gap-1 items-center hover:text-zinc-100 transition-100 cursor-pointer"><div class=size-4></div></button></div><div class=flex-1></div><div class="flex flex-col items-end"></div></div><div class="flex items-center justify-between bg-zinc-900 p-4"></div><div class="border-b border-zinc-800 grid grid-cols-3 gap-4 p-4"></div><div class="border-y border-zinc-800 p-4 grid grid-cols-3 gap-4"></div><div class=p-4><h3 class="font-medium mb-4 underline underline-offset-8 decoration-primary-200">About </h3><p class="leading-tight text-zinc-400 whitespace-pre-line">'),C3e=ye('<button class="flex flex-col justify-center items-center gap-2 group cursor-pointer"><div class="bg-zinc-800 rounded-full size-12 flex items-center justify-center ring-1 ring-zinc-800 group-hover:ring-primary-200 group-active:bg-zinc-800/75 transition-100"><div></div></div><div class="text-zinc-400 group-hover:text-zinc-100 transition-100 text-sm font-medium">'),T3e=ye('<div><div class="bg-zinc-800 animate-pulse h-3 w-20 mb-1 rounded"></div><div class="bg-zinc-800 animate-pulse h-4.5 w-8 rounded">'),UL=ye('<div><div class="text-sm text-zinc-400 leading-none mb-1"></div><div class="leading-none font-medium">');const R3e=()=>{const r=db(),e=Co(),t=bl(),{selectedAccount:n}=Jr(),i=zG(r.address),s=ra(),o=qs(()=>({queryKey:["asset_description",r.address],queryFn:async()=>um.getDescription(r.address)})),a=qs(()=>({queryKey:["pnl",n()?.address,r.address],queryFn:async()=>{const v=n()?.address;if(v)return ss.getPnlPosition(v,r.address)},enabled:!!n()?.address})),{formatLargeNumbers:c}=Ic(),l=ke(()=>s.data?.tokens.find(v=>v.id===r.address)),u=ke(()=>i.data?.symbol||i.data?.id.slice(0,4)||l()?.symbol||l()?.id.slice(0,4)),f=ke(()=>i.data?[{label:"Market Cap",value:c(i.data.mcap??0,"currency")},{label:"FDV",value:c(i.data.fdv??0,"currency")},{label:"Liquidity",value:c(i.data.liquidity??0,"currency")},{label:"Volume (24H)",value:c((i.data.stats24h?.buyVolume??0)+(i.data.stats24h?.sellVolume??0),"currency")},{label:"Traders (24H)",value:c(i.data.stats24h?.numTraders??0,"integer")},{label:"Holders",value:c(i.data.holderCount??0,"integer")}]:null),h=ke(()=>[{label:"Balance",value:D(We,{get when(){return!s.isLoading},get fallback(){return Ph()},get children(){return D(pi,{style:"compact",get value(){return l()?.amount??0}})}})},{label:"Value",value:D(We,{get when(){return!s.isLoading},get fallback(){return Ph()},get children(){return D(pi,{style:"compact",get value(){return l()?.value??0},prefix:"$"})}})},{label:"Avg Entry",value:D(We,{get when(){return!a.isLoading},get fallback(){return Ph()},get children(){return D(pi,{style:"compact",get value(){return a.data?.averageEntry??0},prefix:"$"})}})},{label:"Total PnL",value:D(We,{get when(){return!a.isLoading},get fallback(){return Ph()},get children(){var v=T2();return ce(v,()=>c(a.data?.pnlTotal??0,"currency",!0)),ht(b=>{var _=(a.data?.pnlTotal??0)>=.01,x=(a.data?.pnlTotal??0)<=-.01;return _!==b.e&&v.classList.toggle("text-green-400",b.e=_),x!==b.t&&v.classList.toggle("text-red-400",b.t=x),b},{e:void 0,t:void 0}),v}})},{label:"Unrealised",value:D(We,{get when(){return!a.isLoading},get fallback(){return Ph()},get children(){var v=T2();return ce(v,()=>c(a.data?.pnlUnrealised??0,"currency",!0)),ht(b=>{var _=(a.data?.pnlUnrealised??0)>=.01,x=(a.data?.pnlUnrealised??0)<=-.01;return _!==b.e&&v.classList.toggle("text-green-400",b.e=_),x!==b.t&&v.classList.toggle("text-red-400",b.t=x),b},{e:void 0,t:void 0}),v}})},{label:"Realised",value:D(We,{get when(){return!a.isLoading},get fallback(){return Ph()},get children(){var v=T2();return ce(v,()=>c(a.data?.pnlRealised??0,"currency",!0)),ht(b=>{var _=(a.data?.pnlRealised??0)>=.01,x=(a.data?.pnlRealised??0)<=-.01;return _!==b.e&&v.classList.toggle("text-green-400",b.e=_),x!==b.t&&v.classList.toggle("text-red-400",b.t=x),b},{e:void 0,t:void 0}),v}})}]),[d,g]=$e(!1);let p;function m(v){v.stopImmediatePropagation(),p?.(),Zb(i.data?.id||l()?.id||""),g(!0),p=tl(()=>g(!1),2500,setTimeout)}const y=[{icon:"i-tabler:arrows-left-right",label:"Swap",onClick:()=>{const v=r.address===vf.SOL.id?vf.USDC.id:vf.SOL.id,b=r.address;e(`${vt.SWAP}?sell=${v}&buy=${b}`)}},{icon:"i-tabler:arrow-up-right",label:"Send",onClick:()=>{e(`${vt.SEND}?mint=${r.address}`)}},{icon:"i-tabler:arrow-down-left",label:"Receive",onClick:()=>{e(vt.RECEIVE)}},{icon:"i-tabler:credit-card",label:"Buy",onClick:()=>{window.open(Sa.ONBOARD,"_blank")}}];return(()=>{var v=I3e(),b=v.firstChild,_=b.firstChild;_.firstChild;var x=_.nextSibling,E=x.firstChild,S=E.firstChild,C=E.nextSibling,k=C.firstChild,$=x.nextSibling,J=$.nextSibling,j=b.nextSibling,L=j.nextSibling,w=L.nextSibling,R=w.nextSibling,N=R.firstChild;N.firstChild;var Y=N.nextSibling;return zs(_,"click",t,!0),ce(_,D(Rn,{get src(){return i.data?.icon||l()?.icon},class:"size-9"}),null),ce(S,u),ce(E,D(We,{get when(){return i.data?.isVerified},get children(){return A3e()}}),null),C.$$click=m,ce(C,D(Yo,{get address(){return i.data?.id||l()?.id||""}}),k),ce(J,D(ya,{class:"text-lg leading-5 font-medium",get children(){return D(pi,{get value(){return i.data?.usdPrice??l()?.price??0},prefix:"$",style:"long"})}}),null),ce(J,D(ya,{class:"text-sm text-zinc-400 leading-4",get children(){return D(fm,{get value(){return i.data?.stats24h?.priceChange??l()?.priceChange??0},hideBackground:!0})}}),null),ce(j,D(Lt,{each:y,children:({label:z,icon:G,onClick:te})=>(()=>{var X=C3e(),T=X.firstChild,A=T.firstChild,O=T.nextSibling;return zs(X,"click",te,!0),ce(O,z),ht(()=>ui(A,Xr(G,"size-5.5 text-primary-200"))),X})()})),ce(L,D(We,{get when(){return f()},get fallback(){return D(Lt,{each:[1,2,3,4,5,6],children:()=>T3e()})},children:z=>D(Lt,{get each(){return z()},children:G=>(()=>{var te=UL(),X=te.firstChild,T=X.nextSibling;return ce(X,()=>G.label),ce(T,D(ya,{get children(){return G.value}})),te})()})})),ce(v,D(c3e,{get mint(){return r.address},get symbol(){return u()??""}}),w),ce(w,D(Lt,{get each(){return h()},children:z=>(()=>{var G=UL(),te=G.firstChild,X=te.nextSibling;return ce(te,()=>z.label),ce(X,D(ya,{get children(){return z.value}})),G})()})),ce(v,D(E3e,{}),R),ce(N,u,null),ce(Y,()=>o.data?.description??us.DASH),ht(z=>Gr(k,{"i-tabler:copy-check-filled":d(),"i-tabler:copy":!d()},z)),v})()};Yt(["click"]);const yY=r=>{const{selectedAccount:e}=Jr();return o7(()=>({queryKey:["portfolio-activity",e()?.address],queryFn:({pageParam:n})=>ss.getTransactions(e().address,n),initialPageParam:void 0,getNextPageParam:n=>n.transactions.at(-1)?.signature,enabled:r()&&!!e()?.address}))},zL=[],vY=()=>{const{selectedAccount:r}=Jr(),e=ke(()=>r()?.address),t=qs(()=>({queryKey:["portfolio-positions",e()],queryFn:async()=>{const s=`portfolio-positions:${e()}`;if(!zL.includes(s)){zL.push(s);const{value:a}=await _r.getPopupCache({key:s});if(a&&Array.isArray(a.platforms))return requestAnimationFrame(()=>t.refetch()),a}const o=await ss.getPositions(e());return await _r.setPopupCache({key:s,value:o}),o},enabled:!!e(),staleTime:3e4,refetchInterval:3e4})),[n,i]=zf({totalValue:0,platforms:[]});return it(kn(()=>t.data,s=>{s&&(i("totalValue",s.totalValue),i("platforms",HU(s.platforms)))})),{query:t,data:n}},qL=[],bY=()=>{const{selectedAccount:r}=Jr(),e=ke(()=>r()?.address),t=qs(()=>({queryKey:["portfolio-pnl",e()],queryFn:async()=>{const n=`portfolio-pnl:${e()}`;if(!qL.includes(n)){qL.push(n);const{value:s}=await _r.getPopupCache({key:n});if(s)return requestAnimationFrame(()=>t.refetch()),s}const i=await ss.getOverallPnl(e());return await _r.setPopupCache({key:n,value:i}),i},enabled:!!e(),staleTime:3e4,refetchInterval:3e4}));return t};function k3e(r,e=Nf()){let t=0,n,i;return()=>(t++,yt(()=>{t--,queueMicrotask(()=>{!t&&i&&(i(),i=n=void 0)})}),i||el(s=>n=r(i=s),e),n)}function P3e(r){const e=Nf(),t=k3e(r,e);return()=>t()}function O3e(r,e,t){const n=Nf(),i=ke(r,e,t),s={...br(i)},o={};for(const a in s)Object.defineProperty(s,a,{get(){let c=o[a];if(!c){if(!Xy())return i()[a];Rg(n,()=>o[a]=c=ke(()=>i()[a]))}return c()},enumerable:!0});return s}const D3e={x:0,y:0};function jL(r){return r?r instanceof Window?{x:r.scrollX,y:r.scrollY}:{x:r.scrollLeft,y:r.scrollTop}:{...D3e}}function $3e(r){r=r||window;const e=typeof r=="function",t=e?()=>jL(r()):()=>jL(r),[n,i]=$e(t,{equals:!1}),s=()=>i(()=>t),o=O3e(()=>n()());return e&&Dr(s),a7(r,"scroll",s,{passive:!0}),o}const wY=P3e(()=>$3e(window));var xY=typeof pa=="object"&&pa&&pa.Object===Object&&pa,M3e=typeof self=="object"&&self&&self.Object===Object&&self,Sl=xY||M3e||Function("return this")(),Su=Sl.Symbol,_Y=Object.prototype,B3e=_Y.hasOwnProperty,N3e=_Y.toString,r0=Su?Su.toStringTag:void 0;function L3e(r){var e=B3e.call(r,r0),t=r[r0];try{r[r0]=void 0;var n=!0}catch{}var i=N3e.call(r);return n&&(e?r[r0]=t:delete r[r0]),i}var F3e=Object.prototype,U3e=F3e.toString;function z3e(r){return U3e.call(r)}var q3e="[object Null]",j3e="[object Undefined]",VL=Su?Su.toStringTag:void 0;function dp(r){return r==null?r===void 0?j3e:q3e:VL&&VL in Object(r)?L3e(r):z3e(r)}function Ld(r){return r!=null&&typeof r=="object"}var V3e="[object Symbol]";function Fk(r){return typeof r=="symbol"||Ld(r)&&dp(r)==V3e}function K3e(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}var dc=Array.isArray,KL=Su?Su.prototype:void 0,HL=KL?KL.toString:void 0;function SY(r){if(typeof r=="string")return r;if(dc(r))return K3e(r,SY)+"";if(Fk(r))return HL?HL.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function Uk(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}function H3e(r){return r}var W3e="[object AsyncFunction]",G3e="[object Function]",Y3e="[object GeneratorFunction]",X3e="[object Proxy]";function EY(r){if(!Uk(r))return!1;var e=dp(r);return e==G3e||e==Y3e||e==W3e||e==X3e}var R2=Sl["__core-js_shared__"],WL=function(){var r=/[^.]+$/.exec(R2&&R2.keys&&R2.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function J3e(r){return!!WL&&WL in r}var Q3e=Function.prototype,Z3e=Q3e.toString;function nh(r){if(r!=null){try{return Z3e.call(r)}catch{}try{return r+""}catch{}}return""}var eke=/[\\^$.*+?()[\]{}|]/g,tke=/^\[object .+?Constructor\]$/,rke=Function.prototype,nke=Object.prototype,ike=rke.toString,ske=nke.hasOwnProperty,oke=RegExp("^"+ike.call(ske).replace(eke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ake(r){if(!Uk(r)||J3e(r))return!1;var e=EY(r)?oke:tke;return e.test(nh(r))}function cke(r,e){return r?.[e]}function ih(r,e){var t=cke(r,e);return ake(t)?t:void 0}var lT=ih(Sl,"WeakMap"),GL=function(){try{var r=ih(Object,"defineProperty");return r({},"",{}),r}catch{}}(),lke=9007199254740991,uke=/^(?:0|[1-9]\d*)$/;function AY(r,e){var t=typeof r;return e=e??lke,!!e&&(t=="number"||t!="symbol"&&uke.test(r))&&r>-1&&r%1==0&&r<e}function fke(r,e,t){e=="__proto__"&&GL?GL(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function IY(r,e){return r===e||r!==r&&e!==e}var hke=9007199254740991;function zk(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=hke}function CY(r){return r!=null&&zk(r.length)&&!EY(r)}var dke=Object.prototype;function pke(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||dke;return r===t}function gke(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var mke="[object Arguments]";function YL(r){return Ld(r)&&dp(r)==mke}var TY=Object.prototype,yke=TY.hasOwnProperty,vke=TY.propertyIsEnumerable,RY=YL(function(){return arguments}())?YL:function(r){return Ld(r)&&yke.call(r,"callee")&&!vke.call(r,"callee")};function bke(){return!1}var kY=typeof exports=="object"&&exports&&!exports.nodeType&&exports,XL=kY&&typeof module=="object"&&module&&!module.nodeType&&module,wke=XL&&XL.exports===kY,JL=wke?Sl.Buffer:void 0,xke=JL?JL.isBuffer:void 0,uT=xke||bke,_ke="[object Arguments]",Ske="[object Array]",Eke="[object Boolean]",Ake="[object Date]",Ike="[object Error]",Cke="[object Function]",Tke="[object Map]",Rke="[object Number]",kke="[object Object]",Pke="[object RegExp]",Oke="[object Set]",Dke="[object String]",$ke="[object WeakMap]",Mke="[object ArrayBuffer]",Bke="[object DataView]",Nke="[object Float32Array]",Lke="[object Float64Array]",Fke="[object Int8Array]",Uke="[object Int16Array]",zke="[object Int32Array]",qke="[object Uint8Array]",jke="[object Uint8ClampedArray]",Vke="[object Uint16Array]",Kke="[object Uint32Array]",mn={};mn[Nke]=mn[Lke]=mn[Fke]=mn[Uke]=mn[zke]=mn[qke]=mn[jke]=mn[Vke]=mn[Kke]=!0;mn[_ke]=mn[Ske]=mn[Mke]=mn[Eke]=mn[Bke]=mn[Ake]=mn[Ike]=mn[Cke]=mn[Tke]=mn[Rke]=mn[kke]=mn[Pke]=mn[Oke]=mn[Dke]=mn[$ke]=!1;function Hke(r){return Ld(r)&&zk(r.length)&&!!mn[dp(r)]}function Wke(r){return function(e){return r(e)}}var PY=typeof exports=="object"&&exports&&!exports.nodeType&&exports,j0=PY&&typeof module=="object"&&module&&!module.nodeType&&module,Gke=j0&&j0.exports===PY,k2=Gke&&xY.process,QL=function(){try{var r=j0&&j0.require&&j0.require("util").types;return r||k2&&k2.binding&&k2.binding("util")}catch{}}(),ZL=QL&&QL.isTypedArray,OY=ZL?Wke(ZL):Hke,Yke=Object.prototype,Xke=Yke.hasOwnProperty;function Jke(r,e){var t=dc(r),n=!t&&RY(r),i=!t&&!n&&uT(r),s=!t&&!n&&!i&&OY(r),o=t||n||i||s,a=o?gke(r.length,String):[],c=a.length;for(var l in r)Xke.call(r,l)&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||AY(l,c)))&&a.push(l);return a}function Qke(r,e){return function(t){return r(e(t))}}var Zke=Qke(Object.keys,Object),e6e=Object.prototype,t6e=e6e.hasOwnProperty;function r6e(r){if(!pke(r))return Zke(r);var e=[];for(var t in Object(r))t6e.call(r,t)&&t!="constructor"&&e.push(t);return e}function qk(r){return CY(r)?Jke(r):r6e(r)}var n6e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i6e=/^\w*$/;function jk(r,e){if(dc(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||Fk(r)?!0:i6e.test(r)||!n6e.test(r)||e!=null&&r in Object(e)}var Cg=ih(Object,"create");function s6e(){this.__data__=Cg?Cg(null):{},this.size=0}function o6e(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var a6e="__lodash_hash_undefined__",c6e=Object.prototype,l6e=c6e.hasOwnProperty;function u6e(r){var e=this.__data__;if(Cg){var t=e[r];return t===a6e?void 0:t}return l6e.call(e,r)?e[r]:void 0}var f6e=Object.prototype,h6e=f6e.hasOwnProperty;function d6e(r){var e=this.__data__;return Cg?e[r]!==void 0:h6e.call(e,r)}var p6e="__lodash_hash_undefined__";function g6e(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Cg&&e===void 0?p6e:e,this}function Bf(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Bf.prototype.clear=s6e;Bf.prototype.delete=o6e;Bf.prototype.get=u6e;Bf.prototype.has=d6e;Bf.prototype.set=g6e;function m6e(){this.__data__=[],this.size=0}function jw(r,e){for(var t=r.length;t--;)if(IY(r[t][0],e))return t;return-1}var y6e=Array.prototype,v6e=y6e.splice;function b6e(r){var e=this.__data__,t=jw(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():v6e.call(e,t,1),--this.size,!0}function w6e(r){var e=this.__data__,t=jw(e,r);return t<0?void 0:e[t][1]}function x6e(r){return jw(this.__data__,r)>-1}function _6e(r,e){var t=this.__data__,n=jw(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}function El(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}El.prototype.clear=m6e;El.prototype.delete=b6e;El.prototype.get=w6e;El.prototype.has=x6e;El.prototype.set=_6e;var Tg=ih(Sl,"Map");function S6e(){this.size=0,this.__data__={hash:new Bf,map:new(Tg||El),string:new Bf}}function E6e(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Vw(r,e){var t=r.__data__;return E6e(e)?t[typeof e=="string"?"string":"hash"]:t.map}function A6e(r){var e=Vw(this,r).delete(r);return this.size-=e?1:0,e}function I6e(r){return Vw(this,r).get(r)}function C6e(r){return Vw(this,r).has(r)}function T6e(r,e){var t=Vw(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}function Al(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Al.prototype.clear=S6e;Al.prototype.delete=A6e;Al.prototype.get=I6e;Al.prototype.has=C6e;Al.prototype.set=T6e;var R6e="Expected a function";function Vk(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(R6e);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=t.cache;if(s.has(i))return s.get(i);var o=r.apply(this,n);return t.cache=s.set(i,o)||s,o};return t.cache=new(Vk.Cache||Al),t}Vk.Cache=Al;var k6e=500;function P6e(r){var e=Vk(r,function(n){return t.size===k6e&&t.clear(),n}),t=e.cache;return e}var O6e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,D6e=/\\(\\)?/g,$6e=P6e(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(O6e,function(t,n,i,s){e.push(i?s.replace(D6e,"$1"):n||t)}),e});function M6e(r){return r==null?"":SY(r)}function DY(r,e){return dc(r)?r:jk(r,e)?[r]:$6e(M6e(r))}function Kw(r){if(typeof r=="string"||Fk(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function $Y(r,e){e=DY(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[Kw(e[t++])];return t&&t==n?r:void 0}function B6e(r,e,t){var n=r==null?void 0:$Y(r,e);return n===void 0?t:n}function N6e(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}function L6e(){this.__data__=new El,this.size=0}function F6e(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function U6e(r){return this.__data__.get(r)}function z6e(r){return this.__data__.has(r)}var q6e=200;function j6e(r,e){var t=this.__data__;if(t instanceof El){var n=t.__data__;if(!Tg||n.length<q6e-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new Al(n)}return t.set(r,e),this.size=t.size,this}function il(r){var e=this.__data__=new El(r);this.size=e.size}il.prototype.clear=L6e;il.prototype.delete=F6e;il.prototype.get=U6e;il.prototype.has=z6e;il.prototype.set=j6e;function V6e(r,e){for(var t=-1,n=r==null?0:r.length,i=0,s=[];++t<n;){var o=r[t];e(o,t,r)&&(s[i++]=o)}return s}function K6e(){return[]}var H6e=Object.prototype,W6e=H6e.propertyIsEnumerable,eF=Object.getOwnPropertySymbols,G6e=eF?function(r){return r==null?[]:(r=Object(r),V6e(eF(r),function(e){return W6e.call(r,e)}))}:K6e;function Y6e(r,e,t){var n=e(r);return dc(r)?n:N6e(n,t(r))}function tF(r){return Y6e(r,qk,G6e)}var fT=ih(Sl,"DataView"),hT=ih(Sl,"Promise"),dT=ih(Sl,"Set"),rF="[object Map]",X6e="[object Object]",nF="[object Promise]",iF="[object Set]",sF="[object WeakMap]",oF="[object DataView]",J6e=nh(fT),Q6e=nh(Tg),Z6e=nh(hT),ePe=nh(dT),tPe=nh(lT),ql=dp;(fT&&ql(new fT(new ArrayBuffer(1)))!=oF||Tg&&ql(new Tg)!=rF||hT&&ql(hT.resolve())!=nF||dT&&ql(new dT)!=iF||lT&&ql(new lT)!=sF)&&(ql=function(r){var e=dp(r),t=e==X6e?r.constructor:void 0,n=t?nh(t):"";if(n)switch(n){case J6e:return oF;case Q6e:return rF;case Z6e:return nF;case ePe:return iF;case tPe:return sF}return e});var aF=Sl.Uint8Array,rPe="__lodash_hash_undefined__";function nPe(r){return this.__data__.set(r,rPe),this}function iPe(r){return this.__data__.has(r)}function ib(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new Al;++e<t;)this.add(r[e])}ib.prototype.add=ib.prototype.push=nPe;ib.prototype.has=iPe;function sPe(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}function oPe(r,e){return r.has(e)}var aPe=1,cPe=2;function MY(r,e,t,n,i,s){var o=t&aPe,a=r.length,c=e.length;if(a!=c&&!(o&&c>a))return!1;var l=s.get(r),u=s.get(e);if(l&&u)return l==e&&u==r;var f=-1,h=!0,d=t&cPe?new ib:void 0;for(s.set(r,e),s.set(e,r);++f<a;){var g=r[f],p=e[f];if(n)var m=o?n(p,g,f,e,r,s):n(g,p,f,r,e,s);if(m!==void 0){if(m)continue;h=!1;break}if(d){if(!sPe(e,function(y,v){if(!oPe(d,v)&&(g===y||i(g,y,t,n,s)))return d.push(v)})){h=!1;break}}else if(!(g===p||i(g,p,t,n,s))){h=!1;break}}return s.delete(r),s.delete(e),h}function lPe(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}function uPe(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var fPe=1,hPe=2,dPe="[object Boolean]",pPe="[object Date]",gPe="[object Error]",mPe="[object Map]",yPe="[object Number]",vPe="[object RegExp]",bPe="[object Set]",wPe="[object String]",xPe="[object Symbol]",_Pe="[object ArrayBuffer]",SPe="[object DataView]",cF=Su?Su.prototype:void 0,P2=cF?cF.valueOf:void 0;function EPe(r,e,t,n,i,s,o){switch(t){case SPe:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case _Pe:return!(r.byteLength!=e.byteLength||!s(new aF(r),new aF(e)));case dPe:case pPe:case yPe:return IY(+r,+e);case gPe:return r.name==e.name&&r.message==e.message;case vPe:case wPe:return r==e+"";case mPe:var a=lPe;case bPe:var c=n&fPe;if(a||(a=uPe),r.size!=e.size&&!c)return!1;var l=o.get(r);if(l)return l==e;n|=hPe,o.set(r,e);var u=MY(a(r),a(e),n,i,s,o);return o.delete(r),u;case xPe:if(P2)return P2.call(r)==P2.call(e)}return!1}var APe=1,IPe=Object.prototype,CPe=IPe.hasOwnProperty;function TPe(r,e,t,n,i,s){var o=t&APe,a=tF(r),c=a.length,l=tF(e),u=l.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var h=a[f];if(!(o?h in e:CPe.call(e,h)))return!1}var d=s.get(r),g=s.get(e);if(d&&g)return d==e&&g==r;var p=!0;s.set(r,e),s.set(e,r);for(var m=o;++f<c;){h=a[f];var y=r[h],v=e[h];if(n)var b=o?n(v,y,h,e,r,s):n(y,v,h,r,e,s);if(!(b===void 0?y===v||i(y,v,t,n,s):b)){p=!1;break}m||(m=h=="constructor")}if(p&&!m){var _=r.constructor,x=e.constructor;_!=x&&"constructor"in r&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof x=="function"&&x instanceof x)&&(p=!1)}return s.delete(r),s.delete(e),p}var RPe=1,lF="[object Arguments]",uF="[object Array]",gy="[object Object]",kPe=Object.prototype,fF=kPe.hasOwnProperty;function PPe(r,e,t,n,i,s){var o=dc(r),a=dc(e),c=o?uF:ql(r),l=a?uF:ql(e);c=c==lF?gy:c,l=l==lF?gy:l;var u=c==gy,f=l==gy,h=c==l;if(h&&uT(r)){if(!uT(e))return!1;o=!0,u=!1}if(h&&!u)return s||(s=new il),o||OY(r)?MY(r,e,t,n,i,s):EPe(r,e,c,t,n,i,s);if(!(t&RPe)){var d=u&&fF.call(r,"__wrapped__"),g=f&&fF.call(e,"__wrapped__");if(d||g){var p=d?r.value():r,m=g?e.value():e;return s||(s=new il),i(p,m,t,n,s)}}return h?(s||(s=new il),TPe(r,e,t,n,i,s)):!1}function Kk(r,e,t,n,i){return r===e?!0:r==null||e==null||!Ld(r)&&!Ld(e)?r!==r&&e!==e:PPe(r,e,t,n,Kk,i)}var OPe=1,DPe=2;function $Pe(r,e,t,n){var i=t.length,s=i;if(r==null)return!s;for(r=Object(r);i--;){var o=t[i];if(o[2]?o[1]!==r[o[0]]:!(o[0]in r))return!1}for(;++i<s;){o=t[i];var a=o[0],c=r[a],l=o[1];if(o[2]){if(c===void 0&&!(a in r))return!1}else{var u=new il,f;if(!(f===void 0?Kk(l,c,OPe|DPe,n,u):f))return!1}}return!0}function BY(r){return r===r&&!Uk(r)}function MPe(r){for(var e=qk(r),t=e.length;t--;){var n=e[t],i=r[n];e[t]=[n,i,BY(i)]}return e}function NY(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}function BPe(r){var e=MPe(r);return e.length==1&&e[0][2]?NY(e[0][0],e[0][1]):function(t){return t===r||$Pe(t,r,e)}}function NPe(r,e){return r!=null&&e in Object(r)}function LPe(r,e,t){e=DY(e,r);for(var n=-1,i=e.length,s=!1;++n<i;){var o=Kw(e[n]);if(!(s=r!=null&&t(r,o)))break;r=r[o]}return s||++n!=i?s:(i=r==null?0:r.length,!!i&&zk(i)&&AY(o,i)&&(dc(r)||RY(r)))}function FPe(r,e){return r!=null&&LPe(r,e,NPe)}var UPe=1,zPe=2;function qPe(r,e){return jk(r)&&BY(e)?NY(Kw(r),e):function(t){var n=B6e(t,r);return n===void 0&&n===e?FPe(t,r):Kk(e,n,UPe|zPe)}}function jPe(r){return function(e){return e?.[r]}}function VPe(r){return function(e){return $Y(e,r)}}function KPe(r){return jk(r)?jPe(Kw(r)):VPe(r)}function HPe(r){return typeof r=="function"?r:r==null?H3e:typeof r=="object"?dc(r)?qPe(r[0],r[1]):BPe(r):KPe(r)}function WPe(r,e,t,n){for(var i=-1,s=r==null?0:r.length;++i<s;){var o=r[i];e(n,o,t(o),r)}return n}function GPe(r){return function(e,t,n){for(var i=-1,s=Object(e),o=n(e),a=o.length;a--;){var c=o[++i];if(t(s[c],c,s)===!1)break}return e}}var YPe=GPe();function XPe(r,e){return r&&YPe(r,e,qk)}function JPe(r,e){return function(t,n){if(t==null)return t;if(!CY(t))return r(t,n);for(var i=t.length,s=-1,o=Object(t);++s<i&&n(o[s],s,o)!==!1;);return t}}var QPe=JPe(XPe);function ZPe(r,e,t,n){return QPe(r,function(i,s,o){e(n,i,t(i),o)}),n}function eOe(r,e){return function(t,n){var i=dc(t)?WPe:ZPe,s={};return i(t,r,HPe(n),s)}}var tOe=Object.prototype,rOe=tOe.hasOwnProperty,LY=eOe(function(r,e,t){rOe.call(r,t)?r[t].push(e):fke(r,t,[e])}),nOe=ye('<button class="relative cursor-pointer w-full py-2.5 rounded-md text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100 group"><div>Jupiter Lend</div><div class="absolute i-tabler:external-link size-5 right-3 top-1/2 -translate-y-1/2 group-hover:rotate-45 transition-100">'),iOe=ye('<button class="relative cursor-pointer w-full py-2.5 rounded-md text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100"><div>Swap Now'),sOe=ye('<button class="relative cursor-pointer w-full py-2.5 rounded-md text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100"><div>Receive NFT'),oOe=ye('<button class="relative cursor-pointer w-full py-2.5 rounded-md text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100"><div>Receive SOL'),aOe=ye('<button class="relative cursor-pointer w-full py-2.5 rounded-md text-zinc-400 font-semibold ring-1 ring-zinc-600 active:ring-zinc-500 transition-100"><div>Buy SOL'),cOe=ye('<div class="p-3 flex flex-col items-center"><div class="size-20 rounded-full bg-linear-to-b from-zinc-800 to-zinc-950 my-4 flex items-center justify-center"><div class="size-12 rounded-full bg-zinc-700 flex items-center justify-center"><div class="size-7 text-zinc-400"></div></div></div><div class="font-medium mb-2"></div><div class="text-sm text-zinc-400 text-center leading-4"></div><div class="mt-8 w-full space-y-2">');const dm=r=>{const e=Co(),t=ke(()=>`Your ${r.type==="token"?"tokens":r.type==="defi"?"DeFi positions":r.type==="nft"?"NFTs":r.type==="activity"?"activity":"trades"} will appear here`),n=ke(()=>`${r.type==="pnl"?"Swap or trade any token":r.type==="defi"?"Head to Jupiter Lend":r.type==="nft"?"Deposit or buy NFTs":"Deposit or buy tokens"} to get started`);return(()=>{var i=cOe(),s=i.firstChild,o=s.firstChild,a=o.firstChild,c=s.nextSibling,l=c.nextSibling,u=l.nextSibling;return ce(c,t),ce(l,n),ce(u,D(yr,{get children(){return[D(Ne,{get when(){return r.type==="defi"},get children(){var f=nOe();return f.$$click=()=>window.open(Sa.LEND,"_blank"),f}}),D(Ne,{get when(){return r.type==="pnl"},get children(){var f=iOe();return f.$$click=()=>e(vt.SWAP),f}}),D(Ne,{get when(){return r.type==="nft"},get children(){var f=sOe();return f.$$click=()=>e(vt.RECEIVE),f}}),D(Ne,{when:!0,get children(){return[(()=>{var f=oOe();return f.$$click=()=>e(vt.RECEIVE),f})(),(()=>{var f=aOe();return f.$$click=()=>window.open(Sa.ONBOARD,"_blank"),f})()]}})]}})),ht(f=>Gr(a,{"i-tabler:device-analytics":r.type==="defi","i-tabler:currency-solana":r.type==="token","i-tabler:list-details":r.type==="activity","i-tabler:arrows-left-right":r.type==="pnl","i-tabler:photo-spark":r.type==="nft"},f)),i})()};Yt(["click"]);var lOe=ye('<div class="fixed inset-0 flex items-center justify-center z-101">'),uOe=ye('<div class="i-tabler:x size-5">'),fOe=ye('<div class="text-2xl font-semibold">'),hOe=ye('<div class="text-zinc-400 font-medium">'),dOe=ye('<div class="w-full bg-zinc-950 mt-6 rounded-b-xl divide-y divide-zinc-800"><div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400>Date</div><div class=font-medium></div></div><div class="py-3 px-4 space-y-3"><div class="flex items-center justify-between"><div class=text-zinc-400>Balance Changes</div><div class=text-zinc-400></div></div></div><div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400>Status</div><div class=font-medium></div></div><div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400>Transaction</div><button class="font-medium flex items-center gap-1 text-primary-200 cursor-pointer"><div class="i-tabler:external-link size-5">'),pOe=ye('<div class="flex items-center gap-3"><div class=font-semibold></div><div class=flex-1></div><div class="flex flex-col items-end"><div class=font-medium>');const gOe=r=>{function e(t){t||r.onClose()}return D(Hn,{get open(){return!!r.transaction},onOpenChange:e,get children(){return D(Hn.Portal,{get children(){return[D(Hn.Overlay,{class:"fixed inset-0 backdrop-blur z-100"}),(()=>{var t=lOe();return ce(t,D(Hn.Content,{class:"bg-zinc-900 rounded-xl max-w-95vw w-md ring-1 ring-zinc-700",get children(){return D(We,{get when(){return r.transaction},children:n=>D(Hn.Description,{class:"relative flex flex-col items-center justify-center",get children(){return[D(Hn.CloseButton,{class:"absolute top-0 right-0 m-2 cursor-pointer bg-zinc-900 hover:bg-zinc-800 p-2 rounded-md -m-2 transition-100 text-zinc-500 hover:text-zinc-200",get children(){return uOe()}}),D(Rn,{get src(){return n().platformImage},class:"size-16 mt-8 mb-4",hd:!0}),(()=>{var i=fOe();return ce(i,()=>n().platform),i})(),(()=>{var i=hOe();return ce(i,()=>n().type),i})(),(()=>{var i=dOe(),s=i.firstChild,o=s.firstChild,a=o.nextSibling,c=s.nextSibling,l=c.firstChild,u=l.firstChild,f=u.nextSibling,h=c.nextSibling,d=h.firstChild,g=d.nextSibling,p=h.nextSibling,m=p.firstChild,y=m.nextSibling;return y.firstChild,ce(a,()=>new Date(n().timestamp).toLocaleString()),ce(f,D(We,{get when(){return n().balanceChanges.length===0},get children(){return us.DASH}})),ce(c,D(Lt,{get each(){return n().balanceChanges},children:({id:v,icon:b,symbol:_,amount:x})=>(()=>{var E=pOe(),S=E.firstChild,C=S.nextSibling,k=C.nextSibling,$=k.firstChild;return ce(E,D(Rn,{src:b}),S),ce(S,()=>_||v.slice(0,4)),$.classList.toggle("text-red-400",x<0),$.classList.toggle("text-green-400",x>0),ce($,D(Dk,{value:x,override:{minimumFractionDigits:2,maximumFractionDigits:9}})),E})()}),null),ce(g,D(We,{get when(){return n().status==="success"},fallback:"Failed",children:"Successful"})),y.$$click=()=>window.open(`https://solscan.io/tx/${n().signature}`,"_blank"),ce(y,D(Yo,{get address(){return n().signature}}),null),ht(v=>{var b=n().status==="success",_=n().status==="revert";return b!==v.e&&g.classList.toggle("text-green-400",v.e=b),_!==v.t&&g.classList.toggle("text-red-400",v.t=_),v},{e:void 0,t:void 0}),i})()]}})})}})),t})()]}})}})};Yt(["click"]);var mOe=ye('<div class="h-12 px-4 flex items-center"><div class="h-5 w-32 bg-zinc-900 animate-pulse rounded">'),yOe=ye('<div class="p-3 flex items-center justify-center border-t border-zinc-800 text-zinc-500 gap-2"><div class="i-tabler:loader-2 animate-spin size-5"></div><div>Loading more...'),vOe=ye('<button class="w-full p-3 flex items-center justify-center border-t border-zinc-800 bg-zinc-800 active:bg-zinc-800/75 cursor-pointer font-medium gap-2"><div>Load more'),bOe=ye('<div class="p-3 flex items-center justify-center border-t border-zinc-800 text-zinc-500 gap-2"><div>No more activity'),wOe=ye("<div>"),xOe=ye('<div class="h-15 items-center flex gap-3 px-4"><div class="size-8 rounded-full bg-zinc-900 animate-pulse rounded ring-1 ring-zinc-800"></div><div class=space-y-1><div class="h-4 w-24 bg-zinc-900 animate-pulse rounded"></div><div class="h-3 w-16 bg-zinc-900 animate-pulse rounded"></div></div><div class=flex-1></div><div class="h-4 w-24 bg-zinc-900 animate-pulse rounded">'),_Oe=ye('<div class="divide-y divide-zinc-800">'),SOe=ye('<div class><div class="sticky top-12 h-12 px-4 flex items-center bg-zinc-950 z-9"><div class=text-zinc-400>'),EOe=ye('<div class="flex items-center gap-3 px-4 h-15 hover:bg-zinc-900 cursor-pointer"><div class=relative><div class="absolute bottom--0.5 right--1 rounded-full size-4 p-0.5 flex items-center justify-center"><div></div></div></div><div class=space-y-0.5><div class="font-medium leading-none"></div><div class="text-zinc-400 text-sm leading-none"></div></div><div class=flex-1></div><div class="flex flex-col gap-0.5">'),AOe=ye('<span class="ml-1 text-xs p-0.75 text-zinc-400 bg-zinc-800 rounded leading-none">+'),IOe=ye('<div class="flex justify-end items-center">');function COe(r){return new Date(r).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})}const TOe=r=>{const e=wY(),t=yY(()=>r.isVisible),n=ke(()=>{if(!t.data)return{};const a=t.data.pages.flatMap(c=>c.transactions);return a.length===0?{}:LY(a,c=>COe(c.timestamp))}),i=ke(()=>t.data?t.data.pages.every(a=>a.transactions.length===0):!0);it(kn(()=>e.y,a=>{a+window.innerHeight+369<document.body.scrollHeight||!r.isVisible||t.isFetching||t.fetchNextPage()}));const[s,o]=$e(null);return(()=>{var a=wOe();return ce(a,D(gOe,{get transaction(){return s()},onClose:()=>o(null)}),null),ce(a,D(yr,{get children(){return[D(Ne,{get when(){return!t.data},get children(){return[mOe(),D(Lt,{get each(){return new Array(10).fill(void 0)},children:()=>xOe()})]}}),D(Ne,{get when(){return i()},get children(){return D(dm,{type:"activity"})}}),D(Ne,{get when(){return Or(()=>!!t.data)()&&Object.entries(n())},children:c=>(()=>{var l=_Oe();return ce(l,D(Lt,{get each(){return c()},children:([u,f])=>(()=>{var h=SOe(),d=h.firstChild,g=d.firstChild;return ce(g,u),ce(h,D(Lt,{each:f,children:p=>(()=>{var m=EOe(),y=m.firstChild,v=y.firstChild,b=v.firstChild,_=y.nextSibling,x=_.firstChild,E=x.nextSibling,S=_.nextSibling,C=S.nextSibling;return m.$$click=()=>o(p),ce(y,D(Rn,{get src(){return p.platformImage}}),v),ce(x,()=>p.platform),ce(E,()=>p.type),ce(C,D(Lt,{get each(){return p.balanceChanges.slice(0,2)},children:(k,$)=>(()=>{var J=IOe();return ce(J,D(pi,{class:"text-sm leading-none",get value(){return k.amount},get prefix(){return k.amount>0?"+":us.DASH},get suffix(){return` ${k.symbol||k.id.slice(0,4)}`},style:"long",get classList(){return{"text-green-400":k.amount>0,"text-red-400":k.amount<0}}}),null),ce(J,D(We,{get when(){return $()===1&&p.balanceChanges.length>2},get children(){var j=AOe();return j.firstChild,ce(j,()=>p.balanceChanges.length-2,null),j}}),null),J})()})),ht(k=>{var $=p.status==="success",J=p.status==="revert",j={"i-tabler:check text-green-400":p.status==="success","i-tabler:x text-red-400":p.status==="revert"};return $!==k.e&&v.classList.toggle("bg-green-950",k.e=$),J!==k.t&&v.classList.toggle("bg-red-950",k.t=J),k.a=Gr(b,j,k.a),k},{e:void 0,t:void 0,a:void 0}),m})()}),null),h})()})),l})()})]}}),null),ce(a,D(We,{get when(){return!i()},get children(){return D(yr,{get children(){return[D(Ne,{get when(){return t.isFetching},get children(){return yOe()}}),D(Ne,{get when(){return t.hasNextPage},get children(){var c=vOe();return c.$$click=()=>t.fetchNextPage(),c}}),D(Ne,{get when(){return!t.hasNextPage},get children(){return bOe()}})]}})}}),null),ht(()=>a.classList.toggle("hidden",!r.isVisible)),a})()};Yt(["click"]);var ROe=ye('<div class="h-5 w-20 bg-zinc-800 animate-pulse rounded">'),kOe=ye("<div class=text-zinc-400>"),POe=ye('<div class="flex justify-between py-3 px-4 text-sm"><div class="text-zinc-400 flex items-center gap-1"><div>Positions:</div></div><button class="flex items-center text-zinc-400 gap-1 hover:text-primary-200 transition-100 cursor-pointer"><div class=i-tabler:external-link></div><div>View Portfolio'),hF=ye('<div class="space-y-3 pb-3">'),OOe=ye('<div class="text-center text-zinc-500 border-t border-zinc-800 p-3">No more positions'),DOe=ye("<div><div class=px-4>"),$Oe=ye('<div class="ring-1.5 ring-zinc-900 rounded-xl bg-zinc-900 h-13 flex items-center space-x-3 p-3"><div class="size-7 rounded-full bg-zinc-800 animate-pulse"></div><div class="h-5 w-20 rounded bg-zinc-800 animate-pulse"></div><div class=flex-1></div><div class="h-5 w-16 rounded bg-zinc-800 animate-pulse">'),MOe=ye('<div class="font-medium truncate">'),BOe=ye('<div class="flex-1 mx--3">'),NOe=ye('<div class="flex-none i-tabler:chevron-down size-5 text-zinc-500 group-hover:text-zinc-50 transition-100 ui-expanded:rotate-180">'),LOe=ye('<div class="px-3 pt-3 pb-1 space-y-3">'),FOe=ye('<button class="p-1.5 ml--3 text-zinc-500 hover:text-primary-200 cursor-pointer transition-100"><div class="i-tabler:external-link size-4.5">'),UOe=ye('<div class="font-medium text-zinc-400">'),zOe=ye('<div class><div class="text-xs font-semibold tracking-wider uppercase text-zinc-500"></div><div class>'),qOe=ye('<div class="text-right space-y-0.5"><div class="font-medium leading-none">'),jOe=ye('<div class="flex items-center gap-3 h-11"><div class="flex items-center flex-none"></div><div class="font-medium truncate"></div><div class="flex-1 ml--3">'),VOe=ye("<div>"),KOe=ye("<div class=text-zinc-500>"),HOe=ye('<div class="text-sm leading-none text-zinc-400">');const O2=us.STAR.repeat(4),WOe=r=>{const{selectedAccount:e}=Jr(),{query:t,data:n}=vY(),{settings:i}=Pa(),s=ke(()=>n.platforms.length===0);return(()=>{var o=DOe(),a=o.firstChild;return ce(o,D(We,{get when(){return!t.isFetched||!s()},get fallback(){return D(dm,{type:"defi"})},get children(){var c=POe(),l=c.firstChild;l.firstChild;var u=l.nextSibling;return ce(l,D(yr,{get children(){return[D(Ne,{get when(){return!t.data},get children(){return ROe()}}),D(Ne,{get when(){return i.showBalances},get children(){return D(vn,{class:"font-medium text-zinc-50",get value(){return n.totalValue},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})}}),D(Ne,{when:!0,get children(){var f=kOe();return ce(f,O2),f}})]}}),null),u.$$click=()=>window.open(Sa.PORTFOLIO(e()?.address??""),"_blank"),c}}),a),ce(a,D(yr,{get children(){return[D(Ne,{get when(){return!t.data},get children(){var c=hF();return ce(c,D(Lt,{get each(){return new Array(5).fill(void 0)},children:(l,u)=>(()=>{var f=$Oe();return ht(h=>(h=(100-u()*20)/100)!=null?f.style.setProperty("opacity",h):f.style.removeProperty("opacity")),f})()})),c}}),D(Ne,{get when(){return!s()},get children(){return(()=>{var c=hF();return ce(c,D(Lt,{get each(){return n.platforms},children:l=>D(by,{class:"w-full ring-1.5 ring-zinc-900 rounded-xl bg-zinc-900/50",get children(){return[D(by.Trigger,{class:"rounded-xl px-3 h-13 flex items-center gap-x-3 bg-zinc-900 w-full cursor-pointer group",get children(){return[D(Rn,{get src(){return l.platform.image},class:"size-7 ring-0"}),(()=>{var u=MOe();return ce(u,()=>l.platform.label),u})(),D(We,{get when(){return l.platform.url},children:u=>(()=>{var f=FOe();return f.$$click=h=>{h.stopImmediatePropagation(),window.open(u(),"_blank")},f})()}),BOe(),D(We,{get when(){return i.showBalances},get fallback(){return(()=>{var u=UOe();return ce(u,O2),u})()},get children(){return D(vn,{class:"font-medium",get value(){return l.value},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})}}),NOe()]}}),D(by.Content,{class:"rounded-b-xl animate-[collapsible-slide-up_100ms] ui-expanded:animate-[collapsible-slide-down_100ms] overflow-hidden",get children(){var u=LOe();return ce(u,D(Lt,{get each(){return l.positions},children:f=>(()=>{var h=zOe(),d=h.firstChild,g=d.nextSibling;return ce(d,()=>f.category),ce(g,D(Lt,{get each(){return f.assets},children:p=>(()=>{var m=jOe(),y=m.firstChild,v=y.nextSibling,b=v.nextSibling;return ce(y,D(Lt,{get each(){return p.icons},children:(_,x)=>(()=>{var E=VOe();return ce(E,D(Rn,{src:_,class:"size-full"})),ht(S=>{var C=Xr("size-6",{"-ml-1":x()>0}),k=p.icons.length-x();return C!==S.e&&ui(E,S.e=C),k!==S.t&&((S.t=k)!=null?E.style.setProperty("z-index",k):E.style.removeProperty("z-index")),S},{e:void 0,t:void 0}),E})()})),ce(v,()=>p.symbol),ce(m,D(We,{get when(){return p.yield},children:_=>D(fm,{class:"text-xs font-medium ml--2 py-0.5 whitespace-nowrap",get value(){return _()*100},suffix:" APY"})}),b),ce(m,D(We,{get when(){return i.showBalances},get fallback(){return(()=>{var _=KOe();return ce(_,O2),_})()},get children(){var _=qOe(),x=_.firstChild;return ce(x,D(vn,{get value(){return p.value},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),ce(_,D(We,{get when(){return p.amount},children:E=>(()=>{var S=HOe();return ce(S,D(pi,{get value(){return E()},style:"long"})),S})()}),null),_}}),null),m})()})),h})()})),u}})]}})})),c})()}})]}})),ce(o,D(We,{get when(){return Or(()=>!!t.data)()&&!s()},get children(){return OOe()}}),null),ht(()=>o.classList.toggle("hidden",!r.isVisible)),o})()};Yt(["click"]);var GOe=ye('<div class="leading-tight text-zinc-300">'),YOe=ye('<div class="grid grid-cols-2 gap-4 mt-6">'),XOe=ye('<div class=space-y-4><div class="w-full border-b border-zinc-700"></div><div><h3 class="font-medium underline underline-offset-8 decoration-primary-200">Attributes'),JOe=ye('<div class="size-full w-full h-40 flex rounded-xl bg-zinc-800 flex items-center justify-center"><div class="i-tabler:question-mark size-24 text-zinc-400">'),QOe=ye('<div class="w-full h-32 flex items-center justify-center text-zinc-500 text-sm font-semibold tracking-wider">NO ATTRIBUTES'),ZOe=ye('<div class><div class="text-xs uppercase text-zinc-400 leading-tight font-medium"></div><div class="font-medium text-sm leading-tight">'),dF=ye('<div class="p-3 grid grid-cols-2 gap-3">'),e4e=ye('<div class="p-3 flex items-center justify-center border-t border-zinc-800 text-zinc-500 gap-2"><div class="i-tabler:loader-2 animate-spin size-5"></div><div>Loading more...'),t4e=ye('<button class="w-full p-3 flex items-center justify-center border-t border-zinc-800 bg-zinc-800 active:bg-zinc-800/75 cursor-pointer font-medium gap-2"><div>Load more'),r4e=ye('<div class="p-3 flex items-center justify-center border-t border-zinc-800 text-zinc-500 gap-2"><div>No more NFTs'),n4e=ye("<div>"),i4e=ye('<div class="rounded-xl bg-zinc-900 animate-pulse aspect-square">'),s4e=ye('<button class="relative cursor-pointer hover:scale-103 transition-100 rounded-xl bg-zinc-800"><div class="absolute bottom-1 left-1 bg-zinc-950/50 backdrop-blur px-2 py-1 rounded-lg text-sm font-semibold whitespace-nowrap truncate max-w-[calc(100%-0.5rem)]">'),o4e=ye('<div class="size-full aspect-square flex rounded-xl bg-zinc-800 flex items-center justify-center"><div class="i-tabler:question-mark size-24 text-zinc-400">');const pF=30,a4e=r=>{const{selectedAccount:e}=Jr(),t=o7(()=>({queryKey:["nfts",e()?.address],queryFn:async({pageParam:o})=>ss.getNfts({address:e().address,page:o,limit:pF}),initialPageParam:1,getNextPageParam:o=>o.items.length===pF?o.page+1:void 0,enabled:!!e()?.address})),n=wY(),i=Ws();function s(o){i.open({title:o.name,content:(()=>{var a=XOe(),c=a.firstChild,l=c.nextSibling;return l.firstChild,ce(a,D(Rn,{get src(){return o.image},class:"object-cover rounded-xl size-full min-h-40 ring-0",hd:!0,get fallback(){return JOe()}}),c),ce(a,D(We,{get when(){return o.description},get children(){var u=GOe();return ce(u,()=>o.description),u}}),c),ce(l,D(We,{get when(){return o.attributes.length},get fallback(){return QOe()},get children(){var u=YOe();return ce(u,D(Lt,{get each(){return o.attributes},children:({key:f,value:h})=>(()=>{var d=ZOe(),g=d.firstChild,p=g.nextSibling;return ce(g,f),ce(p,h),d})()})),u}}),null),a})()})}return it(kn(()=>n.y,o=>{o+window.innerHeight+369<document.body.scrollHeight||!r.isVisible||t.isFetching||t.fetchNextPage()})),(()=>{var o=n4e();return ce(o,D(yr,{get children(){return[D(Ne,{get when(){return t.isLoading},get children(){var a=dF();return ce(a,D(Lt,{each:[1,2,3,4,5,6],children:()=>i4e()})),a}}),D(Ne,{get when(){return!t.data?.pages.at(0)?.items.length},get children(){return D(dm,{type:"nft"})}}),D(Ne,{get when(){return t.data},get children(){return[(()=>{var a=dF();return ce(a,D(Lt,{get each(){return t.data?.pages.flatMap(c=>c.items)},children:c=>(()=>{var l=s4e(),u=l.firstChild;return l.$$click=()=>s(c),ce(l,D(Rn,{get src(){return c.image},class:"object-cover aspect-square rounded-xl size-full",hd:!0,get fallback(){return o4e()}}),u),ce(u,()=>c.name),l})()})),a})(),D(yr,{get children(){return[D(Ne,{get when(){return t.isFetching},get children(){return e4e()}}),D(Ne,{get when(){return t.hasNextPage},get children(){var a=t4e();return a.$$click=()=>t.fetchNextPage(),a}}),D(Ne,{get when(){return!t.hasNextPage},get children(){return r4e()}})]}})]}})]}})),ht(()=>o.classList.toggle("hidden",!r.isVisible)),o})()};Yt(["click"]);var c4e=ye('<button class="flex items-end text-xs bg-primary-200/7 px-0.75 rounded text-primary-200 font-medium ring-1 hover:ring-primary-200 ring-primary-200/40 cursor-pointer transition-100 leading-none py-0.1 group"><div></div><div class="i-tabler:external-link size-3.5 ml-1 text-primary-200/75 group-hover:text-primary-200 transition-100">');const l4e=r=>D(We,{get when(){return r.links?.at(0)},children:e=>(()=>{var t=c4e(),n=t.firstChild;return t.$$click=i=>{i.stopImmediatePropagation(),window.open(e().url,"_blank")},ce(n,()=>e().label),t})()});Yt(["click"]);var u4e=ye('<div class="text-center text-zinc-500 border-t border-zinc-800 p-3">No more tokens'),f4e=ye("<div><div>"),h4e=ye('<div class="flex items-center gap-4 px-4 h-15"><div class="rounded-full size-8 bg-zinc-900 animate-pulse ring-1 ring-zinc-800"></div><div class="flex flex-col items-start gap-1"><div class="h-4 w-12 bg-zinc-900 animate-pulse rounded"></div><div class="h-3 w-24 bg-zinc-900 animate-pulse rounded"></div></div><div class=flex-1></div><div class="flex flex-col items-end gap-1"><div class="h-4 w-20 bg-zinc-900 animate-pulse rounded"></div><div class="h-3 w-12 bg-zinc-900 animate-pulse rounded">'),d4e=ye('<div class="size-4 i-tabler:rosette-discount-check text-primary-200">'),p4e=ye('<div class="text-right space-y-0.5"><div class="font-medium leading-none"></div><div class="text-sm leading-none text-zinc-400">'),g4e=ye('<button class="w-full text-left cursor-pointer flex items-center gap-3 px-4 h-15 hover:bg-zinc-900"><div class=space-y-0.5><div class="flex items-center gap-1"><div class="font-semibold leading-none"></div></div><div class="flex gap-1"><div class="text-sm leading-none text-zinc-400"></div><div class="text-sm leading-none text-zinc-400"></div></div></div><div class=flex-1>'),m4e=ye('<div class="text-zinc-500 text-lg">');const y4e=us.STAR.repeat(4),v4e=r=>{const e=Co(),t=ra(),{settings:n}=Pa(),i=ke(()=>t.data?.tokens.every(s=>s.amount===0));return(()=>{var s=f4e(),o=s.firstChild;return ce(o,D(yr,{get children(){return[D(Ne,{get when(){return!t.data},get children(){return D(Lt,{get each(){return new Array(20).fill(void 0)},children:()=>h4e()})}}),D(Ne,{get when(){return i()},get children(){return D(dm,{type:"token"})}}),D(Ne,{get when(){return t.data},children:a=>D(Lt,{get each(){return a().tokens},children:({icon:c,id:l,symbol:u,amount:f,value:h,price:d,priceChange:g,isVerified:p,links:m})=>(()=>{var y=g4e(),v=y.firstChild,b=v.firstChild,_=b.firstChild,x=b.nextSibling,E=x.firstChild,S=E.nextSibling;return v.nextSibling,y.$$click=()=>e(vt.ASSETS(l)),ce(y,D(Rn,{src:c}),v),ce(_,()=>u||l.slice(0,4)),ce(b,D(We,{when:p,get children(){return d4e()}}),null),ce(b,D(l4e,{links:m}),null),ce(E,D(pi,{value:d,prefix:"$",style:"long"})),S.classList.toggle("hidden",!g),ce(S,D(fm,{value:g})),ce(y,D(We,{get when(){return n.showBalances},get fallback(){return(()=>{var C=m4e();return ce(C,y4e),C})()},get children(){var C=p4e(),k=C.firstChild,$=k.nextSibling;return ce(k,D(vn,{value:h,prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),ce($,D(pi,{value:f,style:"long"})),C}}),null),y})()})})]}})),ce(s,D(We,{get when(){return Or(()=>!!t.data)()&&!i()},get children(){return u4e()}}),null),ht(()=>s.classList.toggle("hidden",!r.isVisible)),s})()};Yt(["click"]);var b4e=ye('<div class="bg-zinc-800 h-9 w-44 animate-pulse rounded">'),w4e=ye('<div class="i-tabler:loader animate-spin size-4 text-zinc-400">'),x4e=ye('<div class="flex items-center gap-1">'),_4e=ye('<div class="bg-zinc-800 h-5 w-20 animate-pulse rounded">'),S4e=ye(`<div class=relative><div class="space-y-4 p-4 bg-zinc-900"><div><div class="text-3xl font-semibold transition-100"></div><div class="flex items-center justify-between font-medium"><button class="flex items-center cursor-pointer text-zinc-300 hover:text-zinc-50 transition-100 group border-b border-transparent hover:border-zinc-300 border-dashed"><div class=mr-1.25>Today's PnL:</div> <div class="size-4.5 i-tabler:chevron-right ml-0.75 mr--1"></div></button><div class="flex gap-1"><button class="cursor-pointer rounded hover:text-zinc-100 bg-zinc-900 hover:bg-zinc-800 p-1 text-zinc-400 transition-100"><div class=size-5></div></button><button class="cursor-pointer rounded hover:text-zinc-100 bg-zinc-900 hover:bg-zinc-800 p-1 text-zinc-400 transition-100"><div class="i-tabler:refresh size-5"></div></button></div></div></div><div class="flex items-center justify-between gap-2"></div></div><div class="mx-0.1 sticky top-0 bg-zinc-950 z-10 border-b border-zinc-800 h-12 flex items-center"><div class="flex items-center px-3 gap-2">`),E4e=ye('<button class="flex flex-col justify-center items-center gap-2 group cursor-pointer"><div class="bg-zinc-800 rounded-full size-12 flex items-center justify-center ring-1 ring-zinc-800 group-hover:ring-primary-200 group-active:bg-zinc-800/75 transition-100"><div></div></div><div class="text-zinc-400 group-hover:text-zinc-100 transition-100 text-sm font-medium">'),A4e=ye('<div class="cursor-pointer text-center font-medium px-2 transition-100 w-18 h-12 flex items-center justify-center border-t-4 border-t-transparent">');const gF=us.STAR.repeat(4),I4e=()=>{const r=Co(),{settings:e,updateUserSettings:t}=Pa(),[n,i]=$e("Tokens"),{query:s,data:o}=vY(),a=ra(),c=bY(),l=yY(()=>!1),u=ke(()=>s.isFetching||a.isFetching||c.isFetching);function f(){s.refetch(),a.refetch(),c.refetch(),n()==="Activity"&&l.refetch()}const h=[{icon:"i-tabler:arrows-left-right",label:"Swap",onClick:()=>{r(vt.SWAP)}},{icon:"i-tabler:arrow-up-right",label:"Send",onClick:()=>{r(vt.SEND)}},{icon:"i-tabler:arrow-down-left",label:"Receive",onClick:()=>{r(vt.RECEIVE)}},{icon:"i-tabler:credit-card",label:"Buy",onClick:()=>{window.open(Sa.ONBOARD,"_blank")}}];async function d(){await t({type:"setShowBalances",showBalances:!e.showBalances})}return(()=>{var g=S4e(),p=g.firstChild,m=p.firstChild,y=m.firstChild,v=y.nextSibling,b=v.firstChild,_=b.firstChild,x=_.nextSibling,E=x.nextSibling,S=b.nextSibling,C=S.firstChild,k=C.firstChild,$=C.nextSibling,J=$.firstChild,j=m.nextSibling,L=p.nextSibling,w=L.firstChild;return ce(y,D(yr,{get children(){return[D(Ne,{get when(){return a.isLoading&&s.isLoading},get children(){return b4e()}}),D(Ne,{get when(){return e.showBalances},get children(){var R=x4e();return ce(R,D(ya,{get children(){return D(vn,{get value(){return(a.data?.totalValue??0)+o.totalValue},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2},showZero:!0})}}),null),ce(R,D(We,{get when(){return a.isFetching||s.isFetching},get children(){return w4e()}}),null),R}}),D(Ne,{when:!0,children:gF})]}})),b.$$click=()=>r(vt.PNL),ce(b,D(yr,{get children(){return[D(Ne,{get when(){return c.isLoading},get children(){return _4e()}}),D(Ne,{get when(){return e.showBalances&&c.data},children:R=>D(Dk,{get value(){return R()["1d"].pnlTotal??0},prefix:"$"})}),D(Ne,{when:!0,children:gF})]}}),E),C.$$click=d,$.$$click=()=>f(),ce(j,D(Lt,{each:h,children:({label:R,icon:N,onClick:Y})=>(()=>{var z=E4e(),G=z.firstChild,te=G.firstChild,X=G.nextSibling;return zs(z,"click",Y,!0),ce(X,R),ht(()=>ui(te,Xr(N,"size-5.5 text-primary-200"))),z})()})),ce(w,D(Lt,{each:["Tokens","DeFi","NFTs","Activity"],children:R=>(()=>{var N=A4e();return N.$$click=()=>i(R),ce(N,R),ht(Y=>Gr(N,{"border-b-2 border-b-primary-200":n()===R,"text-zinc-500 hover:text-zinc-300 border-b-2 border-b-transparent":n()!==R},Y)),N})()})),ce(g,D(v4e,{get isVisible(){return n()==="Tokens"}}),null),ce(g,D(WOe,{get isVisible(){return n()==="DeFi"}}),null),ce(g,D(a4e,{get isVisible(){return n()==="NFTs"}}),null),ce(g,D(TOe,{get isVisible(){return n()==="Activity"}}),null),ht(R=>{var N=!e.showBalances,Y=!e.showBalances,z={"i-tabler:eye":e.showBalances,"i-tabler:eye-off":!e.showBalances},G=u(),te={"animate-spin animate-direction-reverse":u()};return N!==R.e&&y.classList.toggle("text-zinc-400",R.e=N),Y!==R.t&&b.classList.toggle("text-zinc-400",R.t=Y),R.a=Gr(k,z,R.a),G!==R.o&&($.disabled=R.o=G),R.i=Gr(J,te,R.i),R},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),g})()};Yt(["click"]);function V0(r){let e=r[0],t=r[1],n=r[2];return Math.sqrt(e*e+t*t+n*n)}function pT(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function C4e(r,e,t,n){return r[0]=e,r[1]=t,r[2]=n,r}function mF(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function yF(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function T4e(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}function R4e(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r}function D2(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function k4e(r,e){let t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return Math.sqrt(t*t+n*n+i*i)}function P4e(r,e){let t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return t*t+n*n+i*i}function vF(r){let e=r[0],t=r[1],n=r[2];return e*e+t*t+n*n}function O4e(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r}function D4e(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r}function gT(r,e){let t=e[0],n=e[1],i=e[2],s=t*t+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),r[0]=e[0]*s,r[1]=e[1]*s,r[2]=e[2]*s,r}function FY(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function bF(r,e,t){let n=e[0],i=e[1],s=e[2],o=t[0],a=t[1],c=t[2];return r[0]=i*c-s*a,r[1]=s*o-n*c,r[2]=n*a-i*o,r}function $4e(r,e,t,n){let i=e[0],s=e[1],o=e[2];return r[0]=i+n*(t[0]-i),r[1]=s+n*(t[1]-s),r[2]=o+n*(t[2]-o),r}function M4e(r,e,t,n,i){const s=Math.exp(-n*i);let o=e[0],a=e[1],c=e[2];return r[0]=t[0]+(o-t[0])*s,r[1]=t[1]+(a-t[1])*s,r[2]=t[2]+(c-t[2])*s,r}function B4e(r,e,t){let n=e[0],i=e[1],s=e[2],o=t[3]*n+t[7]*i+t[11]*s+t[15];return o=o||1,r[0]=(t[0]*n+t[4]*i+t[8]*s+t[12])/o,r[1]=(t[1]*n+t[5]*i+t[9]*s+t[13])/o,r[2]=(t[2]*n+t[6]*i+t[10]*s+t[14])/o,r}function N4e(r,e,t){let n=e[0],i=e[1],s=e[2],o=t[3]*n+t[7]*i+t[11]*s+t[15];return o=o||1,r[0]=(t[0]*n+t[4]*i+t[8]*s)/o,r[1]=(t[1]*n+t[5]*i+t[9]*s)/o,r[2]=(t[2]*n+t[6]*i+t[10]*s)/o,r}function L4e(r,e,t){let n=e[0],i=e[1],s=e[2];return r[0]=n*t[0]+i*t[3]+s*t[6],r[1]=n*t[1]+i*t[4]+s*t[7],r[2]=n*t[2]+i*t[5]+s*t[8],r}function F4e(r,e,t){let n=e[0],i=e[1],s=e[2],o=t[0],a=t[1],c=t[2],l=t[3],u=a*s-c*i,f=c*n-o*s,h=o*i-a*n,d=a*h-c*f,g=c*u-o*h,p=o*f-a*u,m=l*2;return u*=m,f*=m,h*=m,d*=2,g*=2,p*=2,r[0]=n+u+d,r[1]=i+f+g,r[2]=s+h+p,r}const U4e=function(){const r=[0,0,0],e=[0,0,0];return function(t,n){pT(r,t),pT(e,n),gT(r,r),gT(e,e);let i=FY(r,e);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();function z4e(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]}class va extends Array{constructor(e=0,t=e,n=e){return super(e,t,n),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,t=e,n=e){return e.length?this.copy(e):(C4e(this,e,t,n),this)}copy(e){return pT(this,e),this}add(e,t){return t?mF(this,e,t):mF(this,this,e),this}sub(e,t){return t?yF(this,e,t):yF(this,this,e),this}multiply(e){return e.length?T4e(this,this,e):D2(this,this,e),this}divide(e){return e.length?R4e(this,this,e):D2(this,this,1/e),this}inverse(e=this){return D4e(this,e),this}len(){return V0(this)}distance(e){return e?k4e(this,e):V0(this)}squaredLen(){return vF(this)}squaredDistance(e){return e?P4e(this,e):vF(this)}negate(e=this){return O4e(this,e),this}cross(e,t){return t?bF(this,e,t):bF(this,this,e),this}scale(e){return D2(this,this,e),this}normalize(){return gT(this,this),this}dot(e){return FY(this,e)}equals(e){return z4e(this,e)}applyMatrix3(e){return L4e(this,this,e),this}applyMatrix4(e){return B4e(this,this,e),this}scaleRotateMatrix4(e){return N4e(this,this,e),this}applyQuaternion(e){return F4e(this,this,e),this}angle(e){return U4e(this,e)}lerp(e,t){return $4e(this,this,e,t),this}smoothLerp(e,t,n){return M4e(this,this,e,t,n),this}clone(){return new va(this[0],this[1],this[2])}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){const t=this[0],n=this[1],i=this[2];return this[0]=e[0]*t+e[4]*n+e[8]*i,this[1]=e[1]*t+e[5]*n+e[9]*i,this[2]=e[2]*t+e[6]*n+e[10]*i,this.normalize()}}const wF=new va;let q4e=1,j4e=1,xF=!1;class V4e{constructor(e,t={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=t,this.id=q4e++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let n in t)this.addAttribute(n,t[n])}addAttribute(e,t){if(this.attributes[e]=t,t.id=j4e++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.usage=t.usage||this.gl.STATIC_DRAW,t.buffer||this.updateAttribute(t),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else e==="index"?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){const t=!e.buffer;t&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),t?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((t,{name:n,type:i})=>{if(!this.attributes[n]){console.warn(`active attribute ${n} not being supplied`);return}const s=this.attributes[n];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let o=1;i===35674&&(o=2),i===35675&&(o=3),i===35676&&(o=4);const a=s.size/o,c=o===1?0:o*o*4,l=o===1?0:o*4;for(let u=0;u<o;u++)this.gl.vertexAttribPointer(t+u,a,s.type,s.normalized,s.stride+c,s.offset+u*l),this.gl.enableVertexAttribArray(t+u),this.gl.renderer.vertexAttribDivisor(t+u,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:t=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((i,{name:s})=>{const o=this.attributes[s];o.needsUpdate&&this.updateAttribute(o)});let n=2;this.attributes.index?.type===this.gl.UNSIGNED_INT&&(n=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*n,this.instancedCount):this.gl.renderer.drawArraysInstanced(t,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*n):this.gl.drawArrays(t,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!xF)return console.warn("No position buffer data found to compute bounds"),xF=!0}computeBoundingBox(e){e||(e=this.getPosition());const t=e.data,n=e.size;this.bounds||(this.bounds={min:new va,max:new va,center:new va,scale:new va,radius:1/0});const i=this.bounds.min,s=this.bounds.max,o=this.bounds.center,a=this.bounds.scale;i.set(1/0),s.set(-1/0);for(let c=0,l=t.length;c<l;c+=n){const u=t[c],f=t[c+1],h=t[c+2];i.x=Math.min(u,i.x),i.y=Math.min(f,i.y),i.z=Math.min(h,i.z),s.x=Math.max(u,s.x),s.y=Math.max(f,s.y),s.z=Math.max(h,s.z)}a.sub(s,i),o.add(i,s).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const t=e.data,n=e.size;this.bounds||this.computeBoundingBox(e);let i=0;for(let s=0,o=t.length;s<o;s+=n)wF.fromArray(t,s),i=Math.max(i,this.bounds.center.squaredDistance(wF));this.bounds.radius=Math.sqrt(i)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let K4e=1;const _F={};class H4e{constructor(e,{vertex:t,fragment:n,uniforms:i={},transparent:s=!1,cullFace:o=e.BACK,frontFace:a=e.CCW,depthTest:c=!0,depthWrite:l=!0,depthFunc:u=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=i,this.id=K4e++,t||console.warn("vertex shader not supplied"),n||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=o,this.frontFace=a,this.depthTest=c,this.depthWrite=l,this.depthFunc=u,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:t,fragment:n})}setShaders({vertex:e,fragment:t}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${SF(e)}`)),t&&(this.gl.shaderSource(this.fragmentShader,t),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${SF(t)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let n=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let o=0;o<n;o++){let a=this.gl.getActiveUniform(this.program,o);this.uniformLocations.set(a,this.gl.getUniformLocation(this.program,a.name));const c=a.name.match(/(\w+)/g);a.uniformName=c[0],a.nameComponents=c.slice(1)}this.attributeLocations=new Map;const i=[],s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let o=0;o<s;o++){const a=this.gl.getActiveAttrib(this.program,o),c=this.gl.getAttribLocation(this.program,a.name);c!==-1&&(i[c]=a.name,this.attributeLocations.set(a,c))}this.attributeOrder=i.join("")}setBlendFunc(e,t,n,i){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=n,this.blendFunc.dstAlpha=i,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}setStencilFunc(e,t,n){this.stencilRef=t,this.stencilFunc.func=e,this.stencilFunc.ref=t,this.stencilFunc.mask=n}setStencilOp(e,t,n){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=t,this.stencilOp.depthPass=n}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let t=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((i,s)=>{let o=this.uniforms[s.uniformName];for(const a of s.nameComponents){if(!o)break;if(a in o)o=o[a];else{if(Array.isArray(o.value))break;o=void 0;break}}if(!o)return EF(`Active uniform ${s.name} has not been supplied`);if(o&&o.value===void 0)return EF(`${s.name} uniform is missing a value parameter`);if(o.value.texture)return t=t+1,o.value.update(t),$2(this.gl,s.type,i,t);if(o.value.length&&o.value[0].texture){const a=[];return o.value.forEach(c=>{t=t+1,c.update(t),a.push(t)}),$2(this.gl,s.type,i,a)}$2(this.gl,s.type,i,o.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function $2(r,e,t,n){n=n.length?W4e(n):n;const i=r.renderer.state.uniformLocations.get(t);if(n.length)if(i===void 0||i.length!==n.length)r.renderer.state.uniformLocations.set(t,n.slice(0));else{if(G4e(i,n))return;i.set?i.set(n):Y4e(i,n),r.renderer.state.uniformLocations.set(t,i)}else{if(i===n)return;r.renderer.state.uniformLocations.set(t,n)}switch(e){case 5126:return n.length?r.uniform1fv(t,n):r.uniform1f(t,n);case 35664:return r.uniform2fv(t,n);case 35665:return r.uniform3fv(t,n);case 35666:return r.uniform4fv(t,n);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return n.length?r.uniform1iv(t,n):r.uniform1i(t,n);case 35671:case 35667:return r.uniform2iv(t,n);case 35672:case 35668:return r.uniform3iv(t,n);case 35673:case 35669:return r.uniform4iv(t,n);case 35674:return r.uniformMatrix2fv(t,!1,n);case 35675:return r.uniformMatrix3fv(t,!1,n);case 35676:return r.uniformMatrix4fv(t,!1,n)}}function SF(r){let e=r.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function W4e(r){const e=r.length,t=r[0].length;if(t===void 0)return r;const n=e*t;let i=_F[n];i||(_F[n]=i=new Float32Array(n));for(let s=0;s<e;s++)i.set(r[s],s*t);return i}function G4e(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function Y4e(r,e){for(let t=0,n=r.length;t<n;t++)r[t]=e[t]}let M2=0;function EF(r){M2>100||(console.warn(r),M2++,M2>100&&console.warn("More than 100 program warnings - stopping logs."))}const B2=new va;let X4e=1;class J4e{constructor({canvas:e=document.createElement("canvas"),width:t=300,height:n=150,dpr:i=1,alpha:s=!1,depth:o=!0,stencil:a=!1,antialias:c=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:u=!1,powerPreference:f="default",autoClear:h=!0,webgl:d=2}={}){const g={alpha:s,depth:o,stencil:a,antialias:c,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f};this.dpr=i,this.alpha=s,this.color=!0,this.depth=o,this.stencil=a,this.premultipliedAlpha=l,this.autoClear=h,this.id=X4e++,d===2&&(this.gl=e.getContext("webgl2",g)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",g)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(t,n),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t,n=0,i=0){this.state.viewport.width===e&&this.state.viewport.height===t||(this.state.viewport.width=e,this.state.viewport.height=t,this.state.viewport.x=n,this.state.viewport.y=i,this.gl.viewport(n,i,e,t))}setScissor(e,t,n=0,i=0){this.gl.scissor(n,i,e,t)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,n,i){this.state.blendFunc.src===e&&this.state.blendFunc.dst===t&&this.state.blendFunc.srcAlpha===n&&this.state.blendFunc.dstAlpha===i||(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=n,this.state.blendFunc.dstAlpha=i,n!==void 0?this.gl.blendFuncSeparate(e,t,n,i):this.gl.blendFunc(e,t))}setBlendEquation(e,t){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===t)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,t!==void 0?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,t,n){this.state.stencilFunc===e&&this.state.stencilRef===t&&this.state.stencilFuncMask===n||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=t||0,this.state.stencilFuncMask=n||0,this.gl.stencilFunc(e||this.gl.ALWAYS,t||0,n||0))}setStencilOp(e,t,n){this.state.stencilFail===e&&this.state.stencilDepthFail===t&&this.state.stencilDepthPass===n||(this.state.stencilFail=e,this.state.stencilDepthFail=t,this.state.stencilDepthPass=n,this.gl.stencilOp(e,t,n))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:t=null}={}){this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,n){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t?this.extensions[e]?this.extensions[e][n].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList({scene:e,camera:t,frustumCull:n,sort:i}){let s=[];if(t&&n&&t.updateFrustum(),e.traverse(o=>{if(!o.visible)return!0;o.draw&&(n&&o.frustumCulled&&t&&!t.frustumIntersectsMesh(o)||s.push(o))}),i){const o=[],a=[],c=[];s.forEach(l=>{l.program.transparent?l.program.depthTest?a.push(l):c.push(l):o.push(l),l.zDepth=0,!(l.renderOrder!==0||!l.program.depthTest||!t)&&(l.worldMatrix.getTranslation(B2),B2.applyMatrix4(t.projectionViewMatrix),l.zDepth=B2.z)}),o.sort(this.sortOpaque),a.sort(this.sortTransparent),c.sort(this.sortUI),s=o.concat(a,c)}return s}render({scene:e,camera:t,target:n=null,update:i=!0,sort:s=!0,frustumCull:o=!0,clear:a}){n===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(n),this.setViewport(n.width,n.height)),(a||this.autoClear&&a!==!1)&&(this.depth&&(!n||n.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!n||n.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&e.updateMatrixWorld(),t&&t.updateMatrixWorld(),this.getRenderList({scene:e,camera:t,frustumCull:o,sort:s}).forEach(l=>{l.draw({camera:t})})}}function Q4e(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function Z4e(r,e,t,n,i){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function eDe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=t*t+n*n+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),r[0]=t*o,r[1]=n*o,r[2]=i*o,r[3]=s*o,r}function tDe(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]}function rDe(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function nDe(r,e,t){t=t*.5;let n=Math.sin(t);return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=Math.cos(t),r}function AF(r,e,t){let n=e[0],i=e[1],s=e[2],o=e[3],a=t[0],c=t[1],l=t[2],u=t[3];return r[0]=n*u+o*a+i*l-s*c,r[1]=i*u+o*c+s*a-n*l,r[2]=s*u+o*l+n*c-i*a,r[3]=o*u-n*a-i*c-s*l,r}function iDe(r,e,t){t*=.5;let n=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);return r[0]=n*c+o*a,r[1]=i*c+s*a,r[2]=s*c-i*a,r[3]=o*c-n*a,r}function sDe(r,e,t){t*=.5;let n=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);return r[0]=n*c-s*a,r[1]=i*c+o*a,r[2]=s*c+n*a,r[3]=o*c-i*a,r}function oDe(r,e,t){t*=.5;let n=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);return r[0]=n*c+i*a,r[1]=i*c-n*a,r[2]=s*c+o*a,r[3]=o*c-s*a,r}function aDe(r,e,t,n){let i=e[0],s=e[1],o=e[2],a=e[3],c=t[0],l=t[1],u=t[2],f=t[3],h,d,g,p,m;return d=i*c+s*l+o*u+a*f,d<0&&(d=-d,c=-c,l=-l,u=-u,f=-f),1-d>1e-6?(h=Math.acos(d),g=Math.sin(h),p=Math.sin((1-n)*h)/g,m=Math.sin(n*h)/g):(p=1-n,m=n),r[0]=p*i+m*c,r[1]=p*s+m*l,r[2]=p*o+m*u,r[3]=p*a+m*f,r}function cDe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=t*t+n*n+i*i+s*s,a=o?1/o:0;return r[0]=-t*a,r[1]=-n*a,r[2]=-i*a,r[3]=s*a,r}function lDe(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r}function uDe(r,e){let t=e[0]+e[4]+e[8],n;if(t>0)n=Math.sqrt(t+1),r[3]=.5*n,n=.5/n,r[0]=(e[5]-e[7])*n,r[1]=(e[6]-e[2])*n,r[2]=(e[1]-e[3])*n;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);let s=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[s*3+s]-e[o*3+o]+1),r[i]=.5*n,n=.5/n,r[3]=(e[s*3+o]-e[o*3+s])*n,r[s]=(e[s*3+i]+e[i*3+s])*n,r[o]=(e[o*3+i]+e[i*3+o])*n}return r}function fDe(r,e,t="YXZ"){let n=Math.sin(e[0]*.5),i=Math.cos(e[0]*.5),s=Math.sin(e[1]*.5),o=Math.cos(e[1]*.5),a=Math.sin(e[2]*.5),c=Math.cos(e[2]*.5);return t==="XYZ"?(r[0]=n*o*c+i*s*a,r[1]=i*s*c-n*o*a,r[2]=i*o*a+n*s*c,r[3]=i*o*c-n*s*a):t==="YXZ"?(r[0]=n*o*c+i*s*a,r[1]=i*s*c-n*o*a,r[2]=i*o*a-n*s*c,r[3]=i*o*c+n*s*a):t==="ZXY"?(r[0]=n*o*c-i*s*a,r[1]=i*s*c+n*o*a,r[2]=i*o*a+n*s*c,r[3]=i*o*c-n*s*a):t==="ZYX"?(r[0]=n*o*c-i*s*a,r[1]=i*s*c+n*o*a,r[2]=i*o*a-n*s*c,r[3]=i*o*c+n*s*a):t==="YZX"?(r[0]=n*o*c+i*s*a,r[1]=i*s*c+n*o*a,r[2]=i*o*a-n*s*c,r[3]=i*o*c-n*s*a):t==="XZY"&&(r[0]=n*o*c-i*s*a,r[1]=i*s*c-n*o*a,r[2]=i*o*a+n*s*c,r[3]=i*o*c+n*s*a),r}const hDe=Q4e,dDe=Z4e,pDe=tDe,gDe=eDe;class mDe extends Array{constructor(e=0,t=0,n=0,i=1){super(e,t,n,i),this.onChange=()=>{},this._target=this;const s=["0","1","2","3"];return new Proxy(this,{set(o,a){const c=Reflect.set(...arguments);return c&&s.includes(a)&&o.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return rDe(this._target),this.onChange(),this}set(e,t,n,i){return e.length?this.copy(e):(dDe(this._target,e,t,n,i),this.onChange(),this)}rotateX(e){return iDe(this._target,this._target,e),this.onChange(),this}rotateY(e){return sDe(this._target,this._target,e),this.onChange(),this}rotateZ(e){return oDe(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return cDe(this._target,e),this.onChange(),this}conjugate(e=this._target){return lDe(this._target,e),this.onChange(),this}copy(e){return hDe(this._target,e),this.onChange(),this}normalize(e=this._target){return gDe(this._target,e),this.onChange(),this}multiply(e,t){return t?AF(this._target,e,t):AF(this._target,this._target,e),this.onChange(),this}dot(e){return pDe(this._target,e)}fromMatrix3(e){return uDe(this._target,e),this.onChange(),this}fromEuler(e,t){return fDe(this._target,e,e.order),t||this.onChange(),this}fromAxisAngle(e,t){return nDe(this._target,e,t),this.onChange(),this}slerp(e,t){return aDe(this._target,this._target,e,t),this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this._target[3]=e[t+3],this.onChange(),this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}const yDe=1e-6;function vDe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function bDe(r,e,t,n,i,s,o,a,c,l,u,f,h,d,g,p,m){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=s,r[5]=o,r[6]=a,r[7]=c,r[8]=l,r[9]=u,r[10]=f,r[11]=h,r[12]=d,r[13]=g,r[14]=p,r[15]=m,r}function wDe(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function xDe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=e[9],h=e[10],d=e[11],g=e[12],p=e[13],m=e[14],y=e[15],v=t*a-n*o,b=t*c-i*o,_=t*l-s*o,x=n*c-i*a,E=n*l-s*a,S=i*l-s*c,C=u*p-f*g,k=u*m-h*g,$=u*y-d*g,J=f*m-h*p,j=f*y-d*p,L=h*y-d*m,w=v*L-b*j+_*J+x*$-E*k+S*C;return w?(w=1/w,r[0]=(a*L-c*j+l*J)*w,r[1]=(i*j-n*L-s*J)*w,r[2]=(p*S-m*E+y*x)*w,r[3]=(h*E-f*S-d*x)*w,r[4]=(c*$-o*L-l*k)*w,r[5]=(t*L-i*$+s*k)*w,r[6]=(m*_-g*S-y*b)*w,r[7]=(u*S-h*_+d*b)*w,r[8]=(o*j-a*$+l*C)*w,r[9]=(n*$-t*j-s*C)*w,r[10]=(g*E-p*_+y*v)*w,r[11]=(f*_-u*E-d*v)*w,r[12]=(a*k-o*J-c*C)*w,r[13]=(t*J-n*k+i*C)*w,r[14]=(p*b-g*x-m*v)*w,r[15]=(u*x-f*b+h*v)*w,r):null}function UY(r){let e=r[0],t=r[1],n=r[2],i=r[3],s=r[4],o=r[5],a=r[6],c=r[7],l=r[8],u=r[9],f=r[10],h=r[11],d=r[12],g=r[13],p=r[14],m=r[15],y=e*o-t*s,v=e*a-n*s,b=e*c-i*s,_=t*a-n*o,x=t*c-i*o,E=n*c-i*a,S=l*g-u*d,C=l*p-f*d,k=l*m-h*d,$=u*p-f*g,J=u*m-h*g,j=f*m-h*p;return y*j-v*J+b*$+_*k-x*C+E*S}function IF(r,e,t){let n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],f=e[8],h=e[9],d=e[10],g=e[11],p=e[12],m=e[13],y=e[14],v=e[15],b=t[0],_=t[1],x=t[2],E=t[3];return r[0]=b*n+_*a+x*f+E*p,r[1]=b*i+_*c+x*h+E*m,r[2]=b*s+_*l+x*d+E*y,r[3]=b*o+_*u+x*g+E*v,b=t[4],_=t[5],x=t[6],E=t[7],r[4]=b*n+_*a+x*f+E*p,r[5]=b*i+_*c+x*h+E*m,r[6]=b*s+_*l+x*d+E*y,r[7]=b*o+_*u+x*g+E*v,b=t[8],_=t[9],x=t[10],E=t[11],r[8]=b*n+_*a+x*f+E*p,r[9]=b*i+_*c+x*h+E*m,r[10]=b*s+_*l+x*d+E*y,r[11]=b*o+_*u+x*g+E*v,b=t[12],_=t[13],x=t[14],E=t[15],r[12]=b*n+_*a+x*f+E*p,r[13]=b*i+_*c+x*h+E*m,r[14]=b*s+_*l+x*d+E*y,r[15]=b*o+_*u+x*g+E*v,r}function _De(r,e,t){let n=t[0],i=t[1],s=t[2],o,a,c,l,u,f,h,d,g,p,m,y;return e===r?(r[12]=e[0]*n+e[4]*i+e[8]*s+e[12],r[13]=e[1]*n+e[5]*i+e[9]*s+e[13],r[14]=e[2]*n+e[6]*i+e[10]*s+e[14],r[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],c=e[2],l=e[3],u=e[4],f=e[5],h=e[6],d=e[7],g=e[8],p=e[9],m=e[10],y=e[11],r[0]=o,r[1]=a,r[2]=c,r[3]=l,r[4]=u,r[5]=f,r[6]=h,r[7]=d,r[8]=g,r[9]=p,r[10]=m,r[11]=y,r[12]=o*n+u*i+g*s+e[12],r[13]=a*n+f*i+p*s+e[13],r[14]=c*n+h*i+m*s+e[14],r[15]=l*n+d*i+y*s+e[15]),r}function SDe(r,e,t){let n=t[0],i=t[1],s=t[2];return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*s,r[9]=e[9]*s,r[10]=e[10]*s,r[11]=e[11]*s,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function EDe(r,e,t,n){let i=n[0],s=n[1],o=n[2],a=Math.hypot(i,s,o),c,l,u,f,h,d,g,p,m,y,v,b,_,x,E,S,C,k,$,J,j,L,w,R;return Math.abs(a)<yDe?null:(a=1/a,i*=a,s*=a,o*=a,c=Math.sin(t),l=Math.cos(t),u=1-l,f=e[0],h=e[1],d=e[2],g=e[3],p=e[4],m=e[5],y=e[6],v=e[7],b=e[8],_=e[9],x=e[10],E=e[11],S=i*i*u+l,C=s*i*u+o*c,k=o*i*u-s*c,$=i*s*u-o*c,J=s*s*u+l,j=o*s*u+i*c,L=i*o*u+s*c,w=s*o*u-i*c,R=o*o*u+l,r[0]=f*S+p*C+b*k,r[1]=h*S+m*C+_*k,r[2]=d*S+y*C+x*k,r[3]=g*S+v*C+E*k,r[4]=f*$+p*J+b*j,r[5]=h*$+m*J+_*j,r[6]=d*$+y*J+x*j,r[7]=g*$+v*J+E*j,r[8]=f*L+p*w+b*R,r[9]=h*L+m*w+_*R,r[10]=d*L+y*w+x*R,r[11]=g*L+v*w+E*R,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function ADe(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function zY(r,e){let t=e[0],n=e[1],i=e[2],s=e[4],o=e[5],a=e[6],c=e[8],l=e[9],u=e[10];return r[0]=Math.hypot(t,n,i),r[1]=Math.hypot(s,o,a),r[2]=Math.hypot(c,l,u),r}function IDe(r){let e=r[0],t=r[1],n=r[2],i=r[4],s=r[5],o=r[6],a=r[8],c=r[9],l=r[10];const u=e*e+t*t+n*n,f=i*i+s*s+o*o,h=a*a+c*c+l*l;return Math.sqrt(Math.max(u,f,h))}const qY=function(){const r=[1,1,1];return function(e,t){let n=r;zY(n,t);let i=1/n[0],s=1/n[1],o=1/n[2],a=t[0]*i,c=t[1]*s,l=t[2]*o,u=t[4]*i,f=t[5]*s,h=t[6]*o,d=t[8]*i,g=t[9]*s,p=t[10]*o,m=a+f+p,y=0;return m>0?(y=Math.sqrt(m+1)*2,e[3]=.25*y,e[0]=(h-g)/y,e[1]=(d-l)/y,e[2]=(c-u)/y):a>f&&a>p?(y=Math.sqrt(1+a-f-p)*2,e[3]=(h-g)/y,e[0]=.25*y,e[1]=(c+u)/y,e[2]=(d+l)/y):f>p?(y=Math.sqrt(1+f-a-p)*2,e[3]=(d-l)/y,e[0]=(c+u)/y,e[1]=.25*y,e[2]=(h+g)/y):(y=Math.sqrt(1+p-a-f)*2,e[3]=(c-u)/y,e[0]=(d+l)/y,e[1]=(h+g)/y,e[2]=.25*y),e}}();function CDe(r,e,t,n){let i=V0([r[0],r[1],r[2]]);const s=V0([r[4],r[5],r[6]]),o=V0([r[8],r[9],r[10]]);UY(r)<0&&(i=-i),t[0]=r[12],t[1]=r[13],t[2]=r[14];const c=r.slice(),l=1/i,u=1/s,f=1/o;c[0]*=l,c[1]*=l,c[2]*=l,c[4]*=u,c[5]*=u,c[6]*=u,c[8]*=f,c[9]*=f,c[10]*=f,qY(e,c),n[0]=i,n[1]=s,n[2]=o}function TDe(r,e,t,n){const i=r,s=e[0],o=e[1],a=e[2],c=e[3],l=s+s,u=o+o,f=a+a,h=s*l,d=s*u,g=s*f,p=o*u,m=o*f,y=a*f,v=c*l,b=c*u,_=c*f,x=n[0],E=n[1],S=n[2];return i[0]=(1-(p+y))*x,i[1]=(d+_)*x,i[2]=(g-b)*x,i[3]=0,i[4]=(d-_)*E,i[5]=(1-(h+y))*E,i[6]=(m+v)*E,i[7]=0,i[8]=(g+b)*S,i[9]=(m-v)*S,i[10]=(1-(h+p))*S,i[11]=0,i[12]=t[0],i[13]=t[1],i[14]=t[2],i[15]=1,i}function RDe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=t+t,a=n+n,c=i+i,l=t*o,u=n*o,f=n*a,h=i*o,d=i*a,g=i*c,p=s*o,m=s*a,y=s*c;return r[0]=1-f-g,r[1]=u+y,r[2]=h-m,r[3]=0,r[4]=u-y,r[5]=1-l-g,r[6]=d+p,r[7]=0,r[8]=h+m,r[9]=d-p,r[10]=1-l-f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function kDe(r,e,t,n,i){let s=1/Math.tan(e/2),o=1/(n-i);return r[0]=s/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(i+n)*o,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*i*n*o,r[15]=0,r}function PDe(r,e,t,n,i,s,o){let a=1/(e-t),c=1/(n-i),l=1/(s-o);return r[0]=-2*a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*c,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*l,r[11]=0,r[12]=(e+t)*a,r[13]=(i+n)*c,r[14]=(o+s)*l,r[15]=1,r}function ODe(r,e,t,n){let i=e[0],s=e[1],o=e[2],a=n[0],c=n[1],l=n[2],u=i-t[0],f=s-t[1],h=o-t[2],d=u*u+f*f+h*h;d===0?h=1:(d=1/Math.sqrt(d),u*=d,f*=d,h*=d);let g=c*h-l*f,p=l*u-a*h,m=a*f-c*u;return d=g*g+p*p+m*m,d===0&&(l?a+=1e-6:c?l+=1e-6:c+=1e-6,g=c*h-l*f,p=l*u-a*h,m=a*f-c*u,d=g*g+p*p+m*m),d=1/Math.sqrt(d),g*=d,p*=d,m*=d,r[0]=g,r[1]=p,r[2]=m,r[3]=0,r[4]=f*m-h*p,r[5]=h*g-u*m,r[6]=u*p-f*g,r[7]=0,r[8]=u,r[9]=f,r[10]=h,r[11]=0,r[12]=i,r[13]=s,r[14]=o,r[15]=1,r}function CF(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r}function TF(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r}function DDe(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r}class sb extends Array{constructor(e=1,t=0,n=0,i=0,s=0,o=1,a=0,c=0,l=0,u=0,f=1,h=0,d=0,g=0,p=0,m=1){return super(e,t,n,i,s,o,a,c,l,u,f,h,d,g,p,m),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,n,i,s,o,a,c,l,u,f,h,d,g,p,m){return e.length?this.copy(e):(bDe(this,e,t,n,i,s,o,a,c,l,u,f,h,d,g,p,m),this)}translate(e,t=this){return _De(this,t,e),this}rotate(e,t,n=this){return EDe(this,n,e,t),this}scale(e,t=this){return SDe(this,t,typeof e=="number"?[e,e,e]:e),this}add(e,t){return t?CF(this,e,t):CF(this,this,e),this}sub(e,t){return t?TF(this,e,t):TF(this,this,e),this}multiply(e,t){return e.length?t?IF(this,e,t):IF(this,this,e):DDe(this,this,e),this}identity(){return wDe(this),this}copy(e){return vDe(this,e),this}fromPerspective({fov:e,aspect:t,near:n,far:i}={}){return kDe(this,e,t,n,i),this}fromOrthogonal({left:e,right:t,bottom:n,top:i,near:s,far:o}){return PDe(this,e,t,n,i,s,o),this}fromQuaternion(e){return RDe(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return xDe(this,e),this}compose(e,t,n){return TDe(this,e,t,n),this}decompose(e,t,n){return CDe(this,e,t,n),this}getRotation(e){return qY(e,this),this}getTranslation(e){return ADe(e,this),this}getScaling(e){return zY(e,this),this}getMaxScaleOnAxis(){return IDe(this)}lookAt(e,t,n){return ODe(this,e,t,n),this}determinant(){return UY(this)}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}function $De(r,e,t="YXZ"){return t==="XYZ"?(r[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(r[0]=Math.atan2(-e[9],e[10]),r[2]=Math.atan2(-e[4],e[0])):(r[0]=Math.atan2(e[6],e[5]),r[2]=0)):t==="YXZ"?(r[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(r[1]=Math.atan2(e[8],e[10]),r[2]=Math.atan2(e[1],e[5])):(r[1]=Math.atan2(-e[2],e[0]),r[2]=0)):t==="ZXY"?(r[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(r[1]=Math.atan2(-e[2],e[10]),r[2]=Math.atan2(-e[4],e[5])):(r[1]=0,r[2]=Math.atan2(e[1],e[0]))):t==="ZYX"?(r[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(r[0]=Math.atan2(e[6],e[10]),r[2]=Math.atan2(e[1],e[0])):(r[0]=0,r[2]=Math.atan2(-e[4],e[5]))):t==="YZX"?(r[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(r[0]=Math.atan2(-e[9],e[5]),r[1]=Math.atan2(-e[2],e[0])):(r[0]=0,r[1]=Math.atan2(e[8],e[10]))):t==="XZY"&&(r[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(r[0]=Math.atan2(e[6],e[5]),r[1]=Math.atan2(e[8],e[0])):(r[0]=Math.atan2(-e[9],e[10]),r[1]=0)),r}const RF=new sb;class MDe extends Array{constructor(e=0,t=e,n=e,i="YXZ"){super(e,t,n),this.order=i,this.onChange=()=>{},this._target=this;const s=["0","1","2"];return new Proxy(this,{set(o,a){const c=Reflect.set(...arguments);return c&&s.includes(a)&&o.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,t=e,n=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=t,this._target[2]=n,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,t=this.order){return $De(this._target,e,t),this.onChange(),this}fromQuaternion(e,t=this.order,n){return RF.fromQuaternion(e),this._target.fromRotationMatrix(RF,t),n||this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}}class BDe{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new sb,this.worldMatrix=new sb,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new va,this.quaternion=new mDe,this.scale=new va(1),this.rotation=new MDe,this.up=new va(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,t=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e,t=!0){~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e,t=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,n=this.children.length;t<n;t++)this.children[t].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,t=!1){t?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function NDe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function LDe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=t+t,a=n+n,c=i+i,l=t*o,u=n*o,f=n*a,h=i*o,d=i*a,g=i*c,p=s*o,m=s*a,y=s*c;return r[0]=1-f-g,r[3]=u-y,r[6]=h+m,r[1]=u+y,r[4]=1-l-g,r[7]=d-p,r[2]=h-m,r[5]=d+p,r[8]=1-l-f,r}function FDe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function UDe(r,e,t,n,i,s,o,a,c,l){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=s,r[5]=o,r[6]=a,r[7]=c,r[8]=l,r}function zDe(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function qDe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=u*o-a*l,h=-u*s+a*c,d=l*s-o*c,g=t*f+n*h+i*d;return g?(g=1/g,r[0]=f*g,r[1]=(-u*n+i*l)*g,r[2]=(a*n-i*o)*g,r[3]=h*g,r[4]=(u*t-i*c)*g,r[5]=(-a*t+i*s)*g,r[6]=d*g,r[7]=(-l*t+n*c)*g,r[8]=(o*t-n*s)*g,r):null}function kF(r,e,t){let n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],f=e[8],h=t[0],d=t[1],g=t[2],p=t[3],m=t[4],y=t[5],v=t[6],b=t[7],_=t[8];return r[0]=h*n+d*o+g*l,r[1]=h*i+d*a+g*u,r[2]=h*s+d*c+g*f,r[3]=p*n+m*o+y*l,r[4]=p*i+m*a+y*u,r[5]=p*s+m*c+y*f,r[6]=v*n+b*o+_*l,r[7]=v*i+b*a+_*u,r[8]=v*s+b*c+_*f,r}function jDe(r,e,t){let n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],f=e[8],h=t[0],d=t[1];return r[0]=n,r[1]=i,r[2]=s,r[3]=o,r[4]=a,r[5]=c,r[6]=h*n+d*o+l,r[7]=h*i+d*a+u,r[8]=h*s+d*c+f,r}function VDe(r,e,t){let n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],f=e[8],h=Math.sin(t),d=Math.cos(t);return r[0]=d*n+h*o,r[1]=d*i+h*a,r[2]=d*s+h*c,r[3]=d*o-h*n,r[4]=d*a-h*i,r[5]=d*c-h*s,r[6]=l,r[7]=u,r[8]=f,r}function KDe(r,e,t){let n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function HDe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=e[9],h=e[10],d=e[11],g=e[12],p=e[13],m=e[14],y=e[15],v=t*a-n*o,b=t*c-i*o,_=t*l-s*o,x=n*c-i*a,E=n*l-s*a,S=i*l-s*c,C=u*p-f*g,k=u*m-h*g,$=u*y-d*g,J=f*m-h*p,j=f*y-d*p,L=h*y-d*m,w=v*L-b*j+_*J+x*$-E*k+S*C;return w?(w=1/w,r[0]=(a*L-c*j+l*J)*w,r[1]=(c*$-o*L-l*k)*w,r[2]=(o*j-a*$+l*C)*w,r[3]=(i*j-n*L-s*J)*w,r[4]=(t*L-i*$+s*k)*w,r[5]=(n*$-t*j-s*C)*w,r[6]=(p*S-m*E+y*x)*w,r[7]=(m*_-g*S-y*b)*w,r[8]=(g*E-p*_+y*v)*w,r):null}class WDe extends Array{constructor(e=1,t=0,n=0,i=0,s=1,o=0,a=0,c=0,l=1){return super(e,t,n,i,s,o,a,c,l),this}set(e,t,n,i,s,o,a,c,l){return e.length?this.copy(e):(UDe(this,e,t,n,i,s,o,a,c,l),this)}translate(e,t=this){return jDe(this,t,e),this}rotate(e,t=this){return VDe(this,t,e),this}scale(e,t=this){return KDe(this,t,e),this}multiply(e,t){return t?kF(this,e,t):kF(this,this,e),this}identity(){return zDe(this),this}copy(e){return FDe(this,e),this}fromMatrix4(e){return NDe(this,e),this}fromQuaternion(e){return LDe(this,e),this}fromBasis(e,t,n){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2]),this}inverse(e=this){return qDe(this,e),this}getNormalMatrix(e){return HDe(this,e),this}}let GDe=0;class YDe extends BDe{constructor(e,{geometry:t,program:n,mode:i=e.TRIANGLES,frustumCulled:s=!0,renderOrder:o=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=GDe++,this.geometry=t,this.program=n,this.mode=i,this.frustumCulled=s,this.renderOrder=o,this.modelViewMatrix=new sb,this.normalMatrix=new WDe,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e}));let t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e}))}}class XDe extends V4e{constructor(e,{attributes:t={}}={}){Object.assign(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,t)}}var jY=ye("<div>");const JDe="#ffffff",PF=r=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return e?[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]:[1,1,1]},QDe=(r,e,t)=>{switch(r){case"top-left":return{anchor:[0,-.2*t],dir:[0,1]};case"top-right":return{anchor:[e,-.2*t],dir:[0,1]};case"left":return{anchor:[-.2*e,.5*t],dir:[1,0]};case"right":return{anchor:[(1+.2)*e,.5*t],dir:[-1,0]};case"bottom-left":return{anchor:[0,(1+.2)*t],dir:[0,-1]};case"bottom-center":return{anchor:[.5*e,(1+.2)*t],dir:[0,-1]};case"bottom-right":return{anchor:[e,(1+.2)*t],dir:[0,-1]};default:return{anchor:[.5*e,-.2*t],dir:[0,1]}}},ZDe=r=>{const e=st({raysOrigin:"top-center",raysColor:JDe,raysSpeed:1,lightSpread:1,rayLength:2,pulsating:!1,fadeDistance:1,saturation:1,followMouse:!0,mouseInfluence:.1,noiseAmount:0,distortion:0,class:""},r);let t,n=null,i=null,s=null,o={x:.5,y:.5},a={x:.5,y:.5};const[c,l]=$e(!1);return Dr(()=>{if(!t)return;const u=new IntersectionObserver(f=>l(f[0].isIntersecting),{threshold:.1});u.observe(t),yt(()=>u.disconnect())}),it(()=>{if(e.followMouse){const u=f=>{if(!t)return;const h=t.getBoundingClientRect();o.x=(f.clientX-h.left)/h.width,o.y=(f.clientY-h.top)/h.height};window.addEventListener("mousemove",u),yt(()=>window.removeEventListener("mousemove",u))}}),it(()=>{if(!c()||!t)return;const u=t;i=new J4e({dpr:Math.min(window.devicePixelRatio,2),alpha:!0});const f=i.gl;f.canvas.style.width="100%",f.canvas.style.height="100%",u.appendChild(f.canvas);const h=`
      attribute vec2 position;
      varying vec2 vUv;
      void main() {
        vUv = position * 0.5 + 0.5;
        gl_Position = vec4(position, 0.0, 1.0);
      }`,d=`precision highp float;

      uniform float iTime;
      uniform vec2  iResolution;

      uniform vec2  rayPos;
      uniform vec2  rayDir;
      uniform vec3  raysColor;
      uniform float raysSpeed;
      uniform float lightSpread;
      uniform float rayLength;
      uniform float pulsating;
      uniform float fadeDistance;
      uniform float saturation;
      uniform vec2  mousePos;
      uniform float mouseInfluence;
      uniform float noiseAmount;
      uniform float distortion;

      varying vec2 vUv;

      float noise(vec2 st) {
        return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
      }

      float rayStrength(vec2 raySource, vec2 rayRefDirection, vec2 coord,
                        float seedA, float seedB, float speed) {
        vec2 sourceToCoord = coord - raySource;
        vec2 dirNorm = normalize(sourceToCoord);
        float cosAngle = dot(dirNorm, rayRefDirection);

        float distortedAngle = cosAngle + distortion * sin(iTime * 2.0 + length(sourceToCoord) * 0.01) * 0.2;
        
        float spreadFactor = pow(max(distortedAngle, 0.0), 1.0 / max(lightSpread, 0.001));

        float distance = length(sourceToCoord);
        float maxDistance = iResolution.x * rayLength;
        float lengthFalloff = clamp((maxDistance - distance) / maxDistance, 0.0, 1.0);
        
        float fadeFalloff = clamp((iResolution.x * fadeDistance - distance) / (iResolution.x * fadeDistance), 0.5, 1.0);
        float pulse = pulsating > 0.5 ? (0.8 + 0.2 * sin(iTime * speed * 3.0)) : 1.0;

        float baseStrength = clamp(
          (0.45 + 0.15 * sin(distortedAngle * seedA + iTime * speed)) +
          (0.3 + 0.2 * cos(-distortedAngle * seedB + iTime * speed)),
          0.0, 1.0
        );

        return baseStrength * lengthFalloff * fadeFalloff * spreadFactor * pulse;
      }

      void mainImage(out vec4 fragColor, in vec2 fragCoord) {
        vec2 coord = vec2(fragCoord.x, iResolution.y - fragCoord.y);
        
        vec2 finalRayDir = rayDir;
        if (mouseInfluence > 0.0) {
          vec2 mouseScreenPos = mousePos * iResolution.xy;
          vec2 mouseDirection = normalize(mouseScreenPos - rayPos);
          finalRayDir = normalize(mix(rayDir, mouseDirection, mouseInfluence));
        }

        vec4 rays1 = vec4(1.0) *
                     rayStrength(rayPos, finalRayDir, coord, 36.2214, 21.11349,
                                 1.5 * raysSpeed);
        vec4 rays2 = vec4(1.0) *
                     rayStrength(rayPos, finalRayDir, coord, 22.3991, 18.0234,
                                 1.1 * raysSpeed);

        fragColor = rays1 * 0.5 + rays2 * 0.4;

        if (noiseAmount > 0.0) {
          float n = noise(coord * 0.01 + iTime * 0.1);
          fragColor.rgb *= (1.0 - noiseAmount + noiseAmount * n);
        }

        float brightness = 1.0 - (coord.y / iResolution.y);
        fragColor.x *= 0.1 + brightness * 0.8;
        fragColor.y *= 0.3 + brightness * 0.6;
        fragColor.z *= 0.5 + brightness * 0.5;

        if (saturation != 1.0) {
          float gray = dot(fragColor.rgb, vec3(0.299, 0.587, 0.114));
          fragColor.rgb = mix(vec3(gray), fragColor.rgb, saturation);
        }

        fragColor.rgb *= raysColor;
      }

      void main() {
        vec4 color;
        mainImage(color, gl_FragCoord.xy);
        gl_FragColor  = color;
      }`;s={iTime:{value:0},iResolution:{value:[1,1]},rayPos:{value:[0,0]},rayDir:{value:[0,1]},raysColor:{value:PF(e.raysColor)},raysSpeed:{value:e.raysSpeed},lightSpread:{value:e.lightSpread},rayLength:{value:e.rayLength},pulsating:{value:e.pulsating?1:0},fadeDistance:{value:e.fadeDistance},saturation:{value:e.saturation},mousePos:{value:[.5,.5]},mouseInfluence:{value:e.mouseInfluence},noiseAmount:{value:e.noiseAmount},distortion:{value:e.distortion}};const g=new XDe(f),p=new H4e(f,{vertex:h,fragment:d,uniforms:s}),m=new YDe(f,{geometry:g,program:p});it(()=>s.raysColor.value=PF(e.raysColor)),it(()=>s.raysSpeed.value=e.raysSpeed),it(()=>s.lightSpread.value=e.lightSpread),it(()=>s.rayLength.value=e.rayLength),it(()=>s.pulsating.value=e.pulsating?1:0),it(()=>s.fadeDistance.value=e.fadeDistance),it(()=>s.saturation.value=e.saturation),it(()=>s.mouseInfluence.value=e.mouseInfluence),it(()=>s.noiseAmount.value=e.noiseAmount),it(()=>s.distortion.value=e.distortion);const y=()=>{if(!u||!i)return;i.dpr=Math.min(window.devicePixelRatio,2);const{clientWidth:b,clientHeight:_}=u;i.setSize(b,_);const x=i.dpr,E=b*x,S=_*x;s.iResolution.value=[E,S];const{anchor:C,dir:k}=QDe(e.raysOrigin,E,S);s.rayPos.value=C,s.rayDir.value=k};window.addEventListener("resize",y),y();const v=b=>{if(!(!i||!s)){s.iTime.value=b*.001,e.followMouse&&e.mouseInfluence>0&&(a.x=a.x*.92+o.x*(1-.92),a.y=a.y*.92+o.y*(1-.92),s.mousePos.value=[a.x,a.y]);try{i.render({scene:m}),n=requestAnimationFrame(v)}catch(_){console.warn("WebGL rendering error:",_)}}};n=requestAnimationFrame(v),yt(()=>{if(n&&cancelAnimationFrame(n),window.removeEventListener("resize",y),i)try{const b=i.gl.canvas,_=i.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),b&&b.parentNode&&b.parentNode.removeChild(b)}catch(b){console.warn("Error during WebGL cleanup:",b)}i=null,s=null})}),(()=>{var u=jY(),f=t;return typeof f=="function"?qd(f,u):t=u,ht(()=>ui(u,Xr("w-full h-full pointer-events-none z-[3] overflow-hidden relative",e.class))),u})()},VY=r=>D(wU,{get fallback(){return(()=>{var e=jY();return ht(()=>ui(e,Xr("w-full h-full pointer-events-none z-[3] overflow-hidden relative bg-linear-to-b from-primary-200/15 to-zinc-950",r.class))),e})()},get children(){return D(ZDe,r)}});function e8e(r,e,t,n){Pz(r);const i=lie({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(ru(s),ru(o),ru(a),s<1)throw new Error("iterations (c) should be >= 1");const c=xP(e),l=xP(t),u=new Uint8Array(o),f=og.create(r,c),h=f._cloneInto().update(l);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:f,PRFSalt:h}}function t8e(r,e,t,n,i){return r.destroy(),e.destroy(),n&&n.destroy(),al(i),t}function r8e(r,e,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:c}=e8e(r,e,t,n);let l;const u=new Uint8Array(4),f=Qh(u),h=new Uint8Array(a.outputLen);for(let d=1,g=0;g<s;d++,g+=a.outputLen){const p=o.subarray(g,g+a.outputLen);f.setInt32(0,d,!1),(l=c._cloneInto(l)).update(u).digestInto(h),p.set(h.subarray(0,p.length));for(let m=1;m<i;m++){a._cloneInto(l).update(h).digestInto(h);for(let y=0;y<p.length;y++)p[y]^=h[y]}}return t8e(a,c,o,l,h)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ob(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function KY(r,e){return Array.isArray(e)?e.length===0?!0:r?e.every(t=>typeof t=="string"):e.every(t=>Number.isSafeInteger(t)):!1}function n8e(r){if(typeof r!="function")throw new Error("function expected");return!0}function ab(r,e){if(typeof e!="string")throw new Error(`${r}: string expected`);return!0}function pp(r){if(!Number.isSafeInteger(r))throw new Error(`invalid integer: ${r}`)}function cb(r){if(!Array.isArray(r))throw new Error("array expected")}function lb(r,e){if(!KY(!0,e))throw new Error(`${r}: array of strings expected`)}function HY(r,e){if(!KY(!1,e))throw new Error(`${r}: array of numbers expected`)}function i8e(...r){const e=s=>s,t=(s,o)=>a=>s(o(a)),n=r.map(s=>s.encode).reduceRight(t,e),i=r.map(s=>s.decode).reduce(t,e);return{encode:n,decode:i}}function s8e(r){const e=typeof r=="string"?r.split(""):r,t=e.length;lb("alphabet",e);const n=new Map(e.map((i,s)=>[i,s]));return{encode:i=>(cb(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=t)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${r}`);return e[s]})),decode:i=>(cb(i),i.map(s=>{ab("alphabet.decode",s);const o=n.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${r}`);return o}))}}function o8e(r=""){return ab("join",r),{encode:e=>(lb("join.decode",e),e.join(r)),decode:e=>(ab("join.decode",e),e.split(r))}}function a8e(r,e="="){return pp(r),ab("padding",e),{encode(t){for(lb("padding.encode",t);t.length*r%8;)t.push(e);return t},decode(t){lb("padding.decode",t);let n=t.length;if(n*r%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&t[n-1]===e;n--)if((n-1)*r%8===0)throw new Error("padding: invalid, string has too much padding");return t.slice(0,n)}}}function mT(r,e,t){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: invalid to=${t}, base cannot be less than 2`);if(cb(r),!r.length)return[];let n=0;const i=[],s=Array.from(r,a=>{if(pp(a),a<0||a>=e)throw new Error(`invalid integer: ${a}`);return a}),o=s.length;for(;;){let a=0,c=!0;for(let l=n;l<o;l++){const u=s[l],f=e*a,h=f+u;if(!Number.isSafeInteger(h)||f/e!==a||h-u!==f)throw new Error("convertRadix: carry overflow");const d=h/t;a=h%t;const g=Math.floor(d);if(s[l]=g,!Number.isSafeInteger(g)||g*t+a!==h)throw new Error("convertRadix: carry overflow");if(c)g?c=!1:n=l;else continue}if(i.push(a),c)break}for(let a=0;a<r.length-1&&r[a]===0;a++)i.push(0);return i.reverse()}const WY=(r,e)=>e===0?r:WY(e,r%e),ub=(r,e)=>r+(e-WY(r,e)),N2=(()=>{let r=[];for(let e=0;e<40;e++)r.push(2**e);return r})();function yT(r,e,t,n){if(cb(r),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(ub(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${ub(e,t)}`);let i=0,s=0;const o=N2[e],a=N2[t]-1,c=[];for(const l of r){if(pp(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(i=i<<e|l,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=t;s-=t)c.push((i>>s-t&a)>>>0);const u=N2[s];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<t-s&a,!n&&s>=e)throw new Error("Excess padding");if(!n&&i>0)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&c.push(i>>>0),c}function c8e(r){pp(r);const e=2**8;return{encode:t=>{if(!ob(t))throw new Error("radix.encode input should be Uint8Array");return mT(Array.from(t),e,r)},decode:t=>(HY("radix.decode",t),Uint8Array.from(mT(t,r,e)))}}function l8e(r,e=!1){if(pp(r),r<=0||r>32)throw new Error("radix2: bits should be in (0..32]");if(ub(8,r)>32||ub(r,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!ob(t))throw new Error("radix2.encode input should be Uint8Array");return yT(Array.from(t),8,r,!e)},decode:t=>(HY("radix2.decode",t),Uint8Array.from(yT(t,r,8,e)))}}function u8e(r,e){return pp(r),n8e(e),{encode(t){if(!ob(t))throw new Error("checksum.encode: input should be Uint8Array");const n=e(t).slice(0,r),i=new Uint8Array(t.length+r);return i.set(t),i.set(n,t.length),i},decode(t){if(!ob(t))throw new Error("checksum.decode: input should be Uint8Array");const n=t.slice(0,-r),i=t.slice(-r),s=e(n).slice(0,r);for(let o=0;o<r;o++)if(s[o]!==i[o])throw new Error("Invalid checksum");return n}}}const my={alphabet:s8e,chain:i8e,checksum:u8e,convertRadix:mT,convertRadix2:yT,radix:c8e,radix2:l8e,join:o8e,padding:a8e};/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const f8e=r=>r[0]==="";function GY(r){if(typeof r!="string")throw new TypeError("invalid mnemonic type: "+typeof r);return r.normalize("NFKD")}function h8e(r){const e=GY(r),t=e.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:t}}function d8e(r){Ao(r,16,20,24,28,32)}function p8e(r,e=128){if(ru(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return y8e(Ob(e/8),r)}const g8e=r=>{const e=8-r.length/4;return new Uint8Array([Db(r)[0]>>e<<e])};function m8e(r){if(!Array.isArray(r)||r.length!==2048||typeof r[0]!="string")throw new Error("Wordlist: expected array of 2048 strings");return r.forEach(e=>{if(typeof e!="string")throw new Error("wordlist: non-string element: "+e)}),my.chain(my.checksum(1,g8e),my.radix2(11,!0),my.alphabet(r))}function y8e(r,e){return d8e(r),m8e(e).encode(r).join(f8e(e)?"":" ")}const v8e=r=>GY("mnemonic"+r);function L2(r,e=""){return r8e(ig,h8e(r).nfkd,v8e(e),{c:2048,dkLen:64})}const b8e=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hk=BigInt(0),vT=BigInt(1);function Wk(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Gk(r){if(!Wk(r))throw new Error("Uint8Array expected")}function F2(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}function YY(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Hk:BigInt("0x"+r)}const XY=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",w8e=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Yk(r){if(Gk(r),XY)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=w8e[r[t]];return e}const Mc={_0:48,_9:57,A:65,F:70,a:97,f:102};function OF(r){if(r>=Mc._0&&r<=Mc._9)return r-Mc._0;if(r>=Mc.A&&r<=Mc.F)return r-(Mc.A-10);if(r>=Mc.a&&r<=Mc.f)return r-(Mc.a-10)}function JY(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(XY)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=OF(r.charCodeAt(s)),a=OF(r.charCodeAt(s+1));if(o===void 0||a===void 0){const c=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function x8e(r){return YY(Yk(r))}function Hy(r){return Gk(r),YY(Yk(Uint8Array.from(r).reverse()))}function QY(r,e){return JY(r.toString(16).padStart(e*2,"0"))}function bT(r,e){return QY(r,e).reverse()}function Bc(r,e,t){let n;if(typeof e=="string")try{n=JY(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(Wk(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function DF(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];Gk(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}const U2=r=>typeof r=="bigint"&&Hk<=r;function _8e(r,e,t){return U2(r)&&U2(e)&&U2(t)&&e<=r&&r<t}function n0(r,e,t,n){if(!_8e(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function S8e(r){let e;for(e=0;r>Hk;r>>=vT,e+=1);return e}const Xk=r=>(vT<<BigInt(r))-vT,E8e={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Wk(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Jk(r,e,t={}){const n=(i,s,o)=>{const a=E8e[s];if(typeof a!="function")throw new Error("invalid validator function");const c=r[i];if(!(o&&c===void 0)&&!a(c,r))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return r}function $F(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const s=r(t,...n);return e.set(t,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fs=BigInt(0),xs=BigInt(1),af=BigInt(2),A8e=BigInt(3),ZY=BigInt(4),eX=BigInt(5),tX=BigInt(8);function ci(r,e){const t=r%e;return t>=Fs?t:e+t}function Ka(r,e,t){let n=r;for(;e-- >Fs;)n*=n,n%=t;return n}function MF(r,e){if(r===Fs)throw new Error("invert: expected non-zero number");if(e<=Fs)throw new Error("invert: expected positive modulus, got "+e);let t=ci(r,e),n=e,i=Fs,s=xs;for(;t!==Fs;){const a=n/t,c=n%t,l=i-s*a;n=t,t=c,i=s,s=l}if(n!==xs)throw new Error("invert: does not exist");return ci(i,e)}function rX(r,e){const t=(r.ORDER+xs)/ZY,n=r.pow(e,t);if(!r.eql(r.sqr(n),e))throw new Error("Cannot find square root");return n}function I8e(r,e){const t=(r.ORDER-eX)/tX,n=r.mul(e,af),i=r.pow(n,t),s=r.mul(e,i),o=r.mul(r.mul(s,af),i),a=r.mul(s,r.sub(o,r.ONE));if(!r.eql(r.sqr(a),e))throw new Error("Cannot find square root");return a}function C8e(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let e=r-xs,t=0;for(;e%af===Fs;)e/=af,t++;let n=af;const i=Qk(r);for(;BF(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return rX;let s=i.pow(n,e);const o=(e+xs)/af;return function(c,l){if(c.is0(l))return l;if(BF(c,l)!==1)throw new Error("Cannot find square root");let u=t,f=c.mul(c.ONE,s),h=c.pow(l,e),d=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let g=1,p=c.sqr(h);for(;!c.eql(p,c.ONE);)if(g++,p=c.sqr(p),g===u)throw new Error("Cannot find square root");const m=xs<<BigInt(u-g-1),y=c.pow(f,m);u=g,f=c.sqr(y),h=c.mul(h,f),d=c.mul(d,y)}return d}}function T8e(r){return r%ZY===A8e?rX:r%tX===eX?I8e:C8e(r)}const R8e=(r,e)=>(ci(r,e)&xs)===xs,k8e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function P8e(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=k8e.reduce((n,i)=>(n[i]="function",n),e);return Jk(r,t)}function O8e(r,e,t){if(t<Fs)throw new Error("invalid exponent, negatives unsupported");if(t===Fs)return r.ONE;if(t===xs)return e;let n=r.ONE,i=e;for(;t>Fs;)t&xs&&(n=r.mul(n,i)),i=r.sqr(i),t>>=xs;return n}function nX(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),i=e.reduce((o,a,c)=>r.is0(a)?o:(n[c]=o,r.mul(o,a)),r.ONE),s=r.inv(i);return e.reduceRight((o,a,c)=>r.is0(a)?o:(n[c]=r.mul(o,n[c]),r.mul(o,a)),s),n}function BF(r,e){const t=(r.ORDER-xs)/af,n=r.pow(e,t),i=r.eql(n,r.ONE),s=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function iX(r,e){e!==void 0&&ru(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Qk(r,e,t=!1,n={}){if(r<=Fs)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:i,nByteLength:s}=iX(r,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:r,isLE:t,BITS:i,BYTES:s,MASK:Xk(i),ZERO:Fs,ONE:xs,create:c=>ci(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Fs<=c&&c<r},is0:c=>c===Fs,isOdd:c=>(c&xs)===xs,neg:c=>ci(-c,r),eql:(c,l)=>c===l,sqr:c=>ci(c*c,r),add:(c,l)=>ci(c+l,r),sub:(c,l)=>ci(c-l,r),mul:(c,l)=>ci(c*l,r),pow:(c,l)=>O8e(a,c,l),div:(c,l)=>ci(c*MF(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>MF(c,r),sqrt:n.sqrt||(c=>(o||(o=T8e(r)),o(a,c))),toBytes:c=>t?bT(c,s):QY(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return t?Hy(c):x8e(c)},invertBatch:c=>nX(a,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const NF=BigInt(0),wT=BigInt(1);function z2(r,e){const t=e.negate();return r?t:e}function sX(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function q2(r,e){sX(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,s=Xk(r),o=BigInt(r);return{windows:t,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function LF(r,e,t){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=t;let a=Number(r&i),c=r>>o;a>n&&(a-=s,c+=wT);const l=e*n,u=l+Math.abs(a)-1,f=a===0,h=a<0,d=e%2!==0;return{nextN:c,offset:u,isZero:f,isNeg:h,isNegF:d,offsetF:l}}function D8e(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function $8e(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const j2=new WeakMap,oX=new WeakMap;function V2(r){return oX.get(r)||1}function M8e(r,e){return{constTimeNegate:z2,hasPrecomputes(t){return V2(t)!==1},unsafeLadder(t,n,i=r.ZERO){let s=t;for(;n>NF;)n&wT&&(i=i.add(s)),s=s.double(),n>>=wT;return i},precomputeWindow(t,n){const{windows:i,windowSize:s}=q2(n,e),o=[];let a=t,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,n,i){let s=r.ZERO,o=r.BASE;const a=q2(t,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:f,isNeg:h,isNegF:d,offsetF:g}=LF(i,c,a);i=l,f?o=o.add(z2(d,n[g])):s=s.add(z2(h,n[u]))}return{p:s,f:o}},wNAFUnsafe(t,n,i,s=r.ZERO){const o=q2(t,e);for(let a=0;a<o.windows&&i!==NF;a++){const{nextN:c,offset:l,isZero:u,isNeg:f}=LF(i,a,o);if(i=c,!u){const h=n[l];s=s.add(f?h.negate():h)}}return s},getPrecomputes(t,n,i){let s=j2.get(n);return s||(s=this.precomputeWindow(n,t),t!==1&&j2.set(n,i(s))),s},wNAFCached(t,n,i){const s=V2(t);return this.wNAF(s,this.getPrecomputes(s,t,i),n)},wNAFCachedUnsafe(t,n,i,s){const o=V2(t);return o===1?this.unsafeLadder(t,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),n,s)},setWindowSize(t,n){sX(n,e),oX.set(t,n),j2.delete(t)}}}function B8e(r,e,t,n){D8e(t,r),$8e(n,e);const i=t.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,a=S8e(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Xk(c),u=new Array(Number(l)+1).fill(o),f=Math.floor((e.BITS-1)/c)*c;let h=o;for(let d=f;d>=0;d-=c){u.fill(o);for(let p=0;p<s;p++){const m=n[p],y=Number(m>>BigInt(d)&l);u[y]=u[y].add(t[p])}let g=o;for(let p=u.length-1,m=o;p>0;p--)m=m.add(u[p]),g=g.add(m);if(h=h.add(g),d!==0)for(let p=0;p<c;p++)h=h.double()}return h}function N8e(r){return P8e(r.Fp),Jk(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...iX(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ha=BigInt(0),ps=BigInt(1),FF=BigInt(2),L8e=BigInt(8),F8e={zip215:!0};function U8e(r){const e=N8e(r);return Jk(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function z8e(r){const e=U8e(r),{Fp:t,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=FF<<BigInt(a*8)-ps,u=t.create,f=Qk(e.n,e.nBitLength);function h(z,G){const te=t.sqr(z),X=t.sqr(G),T=t.add(t.mul(e.a,te),X),A=t.add(t.ONE,t.mul(e.d,t.mul(te,X)));return t.eql(T,A)}if(!h(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const d=e.uvRatio||((z,G)=>{try{return{isValid:!0,value:t.sqrt(z*t.inv(G))}}catch{return{isValid:!1,value:Ha}}}),g=e.adjustScalarBytes||(z=>z),p=e.domain||((z,G,te)=>{if(F2("phflag",te),G.length||te)throw new Error("Contexts/pre-hash are not supported");return z});function m(z,G,te=!1){const X=te?ps:Ha;n0("coordinate "+z,G,X,l)}function y(z){if(!(z instanceof _))throw new Error("ExtendedPoint expected")}const v=$F((z,G)=>{const{ex:te,ey:X,ez:T}=z,A=z.is0();G==null&&(G=A?L8e:t.inv(T));const O=u(te*G),I=u(X*G),U=u(T*G);if(A)return{x:Ha,y:ps};if(U!==ps)throw new Error("invZ was invalid");return{x:O,y:I}}),b=$F(z=>{const{a:G,d:te}=e;if(z.is0())throw new Error("bad point: ZERO");const{ex:X,ey:T,ez:A,et:O}=z,I=u(X*X),U=u(T*T),Z=u(A*A),oe=u(Z*Z),he=u(I*G),re=u(Z*u(he+U)),F=u(oe+u(te*u(I*U)));if(re!==F)throw new Error("bad point: equation left != right (1)");const H=u(X*T),ue=u(A*O);if(H!==ue)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(G,te,X,T){m("x",G),m("y",te),m("z",X,!0),m("t",T),this.ex=G,this.ey=te,this.ez=X,this.et=T,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(G){if(G instanceof _)throw new Error("extended point not allowed");const{x:te,y:X}=G||{};return m("x",te),m("y",X),new _(te,X,ps,u(te*X))}static normalizeZ(G){const te=nX(t,G.map(X=>X.ez));return G.map((X,T)=>X.toAffine(te[T])).map(_.fromAffine)}static msm(G,te){return B8e(_,f,G,te)}_setWindowSize(G){S.setWindowSize(this,G)}assertValidity(){b(this)}equals(G){y(G);const{ex:te,ey:X,ez:T}=this,{ex:A,ey:O,ez:I}=G,U=u(te*I),Z=u(A*T),oe=u(X*I),he=u(O*T);return U===Z&&oe===he}is0(){return this.equals(_.ZERO)}negate(){return new _(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:G}=e,{ex:te,ey:X,ez:T}=this,A=u(te*te),O=u(X*X),I=u(FF*u(T*T)),U=u(G*A),Z=te+X,oe=u(u(Z*Z)-A-O),he=U+O,re=he-I,F=U-O,H=u(oe*re),ue=u(he*F),le=u(oe*F),we=u(re*he);return new _(H,ue,we,le)}add(G){y(G);const{a:te,d:X}=e,{ex:T,ey:A,ez:O,et:I}=this,{ex:U,ey:Z,ez:oe,et:he}=G,re=u(T*U),F=u(A*Z),H=u(I*X*he),ue=u(O*oe),le=u((T+A)*(U+Z)-re-F),we=ue-H,ie=ue+H,B=u(F-te*re),q=u(le*we),ne=u(ie*B),de=u(le*B),_e=u(we*ie);return new _(q,ne,_e,de)}subtract(G){return this.add(G.negate())}wNAF(G){return S.wNAFCached(this,G,_.normalizeZ)}multiply(G){const te=G;n0("scalar",te,ps,n);const{p:X,f:T}=this.wNAF(te);return _.normalizeZ([X,T])[0]}multiplyUnsafe(G,te=_.ZERO){const X=G;return n0("scalar",X,Ha,n),X===Ha?E:this.is0()||X===ps?this:S.wNAFCachedUnsafe(this,X,_.normalizeZ,te)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,n).is0()}toAffine(G){return v(this,G)}clearCofactor(){const{h:G}=e;return G===ps?this:this.multiplyUnsafe(G)}static fromHex(G,te=!1){const{d:X,a:T}=e,A=t.BYTES;G=Bc("pointHex",G,A),F2("zip215",te);const O=G.slice(),I=G[A-1];O[A-1]=I&-129;const U=Hy(O),Z=te?l:t.ORDER;n0("pointHex.y",U,Ha,Z);const oe=u(U*U),he=u(oe-ps),re=u(X*oe-T);let{isValid:F,value:H}=d(he,re);if(!F)throw new Error("Point.fromHex: invalid y coordinate");const ue=(H&ps)===ps,le=(I&128)!==0;if(!te&&H===Ha&&le)throw new Error("Point.fromHex: x=0 and x_0=1");return le!==ue&&(H=u(-H)),_.fromAffine({x:H,y:U})}static fromPrivateKey(G){const{scalar:te}=$(G);return x.multiply(te)}toRawBytes(){const{x:G,y:te}=this.toAffine(),X=bT(te,t.BYTES);return X[X.length-1]|=G&ps?128:0,X}toHex(){return Yk(this.toRawBytes())}}_.BASE=new _(e.Gx,e.Gy,ps,u(e.Gx*e.Gy)),_.ZERO=new _(Ha,ps,ps,Ha);const{BASE:x,ZERO:E}=_,S=M8e(_,a*8);function C(z){return ci(z,n)}function k(z){return C(Hy(z))}function $(z){const G=t.BYTES;z=Bc("private key",z,G);const te=Bc("hashed private key",s(z),2*G),X=g(te.slice(0,G)),T=te.slice(G,2*G),A=k(X);return{head:X,prefix:T,scalar:A}}function J(z){const{head:G,prefix:te,scalar:X}=$(z),T=x.multiply(X),A=T.toRawBytes();return{head:G,prefix:te,scalar:X,point:T,pointBytes:A}}function j(z){return J(z).pointBytes}function L(z=Uint8Array.of(),...G){const te=DF(...G);return k(s(p(te,Bc("context",z),!!i)))}function w(z,G,te={}){z=Bc("message",z),i&&(z=i(z));const{prefix:X,scalar:T,pointBytes:A}=J(G),O=L(te.context,X,z),I=x.multiply(O).toRawBytes(),U=L(te.context,I,A,z),Z=C(O+U*T);n0("signature.s",Z,Ha,n);const oe=DF(I,bT(Z,t.BYTES));return Bc("result",oe,t.BYTES*2)}const R=F8e;function N(z,G,te,X=R){const{context:T,zip215:A}=X,O=t.BYTES;z=Bc("signature",z,2*O),G=Bc("message",G),te=Bc("publicKey",te,O),A!==void 0&&F2("zip215",A),i&&(G=i(G));const I=Hy(z.slice(O,2*O));let U,Z,oe;try{U=_.fromHex(te,A),Z=_.fromHex(z.slice(0,O),A),oe=x.multiplyUnsafe(I)}catch{return!1}if(!A&&U.isSmallOrder())return!1;const he=L(T,Z.toRawBytes(),U.toRawBytes(),G);return Z.add(U.multiplyUnsafe(he)).subtract(oe).clearCofactor().equals(_.ZERO)}return x._setWindowSize(8),{CURVE:e,getPublicKey:j,sign:w,verify:N,ExtendedPoint:_,utils:{getExtendedPublicKey:J,randomPrivateKey:()=>o(t.BYTES),precompute(z=8,G=_.BASE){return G._setWindowSize(z),G.multiply(BigInt(3)),G}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zk=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),UF=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const q8e=BigInt(1),zF=BigInt(2);BigInt(3);const j8e=BigInt(5),V8e=BigInt(8);function K8e(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),s=Zk,a=r*r%s*r%s,c=Ka(a,zF,s)*a%s,l=Ka(c,q8e,s)*r%s,u=Ka(l,j8e,s)*l%s,f=Ka(u,e,s)*u%s,h=Ka(f,t,s)*f%s,d=Ka(h,n,s)*h%s,g=Ka(d,i,s)*d%s,p=Ka(g,i,s)*d%s,m=Ka(p,e,s)*u%s;return{pow_p_5_8:Ka(m,zF,s)*r%s,b2:a}}function H8e(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function W8e(r,e){const t=Zk,n=ci(e*e*e,t),i=ci(n*n*e,t),s=K8e(r*i).pow_p_5_8;let o=ci(r*n*s,t);const a=ci(e*o*o,t),c=o,l=ci(o*UF,t),u=a===r,f=a===ci(-r,t),h=a===ci(-r*UF,t);return u&&(o=c),(f||h)&&(o=l),R8e(o,t)&&(o=ci(-o,t)),{isValid:u||f,value:o}}const qF=Qk(Zk,void 0,!0),G8e={a:qF.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:qF,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:V8e,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ig,randomBytes:Ob,adjustScalarBytes:H8e,uvRatio:W8e},K2=z8e(G8e),xT=Ao;/*! micro-key-producer - MIT License (c) 2024 Paul Miller (paulmillr.com) */const Y8e=mR("ed25519 seed"),H2=2147483648,jF=new Uint8Array([0]);function VF(r,...e){return typeof r=="string"&&(r=Pb(r)),xT(r,...e),r}const X8e=r=>Rie(Db(r)),J8e=r=>Qh(r).getUint32(0,!1),W2=r=>{if(!Number.isSafeInteger(r)||r<0||r>2**32-1)throw new Error(`Invalid number=${r}. Should be from 0 to 2 ** 32 - 1`);const e=new Uint8Array(4);return Qh(e).setUint32(0,r,!1),e};class dd{get publicKeyRaw(){return K2.getPublicKey(this.privateKey)}get publicKey(){return da(jF,this.publicKeyRaw)}get pubHash(){return X8e(this.publicKey)}get fingerprint(){return J8e(this.pubHash)}get fingerprintHex(){return pu(W2(this.fingerprint))}get parentFingerprintHex(){return pu(W2(this.parentFingerprint))}static fromMasterSeed(e){if(e=VF(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const t=og(ig,Y8e,e);return new dd({privateKey:t.slice(0,32),chainCode:t.slice(32)})}constructor(e){if(this.depth=0,this.index=0,this.parentFingerprint=0,!e||typeof e!="object")throw new Error("HDKey.constructor must not be called directly");if(xT(e.privateKey,32),xT(e.chainCode,32),this.depth=e.depth||0,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");this.chainCode=e.chainCode,this.privateKey=e.privateKey}derive(e,t=!1){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const n=e.replace(/^[mM]'?\//,"").split("/");let i=this;for(const s of n){const o=/^(\d+)('?)$/.exec(s);if(!o||o.length!==3)throw new Error(`Invalid child index: ${s}`);let a=+o[1];if(!Number.isSafeInteger(a)||a>=H2)throw new Error("Invalid index");(t||o[2]==="'")&&(a+=H2),i=i.deriveChild(a)}return i}deriveChild(e){if(e<H2)throw new Error(`Non-hardened child derivation not possible for Ed25519 (index=${e})`);const t=da(jF,this.privateKey,W2(e)),n=og(ig,this.chainCode,t);return new dd({chainCode:n.slice(32),depth:this.depth+1,parentFingerprint:this.fingerprint,index:e,privateKey:n.slice(0,32)})}sign(e){return K2.sign(e,this.privateKey)}verify(e,t){return t=VF(t,64),K2.verify(t,e,this.publicKeyRaw)}}class Hw{static async generate(){const{privateKey:e}=await crypto.subtle.generateKey("Ed25519",!0,["sign","verify"]),t=await crypto.subtle.exportKey("pkcs8",e);return new Uint8Array(t.slice(16))}static validate(e){let t;try{const n=JSON.parse(e.startsWith("[")&&e.endsWith("]")?e:`[${e}]`);if(Array.isArray(n)&&n.every(i=>typeof i=="number"&&i>=0&&i<=255)){const i=new Uint8Array(n);(i.length===32||i.length===64)&&(t=i)}}catch{}try{t??=Br.unmarshalHex(e)}catch{}try{t??=Br.unmarshalBase58(e)}catch{}try{t??=Br.unmarshalBase64(e)}catch{}if(t!=null&&!(t.length!==32&&t.length!==64))return Br.marshalBase64(t.slice(0,32))}static format64Bytes(e,t){let n;if(typeof e=="string"){const s=this.validate(e);if(!s)throw new Error("Invalid private key");n=Br.unmarshalBase64(s)}else n=e;if(n.length!==32)throw new Error("Invalid private key");const i=Br.unmarshalBase58(t);return Br.marshalBase64(new Uint8Array([...n,...i]))}}class ba{static getDerivationPath(e){return e.type==="root"?"m/44'/501'":e.type==="legacy"?`m/44'/501'/${e.index}'`:`m/44'/501'/${e.index}'/0'`}static generate(e=24){return p8e(b8e,e===12?128:256)}static derive(e,t){const n=L2(e),i=dd.fromMasterSeed(n),s=this.getDerivationPath(t),o=i.derive(s);if(!o.privateKey)throw new Error("Failed to derive private key");return{privateKey:o.privateKey,path:s}}static getFingerprint(e){const t=L2(e);return dd.fromMasterSeed(t).fingerprintHex}static validate(e){try{return ba.derive(e,{type:"current",index:0}),e}catch{}}static verify(e,t,n){const i=L2(e),o=dd.fromMasterSeed(i).derive(t);return o.privateKey?Br.marshalBase64(o.privateKey)===Hw.validate(n):!1}static unmarshalBase64(e){return Lue().decode(Br.unmarshalBase64(e))}static marshalBase64(e){return Br.marshalBase64(Nue().encode(e))}static parseIndex(e){const t=Number(e.split("/").at(3)?.replace("'",""));if(isNaN(t))throw new Error("Invalid derivation path");return t}}const vo=20,nt={MAIN:"main",IMPORT_TYPE:"import-type",IMPORT_SEED_PHRASE:"import-seed-phrase",IMPORT_PRIVATE_KEY:"import-private-key",IMPORT_HARDWARE_WALLET:"import-hardware-wallet",IMPORT_LEDGER:"import-ledger",IMPORT_KEYSTONE:"import-keystone",IMPORT_TREZOR:"import-trezor",IMPORT_READONLY:"import-readonly",CREATE_TYPE:"create-type",CREATE_SEED_PHRASE_WARNING:"create-seed-phrase-warning",CREATE_SEED_PHRASE_VIEW:"create-seed-phrase-view",EXISTING_SEED_PHRASE:"existing-seed-phrase",PRIVY_TYPE:"privy-type",PRIVY_GOOGLE:"privy-google",PRIVY_APPLE:"privy-apple",PRIVY_TWITTER:"privy-twitter",PRIVY_DISCORD:"privy-discord",SHARED_CHOOSE_ADDRESSES:"shared-choose-addresses",SHARED_LABEL_WALLET:"shared-label-wallet",SHARED_RECOMMEMDED_SETTINGS:"shared-recommended-settings",JUPITER_SYNC_TYPE:"jupiter-sync-type",JUPITER_SYNC_EXPORT:"jupiter-sync-export",JUPITER_SYNC_IMPORT:"jupiter-sync-import",FINAL_STEP:"final-step"},or={READONLY:"Readonly",SEED_PHRASE:"Seed Phrase",EXISTING_SEED_PHRASE:"Existing Seed Phrase",PRIVATE_KEY:"Private Key",LEDGER:"Ledger",KEYSTONE:"Keystone",TREZOR:"Trezor",PRIVY:"Privy",JUPITER_SYNC:"Jupiter Sync"},[Q8e,Z8e]=Lf(()=>{const[r,e]=$e(nt.MAIN),[t,n]=$e({type:"__empty__"}),[i,s]=Uf();function o(c){n(l=>({...l,...c}))}function a(){n({type:"__empty__"})}return Dr(()=>{i.type==="jupiter-sync"&&(e(nt.JUPITER_SYNC_TYPE),s({type:void 0},{replace:!0}))}),{step:r,setStep:e,importForm:t,updateImportForm:o,resetImportForm:a}}),En=()=>{const r=Z8e();if(!r)throw new Error("useOnboard must be used within a OnboardProvider");return r};var e5e=ye('<div class="text-zinc-500 group-hover:text-zinc-200 flex items-center justify-center transition-100 p-1.5 -m-1.5 rounded-lg"><div class="i-tabler:arrow-left size-6">'),t5e=ye('<button class="flex items-center gap-3 pb-2 cursor-pointer group"><h1 class="font-semibold text-zinc-200 text-lg leading-none">');const ni=r=>{const{setStep:e}=En();return(()=>{var t=t5e(),n=t.firstChild;return t.$$click=()=>e(r.previousStep),ce(t,D(We,{get when(){return r.previousStep},get children(){return e5e()}}),n),ce(n,()=>r.title),t})()};Yt(["click"]);var r5e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><div class="grid grid-cols-3 gap-2 cursor-pointer select-all"></div><button class="relative cursor-pointer w-full py-2.5 rounded-xl text-zinc-400 font-semibold ring-1 ring-zinc-600 active:ring-zinc-500 transition-100"><div>Copy Seed Phrase</div><div class="absolute right-3 top-0 flex items-center justify-center h-full"><div class="i-tabler:copy size-5.5"></div></div></button><button class="relative cursor-pointer w-full py-2.5 rounded-xl text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100"><div>Continue</div><div class="absolute right-3 top-0 flex items-center justify-center h-full"><div class=" i-tabler:arrow-right size-5.5">'),n5e=ye('<div class="flex items-center bg-zinc-950 rounded px-2 py-1.5 ring-1 ring-zinc-800"><div class="w-6.5 text-zinc-500 select-none tracking-tighter">.</div><div>');const i5e=()=>{const{updateImportForm:r,setStep:e,importForm:t}=En(),[n,i]=$e(!1),s=ke(()=>{const l=t();return l.type===or.SEED_PHRASE&&l.mnemonic?l.mnemonic:ba.generate()});let o;function a(l){l.stopImmediatePropagation(),o?.(),Zb(s()),i(!0),o=tl(()=>i(!1),2500,setTimeout)}async function c(){const{privateKey:l,path:u}=ba.derive(s(),{type:"current",index:0}),{address:f}=await rd(l);r({type:or.SEED_PHRASE,mnemonic:s(),accounts:[{address:f,path:u,privateKey:Br.marshalBase64(l)}],isNew:!0}),e(nt.SHARED_LABEL_WALLET)}return(()=>{var l=r5e(),u=l.firstChild,f=u.nextSibling,h=f.firstChild,d=h.nextSibling,g=d.firstChild,p=f.nextSibling;return ce(l,D(ni,{title:"Your Seed Phrase",get previousStep(){return nt.CREATE_SEED_PHRASE_WARNING}}),u),u.$$click=a,ce(u,D(Lt,{get each(){return s().split(" ")},children:(m,y)=>(()=>{var v=n5e(),b=v.firstChild,_=b.firstChild,x=b.nextSibling;return ce(b,()=>y()+1,_),ce(x,m),v})()})),f.$$click=a,p.$$click=c,ht(m=>Gr(g,{"i-tabler:copy-check-filled text-zinc-100":n(),"i-tabler:copy":!n()},m)),l})()};Yt(["click"]);var s5e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class=text-zinc-400>Please read carefully before proceeding!</p><div class="space-y-3 ring-1 p-3 rounded-lg text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/10"><ul class="space-y-3 list-outside list-disc pl-4 leading-tight"><li>If you lose or share your seed phrase, you will lose access to all your assets permanently</li><li>Your seed phrase is only stored on your device, Jupiter can never access it</li><li>If you uninstall this wallet without backing up your seed phrase, it cannot be recovered by Jupiter</li><li>View your seed phrase in a private area and do not let anyone see it</li></ul></div><button class="mt-2 w-full p-2.5 rounded-xl font-semibold transition-100 cursor-pointer active:bg-primary-200/80 bg-primary-200 text-zinc-950">Reveal Seed Phrase');const o5e=()=>{const{setStep:r}=En();return(()=>{var e=s5e(),t=e.firstChild,n=t.nextSibling,i=n.nextSibling;return ce(e,D(ni,{title:"Before You Begin",get previousStep(){return nt.CREATE_TYPE}}),t),i.$$click=()=>r(nt.CREATE_SEED_PHRASE_VIEW),e})()};Yt(["click"]);var a5e=ye('<div class="size-5 i-tabler:list-letters bg-primary-200">'),c5e=ye('<div class="size-5 i-tabler:seedling bg-primary-200">'),l5e=ye('<div>Social Login <span class="inline-flex items-center font-normal text-zinc-400 text-sm">(fka <div class="i-tabler:bolt-filled ml-0.5"></div> Quick Account)'),u5e=ye('<div class="size-5 i-tabler:brand-google bg-primary-200">'),f5e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl">'),h5e=ye('<div class="absolute top-0 right-0 py-0.5 px-2 text-xs font-medium text-primary-200 bg-primary-200/10 rounded-tr-xl rounded-bl-xl">Recommended'),d5e=ye('<button class="relative cursor-pointer p-3 bg-zinc-800 rounded-xl w-full ring-1 hover:ring-primary-200 ring-zinc-800 transition-100"><div></div><div class="flex gap-3 items-center justify-center"><div class="size-10 flex items-center justify-center bg-primary-200/10 rounded-full"></div><div class="flex flex-col flex-1 text-left"><h3 class=font-medium></h3><p class="text-zinc-400 text-sm leading-tight">');const p5e=()=>{const{setStep:r}=En(),{accounts:e}=Jr(),t=Ws(),i=[...ke(()=>e().some(s=>s.type==="mnemonic"))()?[{title:"Existing Seed Phrase",description:"Create a new wallet from an existing seed phrase that you already have.",Icon:()=>a5e(),onClick:()=>r(nt.EXISTING_SEED_PHRASE)}]:[],{title:"New Seed Phrase",description:"24 word seed phrase, portable across any wallet. Fastest execution and more secure.",Icon:()=>c5e(),onClick:()=>r(nt.CREATE_SEED_PHRASE_WARNING)},{title:l5e(),description:"Simple SSO method, portable across Jupiter interfaces. Limited to 1 acccount.",Icon:()=>u5e(),onClick:()=>{if(e().some(s=>s.type==="privy"))return t.alert({title:"Jupiter Quick Account Already Exists",content:"Only one active Social Login wallet is allowed. Please delete the existing wallet if you wish to use a new one."});r(nt.PRIVY_TYPE)}}];return(()=>{var s=f5e();return ce(s,D(ni,{title:"Create New Wallet",get previousStep(){return nt.MAIN}}),null),ce(s,D(Lt,{each:i,children:({title:o,description:a,Icon:c,onClick:l},u)=>(()=>{var f=d5e(),h=f.firstChild,d=h.nextSibling,g=d.firstChild,p=g.nextSibling,m=p.firstChild,y=m.nextSibling;return zs(f,"click",l,!0),ce(f,D(We,{get when(){return u()===0},get children(){return h5e()}}),h),ce(g,D(c,{})),ce(m,o),ce(y,a),f})()}),null),s})()};Yt(["click"]);var g5e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl">'),m5e=ye('<button class="cursor-pointer py-3 px-4 flex gap-2 items-center justify-center bg-zinc-800 rounded-xl w-full ring-1 hover:ring-primary-200 ring-zinc-800 transition-100"><div class="overflow-x-auto flex flex-col text-left gap-0.5 w-full"><h3 class=font-medium>Seed Phrase #</h3><div class="relative flex gap-1"><div class="absolute right-0 bottom-0 h-6 w-4 bg-linear-to-r from-zinc-800/0 to-zinc-800"></div></div></div><div class=flex-1></div><div class="flex-none i-tabler:chevron-right size-5 text-zinc-400">'),y5e=ye('<div class="flex gap-1 items-center rounded-full bg-zinc-900 px-1 pr-2"><div class="text-zinc-400 whitespace-nowrap">');const v5e=()=>{const{updateImportForm:r,setStep:e}=En(),{accounts:t}=Jr(),n=ke(()=>{const s=t().filter(o=>o.type==="mnemonic");return LY(s,o=>o.mfp)});function i(s){r({type:or.EXISTING_SEED_PHRASE,mfp:s}),e(nt.SHARED_LABEL_WALLET)}return(()=>{var s=g5e();return ce(s,D(ni,{title:"Choose Seed Phrase",get previousStep(){return nt.CREATE_TYPE}}),null),ce(s,D(Hd,{class:"space-y-3 max-h-50vh p-0.3",get children(){return D(Lt,{get each(){return Object.entries(n())},children:([o,a],c)=>(()=>{var l=m5e(),u=l.firstChild,f=u.firstChild;f.firstChild;var h=f.nextSibling,d=h.firstChild;return l.$$click=()=>i(o),ce(f,()=>c()+1,null),ce(h,D(Lt,{each:a,children:g=>(()=>{var p=y5e(),m=p.firstChild;return ce(p,D(Gg,{get id(){return g.address},class:"size-4"}),m),ce(m,()=>g.label),p})()}),d),l})()})}}),null),s})()};Yt(["click"]);var b5e=ye(`<div class="space-y-3 w-full px-3"><div class="w-full py-10 rounded flex flex-col items-center justify-center"><div class="size-24 i-tabler:circle-check-filled bg-primary-200"></div><h1 class="font-semibold text-3xl mt-8 mb-2">You're All Set!</h1><a class="flex items-center gap-1 text-zinc-400 hover:text-primary-200 transition-100 p-1 group"><p class=text-lg>Continue to jup.ag to start</p><div class="i-tabler:arrow-up-right size-5 group-hover:translate-x-1 group-hover:translate-y--1 transition-200">`),w5e=ye('<div class="fixed flex top-0 right-0 m-3 text-zinc-950"><div class="flex items-center justify-center mr-2"></div><div class="bg-green-300 py-3 px-4 rounded-xl"><div class=font-bold>Pin the Jupiter Wallet</div><div class="flex items-center opacity-70 font-semibold">First click <div class="i-tabler:puzzle size-5 mx-1"></div> then <div class="i-tabler:pinned size-5 mx-0.5">'),x5e=ye('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 370.353 370.353"class="fill-zinc-50 h-14 rotate-250"><g><path d="M368.432,166.578c-23.256-19.584-42.84-42.84-63.648-64.872c-11.016-11.628-28.151-34.884-46.512-36.108 c-1.224-1.836-3.06-3.06-7.344-2.448c-2.448,0.612-4.284,2.448-4.896,4.896c-3.672,14.076-3.06,28.764-3.06,43.452 c-53.856-7.344-116.893,19.584-159.732,48.348C36.115,191.057-0.605,243.078,0.007,301.217c0,2.448,1.836,3.672,3.672,4.284 c1.836,1.836,4.284,2.448,6.732,1.224c70.992-50.184,145.044-94.247,235.009-78.947h0.611c-5.508,17.748-6.119,37.943-6.119,56.304 c0,5.508,4.896,7.344,8.567,6.732c1.836,2.447,6.12,4.283,9.18,1.224c40.393-33.66,84.456-71.604,111.385-117.503 C370.88,172.698,370.88,168.414,368.432,166.578z M348.235,183.102c-10.403,15.3-23.868,28.764-37.332,42.228 c-18.359,18.36-39.168,34.272-56.916,53.244c0-16.524-0.611-33.048,0.612-50.185c0-1.836-0.612-3.06-1.836-3.672 c1.836-3.672,1.224-8.567-3.672-9.792c-88.741-18.972-170.749,23.256-239.292,77.112c9.18-53.856,41.004-94.248,86.904-124.848 s93.637-36.72,146.269-42.84v0.612c-0.612,4.896,7.344,5.508,8.568,1.224c0-1.224,0.611-1.836,0.611-3.06 c3.672-1.836,4.896-6.732,1.836-8.568c1.836-9.792,2.448-19.584,3.672-29.376c0-1.836,0.612-4.896,1.225-7.956 c7.956,10.404,21.42,19.584,30.6,28.764c17.748,18.36,34.272,37.944,52.632,56.304 C351.907,170.862,356.191,170.862,348.235,183.102z">');const _5e=()=>{const[r,e]=$e(!1);return Dr(async()=>{const{isOnToolbar:t}=await bo.action.getUserSettings();e(!t)}),[(()=>{var t=b5e(),n=t.firstChild,i=n.firstChild,s=i.nextSibling,o=s.nextSibling;return ht(()=>Mr(o,"href",Sa.LANDING)),t})(),D(We,{get when(){return r()},get children(){var t=w5e(),n=t.firstChild;return ce(n,D(S5e,{})),t}})]},S5e=()=>x5e();var E5e=ye('<footer class="fixed bottom-0 left-0 flex w-full py-3 px-5 text-xs text-zinc-500 uppercase font-medium gap-6"><div>Jupiter Wallet V</div><div class=flex-1></div><a target=_blank class=hover:text-zinc-50>Terms</a><a target=_blank class=hover:text-zinc-50>Policy</a><a target=_blank class=hover:text-zinc-50>Help Center');const A5e=()=>(()=>{var r=E5e(),e=r.firstChild;e.firstChild;var t=e.nextSibling,n=t.nextSibling,i=n.nextSibling,s=i.nextSibling;return ce(e,()=>bo.runtime.getManifest().version,null),ht(o=>{var a=Sa.TERMS,c=Sa.PRIVACY,l=Sa.SUPPORT;return a!==o.e&&Mr(n,"href",o.e=a),c!==o.t&&Mr(i,"href",o.t=c),l!==o.a&&Mr(s,"href",o.a=l),o},{e:void 0,t:void 0,a:void 0}),r})();var I5e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl">'),C5e=ye('<button class="cursor-pointer p-3 flex gap-3 items-center justify-center bg-zinc-800 rounded-xl w-full ring-1 ring-zinc-800 hover:ring-primary-200 transition-100"><div class="size-9 flex items-center justify-center"></div><div class="flex flex-col flex-1 text-left"><h3 class=font-medium>');const T5e=()=>{const{setStep:r}=En(),e=[{title:"Ledger",Icon:()=>D(pR,{class:"size-8 fill-zinc-50 p-1"}),onClick:()=>{r(nt.IMPORT_LEDGER)}},{title:"Keystone",Icon:()=>D(dR,{class:"size-9 fill-zinc-50 p-1"}),onClick:()=>{r(nt.IMPORT_KEYSTONE)}},{title:"Trezor",Icon:()=>D(GR,{class:"size-9 fill-zinc-50 p-1"}),onClick:()=>{r(nt.IMPORT_TREZOR)}}];return(()=>{var t=I5e();return ce(t,D(ni,{title:"Import Hardware Wallet",get previousStep(){return nt.IMPORT_TYPE}}),null),ce(t,D(Lt,{each:e,children:({title:n,Icon:i,onClick:s})=>(()=>{var o=C5e(),a=o.firstChild,c=a.nextSibling,l=c.firstChild;return zs(o,"click",s,!0),ce(a,D(i,{})),ce(l,n),o})()}),null),t})()};Yt(["click"]);Jh.Label;Jh.ValueLabel;const aX=r=>{const[e,t]=Mt(r,["class","children"]);return D(Jh,st({get class(){return Xr("flex w-full flex-col gap-2",e.class)}},t,{get children(){return[Or(()=>e.children),D(Jh.Track,{class:"h-2 overflow-hidden rounded-full bg-zinc-800",get children(){return D(Jh.Fill,{class:"h-full w-[--kb-progress-fill-width] bg-primary-200 transition-all duration-200 ease-linear"})}})]}}))};var R5e=ye('<p class="text-red-400 mt-2 text-sm leading-4">Error: '),k5e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><ul class="list-decimal list-inside space-y-2"><li>Connect and unlock your Keystone device</li><li>Approve the connection request on your Keystone device</li><li>Approve all relevant browser permissions</li></ul><div><div class="flex items-center justify-between text-zinc-400"><div>Progress</div><div>%</div></div></div><button class="mt-4 w-full h-11 rounded-xl font-semibold transition-100 flex items-center justify-center">');const ro={FAILED_TO_CONNECT:"failed_to_connect",CONNECTING:"connecting",RETRIEVING_ADDRESSES:"retrieving_addresses"},P5e=()=>{const{setStep:r,updateImportForm:e}=En(),[t,n]=$e(ro.CONNECTING),[i,s]=$e(null),[o,a]=$e(0);async function c(){try{n(ro.CONNECTING),await jh.pairDevice(),n(ro.RETRIEVING_ADDRESSES);const u=[];for(let h=0;h<vo;h++){const d=await jh.getAddress({type:"current",index:h});u.push(d),a((h+1)/(vo*2)*100)}for(let h=0;h<vo;h++){const d=await jh.getAddress({type:"legacy",index:h});u.push(d),a((vo+h+1)/(vo*2)*100)}const f=await jh.getAddress({type:"root"});u.push(f),e({type:or.KEYSTONE,accounts:u}),r(nt.SHARED_CHOOSE_ADDRESSES)}catch(u){a(0),n(ro.FAILED_TO_CONNECT),s(typeof u=="object"&&u&&"message"in u&&typeof u.message=="string"?u.message:null)}}function l(){if(t()!==ro.CONNECTING&&t()===ro.FAILED_TO_CONNECT){s(null),c();return}}return Dr(()=>c()),(()=>{var u=k5e(),f=u.firstChild,h=f.nextSibling,d=h.firstChild,g=d.firstChild,p=g.nextSibling,m=p.firstChild,y=h.nextSibling;return ce(u,D(ni,{title:"Connect Keystone",get previousStep(){return nt.IMPORT_HARDWARE_WALLET}}),f),ce(p,()=>Math.round(o()),m),ce(h,D(aX,{get value(){return o()}}),null),y.$$click=l,ce(y,D(yr,{get children(){return[D(Ne,{get when(){return t()===ro.CONNECTING},children:"Connecting..."}),D(Ne,{get when(){return t()===ro.RETRIEVING_ADDRESSES},children:"Retrieving addresses..."}),D(Ne,{get when(){return t()===ro.FAILED_TO_CONNECT},children:"Reconnect"})]}})),ce(u,D(We,{get when(){return i()},get children(){var v=R5e();return v.firstChild,ce(v,i,null),v}}),null),ht(v=>{var b={"bg-zinc-800 text-zinc-400 cursor-pointer":t()===ro.CONNECTING||t()===ro.RETRIEVING_ADDRESSES,"bg-primary-200 active:bg-primary-200/20 cursor-pointer text-zinc-950":t()===ro.FAILED_TO_CONNECT},_=t()===ro.CONNECTING;return v.e=Gr(y,b,v.e),_!==v.t&&(y.disabled=v.t=_),v},{e:void 0,t:void 0}),u})()};Yt(["click"]);var O5e=ye('<p class="text-red-400 mt-2 text-sm leading-4">Error: '),D5e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><ul class="list-decimal list-inside space-y-2"><li>Connect and unlock your Ledger device</li><li>Approve all relevant browser permissions</li><li>Open the Solana app on your Ledger device</li></ul><div><div class="flex items-center justify-between text-zinc-400"><div>Progress</div><div>%</div></div></div><button class="mt-4 w-full h-11 rounded-xl font-semibold transition-100 flex items-center justify-center">');const no={FAILED_TO_CONNECT:"failed_to_connect",CONNECTING:"connecting",RETRIEVING_ADDRESSES:"retrieving_addresses"},$5e=()=>{const{setStep:r,updateImportForm:e}=En(),[t,n]=$e(no.CONNECTING),[i,s]=$e(null),[o,a]=$e(0);async function c(){try{n(no.CONNECTING),await x0.pairDevice(),n(no.RETRIEVING_ADDRESSES);const u=[];for(let d=0;d<vo;d++){const{address:g,path:p}=await x0.getAddress({type:"current",index:d});u.push({address:g,path:p,mfp:""}),a((d+1)/(vo*2)*100)}for(let d=0;d<vo;d++){const{address:g,path:p}=await x0.getAddress({type:"legacy",index:d});u.push({address:g,path:p,mfp:""}),a((vo+d+1)/(vo*2)*100)}const{address:f,path:h}=await x0.getAddress({type:"root"});u.push({address:f,path:h,mfp:""}),e({type:or.LEDGER,accounts:u}),r(nt.SHARED_CHOOSE_ADDRESSES)}catch(u){console.error(u),a(0),n(no.FAILED_TO_CONNECT),s(typeof u=="object"&&u&&"message"in u&&typeof u.message=="string"?u.message:null)}}function l(){if(t()!==no.CONNECTING&&t()===no.FAILED_TO_CONNECT){s(null),c();return}}return Dr(()=>c()),(()=>{var u=D5e(),f=u.firstChild,h=f.nextSibling,d=h.firstChild,g=d.firstChild,p=g.nextSibling,m=p.firstChild,y=h.nextSibling;return ce(u,D(ni,{title:"Connect Ledger",get previousStep(){return nt.IMPORT_HARDWARE_WALLET}}),f),ce(p,()=>Math.round(o()),m),ce(h,D(aX,{get value(){return o()}}),null),y.$$click=l,ce(y,D(yr,{get children(){return[D(Ne,{get when(){return t()===no.CONNECTING},children:"Connecting..."}),D(Ne,{get when(){return t()===no.RETRIEVING_ADDRESSES},children:"Retrieving addresses..."}),D(Ne,{get when(){return t()===no.FAILED_TO_CONNECT},children:"Reconnect"})]}})),ce(u,D(We,{get when(){return i()},get children(){var v=O5e();return v.firstChild,ce(v,i,null),v}}),null),ht(v=>{var b={"bg-zinc-800 text-zinc-400 cursor-pointer":t()===no.CONNECTING||t()===no.RETRIEVING_ADDRESSES,"bg-primary-200 active:bg-primary-200/20 cursor-pointer text-zinc-950":t()===no.FAILED_TO_CONNECT},_=t()===no.CONNECTING;return v.e=Gr(y,b,v.e),_!==v.t&&(y.disabled=v.t=_),v},{e:void 0,t:void 0}),u})()};Yt(["click"]);var M5e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight">Enter your private key below (accepts hex, base58, or base64 encoding):</p><form><textarea class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 min-h-48 transition-100 resize-none"placeholder="Enter your private key here"name=textarea-input></textarea><button class="mt-3 cursor-pointer w-full p-2.5 rounded-xl bg-primary-200 text-zinc-950 font-semibold active:bg-primary-200/80 transition-100">Next');const B5e="textarea-input",N5e=()=>{const r=Ws(),{setStep:e,updateImportForm:t}=En();async function n(i){i.preventDefault();const o=new FormData(i.target).get(B5e)?.toString().trim()||"",a=Hw.validate(o);if(!a){r.alert({title:"Invalid Private Key",content:"Please enter a valid private key to continue."});return}ai(()=>{t({type:or.PRIVATE_KEY,privateKey:a}),e(nt.SHARED_CHOOSE_ADDRESSES)})}return(()=>{var i=M5e(),s=i.firstChild,o=s.nextSibling;return o.firstChild,ce(i,D(ni,{title:"Import Private Key",get previousStep(){return nt.IMPORT_TYPE}}),s),o.addEventListener("submit",a=>n(a)),i})()};var L5e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight">Enter a valid Solana address to watch:</p><form><textarea class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 min-h-48 transition-100 resize-none"placeholder="Enter an address here"name=textarea-input></textarea><button class="mt-3 cursor-pointer w-full p-2.5 rounded-xl bg-primary-200 text-zinc-950 font-semibold active:bg-primary-200/80 transition-100">Next');const F5e="textarea-input",U5e=()=>{const r=Ws(),{setStep:e,updateImportForm:t}=En();async function n(i){i.preventDefault();const o=new FormData(i.target).get(F5e)?.toString().trim()||"";if(!jA(o)){r.alert({title:"Invalid Address",content:"Please enter a valid Solana address to continue."});return}ai(()=>{t({type:or.READONLY,address:o}),e(nt.SHARED_LABEL_WALLET)})}return(()=>{var i=L5e(),s=i.firstChild,o=s.nextSibling;return o.firstChild,ce(i,D(ni,{title:"Watch Address",get previousStep(){return nt.IMPORT_TYPE}}),s),o.addEventListener("submit",a=>n(a)),i})()};var z5e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight">Enter your 12 or 24 word seed phrase below:</p><form><textarea class="ring-1 ring-zinc-800 focus:ring-primary-200 resize-none w-full outline-none rounded-xl p-3 bg-zinc-950 min-h-64 transition-100"placeholder="Enter your seed phrase here"name=textarea-input></textarea><button class="mt-3 cursor-pointer w-full p-2.5 rounded-xl bg-primary-200 text-zinc-950 font-semibold active:bg-primary-200/80 transition-100">Next');const q5e="textarea-input",j5e=()=>{const r=Ws(),{setStep:e,updateImportForm:t}=En();async function n(i){i.preventDefault();const o=new FormData(i.target).get(q5e)?.toString().trim()||"",a=ba.validate(o);if(!a){r.alert({title:"Invalid Seed Phrase",content:"Please enter a valid seed phrase to continue."});return}const c=[];for(let h=0;h<vo;h++){const{privateKey:d,path:g}=ba.derive(a,{type:"current",index:h}),{address:p}=await rd(d);c.push({address:p,privateKey:Br.marshalBase64(d),path:g})}for(let h=0;h<vo;h++){const{privateKey:d,path:g}=ba.derive(a,{type:"legacy",index:h}),{address:p}=await rd(d);c.push({address:p,privateKey:Br.marshalBase64(d),path:g})}const{privateKey:l,path:u}=ba.derive(a,{type:"root"}),{address:f}=await rd(l);c.push({address:f,privateKey:Br.marshalBase64(l),path:u}),ai(()=>{t({type:or.SEED_PHRASE,mnemonic:a,accounts:c}),e(nt.SHARED_CHOOSE_ADDRESSES)})}return(()=>{var i=z5e(),s=i.firstChild,o=s.nextSibling;return o.firstChild,ce(i,D(ni,{title:"Import Seed Phrase",get previousStep(){return nt.IMPORT_TYPE}}),s),o.addEventListener("submit",a=>n(a)),i})()};var V5e=ye('<p class="text-red-400 mt-2 text-sm leading-4">Error: '),K5e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><ul class="list-decimal list-inside space-y-2"><li>Connect and unlock your Trezor device</li><li>Approve all relevant browser permissions</li><li>Follow all subsequent instructions by Trezor</li></ul><button class="mt-4 w-full h-11 rounded-xl font-semibold transition-100 flex items-center justify-center">');const Wa={FAILED_TO_CONNECT:"failed_to_connect",CONNECTING:"connecting"},H5e=()=>{const{setStep:r,updateImportForm:e}=En(),[t,n]=$e(Wa.CONNECTING),[i,s]=$e(null);async function o(){n(Wa.CONNECTING);try{const c=await _r.trezorGetAddresses({indices:new Array(vo).fill(0).map((l,u)=>u)});e({type:or.TREZOR,accounts:c.map(l=>({address:VR(l.address),path:l.path,mfp:""}))}),r(nt.SHARED_CHOOSE_ADDRESSES)}catch(c){n(Wa.FAILED_TO_CONNECT),s(typeof c=="object"&&c&&"message"in c&&typeof c.message=="string"?c.message:null)}}function a(){if(t()!==Wa.CONNECTING&&t()===Wa.FAILED_TO_CONNECT){s(null),o();return}}return Dr(()=>o()),(()=>{var c=K5e(),l=c.firstChild,u=l.nextSibling;return ce(c,D(ni,{title:"Connect Trezor",get previousStep(){return nt.IMPORT_HARDWARE_WALLET}}),l),u.$$click=a,ce(u,D(yr,{get children(){return[D(Ne,{get when(){return t()===Wa.CONNECTING},children:"Connecting..."}),D(Ne,{get when(){return t()===Wa.FAILED_TO_CONNECT},children:"Reconnect"})]}})),ce(c,D(We,{get when(){return i()},get children(){var f=V5e();return f.firstChild,ce(f,i,null),f}}),null),ht(f=>{var h={"bg-zinc-800 text-zinc-400 cursor-pointer":t()===Wa.CONNECTING,"bg-primary-200 active:bg-primary-200/20 cursor-pointer text-zinc-950":t()!==Wa.CONNECTING},d=t()===Wa.CONNECTING;return f.e=Gr(u,h,f.e),d!==f.t&&(u.disabled=f.t=d),f},{e:void 0,t:void 0}),c})()};Yt(["click"]);var W5e=ye('<div class="size-5 i-tabler:device-mobile-bolt bg-primary-200">'),G5e=ye('<div class="size-5 i-tabler:seedling bg-primary-200">'),Y5e=ye('<div class="size-5 i-tabler:key bg-primary-200">'),X5e=ye('<div>Social Login <span class="inline-flex items-center font-normal text-zinc-400 text-sm">(fka <div class="i-tabler:bolt-filled ml-0.5"></div> Quick Account)'),J5e=ye('<div class="size-5 i-tabler:brand-google bg-primary-200">'),Q5e=ye('<div class="size-5 i-tabler:device-usb rounded-full bg-primary-200">'),Z5e=ye('<div class="size-5 i-tabler:spy rounded-full bg-primary-200">'),e$e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl">'),t$e=ye('<button class="cursor-pointer p-3 flex gap-3 items-center justify-center bg-zinc-800 rounded-xl w-full ring-1 hover:ring-primary-200 ring-zinc-800 transition-100"><div class="size-10 flex items-center justify-center bg-primary-200/10 rounded-full"></div><div class="flex flex-col flex-1 text-left"><h3 class=font-medium></h3><p class="text-zinc-400 text-sm">');const r$e=()=>{const{setStep:r}=En(),{accounts:e}=Jr(),t=Ws(),n=[{title:"Jupiter Mobile",description:"Import your existing Jupiter Mobile wallet",Icon:()=>W5e(),onClick:()=>r(nt.JUPITER_SYNC_IMPORT)},{title:"Seed Phrase",description:"Import your existing seed phrase",Icon:()=>G5e(),onClick:()=>r(nt.IMPORT_SEED_PHRASE)},{title:"Private Key",description:"Import your existing private key",Icon:()=>Y5e(),onClick:()=>r(nt.IMPORT_PRIVATE_KEY)},{title:X5e(),description:"Use social accounts to import your wallet",Icon:()=>J5e(),onClick:()=>{if(e().some(i=>i.type==="privy"))return t.alert({title:"Social Account Already Exists",content:"Only one active Social Account is allowed. Please remove the existing account if you wish to use a new one."});r(nt.PRIVY_TYPE)}},{title:"Hardware Wallet",description:"Connect to your existing hardware wallet",Icon:()=>Q5e(),onClick:()=>r(nt.IMPORT_HARDWARE_WALLET)},{title:"Watch Address",description:"Track any wallet without access to its keys",Icon:()=>Z5e(),onClick:()=>r(nt.IMPORT_READONLY)}];return(()=>{var i=e$e();return ce(i,D(ni,{title:"Import Existing Wallet",get previousStep(){return nt.MAIN}}),null),ce(i,D(Lt,{each:n,children:({title:s,description:o,Icon:a,onClick:c})=>(()=>{var l=t$e(),u=l.firstChild,f=u.nextSibling,h=f.firstChild,d=h.nextSibling;return zs(l,"click",c,!0),ce(u,D(a,{})),ce(h,s),ce(d,o),l})()}),null),i})()};Yt(["click"]);/*!
Copyright (c) 2023 Paul Miller (paulmillr.com)
The library paulmillr-qr is dual-licensed under the Apache 2.0 OR MIT license.
You can select a license of your choice.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/const i0={newline:10,reset:27};function n$e(r){if(!Number.isSafeInteger(r))throw new Error(`integer expected: ${r}`)}function i$e(r){if(!Number.isSafeInteger(r)||r<1||r>40)throw new Error(`Invalid version=${r}. Expected number [1..40]`)}function Ku(r,e){return r.toString(2).padStart(e,"0")}function KF(r,e){const t=r%e;return t>=0?t:e+t}function go(r,e){return new Array(r).fill(e)}function HF(...r){let e=0;for(const n of r)e=Math.max(e,n.length);const t=[];for(let n=0;n<e;n++)for(const i of r)n>=i.length||t.push(i[n]);return new Uint8Array(t)}function WF(r,e,t){if(t<0||t+e.length>r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[t+n])return!1;return!0}function s$e(){let r,e=1/0;return{add(t,n){t>=e||(r=n,e=t)},get:()=>r,score:()=>e}}function GF(r){return{has:e=>r.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(t=>{if(typeof t!="string")throw new Error(`alphabet.decode: not string element=${t}`);const n=r.indexOf(t);if(n===-1)throw new Error(`Unknown letter: "${t}". Allowed: ${r}`);return n})},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(t=>{if(n$e(t),t<0||t>=r.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${r.length})`);return r[t]})}}}class ao{static size(e,t){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: invalid height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: invalid width=${e.width} (${typeof e.width})`);return t!==void 0&&(e={width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}),e}static fromString(e){e=e.replace(/^\n+/g,"").replace(/\n+$/g,"");const t=e.split(String.fromCharCode(i0.newline)),n=t.length,i=new Array(n);let s;for(const o of t){const a=o.split("").map(c=>{if(c==="X")return!0;if(c===" ")return!1;if(c!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${c}`)});if(s&&a.length!==s)throw new Error(`Bitmap.fromString different row sizes: width=${s} cur=${a.length}`);s=a.length,i.push(a)}return s||(s=0),new ao({height:n,width:s},i)}data;height;width;constructor(e,t){const{height:n,width:i}=ao.size(e);this.data=t||Array.from({length:n},()=>go(i,void 0)),this.height=n,this.width=i}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:t,y:n}=this.xy(e);return{height:this.height-n,width:this.width-t}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: invalid x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: invalid y=${e.y}`);return e.x=KF(e.x,this.width),e.y=KF(e.y,this.height),e}rect(e,t,n){const{x:i,y:s}=this.xy(e),{height:o,width:a}=ao.size(t,this.size({x:i,y:s}));for(let c=0;c<o;c++)for(let l=0;l<a;l++)this.data[s+c][i+l]=typeof n=="function"?n({x:l,y:c},this.data[s+c][i+l]):n;return this}rectRead(e,t,n){return this.rect(e,t,(i,s)=>(n(i,s),s))}hLine(e,t,n){return this.rect(e,{width:t,height:1},n)}vLine(e,t,n){return this.rect(e,{width:1,height:t},n)}border(e=2,t){const n=this.height+2*e,i=this.width+2*e,s=go(e,t),o=Array.from({length:e},()=>go(i,t));return new ao({height:n,width:i},[...o,...this.data.map(a=>[...s,...a,...s]),...o])}embed(e,t){return this.rect(e,t.size(),({x:n,y:i})=>t.data[i][n])}rectSlice(e,t=this.size()){const n=new ao(ao.size(t,this.size(this.xy(e))));return this.rect(e,t,({x:i,y:s},o)=>n.data[s][i]=o),n}inverse(){const{height:e,width:t}=this;return new ao({height:t,width:e}).rect({x:0,y:0},1/0,({x:i,y:s})=>this.data[i][s])}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`invalid scale factor: ${e}`);const{height:t,width:n}=this;return new ao({height:e*t,width:e*n}).rect({x:0,y:0},1/0,({x:s,y:o})=>this.data[Math.floor(o/e)][Math.floor(s/e)])}clone(){return new ao(this.size()).rect({x:0,y:0},this.size(),({x:t,y:n})=>this.data[n][t])}assertDrawn(){this.rectRead(0,1/0,(e,t)=>{if(typeof t!="boolean")throw new Error(`Invalid color type=${typeof t}`)})}toString(){return this.data.map(e=>e.map(t=>t===void 0?"?":t?"X":" ").join("")).join(String.fromCharCode(i0.newline))}toASCII(){const{height:e,width:t,data:n}=this;let i="";for(let s=0;s<e;s+=2){for(let o=0;o<t;o++){const a=n[s][o],c=s+1>=e?!0:n[s+1][o];!a&&!c?i+="":!a&&c?i+="":a&&!c?i+="":a&&c&&(i+=" ")}i+=String.fromCharCode(i0.newline)}return i}toTerm(){const e=String.fromCharCode(i0.reset),t=e+"[0m",n=e+"[1;47m  "+t,i=e+"[40m  "+t;return this.data.map(s=>s.map(o=>o?i:n).join("")).join(String.fromCharCode(i0.newline))}toSVG(e=!0){let t=`<svg viewBox="0 0 ${this.width} ${this.height}" xmlns="http://www.w3.org/2000/svg">`,n="",i;return this.rectRead(0,1/0,(s,o)=>{if(!o)return;const{x:a,y:c}=s;if(!e){t+=`<rect x="${a}" y="${c}" width="1" height="1" />`;return}let l=`M${a} ${c}`;if(i){const f=`m${a-i.x} ${c-i.y}`;f.length<=l.length&&(l=f)}const u=a<10?`H${a}`:"h-1";n+=`${l}h1v1${u}Z`,i=s}),e&&(t+=`<path d="${n}"/>`),t+="</svg>",t}toGIF(){const e=a=>[a&255,a>>>8&255],t=[...e(this.width),...e(this.height)],n=[];this.rectRead(0,1/0,(a,c)=>n.push(+(c===!0)));const i=126,s=[71,73,70,56,55,97,...t,246,0,0,255,255,255,...go(3*127,0),44,0,0,0,0,...t,0,7],o=Math.floor(n.length/i);for(let a=0;a<o;a++)s.push(i+1,128,...n.slice(i*a,i*(a+1)).map(c=>+c));return s.push(n.length%i+1,128,...n.slice(o*i).map(a=>+a)),s.push(1,129,0,59),new Uint8Array(s)}toImage(e=!1){const{height:t,width:n}=this.size(),i=new Uint8Array(t*n*(e?3:4));let s=0;for(let o=0;o<t;o++)for(let a=0;a<n;a++){const c=this.data[o][a]?0:255;i[s++]=c,i[s++]=c,i[s++]=c,e||(i[s++]=255)}return{height:t,width:n,data:i}}}const YF=["low","medium","quartile","high"],XF=["numeric","alphanumeric","byte","kanji","eci"],o$e=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],a$e={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},c$e={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},ns={size:{encode:r=>21+4*(r-1),decode:r=>(r-17)/4},sizeType:r=>Math.floor((r+7)/17),alignmentPatterns(r){if(r===1)return[];const e=6,t=ns.size.encode(r)-e-1,n=t-e,i=Math.ceil(n/28);let s=Math.floor(n/i);s%2?s+=1:n%i*2>=i&&(s+=2);const o=[e];for(let a=1;a<i;a++)o.push(t-(i-a)*s);return o.push(t),o},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(r,e){const t=ns.ECCode[r]<<3|e;let n=t;for(let i=0;i<10;i++)n=n<<1^(n>>9)*1335;return(t<<10|n)^ns.formatMask},versionBits(r){let e=r;for(let t=0;t<12;t++)e=e<<1^(e>>11)*7973;return r<<12|e},alphabet:{numeric:GF("0123456789"),alphanumerc:GF("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits(r,e){return{numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]}[e][ns.sizeType(r)]},modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(r,e){const t=o$e[r-1],n=a$e[e][r-1],i=c$e[e][r-1],s=Math.floor(t/i)-n,o=i-t%i;return{words:n,numBlocks:i,shortBlocks:o,blockLen:s,capacity:(t-n*i)*8,total:(n+s)*i+i-o}}},e6=[(r,e)=>(r+e)%2==0,(r,e)=>e%2==0,(r,e)=>r%3==0,(r,e)=>(r+e)%3==0,(r,e)=>(Math.floor(e/2)+Math.floor(r/3))%2==0,(r,e)=>r*e%2+r*e%3==0,(r,e)=>(r*e%2+r*e%3)%2==0,(r,e)=>((r+e)%2+r*e%3)%2==0],It={tables:(r=>{const e=go(256,0),t=go(256,0);for(let n=0,i=1;n<256;n++)e[n]=i,t[i]=n,i<<=1,i&256&&(i^=r);return{exp:e,log:t}})(285),exp:r=>It.tables.exp[r],log(r){if(r===0)throw new Error(`GF.log: invalid arg=${r}`);return It.tables.log[r]%255},mul(r,e){return r===0||e===0?0:It.tables.exp[(It.tables.log[r]+It.tables.log[e])%255]},add:(r,e)=>r^e,pow:(r,e)=>It.tables.exp[It.tables.log[r]*e%255],inv(r){if(r===0)throw new Error(`GF.inverse: invalid arg=${r}`);return It.tables.exp[255-It.tables.log[r]]},polynomial(r){if(r.length==0)throw new Error("GF.polymomial: invalid length");if(r[0]!==0)return r;let e=0;for(;e<r.length-1&&r[e]==0;e++);return r.slice(e)},monomial(r,e){if(r<0)throw new Error(`GF.monomial: invalid degree=${r}`);if(e==0)return[0];let t=go(r+1,0);return t[0]=e,It.polynomial(t)},degree:r=>r.length-1,coefficient:(r,e)=>r[It.degree(r)-e],mulPoly(r,e){if(r[0]===0||e[0]===0)return[0];const t=go(r.length+e.length-1,0);for(let n=0;n<r.length;n++)for(let i=0;i<e.length;i++)t[n+i]=It.add(t[n+i],It.mul(r[n],e[i]));return It.polynomial(t)},mulPolyScalar(r,e){if(e==0)return[0];if(e==1)return r;const t=go(r.length,0);for(let n=0;n<r.length;n++)t[n]=It.mul(r[n],e);return It.polynomial(t)},mulPolyMonomial(r,e,t){if(e<0)throw new Error("GF.mulPolyMonomial: invalid degree");if(t==0)return[0];const n=go(r.length+e,0);for(let i=0;i<r.length;i++)n[i]=It.mul(r[i],t);return It.polynomial(n)},addPoly(r,e){if(r[0]===0)return e;if(e[0]===0)return r;let t=r,n=e;t.length>n.length&&([t,n]=[n,t]);let i=go(n.length,0),s=n.length-t.length,o=n.slice(0,s);for(let a=0;a<o.length;a++)i[a]=o[a];for(let a=s;a<n.length;a++)i[a]=It.add(t[a-s],n[a]);return It.polynomial(i)},remainderPoly(r,e){const t=Array.from(r);for(let n=0;n<r.length-e.length+1;n++){const i=t[n];if(i!==0)for(let s=1;s<e.length;s++)e[s]!==0&&(t[n+s]=It.add(t[n+s],It.mul(e[s],i)))}return t.slice(r.length-e.length+1,t.length)},divisorPoly(r){let e=[1];for(let t=0;t<r;t++)e=It.mulPoly(e,[1,It.pow(2,t)]);return e},evalPoly(r,e){if(e==0)return It.coefficient(r,0);let t=r[0];for(let n=1;n<r.length;n++)t=It.add(It.mul(e,t),r[n]);return t},euclidian(r,e,t){It.degree(r)<It.degree(e)&&([r,e]=[e,r]);let n=r,i=e,s=[0],o=[1];for(;2*It.degree(i)>=t;){let l=n,u=s;if(n=i,s=o,n[0]===0)throw new Error("rLast[0] === 0");i=l;let f=[0];const h=It.inv(n[0]);for(;It.degree(i)>=It.degree(n)&&i[0]!==0;){const d=It.degree(i)-It.degree(n),g=It.mul(i[0],h);f=It.addPoly(f,It.monomial(d,g)),i=It.addPoly(i,It.mulPolyMonomial(n,d,g))}if(f=It.mulPoly(f,s),o=It.addPoly(f,u),It.degree(i)>=It.degree(n))throw new Error(`Division failed r: ${i}, rLast: ${n}`)}const a=It.coefficient(o,0);if(a==0)throw new Error("sigmaTilde(0) was zero");const c=It.inv(a);return[It.mulPolyScalar(o,c),It.mulPolyScalar(i,c)]}};function l$e(r){return{encode(e){const t=It.divisorPoly(r),n=Array.from(e);return n.push(...t.slice(0,-1).fill(0)),Uint8Array.from(It.remainderPoly(n,t))},decode(e){const t=e.slice(),n=It.polynomial(Array.from(e));let i=go(r,0),s=!1;for(let f=0;f<r;f++){const h=It.evalPoly(n,It.exp(f));i[i.length-1-f]=h,h!==0&&(s=!0)}if(!s)return t;i=It.polynomial(i);const o=It.monomial(r,1),[a,c]=It.euclidian(o,i,r),l=go(It.degree(a),0);let u=0;for(let f=1;f<256&&u<l.length;f++)It.evalPoly(a,f)===0&&(l[u++]=It.inv(f));if(u!==l.length)throw new Error("RS.decode: invalid errors number");for(let f=0;f<l.length;f++){const h=t.length-1-It.log(l[f]);if(h<0)throw new Error("RS.decode: invalid error location");const d=It.inv(l[f]);let g=1;for(let p=0;p<l.length;p++)f!==p&&(g=It.mul(g,It.add(1,It.mul(l[p],d))));t[h]=It.add(t[h],It.mul(It.evalPoly(c,d),It.inv(g)))}return t}}}function u$e(r,e){const{words:t,shortBlocks:n,numBlocks:i,blockLen:s,total:o}=ns.capacity(r,e),a=l$e(t);return{encode(c){const l=[],u=[];for(let g=0;g<i;g++){const p=g<n,m=s+(p?0:1);l.push(c.subarray(0,m)),u.push(a.encode(c.subarray(0,m))),c=c.subarray(m)}const f=HF(...l),h=HF(...u),d=new Uint8Array(f.length+h.length);return d.set(f),d.set(h,f.length),d},decode(c){if(c.length!==o)throw new Error(`interleave.decode: len(data)=${c.length}, total=${o}`);const l=[];for(let h=0;h<i;h++){const d=h<n;l.push(new Uint8Array(t+s+(d?0:1)))}let u=0;for(let h=0;h<s;h++)for(let d=0;d<i;d++)l[d][h]=c[u++];for(let h=n;h<i;h++)l[h][s]=c[u++];for(let h=s;h<s+t;h++)for(let d=0;d<i;d++){const g=d<n;l[d][h+(g?0:1)]=c[u++]}const f=[];for(const h of l)f.push(...Array.from(a.decode(h)).slice(0,-t));return Uint8Array.from(f)}}}function f$e(r,e,t,n=!1){const i=ns.size.encode(r);let s=new ao(i+2);const o=new ao(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);s=s.embed(0,o).embed({x:-o.width,y:0},o).embed({x:0,y:-o.height},o),s=s.rectSlice(1,i);const a=new ao(1).rect(0,1,!0).border(1,!1).border(1,!0),c=ns.alignmentPatterns(r);for(const l of c)for(const u of c)s.data[l][u]===void 0&&s.embed({x:u-2,y:l-2},a);s=s.hLine({x:0,y:6},1/0,({x:l},u)=>u===void 0?l%2==0:u).vLine({x:6,y:0},1/0,({y:l},u)=>u===void 0?l%2==0:u);{const l=ns.formatBits(e,t),u=f=>!n&&(l>>f&1)==1;for(let f=0;f<6;f++)s.data[f][8]=u(f);for(let f=6;f<8;f++)s.data[f+1][8]=u(f);for(let f=8;f<15;f++)s.data[i-15+f][8]=u(f);for(let f=0;f<8;f++)s.data[8][i-f-1]=u(f);for(let f=8;f<9;f++)s.data[8][15-f-1+1]=u(f);for(let f=9;f<15;f++)s.data[8][15-f-1]=u(f);s.data[i-8][8]=!n}if(r>=7){const l=ns.versionBits(r);for(let u=0;u<18;u+=1){const f=!n&&(l>>u&1)==1,h=Math.floor(u/3),d=u%3+i-8-3;s.data[h][d]=f,s.data[d][h]=f}}return s}function h$e(r,e,t){const n=r.height,i=e6[e];let s=-1,o=n-1;for(let a=n-1;a>0;a-=2){for(a==6&&(a=5);;o+=s){for(let c=0;c<2;c+=1){const l=a-c;r.data[o][l]===void 0&&t(l,o,i(l,o))}if(o+s<0||o+s>=n)break}s=-s}}function d$e(r){let e="numeric";for(let t of r)if(!ns.alphabet.numeric.has(t)&&(e="alphanumeric",!ns.alphabet.alphanumerc.has(t)))return"byte";return e}function p$e(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function JF(r,e,t,n){let i="",s=t.length;if(n==="numeric"){const f=ns.alphabet.numeric.decode(t.split("")),h=f.length;for(let d=0;d<h-2;d+=3)i+=Ku(f[d]*100+f[d+1]*10+f[d+2],10);h%3===1?i+=Ku(f[h-1],4):h%3===2&&(i+=Ku(f[h-2]*10+f[h-1],7))}else if(n==="alphanumeric"){const f=ns.alphabet.alphanumerc.decode(t.split("")),h=f.length;for(let d=0;d<h-1;d+=2)i+=Ku(f[d]*45+f[d+1],11);h%2==1&&(i+=Ku(f[h-1],6))}else if(n==="byte"){const f=p$e(t);s=f.length,i=Array.from(f).map(h=>Ku(h,8)).join("")}else throw new Error("encode: unsupported type");const{capacity:o}=ns.capacity(r,e),a=Ku(s,ns.lengthBits(r,n));let c=ns.modeBits[n]+a+i;if(c.length>o)throw new Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,o-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const l="1110110000010001";for(let f=0;c.length!==o;f++)c+=l[f%l.length];const u=Uint8Array.from(c.match(/(.{8})/g).map(f=>+`0b${f}`));return u$e(r,e).encode(u)}function QF(r,e,t,n,i=!1){const s=f$e(r,e,n,i);let o=0;const a=8*t.length;if(h$e(s,n,(c,l,u)=>{let f=!1;o<a&&(f=(t[o>>>3]>>(7-o&7)&1)!==0,o++),s.data[l][c]=f!==u}),o!==a)throw new Error("QR: bytes left after draw");return s}function g$e(r){const e=r.inverse(),t=d=>{let g=0;for(let p=0,m=1,y=void 0;p<d.length;p++)y===d[p]&&(m++,p!==d.length-1)||(m>=5&&(g+=3+(m-5)),y=d[p],m=1);return g};let n=0;r.data.forEach(d=>n+=t(d)),e.data.forEach(d=>n+=t(d));let i=0,s=r.data;const o=r.width-1,a=r.height-1;for(let d=0;d<o;d++)for(let g=0;g<a;g++){const p=d+1,m=g+1;s[d][g]===s[p][g]&&s[p][g]===s[d][m]&&s[p][g]===s[p][m]&&(i+=3)}const c=d=>{const g=[!0,!1,!0,!0,!0,!1,!0],p=[!1,!1,!1,!1],m=[...g,...p],y=[...p,...g];let v=0;for(let b=0;b<d.length;b++)WF(d,m,b)&&(v+=40),WF(d,y,b)&&(v+=40);return v};let l=0;for(const d of r.data)l+=c(d);for(const d of e.data)l+=c(d);let u=0;r.rectRead(0,1/0,(d,g)=>u+=g?1:0);const f=u/(r.height*r.width)*100,h=10*Math.floor(Math.abs(f-50)/5);return n+i+l+h}function m$e(r,e,t,n){if(n===void 0){const i=s$e();for(let s=0;s<e6.length;s++)i.add(g$e(QF(r,e,t,s,!0)),s);n=i.get()}if(n===void 0)throw new Error("Cannot find mask");return QF(r,e,t,n)}function y$e(r){if(!YF.includes(r))throw new Error(`Invalid error correction mode=${r}. Expected: ${YF}`)}function v$e(r){if(!XF.includes(r))throw new Error(`Encoding: invalid mode=${r}. Expected: ${XF}`);if(r==="kanji"||r==="eci")throw new Error(`Encoding: ${r} is not supported (yet?).`)}function b$e(r){if(![0,1,2,3,4,5,6,7].includes(r)||!e6[r])throw new Error(`Invalid mask=${r}. Expected number [0..7]`)}function w$e(r,e="raw",t={}){const n=t.ecc!==void 0?t.ecc:"medium";y$e(n);const i=t.encoding!==void 0?t.encoding:d$e(r);v$e(i),t.mask!==void 0&&b$e(t.mask);let s=t.version,o,a=new Error("Unknown error");if(s!==void 0)i$e(s),o=JF(s,n,r,i);else for(let u=1;u<=40;u++)try{o=JF(u,n,r,i),s=u;break}catch(f){a=f}if(!s||!o)throw a;let c=m$e(s,n,o,t.mask);c.assertDrawn();const l=t.border===void 0?2:t.border;if(!Number.isSafeInteger(l))throw new Error(`invalid border type=${typeof l}`);if(c=c.border(l,!1),t.scale!==void 0&&(c=c.scale(t.scale)),e==="raw")return c.data;if(e==="ascii")return c.toASCII();if(e==="svg")return c.toSVG(t.optimize);if(e==="gif")return c.toGIF();if(e==="term")return c.toTerm();throw new Error(`Unknown output: ${e}`)}var x$e=ye("<div>");const t6=r=>{const e=w$e(r.payload,"svg",{border:0,ecc:r.ecc});return(()=>{var t=x$e();return bn(t,st(r,{get class(){return Xr("size-64 p-3 rounded bg-zinc-950 fill-zinc-50",r.class)},innerHTML:e}),!1,!1),t})()};var G2={exports:{}},ZF;function _$e(){return ZF||(ZF=1,function(r){(function(e){var t=function(ae){var ge,me=new Float64Array(16);if(ae)for(ge=0;ge<ae.length;ge++)me[ge]=ae[ge];return me},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=t(),a=t([1]),c=t([56129,1]),l=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function g(ae,ge,me,W){ae[ge]=me>>24&255,ae[ge+1]=me>>16&255,ae[ge+2]=me>>8&255,ae[ge+3]=me&255,ae[ge+4]=W>>24&255,ae[ge+5]=W>>16&255,ae[ge+6]=W>>8&255,ae[ge+7]=W&255}function p(ae,ge,me,W,ve){var Re,Te=0;for(Re=0;Re<ve;Re++)Te|=ae[ge+Re]^me[W+Re];return(1&Te-1>>>8)-1}function m(ae,ge,me,W){return p(ae,ge,me,W,16)}function y(ae,ge,me,W){return p(ae,ge,me,W,32)}function v(ae,ge,me,W){for(var ve=W[0]&255|(W[1]&255)<<8|(W[2]&255)<<16|(W[3]&255)<<24,Re=me[0]&255|(me[1]&255)<<8|(me[2]&255)<<16|(me[3]&255)<<24,Te=me[4]&255|(me[5]&255)<<8|(me[6]&255)<<16|(me[7]&255)<<24,ze=me[8]&255|(me[9]&255)<<8|(me[10]&255)<<16|(me[11]&255)<<24,Qe=me[12]&255|(me[13]&255)<<8|(me[14]&255)<<16|(me[15]&255)<<24,at=W[4]&255|(W[5]&255)<<8|(W[6]&255)<<16|(W[7]&255)<<24,rt=ge[0]&255|(ge[1]&255)<<8|(ge[2]&255)<<16|(ge[3]&255)<<24,sr=ge[4]&255|(ge[5]&255)<<8|(ge[6]&255)<<16|(ge[7]&255)<<24,dt=ge[8]&255|(ge[9]&255)<<8|(ge[10]&255)<<16|(ge[11]&255)<<24,Bt=ge[12]&255|(ge[13]&255)<<8|(ge[14]&255)<<16|(ge[15]&255)<<24,zt=W[8]&255|(W[9]&255)<<8|(W[10]&255)<<16|(W[11]&255)<<24,jt=me[16]&255|(me[17]&255)<<8|(me[18]&255)<<16|(me[19]&255)<<24,ir=me[20]&255|(me[21]&255)<<8|(me[22]&255)<<16|(me[23]&255)<<24,Qt=me[24]&255|(me[25]&255)<<8|(me[26]&255)<<16|(me[27]&255)<<24,tr=me[28]&255|(me[29]&255)<<8|(me[30]&255)<<16|(me[31]&255)<<24,Zt=W[12]&255|(W[13]&255)<<8|(W[14]&255)<<16|(W[15]&255)<<24,St=ve,Nt=Re,wt=Te,At=ze,Tt=Qe,mt=at,Fe=rt,Ue=sr,Je=dt,Ge=Bt,Ye=zt,ot=jt,Wt=ir,dr=Qt,vr=tr,pr=Zt,Ie,Cr=0;Cr<20;Cr+=2)Ie=St+Wt|0,Tt^=Ie<<7|Ie>>>25,Ie=Tt+St|0,Je^=Ie<<9|Ie>>>23,Ie=Je+Tt|0,Wt^=Ie<<13|Ie>>>19,Ie=Wt+Je|0,St^=Ie<<18|Ie>>>14,Ie=mt+Nt|0,Ge^=Ie<<7|Ie>>>25,Ie=Ge+mt|0,dr^=Ie<<9|Ie>>>23,Ie=dr+Ge|0,Nt^=Ie<<13|Ie>>>19,Ie=Nt+dr|0,mt^=Ie<<18|Ie>>>14,Ie=Ye+Fe|0,vr^=Ie<<7|Ie>>>25,Ie=vr+Ye|0,wt^=Ie<<9|Ie>>>23,Ie=wt+vr|0,Fe^=Ie<<13|Ie>>>19,Ie=Fe+wt|0,Ye^=Ie<<18|Ie>>>14,Ie=pr+ot|0,At^=Ie<<7|Ie>>>25,Ie=At+pr|0,Ue^=Ie<<9|Ie>>>23,Ie=Ue+At|0,ot^=Ie<<13|Ie>>>19,Ie=ot+Ue|0,pr^=Ie<<18|Ie>>>14,Ie=St+At|0,Nt^=Ie<<7|Ie>>>25,Ie=Nt+St|0,wt^=Ie<<9|Ie>>>23,Ie=wt+Nt|0,At^=Ie<<13|Ie>>>19,Ie=At+wt|0,St^=Ie<<18|Ie>>>14,Ie=mt+Tt|0,Fe^=Ie<<7|Ie>>>25,Ie=Fe+mt|0,Ue^=Ie<<9|Ie>>>23,Ie=Ue+Fe|0,Tt^=Ie<<13|Ie>>>19,Ie=Tt+Ue|0,mt^=Ie<<18|Ie>>>14,Ie=Ye+Ge|0,ot^=Ie<<7|Ie>>>25,Ie=ot+Ye|0,Je^=Ie<<9|Ie>>>23,Ie=Je+ot|0,Ge^=Ie<<13|Ie>>>19,Ie=Ge+Je|0,Ye^=Ie<<18|Ie>>>14,Ie=pr+vr|0,Wt^=Ie<<7|Ie>>>25,Ie=Wt+pr|0,dr^=Ie<<9|Ie>>>23,Ie=dr+Wt|0,vr^=Ie<<13|Ie>>>19,Ie=vr+dr|0,pr^=Ie<<18|Ie>>>14;St=St+ve|0,Nt=Nt+Re|0,wt=wt+Te|0,At=At+ze|0,Tt=Tt+Qe|0,mt=mt+at|0,Fe=Fe+rt|0,Ue=Ue+sr|0,Je=Je+dt|0,Ge=Ge+Bt|0,Ye=Ye+zt|0,ot=ot+jt|0,Wt=Wt+ir|0,dr=dr+Qt|0,vr=vr+tr|0,pr=pr+Zt|0,ae[0]=St>>>0&255,ae[1]=St>>>8&255,ae[2]=St>>>16&255,ae[3]=St>>>24&255,ae[4]=Nt>>>0&255,ae[5]=Nt>>>8&255,ae[6]=Nt>>>16&255,ae[7]=Nt>>>24&255,ae[8]=wt>>>0&255,ae[9]=wt>>>8&255,ae[10]=wt>>>16&255,ae[11]=wt>>>24&255,ae[12]=At>>>0&255,ae[13]=At>>>8&255,ae[14]=At>>>16&255,ae[15]=At>>>24&255,ae[16]=Tt>>>0&255,ae[17]=Tt>>>8&255,ae[18]=Tt>>>16&255,ae[19]=Tt>>>24&255,ae[20]=mt>>>0&255,ae[21]=mt>>>8&255,ae[22]=mt>>>16&255,ae[23]=mt>>>24&255,ae[24]=Fe>>>0&255,ae[25]=Fe>>>8&255,ae[26]=Fe>>>16&255,ae[27]=Fe>>>24&255,ae[28]=Ue>>>0&255,ae[29]=Ue>>>8&255,ae[30]=Ue>>>16&255,ae[31]=Ue>>>24&255,ae[32]=Je>>>0&255,ae[33]=Je>>>8&255,ae[34]=Je>>>16&255,ae[35]=Je>>>24&255,ae[36]=Ge>>>0&255,ae[37]=Ge>>>8&255,ae[38]=Ge>>>16&255,ae[39]=Ge>>>24&255,ae[40]=Ye>>>0&255,ae[41]=Ye>>>8&255,ae[42]=Ye>>>16&255,ae[43]=Ye>>>24&255,ae[44]=ot>>>0&255,ae[45]=ot>>>8&255,ae[46]=ot>>>16&255,ae[47]=ot>>>24&255,ae[48]=Wt>>>0&255,ae[49]=Wt>>>8&255,ae[50]=Wt>>>16&255,ae[51]=Wt>>>24&255,ae[52]=dr>>>0&255,ae[53]=dr>>>8&255,ae[54]=dr>>>16&255,ae[55]=dr>>>24&255,ae[56]=vr>>>0&255,ae[57]=vr>>>8&255,ae[58]=vr>>>16&255,ae[59]=vr>>>24&255,ae[60]=pr>>>0&255,ae[61]=pr>>>8&255,ae[62]=pr>>>16&255,ae[63]=pr>>>24&255}function b(ae,ge,me,W){for(var ve=W[0]&255|(W[1]&255)<<8|(W[2]&255)<<16|(W[3]&255)<<24,Re=me[0]&255|(me[1]&255)<<8|(me[2]&255)<<16|(me[3]&255)<<24,Te=me[4]&255|(me[5]&255)<<8|(me[6]&255)<<16|(me[7]&255)<<24,ze=me[8]&255|(me[9]&255)<<8|(me[10]&255)<<16|(me[11]&255)<<24,Qe=me[12]&255|(me[13]&255)<<8|(me[14]&255)<<16|(me[15]&255)<<24,at=W[4]&255|(W[5]&255)<<8|(W[6]&255)<<16|(W[7]&255)<<24,rt=ge[0]&255|(ge[1]&255)<<8|(ge[2]&255)<<16|(ge[3]&255)<<24,sr=ge[4]&255|(ge[5]&255)<<8|(ge[6]&255)<<16|(ge[7]&255)<<24,dt=ge[8]&255|(ge[9]&255)<<8|(ge[10]&255)<<16|(ge[11]&255)<<24,Bt=ge[12]&255|(ge[13]&255)<<8|(ge[14]&255)<<16|(ge[15]&255)<<24,zt=W[8]&255|(W[9]&255)<<8|(W[10]&255)<<16|(W[11]&255)<<24,jt=me[16]&255|(me[17]&255)<<8|(me[18]&255)<<16|(me[19]&255)<<24,ir=me[20]&255|(me[21]&255)<<8|(me[22]&255)<<16|(me[23]&255)<<24,Qt=me[24]&255|(me[25]&255)<<8|(me[26]&255)<<16|(me[27]&255)<<24,tr=me[28]&255|(me[29]&255)<<8|(me[30]&255)<<16|(me[31]&255)<<24,Zt=W[12]&255|(W[13]&255)<<8|(W[14]&255)<<16|(W[15]&255)<<24,St=ve,Nt=Re,wt=Te,At=ze,Tt=Qe,mt=at,Fe=rt,Ue=sr,Je=dt,Ge=Bt,Ye=zt,ot=jt,Wt=ir,dr=Qt,vr=tr,pr=Zt,Ie,Cr=0;Cr<20;Cr+=2)Ie=St+Wt|0,Tt^=Ie<<7|Ie>>>25,Ie=Tt+St|0,Je^=Ie<<9|Ie>>>23,Ie=Je+Tt|0,Wt^=Ie<<13|Ie>>>19,Ie=Wt+Je|0,St^=Ie<<18|Ie>>>14,Ie=mt+Nt|0,Ge^=Ie<<7|Ie>>>25,Ie=Ge+mt|0,dr^=Ie<<9|Ie>>>23,Ie=dr+Ge|0,Nt^=Ie<<13|Ie>>>19,Ie=Nt+dr|0,mt^=Ie<<18|Ie>>>14,Ie=Ye+Fe|0,vr^=Ie<<7|Ie>>>25,Ie=vr+Ye|0,wt^=Ie<<9|Ie>>>23,Ie=wt+vr|0,Fe^=Ie<<13|Ie>>>19,Ie=Fe+wt|0,Ye^=Ie<<18|Ie>>>14,Ie=pr+ot|0,At^=Ie<<7|Ie>>>25,Ie=At+pr|0,Ue^=Ie<<9|Ie>>>23,Ie=Ue+At|0,ot^=Ie<<13|Ie>>>19,Ie=ot+Ue|0,pr^=Ie<<18|Ie>>>14,Ie=St+At|0,Nt^=Ie<<7|Ie>>>25,Ie=Nt+St|0,wt^=Ie<<9|Ie>>>23,Ie=wt+Nt|0,At^=Ie<<13|Ie>>>19,Ie=At+wt|0,St^=Ie<<18|Ie>>>14,Ie=mt+Tt|0,Fe^=Ie<<7|Ie>>>25,Ie=Fe+mt|0,Ue^=Ie<<9|Ie>>>23,Ie=Ue+Fe|0,Tt^=Ie<<13|Ie>>>19,Ie=Tt+Ue|0,mt^=Ie<<18|Ie>>>14,Ie=Ye+Ge|0,ot^=Ie<<7|Ie>>>25,Ie=ot+Ye|0,Je^=Ie<<9|Ie>>>23,Ie=Je+ot|0,Ge^=Ie<<13|Ie>>>19,Ie=Ge+Je|0,Ye^=Ie<<18|Ie>>>14,Ie=pr+vr|0,Wt^=Ie<<7|Ie>>>25,Ie=Wt+pr|0,dr^=Ie<<9|Ie>>>23,Ie=dr+Wt|0,vr^=Ie<<13|Ie>>>19,Ie=vr+dr|0,pr^=Ie<<18|Ie>>>14;ae[0]=St>>>0&255,ae[1]=St>>>8&255,ae[2]=St>>>16&255,ae[3]=St>>>24&255,ae[4]=mt>>>0&255,ae[5]=mt>>>8&255,ae[6]=mt>>>16&255,ae[7]=mt>>>24&255,ae[8]=Ye>>>0&255,ae[9]=Ye>>>8&255,ae[10]=Ye>>>16&255,ae[11]=Ye>>>24&255,ae[12]=pr>>>0&255,ae[13]=pr>>>8&255,ae[14]=pr>>>16&255,ae[15]=pr>>>24&255,ae[16]=Fe>>>0&255,ae[17]=Fe>>>8&255,ae[18]=Fe>>>16&255,ae[19]=Fe>>>24&255,ae[20]=Ue>>>0&255,ae[21]=Ue>>>8&255,ae[22]=Ue>>>16&255,ae[23]=Ue>>>24&255,ae[24]=Je>>>0&255,ae[25]=Je>>>8&255,ae[26]=Je>>>16&255,ae[27]=Je>>>24&255,ae[28]=Ge>>>0&255,ae[29]=Ge>>>8&255,ae[30]=Ge>>>16&255,ae[31]=Ge>>>24&255}function _(ae,ge,me,W){v(ae,ge,me,W)}function x(ae,ge,me,W){b(ae,ge,me,W)}var E=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function S(ae,ge,me,W,ve,Re,Te){var ze=new Uint8Array(16),Qe=new Uint8Array(64),at,rt;for(rt=0;rt<16;rt++)ze[rt]=0;for(rt=0;rt<8;rt++)ze[rt]=Re[rt];for(;ve>=64;){for(_(Qe,ze,Te,E),rt=0;rt<64;rt++)ae[ge+rt]=me[W+rt]^Qe[rt];for(at=1,rt=8;rt<16;rt++)at=at+(ze[rt]&255)|0,ze[rt]=at&255,at>>>=8;ve-=64,ge+=64,W+=64}if(ve>0)for(_(Qe,ze,Te,E),rt=0;rt<ve;rt++)ae[ge+rt]=me[W+rt]^Qe[rt];return 0}function C(ae,ge,me,W,ve){var Re=new Uint8Array(16),Te=new Uint8Array(64),ze,Qe;for(Qe=0;Qe<16;Qe++)Re[Qe]=0;for(Qe=0;Qe<8;Qe++)Re[Qe]=W[Qe];for(;me>=64;){for(_(Te,Re,ve,E),Qe=0;Qe<64;Qe++)ae[ge+Qe]=Te[Qe];for(ze=1,Qe=8;Qe<16;Qe++)ze=ze+(Re[Qe]&255)|0,Re[Qe]=ze&255,ze>>>=8;me-=64,ge+=64}if(me>0)for(_(Te,Re,ve,E),Qe=0;Qe<me;Qe++)ae[ge+Qe]=Te[Qe];return 0}function k(ae,ge,me,W,ve){var Re=new Uint8Array(32);x(Re,W,ve,E);for(var Te=new Uint8Array(8),ze=0;ze<8;ze++)Te[ze]=W[ze+16];return C(ae,ge,me,Te,Re)}function $(ae,ge,me,W,ve,Re,Te){var ze=new Uint8Array(32);x(ze,Re,Te,E);for(var Qe=new Uint8Array(8),at=0;at<8;at++)Qe[at]=Re[at+16];return S(ae,ge,me,W,ve,Qe,ze)}var J=function(ae){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var ge,me,W,ve,Re,Te,ze,Qe;ge=ae[0]&255|(ae[1]&255)<<8,this.r[0]=ge&8191,me=ae[2]&255|(ae[3]&255)<<8,this.r[1]=(ge>>>13|me<<3)&8191,W=ae[4]&255|(ae[5]&255)<<8,this.r[2]=(me>>>10|W<<6)&7939,ve=ae[6]&255|(ae[7]&255)<<8,this.r[3]=(W>>>7|ve<<9)&8191,Re=ae[8]&255|(ae[9]&255)<<8,this.r[4]=(ve>>>4|Re<<12)&255,this.r[5]=Re>>>1&8190,Te=ae[10]&255|(ae[11]&255)<<8,this.r[6]=(Re>>>14|Te<<2)&8191,ze=ae[12]&255|(ae[13]&255)<<8,this.r[7]=(Te>>>11|ze<<5)&8065,Qe=ae[14]&255|(ae[15]&255)<<8,this.r[8]=(ze>>>8|Qe<<8)&8191,this.r[9]=Qe>>>5&127,this.pad[0]=ae[16]&255|(ae[17]&255)<<8,this.pad[1]=ae[18]&255|(ae[19]&255)<<8,this.pad[2]=ae[20]&255|(ae[21]&255)<<8,this.pad[3]=ae[22]&255|(ae[23]&255)<<8,this.pad[4]=ae[24]&255|(ae[25]&255)<<8,this.pad[5]=ae[26]&255|(ae[27]&255)<<8,this.pad[6]=ae[28]&255|(ae[29]&255)<<8,this.pad[7]=ae[30]&255|(ae[31]&255)<<8};J.prototype.blocks=function(ae,ge,me){for(var W=this.fin?0:2048,ve,Re,Te,ze,Qe,at,rt,sr,dt,Bt,zt,jt,ir,Qt,tr,Zt,St,Nt,wt,At=this.h[0],Tt=this.h[1],mt=this.h[2],Fe=this.h[3],Ue=this.h[4],Je=this.h[5],Ge=this.h[6],Ye=this.h[7],ot=this.h[8],Wt=this.h[9],dr=this.r[0],vr=this.r[1],pr=this.r[2],Ie=this.r[3],Cr=this.r[4],jr=this.r[5],Vr=this.r[6],Ar=this.r[7],zr=this.r[8],qr=this.r[9];me>=16;)ve=ae[ge+0]&255|(ae[ge+1]&255)<<8,At+=ve&8191,Re=ae[ge+2]&255|(ae[ge+3]&255)<<8,Tt+=(ve>>>13|Re<<3)&8191,Te=ae[ge+4]&255|(ae[ge+5]&255)<<8,mt+=(Re>>>10|Te<<6)&8191,ze=ae[ge+6]&255|(ae[ge+7]&255)<<8,Fe+=(Te>>>7|ze<<9)&8191,Qe=ae[ge+8]&255|(ae[ge+9]&255)<<8,Ue+=(ze>>>4|Qe<<12)&8191,Je+=Qe>>>1&8191,at=ae[ge+10]&255|(ae[ge+11]&255)<<8,Ge+=(Qe>>>14|at<<2)&8191,rt=ae[ge+12]&255|(ae[ge+13]&255)<<8,Ye+=(at>>>11|rt<<5)&8191,sr=ae[ge+14]&255|(ae[ge+15]&255)<<8,ot+=(rt>>>8|sr<<8)&8191,Wt+=sr>>>5|W,dt=0,Bt=dt,Bt+=At*dr,Bt+=Tt*(5*qr),Bt+=mt*(5*zr),Bt+=Fe*(5*Ar),Bt+=Ue*(5*Vr),dt=Bt>>>13,Bt&=8191,Bt+=Je*(5*jr),Bt+=Ge*(5*Cr),Bt+=Ye*(5*Ie),Bt+=ot*(5*pr),Bt+=Wt*(5*vr),dt+=Bt>>>13,Bt&=8191,zt=dt,zt+=At*vr,zt+=Tt*dr,zt+=mt*(5*qr),zt+=Fe*(5*zr),zt+=Ue*(5*Ar),dt=zt>>>13,zt&=8191,zt+=Je*(5*Vr),zt+=Ge*(5*jr),zt+=Ye*(5*Cr),zt+=ot*(5*Ie),zt+=Wt*(5*pr),dt+=zt>>>13,zt&=8191,jt=dt,jt+=At*pr,jt+=Tt*vr,jt+=mt*dr,jt+=Fe*(5*qr),jt+=Ue*(5*zr),dt=jt>>>13,jt&=8191,jt+=Je*(5*Ar),jt+=Ge*(5*Vr),jt+=Ye*(5*jr),jt+=ot*(5*Cr),jt+=Wt*(5*Ie),dt+=jt>>>13,jt&=8191,ir=dt,ir+=At*Ie,ir+=Tt*pr,ir+=mt*vr,ir+=Fe*dr,ir+=Ue*(5*qr),dt=ir>>>13,ir&=8191,ir+=Je*(5*zr),ir+=Ge*(5*Ar),ir+=Ye*(5*Vr),ir+=ot*(5*jr),ir+=Wt*(5*Cr),dt+=ir>>>13,ir&=8191,Qt=dt,Qt+=At*Cr,Qt+=Tt*Ie,Qt+=mt*pr,Qt+=Fe*vr,Qt+=Ue*dr,dt=Qt>>>13,Qt&=8191,Qt+=Je*(5*qr),Qt+=Ge*(5*zr),Qt+=Ye*(5*Ar),Qt+=ot*(5*Vr),Qt+=Wt*(5*jr),dt+=Qt>>>13,Qt&=8191,tr=dt,tr+=At*jr,tr+=Tt*Cr,tr+=mt*Ie,tr+=Fe*pr,tr+=Ue*vr,dt=tr>>>13,tr&=8191,tr+=Je*dr,tr+=Ge*(5*qr),tr+=Ye*(5*zr),tr+=ot*(5*Ar),tr+=Wt*(5*Vr),dt+=tr>>>13,tr&=8191,Zt=dt,Zt+=At*Vr,Zt+=Tt*jr,Zt+=mt*Cr,Zt+=Fe*Ie,Zt+=Ue*pr,dt=Zt>>>13,Zt&=8191,Zt+=Je*vr,Zt+=Ge*dr,Zt+=Ye*(5*qr),Zt+=ot*(5*zr),Zt+=Wt*(5*Ar),dt+=Zt>>>13,Zt&=8191,St=dt,St+=At*Ar,St+=Tt*Vr,St+=mt*jr,St+=Fe*Cr,St+=Ue*Ie,dt=St>>>13,St&=8191,St+=Je*pr,St+=Ge*vr,St+=Ye*dr,St+=ot*(5*qr),St+=Wt*(5*zr),dt+=St>>>13,St&=8191,Nt=dt,Nt+=At*zr,Nt+=Tt*Ar,Nt+=mt*Vr,Nt+=Fe*jr,Nt+=Ue*Cr,dt=Nt>>>13,Nt&=8191,Nt+=Je*Ie,Nt+=Ge*pr,Nt+=Ye*vr,Nt+=ot*dr,Nt+=Wt*(5*qr),dt+=Nt>>>13,Nt&=8191,wt=dt,wt+=At*qr,wt+=Tt*zr,wt+=mt*Ar,wt+=Fe*Vr,wt+=Ue*jr,dt=wt>>>13,wt&=8191,wt+=Je*Cr,wt+=Ge*Ie,wt+=Ye*pr,wt+=ot*vr,wt+=Wt*dr,dt+=wt>>>13,wt&=8191,dt=(dt<<2)+dt|0,dt=dt+Bt|0,Bt=dt&8191,dt=dt>>>13,zt+=dt,At=Bt,Tt=zt,mt=jt,Fe=ir,Ue=Qt,Je=tr,Ge=Zt,Ye=St,ot=Nt,Wt=wt,ge+=16,me-=16;this.h[0]=At,this.h[1]=Tt,this.h[2]=mt,this.h[3]=Fe,this.h[4]=Ue,this.h[5]=Je,this.h[6]=Ge,this.h[7]=Ye,this.h[8]=ot,this.h[9]=Wt},J.prototype.finish=function(ae,ge){var me=new Uint16Array(10),W,ve,Re,Te;if(this.leftover){for(Te=this.leftover,this.buffer[Te++]=1;Te<16;Te++)this.buffer[Te]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(W=this.h[1]>>>13,this.h[1]&=8191,Te=2;Te<10;Te++)this.h[Te]+=W,W=this.h[Te]>>>13,this.h[Te]&=8191;for(this.h[0]+=W*5,W=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=W,W=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=W,me[0]=this.h[0]+5,W=me[0]>>>13,me[0]&=8191,Te=1;Te<10;Te++)me[Te]=this.h[Te]+W,W=me[Te]>>>13,me[Te]&=8191;for(me[9]-=8192,ve=(W^1)-1,Te=0;Te<10;Te++)me[Te]&=ve;for(ve=~ve,Te=0;Te<10;Te++)this.h[Te]=this.h[Te]&ve|me[Te];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,Re=this.h[0]+this.pad[0],this.h[0]=Re&65535,Te=1;Te<8;Te++)Re=(this.h[Te]+this.pad[Te]|0)+(Re>>>16)|0,this.h[Te]=Re&65535;ae[ge+0]=this.h[0]>>>0&255,ae[ge+1]=this.h[0]>>>8&255,ae[ge+2]=this.h[1]>>>0&255,ae[ge+3]=this.h[1]>>>8&255,ae[ge+4]=this.h[2]>>>0&255,ae[ge+5]=this.h[2]>>>8&255,ae[ge+6]=this.h[3]>>>0&255,ae[ge+7]=this.h[3]>>>8&255,ae[ge+8]=this.h[4]>>>0&255,ae[ge+9]=this.h[4]>>>8&255,ae[ge+10]=this.h[5]>>>0&255,ae[ge+11]=this.h[5]>>>8&255,ae[ge+12]=this.h[6]>>>0&255,ae[ge+13]=this.h[6]>>>8&255,ae[ge+14]=this.h[7]>>>0&255,ae[ge+15]=this.h[7]>>>8&255},J.prototype.update=function(ae,ge,me){var W,ve;if(this.leftover){for(ve=16-this.leftover,ve>me&&(ve=me),W=0;W<ve;W++)this.buffer[this.leftover+W]=ae[ge+W];if(me-=ve,ge+=ve,this.leftover+=ve,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(me>=16&&(ve=me-me%16,this.blocks(ae,ge,ve),ge+=ve,me-=ve),me){for(W=0;W<me;W++)this.buffer[this.leftover+W]=ae[ge+W];this.leftover+=me}};function j(ae,ge,me,W,ve,Re){var Te=new J(Re);return Te.update(me,W,ve),Te.finish(ae,ge),0}function L(ae,ge,me,W,ve,Re){var Te=new Uint8Array(16);return j(Te,0,me,W,ve,Re),m(ae,ge,Te,0)}function w(ae,ge,me,W,ve){var Re;if(me<32)return-1;for($(ae,0,ge,0,me,W,ve),j(ae,16,ae,32,me-32,ae),Re=0;Re<16;Re++)ae[Re]=0;return 0}function R(ae,ge,me,W,ve){var Re,Te=new Uint8Array(32);if(me<32||(k(Te,0,32,W,ve),L(ge,16,ge,32,me-32,Te)!==0))return-1;for($(ae,0,ge,0,me,W,ve),Re=0;Re<32;Re++)ae[Re]=0;return 0}function N(ae,ge){var me;for(me=0;me<16;me++)ae[me]=ge[me]|0}function Y(ae){var ge,me,W=1;for(ge=0;ge<16;ge++)me=ae[ge]+W+65535,W=Math.floor(me/65536),ae[ge]=me-W*65536;ae[0]+=W-1+37*(W-1)}function z(ae,ge,me){for(var W,ve=~(me-1),Re=0;Re<16;Re++)W=ve&(ae[Re]^ge[Re]),ae[Re]^=W,ge[Re]^=W}function G(ae,ge){var me,W,ve,Re=t(),Te=t();for(me=0;me<16;me++)Te[me]=ge[me];for(Y(Te),Y(Te),Y(Te),W=0;W<2;W++){for(Re[0]=Te[0]-65517,me=1;me<15;me++)Re[me]=Te[me]-65535-(Re[me-1]>>16&1),Re[me-1]&=65535;Re[15]=Te[15]-32767-(Re[14]>>16&1),ve=Re[15]>>16&1,Re[14]&=65535,z(Te,Re,1-ve)}for(me=0;me<16;me++)ae[2*me]=Te[me]&255,ae[2*me+1]=Te[me]>>8}function te(ae,ge){var me=new Uint8Array(32),W=new Uint8Array(32);return G(me,ae),G(W,ge),y(me,0,W,0)}function X(ae){var ge=new Uint8Array(32);return G(ge,ae),ge[0]&1}function T(ae,ge){var me;for(me=0;me<16;me++)ae[me]=ge[2*me]+(ge[2*me+1]<<8);ae[15]&=32767}function A(ae,ge,me){for(var W=0;W<16;W++)ae[W]=ge[W]+me[W]}function O(ae,ge,me){for(var W=0;W<16;W++)ae[W]=ge[W]-me[W]}function I(ae,ge,me){var W,ve,Re=0,Te=0,ze=0,Qe=0,at=0,rt=0,sr=0,dt=0,Bt=0,zt=0,jt=0,ir=0,Qt=0,tr=0,Zt=0,St=0,Nt=0,wt=0,At=0,Tt=0,mt=0,Fe=0,Ue=0,Je=0,Ge=0,Ye=0,ot=0,Wt=0,dr=0,vr=0,pr=0,Ie=me[0],Cr=me[1],jr=me[2],Vr=me[3],Ar=me[4],zr=me[5],qr=me[6],zn=me[7],Zr=me[8],On=me[9],Dn=me[10],$n=me[11],ii=me[12],qi=me[13],ji=me[14],Vi=me[15];W=ge[0],Re+=W*Ie,Te+=W*Cr,ze+=W*jr,Qe+=W*Vr,at+=W*Ar,rt+=W*zr,sr+=W*qr,dt+=W*zn,Bt+=W*Zr,zt+=W*On,jt+=W*Dn,ir+=W*$n,Qt+=W*ii,tr+=W*qi,Zt+=W*ji,St+=W*Vi,W=ge[1],Te+=W*Ie,ze+=W*Cr,Qe+=W*jr,at+=W*Vr,rt+=W*Ar,sr+=W*zr,dt+=W*qr,Bt+=W*zn,zt+=W*Zr,jt+=W*On,ir+=W*Dn,Qt+=W*$n,tr+=W*ii,Zt+=W*qi,St+=W*ji,Nt+=W*Vi,W=ge[2],ze+=W*Ie,Qe+=W*Cr,at+=W*jr,rt+=W*Vr,sr+=W*Ar,dt+=W*zr,Bt+=W*qr,zt+=W*zn,jt+=W*Zr,ir+=W*On,Qt+=W*Dn,tr+=W*$n,Zt+=W*ii,St+=W*qi,Nt+=W*ji,wt+=W*Vi,W=ge[3],Qe+=W*Ie,at+=W*Cr,rt+=W*jr,sr+=W*Vr,dt+=W*Ar,Bt+=W*zr,zt+=W*qr,jt+=W*zn,ir+=W*Zr,Qt+=W*On,tr+=W*Dn,Zt+=W*$n,St+=W*ii,Nt+=W*qi,wt+=W*ji,At+=W*Vi,W=ge[4],at+=W*Ie,rt+=W*Cr,sr+=W*jr,dt+=W*Vr,Bt+=W*Ar,zt+=W*zr,jt+=W*qr,ir+=W*zn,Qt+=W*Zr,tr+=W*On,Zt+=W*Dn,St+=W*$n,Nt+=W*ii,wt+=W*qi,At+=W*ji,Tt+=W*Vi,W=ge[5],rt+=W*Ie,sr+=W*Cr,dt+=W*jr,Bt+=W*Vr,zt+=W*Ar,jt+=W*zr,ir+=W*qr,Qt+=W*zn,tr+=W*Zr,Zt+=W*On,St+=W*Dn,Nt+=W*$n,wt+=W*ii,At+=W*qi,Tt+=W*ji,mt+=W*Vi,W=ge[6],sr+=W*Ie,dt+=W*Cr,Bt+=W*jr,zt+=W*Vr,jt+=W*Ar,ir+=W*zr,Qt+=W*qr,tr+=W*zn,Zt+=W*Zr,St+=W*On,Nt+=W*Dn,wt+=W*$n,At+=W*ii,Tt+=W*qi,mt+=W*ji,Fe+=W*Vi,W=ge[7],dt+=W*Ie,Bt+=W*Cr,zt+=W*jr,jt+=W*Vr,ir+=W*Ar,Qt+=W*zr,tr+=W*qr,Zt+=W*zn,St+=W*Zr,Nt+=W*On,wt+=W*Dn,At+=W*$n,Tt+=W*ii,mt+=W*qi,Fe+=W*ji,Ue+=W*Vi,W=ge[8],Bt+=W*Ie,zt+=W*Cr,jt+=W*jr,ir+=W*Vr,Qt+=W*Ar,tr+=W*zr,Zt+=W*qr,St+=W*zn,Nt+=W*Zr,wt+=W*On,At+=W*Dn,Tt+=W*$n,mt+=W*ii,Fe+=W*qi,Ue+=W*ji,Je+=W*Vi,W=ge[9],zt+=W*Ie,jt+=W*Cr,ir+=W*jr,Qt+=W*Vr,tr+=W*Ar,Zt+=W*zr,St+=W*qr,Nt+=W*zn,wt+=W*Zr,At+=W*On,Tt+=W*Dn,mt+=W*$n,Fe+=W*ii,Ue+=W*qi,Je+=W*ji,Ge+=W*Vi,W=ge[10],jt+=W*Ie,ir+=W*Cr,Qt+=W*jr,tr+=W*Vr,Zt+=W*Ar,St+=W*zr,Nt+=W*qr,wt+=W*zn,At+=W*Zr,Tt+=W*On,mt+=W*Dn,Fe+=W*$n,Ue+=W*ii,Je+=W*qi,Ge+=W*ji,Ye+=W*Vi,W=ge[11],ir+=W*Ie,Qt+=W*Cr,tr+=W*jr,Zt+=W*Vr,St+=W*Ar,Nt+=W*zr,wt+=W*qr,At+=W*zn,Tt+=W*Zr,mt+=W*On,Fe+=W*Dn,Ue+=W*$n,Je+=W*ii,Ge+=W*qi,Ye+=W*ji,ot+=W*Vi,W=ge[12],Qt+=W*Ie,tr+=W*Cr,Zt+=W*jr,St+=W*Vr,Nt+=W*Ar,wt+=W*zr,At+=W*qr,Tt+=W*zn,mt+=W*Zr,Fe+=W*On,Ue+=W*Dn,Je+=W*$n,Ge+=W*ii,Ye+=W*qi,ot+=W*ji,Wt+=W*Vi,W=ge[13],tr+=W*Ie,Zt+=W*Cr,St+=W*jr,Nt+=W*Vr,wt+=W*Ar,At+=W*zr,Tt+=W*qr,mt+=W*zn,Fe+=W*Zr,Ue+=W*On,Je+=W*Dn,Ge+=W*$n,Ye+=W*ii,ot+=W*qi,Wt+=W*ji,dr+=W*Vi,W=ge[14],Zt+=W*Ie,St+=W*Cr,Nt+=W*jr,wt+=W*Vr,At+=W*Ar,Tt+=W*zr,mt+=W*qr,Fe+=W*zn,Ue+=W*Zr,Je+=W*On,Ge+=W*Dn,Ye+=W*$n,ot+=W*ii,Wt+=W*qi,dr+=W*ji,vr+=W*Vi,W=ge[15],St+=W*Ie,Nt+=W*Cr,wt+=W*jr,At+=W*Vr,Tt+=W*Ar,mt+=W*zr,Fe+=W*qr,Ue+=W*zn,Je+=W*Zr,Ge+=W*On,Ye+=W*Dn,ot+=W*$n,Wt+=W*ii,dr+=W*qi,vr+=W*ji,pr+=W*Vi,Re+=38*Nt,Te+=38*wt,ze+=38*At,Qe+=38*Tt,at+=38*mt,rt+=38*Fe,sr+=38*Ue,dt+=38*Je,Bt+=38*Ge,zt+=38*Ye,jt+=38*ot,ir+=38*Wt,Qt+=38*dr,tr+=38*vr,Zt+=38*pr,ve=1,W=Re+ve+65535,ve=Math.floor(W/65536),Re=W-ve*65536,W=Te+ve+65535,ve=Math.floor(W/65536),Te=W-ve*65536,W=ze+ve+65535,ve=Math.floor(W/65536),ze=W-ve*65536,W=Qe+ve+65535,ve=Math.floor(W/65536),Qe=W-ve*65536,W=at+ve+65535,ve=Math.floor(W/65536),at=W-ve*65536,W=rt+ve+65535,ve=Math.floor(W/65536),rt=W-ve*65536,W=sr+ve+65535,ve=Math.floor(W/65536),sr=W-ve*65536,W=dt+ve+65535,ve=Math.floor(W/65536),dt=W-ve*65536,W=Bt+ve+65535,ve=Math.floor(W/65536),Bt=W-ve*65536,W=zt+ve+65535,ve=Math.floor(W/65536),zt=W-ve*65536,W=jt+ve+65535,ve=Math.floor(W/65536),jt=W-ve*65536,W=ir+ve+65535,ve=Math.floor(W/65536),ir=W-ve*65536,W=Qt+ve+65535,ve=Math.floor(W/65536),Qt=W-ve*65536,W=tr+ve+65535,ve=Math.floor(W/65536),tr=W-ve*65536,W=Zt+ve+65535,ve=Math.floor(W/65536),Zt=W-ve*65536,W=St+ve+65535,ve=Math.floor(W/65536),St=W-ve*65536,Re+=ve-1+37*(ve-1),ve=1,W=Re+ve+65535,ve=Math.floor(W/65536),Re=W-ve*65536,W=Te+ve+65535,ve=Math.floor(W/65536),Te=W-ve*65536,W=ze+ve+65535,ve=Math.floor(W/65536),ze=W-ve*65536,W=Qe+ve+65535,ve=Math.floor(W/65536),Qe=W-ve*65536,W=at+ve+65535,ve=Math.floor(W/65536),at=W-ve*65536,W=rt+ve+65535,ve=Math.floor(W/65536),rt=W-ve*65536,W=sr+ve+65535,ve=Math.floor(W/65536),sr=W-ve*65536,W=dt+ve+65535,ve=Math.floor(W/65536),dt=W-ve*65536,W=Bt+ve+65535,ve=Math.floor(W/65536),Bt=W-ve*65536,W=zt+ve+65535,ve=Math.floor(W/65536),zt=W-ve*65536,W=jt+ve+65535,ve=Math.floor(W/65536),jt=W-ve*65536,W=ir+ve+65535,ve=Math.floor(W/65536),ir=W-ve*65536,W=Qt+ve+65535,ve=Math.floor(W/65536),Qt=W-ve*65536,W=tr+ve+65535,ve=Math.floor(W/65536),tr=W-ve*65536,W=Zt+ve+65535,ve=Math.floor(W/65536),Zt=W-ve*65536,W=St+ve+65535,ve=Math.floor(W/65536),St=W-ve*65536,Re+=ve-1+37*(ve-1),ae[0]=Re,ae[1]=Te,ae[2]=ze,ae[3]=Qe,ae[4]=at,ae[5]=rt,ae[6]=sr,ae[7]=dt,ae[8]=Bt,ae[9]=zt,ae[10]=jt,ae[11]=ir,ae[12]=Qt,ae[13]=tr,ae[14]=Zt,ae[15]=St}function U(ae,ge){I(ae,ge,ge)}function Z(ae,ge){var me=t(),W;for(W=0;W<16;W++)me[W]=ge[W];for(W=253;W>=0;W--)U(me,me),W!==2&&W!==4&&I(me,me,ge);for(W=0;W<16;W++)ae[W]=me[W]}function oe(ae,ge){var me=t(),W;for(W=0;W<16;W++)me[W]=ge[W];for(W=250;W>=0;W--)U(me,me),W!==1&&I(me,me,ge);for(W=0;W<16;W++)ae[W]=me[W]}function he(ae,ge,me){var W=new Uint8Array(32),ve=new Float64Array(80),Re,Te,ze=t(),Qe=t(),at=t(),rt=t(),sr=t(),dt=t();for(Te=0;Te<31;Te++)W[Te]=ge[Te];for(W[31]=ge[31]&127|64,W[0]&=248,T(ve,me),Te=0;Te<16;Te++)Qe[Te]=ve[Te],rt[Te]=ze[Te]=at[Te]=0;for(ze[0]=rt[0]=1,Te=254;Te>=0;--Te)Re=W[Te>>>3]>>>(Te&7)&1,z(ze,Qe,Re),z(at,rt,Re),A(sr,ze,at),O(ze,ze,at),A(at,Qe,rt),O(Qe,Qe,rt),U(rt,sr),U(dt,ze),I(ze,at,ze),I(at,Qe,sr),A(sr,ze,at),O(ze,ze,at),U(Qe,ze),O(at,rt,dt),I(ze,at,c),A(ze,ze,rt),I(at,at,ze),I(ze,rt,dt),I(rt,Qe,ve),U(Qe,sr),z(ze,Qe,Re),z(at,rt,Re);for(Te=0;Te<16;Te++)ve[Te+16]=ze[Te],ve[Te+32]=at[Te],ve[Te+48]=Qe[Te],ve[Te+64]=rt[Te];var Bt=ve.subarray(32),zt=ve.subarray(16);return Z(Bt,Bt),I(zt,zt,Bt),G(ae,zt),0}function re(ae,ge){return he(ae,ge,s)}function F(ae,ge){return n(ge,32),re(ae,ge)}function H(ae,ge,me){var W=new Uint8Array(32);return he(W,me,ge),x(ae,i,W,E)}var ue=w,le=R;function we(ae,ge,me,W,ve,Re){var Te=new Uint8Array(32);return H(Te,ve,Re),ue(ae,ge,me,W,Te)}function ie(ae,ge,me,W,ve,Re){var Te=new Uint8Array(32);return H(Te,ve,Re),le(ae,ge,me,W,Te)}var B=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function q(ae,ge,me,W){for(var ve=new Int32Array(16),Re=new Int32Array(16),Te,ze,Qe,at,rt,sr,dt,Bt,zt,jt,ir,Qt,tr,Zt,St,Nt,wt,At,Tt,mt,Fe,Ue,Je,Ge,Ye,ot,Wt=ae[0],dr=ae[1],vr=ae[2],pr=ae[3],Ie=ae[4],Cr=ae[5],jr=ae[6],Vr=ae[7],Ar=ge[0],zr=ge[1],qr=ge[2],zn=ge[3],Zr=ge[4],On=ge[5],Dn=ge[6],$n=ge[7],ii=0;W>=128;){for(Tt=0;Tt<16;Tt++)mt=8*Tt+ii,ve[Tt]=me[mt+0]<<24|me[mt+1]<<16|me[mt+2]<<8|me[mt+3],Re[Tt]=me[mt+4]<<24|me[mt+5]<<16|me[mt+6]<<8|me[mt+7];for(Tt=0;Tt<80;Tt++)if(Te=Wt,ze=dr,Qe=vr,at=pr,rt=Ie,sr=Cr,dt=jr,Bt=Vr,zt=Ar,jt=zr,ir=qr,Qt=zn,tr=Zr,Zt=On,St=Dn,Nt=$n,Fe=Vr,Ue=$n,Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=(Ie>>>14|Zr<<18)^(Ie>>>18|Zr<<14)^(Zr>>>9|Ie<<23),Ue=(Zr>>>14|Ie<<18)^(Zr>>>18|Ie<<14)^(Ie>>>9|Zr<<23),Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Fe=Ie&Cr^~Ie&jr,Ue=Zr&On^~Zr&Dn,Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Fe=B[Tt*2],Ue=B[Tt*2+1],Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Fe=ve[Tt%16],Ue=Re[Tt%16],Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,wt=Ye&65535|ot<<16,At=Je&65535|Ge<<16,Fe=wt,Ue=At,Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=(Wt>>>28|Ar<<4)^(Ar>>>2|Wt<<30)^(Ar>>>7|Wt<<25),Ue=(Ar>>>28|Wt<<4)^(Wt>>>2|Ar<<30)^(Wt>>>7|Ar<<25),Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Fe=Wt&dr^Wt&vr^dr&vr,Ue=Ar&zr^Ar&qr^zr&qr,Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,Bt=Ye&65535|ot<<16,Nt=Je&65535|Ge<<16,Fe=at,Ue=Qt,Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=wt,Ue=At,Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,at=Ye&65535|ot<<16,Qt=Je&65535|Ge<<16,dr=Te,vr=ze,pr=Qe,Ie=at,Cr=rt,jr=sr,Vr=dt,Wt=Bt,zr=zt,qr=jt,zn=ir,Zr=Qt,On=tr,Dn=Zt,$n=St,Ar=Nt,Tt%16===15)for(mt=0;mt<16;mt++)Fe=ve[mt],Ue=Re[mt],Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=ve[(mt+9)%16],Ue=Re[(mt+9)%16],Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,wt=ve[(mt+1)%16],At=Re[(mt+1)%16],Fe=(wt>>>1|At<<31)^(wt>>>8|At<<24)^wt>>>7,Ue=(At>>>1|wt<<31)^(At>>>8|wt<<24)^(At>>>7|wt<<25),Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,wt=ve[(mt+14)%16],At=Re[(mt+14)%16],Fe=(wt>>>19|At<<13)^(At>>>29|wt<<3)^wt>>>6,Ue=(At>>>19|wt<<13)^(wt>>>29|At<<3)^(At>>>6|wt<<26),Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,ve[mt]=Ye&65535|ot<<16,Re[mt]=Je&65535|Ge<<16;Fe=Wt,Ue=Ar,Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=ae[0],Ue=ge[0],Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,ae[0]=Wt=Ye&65535|ot<<16,ge[0]=Ar=Je&65535|Ge<<16,Fe=dr,Ue=zr,Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=ae[1],Ue=ge[1],Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,ae[1]=dr=Ye&65535|ot<<16,ge[1]=zr=Je&65535|Ge<<16,Fe=vr,Ue=qr,Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=ae[2],Ue=ge[2],Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,ae[2]=vr=Ye&65535|ot<<16,ge[2]=qr=Je&65535|Ge<<16,Fe=pr,Ue=zn,Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=ae[3],Ue=ge[3],Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,ae[3]=pr=Ye&65535|ot<<16,ge[3]=zn=Je&65535|Ge<<16,Fe=Ie,Ue=Zr,Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=ae[4],Ue=ge[4],Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,ae[4]=Ie=Ye&65535|ot<<16,ge[4]=Zr=Je&65535|Ge<<16,Fe=Cr,Ue=On,Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=ae[5],Ue=ge[5],Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,ae[5]=Cr=Ye&65535|ot<<16,ge[5]=On=Je&65535|Ge<<16,Fe=jr,Ue=Dn,Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=ae[6],Ue=ge[6],Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,ae[6]=jr=Ye&65535|ot<<16,ge[6]=Dn=Je&65535|Ge<<16,Fe=Vr,Ue=$n,Je=Ue&65535,Ge=Ue>>>16,Ye=Fe&65535,ot=Fe>>>16,Fe=ae[7],Ue=ge[7],Je+=Ue&65535,Ge+=Ue>>>16,Ye+=Fe&65535,ot+=Fe>>>16,Ge+=Je>>>16,Ye+=Ge>>>16,ot+=Ye>>>16,ae[7]=Vr=Ye&65535|ot<<16,ge[7]=$n=Je&65535|Ge<<16,ii+=128,W-=128}return W}function ne(ae,ge,me){var W=new Int32Array(8),ve=new Int32Array(8),Re=new Uint8Array(256),Te,ze=me;for(W[0]=1779033703,W[1]=3144134277,W[2]=1013904242,W[3]=2773480762,W[4]=1359893119,W[5]=2600822924,W[6]=528734635,W[7]=1541459225,ve[0]=4089235720,ve[1]=2227873595,ve[2]=4271175723,ve[3]=1595750129,ve[4]=2917565137,ve[5]=725511199,ve[6]=4215389547,ve[7]=327033209,q(W,ve,ge,me),me%=128,Te=0;Te<me;Te++)Re[Te]=ge[ze-me+Te];for(Re[me]=128,me=256-128*(me<112?1:0),Re[me-9]=0,g(Re,me-8,ze/536870912|0,ze<<3),q(W,ve,Re,me),Te=0;Te<8;Te++)g(ae,8*Te,W[Te],ve[Te]);return 0}function de(ae,ge){var me=t(),W=t(),ve=t(),Re=t(),Te=t(),ze=t(),Qe=t(),at=t(),rt=t();O(me,ae[1],ae[0]),O(rt,ge[1],ge[0]),I(me,me,rt),A(W,ae[0],ae[1]),A(rt,ge[0],ge[1]),I(W,W,rt),I(ve,ae[3],ge[3]),I(ve,ve,u),I(Re,ae[2],ge[2]),A(Re,Re,Re),O(Te,W,me),O(ze,Re,ve),A(Qe,Re,ve),A(at,W,me),I(ae[0],Te,ze),I(ae[1],at,Qe),I(ae[2],Qe,ze),I(ae[3],Te,at)}function _e(ae,ge,me){var W;for(W=0;W<4;W++)z(ae[W],ge[W],me)}function Ce(ae,ge){var me=t(),W=t(),ve=t();Z(ve,ge[2]),I(me,ge[0],ve),I(W,ge[1],ve),G(ae,W),ae[31]^=X(me)<<7}function Me(ae,ge,me){var W,ve;for(N(ae[0],o),N(ae[1],a),N(ae[2],a),N(ae[3],o),ve=255;ve>=0;--ve)W=me[ve/8|0]>>(ve&7)&1,_e(ae,ge,W),de(ge,ae),de(ae,ae),_e(ae,ge,W)}function xe(ae,ge){var me=[t(),t(),t(),t()];N(me[0],f),N(me[1],h),N(me[2],a),I(me[3],f,h),Me(ae,me,ge)}function Ae(ae,ge,me){var W=new Uint8Array(64),ve=[t(),t(),t(),t()],Re;for(me||n(ge,32),ne(W,ge,32),W[0]&=248,W[31]&=127,W[31]|=64,xe(ve,W),Ce(ae,ve),Re=0;Re<32;Re++)ge[Re+32]=ae[Re];return 0}var Oe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function se(ae,ge){var me,W,ve,Re;for(W=63;W>=32;--W){for(me=0,ve=W-32,Re=W-12;ve<Re;++ve)ge[ve]+=me-16*ge[W]*Oe[ve-(W-32)],me=Math.floor((ge[ve]+128)/256),ge[ve]-=me*256;ge[ve]+=me,ge[W]=0}for(me=0,ve=0;ve<32;ve++)ge[ve]+=me-(ge[31]>>4)*Oe[ve],me=ge[ve]>>8,ge[ve]&=255;for(ve=0;ve<32;ve++)ge[ve]-=me*Oe[ve];for(W=0;W<32;W++)ge[W+1]+=ge[W]>>8,ae[W]=ge[W]&255}function V(ae){var ge=new Float64Array(64),me;for(me=0;me<64;me++)ge[me]=ae[me];for(me=0;me<64;me++)ae[me]=0;se(ae,ge)}function Q(ae,ge,me,W){var ve=new Uint8Array(64),Re=new Uint8Array(64),Te=new Uint8Array(64),ze,Qe,at=new Float64Array(64),rt=[t(),t(),t(),t()];ne(ve,W,32),ve[0]&=248,ve[31]&=127,ve[31]|=64;var sr=me+64;for(ze=0;ze<me;ze++)ae[64+ze]=ge[ze];for(ze=0;ze<32;ze++)ae[32+ze]=ve[32+ze];for(ne(Te,ae.subarray(32),me+32),V(Te),xe(rt,Te),Ce(ae,rt),ze=32;ze<64;ze++)ae[ze]=W[ze];for(ne(Re,ae,me+64),V(Re),ze=0;ze<64;ze++)at[ze]=0;for(ze=0;ze<32;ze++)at[ze]=Te[ze];for(ze=0;ze<32;ze++)for(Qe=0;Qe<32;Qe++)at[ze+Qe]+=Re[ze]*ve[Qe];return se(ae.subarray(32),at),sr}function K(ae,ge){var me=t(),W=t(),ve=t(),Re=t(),Te=t(),ze=t(),Qe=t();return N(ae[2],a),T(ae[1],ge),U(ve,ae[1]),I(Re,ve,l),O(ve,ve,ae[2]),A(Re,ae[2],Re),U(Te,Re),U(ze,Te),I(Qe,ze,Te),I(me,Qe,ve),I(me,me,Re),oe(me,me),I(me,me,ve),I(me,me,Re),I(me,me,Re),I(ae[0],me,Re),U(W,ae[0]),I(W,W,Re),te(W,ve)&&I(ae[0],ae[0],d),U(W,ae[0]),I(W,W,Re),te(W,ve)?-1:(X(ae[0])===ge[31]>>7&&O(ae[0],o,ae[0]),I(ae[3],ae[0],ae[1]),0)}function M(ae,ge,me,W){var ve,Re=new Uint8Array(32),Te=new Uint8Array(64),ze=[t(),t(),t(),t()],Qe=[t(),t(),t(),t()];if(me<64||K(Qe,W))return-1;for(ve=0;ve<me;ve++)ae[ve]=ge[ve];for(ve=0;ve<32;ve++)ae[ve+32]=W[ve];if(ne(Te,ae,me),V(Te),Me(ze,Qe,Te),xe(Qe,ge.subarray(32)),de(ze,Qe),Ce(Re,ze),me-=64,y(ge,0,Re,0)){for(ve=0;ve<me;ve++)ae[ve]=0;return-1}for(ve=0;ve<me;ve++)ae[ve]=ge[ve+64];return me}var P=32,ee=24,pe=32,be=16,fe=32,Ee=32,Le=32,Ke=32,je=32,Pe=ee,tt=pe,gt=be,lt=64,Et=32,Er=64,nr=32,ar=64;e.lowlevel={crypto_core_hsalsa20:x,crypto_stream_xor:$,crypto_stream:k,crypto_stream_salsa20_xor:S,crypto_stream_salsa20:C,crypto_onetimeauth:j,crypto_onetimeauth_verify:L,crypto_verify_16:m,crypto_verify_32:y,crypto_secretbox:w,crypto_secretbox_open:R,crypto_scalarmult:he,crypto_scalarmult_base:re,crypto_box_beforenm:H,crypto_box_afternm:ue,crypto_box:we,crypto_box_open:ie,crypto_box_keypair:F,crypto_hash:ne,crypto_sign:Q,crypto_sign_keypair:Ae,crypto_sign_open:M,crypto_secretbox_KEYBYTES:P,crypto_secretbox_NONCEBYTES:ee,crypto_secretbox_ZEROBYTES:pe,crypto_secretbox_BOXZEROBYTES:be,crypto_scalarmult_BYTES:fe,crypto_scalarmult_SCALARBYTES:Ee,crypto_box_PUBLICKEYBYTES:Le,crypto_box_SECRETKEYBYTES:Ke,crypto_box_BEFORENMBYTES:je,crypto_box_NONCEBYTES:Pe,crypto_box_ZEROBYTES:tt,crypto_box_BOXZEROBYTES:gt,crypto_sign_BYTES:lt,crypto_sign_PUBLICKEYBYTES:Et,crypto_sign_SECRETKEYBYTES:Er,crypto_sign_SEEDBYTES:nr,crypto_hash_BYTES:ar,gf:t,D:l,L:Oe,pack25519:G,unpack25519:T,M:I,A,S:U,Z:O,pow2523:oe,add:de,set25519:N,modL:se,scalarmult:Me,scalarbase:xe};function hs(ae,ge){if(ae.length!==P)throw new Error("bad key size");if(ge.length!==ee)throw new Error("bad nonce size")}function Kr(ae,ge){if(ae.length!==Le)throw new Error("bad public key size");if(ge.length!==Ke)throw new Error("bad secret key size")}function hr(){for(var ae=0;ae<arguments.length;ae++)if(!(arguments[ae]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function zi(ae){for(var ge=0;ge<ae.length;ge++)ae[ge]=0}e.randomBytes=function(ae){var ge=new Uint8Array(ae);return n(ge,ae),ge},e.secretbox=function(ae,ge,me){hr(ae,ge,me),hs(me,ge);for(var W=new Uint8Array(pe+ae.length),ve=new Uint8Array(W.length),Re=0;Re<ae.length;Re++)W[Re+pe]=ae[Re];return w(ve,W,W.length,ge,me),ve.subarray(be)},e.secretbox.open=function(ae,ge,me){hr(ae,ge,me),hs(me,ge);for(var W=new Uint8Array(be+ae.length),ve=new Uint8Array(W.length),Re=0;Re<ae.length;Re++)W[Re+be]=ae[Re];return W.length<32||R(ve,W,W.length,ge,me)!==0?null:ve.subarray(pe)},e.secretbox.keyLength=P,e.secretbox.nonceLength=ee,e.secretbox.overheadLength=be,e.scalarMult=function(ae,ge){if(hr(ae,ge),ae.length!==Ee)throw new Error("bad n size");if(ge.length!==fe)throw new Error("bad p size");var me=new Uint8Array(fe);return he(me,ae,ge),me},e.scalarMult.base=function(ae){if(hr(ae),ae.length!==Ee)throw new Error("bad n size");var ge=new Uint8Array(fe);return re(ge,ae),ge},e.scalarMult.scalarLength=Ee,e.scalarMult.groupElementLength=fe,e.box=function(ae,ge,me,W){var ve=e.box.before(me,W);return e.secretbox(ae,ge,ve)},e.box.before=function(ae,ge){hr(ae,ge),Kr(ae,ge);var me=new Uint8Array(je);return H(me,ae,ge),me},e.box.after=e.secretbox,e.box.open=function(ae,ge,me,W){var ve=e.box.before(me,W);return e.secretbox.open(ae,ge,ve)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var ae=new Uint8Array(Le),ge=new Uint8Array(Ke);return F(ae,ge),{publicKey:ae,secretKey:ge}},e.box.keyPair.fromSecretKey=function(ae){if(hr(ae),ae.length!==Ke)throw new Error("bad secret key size");var ge=new Uint8Array(Le);return re(ge,ae),{publicKey:ge,secretKey:new Uint8Array(ae)}},e.box.publicKeyLength=Le,e.box.secretKeyLength=Ke,e.box.sharedKeyLength=je,e.box.nonceLength=Pe,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(ae,ge){if(hr(ae,ge),ge.length!==Er)throw new Error("bad secret key size");var me=new Uint8Array(lt+ae.length);return Q(me,ae,ae.length,ge),me},e.sign.open=function(ae,ge){if(hr(ae,ge),ge.length!==Et)throw new Error("bad public key size");var me=new Uint8Array(ae.length),W=M(me,ae,ae.length,ge);if(W<0)return null;for(var ve=new Uint8Array(W),Re=0;Re<ve.length;Re++)ve[Re]=me[Re];return ve},e.sign.detached=function(ae,ge){for(var me=e.sign(ae,ge),W=new Uint8Array(lt),ve=0;ve<W.length;ve++)W[ve]=me[ve];return W},e.sign.detached.verify=function(ae,ge,me){if(hr(ae,ge,me),ge.length!==lt)throw new Error("bad signature size");if(me.length!==Et)throw new Error("bad public key size");var W=new Uint8Array(lt+ae.length),ve=new Uint8Array(lt+ae.length),Re;for(Re=0;Re<lt;Re++)W[Re]=ge[Re];for(Re=0;Re<ae.length;Re++)W[Re+lt]=ae[Re];return M(ve,W,W.length,me)>=0},e.sign.keyPair=function(){var ae=new Uint8Array(Et),ge=new Uint8Array(Er);return Ae(ae,ge),{publicKey:ae,secretKey:ge}},e.sign.keyPair.fromSecretKey=function(ae){if(hr(ae),ae.length!==Er)throw new Error("bad secret key size");for(var ge=new Uint8Array(Et),me=0;me<ge.length;me++)ge[me]=ae[32+me];return{publicKey:ge,secretKey:new Uint8Array(ae)}},e.sign.keyPair.fromSeed=function(ae){if(hr(ae),ae.length!==nr)throw new Error("bad seed size");for(var ge=new Uint8Array(Et),me=new Uint8Array(Er),W=0;W<32;W++)me[W]=ae[W];return Ae(ge,me,!0),{publicKey:ge,secretKey:me}},e.sign.publicKeyLength=Et,e.sign.secretKeyLength=Er,e.sign.seedLength=nr,e.sign.signatureLength=lt,e.hash=function(ae){hr(ae);var ge=new Uint8Array(ar);return ne(ge,ae,ae.length),ge},e.hash.hashLength=ar,e.verify=function(ae,ge){return hr(ae,ge),ae.length===0||ge.length===0||ae.length!==ge.length?!1:p(ae,0,ge,0,ae.length)===0},e.setPRNG=function(ae){n=ae},function(){var ae=typeof self<"u"?self.crypto||self.msCrypto:null;if(ae&&ae.getRandomValues){var ge=65536;e.setPRNG(function(me,W){var ve,Re=new Uint8Array(W);for(ve=0;ve<W;ve+=ge)ae.getRandomValues(Re.subarray(ve,ve+Math.min(W-ve,ge)));for(ve=0;ve<W;ve++)me[ve]=Re[ve];zi(Re)})}else typeof XW<"u"&&(ae=Hf,ae&&ae.randomBytes&&e.setPRNG(function(me,W){var ve,Re=ae.randomBytes(W);for(ve=0;ve<W;ve++)me[ve]=Re[ve];zi(Re)}))}()})(r.exports?r.exports:self.nacl=self.nacl||{})}(G2)),G2.exports}var S$e=_$e();const Fd=Gs(S$e),Ei=[];for(let r=0;r<256;++r)Ei.push((r+256).toString(16).slice(1));function E$e(r,e=0){return(Ei[r[e+0]]+Ei[r[e+1]]+Ei[r[e+2]]+Ei[r[e+3]]+"-"+Ei[r[e+4]]+Ei[r[e+5]]+"-"+Ei[r[e+6]]+Ei[r[e+7]]+"-"+Ei[r[e+8]]+Ei[r[e+9]]+"-"+Ei[r[e+10]]+Ei[r[e+11]]+Ei[r[e+12]]+Ei[r[e+13]]+Ei[r[e+14]]+Ei[r[e+15]]).toLowerCase()}let Y2;const A$e=new Uint8Array(16);function I$e(){if(!Y2){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Y2=crypto.getRandomValues.bind(crypto)}return Y2(A$e)}const X2={};function C$e(r,e,t){let n;{const i=Date.now(),s=I$e();T$e(X2,i,s),n=R$e(s,X2.msecs,X2.seq,e,t)}return E$e(n)}function T$e(r,e,t){return r.msecs??=-1/0,r.seq??=0,e>r.msecs?(r.seq=t[6]<<23|t[7]<<16|t[8]<<8|t[9],r.msecs=e):(r.seq=r.seq+1|0,r.seq===0&&r.msecs++),r}function R$e(r,e,t,n,i=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!n)n=new Uint8Array(16),i=0;else if(i<0||i+16>n.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);return e??=Date.now(),t??=r[6]*127<<24|r[7]<<16|r[8]<<8|r[9],n[i++]=e/1099511627776&255,n[i++]=e/4294967296&255,n[i++]=e/16777216&255,n[i++]=e/65536&255,n[i++]=e/256&255,n[i++]=e&255,n[i++]=112|t>>>28&15,n[i++]=t>>>20&255,n[i++]=128|t>>>14&63,n[i++]=t>>>6&255,n[i++]=t<<2&255|r[10]&3,n[i++]=r[11],n[i++]=r[12],n[i++]=r[13],n[i++]=r[14],n[i++]=r[15],n}const _T=Fd.box.nonceLength;function k$e(r,e){return Fd.box.before(Br.unmarshalBase64(r),e)}function P$e(r,e){const t=Fd.randomBytes(_T),n=new TextEncoder().encode(r),i=Fd.box.after(n,t,e);return Br.marshalBase64(new Uint8Array([...t,...i]))}function O$e(r,e){const t=Br.unmarshalBase64(r),n=t.slice(0,_T),i=t.slice(_T),s=Fd.box.open.after(i,n,e);if(!s)throw new Error("Failed to decrypt message");return new TextDecoder().decode(s)}const cX=()=>{let r;function e(i){const s=Fd.box.keyPair(),o=C$e();let a;r=new WebSocket(`wss://wallet-api.jup.ag/v1/relay/${o}/ws`),r.onopen=()=>{const c={publicKey:Br.marshalBase64(s.publicKey),sessionId:o};i.onOpen(JSON.stringify(c))},r.onclose=()=>{},r.onerror=c=>{console.warn(`[JupiterSync] WebSocket error: ${c}`)},r.onmessage=c=>{const l=JSON.parse(c.data);switch(l.type){case"public_key":a=k$e(l.value,s.secretKey),t({type:"public_key_ack"}),i.type==="export"&&i.onReady(f=>{t({type:"encrypted_message",value:P$e(JSON.stringify(f),a)})});break;case"public_key_ack":if(!a){console.warn("[JupiterSync] public_key_ack received but no shared secret yet");return}break;case"encrypted_message":if(!a){console.warn("[JupiterSync] encrypted_message received but no shared secret yet");return}const u=JSON.parse(O$e(l.value,a));i.type==="import"&&i.onDecryptedMessage(u),t({type:"encrypted_message_ack"});break;case"encrypted_message_ack":i.type==="export"&&i.onDone();break}}}function t(i){if(!r||r.readyState!==WebSocket.OPEN)throw new Error("WebSocket not connected yet");r.send(JSON.stringify(i))}function n(){r?.close()}return yt(()=>setTimeout(()=>n(),5e3)),{connect:e}};var D$e=ye('<p class="text-zinc-400 leading-tight">Choose which wallets to export (Social Login and Hardware Wallets cannot be synced):'),$$e=ye('<button class="w-full p-2.5 rounded-xl font-semibold transition-100">Continue'),M$e=ye('<div class="flex items-center justify-center"><div class="rounded-2xl bg-zinc-800 size-64 flex items-center justify-center">'),B$e=ye('<div class="text-center mt-4 text-zinc-400 leading-tight">On Jupiter Mobile, head to <span class="text-zinc-300 font-medium">App Settings</span> &#10137; <span class="text-zinc-300 font-medium">Security & Privacy</span> &#10137; <span class="text-zinc-300 font-medium">Jupiter Sync</span>, and tap on <span class="text-zinc-300 font-medium">Desktop to Mobile'),N$e=ye("<div class=leading-tight>You are exporting <!> <!> to Jupiter Mobile. Please confirm your password to complete the sync."),L$e=ye('<form class=space-y-2><input class="ring-1 ring-zinc-700 focus:ring-primary-200 w-full outline-none rounded-xl py-2.5 px-3.5 bg-zinc-800 transition-100"placeholder="Confirm password to export"type=password id=password-input name=password-input><button class="w-full p-2.5 rounded-xl font-semibold transition-100"type=submit>'),F$e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl">'),U$e=ye('<div class="flex items-center justify-center h-48 bg-zinc-800 rounded-xl text-zinc-400 font-semibold text-sm tracking-wider">NO VALID WALLETS FOUND'),z$e=ye('<button class="h-16 w-full flex items-center px-4 font-medium gap-3 bg-zinc-800 rounded-xl cursor-pointer hover:bg-zinc-700/60"><div class="flex flex-col items-start space-y--0.5"><div class=font-semibold></div></div><div class=flex-1></div><div class=size-6>'),q$e=ye('<div class="i-tabler:loader-2 animate-spin size-12 text-zinc-300">');const ks={CHOOSE_WALLETS:"choose-wallets",QR_CODE:"qr-code",CONFIRMATION:"confirmation",CONFIRMATION_EXPORTING:"confirmation-exporting"},j$e="password-input",V$e=()=>{const{accounts:r}=Jr(),{connect:e}=cX(),t=Ws(),{setStep:n}=En(),[i,s]=$e(ks.CHOOSE_WALLETS),[o,a]=zf(r().flatMap(g=>g.type==="standalone"||g.type==="mnemonic"?{label:g.label,address:g.address,isSelected:!0}:[])),c=ke(()=>o.filter(g=>g.isSelected).length),[l,u]=$e(void 0);let f=()=>{throw new Error("Connection not initialised yet")};async function h(){c()!==0&&(s(ks.QR_CODE),e({type:"export",onOpen:g=>{u(g)},onReady:async g=>{f=g,s(ks.CONFIRMATION)},onDone:()=>{n(nt.FINAL_STEP)}}))}async function d(g){if(g.preventDefault(),i()!==ks.CONFIRMATION)return;const m=new FormData(g.target).get(j$e)?.toString().trim()||"";if(!m){t.alert({title:"Incorrect Password",content:"The password you entered is incorrect."});return}s(ks.CONFIRMATION_EXPORTING);const y={type:"accounts",accounts:[]};try{for(const v of o){if(!v.isSelected)continue;const b=await _r.export({password:m,address:v.address}),_=Hw.format64Bytes(b.privateKey,v.address);y.accounts.push(b.type==="standalone"?{type:"private_key",label:v.label,private_key:_}:{type:"seed_phrase",label:v.label,private_key:_,seed_phrase:ba.marshalBase64(b.mnemonic),derivation_path:b.path})}}catch{t.alert({title:"Incorrect Password",content:"The password you entered is incorrect."}),s(ks.CONFIRMATION);return}f(y)}return(()=>{var g=F$e();return ce(g,D(ni,{title:"Desktop to Mobile",get previousStep(){return nt.JUPITER_SYNC_TYPE}}),null),ce(g,D(yr,{get children(){return[D(Ne,{get when(){return i()===ks.CHOOSE_WALLETS},get children(){return[D$e(),D(Hd,{class:"max-h-40vh space-y-2",get children(){return D(We,{get when(){return o.length>0},get fallback(){return U$e()},get children(){return D(Lt,{each:o,children:(p,m)=>(()=>{var y=z$e(),v=y.firstChild,b=v.firstChild,_=v.nextSibling,x=_.nextSibling;return y.$$click=()=>a(m(),"isSelected",!p.isSelected),ce(y,D(Gg,{get id(){return p.address},class:"size-9"}),v),ce(b,()=>p.label),ce(v,D(Yo,{class:"font-normal text-zinc-400",get address(){return p.address}}),null),ht(E=>Gr(x,{"i-tabler:square-check-filled bg-primary-200":p.isSelected,"i-tabler:square bg-zinc-600":!p.isSelected},E)),y})()})}})}}),(()=>{var p=$$e();return p.$$click=()=>h(),ht(m=>{var y={"cursor-not-allowed bg-zinc-700 text-zinc-400":c()===0,"cursor-pointer bg-primary-200 active:bg-primary-200/80 text-zinc-950":c()>0},v=c()===0;return m.e=Gr(p,y,m.e),v!==m.t&&(p.disabled=m.t=v),m},{e:void 0,t:void 0}),p})()]}}),D(Ne,{get when(){return i()===ks.QR_CODE},get children(){return[(()=>{var p=M$e(),m=p.firstChild;return ce(m,D(We,{get when(){return l()},get fallback(){return q$e()},children:y=>D(t6,{class:"size-full bg-zinc-50 fill-zinc-950 rounded-2xl p-4",get payload(){return y()},ecc:"low"})})),p})(),B$e()]}}),D(Ne,{get when(){return i()===ks.CONFIRMATION||i()===ks.CONFIRMATION_EXPORTING},get children(){return[(()=>{var p=N$e(),m=p.firstChild,y=m.nextSibling,v=y.nextSibling,b=v.nextSibling;return b.nextSibling,ce(p,c,y),ce(p,()=>c()>1?"wallets":"wallet",b),p})(),(()=>{var p=L$e(),m=p.firstChild,y=m.nextSibling;return p.addEventListener("submit",v=>d(v)),ce(y,D(We,{get when(){return i()===ks.CONFIRMATION},fallback:"Exporting...",children:"Export"})),ht(v=>{var b={"cursor-wait bg-zinc-700 text-zinc-400":i()===ks.CONFIRMATION_EXPORTING,"cursor-pointer bg-primary-200 active:bg-primary-200/80 text-zinc-950":i()===ks.CONFIRMATION},_=i()===ks.CONFIRMATION_EXPORTING;return v.e=Gr(y,b,v.e),_!==v.t&&(y.disabled=v.t=_),v},{e:void 0,t:void 0}),p})()]}})]}}),null),g})()};Yt(["click"]);class r6{#e;#t;constructor(e,t){this.#e=e,this.#t=t}static async fromPrivateKey(e){const t=await rd(e);return new r6(e,t)}static async fromJson({privateKey:e}){return this.fromPrivateKey(Br.unmarshalBase64(e))}toJson(){return{privateKey:Br.marshalBase64(this.#e)}}get address(){return this.#t.address}async signTransaction(e){const t=Br.unmarshalBase64(e),n=Vj().decode(t),i=await Kj([this.#t.keyPair],n);return{signedTransaction:ffe(i)}}async signMessage(e){const t=Br.unmarshalBase64(e),i=(await this.#t.signMessages([pfe(t)])).at(0);if(!i)throw new Error("Failed to sign message");const s=Br.marshalBase64(i[VR(this.#t.address)]);return{signedMessage:e,signature:s}}}var K$e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><div class="flex items-center justify-center"><div class="rounded-2xl bg-zinc-800 size-64 flex items-center justify-center"></div></div><div class="text-center mt-4 text-zinc-400 leading-tight">On Jupiter Mobile, head to <span class="text-zinc-300 font-medium">App Settings</span> &#10137; <span class="text-zinc-300 font-medium">Security & Privacy</span> &#10137; <span class="text-zinc-300 font-medium">Jupiter Sync</span>, and tap on <span class="text-zinc-300 font-medium">Mobile to Desktop'),H$e=ye('<div class="i-tabler:loader-2 animate-spin size-12 text-zinc-300">');const W$e=()=>{const{updateImportForm:r,setStep:e}=En(),{connect:t}=cX(),[n,i]=$e(void 0),{accounts:s,importWallet:o}=Jr(),{alert:a}=Ws();return Dr(()=>{t({type:"import",onOpen:c=>{i(c)},onDecryptedMessage:async c=>{if(c.type!=="accounts")return;const l=c.accounts.map(({private_key:u,...f})=>{const h=Hw.validate(u);if(!h)throw a({title:"Jupiter Sync Failed",content:"Invalid private key detected: "+u}),new Error("invalid private key detected: "+u);return f.type==="private_key"?{...f,private_key:h}:{...f,private_key:h,seed_phrase:ba.unmarshalBase64(f.seed_phrase)}});for(const u of l)if(u.type==="seed_phrase"&&!ba.verify(u.seed_phrase,u.derivation_path,u.private_key))throw a({title:"Jupiter Sync Failed",content:"Invalid seed phrase detected: "+u.seed_phrase}),new Error("invalid seed phrase detected: "+u.seed_phrase);if(s().length===0)r({type:or.JUPITER_SYNC,accounts:l.map(u=>u.type==="private_key"?{type:or.PRIVATE_KEY,label:u.label,privateKey:u.private_key}:{type:or.SEED_PHRASE,label:u.label,privateKey:u.private_key,mnemonic:u.seed_phrase,path:u.derivation_path})}),e(nt.SHARED_LABEL_WALLET);else{for(const u of l){const f=await r6.fromPrivateKey(Br.unmarshalBase64(u.private_key));s().some(h=>h.address===f.address)||(u.type==="private_key"?await o({type:"standalone",label:u.label,privateKey:u.private_key}):u.type==="seed_phrase"&&await o({type:"mnemonic",label:u.label,privateKey:u.private_key,mnemonic:u.seed_phrase,path:u.derivation_path}))}e(nt.FINAL_STEP)}}})}),(()=>{var c=K$e(),l=c.firstChild,u=l.firstChild;return ce(c,D(ni,{title:"Mobile to Desktop",get previousStep(){return s().length===0?nt.IMPORT_TYPE:nt.JUPITER_SYNC_TYPE}}),l),ce(u,D(We,{get when(){return n()},get fallback(){return H$e()},children:f=>D(t6,{class:"size-full bg-zinc-50 fill-zinc-950 rounded-2xl p-4",get payload(){return f()},ecc:"low"})})),c})()};var G$e=ye('<div class="size-5 i-tabler:device-desktop-plus bg-primary-200">'),Y$e=ye('<div class="size-5 i-tabler:device-mobile-plus bg-primary-200">'),X$e=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight">Sync your wallets and keys securely with your Jupiter Mobile app.'),J$e=ye('<button class="cursor-pointer p-3 flex gap-3 items-center justify-center bg-zinc-800 rounded-xl w-full ring-1 hover:ring-primary-200 ring-zinc-800 transition-100"><div class="size-10 flex items-center justify-center bg-primary-200/10 rounded-full"></div><div class="flex flex-col flex-1 text-left"><h3 class=font-medium></h3><p class="text-zinc-400 text-sm">');const Q$e=()=>{const{setStep:r}=En(),e=[{title:"Mobile to Desktop",description:"Import wallets from Mobile to Desktop",Icon:()=>G$e(),onClick:()=>r(nt.JUPITER_SYNC_IMPORT)},{title:"Desktop to Mobile",description:"Export wallets from Desktop to Mobile",Icon:()=>Y$e(),onClick:()=>r(nt.JUPITER_SYNC_EXPORT)}];return(()=>{var t=X$e(),n=t.firstChild;return ce(t,D(ni,{title:"Jupiter Sync",get previousStep(){return nt.IMPORT_TYPE}}),n),ce(t,D(Lt,{each:e,children:({title:i,description:s,Icon:o,onClick:a})=>(()=>{var c=J$e(),l=c.firstChild,u=l.nextSibling,f=u.firstChild,h=f.nextSibling;return zs(c,"click",a,!0),ce(l,D(o,{})),ce(f,i),ce(h,s),c})()}),null),t})()};Yt(["click"]);var Z$e=ye('<div class="space-y-3 w-full px-3"><div class="w-full py-10 rounded flex flex-col items-center justify-center"><h1 class="font-semibold text-3xl mt-8 mb-2">Welcome to Jupiter Wallet</h1><p class="opacity-60 text-lg">Your personal portal into Solana</p></div><div class=space-y-3><button class="relative cursor-pointer w-full py-3 rounded-xl text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100 group"><div>Create a new wallet</div><div class="absolute right-3 top-0 flex items-center justify-center h-full"><div class="i-tabler:arrow-right size-5.5 group-hover:translate-x-1 transition-200"></div></div></button><button class="relative cursor-pointer w-full py-3 rounded-xl text-zinc-400 font-semibold ring-1 ring-zinc-600 active:ring-zinc-500 transition-100 group"><div>Import an existing wallet</div><div class="absolute right-3 top-0 flex items-center justify-center h-full"><div class="i-tabler:plus size-5.5 group-hover:rotate-90 transition-200"></div></div></button></div><div class="flex justify-between items-center mt-4"><div class="flex space-x--0.5"><img src=https://pbs.twimg.com/profile_images/1914034055273742336/NvaIDKua_400x400.jpg class="size-6 rounded-full z-2"><img src=https://pbs.twimg.com/profile_images/1947596828696055808/yWWLZzgs_400x400.jpg class="size-6 rounded-full z-1"><img src=https://pbs.twimg.com/profile_images/1921122530405863425/wTbPEY2B_400x400.jpg class="size-6 rounded-full"></div><div class="text-zinc-400 text-sm">Join <span class="text-zinc-200 font-medium">1.09M+</span> other users now');const eMe=()=>{const{setStep:r,resetImportForm:e}=En();return Dr(()=>e()),(()=>{var t=Z$e(),n=t.firstChild,i=n.firstChild,s=n.nextSibling,o=s.firstChild,a=o.nextSibling;return ce(n,D(Lg,{class:"size-24"}),i),o.$$click=()=>r(nt.CREATE_TYPE),a.$$click=()=>r(nt.IMPORT_TYPE),t})()};Yt(["click"]);var tMe=ye('<div class="flex flex-col items-center justify-center"><p class="text-zinc-400 p-4">Logging in via <!>...</p><div class="size-12 i-tabler:loader-2 animate-spin mt-10 mb-20 text-zinc-400">'),rMe=ye('<p class="p-4 text-red-400">Error: '),nMe=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><div class="w-full bg-zinc-800 rounded-xl"></div><div class="flex gap-2"><button class="w-full p-2.5 rounded-xl font-semibold transition-100 mt-2">');const qo={AUTHENTICATING:"authenticating",ERROR:"error"},iMe=()=>{const{step:r,setStep:e,updateImportForm:t}=En(),n=ke(()=>r()===nt.PRIVY_GOOGLE?"Google":r()===nt.PRIVY_APPLE?"Apple":r()===nt.PRIVY_TWITTER?"Twitter":"Discord"),[i,s]=$e(qo.AUTHENTICATING),[o,a]=$e(null);async function c(){const u=n().toLowerCase();try{await Wg.login(u),t({type:or.PRIVY}),e(nt.SHARED_CHOOSE_ADDRESSES)}catch(f){a(f instanceof Error?f.message:"Unknown error: "+f),s(qo.ERROR)}}async function l(){if(i()!==qo.AUTHENTICATING&&i()===qo.ERROR){s(qo.AUTHENTICATING),a(null),c();return}}return Dr(()=>c()),(()=>{var u=nMe(),f=u.firstChild,h=f.nextSibling,d=h.firstChild;return ce(u,D(ni,{get title(){return`Login via ${n()}`},get previousStep(){return nt.PRIVY_TYPE}}),f),ce(f,D(yr,{get children(){return[D(Ne,{get when(){return i()===qo.AUTHENTICATING},get children(){var g=tMe(),p=g.firstChild,m=p.firstChild,y=m.nextSibling;return y.nextSibling,ce(p,n,y),g}}),D(Ne,{get when(){return i()===qo.ERROR},get children(){var g=rMe();return g.firstChild,ce(g,o,null),g}})]}})),d.$$click=l,ce(d,D(yr,{get children(){return[D(Ne,{get when(){return i()===qo.AUTHENTICATING},children:"Logging in..."}),D(Ne,{get when(){return i()===qo.ERROR},children:"Retry"})]}})),ht(g=>{var p={"cursor-wait bg-zinc-700":i()===qo.AUTHENTICATING,"cursor-pointer active:bg-primary-200/80 bg-primary-200 text-zinc-950":i()!==qo.AUTHENTICATING},m=i()===qo.AUTHENTICATING;return g.e=Gr(d,p,g.e),m!==g.t&&(d.disabled=g.t=m),g},{e:void 0,t:void 0}),u})()};Yt(["click"]);var sMe=ye('<div class="size-6 i-tabler:brand-google">'),oMe=ye('<div class="size-6 i-tabler:brand-apple">'),aMe=ye('<div class="size-6 i-tabler:brand-x">'),cMe=ye('<div class="size-6 i-tabler:brand-discord">'),lMe=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl">'),uMe=ye('<button class="cursor-pointer p-3 flex gap-3 items-center justify-center bg-zinc-800 rounded-xl w-full ring-1 hover:ring-primary-200 ring-zinc-800 transition-100"><div class="size-9 flex items-center justify-center"></div><div class="flex flex-col flex-1 text-left"><h3 class=font-medium>');const fMe=()=>{const{setStep:r}=En(),e=[{title:"Continue with Google",Icon:()=>sMe(),onClick:()=>r(nt.PRIVY_GOOGLE)},{title:"Continue with Apple",Icon:()=>oMe(),onClick:()=>r(nt.PRIVY_APPLE)},{title:"Continue with X",Icon:()=>aMe(),onClick:()=>r(nt.PRIVY_TWITTER)},{title:"Continue with Discord",Icon:()=>cMe(),onClick:()=>r(nt.PRIVY_DISCORD)}];return(()=>{var t=lMe();return ce(t,D(ni,{title:"Social Login",get previousStep(){return nt.MAIN}}),null),ce(t,D(Lt,{each:e,children:({title:n,Icon:i,onClick:s})=>(()=>{var o=uMe(),a=o.firstChild,c=a.nextSibling,l=c.firstChild;return zs(o,"click",s,!0),ce(a,D(i,{})),ce(l,n),o})()}),null),t})()};Yt(["click"]);var hMe=ye('<div class="h-16 rounded-xl bg-zinc-800 flex items-center justify-center"><div class="size-6 i-tabler:loader-2 animate-spin text-zinc-400">'),dMe=ye('<button class="w-full flex items-center justify-center text-zinc-400 text-center mt-2 font-medium gap-1 hover:text-zinc-100 transition-100 cursor-pointer"><div>View <!> More</div><div class="i-tabler:chevron-down size-5.5">'),pMe=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight">The following addresses will be added:</p><div class="bg-zinc-900 rounded"><button class="mt-4 w-full p-2.5 rounded-xl font-semibold transition-100">Confirm'),gMe=ye('<button class="h-16 w-full flex items-center px-4 font-medium gap-3 bg-zinc-800 rounded-xl"><div class="flex flex-col items-start space-y--0.5"></div><div class=flex-1></div><div class=size-6>');const mMe=()=>{const r=Ws(),{importForm:e,updateImportForm:t,setStep:n}=En(),[i,s]=zf([]),o=ke(()=>e().type===or.PRIVATE_KEY?nt.IMPORT_PRIVATE_KEY:e().type===or.SEED_PHRASE?nt.IMPORT_SEED_PHRASE:e().type===or.LEDGER?nt.IMPORT_LEDGER:e().type===or.KEYSTONE?nt.IMPORT_KEYSTONE:e().type===or.TREZOR?nt.IMPORT_TREZOR:e().type===or.PRIVY?nt.PRIVY_TYPE:nt.IMPORT_TYPE),[a,c]=$e(!1),l=ke(()=>i.filter(d=>!d.isActive).length),u=ke(()=>i.some(d=>d.isSelected));function f(){c(!0)}async function h(){if(!u())return;const{accounts:d}=await _r.getAccounts();for(const p of i)if(p.isSelected&&d.some(m=>m.address===p.address)){r.alert({title:"Address Already Exists",content:"Please choose another address to continue."});return}const g=e().type;if(g===or.SEED_PHRASE){const p=i.flatMap(m=>m.isSelected&&m.type===g?{address:m.address,path:m.path,privateKey:m.privateKey}:[]);t({accounts:p})}if(g===or.LEDGER||g===or.KEYSTONE||g===or.TREZOR){const p=i.flatMap(m=>m.isSelected&&m.type===g?{address:m.address,path:m.path,mfp:m.mfp}:[]);t({accounts:p})}n(nt.SHARED_LABEL_WALLET)}return Dr(async()=>{const d=e();if(d.type!=="__empty__"){if(d.type===or.PRIVATE_KEY&&d.privateKey){const g=await rd(Br.unmarshalBase64(d.privateKey)),{data:p}=await ss.getAddressesExistence([g.address]),m=p.at(0);s([{type:d.type,address:g.address,balance:m?.sol||0,isSelected:!0,isActive:!0}])}if(d.type===or.SEED_PHRASE&&d.mnemonic&&d.accounts){const{data:g}=await ss.getAddressesExistence(d.accounts.map(y=>y.address)),p=d.accounts.map((y,v)=>{const b=g.find(_=>_.address===y.address);return{type:d.type,address:y.address,balance:b?.sol||0,isSelected:g.length===0&&v===0?!0:!!b,isActive:g.length===0&&v===0?!0:!!b,path:y.path,privateKey:y.privateKey}}),m=p.findIndex(y=>y.path.endsWith("44'/501'")&&y.isSelected&&y.isActive);if(m!==-1){const[y]=p.splice(m,1);p.unshift(y)}s(p)}if((d.type===or.LEDGER||d.type===or.TREZOR||d.type===or.KEYSTONE)&&d.accounts&&d.accounts.length>0){const{data:g}=await ss.getAddressesExistence(d.accounts.map(y=>y.address)),p=d.accounts.map((y,v)=>{const b=g.find(_=>_.address===y.address);return{type:d.type,address:y.address,balance:b?.sol||0,isSelected:g.length===0&&v===0?!0:!!b,isActive:g.length===0&&v===0?!0:!!b,path:y.path,mfp:y.mfp}}),m=p.findIndex(y=>y.path.endsWith("44'/501'")&&y.isSelected&&y.isActive);if(m!==-1){const[y]=p.splice(m,1);p.unshift(y)}s(p)}if(d.type===or.PRIVY){const g=await Wg.getSolanaWallet(),{data:p}=await ss.getAddressesExistence([g.address]),m=p.at(0);t({type:or.PRIVY,address:g.address}),s([{type:d.type,address:g.address,balance:m?.sol||0,isSelected:!0,isActive:!0}])}}}),(()=>{var d=pMe(),g=d.firstChild,p=g.nextSibling,m=p.firstChild;return ce(d,D(ni,{title:"Confirm Addresses",get previousStep(){return o()}}),g),ce(p,D(We,{get when(){return i.length===0},get children(){return hMe()}}),m),ce(p,D(We,{get when(){return i.length>0},get children(){return D(Hd,{class:"max-h-45vh space-y-2",get children(){return D(Lt,{each:i,children:(y,v)=>(()=>{var b=gMe(),_=b.firstChild,x=_.nextSibling,E=x.nextSibling;return b.$$click=()=>s(v(),"isSelected",!y.isSelected),ce(b,D(Gg,{get id(){return y.address},class:"size-9"}),_),ce(_,D(Yo,{get address(){return y.address}}),null),ce(_,D(vn,{class:"font-normal text-zinc-400",get value(){return y.balance},suffix:" SOL",showZero:!0}),null),ht(S=>{var C={"cursor-pointer hover:bg-zinc-700/60":i.length>1,hidden:!a()&&!y.isActive},k=i.length===1,$={"i-tabler:square-check-filled bg-primary-200":y.isSelected,"i-tabler:square bg-zinc-600":!y.isSelected};return S.e=Gr(b,C,S.e),k!==S.t&&(b.disabled=S.t=k),S.a=Gr(E,$,S.a),S},{e:void 0,t:void 0,a:void 0}),b})()})}})}}),m),ce(p,D(We,{get when(){return Or(()=>l()>0)()&&!a()},get children(){var y=dMe(),v=y.firstChild,b=v.firstChild,_=b.nextSibling;return _.nextSibling,y.$$click=()=>f(),ce(v,l,_),y}}),m),m.$$click=h,ht(y=>{var v={"cursor-not-allowed bg-zinc-700 text-zinc-400":!u(),"cursor-pointer bg-primary-200 active:bg-primary-200/80 text-zinc-950":u()},b=!u();return y.e=Gr(m,v,y.e),b!==y.t&&(m.disabled=y.t=b),y},{e:void 0,t:void 0}),d})()};Yt(["click"]);var yMe=ye("<div class=break-words>"),vMe=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight"></p><form class="bg-zinc-900 rounded space-y-3"><div><label class="uppercase text-xs text-zinc-400 font-medium">Wallet Label</label><input class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 transition-100"placeholder="eg. Trading, Savings, Investments"name=wallet-name-input maxlength=16></div><div><label class="uppercase text-xs text-zinc-400 font-medium">Enter Password</label><input class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 transition-100"type=password name=password-input placeholder="At least 6 characters"minlength=6></div><div><label class="uppercase text-xs text-zinc-400 font-medium">Confirm Password</label><input class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 transition-100"type=password name=confirm-password-input placeholder="Re-enter your password"minlength=6></div><button class="w-full p-2.5 rounded-xl font-semibold transition-100 mt-2">');const bMe="wallet-name-input",wMe="password-input",xMe="confirm-password-input",eU=6,sa={LABEL_AND_PASSWORD:"label-and-password",LABEL_ONLY:"label-only",PASSWORD_ONLY:"password-only"},_Me=()=>{const r=Ws(),{importWallet:e,accounts:t}=Jr(),{importForm:n,setStep:i}=En(),[s,o]=$e(!1),a=ke(()=>n().type==="Jupiter Sync"?sa.PASSWORD_ONLY:t().length===0?sa.LABEL_AND_PASSWORD:sa.LABEL_ONLY),c=ke(()=>t().length>0),l=ke(()=>{const h=n();return h.type===or.EXISTING_SEED_PHRASE?nt.EXISTING_SEED_PHRASE:h.type===or.JUPITER_SYNC?nt.JUPITER_SYNC_IMPORT:h.type===or.SEED_PHRASE&&h.isNew?nt.CREATE_SEED_PHRASE_VIEW:h.type===or.READONLY?nt.IMPORT_READONLY:nt.SHARED_CHOOSE_ADDRESSES});async function u(h){h.preventDefault();const d=new FormData(h.target),g=d.get(bMe)?.toString().trim()||"",p=d.get(wMe)?.toString(),m=d.get(xMe)?.toString();if(!g&&a()!==sa.PASSWORD_ONLY)return;const y=!c();if(y){if(!p)return;if(p!==m){r.alert({title:"Passwords Do Not Match",content:"Please ensure that your passwords match."});return}if(p.length<eU){r.alert({title:"Password Too Short",content:`Your password must be at least ${eU} characters long.`});return}}o(!0);const v=n();if(v.type===or.READONLY&&v.address&&await e({type:"readonly",label:g,password:p,address:v.address}),v.type===or.PRIVATE_KEY&&v.privateKey&&await e({type:"standalone",label:g,password:p,privateKey:v.privateKey}),v.type===or.SEED_PHRASE&&v.mnemonic&&v.accounts)for(let b=0;b<v.accounts.length;b++){const _=v.accounts[b];await e({type:"mnemonic",label:b===0?g:g+` (${b})`,password:p,privateKey:_.privateKey,mnemonic:v.mnemonic,path:_.path})}if(v.type===or.EXISTING_SEED_PHRASE&&v.mfp&&await e({type:"mnemonic_existing",label:g,mfp:v.mfp}),v.type===or.LEDGER&&v.accounts)for(let b=0;b<v.accounts.length;b++){const _=v.accounts[b];await e({type:"ledger",label:b===0?g:g+` (${b})`,password:p,address:_.address,path:_.path})}if(v.type===or.KEYSTONE&&v.accounts)for(let b=0;b<v.accounts.length;b++){const _=v.accounts[b];await e({type:"keystone",label:b===0?g:g+` (${b})`,password:p,address:_.address,path:_.path,mfp:_.mfp})}if(v.type===or.TREZOR&&v.accounts)for(let b=0;b<v.accounts.length;b++){const _=v.accounts[b];await e({type:"trezor",label:b===0?g:g+` (${b})`,password:p,address:_.address,path:_.path})}if(v.type===or.PRIVY&&v.address&&await e({type:"privy",label:g,password:p,address:v.address}),v.type===or.JUPITER_SYNC&&v.accounts)for(const b of v.accounts)b.type===or.PRIVATE_KEY?await e({type:"standalone",label:b.label,privateKey:b.privateKey,password:p}):b.type===or.SEED_PHRASE&&await e({type:"mnemonic",label:b.label,privateKey:b.privateKey,mnemonic:b.mnemonic,path:b.path,password:p});i(y?nt.SHARED_RECOMMEMDED_SETTINGS:nt.FINAL_STEP)}async function f(h){try{await u(h)}catch(d){const g=d instanceof Error?d.message:String(d);r.alert({title:"Failed to Add Wallet",content:(()=>{var p=yMe();return ce(p,g),p})()}),o(!1)}}return(()=>{var h=vMe(),d=h.firstChild,g=d.nextSibling,p=g.firstChild,m=p.firstChild;m.nextSibling;var y=p.nextSibling,v=y.firstChild;v.nextSibling;var b=y.nextSibling,_=b.firstChild;_.nextSibling;var x=b.nextSibling;return ce(h,D(ni,{get title(){return a()===sa.PASSWORD_ONLY?"Secure Your Wallet":"Label Your Wallet"},get previousStep(){return l()}}),d),ce(d,D(yr,{get children(){return[D(Ne,{get when(){return a()===sa.LABEL_AND_PASSWORD},children:"Enter a short label for your wallet, and secure it with a strong password."}),D(Ne,{get when(){return a()===sa.LABEL_ONLY},children:"Enter a short label for your wallet."}),D(Ne,{get when(){return a()===sa.PASSWORD_ONLY},children:"Secure your wallet with a strong password."})]}})),g.addEventListener("submit",E=>f(E)),x.addEventListener("submit",E=>u(E)),ce(x,D(We,{get when(){return s()},fallback:"Next",children:"Loading..."})),ht(E=>{var S=a()===sa.PASSWORD_ONLY,C=a()===sa.LABEL_ONLY,k=a()===sa.LABEL_ONLY,$={"cursor-wait bg-zinc-700":s(),"cursor-pointer active:bg-primary-200/80 bg-primary-200 text-zinc-950":!s()},J=s();return S!==E.e&&p.classList.toggle("hidden",E.e=S),C!==E.t&&y.classList.toggle("hidden",E.t=C),k!==E.a&&b.classList.toggle("hidden",E.a=k),E.o=Gr(x,$,E.o),J!==E.i&&(x.disabled=E.i=J),E},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),h})()};du.Label;const tU=du;du.ErrorMessage;du.Description;const rU=r=>{const[e,t]=Mt(r,["class","children"]);return[D(du.Input,{}),D(du.Control,st({get class(){return Xr("inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-shadow data-[disabled]:cursor-not-allowed transition-property-[box-shadow,color,background-color] ring-1 ring-zinc-800 bg-zinc-700 data-[checked]:bg-primary-200/20 hover:ring-primary-200 data-[disabled]:hover:ring-zinc-800",e.class)}},t,{get children(){return e.children}}))]},nU=r=>{const[e,t]=Mt(r,["class"]);return D(du.Thumb,st({get class(){return Xr("pointer-events-none block h-4 w-4 translate-x-0 rounded-full shadow-lg transition-transform data-[checked]:translate-x-4 bg-zinc-400 data-[checked]:bg-primary-200",e.class)}},t))};var SMe=ye(`<div><div><div class="space-y-1 leading-4"><div class="font-medium leading-4">Jupiter Auto Approve</div><div class="text-sm text-zinc-400 leading-4">Automatically approve transactions made on Jupiter's applications (eg. jup.ag)</div></div></div><div><div class="space-y-1 leading-4"><div class="font-medium leading-4">Auto Approve Notifications</div><div class="text-sm text-zinc-400 leading-4">Receive a notification whenever a transaction is automatically approved`);const lX=r=>{const{settings:e,updateUserSettings:t}=Pa();return(()=>{var n=SMe(),i=n.firstChild;i.firstChild;var s=i.nextSibling;return s.firstChild,ce(i,D(tU,{class:"flex items-center",get checked(){return e.jupiterAutoApprove},onChange:o=>{t({type:"setJupiterAutoApprove",value:o})},get children(){return D(rU,{get children(){return D(nU,{})}})}}),null),ce(s,D(tU,{class:"flex items-center",get checked(){return e.jupiterAutoApproveNotifications},onChange:o=>{t({type:"setJupiterAutoApproveNotifications",value:o})},get disabled(){return!e.jupiterAutoApprove},get children(){return D(rU,{get children(){return D(nU,{})}})}}),null),ht(o=>{var a=Xr("space-y-3",r.class),c=Xr("p-3 rounded-xl bg-zinc-900 flex items-center justify-between gap-4",r.cardClass),l=Xr("p-3 rounded-xl bg-zinc-900 flex items-center justify-between gap-4 transition-100",{"opacity-50":!e.jupiterAutoApprove},r.cardClass);return a!==o.e&&ui(n,o.e=a),c!==o.t&&ui(i,o.t=c),l!==o.a&&ui(s,o.a=l),o},{e:void 0,t:void 0,a:void 0}),n})()};var EMe=ye('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-5">Review the recommended settings. You can always change them later in your settings.</p><button class="cursor-pointer w-full p-2.5 rounded-xl bg-primary-200 text-zinc-950 font-semibold active:bg-primary-200/80 transition-100">Get Started');const AMe=()=>{const{setStep:r}=En();return(()=>{var e=EMe(),t=e.firstChild,n=t.nextSibling;return ce(e,D(ni,{title:"Recommended Settings"}),t),ce(e,D(lX,{cardClass:"bg-zinc-800"}),n),n.$$click=()=>r(nt.FINAL_STEP),e})()};Yt(["click"]);var IMe=ye('<div class="flex items-center justify-center gap-1.5 mt-3">'),CMe=ye('<div class="w-2 h-2 rounded-full">');const TMe=()=>{const{step:r}=En(),e=ke(()=>r()===nt.IMPORT_TYPE||r()===nt.CREATE_TYPE?1:r().startsWith("import-")||r().startsWith("create-")||r().startsWith("privy-")||r().startsWith("jupiter-sync-")||r()===nt.EXISTING_SEED_PHRASE?2:r().startsWith("shared-")?3:0);return D(We,{get when(){return e()!==0},get children(){var t=IMe();return ce(t,D(Lt,{each:[1,2,3],children:n=>(()=>{var i=CMe();return ht(s=>{var o=n===e(),a=n!==e();return o!==s.e&&i.classList.toggle("bg-primary-200",s.e=o),a!==s.t&&i.classList.toggle("bg-zinc-600",s.t=a),s},{e:void 0,t:void 0}),i})()})),t}})};var RMe=ye('<div class="flex-1 flex items-center justify-center p-4 gap-3"><div class=w-full>');const kMe=()=>D(Q8e,{get children(){return D(PMe,{})}}),PMe=()=>{const{step:r}=En();return(()=>{var e=RMe(),t=e.firstChild;return ce(e,D(VY,{raysOrigin:"top-center",raysColor:"#C7F284",raysSpeed:.25,lightSpread:.69,rayLength:4.2,followMouse:!1,noiseAmount:.1,distortion:.03,class:"fixed inset-0 pointer-events-none z--1"}),t),ce(t,D(yr,{get children(){return[D(Ne,{get when(){return r()===nt.MAIN},get children(){return D(eMe,{})}}),D(Ne,{get when(){return r()===nt.IMPORT_TYPE},get children(){return D(r$e,{})}}),D(Ne,{get when(){return r()===nt.IMPORT_READONLY},get children(){return D(U5e,{})}}),D(Ne,{get when(){return r()===nt.IMPORT_PRIVATE_KEY},get children(){return D(N5e,{})}}),D(Ne,{get when(){return r()===nt.IMPORT_SEED_PHRASE},get children(){return D(j5e,{})}}),D(Ne,{get when(){return r()===nt.IMPORT_HARDWARE_WALLET},get children(){return D(T5e,{})}}),D(Ne,{get when(){return r()===nt.IMPORT_LEDGER},get children(){return D($5e,{})}}),D(Ne,{get when(){return r()===nt.IMPORT_KEYSTONE},get children(){return D(P5e,{})}}),D(Ne,{get when(){return r()===nt.IMPORT_TREZOR},get children(){return D(H5e,{})}}),D(Ne,{get when(){return r()===nt.CREATE_TYPE},get children(){return D(p5e,{})}}),D(Ne,{get when(){return r()===nt.PRIVY_TYPE},get children(){return D(fMe,{})}}),D(Ne,{get when(){return r()===nt.PRIVY_GOOGLE||r()===nt.PRIVY_APPLE||r()===nt.PRIVY_TWITTER||r()===nt.PRIVY_DISCORD},get children(){return D(iMe,{})}}),D(Ne,{get when(){return r()===nt.CREATE_SEED_PHRASE_WARNING},get children(){return D(o5e,{})}}),D(Ne,{get when(){return r()===nt.CREATE_SEED_PHRASE_VIEW},get children(){return D(i5e,{})}}),D(Ne,{get when(){return r()===nt.EXISTING_SEED_PHRASE},get children(){return D(v5e,{})}}),D(Ne,{get when(){return r()===nt.JUPITER_SYNC_TYPE},get children(){return D(Q$e,{})}}),D(Ne,{get when(){return r()===nt.JUPITER_SYNC_IMPORT},get children(){return D(W$e,{})}}),D(Ne,{get when(){return r()===nt.JUPITER_SYNC_EXPORT},get children(){return D(V$e,{})}}),D(Ne,{get when(){return r()===nt.SHARED_CHOOSE_ADDRESSES},get children(){return D(mMe,{})}}),D(Ne,{get when(){return r()===nt.SHARED_LABEL_WALLET},get children(){return D(_Me,{})}}),D(Ne,{get when(){return r()===nt.SHARED_RECOMMEMDED_SETTINGS},get children(){return D(AMe,{})}}),D(Ne,{get when(){return r()===nt.FINAL_STEP},get children(){return D(_5e,{})}})]}}),null),ce(t,D(TMe,{}),null),ce(e,D(A5e,{}),null),e})()};var OMe=ye('<div class="i-tabler:chevron-down size-4.5 text-zinc-500 group-hover:text-zinc-300 transition-100">'),DMe=ye('<div class="text-center text-zinc-500 border-t border-zinc-800 p-3">No more trades'),$Me=ye('<div class="flex flex-col"><div class="flex items-center h-14 px-4 bg-zinc-900 gap-1"><div class=flex-1></div><button class="text-zinc-300 transition-100 p-2 bg-zinc-800 rounded-md"><div class="i-tabler:refresh size-4"></div></button></div><div class="grid grid-cols-3 gap-4 px-4 pt-2 pb-4 bg-zinc-900"></div><div class><table class=w-full><thead><tr class="border-b border-zinc-800"><th class="font-normal text-zinc-400 flex items-center justify-start px-4 py-2 text-sm gap-0.5 hover:text-zinc-50 transition-100 cursor-pointer"><div>Last Traded</div><div class="i-tabler:arrow-down size-4 text-primary-200"></div></th><th class="font-normal text-zinc-400 text-right py-2 text-sm">Balance</th><th class="font-normal text-zinc-400 flex items-center justify-end px-4 py-2 text-sm gap-0.5 hover:text-zinc-50 transition-100 cursor-pointer"><div class="i-tabler:arrow-down size-4 text-primary-200"></div><div>Total PnL</div></th></tr></thead><tbody class="divide-y divide-zinc-900">'),MMe=ye('<div class="leading-none font-medium">'),BMe=ye('<div><div class="text-sm text-zinc-400 leading-none mb-1">'),NMe=ye('<div class="bg-zinc-800 animate-pulse h-4 w-16 rounded">'),LMe=ye('<tr><td class="h-15 px-4 flex items-center gap-2"><div class="bg-zinc-800 animate-pulse size-8 rounded-full"></div><div class=space-y-1><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded"></div><div class="h-3 w-16 bg-zinc-800 animate-pulse rounded"></div></div></td><td class=h-15><div class="space-y-1 flex flex-col items-end"><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded"></div><div class="h-3 w-12 bg-zinc-800 animate-pulse rounded"></div></div></td><td class="h-15 px-4"><div class="space-y-1 flex flex-col items-end"><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded">'),FMe=ye('<tr class="hover:bg-zinc-900 cursor-pointer"><td class="h-15 px-4 flex items-center"><div><div class="text-sm font-medium"></div><div class="text-xs text-zinc-400"></div></div></td><td class="h-15 text-right text-sm space-y--0.25"><div class=font-medium></div><div class="text-xs text-zinc-400"></div></td><td class="h-15 px-4 text-right text-sm font-medium">');const UMe=()=>{const r=bY(),[e,t]=$e("1d"),n=ke(()=>{const d=e()==="1d"?"1d":e()==="7d"?"7d":e()==="30d"?"30d":"total";return[{label:"Total PnL",value:r.data?.[d].pnlTotal??0},{label:"Unrealised",value:r.data?.[d].pnlUnrealised??0},{label:"Realised",value:r.data?.[d].pnlRealised??0}]}),{formatLargeNumbers:i}=Ic(),{selectedAccount:s}=Jr(),o=ra(),a=ke(()=>new Map(o.data?.tokens.map(d=>[d.id,d]))),c=Co(),[l,u]=$e("recent"),f=qs(()=>({queryKey:["positions",s()?.address,l()],queryFn:async()=>ss.getPnlPositions(s().address,{sort:l()}),enabled:!!s()?.address,refetchInterval:6e4}));function h(){f.isFetching||(r.refetch(),f.refetch())}return(()=>{var d=$Me(),g=d.firstChild,p=g.firstChild,m=p.nextSibling,y=m.firstChild,v=g.nextSibling,b=v.nextSibling,_=b.firstChild,x=_.firstChild,E=x.firstChild,S=E.firstChild,C=S.firstChild,k=C.nextSibling,$=S.nextSibling,J=$.nextSibling,j=J.firstChild,L=x.nextSibling;return ce(g,D(Ys,{title:"PnL Analysis"}),p),ce(g,D(Ga,{options:["1d","All"],get value(){return e()},onChange:t,disallowEmptySelection:!0,itemComponent:w=>D(Ga.Item,{get item(){return w.item},class:"py-2 px-2.5 cursor-pointer hover:bg-zinc-700/50 rounded-md text-sm",get children(){return D(Ga.ItemLabel,{get children(){return w.item.rawValue}})}}),get children(){return[D(Ga.Trigger,{class:"w-18 flex items-center justify-between py-1.5 pl-2.5 pr-1.5 bg-zinc-800 rounded-md text-zinc-300 hover:ring-1 hover:ring-primary-200 hover:text-zinc-50 transition-100 cursor-pointer group",get children(){return[D(Ga.Value,{class:"text-sm",children:w=>w.selectedOption()}),D(Ga.Icon,{get children(){return OMe()}})]}}),D(Ga.Portal,{get children(){return D(Ga.Content,{class:"bg-zinc-800 ring-1 ring-zinc-700 rounded-md",get children(){return D(Ga.Listbox,{})}})}})]}}),m),m.$$click=()=>h(),ce(v,D(Lt,{get each(){return n()},children:w=>(()=>{var R=BMe(),N=R.firstChild;return ce(N,()=>w.label),ce(R,D(We,{get when(){return!r.isLoading},get fallback(){return NMe()},get children(){var Y=MMe();return ce(Y,D(ya,{get children(){return i(w.value,"currency",!0)}})),ht(z=>{var G=w.value>=.01,te=w.value<=-.01;return G!==z.e&&Y.classList.toggle("text-green-400",z.e=G),te!==z.t&&Y.classList.toggle("text-red-400",z.t=te),z},{e:void 0,t:void 0}),Y}}),null),R})()})),S.$$click=()=>u("recent"),J.$$click=()=>u("profit"),ce(L,D(We,{get when(){return!f.isLoading},get fallback(){return D(Lt,{get each(){return new Array(20).fill(0)},children:()=>LMe()})},get children(){return D(Lt,{get each(){return f.data?.positions},children:w=>(()=>{var R=FMe(),N=R.firstChild,Y=N.firstChild,z=Y.firstChild,G=z.nextSibling,te=N.nextSibling,X=te.firstChild,T=X.nextSibling,A=te.nextSibling;return R.$$click=()=>c(vt.ASSETS(w.id)),ce(N,D(Rn,{get src(){return w.icon},class:"size-8 mr-2"}),Y),ce(z,()=>w.symbol||w.id.slice(0,4)),ce(G,D(mY,{get date(){return new Date(w.lastActiveTime)}})),ce(X,D(pi,{style:"compact",get value(){return a().get(w.id)?.value??0},prefix:"$"})),ce(T,D(We,{get when(){return(a().get(w.id)?.amount??0)>.01},get fallback(){return us.DASH},get children(){return D(pi,{style:"compact",get value(){return a().get(w.id)?.amount??0}})}})),ce(A,D(pi,{style:"compact",get value(){return w.pnlTotal},get prefix(){return w.pnlTotal>0?"+$":`${us.MINUS}$`}})),ht(O=>{var I=(a().get(w.id)?.value??0)<.01,U=w.pnlTotal>0,Z=w.pnlTotal<0,oe=w.pnlTotal===0;return I!==O.e&&X.classList.toggle("text-zinc-400",O.e=I),U!==O.t&&A.classList.toggle("text-green-400",O.t=U),Z!==O.a&&A.classList.toggle("text-red-400",O.a=Z),oe!==O.o&&A.classList.toggle("text-zinc-400",O.o=oe),O},{e:void 0,t:void 0,a:void 0,o:void 0}),R})()})}})),ce(b,D(yr,{get children(){return[D(Ne,{get when(){return f.isLoading},get children(){return[]}}),D(Ne,{get when(){return f.data&&f.data.positions.length>0},get children(){return DMe()}}),D(Ne,{when:!0,get children(){return D(dm,{type:"pnl"})}})]}}),null),ht(w=>{var R={"cursor-wait":f.isFetching,"cursor-pointer hover:text-zinc-50 hover:ring-1 hover:ring-primary-200":!f.isFetching},N=f.isFetching,Y={"animate-spin animate-direction-reverse":f.isFetching},z=l()!=="recent",G=l()!=="profit";return w.e=Gr(m,R,w.e),N!==w.t&&(m.disabled=w.t=N),w.a=Gr(y,Y,w.a),z!==w.o&&k.classList.toggle("opacity-0",w.o=z),G!==w.i&&j.classList.toggle("opacity-0",w.i=G),w},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),d})()};Yt(["click"]);var zMe=ye('<div class="flex flex-col p-4 space-y-4"><div class="flex-1 flex flex-col items-center"><div class="mt-8 text-zinc-400">Send only <span class=text-zinc-50>Solana</span> assets to this address</div><div class="break-all max-w-3xs text-center leading-4 mt-4 select-all">');const qMe=()=>{const r=bl(),{selectedAccount:e}=Jr(),[t,n]=$e(!1);let i;function s(){i?.(),Zb(e()?.address??""),n(!0),i=tl(()=>n(!1),2500,setTimeout)}return(()=>{var o=zMe(),a=o.firstChild,c=a.firstChild,l=c.nextSibling;return ce(o,D(Ys,{title:"Receive Assets"}),a),ce(a,D(t6,{get payload(){return e()?.address??""},class:"bg-zinc-50 fill-zinc-950 rounded-2xl size-48 mt-8"}),c),ce(l,()=>e()?.address),ce(o,D(fs,{onApproveClick:()=>s(),onCancelClick:()=>r(),get approveTitle(){return t()?"Copied":"Copy Address"},cancelTitle:"Close"}),null),o})()},sl={FORM:"form",ASSET:"asset",REVIEW:"review"},J2=vf.SOL,[jMe,VMe]=Lf(()=>{const[r,e]=$e(sl.FORM),[t,n]=Uf(),i=ra(),s=ke(()=>t.recipient?.trim()??""),o=h=>{n({recipient:h},{replace:!0})},a=ke(()=>t.mint?.trim()??J2.id),c=h=>{n({mint:h},{replace:!0})},l=ke(()=>t.amount?.trim()??""),u=h=>{n({amount:h},{replace:!0})},f=ke(h=>a()?i.data?.tokens.find(g=>g.id===a())??{...h??J2,amount:0,rawAmount:"0",value:0}:J2);return{view:r,setView:e,recipient:s,setRecipient:o,setMint:c,amount:l,setAmount:u,selectedAsset:f}}),Ww=()=>{const r=VMe();if(!r)throw new Error("useSend must be used within a SendProvider");return r};var KMe=ye('<div class="text-center text-zinc-600 border-t border-zinc-800 p-3">No more tokens'),HMe=ye('<div><div class="px-4 pt-4"></div><div class=p-4><div class="flex items-center bg-zinc-900 rounded-xl ring-1 transition-100"><div class="flex items-center justify-center pl-3.5 pr-2.5"><div class="i-tabler:search size-5.5 text-zinc-500"></div></div><input class="w-full outline-none py-3 pr-3"placeholder="Search token name / symbol / address"type=search id=asset-input autocomplete=off autocorrect=off></div></div><div class>'),WMe=ye('<div class="size-4 i-tabler:rosette-discount-check text-primary-200">'),GMe=ye('<button class="w-full text-left cursor-pointer flex items-center gap-4 px-4 h-15 hover:bg-zinc-900 transition-100"><div class=space-y-0.5><div class="flex items-center gap-1"><div class="font-semibold leading-none"></div></div><div class="flex gap-1"><div class="text-sm leading-none text-zinc-400"></div><div class="text-sm leading-none text-zinc-400"></div></div></div><div class=flex-1></div><div class="text-right space-y-0.5"><div class="font-medium leading-none"></div><div class="text-sm leading-none text-zinc-400">');const YMe="asset-input",XMe=()=>{const{selectedAsset:r,setMint:e,setView:t}=Ww(),n=ra(),[i,s]=$e(""),o=ke(()=>{const u=i().trim().toLowerCase();return n.data?.tokens.filter(f=>f.symbol.toLowerCase().includes(u)||f.id.toLowerCase().includes(u))??[]}),[a,c]=$e(!1);function l(u){ai(()=>{e(u),t(sl.FORM)})}return Dr(()=>document.getElementById(YMe)?.focus()),(()=>{var u=HMe(),f=u.firstChild,h=f.nextSibling,d=h.firstChild,g=d.firstChild,p=g.nextSibling,m=h.nextSibling;return ce(f,D(Ys,{title:"Select Asset",onBack:()=>t(sl.FORM)})),p.$$focusout=()=>c(!1),p.$$focusin=()=>c(!0),p.$$input=y=>s(y.currentTarget.value),ce(m,D(Lt,{get each(){return o()},children:({icon:y,id:v,symbol:b,amount:_,value:x,price:E,priceChange:S,isVerified:C})=>(()=>{var k=GMe(),$=k.firstChild,J=$.firstChild,j=J.firstChild,L=J.nextSibling,w=L.firstChild,R=w.nextSibling,N=$.nextSibling,Y=N.nextSibling,z=Y.firstChild,G=z.nextSibling;return k.$$click=()=>l(v),ce(k,D(Rn,{src:y}),$),ce(j,()=>b||v.slice(0,4)),ce(J,D(We,{when:C,get children(){return WMe()}}),null),ce(w,D(vn,{value:E,prefix:"$"})),R.classList.toggle("hidden",!S),ce(R,D(fm,{value:S})),ce(z,D(vn,{value:x,prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),ce(G,D(vn,{value:_,showZero:!0})),ht(()=>k.classList.toggle("bg-zinc-900/75",r().id===v)),k})()}),null),ce(m,D(We,{get when(){return n.data},get children(){return KMe()}}),null),ht(y=>{var v=!a(),b=!!a();return v!==y.e&&d.classList.toggle("ring-zinc-800",y.e=v),b!==y.t&&d.classList.toggle("ring-primary-200",y.t=b),y},{e:void 0,t:void 0}),ht(()=>p.value=i()),u})()};Yt(["input","focusin","focusout","click"]);var JMe=ye('<div class="bg-yellow-900/15 text-yellow-400 ring-1 ring-yellow-800 py-3 px-4 rounded-xl space-y-2 text-sm"><div><button class="font-medium underline cursor-pointer underline-offset-2 hover:text-yellow-300 transition-100">Expand View</button> or use the <button class="font-medium underline cursor-pointer underline-offset-2 hover:text-yellow-300 transition-100">Side Panel Mode</button> to sign transactions with your hardware wallet.');const n6=()=>{const{selectedAccount:r}=Jr();return{isVisible:ke(()=>xf===oc.POPUP&&["ledger","keystone","trezor"].includes(r()?.type))}},uX=()=>{const{isVisible:r}=n6(),{useStandaloneMode:e,useSidepanelMode:t}=Jj();return D(We,{get when(){return r()},get children(){var n=JMe(),i=n.firstChild,s=i.firstChild,o=s.nextSibling,a=o.nextSibling;return s.$$click=()=>e(),a.$$click=()=>t(),n}})};Yt(["click"]);var QMe=ye('<button class="font-medium underline cursor-pointer underline-offset-2 hover:text-yellow-300 transition-100">Jupiter Lend'),ZMe=ye('<div class="bg-yellow-900/15 text-yellow-400 ring-1 ring-yellow-800 py-3 px-4 rounded-xl space-y-2 text-sm">');const i6=r=>({isVisible:ke(()=>r().some(t=>t!=null&&t.tags?.includes("jup-lend-earn")))}),fX=r=>{const{isVisible:e}=i6(()=>r.tokens);return D(We,{get when(){return e()},get children(){var t=ZMe();return ce(t,D(yr,{get children(){return[D(Ne,{get when(){return r.type==="send"},children:"You will not be able to withdraw your Jupiter Lend position if you transfer this token away."}),D(Ne,{get when(){return r.type==="swap"},get children(){return["Use"," ",(()=>{var n=QMe();return n.$$click=()=>window.open(Sa.LEND,"_blank"),n})()," ","to open or close your positions for more optimal prices."]}})]}})),t}})};Yt(["click"]);var eBe=ye("<input>");const tBe=/^\d$/,hX=r=>{const[e,t]=Mt(r,["class","classList","input","setInput","onValue"]),n=UG(),i=()=>new RegExp(`^\\d*[\\${n}]?\\d*$`),s=ke(()=>e.input);return it(kn(s,o=>{if(!e.onValue)return;const a=",",c=o.replace(new RegExp(`\\${a}`,"g"),"").replace(n,"."),l=c!==""&&i().test(c);e.onValue(l?c:null)},{defer:!0})),(()=>{var o=eBe();return bn(o,st(t,{get value(){return s()},get class(){return Xr("focus:outline-none",e.class,e.classList)},type:"text",inputmode:"decimal",autocomplete:"off",spellcheck:!1,onBeforeInput:a=>{const c=a.data?.trim(),l=a.target.value.trim();if(c==null||c.length===0||a.inputType.startsWith("delete")||c.length===1&&(tBe.test(c)||c===n&&!l.includes(n)))return;const u=a.target.selectionStart??0,f=a.target.selectionEnd??0,h=l.substring(0,u)+c+l.substring(f),d=",",g=h.replace(new RegExp(`\\${d}`,"g"),"").replace(n,".");i().test(g)||a.preventDefault()},onInput:a=>{e.setInput(a.target.value.trim())}}),!1,!1),o})()};var rBe=ye('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">This wallet is read-only and cannot perform any actions.'),nBe=ye('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">You are sending to yourself. This will incur network fees, but may not change your asset balances.'),iBe=ye('<div class="flex-1 p-4 space-y-4 flex flex-col"><div class="bg-zinc-900 p-4 rounded-xl space-y-3"><div class="flex items-center justify-between"><div class=text-zinc-400>Asset</div><div class="flex items-center text-zinc-400"><div class="i-tabler:wallet size-4.5 mr-0.5"></div><div class></div><button class="ml-1 bg-zinc-800 rounded p-1.5 leading-none font-semibold text-xs text-zinc-400 cursor-pointer hover:text-zinc-100 transition-100">Half</button><button class="ml-1 bg-zinc-800 rounded p-1.5 leading-none font-semibold text-xs text-zinc-400 cursor-pointer hover:text-zinc-100 transition-100">Max</button></div></div><div class="flex items-center gap-1"><button class="flex flex-none p-1.5 items-center bg-zinc-800 rounded-full ring-1 ring-zinc-800 hover:ring-primary-200 transition-100 cursor-pointer group"><div class="font-semibold ml-2 max-w-24 truncate"></div><div class="i-tabler:chevron-down size-5 mx-1 text-zinc-500 group-hover:text-zinc-300 transition-100"></div></button><div class=flex-1><div class="text-zinc-500 text-sm leading-3 text-right"></div></div></div></div><div class=w-full><label class=text-zinc-400>Recipient</label><textarea class="w-full outline-none rounded-xl transition-100 bg-zinc-900 px-4 py-3 resize-none ring-1 ring-zinc-800 focus:ring-primary-200"placeholder="Enter recipient address"rows=2></textarea></div><div class=flex-1>');const sBe=()=>{const{setView:r,selectedAsset:e,amount:t,setAmount:n,recipient:i,setRecipient:s}=Ww(),{selectedAccount:o}=Jr(),{fromChainAmount:a}=Ic(),c=bl(),[l,u]=$e(t()),{isVisible:f}=n6(),{isVisible:h}=i6(()=>[e()]),d=ke(()=>{try{return!!(o()?.type!=="readonly"&&i()&&jA(i())&&t()&&Number(t())<=e().amount)}catch{return!1}});function g(m){const{rawAmount:y,decimals:v}=e(),b=m==="half"?(BigInt(y)/2n).toString():y.toString();b.startsWith("-")?u(""):u(a(b,v))}function p(){!jA(i())||Number(t())<=0||r(sl.REVIEW)}return(()=>{var m=iBe(),y=m.firstChild,v=y.firstChild,b=v.firstChild,_=b.nextSibling,x=_.firstChild,E=x.nextSibling,S=E.nextSibling,C=S.nextSibling,k=v.nextSibling,$=k.firstChild,J=$.firstChild,j=$.nextSibling,L=j.firstChild,w=y.nextSibling,R=w.firstChild,N=R.nextSibling;return w.nextSibling,ce(m,D(Ys,{title:"Send Asset"}),y),ce(E,D(vn,{get value(){return e().amount},override:{minimumFractionDigits:2,maximumFractionDigits:6},showZero:!0})),S.$$click=()=>g("half"),C.$$click=()=>g("max"),$.$$click=()=>r(sl.ASSET),ce($,D(Rn,{get src(){return e().icon},class:"size-7.5"}),J),ce(J,()=>e().symbol||e().id.slice(0,4)),ce(j,D(hX,{class:"text-right text-2xl font-semibold outline-none w-full",placeholder:"0.00",get input(){return l()},setInput:u,onValue:Y=>n(Y??"")}),L),ce(L,D(vn,{get value(){return e().price*(Number(l())||0)},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),N.$$input=Y=>s(Y.currentTarget.value),ce(m,D(yr,{get children(){return[D(Ne,{get when(){return o()?.type==="readonly"},get children(){return rBe()}}),D(Ne,{get when(){return f()},get children(){return D(uX,{})}}),D(Ne,{get when(){return o()?.address===i()},get children(){return nBe()}}),D(Ne,{get when(){return h()},get children(){return D(fX,{get tokens(){return[e()]},type:"send"})}})]}}),null),ce(m,D(fs,{onCancelClick:()=>c(),onApproveClick:()=>p(),approveTitle:"Review",get isApproveDisabled(){return!d()}}),null),ht(()=>N.value=i()),m})()};Yt(["click","input"]);var oBe=ye('<div class="flex items-center gap-1.5"><div> '),aBe=ye('<div class="h-6 w-24 animate-pulse rounded bg-zinc-800">'),cBe=ye('<div class="flex items-center gap-1.5"><div class="i-tabler:gas-station size-4.5 text-zinc-400">'),lBe=ye('<div class="size-16 bg-primary-200/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:loader-2 animate-spin text-primary-200">'),uBe=ye('<div class="size-16 bg-green-400/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:check text-green-400">'),fBe=ye('<div class="size-16 bg-red-400/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:x text-red-400">'),hBe=ye('<div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400>Transaction</div><button class="font-medium flex items-center text-primary-200 cursor-pointer"><div class="i-tabler:external-link size-4.5 mr-1">'),dBe=ye('<div class="flex-1 p-4 flex flex-col"><div class="flex flex-col items-center justify-center mb-5"><div class=my-6></div><div class="text-2xl font-semibold"></div><div class="text-zinc-400 font-medium mt-2"><span class=text-zinc-50> </span> to </div></div><div class="divide-y divide-zinc-800 rounded-xl bg-zinc-900">'),pBe=ye('<div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400></div><div class=font-medium>');const gBe=()=>{const{setView:r,selectedAsset:e,recipient:t,amount:n}=Ww(),{selectedAccount:i}=Jr(),s=ra(),o=ke(()=>i()?.address),a=Co(),[c,l]=$e("idle"),[u,f]=$e(null),h=ke(()=>e().id),{removeInsignificantZeros:d}=Ic(),[g,p]=$e(null);async function m(){const b=o();if(!b)return;const _=await ss.getTransferTx({sender:b,recipient:t(),mint:h(),amount:n()});"error"in _||!_.transaction?l("simulation_error"):l("simulation_success"),p(_)}Dr(m),tl(()=>{c()==="simulation_success"&&m()},1e4,setInterval);const y=ke(()=>{const b=g(),_=b!=null&&"networkFeeUsd"in b?b.networkFeeUsd:null;return[{title:"Amount",value:(()=>{var x=oBe(),E=x.firstChild,S=E.firstChild;return ce(x,D(Rn,{get src(){return e().icon},class:"size-4.5 ring-0"}),E),ce(E,()=>d(n()),S),ce(E,()=>e().symbol,null),x})()},{title:"Sender",value:D(Yo,{get address(){return o()}})},{title:"Recipient",value:D(Yo,{get address(){return t()}})},{title:"Network Fee",value:_==null?aBe():(()=>{var x=cBe();return x.firstChild,ce(x,D(vn,{value:_,prefix:"$"}),null),x})()}]});async function v(){const b=g();if(!b||!("transaction"in b)||!b.transaction)return;l("tx_sending");const{transaction:_,requestId:x}=b,{signedTransaction:E}=i()?.type==="privy"?{signedTransaction:await Wg.signTransaction(_)}:await _r.signTransaction({origin:window.location.origin,signerAddress:o(),transaction:_,skipApproval:!0}),{code:S,signature:C}=await ss.postExecuteTransfer({requestId:x,signedTransaction:E});s.refetch(),ai(()=>{l(S===0?"tx_success":"tx_error"),f(C)})}return(()=>{var b=dBe(),_=b.firstChild,x=_.firstChild,E=x.nextSibling,S=E.nextSibling,C=S.firstChild,k=C.firstChild;C.nextSibling;var $=_.nextSibling;return ce(x,D(yr,{get children(){return[D(Ne,{get when(){return c()==="tx_sending"},get children(){return lBe()}}),D(Ne,{get when(){return c()==="tx_success"},get children(){return uBe()}}),D(Ne,{get when(){return c()==="simulation_error"||c()==="tx_error"},get children(){return fBe()}}),D(Ne,{when:!0,get children(){return D(Rn,{hd:!0,class:"size-16",get src(){return e().icon}})}})]}})),ce(E,D(yr,{get children(){return[D(Ne,{get when(){return c()==="tx_sending"},children:"Sending..."}),D(Ne,{get when(){return c()==="tx_success"},children:"Successfully Sent"}),D(Ne,{get when(){return c()==="simulation_error"||c()==="tx_error"},children:"Failed to Send"}),D(Ne,{when:!0,children:"Confirm Send"})]}})),ce(C,()=>d(n()),k),ce(C,()=>e().symbol,null),ce(S,D(Yo,{get address(){return t()},class:"text-zinc-50"}),null),ce($,D(Lt,{get each(){return y()},children:({title:J,value:j})=>(()=>{var L=pBe(),w=L.firstChild,R=w.nextSibling;return ce(w,J),ce(R,j),L})()}),null),ce($,D(We,{get when(){return u()},get children(){var J=hBe(),j=J.firstChild,L=j.nextSibling;return L.firstChild,L.$$click=()=>window.open(`https://solscan.io/tx/${u()}`,"_blank"),ce(L,D(Yo,{get address(){return u()}}),null),J}}),null),ce(b,D(fs,{get onCancelClick(){return c()==="tx_success"?()=>a(vt.HOME):()=>r(sl.FORM)},onApproveClick:v,get cancelTitle(){return c()==="tx_success"?"Close":"Back"},approveTitle:"Send",get isApproveDisabled(){return c()!=="simulation_success"}}),null),b})()};Yt(["click"]);const mBe=()=>D(jMe,{get children(){return D(yBe,{})}}),yBe=()=>{const{view:r}=Ww();return D(yr,{get children(){return[D(Ne,{get when(){return r()===sl.FORM},get children(){return D(sBe,{})}}),D(Ne,{get when(){return r()===sl.ASSET},get children(){return D(XMe,{})}}),D(Ne,{get when(){return r()===sl.REVIEW},get children(){return D(gBe,{})}})]}})};var vBe=ye('<div class="p-3 space-y-3">');const bBe=()=>(()=>{var r=vBe();return ce(r,D(Ys,{title:"Auto Approve"}),null),ce(r,D(lX,{}),null),r})();var wBe=ye('<div class="p-3 space-y-3"><div class=space-y-3>'),xBe=ye('<button class="flex items-center justify-between py-4 px-5 gap-4 w-full rounded-xl transition-100 bg-zinc-900 hover:bg-zinc-800/75 hover:text-zinc-50 group cursor-pointer"><div></div><div class="size-6 rounded-full bg-primary-200/15 flex items-center justify-center transition-100"><div class="size-4 i-tabler:check text-primary-200">');const _Be=[{label:"1 minute",value:1},{label:"10 minutes",value:10},{label:"1 hour",value:60},{label:"8 hours",value:480},{label:"1 day",value:1440},{label:"1 week",value:10080},{label:"Never",value:-1}],SBe=()=>{const{settings:r,updateUserSettings:e}=Pa();return(()=>{var t=wBe(),n=t.firstChild;return ce(t,D(Ys,{title:"Auto Lock Time"}),n),ce(n,D(Lt,{each:_Be,children:({label:i,value:s})=>(()=>{var o=xBe(),a=o.firstChild,c=a.nextSibling;return o.$$click=()=>e({type:"setLockDelayMinutes",delay:s}),ce(a,i),ht(l=>{var u={"ring-1 ring-primary-200 text-zinc-50":s===r.lockDelayMinutes,"text-zinc-400":s!==r.lockDelayMinutes},f=s!==r.lockDelayMinutes;return l.e=Gr(o,u,l.e),f!==l.t&&c.classList.toggle("opacity-0",l.t=f),l},{e:void 0,t:void 0}),o})()})),t})()};Yt(["click"]);var EBe=ye('<div class="p-3 space-y-3"><form class=space-y-3><div class="flex flex-col"><label class=text-zinc-400 for=current-input>Current Password</label><input class="ring-1 ring-zinc-800 w-full outline-none rounded-xl p-3 bg-zinc-900 transition-100 focus:ring-primary-200"placeholder="Enter your current password"name=current-input minlength=6 type=password></div><div class="flex flex-col"><label class=text-zinc-400 for=new-input>New Password</label><input class="ring-1 ring-zinc-800 w-full outline-none rounded-xl p-3 bg-zinc-900 transition-100 focus:ring-primary-200"placeholder="Enter your new password"name=new-input minlength=6 type=password></div><div class="flex flex-col"><label class=text-zinc-400 for=confirm-input>Confirm New Password</label><input class="ring-1 ring-zinc-800 w-full outline-none rounded-xl p-3 bg-zinc-900 transition-100 focus:ring-primary-200"placeholder="Confirm your new password"name=confirm-input minlength=6 type=password>');const ABe="current-input",IBe="new-input",CBe="confirm-input",TBe=()=>{const r=Ws(),e=bl();async function t(n){n.preventDefault();const i=new FormData(n.target),s=i.get(ABe)?.toString().trim()||"",o=i.get(IBe)?.toString().trim()||"",a=i.get(CBe)?.toString().trim()||"";if(!(s.length<6||o.length<6||a.length<6)){if(o!==a){r.alert({title:"Failed to Update Password",content:"New passwords do not match."});return}try{await _r.updatePassword({oldPassword:s,newPassword:o}),r.alert({title:"Password Updated",content:"Your password has been updated successfully."}),e()}catch{r.alert({title:"Failed to Update Password",content:"Current password entered is incorrect."})}}}return(()=>{var n=EBe(),i=n.firstChild,s=i.firstChild,o=s.firstChild;o.nextSibling;var a=s.nextSibling,c=a.firstChild;c.nextSibling;var l=a.nextSibling,u=l.firstChild;return u.nextSibling,ce(n,D(Ys,{title:"Change Password"}),i),i.addEventListener("submit",f=>t(f)),ce(i,D(fs,{onApproveClick:()=>{},onCancelClick:e,approveTitle:"Update"}),null),n})()};var RBe=ye('<div class="p-3 flex flex-col items-center"><div class="size-20 rounded-full bg-linear-to-b from-zinc-800 to-zinc-950 my-6 flex items-center justify-center"><div class="size-12 rounded-full bg-zinc-700 flex items-center justify-center"><div class="i-tabler:layers-linked size-7 text-zinc-500"></div></div></div><div class="font-medium mb-2">No connected apps yet</div><div class="text-sm text-zinc-400">Revoke access to connected apps here'),kBe=ye('<div class="p-3 space-y-3"><div class=space-y-3>'),PBe=ye('<div class="flex items-center justify-between py-4 px-5 gap-4 text-zinc-300 w-full rounded-xl transition-100 bg-zinc-900 group"><div class="font-medium truncate"></div><div class=flex-1></div><button class="p-2 text-zinc-500 hover:text-red-500 hover:bg-red-300/10 rounded-full transition-100 cursor-pointer m--2"><div class="i-tabler:x size-5">');const OBe=()=>{const r=qs(()=>({queryKey:["apps"],queryFn:()=>_r.getConnectedApps({})}));async function e(t){await _r.removeConnectedApps({domains:t==="__ALL__"?"__ALL__":[t]}),await r.refetch()}return(()=>{var t=kBe(),n=t.firstChild;return ce(t,D(Ys,{title:"Connected Apps"}),n),ce(n,D(We,{get when(){return r?.data?.domains.length===0},get children(){return RBe()}}),null),ce(n,D(Lt,{get each(){return r.data?.domains??[]},children:i=>(()=>{var s=PBe(),o=s.firstChild,a=o.nextSibling,c=a.nextSibling;return ce(s,D(sV,{class:"size-7 my--1 flex-none",domain:i}),o),ce(o,()=>new URL(i).host),c.$$click=()=>e(i),s})()}),null),t})()};Yt(["click"]);var DBe=ye('<div class="p-3 space-y-3">'),$Be=ye('<button class="flex items-center py-4 px-5 gap-4 text-zinc-300 w-full rounded-xl transition-100 bg-zinc-900 hover:bg-zinc-800/75 hover:text-zinc-50 group cursor-pointer"><div></div><div></div><div class=flex-1></div><div class="i-tabler:chevron-right size-5 group-hover:text-zinc-50 text-zinc-600 transition-100">');const MBe=()=>{const r=Co(),e=[{title:"Change Password",icon:"i-tabler:password-user",onClick:()=>r(vt.SETTINGS_CHANGE_PASSWORD)},{title:"Auto Approve",icon:"i-tabler:checkup-list",onClick:()=>r(vt.SETTINGS_AUTO_APPROVE)},{title:"Auto Lock Time",icon:"i-tabler:lock-cog",onClick:()=>r(vt.SETTINGS_AUTO_LOCK)},{title:"Connected Apps",icon:"i-tabler:layers-linked",onClick:()=>r(vt.SETTINGS_CONNECTED_APPS)},{title:"Feedback",icon:"i-tabler:pencil-heart",onClick:()=>window.open(Sa.FEEDBACK,"_blank")}];return(()=>{var t=DBe();return ce(t,D(Ys,{title:"Manage Settings"}),null),ce(t,D(Lt,{each:e,children:({title:n,icon:i,onClick:s})=>(()=>{var o=$Be(),a=o.firstChild,c=a.nextSibling;return zs(o,"click",s,!0),ce(c,n),ht(()=>ui(a,Xr(i,"size-5"))),o})()}),null),t})()};Yt(["click"]);const BBe=()=>D(q7,{isVisible:!0});class s6{static#e={"x-client-platform":"jupiter.extension"};static#t="https://ultra-api.jup.ag";static async getOrder(e,t){return Bn.get(`${this.#t}/order`,{searchParams:e,throwHttpErrors:!1,signal:t,headers:this.#e}).json()}static async getRouters(){return Bn.get(`${this.#t}/order/routers`).json()}static async postExecute(e){return Bn.post(`${this.#t}/execute`,{json:e,headers:this.#e}).json()}static async getShield(e){return Bn.get(`${this.#t}/shield`,{searchParams:{mints:e.join(","),isJupiter:!0}}).json()}}const Di={FORM:"form",SELL_ASSET:"sell_asset",BUY_ASSET:"buy_asset",REVIEW:"review"},NBe=vf.USDC,LBe=vf.SOL,[FBe,UBe]=Lf(()=>{const[r,e]=$e(Di.FORM),[t,n]=Uf(),i=ra(),{toChainAmount:s}=Ic(),{selectedAccount:o}=Jr(),[a,c]=$e(null),l=J=>{c(J),n({sell:J.id},{replace:!0})},u=ke(()=>{const J=a()?.id;return J==null?null:i.data?.tokens.find(L=>L.id===J)?.amount??0}),[f,h]=$e(null),d=J=>{h(J),n({buy:J.id},{replace:!0})},g=ke(()=>{const J=f()?.id;return J==null?null:i.data?.tokens.find(L=>L.id===J)?.amount??0}),p=ke(()=>t.amount?.trim()??""),m=J=>{n({amount:J},{replace:!0})},[y,v]=$e(null),[b,_]=$e(!1);let x=new AbortController;const E=hY(async()=>{const J=p(),j=a()?.id,L=a()?.decimals,w=f()?.id;if(!J||!j||!L||!w){x.abort(),v(null);return}x.abort(),x=new AbortController;const R=await s6.getOrder({inputMint:j,outputMint:w,amount:s(J,L),taker:o()?.address},x.signal);p()===J&&ai(()=>{_(!1),v(R)})},369),S=()=>{if(!p()){x.abort(),v(null),_(!1);return}_(!0),E()},[C,k]=$e(!0),$=()=>{k(!1),x.abort()};return it(kn([p,a,f],()=>S())),it(kn(r,J=>{J===Di.FORM&&(k(!0),S())})),Uee(E,()=>C()&&1500,setInterval),Dr(async()=>{const J=t.sell??NBe.id,j=t.buy??LBe.id,L=i.data?.tokens.find(R=>R.id===J)??null,w=i.data?.tokens.find(R=>R.id===j)??null;if(c(L),h(w),!L||!w){const N=(await um.search({query:[J,j].sort().join(",")})).map(G=>({id:G.id,symbol:G.symbol,icon:G.icon,decimals:G.decimals,price:G.usdPrice??0,priceChange:G.stats24h?.priceChange??0,isVerified:G.isVerified,tags:G.tags?.includes("jup-lend-earn")?["jup-lend-earn"]:void 0})),Y=N.find(G=>G.id===J)??null,z=N.find(G=>G.id===j)??null;c(Y),h(z)}}),{view:r,setView:e,sellAsset:a,setSellAsset:l,sellBalance:u,buyAsset:f,setBuyAsset:d,buyBalance:g,amount:p,setAmount:m,quote:y,isQuoteLoading:b,disableQuoteRefresh:$}}),pm=()=>{const r=UBe();if(!r)throw new Error("useSwap must be used within a SwapProvider");return r};var zBe=ye('<div class="text-center text-zinc-600 border-t border-zinc-800 p-3">No more tokens'),qBe=ye('<div><div class="px-4 pt-4"></div><div class=p-4><div class="flex items-center bg-zinc-900 rounded-xl ring-1 transition-100"><div class="flex items-center justify-center pl-3.5 pr-2.5"><div class="i-tabler:search size-5.5 text-zinc-500"></div></div><input class="w-full outline-none py-3 pr-3"placeholder="Search token name / symbol / address"type=search id=asset-input autocomplete=off autocorrect=off></div></div><div>'),jBe=ye('<div class="size-4 i-tabler:rosette-discount-check text-primary-200">'),VBe=ye('<button class="w-full text-left cursor-pointer flex items-center gap-4 px-4 h-15 hover:bg-zinc-900"><div class=space-y-0.5><div class="flex items-center gap-1"><div class="font-semibold leading-none"></div></div><div class="flex gap-1"><div class="text-sm leading-none text-zinc-400"></div><div class="text-sm leading-none text-zinc-400"></div></div></div><div class=flex-1>'),KBe=ye('<div class="text-right space-y-0.5"><div class="font-medium leading-none"></div><div class="text-sm leading-none text-zinc-400">'),HBe=ye('<div class="flex items-center gap-4 px-4 h-15"><div class="rounded-full size-8 bg-zinc-900 animate-pulse ring-1 ring-zinc-800"></div><div class="flex flex-col items-start gap-1"><div class="h-4 w-12 bg-zinc-900 animate-pulse rounded"></div><div class="h-3 w-24 bg-zinc-900 animate-pulse rounded"></div></div><div class=flex-1></div><div class="flex flex-col items-end gap-1"><div class="h-4 w-20 bg-zinc-900 animate-pulse rounded"></div><div class="h-3 w-12 bg-zinc-900 animate-pulse rounded">');const WBe="asset-input",iU=15,GBe=()=>{const{view:r,setView:e,sellAsset:t,setSellAsset:n,buyAsset:i,setBuyAsset:s}=pm(),o=ra(),[a,c]=$e(""),[l,u]=$e(!1);function f(b){const _=r()===Di.SELL_ASSET?b.id===i()?.id:b.id===t()?.id;ai(()=>{if(_){const x=i(),E=t();x&&E&&(n(x),s(E))}else(r()===Di.SELL_ASSET?n:s)(b);e(Di.FORM)})}const h=ke(()=>{const b={};for(const _ of o.data?.tokens??[])b[_.id]=_.amount;return b}),[d,g]=$e(""),p=hY(g,369);it(()=>{p(a())});const m=qs(()=>({queryKey:["asset_search",d()],queryFn:async()=>{const b=d().trim();return(await um.search({query:b,limit:iU.toString()})).map(x=>({id:x.id,symbol:x.symbol,icon:x.icon,decimals:x.decimals,price:x.usdPrice??0,priceChange:x.stats24h?.priceChange??0,isVerified:x.isVerified,tags:x.tags?.includes("jup-lend-earn")?["jup-lend-earn"]:void 0}))}})),y=ke(()=>{if(r()===Di.BUY_ASSET)return m.data??[];const b=d().trim().toLowerCase(),_=o.data?.tokens.filter(x=>x.symbol.toLowerCase().includes(b)||x.id.toLowerCase().includes(b)).map(x=>({id:x.id,symbol:x.symbol,icon:x.icon,decimals:x.decimals,price:x.price,priceChange:x.priceChange,isVerified:x.isVerified,tags:x.tags}))??[];for(const x of m.data??[]){if(_.length>=iU)break;_.some(E=>E.id===x.id)||_.push(x)}return _}),v=ke(()=>m.isLoading||d()!==a());return Dr(()=>document.getElementById(WBe)?.focus()),(()=>{var b=qBe(),_=b.firstChild,x=_.nextSibling,E=x.firstChild,S=E.firstChild,C=S.nextSibling,k=x.nextSibling;return ce(_,D(Ys,{get title(){return r()===Di.BUY_ASSET?"Select Buy Asset":"Select Sell Asset"},onBack:()=>e(Di.FORM)})),C.$$focusout=()=>u(!1),C.$$focusin=()=>u(!0),C.$$input=$=>c($.currentTarget.value),ce(k,D(We,{get when(){return!v()},get children(){return D(Lt,{get each(){return y()},children:({icon:$,id:J,decimals:j,symbol:L,price:w,priceChange:R,isVerified:N,tags:Y})=>(()=>{var z=VBe(),G=z.firstChild,te=G.firstChild,X=te.firstChild,T=te.nextSibling,A=T.firstChild,O=A.nextSibling;return G.nextSibling,z.$$click=()=>f({icon:$,id:J,decimals:j,symbol:L,price:w,priceChange:R,isVerified:N,tags:Y}),ce(z,D(Rn,{src:$}),G),ce(X,()=>L||J.slice(0,4)),ce(te,D(We,{when:N,get children(){return jBe()}}),null),ce(A,D(pi,{value:w,prefix:"$",style:"long"})),O.classList.toggle("hidden",!R),ce(O,D(fm,{value:R})),ce(z,D(We,{get when(){return h()[J]},children:I=>(()=>{var U=KBe(),Z=U.firstChild,oe=Z.nextSibling;return ce(Z,D(pi,{get value(){return I()*w},prefix:"$",style:"long"})),ce(oe,D(vn,{get value(){return I()},showZero:!0})),U})()}),null),ht(()=>z.classList.toggle("bg-zinc-900/75",r()===Di.BUY_ASSET?i()?.id===J:t()?.id===J)),z})()})}}),null),ce(k,D(We,{get when(){return v()},get children(){return D(Lt,{get each(){return new Array(20).fill(void 0)},children:()=>HBe()})}}),null),ce(k,D(We,{get when(){return!v()&&o.data},get children(){return zBe()}}),null),ht($=>{var J=!l(),j=!!l();return J!==$.e&&E.classList.toggle("ring-zinc-800",$.e=J),j!==$.t&&E.classList.toggle("ring-primary-200",$.t=j),$},{e:void 0,t:void 0}),ht(()=>C.value=a()),b})()};Yt(["input","focusin","focusout","click"]);var YBe=ye('<div class="i-tabler:shield-exclamation size-4">'),XBe=ye('<div class="text-xs font-medium underline underline-offset-4.5 underline-dashed">'),JBe=ye('<h1 class="font-semibold text-red-400"> JupShield '),QBe=ye('<div class="p-3 bg-red-700/15 w-full rounded-md space-y-3">'),ZBe=ye('<div class="px-3 w-full space-y-3">'),sU=ye('<div class="text-xs leading-0 bg-zinc-500/30 text-zinc-100/70 rounded px-1.5 pt-2.25 pb-1.75 font-medium">'),eNe=ye('<div class="flex gap-2"><div class="i-tabler:info-circle size-4 text-red-400 flex-none"></div><div><div class="flex items-center gap-1"><div class="text-red-400 font-medium leading-4"></div></div><div class="text-red-200 leading-4 mt-0.5">.'),tNe=ye('<div class="flex gap-2"><div class="i-tabler:info-circle size-4 flex-none"></div><div><div class="flex items-center gap-1"><div class="font-medium leading-4"></div></div><div class="text-zinc-400 leading-4 mt-0.5">.');function oU(r){return r.toLowerCase().split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}const aU=r=>{const e=qs(()=>({queryKey:["ultra-shield",r.asset?.id],queryFn:async()=>{const a=r.asset?.id;if(!a)return[];const{warnings:c}=await s6.getShield([a]);return c[a]??[]},staleTime:6e4})),t=ke(()=>e.data?.length===1?"1 Warning":`${e.data?.length} Warnings`),[n,i]=$e(!1),s=ke(()=>e.data?.filter(a=>a.severity==="critical"||a.severity==="warning")),o=ke(()=>e.data?.filter(a=>a.severity==="info"));return D(We,{get when(){return e.data?.length},get children(){return D(Wc,{openDelay:0,closeDelay:0,get open(){return n()},onOpenChange:i,get children(){return[D(Wc.Trigger,{class:"text-red-400 flex items-start gap-1 mt-1 cursor-pointer",onMouseDown:()=>requestAnimationFrame(()=>i(!0)),onMouseUp:()=>requestAnimationFrame(()=>i(!0)),get children(){return[YBe(),(()=>{var a=XBe();return ce(a,t),a})()]}}),D(Wc.Portal,{get children(){return D(Wc.Content,{class:"bg-zinc-900 ring-1 ring-zinc-700 rounded-md text-sm w-95vw max-w-sm my-2",get children(){return D(Hd,{class:"space-y-3 max-h-50vh p-3",gradientClass:"rounded-md",get children(){return[(()=>{var a=JBe(),c=a.firstChild;return ce(a,()=>t().split(" ")[0],c),ce(a,()=>t().split(" ")[1],null),a})(),(()=>{var a=QBe();return ce(a,D(Lt,{get each(){return s()},children:({type:c,message:l,source:u})=>(()=>{var f=eNe(),h=f.firstChild,d=h.nextSibling,g=d.firstChild,p=g.firstChild,m=g.nextSibling,y=m.firstChild;return ce(p,()=>oU(c)),ce(g,D(We,{when:u,get children(){var v=sU();return ce(v,u),v}}),null),ce(m,l,y),f})()})),ht(()=>a.classList.toggle("hidden",!s()?.length)),a})(),D(We,{get when(){return(o()?.length??0)>0},get children(){var a=ZBe();return ce(a,D(Lt,{get each(){return o()},children:({type:c,message:l,source:u})=>(()=>{var f=tNe(),h=f.firstChild,d=h.nextSibling,g=d.firstChild,p=g.firstChild,m=g.nextSibling,y=m.firstChild;return ce(p,()=>oU(c)),ce(g,D(We,{when:u,get children(){var v=sU();return ce(v,u),v}}),null),ce(m,l,y),f})()})),a}})]}})}})}})]}})}})};var rNe=ye("<div> "),nNe=ye('<div class="h-5 w-32 bg-zinc-800 animate-pulse rounded">');const dX=r=>{const{buyAsset:e,quote:t}=pm(),{fromChainAmount:n}=Ic(),i=ke(()=>{const s=e()?.decimals,o=t()?.otherAmountThreshold;return!s||!o?us.MINUS:n(o,s)});return D(We,{get when(){return!r.isLoading},get fallback(){return nNe()},get children(){return D(ya,{class:"flex items-center gap-1.5",get children(){return[D(Rn,{get src(){return e()?.icon},class:"size-4.5 ring-0"}),(()=>{var s=rNe(),o=s.firstChild;return ce(s,i,o),ce(s,()=>e()?.symbol||e()?.id.slice(0,4),null),s})()]}})}})};var iNe=ye('<div class="h-5 w-24 bg-zinc-800 animate-pulse rounded">'),sNe=ye('<div class="flex items-center gap-1.5 text-primary-200 font-medium animate-duration-100"><div class="i-tabler:gas-station-off scale-110"></div><div>Gasless'),oNe=ye("<span>"),aNe=ye('<div class="i-tabler:gas-station scale-110 text-zinc-400">');const ST=r=>{const e=ra(),t=ke(()=>e.data?.tokens.find(i=>i.id===vf.SOL.id)?.price||200),n=ke(()=>{if(!r.quote||!r.quote.taker)return;if(r.quote.gasless)return 0;let i=0;return r.quote.prioritizationFeePayer===r.quote.taker&&r.quote.prioritizationFeeLamports&&(i+=r.quote.prioritizationFeeLamports),r.quote.rentFeePayer===r.quote.taker&&r.quote.rentFeeLamports&&(i+=r.quote.rentFeeLamports),r.quote.signatureFeePayer===r.quote.taker&&r.quote.signatureFeeLamports&&(i+=r.quote.signatureFeeLamports),i/1e9*t()});return(()=>{var i=oNe();return ce(i,D(yr,{get children(){return[D(Ne,{get when(){return r.isLoading},get children(){return iNe()}}),D(Ne,{get when(){return r.quote?.transaction===""},get children(){return us.DASH}}),D(Ne,{get when(){return n()===0},get children(){return sNe()}}),D(Ne,{get when(){return n()},children:s=>D(ya,{class:"flex items-center gap-1.5",get children(){return[aNe(),D(pi,{style:"compact",get value(){return s()},prefix:"$"})]}})})]}})),ht(()=>ui(i,r.class)),i})()};var cNe=ye("<span>"),lNe=ye('<div class="h-5 w-12 bg-zinc-800 animate-pulse rounded">');const uNe=r=>D(We,{get when(){return!r.isLoading&&typeof r.feeBps=="number"},get fallback(){return lNe()},get children(){var e=cNe();return ce(e,()=>r.feeBps/100+"%"),ht(()=>e.classList.toggle("text-primary-200",r.feeBps===0)),e}}),fNe=r=>{const[e,t]=$e(!1);return D(Wc,{openDelay:0,closeDelay:0,get open(){return e()},onOpenChange:n=>{r.onOpenChange?.(n),t(n)},get children(){return[D(Wc.Trigger,{class:"cursor-pointer",onMouseDown:()=>requestAnimationFrame(()=>t(!0)),onMouseUp:()=>requestAnimationFrame(()=>t(!0)),get children(){return r.trigger}}),D(Wc.Portal,{get children(){return D(Wc.Content,{class:"animate-fade-in animate-duration-100",get children(){return r.content}})}})]}})};var hNe=ye('<div class="h-5 w-12 bg-zinc-800 animate-pulse rounded">'),dNe=ye('<div class="bg-zinc-900 ring-1 ring-zinc-700 rounded-md text-sm max-w-72 py-1.5 px-2.5 mt-1.5">Estimated difference between the input USD value and the output USD value.');const pX=r=>{const[e,t]=$e(!1);return D(We,{get when(){return!r.isLoading},get fallback(){return hNe()},get children(){return D(fNe,{onOpenChange:t,get trigger(){return D(vn,{get class(){return Xr("border-b border-dashed border-zinc-500 transition-100",{"text-zinc-50 border-zinc-50":e()},{"text-red-400":(r.priceImpact??0)<=-5,"text-yellow-400":(r.priceImpact??0)<=-1&&(r.priceImpact??0)>-5},r.class,r.classList)},get value(){return r.priceImpact??0},override:{minimumFractionDigits:2,maximumFractionDigits:2},get prefix(){return(r.priceImpact??0)>0?`${r.prefix??""}+`:`${r.prefix??""}`},get suffix(){return`%${r.suffix??""}`}})},get content(){return dNe()}})}})};var pNe=ye("<button>1 <!> &asymp; <!> ");const gX=r=>{const[e,t]=$e(!1),n=ke(()=>e()?r.buyAsset:r.sellAsset),i=ke(()=>e()?r.sellAsset:r.buyAsset),{fromChainAmount:s}=Ic(),o=ke(()=>!r.quote?.inAmount||!r.quote?.outAmount?null:(Number(s(r.quote.outAmount,r.buyAsset.decimals))/Number(s(r.quote.inAmount,r.sellAsset.decimals)))**(e()?-1:1));return(()=>{var a=pNe(),c=a.firstChild,l=c.nextSibling,u=l.nextSibling,f=u.nextSibling;return f.nextSibling,bn(a,st(r,{onClick:h=>{h.preventDefault(),h.stopPropagation(),t(!e())},get class(){return Xr("hover:text-primary-200 cursor-pointer transition-100",r.class,r.classList)}}),!1,!0),ce(a,()=>n().symbol||n().id.slice(0,4),l),ce(a,D(pi,{get value(){return o()??0},style:"long"}),f),ce(a,()=>i().symbol||i().id.slice(0,4),null),a})()};var gNe=ye('<div class="flex items-center text-zinc-400"><div class="i-tabler:wallet size-4.5 mr-0.5"></div><button class="ml-1 bg-zinc-800 rounded p-1.5 leading-none font-semibold text-xs text-zinc-400 cursor-pointer hover:text-zinc-100 transition-100">Half</button><button class="ml-1 bg-zinc-800 rounded p-1.5 leading-none font-semibold text-xs text-zinc-400 cursor-pointer hover:text-zinc-100 transition-100">Max'),mNe=ye('<div class="flex items-center text-zinc-400"><div class="i-tabler:wallet size-4.5 mr-0.5">'),yNe=ye('<div class="flex-1 truncate h-14 flex flex-col justify-center gap-1"><div class="text-right truncate text-2xl font-semibold outline-none pl-2 cursor-not-allowed transition-100"></div><div class="text-zinc-500 text-sm leading-3 text-right leading-none"> '),vNe=ye('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">This wallet is read-only and cannot perform any actions.'),bNe=ye('<div class="flex-1 p-4 space-y-4 flex flex-col"><div class=space-y-1><div class="bg-zinc-900 p-4 rounded-xl space-y-3"><div class="flex items-center justify-between"><div class=text-zinc-400>Selling</div></div><div class="flex items-center gap-1"><div class="flex flex-col items-start justify-center h-14"><button class="flex flex-none p-1 items-center bg-zinc-800 rounded-full ring-1 ring-zinc-800 hover:ring-primary-200 transition-100 cursor-pointer group"><div class="i-tabler:chevron-down size-5 mx-1 text-zinc-500 group-hover:text-zinc-300 transition-100"></div></button></div><div class="flex-1 overflow-x-auto h-14 flex flex-col justify-center gap-1"><div class="text-zinc-500 text-sm text-right truncate leading-none"></div></div></div></div><div class="flex items-center justify-center"><button class="size-9 rounded-full ring-3 ring-zinc-950 bg-zinc-900 -my-6 flex items-center justify-center text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800 transition-100 cursor-pointer"><div class="i-tabler:arrows-left-right size-5 rotate-90"></div></button></div><div class="bg-zinc-900 p-4 rounded-xl space-y-3"><div class="flex items-center justify-between"><div class=text-zinc-400>Buying</div></div><div class="flex items-center gap-1"><div class="flex flex-col items-start justify-center h-14"><button class="flex flex-none p-1 items-center bg-zinc-800 rounded-full ring-1 ring-zinc-800 hover:ring-primary-200 transition-100 cursor-pointer group"><div class="i-tabler:chevron-down size-5 mx-1 text-zinc-500 group-hover:text-zinc-300 transition-100"></div></button></div></div></div></div><div class="rounded-xl bg-zinc-900 group cursor-pointer hover:ring-1 hover:ring-zinc-700 transition-all-100"><div class="py-3 pl-4 pr-3 flex items-center"><div class=flex-1></div><div class="i-tabler:chevron-down size-5 ml-2 text-zinc-400 group-hover:text-zinc-100 transition-100"></div></div></div><div class="flex-1 flex flex-col justify-end">'),wNe=ye('<div class="h-5 w-32 rounded bg-zinc-800 animate-pulse">'),cU=ye('<div class="size-7 rounded-full bg-zinc-700 animate-pulse">'),lU=ye('<div class="ml-2 h-5 w-12 rounded bg-zinc-700 animate-pulse">'),uU=ye('<div class="font-semibold ml-2 max-w-24 truncate">'),xNe=ye('<div class="h-5 w-20 rounded bg-zinc-800 animate-pulse">'),_Ne=ye('<div class="h-14 flex-1 flex flex-col items-end justify-center gap-2"><div class="h-6 w-36 rounded bg-zinc-800 animate-pulse"></div><div class="h-4 w-26 rounded bg-zinc-800 animate-pulse">'),SNe=ye('<div class="bg-red-900/15 text-red-400 ring-1 ring-red-800 py-3 px-4 rounded-xl space-y-2 text-sm">'),ENe=ye('<div class="h-4 w-32 rounded bg-zinc-800 animate-pulse">'),ANe=ye('<div class="py-2.5 px-4 border-t border-zinc-800 flex items-center justify-between"><div class=text-zinc-400></div><div class=font-medium>');const INe=()=>{const r=bl(),{setView:e,sellBalance:t,sellAsset:n,setSellAsset:i,amount:s,setAmount:o,buyBalance:a,buyAsset:c,setBuyAsset:l,quote:u,isQuoteLoading:f}=pm(),h=ra(),{selectedAccount:d}=Jr(),[g,p]=$e(s()),{fromChainAmount:m}=Ic(),[y,v]=$e(!1),{isVisible:b}=n6(),{isVisible:_}=i6(()=>[n(),c()]),x=ke(()=>{const k=c()?.decimals,$=u()?.outAmount;return!k||!$?null:m($,k)}),E=ke(()=>d()?.type!=="readonly"&&!b()&&u()!=null&&!u()?.error&&!!u()?.transaction&&!f());function S(k){const $=h.data?.tokens.find(L=>L.id===n()?.id)?.rawAmount,J=n()?.decimals;if(!$||!J)return;const j=k==="half"?(BigInt($)/2n).toString():$.toString();j.startsWith("-")?p(""):p(m(j,J))}function C(){const k=n(),$=c(),J=u();ai(()=>{$&&i($),k&&l(k),f()?p(""):J&&$&&(J.outAmount?p(m(J.outAmount,$.decimals)):p(""))})}return(()=>{var k=bNe(),$=k.firstChild,J=$.firstChild,j=J.firstChild;j.firstChild;var L=j.nextSibling,w=L.firstChild,R=w.firstChild,N=R.firstChild,Y=w.nextSibling,z=Y.firstChild,G=J.nextSibling,te=G.firstChild,X=G.nextSibling,T=X.firstChild;T.firstChild;var A=T.nextSibling,O=A.firstChild,I=O.firstChild,U=I.firstChild,Z=$.nextSibling,oe=Z.firstChild,he=oe.firstChild,re=he.nextSibling,F=Z.nextSibling;return ce(k,D(Ys,{title:"Swap Assets"}),$),ce(j,D(We,{get when(){return h.isFetched},get fallback(){return wNe()},get children(){var H=gNe(),ue=H.firstChild,le=ue.nextSibling,we=le.nextSibling;return ce(H,D(vn,{get value(){return t()??0},override:{minimumFractionDigits:2,maximumFractionDigits:6},showZero:!0}),le),le.$$click=()=>S("half"),we.$$click=()=>S("max"),ht(ie=>{var B=!t(),q=!t();return B!==ie.e&&(le.disabled=ie.e=B),q!==ie.t&&(we.disabled=ie.t=q),ie},{e:void 0,t:void 0}),H}}),null),R.$$click=()=>e(Di.SELL_ASSET),ce(R,D(We,{get when(){return n()},get fallback(){return[cU(),lU()]},children:H=>[D(Rn,{get src(){return H().icon},class:"size-7"}),(()=>{var ue=uU();return ce(ue,()=>H().symbol||H().id.slice(0,4)),ue})()]}),N),ce(w,D(aU,{get asset(){return n()}}),null),ce(Y,D(hX,{class:"pl-2 text-right text-2xl font-semibold outline-none w-full overflow-x-auto",placeholder:"0.00",get input(){return g()},setInput:p,onValue:H=>o(H??"")}),z),ce(z,D(vn,{get value(){return(n()?.price??0)*(Number(g())||0)},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),te.$$click=()=>C(),ce(T,D(We,{get when(){return h.isFetched},get fallback(){return xNe()},get children(){var H=mNe();return H.firstChild,ce(H,D(vn,{get value(){return a()??0},override:{minimumFractionDigits:2,maximumFractionDigits:6},showZero:!0}),null),H}}),null),I.$$click=()=>e(Di.BUY_ASSET),ce(I,D(We,{get when(){return c()},get fallback(){return[cU(),lU()]},children:H=>[D(Rn,{get src(){return H().icon},class:"size-7"}),(()=>{var ue=uU();return ce(ue,()=>H().symbol||H().id.slice(0,4)),ue})()]}),U),ce(O,D(aU,{get asset(){return c()}}),null),ce(A,D(We,{get when(){return!f()},get fallback(){return _Ne()},get children(){var H=yNe(),ue=H.firstChild,le=ue.nextSibling,we=le.firstChild;return ce(ue,D(We,{get when(){return x()},fallback:"0.00",get children(){return D(ya,{get children(){return x()}})}})),ce(le,D(vn,{get value(){return u()?.outUsdValue??0},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}}),we),ce(le,D(pX,{get classList(){return{hidden:!u()?.priceImpact}},get priceImpact(){return u()?.priceImpact},prefix:"(",suffix:")"}),null),ht(()=>ue.classList.toggle("text-zinc-500",!x())),H}}),null),ce(k,D(We,{get when(){return Or(()=>!f()&&u()?.errorCode!==1)()&&u()?.error},children:H=>(()=>{var ue=SNe();return ce(ue,H),ue})()}),Z),Z.$$click=()=>v(!y()),ce(oe,D(We,{get when(){return Or(()=>!!c())()&&n()},get fallback(){return ENe()},get children(){return D(gX,{class:"text-sm font-medium",get classList(){return{"text-zinc-500":f()||u()==null}},get buyAsset(){return c()},get sellAsset(){return n()},get quote(){return Or(()=>!!f())()?null:u()}})}}),he),ce(oe,D(We,{get when(){return Or(()=>!y())()&&u()?.transaction},get children(){return D(ST,{get isLoading(){return f()},get quote(){return u()},class:"text-sm text-zinc-400 font-medium"})}}),re),ce(Z,D(We,{get when(){return y()},get children(){return D(Lt,{get each(){return[{title:"Min Receive",value:D(dX,{get isLoading(){return f()}})},{title:"Network Fee",value:D(ST,{get isLoading(){return f()},get quote(){return u()}})},{title:"Platform Fee",value:D(uNe,{get isLoading(){return f()},get feeBps(){return u()?.platformFee?.feeBps??0}})}]},children:({title:H,value:ue})=>(()=>{var le=ANe(),we=le.firstChild,ie=we.nextSibling;return ce(we,H),ce(ie,ue),le})()})}}),null),ce(F,D(yr,{get children(){return[D(Ne,{get when(){return d()?.type==="readonly"},get children(){return vNe()}}),D(Ne,{get when(){return b()},get children(){return D(uX,{})}}),D(Ne,{get when(){return _()},get children(){return D(fX,{get tokens(){return[n(),c()]},type:"swap"})}})]}})),ce(k,D(fs,{onCancelClick:()=>r(),onApproveClick:()=>e(Di.REVIEW),approveTitle:"Review",get isApproveDisabled(){return!E()}}),null),ht(()=>re.classList.toggle("rotate-180",!!y())),k})()};Yt(["click"]);var CNe=ye('<div class="flex items-center gap-1.5"><div> '),TNe=ye("<div> "),RNe=ye('<div class="size-16 bg-primary-200/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:loader-2 animate-spin text-primary-200">'),kNe=ye('<div class="size-16 bg-green-400/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:check text-green-400">'),PNe=ye('<div class="size-16 bg-red-400/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:x text-red-400">'),ONe=ye('<div class="flex space-x--4">'),DNe=ye('<div class="flex-1 p-4 flex flex-col mb-4"><div class="flex flex-col items-center justify-center mb-5"><div class=my-6></div><div class="text-2xl font-semibold"></div><div class="text-zinc-400 font-medium mt-2"><span class=text-zinc-50> </span> to <span class=text-zinc-50></span></div></div><div class="divide-y divide-zinc-800 rounded-xl bg-zinc-900">'),$Ne=ye('<div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400></div><div class=font-medium>'),MNe=ye('<div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400>Transaction</div><button class="font-medium flex items-center text-primary-200 cursor-pointer"><div class="i-tabler:external-link size-4.5 mr-1">');const BNe=()=>{const{setView:r,sellAsset:e,buyAsset:t,quote:n,disableQuoteRefresh:i}=pm(),s=ra(),{selectedAccount:o}=Jr(),a=ke(()=>o()?.address),[c,l]=$e("idle"),[u,f]=$e(null),{fromChainAmount:h}=Ic(),d=ke(()=>h(u()?.inputAmountResult??n()?.inAmount??"0",e()?.decimals??0)),g=ke(()=>h(u()?.outputAmountResult??n()?.outAmount??"0",t()?.decimals??0)),p=ke(()=>c()==="idle"&&!!n()?.transaction),m=ke(()=>[{title:c()==="tx_success"?"Sold":"Selling",value:(()=>{var v=CNe(),b=v.firstChild,_=b.firstChild;return ce(v,D(Rn,{get src(){return e()?.icon},class:"size-4.5 ring-0"}),b),ce(b,D(vn,{get value(){return Number(d())},override:{minimumFractionDigits:0,maximumFractionDigits:9}}),_),ce(b,()=>e()?.symbol||e()?.id.slice(0,4),null),v})()},{title:c()==="tx_success"?"Bought":"Buying",value:D(ya,{class:"flex items-center gap-1.5",get children(){return[D(Rn,{get src(){return t()?.icon},class:"size-4.5 ring-0"}),(()=>{var v=TNe(),b=v.firstChild;return ce(v,D(vn,{get value(){return Number(g())},override:{minimumFractionDigits:0,maximumFractionDigits:9}}),b),ce(v,()=>t()?.symbol||t()?.id.slice(0,4),null),v})()]}})},...u()?.signature?[]:[{title:"Min Receive",value:D(dX,{isLoading:!1})},{title:"Price Impact",value:D(pX,{get priceImpact(){return n()?.priceImpact}})}],{title:"Rate",value:D(gX,{get buyAsset(){return t()},get sellAsset(){return e()},get quote(){return n()}})},{title:"Network Fee",value:D(ST,{get quote(){return n()},isLoading:!1})}]);async function y(){const{transaction:v,requestId:b}=n()??{};if(!(!v||!b)){i(),l("tx_sending");try{const{signedTransaction:_}=o()?.type==="privy"?{signedTransaction:await Wg.signTransaction(v)}:await _r.signTransaction({origin:window.location.origin,signerAddress:a(),transaction:v,skipApproval:!0}),x=await s6.postExecute({requestId:b,signedTransaction:_});f(x),l(x.code===0?"tx_success":"tx_error")}catch(_){console.error(_),l("tx_error")}finally{s.refetch()}}}return(()=>{var v=DNe(),b=v.firstChild,_=b.firstChild,x=_.nextSibling,E=x.nextSibling,S=E.firstChild,C=S.firstChild,k=S.nextSibling,$=k.nextSibling,J=b.nextSibling;return ce(_,D(yr,{get children(){return[D(Ne,{get when(){return c()==="tx_sending"},get children(){return RNe()}}),D(Ne,{get when(){return c()==="tx_success"},get children(){return kNe()}}),D(Ne,{get when(){return c()==="tx_error"},get children(){return PNe()}}),D(Ne,{when:!0,get children(){var j=ONe();return ce(j,D(Rn,{hd:!0,class:"size-16",get src(){return e()?.icon}}),null),ce(j,D(Rn,{hd:!0,class:"size-16",get src(){return t()?.icon}}),null),j}})]}})),ce(x,D(yr,{get children(){return[D(Ne,{get when(){return c()==="tx_sending"},children:"Swapping..."}),D(Ne,{get when(){return c()==="tx_success"},children:"Successfully Swapped"}),D(Ne,{get when(){return c()==="tx_error"},children:"Failed to Swap"}),D(Ne,{when:!0,children:"Confirm Swap"})]}})),ce(S,D(vn,{get value(){return Number(d())},override:{minimumFractionDigits:0,maximumFractionDigits:6}}),C),ce(S,()=>e()?.symbol||e()?.id.slice(0,4),null),ce($,D(ya,{get children(){return[D(vn,{get value(){return Number(g())},override:{minimumFractionDigits:0,maximumFractionDigits:6}})," ",Or(()=>t()?.symbol||t()?.id.slice(0,4))]}})),ce(J,D(Lt,{get each(){return m()},children:({title:j,value:L})=>(()=>{var w=$Ne(),R=w.firstChild,N=R.nextSibling;return ce(R,j),ce(N,L),w})()}),null),ce(J,D(We,{get when(){return u()?.signature},children:j=>(()=>{var L=MNe(),w=L.firstChild,R=w.nextSibling;return R.firstChild,R.$$click=()=>window.open(`https://solscan.io/tx/${j()}`,"_blank"),ce(R,D(Yo,{get address(){return j()}}),null),L})()}),null),ce(v,D(fs,{onCancelClick:()=>r(Di.FORM),onApproveClick:()=>y(),get cancelTitle(){return c()==="tx_success"?"Close":"Back"},approveTitle:"Swap",get isApproveDisabled(){return!p()}}),null),v})()};Yt(["click"]);const NNe=()=>D(FBe,{get children(){return D(LNe,{})}}),LNe=()=>{const{view:r}=pm();return D(yr,{get children(){return[D(Ne,{get when(){return r()===Di.FORM},get children(){return D(INe,{})}}),D(Ne,{get when(){return r()===Di.SELL_ASSET||r()===Di.BUY_ASSET},get children(){return D(GBe,{})}}),D(Ne,{get when(){return r()===Di.REVIEW},get children(){return D(BNe,{})}})]}})};var FNe=ye(`<div class="p-4 h-600px flex flex-col justify-between gap-3"><button class="p-2 -m-2 text-zinc-400 hover:text-zinc-50 cursor-pointer transition-100"><div class="i-tabler:arrow-left size-6"></div></button><div class="flex-1 flex flex-col items-center justify-center"><h1 class="font-semibold text-3xl mt-8 mb-6">Forgot your password?</h1><p class="opacity-60 text-center leading-5">Unfortunately, we can't retrieve your password since it's stored solely on your device. You can either attempt more passwords, or do a full wipe and reset of your wallet.</p></div><button class="cursor-pointer w-full p-2.5 rounded-md text-lg font-semibold transition-100 bg-zinc-800 active:bg-zinc-800/75 text-zinc-300">Try More Passwords</button><button class="cursor-pointer w-full p-2.5 rounded-md text-lg font-semibold transition-100 bg-red-500 active:bg-red-700">Wipe & Reset Wallet`);const UNe=r=>{const e=Ws();function t(){e.confirm({title:"Confirm Reset Wallet",content:"This will permanently wipe your wallet and reset it to the default state and cannot be undone. Ensure that you have backed up your wallet before proceeding!",confirmText:"Reset",confirmStyle:"danger",onConfirm:async()=>{await _r.factoryReset({}),window.open(`/popup.html#${vt.ONBOARD}`,"_blank"),window.close()}})}return(()=>{var n=FNe(),i=n.firstChild,s=i.nextSibling,o=s.firstChild,a=s.nextSibling,c=a.nextSibling;return zs(i,"click",r.showUnlockView,!0),ce(s,D(Lg,{class:"saturate-0 size-20 my-8"}),o),zs(a,"click",r.showUnlockView,!0),c.$$click=t,n})()};Yt(["click"]);var zNe=ye('<div class="p-4 h-600px flex flex-col justify-between gap-3"><div class="flex-1 flex flex-col justify-center items-center"><h1 class="font-semibold text-3xl mt-8 mb-2">Welcome Back</h1><p class="opacity-60 text-lg">Your personal portal into Solana</p></div><form><div class=relative><input class="py-2.5 px-3 w-full bg-zinc-900 ring-1 rounded-md text-lg outline-none transition-100"placeholder="Enter password to unlock"id=password-input name=password-input minlength=6><button class="absolute right-0 h-12 px-3.5 text-zinc-500 hover:text-zinc-300 cursor-pointer transition-100"type=button><div class=size-5.5></div></button></div><button class="cursor-pointer w-full p-2.5 mt-4 rounded-md text-lg font-semibold transition-100"type=submit></button></form><div class="flex justify-end"><button class="text-zinc-400 hover:text-zinc-50 font-medium cursor-pointer transition-100">Forgot Password?');const fU="password-input",qNe=r=>{const{unlock:e}=Jr(),[t,n]=$e(!0),[i,s]=$e(""),[o]=Uf(),a=ke(()=>typeof o.id!="string"?null:o.id||null);async function c(l){l.preventDefault();const f=new FormData(l.target).get(fU)?.toString().trim()||"";try{a()?(await _r.unlock({password:f}),await _r.approve({id:a()||"",isApproved:!0})):await e({password:f})}catch{s("Incorrect Password")}}return Dr(()=>document.getElementById(fU)?.focus()),[D(VY,{raysOrigin:"top-center",raysColor:"#C7F284",raysSpeed:.25,lightSpread:.69,rayLength:4.2,followMouse:!1,noiseAmount:.1,distortion:.03,class:"fixed inset-0 pointer-events-none z--1"}),(()=>{var l=zNe(),u=l.firstChild,f=u.firstChild,h=u.nextSibling,d=h.firstChild,g=d.firstChild,p=g.nextSibling,m=p.firstChild,y=d.nextSibling,v=h.nextSibling,b=v.firstChild;return ce(u,D(Lg,{class:"size-20"}),f),h.addEventListener("submit",_=>c(_)),g.$$input=()=>s(""),p.$$click=_=>{_.preventDefault(),n(!t())},ce(y,D(We,{get when(){return i()},fallback:"Unlock",get children(){return i()}})),zs(b,"click",r.showForgotPasswordView,!0),ht(_=>{var x={"ring-red-400":!!i(),"ring-zinc-700 focus:ring-primary-200":!i()},E=t()?"password":"text",S={"i-tabler:eye":!t(),"i-tabler:eye-off":t()},C={"cursor-not-allowed bg-zinc-700 text-zinc-400":!!i(),"bg-primary-200 active:bg-primary-200/80 text-zinc-950":!i()},k=!!i();return _.e=Gr(g,x,_.e),E!==_.t&&Mr(g,"type",_.t=E),_.a=Gr(m,S,_.a),_.o=Gr(y,C,_.o),k!==_.i&&(y.disabled=_.i=k),_},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),l})()]};Yt(["input","click"]);const jNe=()=>{const[r,e]=$e("unlock");return D(yr,{get children(){return[D(Ne,{get when(){return r()==="unlock"},get children(){return D(qNe,{showForgotPasswordView:()=>e("forgot-password")})}}),D(Ne,{get when(){return r()==="forgot-password"},get children(){return D(UNe,{showUnlockView:()=>e("unlock")})}})]}})},VNe=()=>{const r=xf===oc.SIDE_PANEL?YJ:WJ;return D(r,{root:KNe,get children(){return[D(Zn,{get path(){return vt.ROOT},component:BBe}),D(Zn,{get path(){return vt.ONBOARD},component:kMe}),D(Zn,{get path(){return vt.HOME},component:I4e}),D(Zn,{get path(){return vt.UNLOCK},component:jNe}),D(Zn,{get path(){return vt.APPROVE_CONNECT},component:ide}),D(Zn,{get path(){return vt.APPROVE_TRANSACTION},component:DCe}),D(Zn,{get path(){return vt.APPROVE_MESSAGE},component:y0e}),D(Zn,{get path(){return vt.RECEIVE},component:qMe}),D(Zn,{get path(){return vt.SEND},component:mBe}),D(Zn,{get path(){return vt.SWAP},component:NNe}),D(Zn,{get path(){return vt.ACCOUNTS},component:Rhe}),D(Zn,{get path(){return vt.ACCOUNTS_RENAME()},component:she}),D(Zn,{get path(){return vt.ACCOUNTS_KEY()},component:the}),D(Zn,{get path(){return vt.ASSETS()},component:R3e}),D(Zn,{get path(){return vt.SETTINGS},component:MBe}),D(Zn,{get path(){return vt.SETTINGS_AUTO_APPROVE},component:bBe}),D(Zn,{get path(){return vt.SETTINGS_CONNECTED_APPS},component:OBe}),D(Zn,{get path(){return vt.SETTINGS_AUTO_LOCK},component:SBe}),D(Zn,{get path(){return vt.SETTINGS_CHANGE_PASSWORD},component:TBe}),D(Zn,{get path(){return vt.PNL},component:UMe})]}})},KNe=r=>{const e=new OQ;return D(BQ,{get children(){return D(wU,{fallback:(t,n)=>D(UQ,{error:t,reset:n}),get children(){return D(TQ,{client:e,get children(){return D(wJ,{values:[Lee,Nee,zee,jQ],get children(){return D(zfe,{get children(){return r.children}})}})}})}})}})};(async()=>(bJ(),await _r.init(),qX(()=>D(VNe,{}),document.getElementById("root"))))();export{Xe as B,Gs as g};
